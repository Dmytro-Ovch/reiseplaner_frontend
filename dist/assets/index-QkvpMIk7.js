const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/statsWorker-CHCUN0eN.js","assets/utils-Wcfc1Po4.js","assets/utils-DQF9cvso.js","assets/ClassBreaksDefinition-ClFwMaCE.js","assets/geometryEngineWorker-BNwIbmiN.js","assets/geometryEngineJSON-Dr6Udo8L.js","assets/geometryEngineBase-DGkk6OIh.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-BrYVQ4qq.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-8O8IuYZ9.js","assets/executeQueryForSnapping-BDheDVHb.js","assets/queryUtils-B-kse6tI.js","assets/QueryEngine-Dy2qxs45.js","assets/featureConversionUtils-CsZC9PhT.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/WhereClauseCache-DL5oMt3h.js","assets/WhereClause-D_C1nkNM.js","assets/timeSupport-BkBNQKQF.js","assets/QueryEngineCapabilities-CsRUnGk7.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-C7F5rWj1.js","assets/FeatureStore-CXj6Dez3.js","assets/BoundsStore-C9SYV3kM.js","assets/PooledRBush-BhumcCHg.js","assets/optimizedFeatureQueryEngineAdapter-eX4IF9qz.js","assets/number-B2naH1WC.js","assets/clientSideDefaults-DuKvHdmJ.js","assets/EdgeProcessingWorker-Bflj28er.js","assets/workerHelper-YXTvH-8Q.js","assets/InterleavedLayout-Dge4pVtG.js","assets/BufferView-l8sulUOE.js","assets/types-BKo2foNY.js","assets/edgeProcessing-DVwka0IW.js","assets/deduplicate-CIk5kNrn.js","assets/Indices-C_Z1drSa.js","assets/VertexAttribute-BfkzOMLV.js","assets/glUtil-B1HCV9w_.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-B_j2VyZA.js","assets/ElevationSamplerWorker-BxB1E7L5.js","assets/MeshLocalVertexSpace-BMtgzdl7.js","assets/vertexSpaceConversion-n6G9TVAm.js","assets/mat3f64-B5o_lm6j.js","assets/mat4f64-q_b6UJoq.js","assets/spatialReferenceEllipsoidUtils-U6Zgm5EN.js","assets/computeTranslationToOriginAndRotation-CW0figPu.js","assets/projectPointToVector-BILKLplS.js","assets/meshVertexSpaceUtils-CUM33A6r.js","assets/vec3-qJEroW7E.js","assets/vec4-C2mwEtxg.js","assets/FeatureServiceSnappingSourceWorker-jP8gGwc9.js","assets/symbologySnappingCandidates-BafCalIK.js","assets/pbfQueryUtils-BM2vnFyT.js","assets/pbf-DJ7F80OV.js","assets/query-aNc8MPpg.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/GeoJSONSourceWorker-Bv4BPQdI.js","assets/geojson-B41SSyHh.js","assets/sourceUtils-D8ou8u3Z.js","assets/MemorySourceWorker-ByGKgPRK.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-Ddgdgl6r.js","assets/dehydratedFeatures-C7Q_YvD2.js","assets/FeaturePipelineWorker-is4hQYag.js","assets/AttributeStore-B_bchY8j.js","assets/Utils-BR4_VwFo.js","assets/UpdateTracking2D-BISfrhqP.js","assets/constants-BFLErLYb.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-PjJXq6EX.js","assets/TechniqueType-pk2C5RYg.js","assets/PieChartMeshWriter-CTNiaELb.js","assets/libtess-eVZZwl7O.js","assets/earcut-D9gy186-.js","assets/QueueProcessor-CRNlWwV5.js","assets/operatorGeodeticDensify-BqjaGZOm.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-BodsIjPk.js","assets/ogcFeatureUtils-OcAI_VYI.js","assets/bundle-B2FM5W1M.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-Cq3JsrB4.js","assets/PointCloudWorker-CMzFQ_-Q.js","assets/quat-CnMdA8TL.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-Ci3jSMWr.js","assets/I3SBinaryReader-BG3eAo7V.js","assets/orientedBoundingBox-BM6HT6Q7.js","assets/plane-BPUB1pav.js","assets/vectorStacks-CaX-bvv_.js","assets/RasterWorker-IYEAwsYq.js","assets/GeographicTransformation-D0BszLgu.js","assets/dataUtils-Bo8zo9rQ.js","assets/RasterSymbolizer-DyCb-vVy.js","assets/rasterFunctionHelper-Dj-N4OYr.js","assets/clipUtils-Ct7pLQW1.js","assets/rasterProjectionHelper-DL2r5rAQ.js","assets/PolynomialTransform-C2U18Job.js","assets/SceneLayerSnappingSourceWorker-CzascGVF.js","assets/lineSegment-DRtr6fAc.js","assets/sphere-C0AiRlgs.js","assets/Octree-D9X1ljvb.js","assets/SceneLayerWorker-Bo3eIsHC.js","assets/projectVectorToVector-VePns3Q2.js","assets/I3SUtil-Vnjke0L9.js","assets/edgeUtils-CYyJufSY.js","assets/NormalAttribute.glsl-DC-h_xT5.js","assets/glsl-Cj7KC756.js","assets/ShaderOutput-Bdd80V3g.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-CK9toHy2.js","assets/wfsUtils-BR4ZKZp2.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-hhyoUSDl.js","assets/constants-BwsikM5h.js","assets/config-DHajyIwB.js","assets/StyleDefinition-DN8wMrd4.js","assets/SourceLayerData-BIeORz0_.js","assets/StyleRepository-xnc9aM87.js","assets/Feature3DPipelineWorker-DxrxoKSs.js","assets/dehydratedFeatureUtils-CHQMNsO7.js","assets/hydratedFeatures-i09WTjL7.js","assets/OutputColorHighlightOID.glsl-DmPlvvIb.js","assets/videoUtils-OFgbIVvC.js","assets/requestImageUtils-CaFDQBck.js","assets/basicInterfaces-N86vRvDz.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-DXDNcrEx.js","assets/renderState-BIdw_But.js","assets/boundedPlane-CH7pEjky.js","assets/HUDMaterial.glsl-D68Qz2hq.js","assets/ShaderBuilder-CY5k4yXq.js","assets/HUDMaterial-B1ABvSLT.js","assets/primitiveObjectSymbolUtils-BSUHEJgy.js","assets/IntersectorType-gQim6TH1.js","assets/RealisticTree.glsl-DE5wQJU5.js","assets/TextureCompressionWorker-Dl8maHM-.js","assets/Popup-BLugrt0E.js","assets/unitFormatUtils-aadyf_Ry.js","assets/quantityUtils-DCmt8Dxi.js","assets/AttachmentInfo-B87-2hkp.js","assets/featureUtils-BZiWvzTY.js","assets/executeQueryJSON-BLDcQ_t8.js","assets/shared-CHtnJegu.js","assets/ReactiveSet-D1eyhMah.js","assets/ElevationLayer-BZVfN3Bx.js","assets/ArcGISCachedService-BOB9o238.js","assets/TileInfoTilemapCache-Cc0enj69.js","assets/TilemapCache-DoDDL35-.js","assets/WorkerHandle-Be7dqXoG.js","assets/layersCreator-CLMvck7j.js","assets/loadUtils-dNHqtiwQ.js","assets/fetchService-m9DKWZIZ.js","assets/associatedFeatureServiceUtils-B9yeEoR3.js","assets/lazyLayerLoader-V4XFDU6C.js","assets/portalLayers-dAgcwqck.js","assets/arcgisLayers-W9ASXq-b.js","assets/arcadeUtils-BPdWR_C6.js","assets/arcade-qbG8exkM.js","assets/aiServices-BjoUSC6d.js","assets/ImmutableArray-BPVd6ESQ.js","assets/unitConversion-C4PuqiYi.js","assets/batchExec-Riyr7TX3.js","assets/webglDeps-Dkg07OCJ.js","assets/ProgramTemplate-CPARWaXn.js","assets/FramebufferObject-ySPNeOOU.js","assets/NestedMap-BVvDppQU.js","assets/mapViewDeps-DJMJQ6ic.js","assets/FeatureCommandQueue-D4i-R5HB.js","assets/GraphShaderModule-Dmdzicna.js","assets/utils-Fh9MujDI.js","assets/WGLContainer-D2LaG-w2.js","assets/Container-Cos9mg9W.js","assets/SDFHelper-B8TpUbKg.js","assets/GridShader-FDt9r0Wl.js","assets/testSVGPremultipliedAlpha-Bzkl4BO3.js","assets/SymbolFader-DN-owL0g.js","assets/RenderingContext-ByljwCCz.js","assets/utils-DPpcV57X.js","assets/utils-ehcGqGxa.js","assets/projectOperator-BB8N6Wg4.js","assets/GraphicsView2D--fCpvUlQ.js","assets/GraphicContainer-BP-De20I.js","assets/AGraphicContainer-BfHCce1B.js","assets/TechniqueInstance-9T7otJbk.js","assets/TileContainer-BEQegsv4.js","assets/gridUtils-BXfAANKS.js","assets/geodesicUtils-DBSMsPo-.js","assets/TileLayerView2D-BNy0T8WW.js","assets/imageUtils-BrkFB7ni.js","assets/BitmapTechnique-DapUKcUV.js","assets/bitmapUtils-CdX76RhC.js","assets/LayerView-1WveAzi6.js","assets/HighlightGraphicContainer-BZyJgWGa.js","assets/RefreshableLayerView-BxkF7Gi5.js","assets/MapServiceLayerViewHelper-CHmArlHM.js","assets/drapedUtils-CXXxnxi3.js","assets/popupUtils-BFG6nq6J.js","assets/FeatureLayerView2D-BGx2o-fa.js","assets/timeSupport-C1WrLtZO.js","assets/AttributeBinsFeatureSet-BrrEqRMI.js","assets/AttributeBinsQuery-BB1Il91z.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-CAlqDZDu.js","assets/BitmapContainer-Bvis_FPt.js","assets/ExportStrategy-CCfh-MjL.js","assets/CatalogLayerView2D-B5YXHVND.js","assets/CatalogDynamicGroupLayerView2D-DaMszXIL.js","assets/CatalogFootprintLayerView2D-V0EQN4Qs.js","assets/GeoRSSLayerView2D-R77DkABL.js","assets/GraphicsLayerView2D-CqBAIY0l.js","assets/GroupLayerView2D-DdKYBL_n.js","assets/ImageryLayerView2D-Bj4SE6LA.js","assets/RasterVFDisplayObject-Bnv79T4R.js","assets/ImageryTileLayerView2D-mxBkAj9y.js","assets/rasterFieldUtils-WuiktgZ5.js","assets/rasterUtils-C3lgM7Nt.js","assets/RawBlockCache-Bs5Uin4M.js","assets/KMLLayerView2D-CkEx0A85.js","assets/kmlUtils-BjoeUxQK.js","assets/KnowledgeGraphLayerView2D-y0LS7Ocp.js","assets/MapImageLayerView2D-BSmdpxkl.js","assets/MapNotesLayerView2D-DKFUm8NO.js","assets/MediaLayerView2D-BEKdgwjr.js","assets/mediaLayerUtils-Cbs8zr4K.js","assets/OverlayContainer-CCmmd8h3.js","assets/OGCFeatureLayerView2D-Dj3kGhni.js","assets/RouteLayerView2D-DmtO0-y1.js","assets/Stop-BzaHdYTU.js","assets/networkEnums-mKOOveBT.js","assets/StreamLayerView2D-D6xgTyRX.js","assets/SubtypeGroupLayerView2D-C1Md6UJZ.js","assets/VectorTileLayerView2D-CISBnooM.js","assets/VideoLayerView2D-BYzKVqvN.js","assets/videoUtils-PT-QcqUI.js","assets/WMSLayerView2D-C4DG7zw1.js","assets/ExportWMSImageParameters-BXnARgdA.js","assets/WMTSLayerView2D-Y4_AP4po.js","assets/apng-DmoNkkxS.js","assets/webdocSaveUtils-BhxnKJWs.js","assets/originUtils-CmavecP1.js","assets/basemapUtils-CpL_JwCq.js","assets/resourceUtils-CAXY1SqC.js","assets/resourceUtils-CVNSN7md.js","assets/saveUtils-BEzN3pju.js","assets/layersLoader-BQn_Xigk.js","assets/featureLayerUtils-uuWOo9gl.js","assets/utils-Bo80ka0w.js","assets/FeatureLayerSource-B-9ixRaK.js","assets/External-DDFsacbb.js","assets/applyEditsUtils-CL6TEGrI.js","assets/MeshTransform-Dicsm5_2.js","assets/axisAngleDegrees-Dme_d0sF.js","assets/editingSupport-D1sg11d_.js","assets/QueryTask-BYx7G3vv.js","assets/executeForIds-D9FifWCU.js","assets/queryAssociations-Cmii3SjZ.js","assets/Association-Cvn2wur0.js","assets/synthesizeAssociationGeometries-BgDHAf8j.js"])))=>i.map(i=>d[i]);
var cFe=Object.defineProperty;var uFe=Object.getPrototypeOf;var hFe=Reflect.get;var Xse=t=>{throw TypeError(t)};var dFe=(t,e,i)=>e in t?cFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var Fi=(t,e,i)=>dFe(t,typeof e!="symbol"?e+"":e,i),OB=(t,e,i)=>e.has(t)||Xse("Cannot "+i);var me=(t,e,i)=>(OB(t,e,"read from private field"),i?i.call(t):e.get(t)),pt=(t,e,i)=>e.has(t)?Xse("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),nt=(t,e,i,r)=>(OB(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),si=(t,e,i)=>(OB(t,e,"access private method"),i);var LB=(t,e,i)=>hFe(uFe(t),i,e);function pFe(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const s=Object.getOwnPropertyDescriptor(r,n);s&&Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function Qp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RB={exports:{}},fM={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qse;function fFe(){if(Qse)return fM;Qse=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var a in n)a!=="key"&&(s[a]=n[a])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:o,ref:n!==void 0?n:null,props:s}}return fM.Fragment=e,fM.jsx=i,fM.jsxs=i,fM}var eoe;function mFe(){return eoe||(eoe=1,RB.exports=fFe()),RB.exports}var H=mFe(),NB={exports:{}},ui={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var toe;function yFe(){if(toe)return ui;toe=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T(X,_e,ke){this.props=X,this.context=_e,this.refs=_,this.updater=ke||v}T.prototype.isReactComponent={},T.prototype.setState=function(X,_e){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,_e,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function $(){}$.prototype=T.prototype;function I(X,_e,ke){this.props=X,this.context=_e,this.refs=_,this.updater=ke||v}var A=I.prototype=new $;A.constructor=I,w(A,T.prototype),A.isPureReactComponent=!0;var k=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function B(X,_e,ke,qe,Ke,Qe){return ke=Qe.ref,{$$typeof:t,type:X,key:_e,ref:ke!==void 0?ke:null,props:Qe}}function q(X,_e){return B(X.type,_e,void 0,void 0,void 0,X.props)}function Y(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function J(X){var _e={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ke){return _e[ke]})}var Q=/\/+/g;function te(X,_e){return typeof X=="object"&&X!==null&&X.key!=null?J(""+X.key):_e.toString(36)}function re(){}function ee(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(re,re):(X.status="pending",X.then(function(_e){X.status==="pending"&&(X.status="fulfilled",X.value=_e)},function(_e){X.status==="pending"&&(X.status="rejected",X.reason=_e)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ye(X,_e,ke,qe,Ke){var Qe=typeof X;(Qe==="undefined"||Qe==="boolean")&&(X=null);var Xe=!1;if(X===null)Xe=!0;else switch(Qe){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(X.$$typeof){case t:case e:Xe=!0;break;case u:return Xe=X._init,ye(Xe(X._payload),_e,ke,qe,Ke)}}if(Xe)return Ke=Ke(X),Xe=qe===""?"."+te(X,0):qe,k(Ke)?(ke="",Xe!=null&&(ke=Xe.replace(Q,"$&/")+"/"),ye(Ke,_e,ke,"",function(it){return it})):Ke!=null&&(Y(Ke)&&(Ke=q(Ke,ke+(Ke.key==null||X&&X.key===Ke.key?"":(""+Ke.key).replace(Q,"$&/")+"/")+Xe)),_e.push(Ke)),1;Xe=0;var di=qe===""?".":qe+":";if(k(X))for(var qt=0;qt<X.length;qt++)qe=X[qt],Qe=di+te(qe,qt),Xe+=ye(qe,_e,ke,Qe,Ke);else if(qt=m(X),typeof qt=="function")for(X=qt.call(X),qt=0;!(qe=X.next()).done;)qe=qe.value,Qe=di+te(qe,qt++),Xe+=ye(qe,_e,ke,Qe,Ke);else if(Qe==="object"){if(typeof X.then=="function")return ye(ee(X),_e,ke,qe,Ke);throw _e=String(X),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function ne(X,_e,ke){if(X==null)return X;var qe=[],Ke=0;return ye(X,qe,"","",function(Qe){return _e.call(ke,Qe,Ke++)}),qe}function ue(X){if(X._status===-1){var _e=X._result;_e=_e(),_e.then(function(ke){(X._status===0||X._status===-1)&&(X._status=1,X._result=ke)},function(ke){(X._status===0||X._status===-1)&&(X._status=2,X._result=ke)}),X._status===-1&&(X._status=0,X._result=_e)}if(X._status===1)return X._result.default;throw X._result}var he=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(_e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function Ne(){}return ui.Children={map:ne,forEach:function(X,_e,ke){ne(X,function(){_e.apply(this,arguments)},ke)},count:function(X){var _e=0;return ne(X,function(){_e++}),_e},toArray:function(X){return ne(X,function(_e){return _e})||[]},only:function(X){if(!Y(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},ui.Component=T,ui.Fragment=i,ui.Profiler=n,ui.PureComponent=I,ui.StrictMode=r,ui.Suspense=l,ui.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ui.__COMPILER_RUNTIME={__proto__:null,c:function(X){return R.H.useMemoCache(X)}},ui.cache=function(X){return function(){return X.apply(null,arguments)}},ui.cloneElement=function(X,_e,ke){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var qe=w({},X.props),Ke=X.key,Qe=void 0;if(_e!=null)for(Xe in _e.ref!==void 0&&(Qe=void 0),_e.key!==void 0&&(Ke=""+_e.key),_e)!F.call(_e,Xe)||Xe==="key"||Xe==="__self"||Xe==="__source"||Xe==="ref"&&_e.ref===void 0||(qe[Xe]=_e[Xe]);var Xe=arguments.length-2;if(Xe===1)qe.children=ke;else if(1<Xe){for(var di=Array(Xe),qt=0;qt<Xe;qt++)di[qt]=arguments[qt+2];qe.children=di}return B(X.type,Ke,void 0,void 0,Qe,qe)},ui.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:s,_context:X},X},ui.createElement=function(X,_e,ke){var qe,Ke={},Qe=null;if(_e!=null)for(qe in _e.key!==void 0&&(Qe=""+_e.key),_e)F.call(_e,qe)&&qe!=="key"&&qe!=="__self"&&qe!=="__source"&&(Ke[qe]=_e[qe]);var Xe=arguments.length-2;if(Xe===1)Ke.children=ke;else if(1<Xe){for(var di=Array(Xe),qt=0;qt<Xe;qt++)di[qt]=arguments[qt+2];Ke.children=di}if(X&&X.defaultProps)for(qe in Xe=X.defaultProps,Xe)Ke[qe]===void 0&&(Ke[qe]=Xe[qe]);return B(X,Qe,void 0,void 0,null,Ke)},ui.createRef=function(){return{current:null}},ui.forwardRef=function(X){return{$$typeof:a,render:X}},ui.isValidElement=Y,ui.lazy=function(X){return{$$typeof:u,_payload:{_status:-1,_result:X},_init:ue}},ui.memo=function(X,_e){return{$$typeof:c,type:X,compare:_e===void 0?null:_e}},ui.startTransition=function(X){var _e=R.T,ke={};R.T=ke;try{var qe=X(),Ke=R.S;Ke!==null&&Ke(ke,qe),typeof qe=="object"&&qe!==null&&typeof qe.then=="function"&&qe.then(Ne,he)}catch(Qe){he(Qe)}finally{R.T=_e}},ui.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ui.use=function(X){return R.H.use(X)},ui.useActionState=function(X,_e,ke){return R.H.useActionState(X,_e,ke)},ui.useCallback=function(X,_e){return R.H.useCallback(X,_e)},ui.useContext=function(X){return R.H.useContext(X)},ui.useDebugValue=function(){},ui.useDeferredValue=function(X,_e){return R.H.useDeferredValue(X,_e)},ui.useEffect=function(X,_e,ke){var qe=R.H;if(typeof ke=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return qe.useEffect(X,_e)},ui.useId=function(){return R.H.useId()},ui.useImperativeHandle=function(X,_e,ke){return R.H.useImperativeHandle(X,_e,ke)},ui.useInsertionEffect=function(X,_e){return R.H.useInsertionEffect(X,_e)},ui.useLayoutEffect=function(X,_e){return R.H.useLayoutEffect(X,_e)},ui.useMemo=function(X,_e){return R.H.useMemo(X,_e)},ui.useOptimistic=function(X,_e){return R.H.useOptimistic(X,_e)},ui.useReducer=function(X,_e,ke){return R.H.useReducer(X,_e,ke)},ui.useRef=function(X){return R.H.useRef(X)},ui.useState=function(X){return R.H.useState(X)},ui.useSyncExternalStore=function(X,_e,ke){return R.H.useSyncExternalStore(X,_e,ke)},ui.useTransition=function(){return R.H.useTransition()},ui.version="19.1.1",ui}var ioe;function ST(){return ioe||(ioe=1,NB.exports=yFe()),NB.exports}var U=ST();const xD=Qp(U),gFe=pFe({__proto__:null,default:xD},[U]);var DB={exports:{}},mM={},FB={exports:{}},zB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var roe;function vFe(){return roe||(roe=1,(function(t){function e(ne,ue){var he=ne.length;ne.push(ue);e:for(;0<he;){var Ne=he-1>>>1,X=ne[Ne];if(0<n(X,ue))ne[Ne]=ue,ne[he]=X,he=Ne;else break e}}function i(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ue=ne[0],he=ne.pop();if(he!==ue){ne[0]=he;e:for(var Ne=0,X=ne.length,_e=X>>>1;Ne<_e;){var ke=2*(Ne+1)-1,qe=ne[ke],Ke=ke+1,Qe=ne[Ke];if(0>n(qe,he))Ke<X&&0>n(Qe,qe)?(ne[Ne]=Qe,ne[Ke]=he,Ne=Ke):(ne[Ne]=qe,ne[ke]=he,Ne=ke);else if(Ke<X&&0>n(Qe,he))ne[Ne]=Qe,ne[Ke]=he,Ne=Ke;else break e}}return ue}function n(ne,ue){var he=ne.sortIndex-ue.sortIndex;return he!==0?he:ne.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,v=!1,w=!1,_=!1,T=!1,$=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(ne){for(var ue=i(c);ue!==null;){if(ue.callback===null)r(c);else if(ue.startTime<=ne)r(c),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=i(c)}}function R(ne){if(_=!1,k(ne),!w)if(i(l)!==null)w=!0,F||(F=!0,te());else{var ue=i(c);ue!==null&&ye(R,ue.startTime-ne)}}var F=!1,B=-1,q=5,Y=-1;function J(){return T?!0:!(t.unstable_now()-Y<q)}function Q(){if(T=!1,F){var ne=t.unstable_now();Y=ne;var ue=!0;try{e:{w=!1,_&&(_=!1,I(B),B=-1),v=!0;var he=m;try{t:{for(k(ne),p=i(l);p!==null&&!(p.expirationTime>ne&&J());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,m=p.priorityLevel;var X=Ne(p.expirationTime<=ne);if(ne=t.unstable_now(),typeof X=="function"){p.callback=X,k(ne),ue=!0;break t}p===i(l)&&r(l),k(ne)}else r(l);p=i(l)}if(p!==null)ue=!0;else{var _e=i(c);_e!==null&&ye(R,_e.startTime-ne),ue=!1}}break e}finally{p=null,m=he,v=!1}ue=void 0}}finally{ue?te():F=!1}}}var te;if(typeof A=="function")te=function(){A(Q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ee=re.port2;re.port1.onmessage=Q,te=function(){ee.postMessage(null)}}else te=function(){$(Q,0)};function ye(ne,ue){B=$(function(){ne(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var ue=3;break;default:ue=m}var he=m;m=ue;try{return ne()}finally{m=he}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(ne,ue){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var he=m;m=ne;try{return ue()}finally{m=he}},t.unstable_scheduleCallback=function(ne,ue,he){var Ne=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ne+he:Ne):he=Ne,ne){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=he+X,ne={id:u++,callback:ue,priorityLevel:ne,startTime:he,expirationTime:X,sortIndex:-1},he>Ne?(ne.sortIndex=he,e(c,ne),i(l)===null&&ne===i(c)&&(_?(I(B),B=-1):_=!0,ye(R,he-Ne))):(ne.sortIndex=X,e(l,ne),w||v||(w=!0,F||(F=!0,te()))),ne},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(ne){var ue=m;return function(){var he=m;m=ue;try{return ne.apply(this,arguments)}finally{m=he}}}})(zB)),zB}var noe;function bFe(){return noe||(noe=1,FB.exports=vFe()),FB.exports}var jB={exports:{}},Lo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var soe;function wFe(){if(soe)return Lo;soe=1;var t=ST();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,c,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:p==null?null:""+p,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Lo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lo.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},Lo.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},Lo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Lo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Lo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,p=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:v}):u==="script"&&r.d.X(l,{crossOrigin:p,integrity:m,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Lo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Lo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,p=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Lo.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Lo.requestFormReset=function(l){r.d.r(l)},Lo.unstable_batchedUpdates=function(l,c){return l(c)},Lo.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},Lo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Lo.version="19.1.1",Lo}var ooe;function ewe(){if(ooe)return jB.exports;ooe=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jB.exports=wFe(),jB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aoe;function _Fe(){if(aoe)return mM;aoe=1;var t=bFe(),e=ST(),i=ewe();function r(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function s(h){var f=h,b=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,(f.flags&4098)!==0&&(b=f.return),h=f.return;while(h)}return f.tag===3?b:null}function o(h){if(h.tag===13){var f=h.memoizedState;if(f===null&&(h=h.alternate,h!==null&&(f=h.memoizedState)),f!==null)return f.dehydrated}return null}function a(h){if(s(h)!==h)throw Error(r(188))}function l(h){var f=h.alternate;if(!f){if(f=s(h),f===null)throw Error(r(188));return f!==h?null:h}for(var b=h,E=f;;){var C=b.return;if(C===null)break;var P=C.alternate;if(P===null){if(E=C.return,E!==null){b=E;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===b)return a(C),h;if(P===E)return a(C),f;P=P.sibling}throw Error(r(188))}if(b.return!==E.return)b=C,E=P;else{for(var V=!1,K=C.child;K;){if(K===b){V=!0,b=C,E=P;break}if(K===E){V=!0,E=C,b=P;break}K=K.sibling}if(!V){for(K=P.child;K;){if(K===b){V=!0,b=P,E=C;break}if(K===E){V=!0,E=P,b=C;break}K=K.sibling}if(!V)throw Error(r(189))}}if(b.alternate!==E)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?h:f}function c(h){var f=h.tag;if(f===5||f===26||f===27||f===6)return h;for(h=h.child;h!==null;){if(f=c(h),f!==null)return f;h=h.sibling}return null}var u=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function te(h){return h===null||typeof h!="object"?null:(h=Q&&h[Q]||h["@@iterator"],typeof h=="function"?h:null)}var re=Symbol.for("react.client.reference");function ee(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===re?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case w:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case F:return"SuspenseList";case Y:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case v:return"Portal";case A:return(h.displayName||"Context")+".Provider";case I:return(h._context.displayName||"Context")+".Consumer";case k:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case B:return f=h.displayName||null,f!==null?f:ee(h.type)||"Memo";case q:f=h._payload,h=h._init;try{return ee(h(f))}catch{}}return null}var ye=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ne=[],X=-1;function _e(h){return{current:h}}function ke(h){0>X||(h.current=Ne[X],Ne[X]=null,X--)}function qe(h,f){X++,Ne[X]=h.current,h.current=f}var Ke=_e(null),Qe=_e(null),Xe=_e(null),di=_e(null);function qt(h,f){switch(qe(Xe,f),qe(Qe,h),qe(Ke,null),f.nodeType){case 9:case 11:h=(h=f.documentElement)&&(h=h.namespaceURI)?$se(h):0;break;default:if(h=f.tagName,f=f.namespaceURI)f=$se(f),h=Mse(f,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}ke(Ke),qe(Ke,h)}function it(){ke(Ke),ke(Qe),ke(Xe)}function Vt(h){h.memoizedState!==null&&qe(di,h);var f=Ke.current,b=Mse(f,h.type);f!==b&&(qe(Qe,h),qe(Ke,b))}function Pt(h){Qe.current===h&&(ke(Ke),ke(Qe)),di.current===h&&(ke(di),cM._currentValue=he)}var He=Object.prototype.hasOwnProperty,Ri=t.unstable_scheduleCallback,ci=t.unstable_cancelCallback,Sn=t.unstable_shouldYield,En=t.unstable_requestPaint,_r=t.unstable_now,bl=t.unstable_getCurrentPriorityLevel,O0=t.unstable_ImmediatePriority,Cy=t.unstable_UserBlockingPriority,oo=t.unstable_NormalPriority,b1=t.unstable_LowPriority,L0=t.unstable_IdlePriority,f$=t.log,m$=t.unstable_setDisableYieldValue,Iu=null,Ns=null;function wl(h){if(typeof f$=="function"&&m$(h),Ns&&typeof Ns.setStrictMode=="function")try{Ns.setStrictMode(Iu,h)}catch{}}var Io=Math.clz32?Math.clz32:y$,w1=Math.log,_1=Math.LN2;function y$(h){return h>>>=0,h===0?32:31-(w1(h)/_1|0)|0}var nf=256,Yh=4194304;function $c(h){var f=h&42;if(f!==0)return f;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function Iy(h,f,b){var E=h.pendingLanes;if(E===0)return 0;var C=0,P=h.suspendedLanes,V=h.pingedLanes;h=h.warmLanes;var K=E&134217727;return K!==0?(E=K&~P,E!==0?C=$c(E):(V&=K,V!==0?C=$c(V):b||(b=K&~h,b!==0&&(C=$c(b))))):(K=E&~P,K!==0?C=$c(K):V!==0?C=$c(V):b||(b=E&~h,b!==0&&(C=$c(b)))),C===0?0:f!==0&&f!==C&&(f&P)===0&&(P=C&-C,b=f&-f,P>=b||P===32&&(b&4194048)!==0)?f:C}function _l(h,f){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&f)===0}function g$(h,f){switch(h){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x1(){var h=nf;return nf<<=1,(nf&4194048)===0&&(nf=256),h}function R0(){var h=Yh;return Yh<<=1,(Yh&62914560)===0&&(Yh=4194304),h}function Ay(h){for(var f=[],b=0;31>b;b++)f.push(h);return f}function Kh(h,f){h.pendingLanes|=f,f!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function v$(h,f,b,E,C,P){var V=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var K=h.entanglements,oe=h.expirationTimes,Ee=h.hiddenUpdates;for(b=V&~b;0<b;){var Fe=31-Io(b),Be=1<<Fe;K[Fe]=0,oe[Fe]=-1;var $e=Ee[Fe];if($e!==null)for(Ee[Fe]=null,Fe=0;Fe<$e.length;Fe++){var Ie=$e[Fe];Ie!==null&&(Ie.lane&=-536870913)}b&=~Be}E!==0&&S1(h,E,0),P!==0&&C===0&&h.tag!==0&&(h.suspendedLanes|=P&~(V&~f))}function S1(h,f,b){h.pendingLanes|=f,h.suspendedLanes&=~f;var E=31-Io(f);h.entangledLanes|=f,h.entanglements[E]=h.entanglements[E]|1073741824|b&4194090}function E1(h,f){var b=h.entangledLanes|=f;for(h=h.entanglements;b;){var E=31-Io(b),C=1<<E;C&f|h[E]&f&&(h[E]|=f),b&=~C}}function N0(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Me(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Qi(){var h=ue.p;return h!==0?h:(h=window.event,h===void 0?32:Hse(h.type))}function Mc(h,f){var b=ue.p;try{return ue.p=h,f()}finally{ue.p=b}}var Ao=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Ao,Hn="__reactProps$"+Ao,yt="__reactContainer$"+Ao,ws="__reactEvents$"+Ao,Mt="__reactListeners$"+Ao,cn="__reactHandles$"+Ao,Au="__reactResources$"+Ao,Jh="__reactMarker$"+Ao;function aa(h){delete h[Yi],delete h[Hn],delete h[ws],delete h[Mt],delete h[cn]}function xl(h){var f=h[Yi];if(f)return f;for(var b=h.parentNode;b;){if(f=b[yt]||b[Yi]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(h=Pse(h);h!==null;){if(b=h[Yi])return b;h=Pse(h)}return f}h=b,b=h.parentNode}return null}function Cc(h){if(h=h[Yi]||h[yt]){var f=h.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return h}return null}function kt(h){var f=h.tag;if(f===5||f===26||f===27||f===6)return h.stateNode;throw Error(r(33))}function Pu(h){var f=h[Au];return f||(f=h[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function un(h){h[Jh]=!0}var T1=new Set,$1={};function Sl(h,f){ku(h,f),ku(h+"Capture",f)}function ku(h,f){for($1[h]=f,h=0;h<f.length;h++)T1.add(f[h])}var D0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xr={},M1={};function C1(h){return He.call(M1,h)?!0:He.call(xr,h)?!1:D0.test(h)?M1[h]=!0:(xr[h]=!0,!1)}function Py(h,f,b){if(C1(f))if(b===null)h.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(f);return;case"boolean":var E=f.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){h.removeAttribute(f);return}}h.setAttribute(f,""+b)}}function ky(h,f,b){if(b===null)h.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(f);return}h.setAttribute(f,""+b)}}function El(h,f,b,E){if(E===null)h.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(f,b,""+E)}}var sf,Xh;function Tn(h){if(sf===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);sf=f&&f[1]||"",Xh=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sf+h+Xh}var Oy=!1;function Ou(h,f){if(!h||Oy)return"";Oy=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(f){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(Ie){var $e=Ie}Reflect.construct(h,[],Be)}else{try{Be.call()}catch(Ie){$e=Ie}h.call(Be.prototype)}}else{try{throw Error()}catch(Ie){$e=Ie}(Be=h())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(Ie){if(Ie&&$e&&typeof Ie.stack=="string")return[Ie.stack,$e.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=E.DetermineComponentFrameRoot(),V=P[0],K=P[1];if(V&&K){var oe=V.split(`
`),Ee=K.split(`
`);for(C=E=0;E<oe.length&&!oe[E].includes("DetermineComponentFrameRoot");)E++;for(;C<Ee.length&&!Ee[C].includes("DetermineComponentFrameRoot");)C++;if(E===oe.length||C===Ee.length)for(E=oe.length-1,C=Ee.length-1;1<=E&&0<=C&&oe[E]!==Ee[C];)C--;for(;1<=E&&0<=C;E--,C--)if(oe[E]!==Ee[C]){if(E!==1||C!==1)do if(E--,C--,0>C||oe[E]!==Ee[C]){var Fe=`
`+oe[E].replace(" at new "," at ");return h.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",h.displayName)),Fe}while(1<=E&&0<=C);break}}}finally{Oy=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?Tn(b):""}function mi(h){switch(h.tag){case 26:case 27:case 5:return Tn(h.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return Ou(h.type,!1);case 11:return Ou(h.type.render,!1);case 1:return Ou(h.type,!0);case 31:return Tn("Activity");default:return""}}function er(h){try{var f="";do f+=mi(h),h=h.return;while(h);return f}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ie(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Te(h){var f=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function We(h){var f=Te(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,f),E=""+h[f];if(!h.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var C=b.get,P=b.set;return Object.defineProperty(h,f,{configurable:!0,get:function(){return C.call(this)},set:function(V){E=""+V,P.call(this,V)}}),Object.defineProperty(h,f,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(V){E=""+V},stopTracking:function(){h._valueTracker=null,delete h[f]}}}}function Tt(h){h._valueTracker||(h._valueTracker=We(h))}function lt(h){if(!h)return!1;var f=h._valueTracker;if(!f)return!0;var b=f.getValue(),E="";return h&&(E=Te(h)?h.checked?"true":"false":h.value),h=E,h!==b?(f.setValue(h),!0):!1}function Ht(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Fr=/[\n"\\]/g;function Pi(h){return h.replace(Fr,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Po(h,f,b,E,C,P,V,K){h.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?h.type=V:h.removeAttribute("type"),f!=null?V==="number"?(f===0&&h.value===""||h.value!=f)&&(h.value=""+ie(f)):h.value!==""+ie(f)&&(h.value=""+ie(f)):V!=="submit"&&V!=="reset"||h.removeAttribute("value"),f!=null?Ly(h,V,ie(f)):b!=null?Ly(h,V,ie(b)):E!=null&&h.removeAttribute("value"),C==null&&P!=null&&(h.defaultChecked=!!P),C!=null&&(h.checked=C&&typeof C!="function"&&typeof C!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?h.name=""+ie(K):h.removeAttribute("name")}function pO(h,f,b,E,C,P,V,K){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(h.type=P),f!=null||b!=null){if(!(P!=="submit"&&P!=="reset"||f!=null))return;b=b!=null?""+ie(b):"",f=f!=null?""+ie(f):b,K||f===h.value||(h.value=f),h.defaultValue=f}E=E??C,E=typeof E!="function"&&typeof E!="symbol"&&!!E,h.checked=K?h.checked:!!E,h.defaultChecked=!!E,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(h.name=V)}function Ly(h,f,b){f==="number"&&Ht(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Da(h,f,b,E){if(h=h.options,f){f={};for(var C=0;C<b.length;C++)f["$"+b[C]]=!0;for(b=0;b<h.length;b++)C=f.hasOwnProperty("$"+h[b].value),h[b].selected!==C&&(h[b].selected=C),C&&E&&(h[b].defaultSelected=!0)}else{for(b=""+ie(b),f=null,C=0;C<h.length;C++){if(h[C].value===b){h[C].selected=!0,E&&(h[C].defaultSelected=!0);return}f!==null||h[C].disabled||(f=h[C])}f!==null&&(f.selected=!0)}}function hn(h,f,b){if(f!=null&&(f=""+ie(f),f!==h.value&&(h.value=f),b==null)){h.defaultValue!==f&&(h.defaultValue=f);return}h.defaultValue=b!=null?""+ie(b):""}function Qh(h,f,b,E){if(f==null){if(E!=null){if(b!=null)throw Error(r(92));if(ye(E)){if(1<E.length)throw Error(r(93));E=E[0]}b=E}b==null&&(b=""),f=b}b=ie(f),h.defaultValue=b,E=h.textContent,E===b&&E!==""&&E!==null&&(h.value=E)}function Ic(h,f){if(f){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=f;return}}h.textContent=f}var F0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function I1(h,f,b){var E=f.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?h.setProperty(f,""):f==="float"?h.cssFloat="":h[f]="":E?h.setProperty(f,b):typeof b!="number"||b===0||F0.has(f)?f==="float"?h.cssFloat=b:h[f]=(""+b).trim():h[f]=b+"px"}function Ry(h,f,b){if(f!=null&&typeof f!="object")throw Error(r(62));if(h=h.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||f!=null&&f.hasOwnProperty(E)||(E.indexOf("--")===0?h.setProperty(E,""):E==="float"?h.cssFloat="":h[E]="");for(var C in f)E=f[C],f.hasOwnProperty(C)&&b[C]!==E&&I1(h,C,E)}else for(var P in f)f.hasOwnProperty(P)&&I1(h,P,f[P])}function z0(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b$=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ny(h){return A1.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var j0=null;function Dy(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var of=null,ed=null;function fO(h){var f=Cc(h);if(f&&(h=f.stateNode)){var b=h[Hn]||null;e:switch(h=f.stateNode,f.type){case"input":if(Po(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),f=b.name,b.type==="radio"&&f!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Pi(""+f)+'"][type="radio"]'),f=0;f<b.length;f++){var E=b[f];if(E!==h&&E.form===h.form){var C=E[Hn]||null;if(!C)throw Error(r(90));Po(E,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(f=0;f<b.length;f++)E=b[f],E.form===h.form&&lt(E)}break e;case"textarea":hn(h,b.value,b.defaultValue);break e;case"select":f=b.value,f!=null&&Da(h,!!b.multiple,f,!1)}}}var Xt=!1;function Tl(h,f,b){if(Xt)return h(f,b);Xt=!0;try{var E=h(f);return E}finally{if(Xt=!1,(of!==null||ed!==null)&&(lL(),of&&(f=of,h=ed,ed=of=null,fO(f),h)))for(f=0;f<h.length;f++)fO(h[f])}}function Ni(h,f){var b=h.stateNode;if(b===null)return null;var E=b[Hn]||null;if(E===null)return null;b=E[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(h=h.type,E=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!E;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(r(231,f,typeof b));return b}var Ac=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U0=!1;if(Ac)try{var af={};Object.defineProperty(af,"passive",{get:function(){U0=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch{U0=!1}var Pc=null,Lu=null,Fy=null;function zy(){if(Fy)return Fy;var h,f=Lu,b=f.length,E,C="value"in Pc?Pc.value:Pc.textContent,P=C.length;for(h=0;h<b&&f[h]===C[h];h++);var V=b-h;for(E=1;E<=V&&f[b-E]===C[P-E];E++);return Fy=C.slice(h,1<E?1-E:void 0)}function $n(h){var f=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&f===13&&(h=13)):h=f,h===10&&(h=13),32<=h||h===13?h:0}function kc(){return!0}function w$(){return!1}function ao(h){function f(b,E,C,P,V){this._reactName=b,this._targetInst=C,this.type=E,this.nativeEvent=P,this.target=V,this.currentTarget=null;for(var K in h)h.hasOwnProperty(K)&&(b=h[K],this[K]=b?b(P):P[K]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?kc:w$,this.isPropagationStopped=w$,this}return u(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),f}var lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=ao(lf),cf=u({},lf,{view:0,detail:0}),qU=ao(cf),P1,yi,V0,ko=u({},cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:k1,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==V0&&(V0&&h.type==="mousemove"?(P1=h.screenX-V0.screenX,yi=h.screenY-V0.screenY):yi=P1=0,V0=h),P1)},movementY:function(h){return"movementY"in h?h.movementY:yi}}),jy=ao(ko),mO=u({},ko,{dataTransfer:0}),HU=ao(mO),_$=u({},cf,{relatedTarget:0}),x$=ao(_$),yO=u({},lf,{animationName:0,elapsedTime:0,pseudoElement:0}),WU=ao(yO),ZU=u({},lf,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),S$=ao(ZU),YU=u({},lf,{data:0}),$l=ao(YU),KU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vO(h){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(h):(h=td[h])?!!f[h]:!1}function k1(){return vO}var E$=u({},cf,{key:function(h){if(h.key){var f=KU[h.key]||h.key;if(f!=="Unidentified")return f}return h.type==="keypress"?(h=$n(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?gO[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:k1,charCode:function(h){return h.type==="keypress"?$n(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?$n(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),JU=ao(E$),bO=u({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T$=ao(bO),XU=u({},cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:k1}),QU=ao(XU),$$=u({},lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),e6=ao($$),wO=u({},ko,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),_O=ao(wO),O1=u({},lf,{newState:0,oldState:0}),uf=ao(O1),t6=[9,13,27,32],hf=Ac&&"CompositionEvent"in window,Ds=null;Ac&&"documentMode"in document&&(Ds=document.documentMode);var xO=Ac&&"TextEvent"in window&&!Ds,M$=Ac&&(!hf||Ds&&8<Ds&&11>=Ds),SO=" ",L1=!1;function R1(h,f){switch(h){case"keyup":return t6.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EO(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Uy=!1;function TO(h,f){switch(h){case"compositionend":return EO(f);case"keypress":return f.which!==32?null:(L1=!0,SO);case"textInput":return h=f.data,h===SO&&L1?null:h;default:return null}}function i6(h,f){if(Uy)return h==="compositionend"||!hf&&R1(h,f)?(h=zy(),Fy=Lu=Pc=null,Uy=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return M$&&f.locale!=="ko"?null:f.data;default:return null}}var Ml={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f==="input"?!!Ml[h.type]:f==="textarea"}function $O(h,f,b,E){of?ed?ed.push(E):ed=[E]:of=E,f=fL(f,"onChange"),0<f.length&&(b=new B0("onChange","change",null,b,E),h.push({event:b,listeners:f}))}var la=null,G0=null;function By(h){_se(h,0)}function N1(h){var f=kt(h);if(lt(f))return h}function Vy(h,f){if(h==="change")return f}var C$=!1;if(Ac){var Gy;if(Ac){var I$="oninput"in document;if(!I$){var Ru=document.createElement("div");Ru.setAttribute("oninput","return;"),I$=typeof Ru.oninput=="function"}Gy=I$}else Gy=!1;C$=Gy&&(!document.documentMode||9<document.documentMode)}function q0(){la&&(la.detachEvent("onpropertychange",MO),G0=la=null)}function MO(h){if(h.propertyName==="value"&&N1(G0)){var f=[];$O(f,G0,h,Dy(h)),Tl(By,f)}}function A$(h,f,b){h==="focusin"?(q0(),la=f,G0=b,la.attachEvent("onpropertychange",MO)):h==="focusout"&&q0()}function r6(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return N1(G0)}function Nu(h,f){if(h==="click")return N1(f)}function n6(h,f){if(h==="input"||h==="change")return N1(f)}function qy(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var ca=typeof Object.is=="function"?Object.is:qy;function ua(h,f){if(ca(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var b=Object.keys(h),E=Object.keys(f);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var C=b[E];if(!He.call(f,C)||!ca(h[C],f[C]))return!1}return!0}function H0(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function P$(h,f){var b=H0(h);h=0;for(var E;b;){if(b.nodeType===3){if(E=h+b.textContent.length,h<=f&&E>=f)return{node:b,offset:f-h};h=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=H0(b)}}function D1(h,f){return h&&f?h===f?!0:h&&h.nodeType===3?!1:f&&f.nodeType===3?D1(h,f.parentNode):"contains"in h?h.contains(f):h.compareDocumentPosition?!!(h.compareDocumentPosition(f)&16):!1:!1}function W0(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var f=Ht(h.document);f instanceof h.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)h=f.contentWindow;else break;f=Ht(h.document)}return f}function Z0(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f&&(f==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||f==="textarea"||h.contentEditable==="true")}var F1=Ac&&"documentMode"in document&&11>=document.documentMode,Cl=null,Hy=null,pf=null,z1=!1;function CO(h,f,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;z1||Cl==null||Cl!==Ht(E)||(E=Cl,"selectionStart"in E&&Z0(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),pf&&ua(pf,E)||(pf=E,E=fL(Hy,"onSelect"),0<E.length&&(f=new B0("onSelect","select",null,f,b),h.push({event:f,listeners:E}),f.target=Cl)))}function Oc(h,f){var b={};return b[h.toLowerCase()]=f.toLowerCase(),b["Webkit"+h]="webkit"+f,b["Moz"+h]="moz"+f,b}var Wy={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionrun:Oc("Transition","TransitionRun"),transitionstart:Oc("Transition","TransitionStart"),transitioncancel:Oc("Transition","TransitionCancel"),transitionend:Oc("Transition","TransitionEnd")},j1={},IO={};Ac&&(IO=document.createElement("div").style,"AnimationEvent"in window||(delete Wy.animationend.animation,delete Wy.animationiteration.animation,delete Wy.animationstart.animation),"TransitionEvent"in window||delete Wy.transitionend.transition);function id(h){if(j1[h])return j1[h];if(!Wy[h])return h;var f=Wy[h],b;for(b in f)if(f.hasOwnProperty(b)&&b in IO)return j1[h]=f[b];return h}var AO=id("animationend"),Il=id("animationiteration"),Y0=id("animationstart"),s6=id("transitionrun"),U1=id("transitionstart"),o6=id("transitioncancel"),k$=id("transitionend"),PO=new Map,ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ff.push("scrollEnd");function Al(h,f){PO.set(h,f),Sl(f,[h])}var mf=new WeakMap;function ha(h,f){if(typeof h=="object"&&h!==null){var b=mf.get(h);return b!==void 0?b:(f={value:h,source:f,stack:er(f)},mf.set(h,f),f)}return{value:h,source:f,stack:er(f)}}var da=[],Zy=0,Pl=0;function K0(){for(var h=Zy,f=Pl=Zy=0;f<h;){var b=da[f];da[f++]=null;var E=da[f];da[f++]=null;var C=da[f];da[f++]=null;var P=da[f];if(da[f++]=null,E!==null&&C!==null){var V=E.pending;V===null?C.next=C:(C.next=V.next,V.next=C),E.pending=C}P!==0&&X0(b,C,P)}}function J0(h,f,b,E){da[Zy++]=h,da[Zy++]=f,da[Zy++]=b,da[Zy++]=E,Pl|=E,h.lanes|=E,h=h.alternate,h!==null&&(h.lanes|=E)}function yf(h,f,b,E){return J0(h,f,b,E),rd(h)}function Yy(h,f){return J0(h,null,null,f),rd(h)}function X0(h,f,b){h.lanes|=b;var E=h.alternate;E!==null&&(E.lanes|=b);for(var C=!1,P=h.return;P!==null;)P.childLanes|=b,E=P.alternate,E!==null&&(E.childLanes|=b),P.tag===22&&(h=P.stateNode,h===null||h._visibility&1||(C=!0)),h=P,P=P.return;return h.tag===3?(P=h.stateNode,C&&f!==null&&(C=31-Io(b),h=P.hiddenUpdates,E=h[C],E===null?h[C]=[f]:E.push(f),f.lane=b|536870912),P):null}function rd(h){if(50<tM)throw tM=0,rB=null,Error(r(185));for(var f=h.return;f!==null;)h=f,f=h.return;return h.tag===3?h.stateNode:null}var gf={};function kO(h,f,b,E){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(h,f,b,E){return new kO(h,f,b,E)}function B1(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Lc(h,f){var b=h.alternate;return b===null?(b=pa(h.tag,f,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=f,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,f=h.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function O$(h,f){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=f,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,f=b.dependencies,h.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),h}function Q0(h,f,b,E,C,P){var V=0;if(E=h,typeof h=="function")B1(h)&&(V=1);else if(typeof h=="string")V=K5e(h,b,Ke.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case Y:return h=pa(31,b,f,C),h.elementType=Y,h.lanes=P,h;case w:return nd(b.children,C,P,f);case _:V=8,C|=24;break;case T:return h=pa(12,b,f,C|2),h.elementType=T,h.lanes=P,h;case R:return h=pa(13,b,f,C),h.elementType=R,h.lanes=P,h;case F:return h=pa(19,b,f,C),h.elementType=F,h.lanes=P,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case $:case A:V=10;break e;case I:V=9;break e;case k:V=11;break e;case B:V=14;break e;case q:V=16,E=null;break e}V=29,b=Error(r(130,h===null?"null":typeof h,"")),E=null}return f=pa(V,b,f,C),f.elementType=h,f.type=E,f.lanes=P,f}function nd(h,f,b,E){return h=pa(7,h,E,f),h.lanes=b,h}function L$(h,f,b){return h=pa(6,h,null,f),h.lanes=b,h}function V1(h,f,b){return f=pa(4,h.children!==null?h.children:[],h.key,f),f.lanes=b,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}var vf=[],Ky=0,y=null,S=0,M=[],O=0,z=null,Z=1,se="";function xe(h,f){vf[Ky++]=S,vf[Ky++]=y,y=h,S=f}function Ae(h,f,b){M[O++]=Z,M[O++]=se,M[O++]=z,z=h;var E=Z;h=se;var C=32-Io(E)-1;E&=~(1<<C),b+=1;var P=32-Io(f)+C;if(30<P){var V=C-C%5;P=(E&(1<<V)-1).toString(32),E>>=V,C-=V,Z=1<<32-Io(f)+C|b<<C|E,se=P+h}else Z=1<<P|b<<C|E,se=h}function Ve(h){h.return!==null&&(xe(h,1),Ae(h,1,0))}function ct(h){for(;h===y;)y=vf[--Ky],vf[Ky]=null,S=vf[--Ky],vf[Ky]=null;for(;h===z;)z=M[--O],M[O]=null,se=M[--O],M[O]=null,Z=M[--O],M[O]=null}var xt=null,$t=null,Jt=!1,Sr=null,dn=!1,Fs=Error(r(519));function Fa(h){var f=Error(r(418,""));throw Xy(ha(f,h)),Fs}function OO(h){var f=h.stateNode,b=h.type,E=h.memoizedProps;switch(f[Yi]=h,f[Hn]=E,b){case"dialog":xi("cancel",f),xi("close",f);break;case"iframe":case"object":case"embed":xi("load",f);break;case"video":case"audio":for(b=0;b<rM.length;b++)xi(rM[b],f);break;case"source":xi("error",f);break;case"img":case"image":case"link":xi("error",f),xi("load",f);break;case"details":xi("toggle",f);break;case"input":xi("invalid",f),pO(f,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Tt(f);break;case"select":xi("invalid",f);break;case"textarea":xi("invalid",f),Qh(f,E.value,E.defaultValue,E.children),Tt(f)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||f.textContent===""+b||E.suppressHydrationWarning===!0||Tse(f.textContent,b)?(E.popover!=null&&(xi("beforetoggle",f),xi("toggle",f)),E.onScroll!=null&&xi("scroll",f),E.onScrollEnd!=null&&xi("scrollend",f),E.onClick!=null&&(f.onclick=mL),f=!0):f=!1,f||Fa(h)}function LO(h){for(xt=h.return;xt;)switch(xt.tag){case 5:case 13:dn=!1;return;case 27:case 3:dn=!0;return;default:xt=xt.return}}function eb(h){if(h!==xt)return!1;if(!Jt)return LO(h),Jt=!0,!1;var f=h.tag,b;if((b=f!==3&&f!==27)&&((b=f===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||bB(h.type,h.memoizedProps)),b=!b),b&&$t&&Fa(h),LO(h),f===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,f=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(f===0){$t=ju(h.nextSibling);break e}f--}else b!=="$"&&b!=="$!"&&b!=="$?"||f++;h=h.nextSibling}$t=null}}else f===27?(f=$t,pg(h.type)?(h=SB,SB=null,$t=h):$t=f):$t=xt?ju(h.stateNode.nextSibling):null;return!0}function Jy(){$t=xt=null,Jt=!1}function RO(){var h=Sr;return h!==null&&(Ua===null?Ua=h:Ua.push.apply(Ua,h),Sr=null),h}function Xy(h){Sr===null?Sr=[h]:Sr.push(h)}var Yr=_e(null),Rc=null,Du=null;function sd(h,f,b){qe(Yr,f._currentValue),f._currentValue=b}function Fu(h){h._currentValue=Yr.current,ke(Yr)}function tb(h,f,b){for(;h!==null;){var E=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),h===b)break;h=h.return}}function G1(h,f,b,E){var C=h.child;for(C!==null&&(C.return=h);C!==null;){var P=C.dependencies;if(P!==null){var V=C.child;P=P.firstContext;e:for(;P!==null;){var K=P;P=C;for(var oe=0;oe<f.length;oe++)if(K.context===f[oe]){P.lanes|=b,K=P.alternate,K!==null&&(K.lanes|=b),tb(P.return,b,h),E||(V=null);break e}P=K.next}}else if(C.tag===18){if(V=C.return,V===null)throw Error(r(341));V.lanes|=b,P=V.alternate,P!==null&&(P.lanes|=b),tb(V,b,h),V=null}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===h){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}}function ib(h,f,b,E){h=null;for(var C=f,P=!1;C!==null;){if(!P){if((C.flags&524288)!==0)P=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var V=C.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var K=C.type;ca(C.pendingProps.value,V.value)||(h!==null?h.push(K):h=[K])}}else if(C===di.current){if(V=C.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(h!==null?h.push(cM):h=[cM])}C=C.return}h!==null&&G1(f,h,b,E),f.flags|=262144}function NO(h){for(h=h.firstContext;h!==null;){if(!ca(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function rb(h){Rc=h,Du=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Oo(h){return hre(Rc,h)}function DO(h,f){return Rc===null&&rb(h),hre(h,f)}function hre(h,f){var b=f._currentValue;if(f={context:f,memoizedValue:b,next:null},Du===null){if(h===null)throw Error(r(308));Du=f,h.dependencies={lanes:0,firstContext:f},h.flags|=524288}else Du=Du.next=f;return b}var YDe=typeof AbortController<"u"?AbortController:function(){var h=[],f=this.signal={aborted:!1,addEventListener:function(b,E){h.push(E)}};this.abort=function(){f.aborted=!0,h.forEach(function(b){return b()})}},KDe=t.unstable_scheduleCallback,JDe=t.unstable_NormalPriority,_s={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function a6(){return{controller:new YDe,data:new Map,refCount:0}}function R$(h){h.refCount--,h.refCount===0&&KDe(JDe,function(){h.controller.abort()})}var N$=null,l6=0,q1=0,H1=null;function XDe(h,f){if(N$===null){var b=N$=[];l6=0,q1=uB(),H1={status:"pending",value:void 0,then:function(E){b.push(E)}}}return l6++,f.then(dre,dre),f}function dre(){if(--l6===0&&N$!==null){H1!==null&&(H1.status="fulfilled");var h=N$;N$=null,q1=0,H1=null;for(var f=0;f<h.length;f++)(0,h[f])()}}function QDe(h,f){var b=[],E={status:"pending",value:null,reason:null,then:function(C){b.push(C)}};return h.then(function(){E.status="fulfilled",E.value=f;for(var C=0;C<b.length;C++)(0,b[C])(f)},function(C){for(E.status="rejected",E.reason=C,C=0;C<b.length;C++)(0,b[C])(void 0)}),E}var pre=ne.S;ne.S=function(h,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&XDe(h,f),pre!==null&&pre(h,f)};var nb=_e(null);function c6(){var h=nb.current;return h!==null?h:Er.pooledCache}function FO(h,f){f===null?qe(nb,nb.current):qe(nb,f.pool)}function fre(){var h=c6();return h===null?null:{parent:_s._currentValue,pool:h}}var D$=Error(r(460)),mre=Error(r(474)),zO=Error(r(542)),u6={then:function(){}};function yre(h){return h=h.status,h==="fulfilled"||h==="rejected"}function jO(){}function gre(h,f,b){switch(b=h[b],b===void 0?h.push(f):b!==f&&(f.then(jO,jO),f=b),f.status){case"fulfilled":return f.value;case"rejected":throw h=f.reason,bre(h),h;default:if(typeof f.status=="string")f.then(jO,jO);else{if(h=Er,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=f,h.status="pending",h.then(function(E){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=E}},function(E){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=E}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw h=f.reason,bre(h),h}throw F$=f,D$}}var F$=null;function vre(){if(F$===null)throw Error(r(459));var h=F$;return F$=null,h}function bre(h){if(h===D$||h===zO)throw Error(r(483))}var Qy=!1;function h6(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function d6(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function eg(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function tg(h,f,b){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,(tr&2)!==0){var C=E.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),E.pending=f,f=rd(h),X0(h,null,b),f}return J0(h,E,f,b),rd(h)}function z$(h,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194048)!==0)){var E=f.lanes;E&=h.pendingLanes,b|=E,f.lanes=b,E1(h,b)}}function p6(h,f){var b=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var C=null,P=null;if(b=b.firstBaseUpdate,b!==null){do{var V={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};P===null?C=P=V:P=P.next=V,b=b.next}while(b!==null);P===null?C=P=f:P=P.next=f}else C=P=f;b={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:E.shared,callbacks:E.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=f:h.next=f,b.lastBaseUpdate=f}var f6=!1;function j$(){if(f6){var h=H1;if(h!==null)throw h}}function U$(h,f,b,E){f6=!1;var C=h.updateQueue;Qy=!1;var P=C.firstBaseUpdate,V=C.lastBaseUpdate,K=C.shared.pending;if(K!==null){C.shared.pending=null;var oe=K,Ee=oe.next;oe.next=null,V===null?P=Ee:V.next=Ee,V=oe;var Fe=h.alternate;Fe!==null&&(Fe=Fe.updateQueue,K=Fe.lastBaseUpdate,K!==V&&(K===null?Fe.firstBaseUpdate=Ee:K.next=Ee,Fe.lastBaseUpdate=oe))}if(P!==null){var Be=C.baseState;V=0,Fe=Ee=oe=null,K=P;do{var $e=K.lane&-536870913,Ie=$e!==K.lane;if(Ie?(ki&$e)===$e:(E&$e)===$e){$e!==0&&$e===q1&&(f6=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Zt=h,jt=K;$e=f;var ur=b;switch(jt.tag){case 1:if(Zt=jt.payload,typeof Zt=="function"){Be=Zt.call(ur,Be,$e);break e}Be=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=jt.payload,$e=typeof Zt=="function"?Zt.call(ur,Be,$e):Zt,$e==null)break e;Be=u({},Be,$e);break e;case 2:Qy=!0}}$e=K.callback,$e!==null&&(h.flags|=64,Ie&&(h.flags|=8192),Ie=C.callbacks,Ie===null?C.callbacks=[$e]:Ie.push($e))}else Ie={lane:$e,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Fe===null?(Ee=Fe=Ie,oe=Be):Fe=Fe.next=Ie,V|=$e;if(K=K.next,K===null){if(K=C.shared.pending,K===null)break;Ie=K,K=Ie.next,Ie.next=null,C.lastBaseUpdate=Ie,C.shared.pending=null}}while(!0);Fe===null&&(oe=Be),C.baseState=oe,C.firstBaseUpdate=Ee,C.lastBaseUpdate=Fe,P===null&&(C.shared.lanes=0),cg|=V,h.lanes=V,h.memoizedState=Be}}function wre(h,f){if(typeof h!="function")throw Error(r(191,h));h.call(f)}function _re(h,f){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)wre(b[h],f)}var W1=_e(null),UO=_e(0);function xre(h,f){h=Tf,qe(UO,h),qe(W1,f),Tf=h|f.baseLanes}function m6(){qe(UO,Tf),qe(W1,W1.current)}function y6(){Tf=UO.current,ke(W1),ke(UO)}var ig=0,pi=null,lr=null,os=null,BO=!1,Z1=!1,sb=!1,VO=0,B$=0,Y1=null,e5e=0;function Wn(){throw Error(r(321))}function g6(h,f){if(f===null)return!1;for(var b=0;b<f.length&&b<h.length;b++)if(!ca(h[b],f[b]))return!1;return!0}function v6(h,f,b,E,C,P){return ig=P,pi=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ne.H=h===null||h.memoizedState===null?sne:one,sb=!1,P=b(E,C),sb=!1,Z1&&(P=Ere(f,b,E,C)),Sre(h),P}function Sre(h){ne.H=YO;var f=lr!==null&&lr.next!==null;if(ig=0,os=lr=pi=null,BO=!1,B$=0,Y1=null,f)throw Error(r(300));h===null||zs||(h=h.dependencies,h!==null&&NO(h)&&(zs=!0))}function Ere(h,f,b,E){pi=h;var C=0;do{if(Z1&&(Y1=null),B$=0,Z1=!1,25<=C)throw Error(r(301));if(C+=1,os=lr=null,h.updateQueue!=null){var P=h.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ne.H=a5e,P=f(b,E)}while(Z1);return P}function t5e(){var h=ne.H,f=h.useState()[0];return f=typeof f.then=="function"?V$(f):f,h=h.useState()[0],(lr!==null?lr.memoizedState:null)!==h&&(pi.flags|=1024),f}function b6(){var h=VO!==0;return VO=0,h}function w6(h,f,b){f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~b}function _6(h){if(BO){for(h=h.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}BO=!1}ig=0,os=lr=pi=null,Z1=!1,B$=VO=0,Y1=null}function za(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?pi.memoizedState=os=h:os=os.next=h,os}function as(){if(lr===null){var h=pi.alternate;h=h!==null?h.memoizedState:null}else h=lr.next;var f=os===null?pi.memoizedState:os.next;if(f!==null)os=f,lr=h;else{if(h===null)throw pi.alternate===null?Error(r(467)):Error(r(310));lr=h,h={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},os===null?pi.memoizedState=os=h:os=os.next=h}return os}function x6(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function V$(h){var f=B$;return B$+=1,Y1===null&&(Y1=[]),h=gre(Y1,h,f),f=pi,(os===null?f.memoizedState:os.next)===null&&(f=f.alternate,ne.H=f===null||f.memoizedState===null?sne:one),h}function GO(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return V$(h);if(h.$$typeof===A)return Oo(h)}throw Error(r(438,String(h)))}function S6(h){var f=null,b=pi.updateQueue;if(b!==null&&(f=b.memoCache),f==null){var E=pi.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(f={data:E.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),b===null&&(b=x6(),pi.updateQueue=b),b.memoCache=f,b=f.data[f.index],b===void 0)for(b=f.data[f.index]=Array(h),E=0;E<h;E++)b[E]=J;return f.index++,b}function bf(h,f){return typeof f=="function"?f(h):f}function qO(h){var f=as();return E6(f,lr,h)}function E6(h,f,b){var E=h.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=b;var C=h.baseQueue,P=E.pending;if(P!==null){if(C!==null){var V=C.next;C.next=P.next,P.next=V}f.baseQueue=C=P,E.pending=null}if(P=h.baseState,C===null)h.memoizedState=P;else{f=C.next;var K=V=null,oe=null,Ee=f,Fe=!1;do{var Be=Ee.lane&-536870913;if(Be!==Ee.lane?(ki&Be)===Be:(ig&Be)===Be){var $e=Ee.revertLane;if($e===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),Be===q1&&(Fe=!0);else if((ig&$e)===$e){Ee=Ee.next,$e===q1&&(Fe=!0);continue}else Be={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(K=oe=Be,V=P):oe=oe.next=Be,pi.lanes|=$e,cg|=$e;Be=Ee.action,sb&&b(P,Be),P=Ee.hasEagerState?Ee.eagerState:b(P,Be)}else $e={lane:Be,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(K=oe=$e,V=P):oe=oe.next=$e,pi.lanes|=Be,cg|=Be;Ee=Ee.next}while(Ee!==null&&Ee!==f);if(oe===null?V=P:oe.next=K,!ca(P,h.memoizedState)&&(zs=!0,Fe&&(b=H1,b!==null)))throw b;h.memoizedState=P,h.baseState=V,h.baseQueue=oe,E.lastRenderedState=P}return C===null&&(E.lanes=0),[h.memoizedState,E.dispatch]}function T6(h){var f=as(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=h;var E=b.dispatch,C=b.pending,P=f.memoizedState;if(C!==null){b.pending=null;var V=C=C.next;do P=h(P,V.action),V=V.next;while(V!==C);ca(P,f.memoizedState)||(zs=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),b.lastRenderedState=P}return[P,E]}function Tre(h,f,b){var E=pi,C=as(),P=Jt;if(P){if(b===void 0)throw Error(r(407));b=b()}else b=f();var V=!ca((lr||C).memoizedState,b);V&&(C.memoizedState=b,zs=!0),C=C.queue;var K=Cre.bind(null,E,C,h);if(G$(2048,8,K,[h]),C.getSnapshot!==f||V||os!==null&&os.memoizedState.tag&1){if(E.flags|=2048,K1(9,HO(),Mre.bind(null,E,C,b,f),null),Er===null)throw Error(r(349));P||(ig&124)!==0||$re(E,f,b)}return b}function $re(h,f,b){h.flags|=16384,h={getSnapshot:f,value:b},f=pi.updateQueue,f===null?(f=x6(),pi.updateQueue=f,f.stores=[h]):(b=f.stores,b===null?f.stores=[h]:b.push(h))}function Mre(h,f,b,E){f.value=b,f.getSnapshot=E,Ire(f)&&Are(h)}function Cre(h,f,b){return b(function(){Ire(f)&&Are(h)})}function Ire(h){var f=h.getSnapshot;h=h.value;try{var b=f();return!ca(h,b)}catch{return!0}}function Are(h){var f=Yy(h,2);f!==null&&Nl(f,h,2)}function $6(h){var f=za();if(typeof h=="function"){var b=h;if(h=b(),sb){wl(!0);try{b()}finally{wl(!1)}}}return f.memoizedState=f.baseState=h,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:h},f}function Pre(h,f,b,E){return h.baseState=b,E6(h,lr,typeof E=="function"?E:bf)}function i5e(h,f,b,E,C){if(ZO(h))throw Error(r(485));if(h=f.action,h!==null){var P={payload:C,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){P.listeners.push(V)}};ne.T!==null?b(!0):P.isTransition=!1,E(P),b=f.pending,b===null?(P.next=f.pending=P,kre(f,P)):(P.next=b.next,f.pending=b.next=P)}}function kre(h,f){var b=f.action,E=f.payload,C=h.state;if(f.isTransition){var P=ne.T,V={};ne.T=V;try{var K=b(C,E),oe=ne.S;oe!==null&&oe(V,K),Ore(h,f,K)}catch(Ee){M6(h,f,Ee)}finally{ne.T=P}}else try{P=b(C,E),Ore(h,f,P)}catch(Ee){M6(h,f,Ee)}}function Ore(h,f,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){Lre(h,f,E)},function(E){return M6(h,f,E)}):Lre(h,f,b)}function Lre(h,f,b){f.status="fulfilled",f.value=b,Rre(f),h.state=b,f=h.pending,f!==null&&(b=f.next,b===f?h.pending=null:(b=b.next,f.next=b,kre(h,b)))}function M6(h,f,b){var E=h.pending;if(h.pending=null,E!==null){E=E.next;do f.status="rejected",f.reason=b,Rre(f),f=f.next;while(f!==E)}h.action=null}function Rre(h){h=h.listeners;for(var f=0;f<h.length;f++)(0,h[f])()}function Nre(h,f){return f}function Dre(h,f){if(Jt){var b=Er.formState;if(b!==null){e:{var E=pi;if(Jt){if($t){t:{for(var C=$t,P=dn;C.nodeType!==8;){if(!P){C=null;break t}if(C=ju(C.nextSibling),C===null){C=null;break t}}P=C.data,C=P==="F!"||P==="F"?C:null}if(C){$t=ju(C.nextSibling),E=C.data==="F!";break e}}Fa(E)}E=!1}E&&(f=b[0])}}return b=za(),b.memoizedState=b.baseState=f,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nre,lastRenderedState:f},b.queue=E,b=ine.bind(null,pi,E),E.dispatch=b,E=$6(!1),P=k6.bind(null,pi,!1,E.queue),E=za(),C={state:f,dispatch:null,action:h,pending:null},E.queue=C,b=i5e.bind(null,pi,C,P,b),C.dispatch=b,E.memoizedState=h,[f,b,!1]}function Fre(h){var f=as();return zre(f,lr,h)}function zre(h,f,b){if(f=E6(h,f,Nre)[0],h=qO(bf)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var E=V$(f)}catch(V){throw V===D$?zO:V}else E=f;f=as();var C=f.queue,P=C.dispatch;return b!==f.memoizedState&&(pi.flags|=2048,K1(9,HO(),r5e.bind(null,C,b),null)),[E,P,h]}function r5e(h,f){h.action=f}function jre(h){var f=as(),b=lr;if(b!==null)return zre(f,b,h);as(),f=f.memoizedState,b=as();var E=b.queue.dispatch;return b.memoizedState=h,[f,E,!1]}function K1(h,f,b,E){return h={tag:h,create:b,deps:E,inst:f,next:null},f=pi.updateQueue,f===null&&(f=x6(),pi.updateQueue=f),b=f.lastEffect,b===null?f.lastEffect=h.next=h:(E=b.next,b.next=h,h.next=E,f.lastEffect=h),h}function HO(){return{destroy:void 0,resource:void 0}}function Ure(){return as().memoizedState}function WO(h,f,b,E){var C=za();E=E===void 0?null:E,pi.flags|=h,C.memoizedState=K1(1|f,HO(),b,E)}function G$(h,f,b,E){var C=as();E=E===void 0?null:E;var P=C.memoizedState.inst;lr!==null&&E!==null&&g6(E,lr.memoizedState.deps)?C.memoizedState=K1(f,P,b,E):(pi.flags|=h,C.memoizedState=K1(1|f,P,b,E))}function Bre(h,f){WO(8390656,8,h,f)}function Vre(h,f){G$(2048,8,h,f)}function Gre(h,f){return G$(4,2,h,f)}function qre(h,f){return G$(4,4,h,f)}function Hre(h,f){if(typeof f=="function"){h=h();var b=f(h);return function(){typeof b=="function"?b():f(null)}}if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function Wre(h,f,b){b=b!=null?b.concat([h]):null,G$(4,4,Hre.bind(null,f,h),b)}function C6(){}function Zre(h,f){var b=as();f=f===void 0?null:f;var E=b.memoizedState;return f!==null&&g6(f,E[1])?E[0]:(b.memoizedState=[h,f],h)}function Yre(h,f){var b=as();f=f===void 0?null:f;var E=b.memoizedState;if(f!==null&&g6(f,E[1]))return E[0];if(E=h(),sb){wl(!0);try{h()}finally{wl(!1)}}return b.memoizedState=[E,f],E}function I6(h,f,b){return b===void 0||(ig&1073741824)!==0?h.memoizedState=f:(h.memoizedState=b,h=Xne(),pi.lanes|=h,cg|=h,b)}function Kre(h,f,b,E){return ca(b,f)?b:W1.current!==null?(h=I6(h,b,E),ca(h,f)||(zs=!0),h):(ig&42)===0?(zs=!0,h.memoizedState=b):(h=Xne(),pi.lanes|=h,cg|=h,f)}function Jre(h,f,b,E,C){var P=ue.p;ue.p=P!==0&&8>P?P:8;var V=ne.T,K={};ne.T=K,k6(h,!1,f,b);try{var oe=C(),Ee=ne.S;if(Ee!==null&&Ee(K,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Fe=QDe(oe,E);q$(h,f,Fe,Rl(h))}else q$(h,f,E,Rl(h))}catch(Be){q$(h,f,{then:function(){},status:"rejected",reason:Be},Rl())}finally{ue.p=P,ne.T=V}}function n5e(){}function A6(h,f,b,E){if(h.tag!==5)throw Error(r(476));var C=Xre(h).queue;Jre(h,C,f,he,b===null?n5e:function(){return Qre(h),b(E)})}function Xre(h){var f=h.memoizedState;if(f!==null)return f;f={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:he},next:null};var b={};return f.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:b},next:null},h.memoizedState=f,h=h.alternate,h!==null&&(h.memoizedState=f),f}function Qre(h){var f=Xre(h).next.queue;q$(h,f,{},Rl())}function P6(){return Oo(cM)}function ene(){return as().memoizedState}function tne(){return as().memoizedState}function s5e(h){for(var f=h.return;f!==null;){switch(f.tag){case 24:case 3:var b=Rl();h=eg(b);var E=tg(f,h,b);E!==null&&(Nl(E,f,b),z$(E,f,b)),f={cache:a6()},h.payload=f;return}f=f.return}}function o5e(h,f,b){var E=Rl();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},ZO(h)?rne(f,b):(b=yf(h,f,b,E),b!==null&&(Nl(b,h,E),nne(b,f,E)))}function ine(h,f,b){var E=Rl();q$(h,f,b,E)}function q$(h,f,b,E){var C={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(ZO(h))rne(f,C);else{var P=h.alternate;if(h.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var V=f.lastRenderedState,K=P(V,b);if(C.hasEagerState=!0,C.eagerState=K,ca(K,V))return J0(h,f,C,0),Er===null&&K0(),!1}catch{}finally{}if(b=yf(h,f,C,E),b!==null)return Nl(b,h,E),nne(b,f,E),!0}return!1}function k6(h,f,b,E){if(E={lane:2,revertLane:uB(),action:E,hasEagerState:!1,eagerState:null,next:null},ZO(h)){if(f)throw Error(r(479))}else f=yf(h,b,E,2),f!==null&&Nl(f,h,2)}function ZO(h){var f=h.alternate;return h===pi||f!==null&&f===pi}function rne(h,f){Z1=BO=!0;var b=h.pending;b===null?f.next=f:(f.next=b.next,b.next=f),h.pending=f}function nne(h,f,b){if((b&4194048)!==0){var E=f.lanes;E&=h.pendingLanes,b|=E,f.lanes=b,E1(h,b)}}var YO={readContext:Oo,use:GO,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useLayoutEffect:Wn,useInsertionEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useSyncExternalStore:Wn,useId:Wn,useHostTransitionStatus:Wn,useFormState:Wn,useActionState:Wn,useOptimistic:Wn,useMemoCache:Wn,useCacheRefresh:Wn},sne={readContext:Oo,use:GO,useCallback:function(h,f){return za().memoizedState=[h,f===void 0?null:f],h},useContext:Oo,useEffect:Bre,useImperativeHandle:function(h,f,b){b=b!=null?b.concat([h]):null,WO(4194308,4,Hre.bind(null,f,h),b)},useLayoutEffect:function(h,f){return WO(4194308,4,h,f)},useInsertionEffect:function(h,f){WO(4,2,h,f)},useMemo:function(h,f){var b=za();f=f===void 0?null:f;var E=h();if(sb){wl(!0);try{h()}finally{wl(!1)}}return b.memoizedState=[E,f],E},useReducer:function(h,f,b){var E=za();if(b!==void 0){var C=b(f);if(sb){wl(!0);try{b(f)}finally{wl(!1)}}}else C=f;return E.memoizedState=E.baseState=C,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:C},E.queue=h,h=h.dispatch=o5e.bind(null,pi,h),[E.memoizedState,h]},useRef:function(h){var f=za();return h={current:h},f.memoizedState=h},useState:function(h){h=$6(h);var f=h.queue,b=ine.bind(null,pi,f);return f.dispatch=b,[h.memoizedState,b]},useDebugValue:C6,useDeferredValue:function(h,f){var b=za();return I6(b,h,f)},useTransition:function(){var h=$6(!1);return h=Jre.bind(null,pi,h.queue,!0,!1),za().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,f,b){var E=pi,C=za();if(Jt){if(b===void 0)throw Error(r(407));b=b()}else{if(b=f(),Er===null)throw Error(r(349));(ki&124)!==0||$re(E,f,b)}C.memoizedState=b;var P={value:b,getSnapshot:f};return C.queue=P,Bre(Cre.bind(null,E,P,h),[h]),E.flags|=2048,K1(9,HO(),Mre.bind(null,E,P,b,f),null),b},useId:function(){var h=za(),f=Er.identifierPrefix;if(Jt){var b=se,E=Z;b=(E&~(1<<32-Io(E)-1)).toString(32)+b,f=""+f+"R"+b,b=VO++,0<b&&(f+="H"+b.toString(32)),f+=""}else b=e5e++,f=""+f+"r"+b.toString(32)+"";return h.memoizedState=f},useHostTransitionStatus:P6,useFormState:Dre,useActionState:Dre,useOptimistic:function(h){var f=za();f.memoizedState=f.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=b,f=k6.bind(null,pi,!0,b),b.dispatch=f,[h,f]},useMemoCache:S6,useCacheRefresh:function(){return za().memoizedState=s5e.bind(null,pi)}},one={readContext:Oo,use:GO,useCallback:Zre,useContext:Oo,useEffect:Vre,useImperativeHandle:Wre,useInsertionEffect:Gre,useLayoutEffect:qre,useMemo:Yre,useReducer:qO,useRef:Ure,useState:function(){return qO(bf)},useDebugValue:C6,useDeferredValue:function(h,f){var b=as();return Kre(b,lr.memoizedState,h,f)},useTransition:function(){var h=qO(bf)[0],f=as().memoizedState;return[typeof h=="boolean"?h:V$(h),f]},useSyncExternalStore:Tre,useId:ene,useHostTransitionStatus:P6,useFormState:Fre,useActionState:Fre,useOptimistic:function(h,f){var b=as();return Pre(b,lr,h,f)},useMemoCache:S6,useCacheRefresh:tne},a5e={readContext:Oo,use:GO,useCallback:Zre,useContext:Oo,useEffect:Vre,useImperativeHandle:Wre,useInsertionEffect:Gre,useLayoutEffect:qre,useMemo:Yre,useReducer:T6,useRef:Ure,useState:function(){return T6(bf)},useDebugValue:C6,useDeferredValue:function(h,f){var b=as();return lr===null?I6(b,h,f):Kre(b,lr.memoizedState,h,f)},useTransition:function(){var h=T6(bf)[0],f=as().memoizedState;return[typeof h=="boolean"?h:V$(h),f]},useSyncExternalStore:Tre,useId:ene,useHostTransitionStatus:P6,useFormState:jre,useActionState:jre,useOptimistic:function(h,f){var b=as();return lr!==null?Pre(b,lr,h,f):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:S6,useCacheRefresh:tne},J1=null,H$=0;function KO(h){var f=H$;return H$+=1,J1===null&&(J1=[]),gre(J1,h,f)}function W$(h,f){f=f.props.ref,h.ref=f!==void 0?f:null}function JO(h,f){throw f.$$typeof===p?Error(r(525)):(h=Object.prototype.toString.call(f),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h)))}function ane(h){var f=h._init;return f(h._payload)}function lne(h){function f(be,fe){if(h){var Se=be.deletions;Se===null?(be.deletions=[fe],be.flags|=16):Se.push(fe)}}function b(be,fe){if(!h)return null;for(;fe!==null;)f(be,fe),fe=fe.sibling;return null}function E(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function C(be,fe){return be=Lc(be,fe),be.index=0,be.sibling=null,be}function P(be,fe,Se){return be.index=Se,h?(Se=be.alternate,Se!==null?(Se=Se.index,Se<fe?(be.flags|=67108866,fe):Se):(be.flags|=67108866,fe)):(be.flags|=1048576,fe)}function V(be){return h&&be.alternate===null&&(be.flags|=67108866),be}function K(be,fe,Se,ze){return fe===null||fe.tag!==6?(fe=L$(Se,be.mode,ze),fe.return=be,fe):(fe=C(fe,Se),fe.return=be,fe)}function oe(be,fe,Se,ze){var St=Se.type;return St===w?Fe(be,fe,Se.props.children,ze,Se.key):fe!==null&&(fe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===q&&ane(St)===fe.type)?(fe=C(fe,Se.props),W$(fe,Se),fe.return=be,fe):(fe=Q0(Se.type,Se.key,Se.props,null,be.mode,ze),W$(fe,Se),fe.return=be,fe)}function Ee(be,fe,Se,ze){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Se.containerInfo||fe.stateNode.implementation!==Se.implementation?(fe=V1(Se,be.mode,ze),fe.return=be,fe):(fe=C(fe,Se.children||[]),fe.return=be,fe)}function Fe(be,fe,Se,ze,St){return fe===null||fe.tag!==7?(fe=nd(Se,be.mode,ze,St),fe.return=be,fe):(fe=C(fe,Se),fe.return=be,fe)}function Be(be,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=L$(""+fe,be.mode,Se),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case m:return Se=Q0(fe.type,fe.key,fe.props,null,be.mode,Se),W$(Se,fe),Se.return=be,Se;case v:return fe=V1(fe,be.mode,Se),fe.return=be,fe;case q:var ze=fe._init;return fe=ze(fe._payload),Be(be,fe,Se)}if(ye(fe)||te(fe))return fe=nd(fe,be.mode,Se,null),fe.return=be,fe;if(typeof fe.then=="function")return Be(be,KO(fe),Se);if(fe.$$typeof===A)return Be(be,DO(be,fe),Se);JO(be,fe)}return null}function $e(be,fe,Se,ze){var St=fe!==null?fe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return St!==null?null:K(be,fe,""+Se,ze);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case m:return Se.key===St?oe(be,fe,Se,ze):null;case v:return Se.key===St?Ee(be,fe,Se,ze):null;case q:return St=Se._init,Se=St(Se._payload),$e(be,fe,Se,ze)}if(ye(Se)||te(Se))return St!==null?null:Fe(be,fe,Se,ze,null);if(typeof Se.then=="function")return $e(be,fe,KO(Se),ze);if(Se.$$typeof===A)return $e(be,fe,DO(be,Se),ze);JO(be,Se)}return null}function Ie(be,fe,Se,ze,St){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return be=be.get(Se)||null,K(fe,be,""+ze,St);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case m:return be=be.get(ze.key===null?Se:ze.key)||null,oe(fe,be,ze,St);case v:return be=be.get(ze.key===null?Se:ze.key)||null,Ee(fe,be,ze,St);case q:var gi=ze._init;return ze=gi(ze._payload),Ie(be,fe,Se,ze,St)}if(ye(ze)||te(ze))return be=be.get(Se)||null,Fe(fe,be,ze,St,null);if(typeof ze.then=="function")return Ie(be,fe,Se,KO(ze),St);if(ze.$$typeof===A)return Ie(be,fe,Se,DO(fe,ze),St);JO(fe,ze)}return null}function Zt(be,fe,Se,ze){for(var St=null,gi=null,Ot=fe,Gt=fe=0,Us=null;Ot!==null&&Gt<Se.length;Gt++){Ot.index>Gt?(Us=Ot,Ot=null):Us=Ot.sibling;var Di=$e(be,Ot,Se[Gt],ze);if(Di===null){Ot===null&&(Ot=Us);break}h&&Ot&&Di.alternate===null&&f(be,Ot),fe=P(Di,fe,Gt),gi===null?St=Di:gi.sibling=Di,gi=Di,Ot=Us}if(Gt===Se.length)return b(be,Ot),Jt&&xe(be,Gt),St;if(Ot===null){for(;Gt<Se.length;Gt++)Ot=Be(be,Se[Gt],ze),Ot!==null&&(fe=P(Ot,fe,Gt),gi===null?St=Ot:gi.sibling=Ot,gi=Ot);return Jt&&xe(be,Gt),St}for(Ot=E(Ot);Gt<Se.length;Gt++)Us=Ie(Ot,be,Gt,Se[Gt],ze),Us!==null&&(h&&Us.alternate!==null&&Ot.delete(Us.key===null?Gt:Us.key),fe=P(Us,fe,Gt),gi===null?St=Us:gi.sibling=Us,gi=Us);return h&&Ot.forEach(function(vg){return f(be,vg)}),Jt&&xe(be,Gt),St}function jt(be,fe,Se,ze){if(Se==null)throw Error(r(151));for(var St=null,gi=null,Ot=fe,Gt=fe=0,Us=null,Di=Se.next();Ot!==null&&!Di.done;Gt++,Di=Se.next()){Ot.index>Gt?(Us=Ot,Ot=null):Us=Ot.sibling;var vg=$e(be,Ot,Di.value,ze);if(vg===null){Ot===null&&(Ot=Us);break}h&&Ot&&vg.alternate===null&&f(be,Ot),fe=P(vg,fe,Gt),gi===null?St=vg:gi.sibling=vg,gi=vg,Ot=Us}if(Di.done)return b(be,Ot),Jt&&xe(be,Gt),St;if(Ot===null){for(;!Di.done;Gt++,Di=Se.next())Di=Be(be,Di.value,ze),Di!==null&&(fe=P(Di,fe,Gt),gi===null?St=Di:gi.sibling=Di,gi=Di);return Jt&&xe(be,Gt),St}for(Ot=E(Ot);!Di.done;Gt++,Di=Se.next())Di=Ie(Ot,be,Gt,Di.value,ze),Di!==null&&(h&&Di.alternate!==null&&Ot.delete(Di.key===null?Gt:Di.key),fe=P(Di,fe,Gt),gi===null?St=Di:gi.sibling=Di,gi=Di);return h&&Ot.forEach(function(lFe){return f(be,lFe)}),Jt&&xe(be,Gt),St}function ur(be,fe,Se,ze){if(typeof Se=="object"&&Se!==null&&Se.type===w&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case m:e:{for(var St=Se.key;fe!==null;){if(fe.key===St){if(St=Se.type,St===w){if(fe.tag===7){b(be,fe.sibling),ze=C(fe,Se.props.children),ze.return=be,be=ze;break e}}else if(fe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===q&&ane(St)===fe.type){b(be,fe.sibling),ze=C(fe,Se.props),W$(ze,Se),ze.return=be,be=ze;break e}b(be,fe);break}else f(be,fe);fe=fe.sibling}Se.type===w?(ze=nd(Se.props.children,be.mode,ze,Se.key),ze.return=be,be=ze):(ze=Q0(Se.type,Se.key,Se.props,null,be.mode,ze),W$(ze,Se),ze.return=be,be=ze)}return V(be);case v:e:{for(St=Se.key;fe!==null;){if(fe.key===St)if(fe.tag===4&&fe.stateNode.containerInfo===Se.containerInfo&&fe.stateNode.implementation===Se.implementation){b(be,fe.sibling),ze=C(fe,Se.children||[]),ze.return=be,be=ze;break e}else{b(be,fe);break}else f(be,fe);fe=fe.sibling}ze=V1(Se,be.mode,ze),ze.return=be,be=ze}return V(be);case q:return St=Se._init,Se=St(Se._payload),ur(be,fe,Se,ze)}if(ye(Se))return Zt(be,fe,Se,ze);if(te(Se)){if(St=te(Se),typeof St!="function")throw Error(r(150));return Se=St.call(Se),jt(be,fe,Se,ze)}if(typeof Se.then=="function")return ur(be,fe,KO(Se),ze);if(Se.$$typeof===A)return ur(be,fe,DO(be,Se),ze);JO(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,fe!==null&&fe.tag===6?(b(be,fe.sibling),ze=C(fe,Se),ze.return=be,be=ze):(b(be,fe),ze=L$(Se,be.mode,ze),ze.return=be,be=ze),V(be)):b(be,fe)}return function(be,fe,Se,ze){try{H$=0;var St=ur(be,fe,Se,ze);return J1=null,St}catch(Ot){if(Ot===D$||Ot===zO)throw Ot;var gi=pa(29,Ot,null,be.mode);return gi.lanes=ze,gi.return=be,gi}finally{}}}var X1=lne(!0),cne=lne(!1),Nc=_e(null),od=null;function rg(h){var f=h.alternate;qe(xs,xs.current&1),qe(Nc,h),od===null&&(f===null||W1.current!==null||f.memoizedState!==null)&&(od=h)}function une(h){if(h.tag===22){if(qe(xs,xs.current),qe(Nc,h),od===null){var f=h.alternate;f!==null&&f.memoizedState!==null&&(od=h)}}else ng()}function ng(){qe(xs,xs.current),qe(Nc,Nc.current)}function wf(h){ke(Nc),od===h&&(od=null),ke(xs)}var xs=_e(0);function XO(h){for(var f=h;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||xB(b)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function O6(h,f,b,E){f=h.memoizedState,b=b(E,f),b=b==null?f:u({},f,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var L6={enqueueSetState:function(h,f,b){h=h._reactInternals;var E=Rl(),C=eg(E);C.payload=f,b!=null&&(C.callback=b),f=tg(h,C,E),f!==null&&(Nl(f,h,E),z$(f,h,E))},enqueueReplaceState:function(h,f,b){h=h._reactInternals;var E=Rl(),C=eg(E);C.tag=1,C.payload=f,b!=null&&(C.callback=b),f=tg(h,C,E),f!==null&&(Nl(f,h,E),z$(f,h,E))},enqueueForceUpdate:function(h,f){h=h._reactInternals;var b=Rl(),E=eg(b);E.tag=2,f!=null&&(E.callback=f),f=tg(h,E,b),f!==null&&(Nl(f,h,b),z$(f,h,b))}};function hne(h,f,b,E,C,P,V){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,P,V):f.prototype&&f.prototype.isPureReactComponent?!ua(b,E)||!ua(C,P):!0}function dne(h,f,b,E){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,E),f.state!==h&&L6.enqueueReplaceState(f,f.state,null)}function ob(h,f){var b=f;if("ref"in f){b={};for(var E in f)E!=="ref"&&(b[E]=f[E])}if(h=h.defaultProps){b===f&&(b=u({},b));for(var C in h)b[C]===void 0&&(b[C]=h[C])}return b}var QO=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function pne(h){QO(h)}function fne(h){console.error(h)}function mne(h){QO(h)}function eL(h,f){try{var b=h.onUncaughtError;b(f.value,{componentStack:f.stack})}catch(E){setTimeout(function(){throw E})}}function yne(h,f,b){try{var E=h.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function R6(h,f,b){return b=eg(b),b.tag=3,b.payload={element:null},b.callback=function(){eL(h,f)},b}function gne(h){return h=eg(h),h.tag=3,h}function vne(h,f,b,E){var C=b.type.getDerivedStateFromError;if(typeof C=="function"){var P=E.value;h.payload=function(){return C(P)},h.callback=function(){yne(f,b,E)}}var V=b.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(h.callback=function(){yne(f,b,E),typeof C!="function"&&(ug===null?ug=new Set([this]):ug.add(this));var K=E.stack;this.componentDidCatch(E.value,{componentStack:K!==null?K:""})})}function l5e(h,f,b,E,C){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(f=b.alternate,f!==null&&ib(f,b,C,!0),b=Nc.current,b!==null){switch(b.tag){case 13:return od===null?sB():b.alternate===null&&Mn===0&&(Mn=3),b.flags&=-257,b.flags|=65536,b.lanes=C,E===u6?b.flags|=16384:(f=b.updateQueue,f===null?b.updateQueue=new Set([E]):f.add(E),aB(h,E,C)),!1;case 22:return b.flags|=65536,E===u6?b.flags|=16384:(f=b.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=f):(b=f.retryQueue,b===null?f.retryQueue=new Set([E]):b.add(E)),aB(h,E,C)),!1}throw Error(r(435,b.tag))}return aB(h,E,C),sB(),!1}if(Jt)return f=Nc.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,E!==Fs&&(h=Error(r(422),{cause:E}),Xy(ha(h,b)))):(E!==Fs&&(f=Error(r(423),{cause:E}),Xy(ha(f,b))),h=h.current.alternate,h.flags|=65536,C&=-C,h.lanes|=C,E=ha(E,b),C=R6(h.stateNode,E,C),p6(h,C),Mn!==4&&(Mn=2)),!1;var P=Error(r(520),{cause:E});if(P=ha(P,b),eM===null?eM=[P]:eM.push(P),Mn!==4&&(Mn=2),f===null)return!0;E=ha(E,b),b=f;do{switch(b.tag){case 3:return b.flags|=65536,h=C&-C,b.lanes|=h,h=R6(b.stateNode,E,h),p6(b,h),!1;case 1:if(f=b.type,P=b.stateNode,(b.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(ug===null||!ug.has(P))))return b.flags|=65536,C&=-C,b.lanes|=C,C=gne(C),vne(C,h,b,E),p6(b,C),!1}b=b.return}while(b!==null);return!1}var bne=Error(r(461)),zs=!1;function lo(h,f,b,E){f.child=h===null?cne(f,null,b,E):X1(f,h.child,b,E)}function wne(h,f,b,E,C){b=b.render;var P=f.ref;if("ref"in E){var V={};for(var K in E)K!=="ref"&&(V[K]=E[K])}else V=E;return rb(f),E=v6(h,f,b,V,P,C),K=b6(),h!==null&&!zs?(w6(h,f,C),_f(h,f,C)):(Jt&&K&&Ve(f),f.flags|=1,lo(h,f,E,C),f.child)}function _ne(h,f,b,E,C){if(h===null){var P=b.type;return typeof P=="function"&&!B1(P)&&P.defaultProps===void 0&&b.compare===null?(f.tag=15,f.type=P,xne(h,f,P,E,C)):(h=Q0(b.type,null,E,f,f.mode,C),h.ref=f.ref,h.return=f,f.child=h)}if(P=h.child,!V6(h,C)){var V=P.memoizedProps;if(b=b.compare,b=b!==null?b:ua,b(V,E)&&h.ref===f.ref)return _f(h,f,C)}return f.flags|=1,h=Lc(P,E),h.ref=f.ref,h.return=f,f.child=h}function xne(h,f,b,E,C){if(h!==null){var P=h.memoizedProps;if(ua(P,E)&&h.ref===f.ref)if(zs=!1,f.pendingProps=E=P,V6(h,C))(h.flags&131072)!==0&&(zs=!0);else return f.lanes=h.lanes,_f(h,f,C)}return N6(h,f,b,E,C)}function Sne(h,f,b){var E=f.pendingProps,C=E.children,P=h!==null?h.memoizedState:null;if(E.mode==="hidden"){if((f.flags&128)!==0){if(E=P!==null?P.baseLanes|b:b,h!==null){for(C=f.child=h.child,P=0;C!==null;)P=P|C.lanes|C.childLanes,C=C.sibling;f.childLanes=P&~E}else f.childLanes=0,f.child=null;return Ene(h,f,E,b)}if((b&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},h!==null&&FO(f,P!==null?P.cachePool:null),P!==null?xre(f,P):m6(),une(f);else return f.lanes=f.childLanes=536870912,Ene(h,f,P!==null?P.baseLanes|b:b,b)}else P!==null?(FO(f,P.cachePool),xre(f,P),ng(),f.memoizedState=null):(h!==null&&FO(f,null),m6(),ng());return lo(h,f,C,b),f.child}function Ene(h,f,b,E){var C=c6();return C=C===null?null:{parent:_s._currentValue,pool:C},f.memoizedState={baseLanes:b,cachePool:C},h!==null&&FO(f,null),m6(),une(f),h!==null&&ib(h,f,E,!0),null}function tL(h,f){var b=f.ref;if(b===null)h!==null&&h.ref!==null&&(f.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(h===null||h.ref!==b)&&(f.flags|=4194816)}}function N6(h,f,b,E,C){return rb(f),b=v6(h,f,b,E,void 0,C),E=b6(),h!==null&&!zs?(w6(h,f,C),_f(h,f,C)):(Jt&&E&&Ve(f),f.flags|=1,lo(h,f,b,C),f.child)}function Tne(h,f,b,E,C,P){return rb(f),f.updateQueue=null,b=Ere(f,E,b,C),Sre(h),E=b6(),h!==null&&!zs?(w6(h,f,P),_f(h,f,P)):(Jt&&E&&Ve(f),f.flags|=1,lo(h,f,b,P),f.child)}function $ne(h,f,b,E,C){if(rb(f),f.stateNode===null){var P=gf,V=b.contextType;typeof V=="object"&&V!==null&&(P=Oo(V)),P=new b(E,P),f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=L6,f.stateNode=P,P._reactInternals=f,P=f.stateNode,P.props=E,P.state=f.memoizedState,P.refs={},h6(f),V=b.contextType,P.context=typeof V=="object"&&V!==null?Oo(V):gf,P.state=f.memoizedState,V=b.getDerivedStateFromProps,typeof V=="function"&&(O6(f,b,V,E),P.state=f.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(V=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),V!==P.state&&L6.enqueueReplaceState(P,P.state,null),U$(f,E,P,C),j$(),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308),E=!0}else if(h===null){P=f.stateNode;var K=f.memoizedProps,oe=ob(b,K);P.props=oe;var Ee=P.context,Fe=b.contextType;V=gf,typeof Fe=="object"&&Fe!==null&&(V=Oo(Fe));var Be=b.getDerivedStateFromProps;Fe=typeof Be=="function"||typeof P.getSnapshotBeforeUpdate=="function",K=f.pendingProps!==K,Fe||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(K||Ee!==V)&&dne(f,P,E,V),Qy=!1;var $e=f.memoizedState;P.state=$e,U$(f,E,P,C),j$(),Ee=f.memoizedState,K||$e!==Ee||Qy?(typeof Be=="function"&&(O6(f,b,Be,E),Ee=f.memoizedState),(oe=Qy||hne(f,b,oe,E,$e,Ee,V))?(Fe||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(f.flags|=4194308)):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=Ee),P.props=E,P.state=Ee,P.context=V,E=oe):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{P=f.stateNode,d6(h,f),V=f.memoizedProps,Fe=ob(b,V),P.props=Fe,Be=f.pendingProps,$e=P.context,Ee=b.contextType,oe=gf,typeof Ee=="object"&&Ee!==null&&(oe=Oo(Ee)),K=b.getDerivedStateFromProps,(Ee=typeof K=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==Be||$e!==oe)&&dne(f,P,E,oe),Qy=!1,$e=f.memoizedState,P.state=$e,U$(f,E,P,C),j$();var Ie=f.memoizedState;V!==Be||$e!==Ie||Qy||h!==null&&h.dependencies!==null&&NO(h.dependencies)?(typeof K=="function"&&(O6(f,b,K,E),Ie=f.memoizedState),(Fe=Qy||hne(f,b,Fe,E,$e,Ie,oe)||h!==null&&h.dependencies!==null&&NO(h.dependencies))?(Ee||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(E,Ie,oe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(E,Ie,oe)),typeof P.componentDidUpdate=="function"&&(f.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof P.componentDidUpdate!="function"||V===h.memoizedProps&&$e===h.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===h.memoizedProps&&$e===h.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=Ie),P.props=E,P.state=Ie,P.context=oe,E=Fe):(typeof P.componentDidUpdate!="function"||V===h.memoizedProps&&$e===h.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===h.memoizedProps&&$e===h.memoizedState||(f.flags|=1024),E=!1)}return P=E,tL(h,f),E=(f.flags&128)!==0,P||E?(P=f.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:P.render(),f.flags|=1,h!==null&&E?(f.child=X1(f,h.child,null,C),f.child=X1(f,null,b,C)):lo(h,f,b,C),f.memoizedState=P.state,h=f.child):h=_f(h,f,C),h}function Mne(h,f,b,E){return Jy(),f.flags|=256,lo(h,f,b,E),f.child}var D6={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function F6(h){return{baseLanes:h,cachePool:fre()}}function z6(h,f,b){return h=h!==null?h.childLanes&~b:0,f&&(h|=Dc),h}function Cne(h,f,b){var E=f.pendingProps,C=!1,P=(f.flags&128)!==0,V;if((V=P)||(V=h!==null&&h.memoizedState===null?!1:(xs.current&2)!==0),V&&(C=!0,f.flags&=-129),V=(f.flags&32)!==0,f.flags&=-33,h===null){if(Jt){if(C?rg(f):ng(),Jt){var K=$t,oe;if(oe=K){e:{for(oe=K,K=dn;oe.nodeType!==8;){if(!K){K=null;break e}if(oe=ju(oe.nextSibling),oe===null){K=null;break e}}K=oe}K!==null?(f.memoizedState={dehydrated:K,treeContext:z!==null?{id:Z,overflow:se}:null,retryLane:536870912,hydrationErrors:null},oe=pa(18,null,null,0),oe.stateNode=K,oe.return=f,f.child=oe,xt=f,$t=null,oe=!0):oe=!1}oe||Fa(f)}if(K=f.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return xB(K)?f.lanes=32:f.lanes=536870912,null;wf(f)}return K=E.children,E=E.fallback,C?(ng(),C=f.mode,K=iL({mode:"hidden",children:K},C),E=nd(E,C,b,null),K.return=f,E.return=f,K.sibling=E,f.child=K,C=f.child,C.memoizedState=F6(b),C.childLanes=z6(h,V,b),f.memoizedState=D6,E):(rg(f),j6(f,K))}if(oe=h.memoizedState,oe!==null&&(K=oe.dehydrated,K!==null)){if(P)f.flags&256?(rg(f),f.flags&=-257,f=U6(h,f,b)):f.memoizedState!==null?(ng(),f.child=h.child,f.flags|=128,f=null):(ng(),C=E.fallback,K=f.mode,E=iL({mode:"visible",children:E.children},K),C=nd(C,K,b,null),C.flags|=2,E.return=f,C.return=f,E.sibling=C,f.child=E,X1(f,h.child,null,b),E=f.child,E.memoizedState=F6(b),E.childLanes=z6(h,V,b),f.memoizedState=D6,f=C);else if(rg(f),xB(K)){if(V=K.nextSibling&&K.nextSibling.dataset,V)var Ee=V.dgst;V=Ee,E=Error(r(419)),E.stack="",E.digest=V,Xy({value:E,source:null,stack:null}),f=U6(h,f,b)}else if(zs||ib(h,f,b,!1),V=(b&h.childLanes)!==0,zs||V){if(V=Er,V!==null&&(E=b&-b,E=(E&42)!==0?1:N0(E),E=(E&(V.suspendedLanes|b))!==0?0:E,E!==0&&E!==oe.retryLane))throw oe.retryLane=E,Yy(h,E),Nl(V,h,E),bne;K.data==="$?"||sB(),f=U6(h,f,b)}else K.data==="$?"?(f.flags|=192,f.child=h.child,f=null):(h=oe.treeContext,$t=ju(K.nextSibling),xt=f,Jt=!0,Sr=null,dn=!1,h!==null&&(M[O++]=Z,M[O++]=se,M[O++]=z,Z=h.id,se=h.overflow,z=f),f=j6(f,E.children),f.flags|=4096);return f}return C?(ng(),C=E.fallback,K=f.mode,oe=h.child,Ee=oe.sibling,E=Lc(oe,{mode:"hidden",children:E.children}),E.subtreeFlags=oe.subtreeFlags&65011712,Ee!==null?C=Lc(Ee,C):(C=nd(C,K,b,null),C.flags|=2),C.return=f,E.return=f,E.sibling=C,f.child=E,E=C,C=f.child,K=h.child.memoizedState,K===null?K=F6(b):(oe=K.cachePool,oe!==null?(Ee=_s._currentValue,oe=oe.parent!==Ee?{parent:Ee,pool:Ee}:oe):oe=fre(),K={baseLanes:K.baseLanes|b,cachePool:oe}),C.memoizedState=K,C.childLanes=z6(h,V,b),f.memoizedState=D6,E):(rg(f),b=h.child,h=b.sibling,b=Lc(b,{mode:"visible",children:E.children}),b.return=f,b.sibling=null,h!==null&&(V=f.deletions,V===null?(f.deletions=[h],f.flags|=16):V.push(h)),f.child=b,f.memoizedState=null,b)}function j6(h,f){return f=iL({mode:"visible",children:f},h.mode),f.return=h,h.child=f}function iL(h,f){return h=pa(22,h,null,f),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function U6(h,f,b){return X1(f,h.child,null,b),h=j6(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function Ine(h,f,b){h.lanes|=f;var E=h.alternate;E!==null&&(E.lanes|=f),tb(h.return,f,b)}function B6(h,f,b,E,C){var P=h.memoizedState;P===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:C}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=b,P.tailMode=C)}function Ane(h,f,b){var E=f.pendingProps,C=E.revealOrder,P=E.tail;if(lo(h,f,E.children,b),E=xs.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Ine(h,b,f);else if(h.tag===19)Ine(h,b,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}switch(qe(xs,E),C){case"forwards":for(b=f.child,C=null;b!==null;)h=b.alternate,h!==null&&XO(h)===null&&(C=b),b=b.sibling;b=C,b===null?(C=f.child,f.child=null):(C=b.sibling,b.sibling=null),B6(f,!1,C,b,P);break;case"backwards":for(b=null,C=f.child,f.child=null;C!==null;){if(h=C.alternate,h!==null&&XO(h)===null){f.child=C;break}h=C.sibling,C.sibling=b,b=C,C=h}B6(f,!0,b,null,P);break;case"together":B6(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function _f(h,f,b){if(h!==null&&(f.dependencies=h.dependencies),cg|=f.lanes,(b&f.childLanes)===0)if(h!==null){if(ib(h,f,b,!1),(b&f.childLanes)===0)return null}else return null;if(h!==null&&f.child!==h.child)throw Error(r(153));if(f.child!==null){for(h=f.child,b=Lc(h,h.pendingProps),f.child=b,b.return=f;h.sibling!==null;)h=h.sibling,b=b.sibling=Lc(h,h.pendingProps),b.return=f;b.sibling=null}return f.child}function V6(h,f){return(h.lanes&f)!==0?!0:(h=h.dependencies,!!(h!==null&&NO(h)))}function c5e(h,f,b){switch(f.tag){case 3:qt(f,f.stateNode.containerInfo),sd(f,_s,h.memoizedState.cache),Jy();break;case 27:case 5:Vt(f);break;case 4:qt(f,f.stateNode.containerInfo);break;case 10:sd(f,f.type,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(rg(f),f.flags|=128,null):(b&f.child.childLanes)!==0?Cne(h,f,b):(rg(f),h=_f(h,f,b),h!==null?h.sibling:null);rg(f);break;case 19:var C=(h.flags&128)!==0;if(E=(b&f.childLanes)!==0,E||(ib(h,f,b,!1),E=(b&f.childLanes)!==0),C){if(E)return Ane(h,f,b);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),qe(xs,xs.current),E)break;return null;case 22:case 23:return f.lanes=0,Sne(h,f,b);case 24:sd(f,_s,h.memoizedState.cache)}return _f(h,f,b)}function Pne(h,f,b){if(h!==null)if(h.memoizedProps!==f.pendingProps)zs=!0;else{if(!V6(h,b)&&(f.flags&128)===0)return zs=!1,c5e(h,f,b);zs=(h.flags&131072)!==0}else zs=!1,Jt&&(f.flags&1048576)!==0&&Ae(f,S,f.index);switch(f.lanes=0,f.tag){case 16:e:{h=f.pendingProps;var E=f.elementType,C=E._init;if(E=C(E._payload),f.type=E,typeof E=="function")B1(E)?(h=ob(E,h),f.tag=1,f=$ne(null,f,E,h,b)):(f.tag=0,f=N6(null,f,E,h,b));else{if(E!=null){if(C=E.$$typeof,C===k){f.tag=11,f=wne(null,f,E,h,b);break e}else if(C===B){f.tag=14,f=_ne(null,f,E,h,b);break e}}throw f=ee(E)||E,Error(r(306,f,""))}}return f;case 0:return N6(h,f,f.type,f.pendingProps,b);case 1:return E=f.type,C=ob(E,f.pendingProps),$ne(h,f,E,C,b);case 3:e:{if(qt(f,f.stateNode.containerInfo),h===null)throw Error(r(387));E=f.pendingProps;var P=f.memoizedState;C=P.element,d6(h,f),U$(f,E,null,b);var V=f.memoizedState;if(E=V.cache,sd(f,_s,E),E!==P.cache&&G1(f,[_s],b,!0),j$(),E=V.element,P.isDehydrated)if(P={element:E,isDehydrated:!1,cache:V.cache},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){f=Mne(h,f,E,b);break e}else if(E!==C){C=ha(Error(r(424)),f),Xy(C),f=Mne(h,f,E,b);break e}else{switch(h=f.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for($t=ju(h.firstChild),xt=f,Jt=!0,Sr=null,dn=!0,b=cne(f,null,E,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Jy(),E===C){f=_f(h,f,b);break e}lo(h,f,E,b)}f=f.child}return f;case 26:return tL(h,f),h===null?(b=Rse(f.type,null,f.pendingProps,null))?f.memoizedState=b:Jt||(b=f.type,h=f.pendingProps,E=yL(Xe.current).createElement(b),E[Yi]=f,E[Hn]=h,uo(E,b,h),un(E),f.stateNode=E):f.memoizedState=Rse(f.type,h.memoizedProps,f.pendingProps,h.memoizedState),null;case 27:return Vt(f),h===null&&Jt&&(E=f.stateNode=kse(f.type,f.pendingProps,Xe.current),xt=f,dn=!0,C=$t,pg(f.type)?(SB=C,$t=ju(E.firstChild)):$t=C),lo(h,f,f.pendingProps.children,b),tL(h,f),h===null&&(f.flags|=4194304),f.child;case 5:return h===null&&Jt&&((C=E=$t)&&(E=D5e(E,f.type,f.pendingProps,dn),E!==null?(f.stateNode=E,xt=f,$t=ju(E.firstChild),dn=!1,C=!0):C=!1),C||Fa(f)),Vt(f),C=f.type,P=f.pendingProps,V=h!==null?h.memoizedProps:null,E=P.children,bB(C,P)?E=null:V!==null&&bB(C,V)&&(f.flags|=32),f.memoizedState!==null&&(C=v6(h,f,t5e,null,null,b),cM._currentValue=C),tL(h,f),lo(h,f,E,b),f.child;case 6:return h===null&&Jt&&((h=b=$t)&&(b=F5e(b,f.pendingProps,dn),b!==null?(f.stateNode=b,xt=f,$t=null,h=!0):h=!1),h||Fa(f)),null;case 13:return Cne(h,f,b);case 4:return qt(f,f.stateNode.containerInfo),E=f.pendingProps,h===null?f.child=X1(f,null,E,b):lo(h,f,E,b),f.child;case 11:return wne(h,f,f.type,f.pendingProps,b);case 7:return lo(h,f,f.pendingProps,b),f.child;case 8:return lo(h,f,f.pendingProps.children,b),f.child;case 12:return lo(h,f,f.pendingProps.children,b),f.child;case 10:return E=f.pendingProps,sd(f,f.type,E.value),lo(h,f,E.children,b),f.child;case 9:return C=f.type._context,E=f.pendingProps.children,rb(f),C=Oo(C),E=E(C),f.flags|=1,lo(h,f,E,b),f.child;case 14:return _ne(h,f,f.type,f.pendingProps,b);case 15:return xne(h,f,f.type,f.pendingProps,b);case 19:return Ane(h,f,b);case 31:return E=f.pendingProps,b=f.mode,E={mode:E.mode,children:E.children},h===null?(b=iL(E,b),b.ref=f.ref,f.child=b,b.return=f,f=b):(b=Lc(h.child,E),b.ref=f.ref,f.child=b,b.return=f,f=b),f;case 22:return Sne(h,f,b);case 24:return rb(f),E=Oo(_s),h===null?(C=c6(),C===null&&(C=Er,P=a6(),C.pooledCache=P,P.refCount++,P!==null&&(C.pooledCacheLanes|=b),C=P),f.memoizedState={parent:E,cache:C},h6(f),sd(f,_s,C)):((h.lanes&b)!==0&&(d6(h,f),U$(f,null,null,b),j$()),C=h.memoizedState,P=f.memoizedState,C.parent!==E?(C={parent:E,cache:E},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),sd(f,_s,E)):(E=P.cache,sd(f,_s,E),E!==C.cache&&G1(f,[_s],b,!0))),lo(h,f,f.pendingProps.children,b),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function xf(h){h.flags|=4}function kne(h,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!jse(f)){if(f=Nc.current,f!==null&&((ki&4194048)===ki?od!==null:(ki&62914560)!==ki&&(ki&536870912)===0||f!==od))throw F$=u6,mre;h.flags|=8192}}function rL(h,f){f!==null&&(h.flags|=4),h.flags&16384&&(f=h.tag!==22?R0():536870912,h.lanes|=f,ix|=f)}function Z$(h,f){if(!Jt)switch(h.tailMode){case"hidden":f=h.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function pn(h){var f=h.alternate!==null&&h.alternate.child===h.child,b=0,E=0;if(f)for(var C=h.child;C!==null;)b|=C.lanes|C.childLanes,E|=C.subtreeFlags&65011712,E|=C.flags&65011712,C.return=h,C=C.sibling;else for(C=h.child;C!==null;)b|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=h,C=C.sibling;return h.subtreeFlags|=E,h.childLanes=b,f}function u5e(h,f,b){var E=f.pendingProps;switch(ct(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(f),null;case 1:return pn(f),null;case 3:return b=f.stateNode,E=null,h!==null&&(E=h.memoizedState.cache),f.memoizedState.cache!==E&&(f.flags|=2048),Fu(_s),it(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(eb(f)?xf(f):h===null||h.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,RO())),pn(f),null;case 26:return b=f.memoizedState,h===null?(xf(f),b!==null?(pn(f),kne(f,b)):(pn(f),f.flags&=-16777217)):b?b!==h.memoizedState?(xf(f),pn(f),kne(f,b)):(pn(f),f.flags&=-16777217):(h.memoizedProps!==E&&xf(f),pn(f),f.flags&=-16777217),null;case 27:Pt(f),b=Xe.current;var C=f.type;if(h!==null&&f.stateNode!=null)h.memoizedProps!==E&&xf(f);else{if(!E){if(f.stateNode===null)throw Error(r(166));return pn(f),null}h=Ke.current,eb(f)?OO(f):(h=kse(C,E,b),f.stateNode=h,xf(f))}return pn(f),null;case 5:if(Pt(f),b=f.type,h!==null&&f.stateNode!=null)h.memoizedProps!==E&&xf(f);else{if(!E){if(f.stateNode===null)throw Error(r(166));return pn(f),null}if(h=Ke.current,eb(f))OO(f);else{switch(C=yL(Xe.current),h){case 1:h=C.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=C.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=C.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof E.is=="string"?C.createElement("select",{is:E.is}):C.createElement("select"),E.multiple?h.multiple=!0:E.size&&(h.size=E.size);break;default:h=typeof E.is=="string"?C.createElement(b,{is:E.is}):C.createElement(b)}}h[Yi]=f,h[Hn]=E;e:for(C=f.child;C!==null;){if(C.tag===5||C.tag===6)h.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===f)break e;for(;C.sibling===null;){if(C.return===null||C.return===f)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}f.stateNode=h;e:switch(uo(h,b,E),b){case"button":case"input":case"select":case"textarea":h=!!E.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&xf(f)}}return pn(f),f.flags&=-16777217,null;case 6:if(h&&f.stateNode!=null)h.memoizedProps!==E&&xf(f);else{if(typeof E!="string"&&f.stateNode===null)throw Error(r(166));if(h=Xe.current,eb(f)){if(h=f.stateNode,b=f.memoizedProps,E=null,C=xt,C!==null)switch(C.tag){case 27:case 5:E=C.memoizedProps}h[Yi]=f,h=!!(h.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||Tse(h.nodeValue,b)),h||Fa(f)}else h=yL(h).createTextNode(E),h[Yi]=f,f.stateNode=h}return pn(f),null;case 13:if(E=f.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(C=eb(f),E!==null&&E.dehydrated!==null){if(h===null){if(!C)throw Error(r(318));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Yi]=f}else Jy(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;pn(f),C=!1}else C=RO(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(wf(f),f):(wf(f),null)}if(wf(f),(f.flags&128)!==0)return f.lanes=b,f;if(b=E!==null,h=h!==null&&h.memoizedState!==null,b){E=f.child,C=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(C=E.alternate.memoizedState.cachePool.pool);var P=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(P=E.memoizedState.cachePool.pool),P!==C&&(E.flags|=2048)}return b!==h&&b&&(f.child.flags|=8192),rL(f,f.updateQueue),pn(f),null;case 4:return it(),h===null&&fB(f.stateNode.containerInfo),pn(f),null;case 10:return Fu(f.type),pn(f),null;case 19:if(ke(xs),C=f.memoizedState,C===null)return pn(f),null;if(E=(f.flags&128)!==0,P=C.rendering,P===null)if(E)Z$(C,!1);else{if(Mn!==0||h!==null&&(h.flags&128)!==0)for(h=f.child;h!==null;){if(P=XO(h),P!==null){for(f.flags|=128,Z$(C,!1),h=P.updateQueue,f.updateQueue=h,rL(f,h),f.subtreeFlags=0,h=b,b=f.child;b!==null;)O$(b,h),b=b.sibling;return qe(xs,xs.current&1|2),f.child}h=h.sibling}C.tail!==null&&_r()>oL&&(f.flags|=128,E=!0,Z$(C,!1),f.lanes=4194304)}else{if(!E)if(h=XO(P),h!==null){if(f.flags|=128,E=!0,h=h.updateQueue,f.updateQueue=h,rL(f,h),Z$(C,!0),C.tail===null&&C.tailMode==="hidden"&&!P.alternate&&!Jt)return pn(f),null}else 2*_r()-C.renderingStartTime>oL&&b!==536870912&&(f.flags|=128,E=!0,Z$(C,!1),f.lanes=4194304);C.isBackwards?(P.sibling=f.child,f.child=P):(h=C.last,h!==null?h.sibling=P:f.child=P,C.last=P)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=_r(),f.sibling=null,h=xs.current,qe(xs,E?h&1|2:h&1),f):(pn(f),null);case 22:case 23:return wf(f),y6(),E=f.memoizedState!==null,h!==null?h.memoizedState!==null!==E&&(f.flags|=8192):E&&(f.flags|=8192),E?(b&536870912)!==0&&(f.flags&128)===0&&(pn(f),f.subtreeFlags&6&&(f.flags|=8192)):pn(f),b=f.updateQueue,b!==null&&rL(f,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),E=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==b&&(f.flags|=2048),h!==null&&ke(nb),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),Fu(_s),pn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function h5e(h,f){switch(ct(f),f.tag){case 1:return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return Fu(_s),it(),h=f.flags,(h&65536)!==0&&(h&128)===0?(f.flags=h&-65537|128,f):null;case 26:case 27:case 5:return Pt(f),null;case 13:if(wf(f),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Jy()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return ke(xs),null;case 4:return it(),null;case 10:return Fu(f.type),null;case 22:case 23:return wf(f),y6(),h!==null&&ke(nb),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 24:return Fu(_s),null;case 25:return null;default:return null}}function One(h,f){switch(ct(f),f.tag){case 3:Fu(_s),it();break;case 26:case 27:case 5:Pt(f);break;case 4:it();break;case 13:wf(f);break;case 19:ke(xs);break;case 10:Fu(f.type);break;case 22:case 23:wf(f),y6(),h!==null&&ke(nb);break;case 24:Fu(_s)}}function Y$(h,f){try{var b=f.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var C=E.next;b=C;do{if((b.tag&h)===h){E=void 0;var P=b.create,V=b.inst;E=P(),V.destroy=E}b=b.next}while(b!==C)}}catch(K){vr(f,f.return,K)}}function sg(h,f,b){try{var E=f.updateQueue,C=E!==null?E.lastEffect:null;if(C!==null){var P=C.next;E=P;do{if((E.tag&h)===h){var V=E.inst,K=V.destroy;if(K!==void 0){V.destroy=void 0,C=f;var oe=b,Ee=K;try{Ee()}catch(Fe){vr(C,oe,Fe)}}}E=E.next}while(E!==P)}}catch(Fe){vr(f,f.return,Fe)}}function Lne(h){var f=h.updateQueue;if(f!==null){var b=h.stateNode;try{_re(f,b)}catch(E){vr(h,h.return,E)}}}function Rne(h,f,b){b.props=ob(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(E){vr(h,f,E)}}function K$(h,f){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var E=h.stateNode;break;case 30:E=h.stateNode;break;default:E=h.stateNode}typeof b=="function"?h.refCleanup=b(E):b.current=E}}catch(C){vr(h,f,C)}}function ad(h,f){var b=h.ref,E=h.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(C){vr(h,f,C)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(C){vr(h,f,C)}else b.current=null}function Nne(h){var f=h.type,b=h.memoizedProps,E=h.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(C){vr(h,h.return,C)}}function G6(h,f,b){try{var E=h.stateNode;k5e(E,h.type,b,f),E[Hn]=f}catch(C){vr(h,h.return,C)}}function Dne(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&pg(h.type)||h.tag===4}function q6(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Dne(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&pg(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function H6(h,f,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,f):(f=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,f.appendChild(h),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=mL));else if(E!==4&&(E===27&&pg(h.type)&&(b=h.stateNode,f=null),h=h.child,h!==null))for(H6(h,f,b),h=h.sibling;h!==null;)H6(h,f,b),h=h.sibling}function nL(h,f,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?b.insertBefore(h,f):b.appendChild(h);else if(E!==4&&(E===27&&pg(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(nL(h,f,b),h=h.sibling;h!==null;)nL(h,f,b),h=h.sibling}function Fne(h){var f=h.stateNode,b=h.memoizedProps;try{for(var E=h.type,C=f.attributes;C.length;)f.removeAttributeNode(C[0]);uo(f,E,b),f[Yi]=h,f[Hn]=b}catch(P){vr(h,h.return,P)}}var Sf=!1,Zn=!1,W6=!1,zne=typeof WeakSet=="function"?WeakSet:Set,js=null;function d5e(h,f){if(h=h.containerInfo,gB=xL,h=W0(h),Z0(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var C=E.anchorOffset,P=E.focusNode;E=E.focusOffset;try{b.nodeType,P.nodeType}catch{b=null;break e}var V=0,K=-1,oe=-1,Ee=0,Fe=0,Be=h,$e=null;t:for(;;){for(var Ie;Be!==b||C!==0&&Be.nodeType!==3||(K=V+C),Be!==P||E!==0&&Be.nodeType!==3||(oe=V+E),Be.nodeType===3&&(V+=Be.nodeValue.length),(Ie=Be.firstChild)!==null;)$e=Be,Be=Ie;for(;;){if(Be===h)break t;if($e===b&&++Ee===C&&(K=V),$e===P&&++Fe===E&&(oe=V),(Ie=Be.nextSibling)!==null)break;Be=$e,$e=Be.parentNode}Be=Ie}b=K===-1||oe===-1?null:{start:K,end:oe}}else b=null}b=b||{start:0,end:0}}else b=null;for(vB={focusedElem:h,selectionRange:b},xL=!1,js=f;js!==null;)if(f=js,h=f.child,(f.subtreeFlags&1024)!==0&&h!==null)h.return=f,js=h;else for(;js!==null;){switch(f=js,P=f.alternate,h=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&P!==null){h=void 0,b=f,C=P.memoizedProps,P=P.memoizedState,E=b.stateNode;try{var Zt=ob(b.type,C,b.elementType===b.type);h=E.getSnapshotBeforeUpdate(Zt,P),E.__reactInternalSnapshotBeforeUpdate=h}catch(jt){vr(b,b.return,jt)}}break;case 3:if((h&1024)!==0){if(h=f.stateNode.containerInfo,b=h.nodeType,b===9)_B(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":_B(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=f.sibling,h!==null){h.return=f.return,js=h;break}js=f.return}}function jne(h,f,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:og(h,b),E&4&&Y$(5,b);break;case 1:if(og(h,b),E&4)if(h=b.stateNode,f===null)try{h.componentDidMount()}catch(V){vr(b,b.return,V)}else{var C=ob(b.type,f.memoizedProps);f=f.memoizedState;try{h.componentDidUpdate(C,f,h.__reactInternalSnapshotBeforeUpdate)}catch(V){vr(b,b.return,V)}}E&64&&Lne(b),E&512&&K$(b,b.return);break;case 3:if(og(h,b),E&64&&(h=b.updateQueue,h!==null)){if(f=null,b.child!==null)switch(b.child.tag){case 27:case 5:f=b.child.stateNode;break;case 1:f=b.child.stateNode}try{_re(h,f)}catch(V){vr(b,b.return,V)}}break;case 27:f===null&&E&4&&Fne(b);case 26:case 5:og(h,b),f===null&&E&4&&Nne(b),E&512&&K$(b,b.return);break;case 12:og(h,b);break;case 13:og(h,b),E&4&&Vne(h,b),E&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=_5e.bind(null,b),z5e(h,b))));break;case 22:if(E=b.memoizedState!==null||Sf,!E){f=f!==null&&f.memoizedState!==null||Zn,C=Sf;var P=Zn;Sf=E,(Zn=f)&&!P?ag(h,b,(b.subtreeFlags&8772)!==0):og(h,b),Sf=C,Zn=P}break;case 30:break;default:og(h,b)}}function Une(h){var f=h.alternate;f!==null&&(h.alternate=null,Une(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&aa(f)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Kr=null,ja=!1;function Ef(h,f,b){for(b=b.child;b!==null;)Bne(h,f,b),b=b.sibling}function Bne(h,f,b){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(Iu,b)}catch{}switch(b.tag){case 26:Zn||ad(b,f),Ef(h,f,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Zn||ad(b,f);var E=Kr,C=ja;pg(b.type)&&(Kr=b.stateNode,ja=!1),Ef(h,f,b),sM(b.stateNode),Kr=E,ja=C;break;case 5:Zn||ad(b,f);case 6:if(E=Kr,C=ja,Kr=null,Ef(h,f,b),Kr=E,ja=C,Kr!==null)if(ja)try{(Kr.nodeType===9?Kr.body:Kr.nodeName==="HTML"?Kr.ownerDocument.body:Kr).removeChild(b.stateNode)}catch(P){vr(b,f,P)}else try{Kr.removeChild(b.stateNode)}catch(P){vr(b,f,P)}break;case 18:Kr!==null&&(ja?(h=Kr,Ase(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),pM(h)):Ase(Kr,b.stateNode));break;case 4:E=Kr,C=ja,Kr=b.stateNode.containerInfo,ja=!0,Ef(h,f,b),Kr=E,ja=C;break;case 0:case 11:case 14:case 15:Zn||sg(2,b,f),Zn||sg(4,b,f),Ef(h,f,b);break;case 1:Zn||(ad(b,f),E=b.stateNode,typeof E.componentWillUnmount=="function"&&Rne(b,f,E)),Ef(h,f,b);break;case 21:Ef(h,f,b);break;case 22:Zn=(E=Zn)||b.memoizedState!==null,Ef(h,f,b),Zn=E;break;default:Ef(h,f,b)}}function Vne(h,f){if(f.memoizedState===null&&(h=f.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{pM(h)}catch(b){vr(f,f.return,b)}}function p5e(h){switch(h.tag){case 13:case 19:var f=h.stateNode;return f===null&&(f=h.stateNode=new zne),f;case 22:return h=h.stateNode,f=h._retryCache,f===null&&(f=h._retryCache=new zne),f;default:throw Error(r(435,h.tag))}}function Z6(h,f){var b=p5e(h);f.forEach(function(E){var C=x5e.bind(null,h,E);b.has(E)||(b.add(E),E.then(C,C))})}function kl(h,f){var b=f.deletions;if(b!==null)for(var E=0;E<b.length;E++){var C=b[E],P=h,V=f,K=V;e:for(;K!==null;){switch(K.tag){case 27:if(pg(K.type)){Kr=K.stateNode,ja=!1;break e}break;case 5:Kr=K.stateNode,ja=!1;break e;case 3:case 4:Kr=K.stateNode.containerInfo,ja=!0;break e}K=K.return}if(Kr===null)throw Error(r(160));Bne(P,V,C),Kr=null,ja=!1,P=C.alternate,P!==null&&(P.return=null),C.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Gne(f,h),f=f.sibling}var zu=null;function Gne(h,f){var b=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:kl(f,h),Ol(h),E&4&&(sg(3,h,h.return),Y$(3,h),sg(5,h,h.return));break;case 1:kl(f,h),Ol(h),E&512&&(Zn||b===null||ad(b,b.return)),E&64&&Sf&&(h=h.updateQueue,h!==null&&(E=h.callbacks,E!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var C=zu;if(kl(f,h),Ol(h),E&512&&(Zn||b===null||ad(b,b.return)),E&4){var P=b!==null?b.memoizedState:null;if(E=h.memoizedState,b===null)if(E===null)if(h.stateNode===null){e:{E=h.type,b=h.memoizedProps,C=C.ownerDocument||C;t:switch(E){case"title":P=C.getElementsByTagName("title")[0],(!P||P[Jh]||P[Yi]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=C.createElement(E),C.head.insertBefore(P,C.querySelector("head > title"))),uo(P,E,b),P[Yi]=h,un(P),E=P;break e;case"link":var V=Fse("link","href",C).get(E+(b.href||""));if(V){for(var K=0;K<V.length;K++)if(P=V[K],P.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&P.getAttribute("rel")===(b.rel==null?null:b.rel)&&P.getAttribute("title")===(b.title==null?null:b.title)&&P.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){V.splice(K,1);break t}}P=C.createElement(E),uo(P,E,b),C.head.appendChild(P);break;case"meta":if(V=Fse("meta","content",C).get(E+(b.content||""))){for(K=0;K<V.length;K++)if(P=V[K],P.getAttribute("content")===(b.content==null?null:""+b.content)&&P.getAttribute("name")===(b.name==null?null:b.name)&&P.getAttribute("property")===(b.property==null?null:b.property)&&P.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&P.getAttribute("charset")===(b.charSet==null?null:b.charSet)){V.splice(K,1);break t}}P=C.createElement(E),uo(P,E,b),C.head.appendChild(P);break;default:throw Error(r(468,E))}P[Yi]=h,un(P),E=P}h.stateNode=E}else zse(C,h.type,h.stateNode);else h.stateNode=Dse(C,E,h.memoizedProps);else P!==E?(P===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):P.count--,E===null?zse(C,h.type,h.stateNode):Dse(C,E,h.memoizedProps)):E===null&&h.stateNode!==null&&G6(h,h.memoizedProps,b.memoizedProps)}break;case 27:kl(f,h),Ol(h),E&512&&(Zn||b===null||ad(b,b.return)),b!==null&&E&4&&G6(h,h.memoizedProps,b.memoizedProps);break;case 5:if(kl(f,h),Ol(h),E&512&&(Zn||b===null||ad(b,b.return)),h.flags&32){C=h.stateNode;try{Ic(C,"")}catch(Ie){vr(h,h.return,Ie)}}E&4&&h.stateNode!=null&&(C=h.memoizedProps,G6(h,C,b!==null?b.memoizedProps:C)),E&1024&&(W6=!0);break;case 6:if(kl(f,h),Ol(h),E&4){if(h.stateNode===null)throw Error(r(162));E=h.memoizedProps,b=h.stateNode;try{b.nodeValue=E}catch(Ie){vr(h,h.return,Ie)}}break;case 3:if(bL=null,C=zu,zu=gL(f.containerInfo),kl(f,h),zu=C,Ol(h),E&4&&b!==null&&b.memoizedState.isDehydrated)try{pM(f.containerInfo)}catch(Ie){vr(h,h.return,Ie)}W6&&(W6=!1,qne(h));break;case 4:E=zu,zu=gL(h.stateNode.containerInfo),kl(f,h),Ol(h),zu=E;break;case 12:kl(f,h),Ol(h);break;case 13:kl(f,h),Ol(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(eB=_r()),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,Z6(h,E)));break;case 22:C=h.memoizedState!==null;var oe=b!==null&&b.memoizedState!==null,Ee=Sf,Fe=Zn;if(Sf=Ee||C,Zn=Fe||oe,kl(f,h),Zn=Fe,Sf=Ee,Ol(h),E&8192)e:for(f=h.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(b===null||oe||Sf||Zn||ab(h)),b=null,f=h;;){if(f.tag===5||f.tag===26){if(b===null){oe=b=f;try{if(P=oe.stateNode,C)V=P.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{K=oe.stateNode;var Be=oe.memoizedProps.style,$e=Be!=null&&Be.hasOwnProperty("display")?Be.display:null;K.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(Ie){vr(oe,oe.return,Ie)}}}else if(f.tag===6){if(b===null){oe=f;try{oe.stateNode.nodeValue=C?"":oe.memoizedProps}catch(Ie){vr(oe,oe.return,Ie)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===h)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;b===f&&(b=null),f=f.return}b===f&&(b=null),f.sibling.return=f.return,f=f.sibling}E&4&&(E=h.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,Z6(h,b))));break;case 19:kl(f,h),Ol(h),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,Z6(h,E)));break;case 30:break;case 21:break;default:kl(f,h),Ol(h)}}function Ol(h){var f=h.flags;if(f&2){try{for(var b,E=h.return;E!==null;){if(Dne(E)){b=E;break}E=E.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var C=b.stateNode,P=q6(h);nL(h,P,C);break;case 5:var V=b.stateNode;b.flags&32&&(Ic(V,""),b.flags&=-33);var K=q6(h);nL(h,K,V);break;case 3:case 4:var oe=b.stateNode.containerInfo,Ee=q6(h);H6(h,Ee,oe);break;default:throw Error(r(161))}}catch(Fe){vr(h,h.return,Fe)}h.flags&=-3}f&4096&&(h.flags&=-4097)}function qne(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var f=h;qne(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),h=h.sibling}}function og(h,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)jne(h,f.alternate,f),f=f.sibling}function ab(h){for(h=h.child;h!==null;){var f=h;switch(f.tag){case 0:case 11:case 14:case 15:sg(4,f,f.return),ab(f);break;case 1:ad(f,f.return);var b=f.stateNode;typeof b.componentWillUnmount=="function"&&Rne(f,f.return,b),ab(f);break;case 27:sM(f.stateNode);case 26:case 5:ad(f,f.return),ab(f);break;case 22:f.memoizedState===null&&ab(f);break;case 30:ab(f);break;default:ab(f)}h=h.sibling}}function ag(h,f,b){for(b=b&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var E=f.alternate,C=h,P=f,V=P.flags;switch(P.tag){case 0:case 11:case 15:ag(C,P,b),Y$(4,P);break;case 1:if(ag(C,P,b),E=P,C=E.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ee){vr(E,E.return,Ee)}if(E=P,C=E.updateQueue,C!==null){var K=E.stateNode;try{var oe=C.shared.hiddenCallbacks;if(oe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<oe.length;C++)wre(oe[C],K)}catch(Ee){vr(E,E.return,Ee)}}b&&V&64&&Lne(P),K$(P,P.return);break;case 27:Fne(P);case 26:case 5:ag(C,P,b),b&&E===null&&V&4&&Nne(P),K$(P,P.return);break;case 12:ag(C,P,b);break;case 13:ag(C,P,b),b&&V&4&&Vne(C,P);break;case 22:P.memoizedState===null&&ag(C,P,b),K$(P,P.return);break;case 30:break;default:ag(C,P,b)}f=f.sibling}}function Y6(h,f){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(h=f.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&R$(b))}function K6(h,f){h=null,f.alternate!==null&&(h=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==h&&(f.refCount++,h!=null&&R$(h))}function ld(h,f,b,E){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Hne(h,f,b,E),f=f.sibling}function Hne(h,f,b,E){var C=f.flags;switch(f.tag){case 0:case 11:case 15:ld(h,f,b,E),C&2048&&Y$(9,f);break;case 1:ld(h,f,b,E);break;case 3:ld(h,f,b,E),C&2048&&(h=null,f.alternate!==null&&(h=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==h&&(f.refCount++,h!=null&&R$(h)));break;case 12:if(C&2048){ld(h,f,b,E),h=f.stateNode;try{var P=f.memoizedProps,V=P.id,K=P.onPostCommit;typeof K=="function"&&K(V,f.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(oe){vr(f,f.return,oe)}}else ld(h,f,b,E);break;case 13:ld(h,f,b,E);break;case 23:break;case 22:P=f.stateNode,V=f.alternate,f.memoizedState!==null?P._visibility&2?ld(h,f,b,E):J$(h,f):P._visibility&2?ld(h,f,b,E):(P._visibility|=2,Q1(h,f,b,E,(f.subtreeFlags&10256)!==0)),C&2048&&Y6(V,f);break;case 24:ld(h,f,b,E),C&2048&&K6(f.alternate,f);break;default:ld(h,f,b,E)}}function Q1(h,f,b,E,C){for(C=C&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var P=h,V=f,K=b,oe=E,Ee=V.flags;switch(V.tag){case 0:case 11:case 15:Q1(P,V,K,oe,C),Y$(8,V);break;case 23:break;case 22:var Fe=V.stateNode;V.memoizedState!==null?Fe._visibility&2?Q1(P,V,K,oe,C):J$(P,V):(Fe._visibility|=2,Q1(P,V,K,oe,C)),C&&Ee&2048&&Y6(V.alternate,V);break;case 24:Q1(P,V,K,oe,C),C&&Ee&2048&&K6(V.alternate,V);break;default:Q1(P,V,K,oe,C)}f=f.sibling}}function J$(h,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var b=h,E=f,C=E.flags;switch(E.tag){case 22:J$(b,E),C&2048&&Y6(E.alternate,E);break;case 24:J$(b,E),C&2048&&K6(E.alternate,E);break;default:J$(b,E)}f=f.sibling}}var X$=8192;function ex(h){if(h.subtreeFlags&X$)for(h=h.child;h!==null;)Wne(h),h=h.sibling}function Wne(h){switch(h.tag){case 26:ex(h),h.flags&X$&&h.memoizedState!==null&&X5e(zu,h.memoizedState,h.memoizedProps);break;case 5:ex(h);break;case 3:case 4:var f=zu;zu=gL(h.stateNode.containerInfo),ex(h),zu=f;break;case 22:h.memoizedState===null&&(f=h.alternate,f!==null&&f.memoizedState!==null?(f=X$,X$=16777216,ex(h),X$=f):ex(h));break;default:ex(h)}}function Zne(h){var f=h.alternate;if(f!==null&&(h=f.child,h!==null)){f.child=null;do f=h.sibling,h.sibling=null,h=f;while(h!==null)}}function Q$(h){var f=h.deletions;if((h.flags&16)!==0){if(f!==null)for(var b=0;b<f.length;b++){var E=f[b];js=E,Kne(E,h)}Zne(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Yne(h),h=h.sibling}function Yne(h){switch(h.tag){case 0:case 11:case 15:Q$(h),h.flags&2048&&sg(9,h,h.return);break;case 3:Q$(h);break;case 12:Q$(h);break;case 22:var f=h.stateNode;h.memoizedState!==null&&f._visibility&2&&(h.return===null||h.return.tag!==13)?(f._visibility&=-3,sL(h)):Q$(h);break;default:Q$(h)}}function sL(h){var f=h.deletions;if((h.flags&16)!==0){if(f!==null)for(var b=0;b<f.length;b++){var E=f[b];js=E,Kne(E,h)}Zne(h)}for(h=h.child;h!==null;){switch(f=h,f.tag){case 0:case 11:case 15:sg(8,f,f.return),sL(f);break;case 22:b=f.stateNode,b._visibility&2&&(b._visibility&=-3,sL(f));break;default:sL(f)}h=h.sibling}}function Kne(h,f){for(;js!==null;){var b=js;switch(b.tag){case 0:case 11:case 15:sg(8,b,f);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:R$(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,js=E;else e:for(b=h;js!==null;){E=js;var C=E.sibling,P=E.return;if(Une(E),E===b){js=null;break e}if(C!==null){C.return=P,js=C;break e}js=P}}}var f5e={getCacheForType:function(h){var f=Oo(_s),b=f.data.get(h);return b===void 0&&(b=h(),f.data.set(h,b)),b}},m5e=typeof WeakMap=="function"?WeakMap:Map,tr=0,Er=null,_i=null,ki=0,ir=0,Ll=null,lg=!1,tx=!1,J6=!1,Tf=0,Mn=0,cg=0,lb=0,X6=0,Dc=0,ix=0,eM=null,Ua=null,Q6=!1,eB=0,oL=1/0,aL=null,ug=null,co=0,hg=null,rx=null,nx=0,tB=0,iB=null,Jne=null,tM=0,rB=null;function Rl(){if((tr&2)!==0&&ki!==0)return ki&-ki;if(ne.T!==null){var h=q1;return h!==0?h:uB()}return Qi()}function Xne(){Dc===0&&(Dc=(ki&536870912)===0||Jt?x1():536870912);var h=Nc.current;return h!==null&&(h.flags|=32),Dc}function Nl(h,f,b){(h===Er&&(ir===2||ir===9)||h.cancelPendingCommit!==null)&&(sx(h,0),dg(h,ki,Dc,!1)),Kh(h,b),((tr&2)===0||h!==Er)&&(h===Er&&((tr&2)===0&&(lb|=b),Mn===4&&dg(h,ki,Dc,!1)),cd(h))}function Qne(h,f,b){if((tr&6)!==0)throw Error(r(327));var E=!b&&(f&124)===0&&(f&h.expiredLanes)===0||_l(h,f),C=E?v5e(h,f):oB(h,f,!0),P=E;do{if(C===0){tx&&!E&&dg(h,f,0,!1);break}else{if(b=h.current.alternate,P&&!y5e(b)){C=oB(h,f,!1),P=!1;continue}if(C===2){if(P=f,h.errorRecoveryDisabledLanes&P)var V=0;else V=h.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){f=V;e:{var K=h;C=eM;var oe=K.current.memoizedState.isDehydrated;if(oe&&(sx(K,V).flags|=256),V=oB(K,V,!1),V!==2){if(J6&&!oe){K.errorRecoveryDisabledLanes|=P,lb|=P,C=4;break e}P=Ua,Ua=C,P!==null&&(Ua===null?Ua=P:Ua.push.apply(Ua,P))}C=V}if(P=!1,C!==2)continue}}if(C===1){sx(h,0),dg(h,f,0,!0);break}e:{switch(E=h,P=C,P){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:dg(E,f,Dc,!lg);break e;case 2:Ua=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(C=eB+300-_r(),10<C)){if(dg(E,f,Dc,!lg),Iy(E,0,!0)!==0)break e;E.timeoutHandle=Cse(ese.bind(null,E,b,Ua,aL,Q6,f,Dc,lb,ix,lg,P,2,-0,0),C);break e}ese(E,b,Ua,aL,Q6,f,Dc,lb,ix,lg,P,0,-0,0)}}break}while(!0);cd(h)}function ese(h,f,b,E,C,P,V,K,oe,Ee,Fe,Be,$e,Ie){if(h.timeoutHandle=-1,Be=f.subtreeFlags,(Be&8192||(Be&16785408)===16785408)&&(lM={stylesheets:null,count:0,unsuspend:J5e},Wne(f),Be=Q5e(),Be!==null)){h.cancelPendingCommit=Be(ase.bind(null,h,f,P,b,E,C,V,K,oe,Fe,1,$e,Ie)),dg(h,P,V,!Ee);return}ase(h,f,P,b,E,C,V,K,oe)}function y5e(h){for(var f=h;;){var b=f.tag;if((b===0||b===11||b===15)&&f.flags&16384&&(b=f.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var C=b[E],P=C.getSnapshot;C=C.value;try{if(!ca(P(),C))return!1}catch{return!1}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function dg(h,f,b,E){f&=~X6,f&=~lb,h.suspendedLanes|=f,h.pingedLanes&=~f,E&&(h.warmLanes|=f),E=h.expirationTimes;for(var C=f;0<C;){var P=31-Io(C),V=1<<P;E[P]=-1,C&=~V}b!==0&&S1(h,b,f)}function lL(){return(tr&6)===0?(iM(0),!1):!0}function nB(){if(_i!==null){if(ir===0)var h=_i.return;else h=_i,Du=Rc=null,_6(h),J1=null,H$=0,h=_i;for(;h!==null;)One(h.alternate,h),h=h.return;_i=null}}function sx(h,f){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,L5e(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),nB(),Er=h,_i=b=Lc(h.current,null),ki=f,ir=0,Ll=null,lg=!1,tx=_l(h,f),J6=!1,ix=Dc=X6=lb=cg=Mn=0,Ua=eM=null,Q6=!1,(f&8)!==0&&(f|=f&32);var E=h.entangledLanes;if(E!==0)for(h=h.entanglements,E&=f;0<E;){var C=31-Io(E),P=1<<C;f|=h[C],E&=~P}return Tf=f,K0(),b}function tse(h,f){pi=null,ne.H=YO,f===D$||f===zO?(f=vre(),ir=3):f===mre?(f=vre(),ir=4):ir=f===bne?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ll=f,_i===null&&(Mn=1,eL(h,ha(f,h.current)))}function ise(){var h=ne.H;return ne.H=YO,h===null?YO:h}function rse(){var h=ne.A;return ne.A=f5e,h}function sB(){Mn=4,lg||(ki&4194048)!==ki&&Nc.current!==null||(tx=!0),(cg&134217727)===0&&(lb&134217727)===0||Er===null||dg(Er,ki,Dc,!1)}function oB(h,f,b){var E=tr;tr|=2;var C=ise(),P=rse();(Er!==h||ki!==f)&&(aL=null,sx(h,f)),f=!1;var V=Mn;e:do try{if(ir!==0&&_i!==null){var K=_i,oe=Ll;switch(ir){case 8:nB(),V=6;break e;case 3:case 2:case 9:case 6:Nc.current===null&&(f=!0);var Ee=ir;if(ir=0,Ll=null,ox(h,K,oe,Ee),b&&tx){V=0;break e}break;default:Ee=ir,ir=0,Ll=null,ox(h,K,oe,Ee)}}g5e(),V=Mn;break}catch(Fe){tse(h,Fe)}while(!0);return f&&h.shellSuspendCounter++,Du=Rc=null,tr=E,ne.H=C,ne.A=P,_i===null&&(Er=null,ki=0,K0()),V}function g5e(){for(;_i!==null;)nse(_i)}function v5e(h,f){var b=tr;tr|=2;var E=ise(),C=rse();Er!==h||ki!==f?(aL=null,oL=_r()+500,sx(h,f)):tx=_l(h,f);e:do try{if(ir!==0&&_i!==null){f=_i;var P=Ll;t:switch(ir){case 1:ir=0,Ll=null,ox(h,f,P,1);break;case 2:case 9:if(yre(P)){ir=0,Ll=null,sse(f);break}f=function(){ir!==2&&ir!==9||Er!==h||(ir=7),cd(h)},P.then(f,f);break e;case 3:ir=7;break e;case 4:ir=5;break e;case 7:yre(P)?(ir=0,Ll=null,sse(f)):(ir=0,Ll=null,ox(h,f,P,7));break;case 5:var V=null;switch(_i.tag){case 26:V=_i.memoizedState;case 5:case 27:var K=_i;if(!V||jse(V)){ir=0,Ll=null;var oe=K.sibling;if(oe!==null)_i=oe;else{var Ee=K.return;Ee!==null?(_i=Ee,cL(Ee)):_i=null}break t}}ir=0,Ll=null,ox(h,f,P,5);break;case 6:ir=0,Ll=null,ox(h,f,P,6);break;case 8:nB(),Mn=6;break e;default:throw Error(r(462))}}b5e();break}catch(Fe){tse(h,Fe)}while(!0);return Du=Rc=null,ne.H=E,ne.A=C,tr=b,_i!==null?0:(Er=null,ki=0,K0(),Mn)}function b5e(){for(;_i!==null&&!Sn();)nse(_i)}function nse(h){var f=Pne(h.alternate,h,Tf);h.memoizedProps=h.pendingProps,f===null?cL(h):_i=f}function sse(h){var f=h,b=f.alternate;switch(f.tag){case 15:case 0:f=Tne(b,f,f.pendingProps,f.type,void 0,ki);break;case 11:f=Tne(b,f,f.pendingProps,f.type.render,f.ref,ki);break;case 5:_6(f);default:One(b,f),f=_i=O$(f,Tf),f=Pne(b,f,Tf)}h.memoizedProps=h.pendingProps,f===null?cL(h):_i=f}function ox(h,f,b,E){Du=Rc=null,_6(f),J1=null,H$=0;var C=f.return;try{if(l5e(h,C,f,b,ki)){Mn=1,eL(h,ha(b,h.current)),_i=null;return}}catch(P){if(C!==null)throw _i=C,P;Mn=1,eL(h,ha(b,h.current)),_i=null;return}f.flags&32768?(Jt||E===1?h=!0:tx||(ki&536870912)!==0?h=!1:(lg=h=!0,(E===2||E===9||E===3||E===6)&&(E=Nc.current,E!==null&&E.tag===13&&(E.flags|=16384))),ose(f,h)):cL(f)}function cL(h){var f=h;do{if((f.flags&32768)!==0){ose(f,lg);return}h=f.return;var b=u5e(f.alternate,f,Tf);if(b!==null){_i=b;return}if(f=f.sibling,f!==null){_i=f;return}_i=f=h}while(f!==null);Mn===0&&(Mn=5)}function ose(h,f){do{var b=h5e(h.alternate,h);if(b!==null){b.flags&=32767,_i=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!f&&(h=h.sibling,h!==null)){_i=h;return}_i=h=b}while(h!==null);Mn=6,_i=null}function ase(h,f,b,E,C,P,V,K,oe){h.cancelPendingCommit=null;do uL();while(co!==0);if((tr&6)!==0)throw Error(r(327));if(f!==null){if(f===h.current)throw Error(r(177));if(P=f.lanes|f.childLanes,P|=Pl,v$(h,b,P,V,K,oe),h===Er&&(_i=Er=null,ki=0),rx=f,hg=h,nx=b,tB=P,iB=C,Jne=E,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,S5e(oo,function(){return dse(),null})):(h.callbackNode=null,h.callbackPriority=0),E=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||E){E=ne.T,ne.T=null,C=ue.p,ue.p=2,V=tr,tr|=4;try{d5e(h,f,b)}finally{tr=V,ue.p=C,ne.T=E}}co=1,lse(),cse(),use()}}function lse(){if(co===1){co=0;var h=hg,f=rx,b=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||b){b=ne.T,ne.T=null;var E=ue.p;ue.p=2;var C=tr;tr|=4;try{Gne(f,h);var P=vB,V=W0(h.containerInfo),K=P.focusedElem,oe=P.selectionRange;if(V!==K&&K&&K.ownerDocument&&D1(K.ownerDocument.documentElement,K)){if(oe!==null&&Z0(K)){var Ee=oe.start,Fe=oe.end;if(Fe===void 0&&(Fe=Ee),"selectionStart"in K)K.selectionStart=Ee,K.selectionEnd=Math.min(Fe,K.value.length);else{var Be=K.ownerDocument||document,$e=Be&&Be.defaultView||window;if($e.getSelection){var Ie=$e.getSelection(),Zt=K.textContent.length,jt=Math.min(oe.start,Zt),ur=oe.end===void 0?jt:Math.min(oe.end,Zt);!Ie.extend&&jt>ur&&(V=ur,ur=jt,jt=V);var be=P$(K,jt),fe=P$(K,ur);if(be&&fe&&(Ie.rangeCount!==1||Ie.anchorNode!==be.node||Ie.anchorOffset!==be.offset||Ie.focusNode!==fe.node||Ie.focusOffset!==fe.offset)){var Se=Be.createRange();Se.setStart(be.node,be.offset),Ie.removeAllRanges(),jt>ur?(Ie.addRange(Se),Ie.extend(fe.node,fe.offset)):(Se.setEnd(fe.node,fe.offset),Ie.addRange(Se))}}}}for(Be=[],Ie=K;Ie=Ie.parentNode;)Ie.nodeType===1&&Be.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Be.length;K++){var ze=Be[K];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}xL=!!gB,vB=gB=null}finally{tr=C,ue.p=E,ne.T=b}}h.current=f,co=2}}function cse(){if(co===2){co=0;var h=hg,f=rx,b=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||b){b=ne.T,ne.T=null;var E=ue.p;ue.p=2;var C=tr;tr|=4;try{jne(h,f.alternate,f)}finally{tr=C,ue.p=E,ne.T=b}}co=3}}function use(){if(co===4||co===3){co=0,En();var h=hg,f=rx,b=nx,E=Jne;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?co=5:(co=0,rx=hg=null,hse(h,h.pendingLanes));var C=h.pendingLanes;if(C===0&&(ug=null),Me(b),f=f.stateNode,Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(Iu,f,void 0,(f.current.flags&128)===128)}catch{}if(E!==null){f=ne.T,C=ue.p,ue.p=2,ne.T=null;try{for(var P=h.onRecoverableError,V=0;V<E.length;V++){var K=E[V];P(K.value,{componentStack:K.stack})}}finally{ne.T=f,ue.p=C}}(nx&3)!==0&&uL(),cd(h),C=h.pendingLanes,(b&4194090)!==0&&(C&42)!==0?h===rB?tM++:(tM=0,rB=h):tM=0,iM(0)}}function hse(h,f){(h.pooledCacheLanes&=f)===0&&(f=h.pooledCache,f!=null&&(h.pooledCache=null,R$(f)))}function uL(h){return lse(),cse(),use(),dse()}function dse(){if(co!==5)return!1;var h=hg,f=tB;tB=0;var b=Me(nx),E=ne.T,C=ue.p;try{ue.p=32>b?32:b,ne.T=null,b=iB,iB=null;var P=hg,V=nx;if(co=0,rx=hg=null,nx=0,(tr&6)!==0)throw Error(r(331));var K=tr;if(tr|=4,Yne(P.current),Hne(P,P.current,V,b),tr=K,iM(0,!1),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(Iu,P)}catch{}return!0}finally{ue.p=C,ne.T=E,hse(h,f)}}function pse(h,f,b){f=ha(b,f),f=R6(h.stateNode,f,2),h=tg(h,f,2),h!==null&&(Kh(h,2),cd(h))}function vr(h,f,b){if(h.tag===3)pse(h,h,b);else for(;f!==null;){if(f.tag===3){pse(f,h,b);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(ug===null||!ug.has(E))){h=ha(b,h),b=gne(2),E=tg(f,b,2),E!==null&&(vne(b,E,f,h),Kh(E,2),cd(E));break}}f=f.return}}function aB(h,f,b){var E=h.pingCache;if(E===null){E=h.pingCache=new m5e;var C=new Set;E.set(f,C)}else C=E.get(f),C===void 0&&(C=new Set,E.set(f,C));C.has(b)||(J6=!0,C.add(b),h=w5e.bind(null,h,f,b),f.then(h,h))}function w5e(h,f,b){var E=h.pingCache;E!==null&&E.delete(f),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Er===h&&(ki&b)===b&&(Mn===4||Mn===3&&(ki&62914560)===ki&&300>_r()-eB?(tr&2)===0&&sx(h,0):X6|=b,ix===ki&&(ix=0)),cd(h)}function fse(h,f){f===0&&(f=R0()),h=Yy(h,f),h!==null&&(Kh(h,f),cd(h))}function _5e(h){var f=h.memoizedState,b=0;f!==null&&(b=f.retryLane),fse(h,b)}function x5e(h,f){var b=0;switch(h.tag){case 13:var E=h.stateNode,C=h.memoizedState;C!==null&&(b=C.retryLane);break;case 19:E=h.stateNode;break;case 22:E=h.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(f),fse(h,b)}function S5e(h,f){return Ri(h,f)}var hL=null,ax=null,lB=!1,dL=!1,cB=!1,cb=0;function cd(h){h!==ax&&h.next===null&&(ax===null?hL=ax=h:ax=ax.next=h),dL=!0,lB||(lB=!0,T5e())}function iM(h,f){if(!cB&&dL){cB=!0;do for(var b=!1,E=hL;E!==null;){if(h!==0){var C=E.pendingLanes;if(C===0)var P=0;else{var V=E.suspendedLanes,K=E.pingedLanes;P=(1<<31-Io(42|h)+1)-1,P&=C&~(V&~K),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(b=!0,vse(E,P))}else P=ki,P=Iy(E,E===Er?P:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(P&3)===0||_l(E,P)||(b=!0,vse(E,P));E=E.next}while(b);cB=!1}}function E5e(){mse()}function mse(){dL=lB=!1;var h=0;cb!==0&&(O5e()&&(h=cb),cb=0);for(var f=_r(),b=null,E=hL;E!==null;){var C=E.next,P=yse(E,f);P===0?(E.next=null,b===null?hL=C:b.next=C,C===null&&(ax=b)):(b=E,(h!==0||(P&3)!==0)&&(dL=!0)),E=C}iM(h)}function yse(h,f){for(var b=h.suspendedLanes,E=h.pingedLanes,C=h.expirationTimes,P=h.pendingLanes&-62914561;0<P;){var V=31-Io(P),K=1<<V,oe=C[V];oe===-1?((K&b)===0||(K&E)!==0)&&(C[V]=g$(K,f)):oe<=f&&(h.expiredLanes|=K),P&=~K}if(f=Er,b=ki,b=Iy(h,h===f?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E=h.callbackNode,b===0||h===f&&(ir===2||ir===9)||h.cancelPendingCommit!==null)return E!==null&&E!==null&&ci(E),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||_l(h,b)){if(f=b&-b,f===h.callbackPriority)return f;switch(E!==null&&ci(E),Me(b)){case 2:case 8:b=Cy;break;case 32:b=oo;break;case 268435456:b=L0;break;default:b=oo}return E=gse.bind(null,h),b=Ri(b,E),h.callbackPriority=f,h.callbackNode=b,f}return E!==null&&E!==null&&ci(E),h.callbackPriority=2,h.callbackNode=null,2}function gse(h,f){if(co!==0&&co!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(uL()&&h.callbackNode!==b)return null;var E=ki;return E=Iy(h,h===Er?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E===0?null:(Qne(h,E,f),yse(h,_r()),h.callbackNode!=null&&h.callbackNode===b?gse.bind(null,h):null)}function vse(h,f){if(uL())return null;Qne(h,f,!0)}function T5e(){R5e(function(){(tr&6)!==0?Ri(O0,E5e):mse()})}function uB(){return cb===0&&(cb=x1()),cb}function bse(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Ny(""+h)}function wse(h,f){var b=f.ownerDocument.createElement("input");return b.name=f.name,b.value=f.value,h.id&&b.setAttribute("form",h.id),f.parentNode.insertBefore(b,f),h=new FormData(h),b.parentNode.removeChild(b),h}function $5e(h,f,b,E,C){if(f==="submit"&&b&&b.stateNode===C){var P=bse((C[Hn]||null).action),V=E.submitter;V&&(f=(f=V[Hn]||null)?bse(f.formAction):V.getAttribute("formAction"),f!==null&&(P=f,V=null));var K=new B0("action","action",null,E,C);h.push({event:K,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(cb!==0){var oe=V?wse(C,V):new FormData(C);A6(b,{pending:!0,data:oe,method:C.method,action:P},null,oe)}}else typeof P=="function"&&(K.preventDefault(),oe=V?wse(C,V):new FormData(C),A6(b,{pending:!0,data:oe,method:C.method,action:P},P,oe))},currentTarget:C}]})}}for(var hB=0;hB<ff.length;hB++){var dB=ff[hB],M5e=dB.toLowerCase(),C5e=dB[0].toUpperCase()+dB.slice(1);Al(M5e,"on"+C5e)}Al(AO,"onAnimationEnd"),Al(Il,"onAnimationIteration"),Al(Y0,"onAnimationStart"),Al("dblclick","onDoubleClick"),Al("focusin","onFocus"),Al("focusout","onBlur"),Al(s6,"onTransitionRun"),Al(U1,"onTransitionStart"),Al(o6,"onTransitionCancel"),Al(k$,"onTransitionEnd"),ku("onMouseEnter",["mouseout","mouseover"]),ku("onMouseLeave",["mouseout","mouseover"]),ku("onPointerEnter",["pointerout","pointerover"]),ku("onPointerLeave",["pointerout","pointerover"]),Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rM="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I5e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rM));function _se(h,f){f=(f&4)!==0;for(var b=0;b<h.length;b++){var E=h[b],C=E.event;E=E.listeners;e:{var P=void 0;if(f)for(var V=E.length-1;0<=V;V--){var K=E[V],oe=K.instance,Ee=K.currentTarget;if(K=K.listener,oe!==P&&C.isPropagationStopped())break e;P=K,C.currentTarget=Ee;try{P(C)}catch(Fe){QO(Fe)}C.currentTarget=null,P=oe}else for(V=0;V<E.length;V++){if(K=E[V],oe=K.instance,Ee=K.currentTarget,K=K.listener,oe!==P&&C.isPropagationStopped())break e;P=K,C.currentTarget=Ee;try{P(C)}catch(Fe){QO(Fe)}C.currentTarget=null,P=oe}}}}function xi(h,f){var b=f[ws];b===void 0&&(b=f[ws]=new Set);var E=h+"__bubble";b.has(E)||(xse(f,h,2,!1),b.add(E))}function pB(h,f,b){var E=0;f&&(E|=4),xse(b,h,E,f)}var pL="_reactListening"+Math.random().toString(36).slice(2);function fB(h){if(!h[pL]){h[pL]=!0,T1.forEach(function(b){b!=="selectionchange"&&(I5e.has(b)||pB(b,!1,h),pB(b,!0,h))});var f=h.nodeType===9?h:h.ownerDocument;f===null||f[pL]||(f[pL]=!0,pB("selectionchange",!1,f))}}function xse(h,f,b,E){switch(Hse(f)){case 2:var C=iFe;break;case 8:C=rFe;break;default:C=CB}b=C.bind(null,f,b,h),C=void 0,!U0||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(C=!0),E?C!==void 0?h.addEventListener(f,b,{capture:!0,passive:C}):h.addEventListener(f,b,!0):C!==void 0?h.addEventListener(f,b,{passive:C}):h.addEventListener(f,b,!1)}function mB(h,f,b,E,C){var P=E;if((f&1)===0&&(f&2)===0&&E!==null)e:for(;;){if(E===null)return;var V=E.tag;if(V===3||V===4){var K=E.stateNode.containerInfo;if(K===C)break;if(V===4)for(V=E.return;V!==null;){var oe=V.tag;if((oe===3||oe===4)&&V.stateNode.containerInfo===C)return;V=V.return}for(;K!==null;){if(V=xl(K),V===null)return;if(oe=V.tag,oe===5||oe===6||oe===26||oe===27){E=P=V;continue e}K=K.parentNode}}E=E.return}Tl(function(){var Ee=P,Fe=Dy(b),Be=[];e:{var $e=PO.get(h);if($e!==void 0){var Ie=B0,Zt=h;switch(h){case"keypress":if($n(b)===0)break e;case"keydown":case"keyup":Ie=JU;break;case"focusin":Zt="focus",Ie=x$;break;case"focusout":Zt="blur",Ie=x$;break;case"beforeblur":case"afterblur":Ie=x$;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=jy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=HU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=QU;break;case AO:case Il:case Y0:Ie=WU;break;case k$:Ie=e6;break;case"scroll":case"scrollend":Ie=qU;break;case"wheel":Ie=_O;break;case"copy":case"cut":case"paste":Ie=S$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=T$;break;case"toggle":case"beforetoggle":Ie=uf}var jt=(f&4)!==0,ur=!jt&&(h==="scroll"||h==="scrollend"),be=jt?$e!==null?$e+"Capture":null:$e;jt=[];for(var fe=Ee,Se;fe!==null;){var ze=fe;if(Se=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||Se===null||be===null||(ze=Ni(fe,be),ze!=null&&jt.push(nM(fe,ze,Se))),ur)break;fe=fe.return}0<jt.length&&($e=new Ie($e,Zt,null,b,Fe),Be.push({event:$e,listeners:jt}))}}if((f&7)===0){e:{if($e=h==="mouseover"||h==="pointerover",Ie=h==="mouseout"||h==="pointerout",$e&&b!==j0&&(Zt=b.relatedTarget||b.fromElement)&&(xl(Zt)||Zt[yt]))break e;if((Ie||$e)&&($e=Fe.window===Fe?Fe:($e=Fe.ownerDocument)?$e.defaultView||$e.parentWindow:window,Ie?(Zt=b.relatedTarget||b.toElement,Ie=Ee,Zt=Zt?xl(Zt):null,Zt!==null&&(ur=s(Zt),jt=Zt.tag,Zt!==ur||jt!==5&&jt!==27&&jt!==6)&&(Zt=null)):(Ie=null,Zt=Ee),Ie!==Zt)){if(jt=jy,ze="onMouseLeave",be="onMouseEnter",fe="mouse",(h==="pointerout"||h==="pointerover")&&(jt=T$,ze="onPointerLeave",be="onPointerEnter",fe="pointer"),ur=Ie==null?$e:kt(Ie),Se=Zt==null?$e:kt(Zt),$e=new jt(ze,fe+"leave",Ie,b,Fe),$e.target=ur,$e.relatedTarget=Se,ze=null,xl(Fe)===Ee&&(jt=new jt(be,fe+"enter",Zt,b,Fe),jt.target=Se,jt.relatedTarget=ur,ze=jt),ur=ze,Ie&&Zt)t:{for(jt=Ie,be=Zt,fe=0,Se=jt;Se;Se=lx(Se))fe++;for(Se=0,ze=be;ze;ze=lx(ze))Se++;for(;0<fe-Se;)jt=lx(jt),fe--;for(;0<Se-fe;)be=lx(be),Se--;for(;fe--;){if(jt===be||be!==null&&jt===be.alternate)break t;jt=lx(jt),be=lx(be)}jt=null}else jt=null;Ie!==null&&Sse(Be,$e,Ie,jt,!1),Zt!==null&&ur!==null&&Sse(Be,ur,Zt,jt,!0)}}e:{if($e=Ee?kt(Ee):window,Ie=$e.nodeName&&$e.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&$e.type==="file")var St=Vy;else if(df($e))if(C$)St=n6;else{St=r6;var gi=A$}else Ie=$e.nodeName,!Ie||Ie.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Ee&&z0(Ee.elementType)&&(St=Vy):St=Nu;if(St&&(St=St(h,Ee))){$O(Be,St,b,Fe);break e}gi&&gi(h,$e,Ee),h==="focusout"&&Ee&&$e.type==="number"&&Ee.memoizedProps.value!=null&&Ly($e,"number",$e.value)}switch(gi=Ee?kt(Ee):window,h){case"focusin":(df(gi)||gi.contentEditable==="true")&&(Cl=gi,Hy=Ee,pf=null);break;case"focusout":pf=Hy=Cl=null;break;case"mousedown":z1=!0;break;case"contextmenu":case"mouseup":case"dragend":z1=!1,CO(Be,b,Fe);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":CO(Be,b,Fe)}var Ot;if(hf)e:{switch(h){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Uy?R1(h,b)&&(Gt="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(Gt="onCompositionStart");Gt&&(M$&&b.locale!=="ko"&&(Uy||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Uy&&(Ot=zy()):(Pc=Fe,Lu="value"in Pc?Pc.value:Pc.textContent,Uy=!0)),gi=fL(Ee,Gt),0<gi.length&&(Gt=new $l(Gt,h,null,b,Fe),Be.push({event:Gt,listeners:gi}),Ot?Gt.data=Ot:(Ot=EO(b),Ot!==null&&(Gt.data=Ot)))),(Ot=xO?TO(h,b):i6(h,b))&&(Gt=fL(Ee,"onBeforeInput"),0<Gt.length&&(gi=new $l("onBeforeInput","beforeinput",null,b,Fe),Be.push({event:gi,listeners:Gt}),gi.data=Ot)),$5e(Be,h,Ee,b,Fe)}_se(Be,f)})}function nM(h,f,b){return{instance:h,listener:f,currentTarget:b}}function fL(h,f){for(var b=f+"Capture",E=[];h!==null;){var C=h,P=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||P===null||(C=Ni(h,b),C!=null&&E.unshift(nM(h,C,P)),C=Ni(h,f),C!=null&&E.push(nM(h,C,P))),h.tag===3)return E;h=h.return}return[]}function lx(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function Sse(h,f,b,E,C){for(var P=f._reactName,V=[];b!==null&&b!==E;){var K=b,oe=K.alternate,Ee=K.stateNode;if(K=K.tag,oe!==null&&oe===E)break;K!==5&&K!==26&&K!==27||Ee===null||(oe=Ee,C?(Ee=Ni(b,P),Ee!=null&&V.unshift(nM(b,Ee,oe))):C||(Ee=Ni(b,P),Ee!=null&&V.push(nM(b,Ee,oe)))),b=b.return}V.length!==0&&h.push({event:f,listeners:V})}var A5e=/\r\n?/g,P5e=/\u0000|\uFFFD/g;function Ese(h){return(typeof h=="string"?h:""+h).replace(A5e,`
`).replace(P5e,"")}function Tse(h,f){return f=Ese(f),Ese(h)===f}function mL(){}function cr(h,f,b,E,C,P){switch(b){case"children":typeof E=="string"?f==="body"||f==="textarea"&&E===""||Ic(h,E):(typeof E=="number"||typeof E=="bigint")&&f!=="body"&&Ic(h,""+E);break;case"className":ky(h,"class",E);break;case"tabIndex":ky(h,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ky(h,b,E);break;case"style":Ry(h,E,P);break;case"data":if(f!=="object"){ky(h,"data",E);break}case"src":case"href":if(E===""&&(f!=="a"||b!=="href")){h.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Ny(""+E),h.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(b==="formAction"?(f!=="input"&&cr(h,f,"name",C.name,C,null),cr(h,f,"formEncType",C.formEncType,C,null),cr(h,f,"formMethod",C.formMethod,C,null),cr(h,f,"formTarget",C.formTarget,C,null)):(cr(h,f,"encType",C.encType,C,null),cr(h,f,"method",C.method,C,null),cr(h,f,"target",C.target,C,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Ny(""+E),h.setAttribute(b,E);break;case"onClick":E!=null&&(h.onclick=mL);break;case"onScroll":E!=null&&xi("scroll",h);break;case"onScrollEnd":E!=null&&xi("scrollend",h);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(C.children!=null)throw Error(r(60));h.innerHTML=b}}break;case"multiple":h.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":h.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){h.removeAttribute("xlink:href");break}b=Ny(""+E),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""+E):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":E===!0?h.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,E):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?h.setAttribute(b,E):h.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?h.removeAttribute(b):h.setAttribute(b,E);break;case"popover":xi("beforetoggle",h),xi("toggle",h),Py(h,"popover",E);break;case"xlinkActuate":El(h,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":El(h,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":El(h,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":El(h,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":El(h,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":El(h,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":El(h,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":El(h,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":El(h,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Py(h,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=b$.get(b)||b,Py(h,b,E))}}function yB(h,f,b,E,C,P){switch(b){case"style":Ry(h,E,P);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(C.children!=null)throw Error(r(60));h.innerHTML=b}}break;case"children":typeof E=="string"?Ic(h,E):(typeof E=="number"||typeof E=="bigint")&&Ic(h,""+E);break;case"onScroll":E!=null&&xi("scroll",h);break;case"onScrollEnd":E!=null&&xi("scrollend",h);break;case"onClick":E!=null&&(h.onclick=mL);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$1.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(C=b.endsWith("Capture"),f=b.slice(2,C?b.length-7:void 0),P=h[Hn]||null,P=P!=null?P[b]:null,typeof P=="function"&&h.removeEventListener(f,P,C),typeof E=="function")){typeof P!="function"&&P!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(f,E,C);break e}b in h?h[b]=E:E===!0?h.setAttribute(b,""):Py(h,b,E)}}}function uo(h,f,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xi("error",h),xi("load",h);var E=!1,C=!1,P;for(P in b)if(b.hasOwnProperty(P)){var V=b[P];if(V!=null)switch(P){case"src":E=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:cr(h,f,P,V,b,null)}}C&&cr(h,f,"srcSet",b.srcSet,b,null),E&&cr(h,f,"src",b.src,b,null);return;case"input":xi("invalid",h);var K=P=V=C=null,oe=null,Ee=null;for(E in b)if(b.hasOwnProperty(E)){var Fe=b[E];if(Fe!=null)switch(E){case"name":C=Fe;break;case"type":V=Fe;break;case"checked":oe=Fe;break;case"defaultChecked":Ee=Fe;break;case"value":P=Fe;break;case"defaultValue":K=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,f));break;default:cr(h,f,E,Fe,b,null)}}pO(h,P,K,oe,Ee,V,C,!1),Tt(h);return;case"select":xi("invalid",h),E=V=P=null;for(C in b)if(b.hasOwnProperty(C)&&(K=b[C],K!=null))switch(C){case"value":P=K;break;case"defaultValue":V=K;break;case"multiple":E=K;default:cr(h,f,C,K,b,null)}f=P,b=V,h.multiple=!!E,f!=null?Da(h,!!E,f,!1):b!=null&&Da(h,!!E,b,!0);return;case"textarea":xi("invalid",h),P=C=E=null;for(V in b)if(b.hasOwnProperty(V)&&(K=b[V],K!=null))switch(V){case"value":E=K;break;case"defaultValue":C=K;break;case"children":P=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(91));break;default:cr(h,f,V,K,b,null)}Qh(h,E,C,P),Tt(h);return;case"option":for(oe in b)if(b.hasOwnProperty(oe)&&(E=b[oe],E!=null))switch(oe){case"selected":h.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:cr(h,f,oe,E,b,null)}return;case"dialog":xi("beforetoggle",h),xi("toggle",h),xi("cancel",h),xi("close",h);break;case"iframe":case"object":xi("load",h);break;case"video":case"audio":for(E=0;E<rM.length;E++)xi(rM[E],h);break;case"image":xi("error",h),xi("load",h);break;case"details":xi("toggle",h);break;case"embed":case"source":case"link":xi("error",h),xi("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in b)if(b.hasOwnProperty(Ee)&&(E=b[Ee],E!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:cr(h,f,Ee,E,b,null)}return;default:if(z0(f)){for(Fe in b)b.hasOwnProperty(Fe)&&(E=b[Fe],E!==void 0&&yB(h,f,Fe,E,b,void 0));return}}for(K in b)b.hasOwnProperty(K)&&(E=b[K],E!=null&&cr(h,f,K,E,b,null))}function k5e(h,f,b,E){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,P=null,V=null,K=null,oe=null,Ee=null,Fe=null;for(Ie in b){var Be=b[Ie];if(b.hasOwnProperty(Ie)&&Be!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":oe=Be;default:E.hasOwnProperty(Ie)||cr(h,f,Ie,null,E,Be)}}for(var $e in E){var Ie=E[$e];if(Be=b[$e],E.hasOwnProperty($e)&&(Ie!=null||Be!=null))switch($e){case"type":P=Ie;break;case"name":C=Ie;break;case"checked":Ee=Ie;break;case"defaultChecked":Fe=Ie;break;case"value":V=Ie;break;case"defaultValue":K=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,f));break;default:Ie!==Be&&cr(h,f,$e,Ie,E,Be)}}Po(h,V,K,oe,Ee,Fe,P,C);return;case"select":Ie=V=K=$e=null;for(P in b)if(oe=b[P],b.hasOwnProperty(P)&&oe!=null)switch(P){case"value":break;case"multiple":Ie=oe;default:E.hasOwnProperty(P)||cr(h,f,P,null,E,oe)}for(C in E)if(P=E[C],oe=b[C],E.hasOwnProperty(C)&&(P!=null||oe!=null))switch(C){case"value":$e=P;break;case"defaultValue":K=P;break;case"multiple":V=P;default:P!==oe&&cr(h,f,C,P,E,oe)}f=K,b=V,E=Ie,$e!=null?Da(h,!!b,$e,!1):!!E!=!!b&&(f!=null?Da(h,!!b,f,!0):Da(h,!!b,b?[]:"",!1));return;case"textarea":Ie=$e=null;for(K in b)if(C=b[K],b.hasOwnProperty(K)&&C!=null&&!E.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:cr(h,f,K,null,E,C)}for(V in E)if(C=E[V],P=b[V],E.hasOwnProperty(V)&&(C!=null||P!=null))switch(V){case"value":$e=C;break;case"defaultValue":Ie=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==P&&cr(h,f,V,C,E,P)}hn(h,$e,Ie);return;case"option":for(var Zt in b)if($e=b[Zt],b.hasOwnProperty(Zt)&&$e!=null&&!E.hasOwnProperty(Zt))switch(Zt){case"selected":h.selected=!1;break;default:cr(h,f,Zt,null,E,$e)}for(oe in E)if($e=E[oe],Ie=b[oe],E.hasOwnProperty(oe)&&$e!==Ie&&($e!=null||Ie!=null))switch(oe){case"selected":h.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:cr(h,f,oe,$e,E,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in b)$e=b[jt],b.hasOwnProperty(jt)&&$e!=null&&!E.hasOwnProperty(jt)&&cr(h,f,jt,null,E,$e);for(Ee in E)if($e=E[Ee],Ie=b[Ee],E.hasOwnProperty(Ee)&&$e!==Ie&&($e!=null||Ie!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,f));break;default:cr(h,f,Ee,$e,E,Ie)}return;default:if(z0(f)){for(var ur in b)$e=b[ur],b.hasOwnProperty(ur)&&$e!==void 0&&!E.hasOwnProperty(ur)&&yB(h,f,ur,void 0,E,$e);for(Fe in E)$e=E[Fe],Ie=b[Fe],!E.hasOwnProperty(Fe)||$e===Ie||$e===void 0&&Ie===void 0||yB(h,f,Fe,$e,E,Ie);return}}for(var be in b)$e=b[be],b.hasOwnProperty(be)&&$e!=null&&!E.hasOwnProperty(be)&&cr(h,f,be,null,E,$e);for(Be in E)$e=E[Be],Ie=b[Be],!E.hasOwnProperty(Be)||$e===Ie||$e==null&&Ie==null||cr(h,f,Be,$e,E,Ie)}var gB=null,vB=null;function yL(h){return h.nodeType===9?h:h.ownerDocument}function $se(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mse(h,f){if(h===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&f==="foreignObject"?0:h}function bB(h,f){return h==="textarea"||h==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var wB=null;function O5e(){var h=window.event;return h&&h.type==="popstate"?h===wB?!1:(wB=h,!0):(wB=null,!1)}var Cse=typeof setTimeout=="function"?setTimeout:void 0,L5e=typeof clearTimeout=="function"?clearTimeout:void 0,Ise=typeof Promise=="function"?Promise:void 0,R5e=typeof queueMicrotask=="function"?queueMicrotask:typeof Ise<"u"?function(h){return Ise.resolve(null).then(h).catch(N5e)}:Cse;function N5e(h){setTimeout(function(){throw h})}function pg(h){return h==="head"}function Ase(h,f){var b=f,E=0,C=0;do{var P=b.nextSibling;if(h.removeChild(b),P&&P.nodeType===8)if(b=P.data,b==="/$"){if(0<E&&8>E){b=E;var V=h.ownerDocument;if(b&1&&sM(V.documentElement),b&2&&sM(V.body),b&4)for(b=V.head,sM(b),V=b.firstChild;V;){var K=V.nextSibling,oe=V.nodeName;V[Jh]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||b.removeChild(V),V=K}}if(C===0){h.removeChild(P),pM(f);return}C--}else b==="$"||b==="$?"||b==="$!"?C++:E=b.charCodeAt(0)-48;else E=0;b=P}while(b);pM(f)}function _B(h){var f=h.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var b=f;switch(f=f.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":_B(b),aa(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function D5e(h,f,b,E){for(;h.nodeType===1;){var C=b;if(h.nodeName.toLowerCase()!==f.toLowerCase()){if(!E&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(E){if(!h[Jh])switch(f){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(P=h.getAttribute("rel"),P==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(P!==C.rel||h.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||h.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||h.getAttribute("title")!==(C.title==null?null:C.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(P=h.getAttribute("src"),(P!==(C.src==null?null:C.src)||h.getAttribute("type")!==(C.type==null?null:C.type)||h.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&P&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(f==="input"&&h.type==="hidden"){var P=C.name==null?null:""+C.name;if(C.type==="hidden"&&h.getAttribute("name")===P)return h}else return h;if(h=ju(h.nextSibling),h===null)break}return null}function F5e(h,f,b){if(f==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=ju(h.nextSibling),h===null))return null;return h}function xB(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function z5e(h,f){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")f();else{var E=function(){f(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),h._reactRetry=E}}function ju(h){for(;h!=null;h=h.nextSibling){var f=h.nodeType;if(f===1||f===3)break;if(f===8){if(f=h.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return h}var SB=null;function Pse(h){h=h.previousSibling;for(var f=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(f===0)return h;f--}else b==="/$"&&f++}h=h.previousSibling}return null}function kse(h,f,b){switch(f=yL(b),h){case"html":if(h=f.documentElement,!h)throw Error(r(452));return h;case"head":if(h=f.head,!h)throw Error(r(453));return h;case"body":if(h=f.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}function sM(h){for(var f=h.attributes;f.length;)h.removeAttributeNode(f[0]);aa(h)}var Fc=new Map,Ose=new Set;function gL(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var $f=ue.d;ue.d={f:j5e,r:U5e,D:B5e,C:V5e,L:G5e,m:q5e,X:W5e,S:H5e,M:Z5e};function j5e(){var h=$f.f(),f=lL();return h||f}function U5e(h){var f=Cc(h);f!==null&&f.tag===5&&f.type==="form"?Qre(f):$f.r(h)}var cx=typeof document>"u"?null:document;function Lse(h,f,b){var E=cx;if(E&&typeof f=="string"&&f){var C=Pi(f);C='link[rel="'+h+'"][href="'+C+'"]',typeof b=="string"&&(C+='[crossorigin="'+b+'"]'),Ose.has(C)||(Ose.add(C),h={rel:h,crossOrigin:b,href:f},E.querySelector(C)===null&&(f=E.createElement("link"),uo(f,"link",h),un(f),E.head.appendChild(f)))}}function B5e(h){$f.D(h),Lse("dns-prefetch",h,null)}function V5e(h,f){$f.C(h,f),Lse("preconnect",h,f)}function G5e(h,f,b){$f.L(h,f,b);var E=cx;if(E&&h&&f){var C='link[rel="preload"][as="'+Pi(f)+'"]';f==="image"&&b&&b.imageSrcSet?(C+='[imagesrcset="'+Pi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(C+='[imagesizes="'+Pi(b.imageSizes)+'"]')):C+='[href="'+Pi(h)+'"]';var P=C;switch(f){case"style":P=ux(h);break;case"script":P=hx(h)}Fc.has(P)||(h=u({rel:"preload",href:f==="image"&&b&&b.imageSrcSet?void 0:h,as:f},b),Fc.set(P,h),E.querySelector(C)!==null||f==="style"&&E.querySelector(oM(P))||f==="script"&&E.querySelector(aM(P))||(f=E.createElement("link"),uo(f,"link",h),un(f),E.head.appendChild(f)))}}function q5e(h,f){$f.m(h,f);var b=cx;if(b&&h){var E=f&&typeof f.as=="string"?f.as:"script",C='link[rel="modulepreload"][as="'+Pi(E)+'"][href="'+Pi(h)+'"]',P=C;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=hx(h)}if(!Fc.has(P)&&(h=u({rel:"modulepreload",href:h},f),Fc.set(P,h),b.querySelector(C)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(aM(P)))return}E=b.createElement("link"),uo(E,"link",h),un(E),b.head.appendChild(E)}}}function H5e(h,f,b){$f.S(h,f,b);var E=cx;if(E&&h){var C=Pu(E).hoistableStyles,P=ux(h);f=f||"default";var V=C.get(P);if(!V){var K={loading:0,preload:null};if(V=E.querySelector(oM(P)))K.loading=5;else{h=u({rel:"stylesheet",href:h,"data-precedence":f},b),(b=Fc.get(P))&&EB(h,b);var oe=V=E.createElement("link");un(oe),uo(oe,"link",h),oe._p=new Promise(function(Ee,Fe){oe.onload=Ee,oe.onerror=Fe}),oe.addEventListener("load",function(){K.loading|=1}),oe.addEventListener("error",function(){K.loading|=2}),K.loading|=4,vL(V,f,E)}V={type:"stylesheet",instance:V,count:1,state:K},C.set(P,V)}}}function W5e(h,f){$f.X(h,f);var b=cx;if(b&&h){var E=Pu(b).hoistableScripts,C=hx(h),P=E.get(C);P||(P=b.querySelector(aM(C)),P||(h=u({src:h,async:!0},f),(f=Fc.get(C))&&TB(h,f),P=b.createElement("script"),un(P),uo(P,"link",h),b.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},E.set(C,P))}}function Z5e(h,f){$f.M(h,f);var b=cx;if(b&&h){var E=Pu(b).hoistableScripts,C=hx(h),P=E.get(C);P||(P=b.querySelector(aM(C)),P||(h=u({src:h,async:!0,type:"module"},f),(f=Fc.get(C))&&TB(h,f),P=b.createElement("script"),un(P),uo(P,"link",h),b.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},E.set(C,P))}}function Rse(h,f,b,E){var C=(C=Xe.current)?gL(C):null;if(!C)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(f=ux(b.href),b=Pu(C).hoistableStyles,E=b.get(f),E||(E={type:"style",instance:null,count:0,state:null},b.set(f,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=ux(b.href);var P=Pu(C).hoistableStyles,V=P.get(h);if(V||(C=C.ownerDocument||C,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(h,V),(P=C.querySelector(oM(h)))&&!P._p&&(V.instance=P,V.state.loading=5),Fc.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Fc.set(h,b),P||Y5e(C,h,b,V.state))),f&&E===null)throw Error(r(528,""));return V}if(f&&E!==null)throw Error(r(529,""));return null;case"script":return f=b.async,b=b.src,typeof b=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=hx(b),b=Pu(C).hoistableScripts,E=b.get(f),E||(E={type:"script",instance:null,count:0,state:null},b.set(f,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function ux(h){return'href="'+Pi(h)+'"'}function oM(h){return'link[rel="stylesheet"]['+h+"]"}function Nse(h){return u({},h,{"data-precedence":h.precedence,precedence:null})}function Y5e(h,f,b,E){h.querySelector('link[rel="preload"][as="style"]['+f+"]")?E.loading=1:(f=h.createElement("link"),E.preload=f,f.addEventListener("load",function(){return E.loading|=1}),f.addEventListener("error",function(){return E.loading|=2}),uo(f,"link",b),un(f),h.head.appendChild(f))}function hx(h){return'[src="'+Pi(h)+'"]'}function aM(h){return"script[async]"+h}function Dse(h,f,b){if(f.count++,f.instance===null)switch(f.type){case"style":var E=h.querySelector('style[data-href~="'+Pi(b.href)+'"]');if(E)return f.instance=E,un(E),E;var C=u({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(h.ownerDocument||h).createElement("style"),un(E),uo(E,"style",C),vL(E,b.precedence,h),f.instance=E;case"stylesheet":C=ux(b.href);var P=h.querySelector(oM(C));if(P)return f.state.loading|=4,f.instance=P,un(P),P;E=Nse(b),(C=Fc.get(C))&&EB(E,C),P=(h.ownerDocument||h).createElement("link"),un(P);var V=P;return V._p=new Promise(function(K,oe){V.onload=K,V.onerror=oe}),uo(P,"link",E),f.state.loading|=4,vL(P,b.precedence,h),f.instance=P;case"script":return P=hx(b.src),(C=h.querySelector(aM(P)))?(f.instance=C,un(C),C):(E=b,(C=Fc.get(P))&&(E=u({},b),TB(E,C)),h=h.ownerDocument||h,C=h.createElement("script"),un(C),uo(C,"link",E),h.head.appendChild(C),f.instance=C);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(E=f.instance,f.state.loading|=4,vL(E,b.precedence,h));return f.instance}function vL(h,f,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=E.length?E[E.length-1]:null,P=C,V=0;V<E.length;V++){var K=E[V];if(K.dataset.precedence===f)P=K;else if(P!==C)break}P?P.parentNode.insertBefore(h,P.nextSibling):(f=b.nodeType===9?b.head:b,f.insertBefore(h,f.firstChild))}function EB(h,f){h.crossOrigin==null&&(h.crossOrigin=f.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=f.referrerPolicy),h.title==null&&(h.title=f.title)}function TB(h,f){h.crossOrigin==null&&(h.crossOrigin=f.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=f.referrerPolicy),h.integrity==null&&(h.integrity=f.integrity)}var bL=null;function Fse(h,f,b){if(bL===null){var E=new Map,C=bL=new Map;C.set(b,E)}else C=bL,E=C.get(b),E||(E=new Map,C.set(b,E));if(E.has(h))return E;for(E.set(h,null),b=b.getElementsByTagName(h),C=0;C<b.length;C++){var P=b[C];if(!(P[Jh]||P[Yi]||h==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var V=P.getAttribute(f)||"";V=h+V;var K=E.get(V);K?K.push(P):E.set(V,[P])}}return E}function zse(h,f,b){h=h.ownerDocument||h,h.head.insertBefore(b,f==="title"?h.querySelector("head > title"):null)}function K5e(h,f,b){if(b===1||f.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return h=f.disabled,typeof f.precedence=="string"&&h==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function jse(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var lM=null;function J5e(){}function X5e(h,f,b){if(lM===null)throw Error(r(475));var E=lM;if(f.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=ux(b.href),P=h.querySelector(oM(C));if(P){h=P._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(E.count++,E=wL.bind(E),h.then(E,E)),f.state.loading|=4,f.instance=P,un(P);return}P=h.ownerDocument||h,b=Nse(b),(C=Fc.get(C))&&EB(b,C),P=P.createElement("link"),un(P);var V=P;V._p=new Promise(function(K,oe){V.onload=K,V.onerror=oe}),uo(P,"link",b),f.instance=P}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(f,h),(h=f.state.preload)&&(f.state.loading&3)===0&&(E.count++,f=wL.bind(E),h.addEventListener("load",f),h.addEventListener("error",f))}}function Q5e(){if(lM===null)throw Error(r(475));var h=lM;return h.stylesheets&&h.count===0&&$B(h,h.stylesheets),0<h.count?function(f){var b=setTimeout(function(){if(h.stylesheets&&$B(h,h.stylesheets),h.unsuspend){var E=h.unsuspend;h.unsuspend=null,E()}},6e4);return h.unsuspend=f,function(){h.unsuspend=null,clearTimeout(b)}}:null}function wL(){if(this.count--,this.count===0){if(this.stylesheets)$B(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var _L=null;function $B(h,f){h.stylesheets=null,h.unsuspend!==null&&(h.count++,_L=new Map,f.forEach(eFe,h),_L=null,wL.call(h))}function eFe(h,f){if(!(f.state.loading&4)){var b=_L.get(h);if(b)var E=b.get(null);else{b=new Map,_L.set(h,b);for(var C=h.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<C.length;P++){var V=C[P];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(b.set(V.dataset.precedence,V),E=V)}E&&b.set(null,E)}C=f.instance,V=C.getAttribute("data-precedence"),P=b.get(V)||E,P===E&&b.set(null,C),b.set(V,C),this.count++,E=wL.bind(this),C.addEventListener("load",E),C.addEventListener("error",E),P?P.parentNode.insertBefore(C,P.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(C,h.firstChild)),f.state.loading|=4}}var cM={$$typeof:A,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function tFe(h,f,b,E,C,P,V,K){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ay(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.hiddenUpdates=Ay(null),this.identifierPrefix=E,this.onUncaughtError=C,this.onCaughtError=P,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Use(h,f,b,E,C,P,V,K,oe,Ee,Fe,Be){return h=new tFe(h,f,b,V,K,oe,Ee,Be),f=1,P===!0&&(f|=24),P=pa(3,null,null,f),h.current=P,P.stateNode=h,f=a6(),f.refCount++,h.pooledCache=f,f.refCount++,P.memoizedState={element:E,isDehydrated:b,cache:f},h6(P),h}function Bse(h){return h?(h=gf,h):gf}function Vse(h,f,b,E,C,P){C=Bse(C),E.context===null?E.context=C:E.pendingContext=C,E=eg(f),E.payload={element:b},P=P===void 0?null:P,P!==null&&(E.callback=P),b=tg(h,E,f),b!==null&&(Nl(b,h,f),z$(b,h,f))}function Gse(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<f?b:f}}function MB(h,f){Gse(h,f),(h=h.alternate)&&Gse(h,f)}function qse(h){if(h.tag===13){var f=Yy(h,67108864);f!==null&&Nl(f,h,67108864),MB(h,67108864)}}var xL=!0;function iFe(h,f,b,E){var C=ne.T;ne.T=null;var P=ue.p;try{ue.p=2,CB(h,f,b,E)}finally{ue.p=P,ne.T=C}}function rFe(h,f,b,E){var C=ne.T;ne.T=null;var P=ue.p;try{ue.p=8,CB(h,f,b,E)}finally{ue.p=P,ne.T=C}}function CB(h,f,b,E){if(xL){var C=IB(E);if(C===null)mB(h,f,E,SL,b),Wse(h,E);else if(sFe(C,h,f,b,E))E.stopPropagation();else if(Wse(h,E),f&4&&-1<nFe.indexOf(h)){for(;C!==null;){var P=Cc(C);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var V=$c(P.pendingLanes);if(V!==0){var K=P;for(K.pendingLanes|=2,K.entangledLanes|=2;V;){var oe=1<<31-Io(V);K.entanglements[1]|=oe,V&=~oe}cd(P),(tr&6)===0&&(oL=_r()+500,iM(0))}}break;case 13:K=Yy(P,2),K!==null&&Nl(K,P,2),lL(),MB(P,2)}if(P=IB(E),P===null&&mB(h,f,E,SL,b),P===C)break;C=P}C!==null&&E.stopPropagation()}else mB(h,f,E,null,b)}}function IB(h){return h=Dy(h),AB(h)}var SL=null;function AB(h){if(SL=null,h=xl(h),h!==null){var f=s(h);if(f===null)h=null;else{var b=f.tag;if(b===13){if(h=o(f),h!==null)return h;h=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;h=null}else f!==h&&(h=null)}}return SL=h,null}function Hse(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bl()){case O0:return 2;case Cy:return 8;case oo:case b1:return 32;case L0:return 268435456;default:return 32}default:return 32}}var PB=!1,fg=null,mg=null,yg=null,uM=new Map,hM=new Map,gg=[],nFe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wse(h,f){switch(h){case"focusin":case"focusout":fg=null;break;case"dragenter":case"dragleave":mg=null;break;case"mouseover":case"mouseout":yg=null;break;case"pointerover":case"pointerout":uM.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":hM.delete(f.pointerId)}}function dM(h,f,b,E,C,P){return h===null||h.nativeEvent!==P?(h={blockedOn:f,domEventName:b,eventSystemFlags:E,nativeEvent:P,targetContainers:[C]},f!==null&&(f=Cc(f),f!==null&&qse(f)),h):(h.eventSystemFlags|=E,f=h.targetContainers,C!==null&&f.indexOf(C)===-1&&f.push(C),h)}function sFe(h,f,b,E,C){switch(f){case"focusin":return fg=dM(fg,h,f,b,E,C),!0;case"dragenter":return mg=dM(mg,h,f,b,E,C),!0;case"mouseover":return yg=dM(yg,h,f,b,E,C),!0;case"pointerover":var P=C.pointerId;return uM.set(P,dM(uM.get(P)||null,h,f,b,E,C)),!0;case"gotpointercapture":return P=C.pointerId,hM.set(P,dM(hM.get(P)||null,h,f,b,E,C)),!0}return!1}function Zse(h){var f=xl(h.target);if(f!==null){var b=s(f);if(b!==null){if(f=b.tag,f===13){if(f=o(b),f!==null){h.blockedOn=f,Mc(h.priority,function(){if(b.tag===13){var E=Rl();E=N0(E);var C=Yy(b,E);C!==null&&Nl(C,b,E),MB(b,E)}});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function EL(h){if(h.blockedOn!==null)return!1;for(var f=h.targetContainers;0<f.length;){var b=IB(h.nativeEvent);if(b===null){b=h.nativeEvent;var E=new b.constructor(b.type,b);j0=E,b.target.dispatchEvent(E),j0=null}else return f=Cc(b),f!==null&&qse(f),h.blockedOn=b,!1;f.shift()}return!0}function Yse(h,f,b){EL(h)&&b.delete(f)}function oFe(){PB=!1,fg!==null&&EL(fg)&&(fg=null),mg!==null&&EL(mg)&&(mg=null),yg!==null&&EL(yg)&&(yg=null),uM.forEach(Yse),hM.forEach(Yse)}function TL(h,f){h.blockedOn===f&&(h.blockedOn=null,PB||(PB=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oFe)))}var $L=null;function Kse(h){$L!==h&&($L=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$L===h&&($L=null);for(var f=0;f<h.length;f+=3){var b=h[f],E=h[f+1],C=h[f+2];if(typeof E!="function"){if(AB(E||b)===null)continue;break}var P=Cc(b);P!==null&&(h.splice(f,3),f-=3,A6(P,{pending:!0,data:C,method:b.method,action:E},E,C))}}))}function pM(h){function f(oe){return TL(oe,h)}fg!==null&&TL(fg,h),mg!==null&&TL(mg,h),yg!==null&&TL(yg,h),uM.forEach(f),hM.forEach(f);for(var b=0;b<gg.length;b++){var E=gg[b];E.blockedOn===h&&(E.blockedOn=null)}for(;0<gg.length&&(b=gg[0],b.blockedOn===null);)Zse(b),b.blockedOn===null&&gg.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var C=b[E],P=b[E+1],V=C[Hn]||null;if(typeof P=="function")V||Kse(b);else if(V){var K=null;if(P&&P.hasAttribute("formAction")){if(C=P,V=P[Hn]||null)K=V.formAction;else if(AB(C)!==null)continue}else K=V.action;typeof K=="function"?b[E+1]=K:(b.splice(E,3),E-=3),Kse(b)}}}function kB(h){this._internalRoot=h}ML.prototype.render=kB.prototype.render=function(h){var f=this._internalRoot;if(f===null)throw Error(r(409));var b=f.current,E=Rl();Vse(b,E,h,f,null,null)},ML.prototype.unmount=kB.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var f=h.containerInfo;Vse(h.current,2,null,h,null,null),lL(),f[yt]=null}};function ML(h){this._internalRoot=h}ML.prototype.unstable_scheduleHydration=function(h){if(h){var f=Qi();h={blockedOn:null,target:h,priority:f};for(var b=0;b<gg.length&&f!==0&&f<gg[b].priority;b++);gg.splice(b,0,h),b===0&&Zse(h)}};var Jse=e.version;if(Jse!=="19.1.1")throw Error(r(527,Jse,"19.1.1"));ue.findDOMNode=function(h){var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=l(f),h=h!==null?c(h):null,h=h===null?null:h.stateNode,h};var aFe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CL=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CL.isDisabled&&CL.supportsFiber)try{Iu=CL.inject(aFe),Ns=CL}catch{}}return mM.createRoot=function(h,f){if(!n(h))throw Error(r(299));var b=!1,E="",C=pne,P=fne,V=mne,K=null;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(K=f.unstable_transitionCallbacks)),f=Use(h,1,!1,null,null,b,E,C,P,V,K,null),h[yt]=f.current,fB(h),new kB(f)},mM.hydrateRoot=function(h,f,b){if(!n(h))throw Error(r(299));var E=!1,C="",P=pne,V=fne,K=mne,oe=null,Ee=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(C=b.identifierPrefix),b.onUncaughtError!==void 0&&(P=b.onUncaughtError),b.onCaughtError!==void 0&&(V=b.onCaughtError),b.onRecoverableError!==void 0&&(K=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(oe=b.unstable_transitionCallbacks),b.formState!==void 0&&(Ee=b.formState)),f=Use(h,1,!0,f,b??null,E,C,P,V,K,oe,Ee),f.context=Bse(null),b=f.current,E=Rl(),E=N0(E),C=eg(E),C.callback=null,tg(b,C,E),b=E,f.current.lanes=b,Kh(f,b),cd(f),h[yt]=f.current,fB(h),new ML(f)},mM.version="19.1.1",mM}var loe;function xFe(){if(loe)return DB.exports;loe=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),DB.exports=_Fe(),DB.exports}var SFe=xFe();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var coe="popstate";function EFe(t={}){function e(r,n){let{pathname:s,search:o,hash:a}=r.location;return rG("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(r,n){return typeof n=="string"?n:kA(n)}return $Fe(e,i,null,t)}function sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TFe(){return Math.random().toString(36).substring(2,10)}function uoe(t,e){return{usr:t.state,key:t.key,idx:e}}function rG(t,e,i=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ET(e):e,state:i,key:e&&e.key||r||TFe()}}function kA({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ET(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $Fe(t,e,i,r={}){let{window:n=document.defaultView,v5Compat:s=!1}=r,o=n.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function p(){a="POP";let T=u(),$=T==null?null:T-c;c=T,l&&l({action:a,location:_.location,delta:$})}function m(T,$){a="PUSH";let I=rG(_.location,T,$);c=u()+1;let A=uoe(I,c),k=_.createHref(I);try{o.pushState(A,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(k)}s&&l&&l({action:a,location:_.location,delta:1})}function v(T,$){a="REPLACE";let I=rG(_.location,T,$);c=u();let A=uoe(I,c),k=_.createHref(I);o.replaceState(A,"",k),s&&l&&l({action:a,location:_.location,delta:0})}function w(T){return MFe(T)}let _={get action(){return a},get location(){return t(n,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(coe,p),l=T,()=>{n.removeEventListener(coe,p),l=null}},createHref(T){return e(n,T)},createURL:w,encodeLocation(T){let $=w(T);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:m,replace:v,go(T){return o.go(T)}};return _}function MFe(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),sn(i,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:kA(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=i+r),new URL(r,i)}function twe(t,e,i="/"){return CFe(t,e,i,!1)}function CFe(t,e,i,r){let n=typeof e=="string"?ET(e):e,s=ry(n.pathname||"/",i);if(s==null)return null;let o=iwe(t);IFe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=jFe(s);a=FFe(o[l],c,r)}return a}function iwe(t,e=[],i=[],r="",n=!1){let s=(o,a,l=n,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;sn(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let p=Hm([r,u.relativePath]),m=i.concat(u);o.children&&o.children.length>0&&(sn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),iwe(o.children,e,m,p,l)),!(o.path==null&&!o.index)&&e.push({path:p,score:NFe(p,o.index),routesMeta:m})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of rwe(o.path))s(o,a,!0,c)}),e}function rwe(t){let e=t.split("/");if(e.length===0)return[];let[i,...r]=e,n=i.endsWith("?"),s=i.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let o=rwe(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function IFe(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:DFe(e.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}var AFe=/^:[\w-]+$/,PFe=3,kFe=2,OFe=1,LFe=10,RFe=-2,hoe=t=>t==="*";function NFe(t,e){let i=t.split("/"),r=i.length;return i.some(hoe)&&(r+=RFe),e&&(r+=kFe),i.filter(n=>!hoe(n)).reduce((n,s)=>n+(AFe.test(s)?PFe:s===""?OFe:LFe),r)}function DFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,n)=>r===e[n])?t[t.length-1]-e[e.length-1]:0}function FFe(t,e,i=!1){let{routesMeta:r}=t,n={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",p=SD({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!p&&c&&i&&!r[r.length-1].route.index&&(p=SD({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!p)return null;Object.assign(n,p.params),o.push({params:n,pathname:Hm([s,p.pathname]),pathnameBase:GFe(Hm([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Hm([s,p.pathnameBase]))}return o}function SD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=zFe(t.path,t.caseSensitive,t.end),n=e.match(i);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:p},m)=>{if(u==="*"){let w=a[m]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[m];return p&&!v?c[u]=void 0:c[u]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function zFe(t,e=!1,i=!0){Dh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function jFe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dh(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ry(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&r!=="/"?null:t.slice(i)||"/"}function UFe(t,e="/"){let{pathname:i,search:r="",hash:n=""}=typeof t=="string"?ET(t):t;return{pathname:i?i.startsWith("/")?i:BFe(i,e):e,search:qFe(r),hash:HFe(n)}}function BFe(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function UB(t,e,i,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VFe(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function vJ(t){let e=VFe(t);return e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase)}function bJ(t,e,i,r=!1){let n;typeof t=="string"?n=ET(t):(n={...t},sn(!n.pathname||!n.pathname.includes("?"),UB("?","pathname","search",n)),sn(!n.pathname||!n.pathname.includes("#"),UB("#","pathname","hash",n)),sn(!n.search||!n.search.includes("#"),UB("#","search","hash",n)));let s=t===""||n.pathname==="",o=s?"/":n.pathname,a;if(o==null)a=i;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;n.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=UFe(n,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Hm=t=>t.join("/").replace(/\/\/+/g,"/"),GFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nwe=["POST","PUT","PATCH","DELETE"];new Set(nwe);var ZFe=["GET",...nwe];new Set(ZFe);var TT=U.createContext(null);TT.displayName="DataRouter";var fj=U.createContext(null);fj.displayName="DataRouterState";U.createContext(!1);var swe=U.createContext({isTransitioning:!1});swe.displayName="ViewTransition";var YFe=U.createContext(new Map);YFe.displayName="Fetchers";var KFe=U.createContext(null);KFe.displayName="Await";var qh=U.createContext(null);qh.displayName="Navigation";var QP=U.createContext(null);QP.displayName="Location";var Hh=U.createContext({outlet:null,matches:[],isDataRoute:!1});Hh.displayName="Route";var wJ=U.createContext(null);wJ.displayName="RouteError";function JFe(t,{relative:e}={}){sn($T(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=U.useContext(qh),{hash:n,pathname:s,search:o}=ek(t,{relative:e}),a=s;return i!=="/"&&(a=s==="/"?i:Hm([i,s])),r.createHref({pathname:a,search:o,hash:n})}function $T(){return U.useContext(QP)!=null}function yy(){return sn($T(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(QP).location}var owe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function awe(t){U.useContext(qh).static||U.useLayoutEffect(t)}function mj(){let{isDataRoute:t}=U.useContext(Hh);return t?dze():XFe()}function XFe(){sn($T(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(TT),{basename:e,navigator:i}=U.useContext(qh),{matches:r}=U.useContext(Hh),{pathname:n}=yy(),s=JSON.stringify(vJ(r)),o=U.useRef(!1);return awe(()=>{o.current=!0}),U.useCallback((l,c={})=>{if(Dh(o.current,owe),!o.current)return;if(typeof l=="number"){i.go(l);return}let u=bJ(l,JSON.parse(s),n,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Hm([e,u.pathname])),(c.replace?i.replace:i.push)(u,c.state,c)},[e,i,s,n,t])}var QFe=U.createContext(null);function eze(t){let e=U.useContext(Hh).outlet;return e&&U.createElement(QFe.Provider,{value:t},e)}function ek(t,{relative:e}={}){let{matches:i}=U.useContext(Hh),{pathname:r}=yy(),n=JSON.stringify(vJ(i));return U.useMemo(()=>bJ(t,JSON.parse(n),r,e==="path"),[t,n,r,e])}function tze(t,e){return lwe(t,e)}function lwe(t,e,i,r,n){var I;sn($T(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=U.useContext(qh),{matches:o}=U.useContext(Hh),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",p=a&&a.route;{let A=p&&p.path||"";cwe(c,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let m=yy(),v;if(e){let A=typeof e=="string"?ET(e):e;sn(u==="/"||((I=A.pathname)==null?void 0:I.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${A.pathname}" was given in the \`location\` prop.`),v=A}else v=m;let w=v.pathname||"/",_=w;if(u!=="/"){let A=u.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let T=twe(t,{pathname:_});Dh(p||T!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Dh(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=oze(T&&T.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Hm([u,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Hm([u,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,i,r,n);return e&&$?U.createElement(QP.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},$):$}function ize(){let t=hze(),e=WFe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:s},"ErrorBoundary")," or"," ",U.createElement("code",{style:s},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),i?U.createElement("pre",{style:n},i):null,o)}var rze=U.createElement(ize,null),nze=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?U.createElement(Hh.Provider,{value:this.props.routeContext},U.createElement(wJ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sze({routeContext:t,match:e,children:i}){let r=U.useContext(TT);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Hh.Provider,{value:t},i)}function oze(t,e=[],i=null,r=null,n=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let s=t,o=i==null?void 0:i.errors;if(o!=null){let c=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);sn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(i)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:p,errors:m}=i,v=u.route.loader&&!p.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,p)=>{let m,v=!1,w=null,_=null;i&&(m=o&&u.route.id?o[u.route.id]:void 0,w=u.route.errorElement||rze,a&&(l<0&&p===0?(cwe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):l===p&&(v=!0,_=u.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,p+1)),$=()=>{let I;return m?I=w:v?I=_:u.route.Component?I=U.createElement(u.route.Component,null):u.route.element?I=u.route.element:I=c,U.createElement(sze,{match:u,routeContext:{outlet:c,matches:T,isDataRoute:i!=null},children:I})};return i&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?U.createElement(nze,{location:i.location,revalidation:i.revalidation,component:w,error:m,children:$(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:r}):$()},null)}function _J(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aze(t){let e=U.useContext(TT);return sn(e,_J(t)),e}function lze(t){let e=U.useContext(fj);return sn(e,_J(t)),e}function cze(t){let e=U.useContext(Hh);return sn(e,_J(t)),e}function xJ(t){let e=cze(t),i=e.matches[e.matches.length-1];return sn(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function uze(){return xJ("useRouteId")}function hze(){var r;let t=U.useContext(wJ),e=lze("useRouteError"),i=xJ("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[i]}function dze(){let{router:t}=aze("useNavigate"),e=xJ("useNavigate"),i=U.useRef(!1);return awe(()=>{i.current=!0}),U.useCallback(async(n,s={})=>{Dh(i.current,owe),i.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...s}))},[t,e])}var doe={};function cwe(t,e,i){!e&&!doe[t]&&(doe[t]=!0,Dh(!1,i))}U.memo(pze);function pze({routes:t,future:e,state:i,unstable_onError:r}){return lwe(t,void 0,i,r,e)}function poe({to:t,replace:e,state:i,relative:r}){sn($T(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=U.useContext(qh);Dh(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=U.useContext(Hh),{pathname:o}=yy(),a=mj(),l=bJ(t,vJ(s),o,r==="path"),c=JSON.stringify(l);return U.useEffect(()=>{a(JSON.parse(c),{replace:e,state:i,relative:r})},[a,c,r,e,i]),null}function uwe(t){return eze(t.context)}function Vs(t){sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fze({basename:t="/",children:e=null,location:i,navigationType:r="POP",navigator:n,static:s=!1}){sn(!$T(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=U.useMemo(()=>({basename:o,navigator:n,static:s,future:{}}),[o,n,s]);typeof i=="string"&&(i=ET(i));let{pathname:l="/",search:c="",hash:u="",state:p=null,key:m="default"}=i,v=U.useMemo(()=>{let w=ry(l,o);return w==null?null:{location:{pathname:w,search:c,hash:u,state:p,key:m},navigationType:r}},[o,l,c,u,p,m,r]);return Dh(v!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:U.createElement(qh.Provider,{value:a},U.createElement(QP.Provider,{children:e,value:v}))}function mze({children:t,location:e}){return tze(nG(t),e)}function nG(t,e=[]){let i=[];return U.Children.forEach(t,(r,n)=>{if(!U.isValidElement(r))return;let s=[...e,n];if(r.type===U.Fragment){i.push.apply(i,nG(r.props.children,s));return}sn(r.type===Vs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),sn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nG(r.props.children,s)),i.push(o)}),i}var I3="get",A3="application/x-www-form-urlencoded";function yj(t){return t!=null&&typeof t.tagName=="string"}function yze(t){return yj(t)&&t.tagName.toLowerCase()==="button"}function gze(t){return yj(t)&&t.tagName.toLowerCase()==="form"}function vze(t){return yj(t)&&t.tagName.toLowerCase()==="input"}function bze(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wze(t,e){return t.button===0&&(!e||e==="_self")&&!bze(t)}var IL=null;function _ze(){if(IL===null)try{new FormData(document.createElement("form"),0),IL=!1}catch{IL=!0}return IL}var xze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function BB(t){return t!=null&&!xze.has(t)?(Dh(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${A3}"`),null):t}function Sze(t,e){let i,r,n,s,o;if(gze(t)){let a=t.getAttribute("action");r=a?ry(a,e):null,i=t.getAttribute("method")||I3,n=BB(t.getAttribute("enctype"))||A3,s=new FormData(t)}else if(yze(t)||vze(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?ry(l,e):null,i=t.getAttribute("formmethod")||a.getAttribute("method")||I3,n=BB(t.getAttribute("formenctype"))||BB(a.getAttribute("enctype"))||A3,s=new FormData(a,t),!_ze()){let{name:c,type:u,value:p}=t;if(u==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(yj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=I3,r=null,n=A3,o=t}return s&&n==="text/plain"&&(o=s,s=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function SJ(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Eze(t,e,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${i}`:e&&ry(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function Tze(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $ze(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Mze(t,e,i){let r=await Promise.all(t.map(async n=>{let s=e.routes[n.route.id];if(s){let o=await Tze(s,i);return o.links?o.links():[]}return[]}));return Pze(r.flat(1).filter($ze).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function foe(t,e,i,r,n,s){let o=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,a=(l,c)=>{var u;return i[c].pathname!==l.pathname||((u=i[c].route.path)==null?void 0:u.endsWith("*"))&&i[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var p;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((p=i[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Cze(t,e,{includeHydrateFallback:i}={}){return Ize(t.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Ize(t){return[...new Set(t)]}function Aze(t){let e={},i=Object.keys(t).sort();for(let r of i)e[r]=t[r];return e}function Pze(t,e){let i=new Set;return new Set(e),t.reduce((r,n)=>{let s=JSON.stringify(Aze(n));return i.has(s)||(i.add(s),r.push({key:s,link:n})),r},[])}function hwe(){let t=U.useContext(TT);return SJ(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kze(){let t=U.useContext(fj);return SJ(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var EJ=U.createContext(void 0);EJ.displayName="FrameworkContext";function dwe(){let t=U.useContext(EJ);return SJ(t,"You must render this element inside a <HydratedRouter> element"),t}function Oze(t,e){let i=U.useContext(EJ),[r,n]=U.useState(!1),[s,o]=U.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:p}=e,m=U.useRef(null);U.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let _=$=>{$.forEach(I=>{o(I.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[t]),U.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let v=()=>{n(!0)},w=()=>{n(!1),o(!1)};return i?t!=="intent"?[s,m,{}]:[s,m,{onFocus:yM(a,v),onBlur:yM(l,w),onMouseEnter:yM(c,v),onMouseLeave:yM(u,w),onTouchStart:yM(p,v)}]:[!1,m,{}]}function yM(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function Lze({page:t,...e}){let{router:i}=hwe(),r=U.useMemo(()=>twe(i.routes,t,i.basename),[i.routes,t,i.basename]);return r?U.createElement(Nze,{page:t,matches:r,...e}):null}function Rze(t){let{manifest:e,routeModules:i}=dwe(),[r,n]=U.useState([]);return U.useEffect(()=>{let s=!1;return Mze(t,e,i).then(o=>{s||n(o)}),()=>{s=!0}},[t,e,i]),r}function Nze({page:t,matches:e,...i}){let r=yy(),{manifest:n,routeModules:s}=dwe(),{basename:o}=hwe(),{loaderData:a,matches:l}=kze(),c=U.useMemo(()=>foe(t,e,l,n,r,"data"),[t,e,l,n,r]),u=U.useMemo(()=>foe(t,e,l,n,r,"assets"),[t,e,l,n,r]),p=U.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,_=!1;if(e.forEach($=>{var A;let I=n.routes[$.route.id];!I||!I.hasLoader||(!c.some(k=>k.route.id===$.route.id)&&$.route.id in a&&((A=s[$.route.id])!=null&&A.shouldRevalidate)||I.hasClientLoader?_=!0:w.add($.route.id))}),w.size===0)return[];let T=Eze(t,o,"data");return _&&w.size>0&&T.searchParams.set("_routes",e.filter($=>w.has($.route.id)).map($=>$.route.id).join(",")),[T.pathname+T.search]},[o,a,r,n,c,e,t,s]),m=U.useMemo(()=>Cze(u,n),[u,n]),v=Rze(u);return U.createElement(U.Fragment,null,p.map(w=>U.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),m.map(w=>U.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),v.map(({key:w,link:_})=>U.createElement("link",{key:w,nonce:i.nonce,..._})))}function Dze(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var pwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pwe&&(window.__reactRouterVersion="7.9.1")}catch{}function Fze({basename:t,children:e,window:i}){let r=U.useRef();r.current==null&&(r.current=EFe({window:i,v5Compat:!0}));let n=r.current,[s,o]=U.useState({action:n.action,location:n.location}),a=U.useCallback(l=>{U.startTransition(()=>o(l))},[o]);return U.useLayoutEffect(()=>n.listen(a),[n,a]),U.createElement(fze,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:n})}var fwe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sc=U.forwardRef(function({onClick:e,discover:i="render",prefetch:r="none",relative:n,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p,...m},v){let{basename:w}=U.useContext(qh),_=typeof c=="string"&&fwe.test(c),T,$=!1;if(typeof c=="string"&&_&&(T=c,pwe))try{let Y=new URL(window.location.href),J=c.startsWith("//")?new URL(Y.protocol+c):new URL(c),Q=ry(J.pathname,w);J.origin===Y.origin&&Q!=null?c=Q+J.search+J.hash:$=!0}catch{Dh(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=JFe(c,{relative:n}),[A,k,R]=Oze(r,m),F=Bze(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:n,viewTransition:p});function B(Y){e&&e(Y),Y.defaultPrevented||F(Y)}let q=U.createElement("a",{...m,...R,href:T||I,onClick:$||s?e:B,ref:Dze(v,k),target:l,"data-discover":!_&&i==="render"?"true":void 0});return A&&!_?U.createElement(U.Fragment,null,q,U.createElement(Lze,{page:I})):q});sc.displayName="Link";var zze=U.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:r="",end:n=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let p=ek(o,{relative:c.relative}),m=yy(),v=U.useContext(fj),{navigator:w,basename:_}=U.useContext(qh),T=v!=null&&Wze(p)&&a===!0,$=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,I=m.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(I=I.toLowerCase(),A=A?A.toLowerCase():null,$=$.toLowerCase()),A&&_&&(A=ry(A,_)||A);const k=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let R=I===$||!n&&I.startsWith($)&&I.charAt(k)==="/",F=A!=null&&(A===$||!n&&A.startsWith($)&&A.charAt($.length)==="/"),B={isActive:R,isPending:F,isTransitioning:T},q=R?e:void 0,Y;typeof r=="function"?Y=r(B):Y=[r,R?"active":null,F?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let J=typeof s=="function"?s(B):s;return U.createElement(sc,{...c,"aria-current":q,className:Y,ref:u,style:J,to:o,viewTransition:a},typeof l=="function"?l(B):l)});zze.displayName="NavLink";var jze=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:r,replace:n,state:s,method:o=I3,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:p,...m},v)=>{let w=qze(),_=Hze(a,{relative:c}),T=o.toLowerCase()==="get"?"get":"post",$=typeof a=="string"&&fwe.test(a),I=A=>{if(l&&l(A),A.defaultPrevented)return;A.preventDefault();let k=A.nativeEvent.submitter,R=(k==null?void 0:k.getAttribute("formmethod"))||o;w(k||A.currentTarget,{fetcherKey:e,method:R,navigate:i,replace:n,state:s,relative:c,preventScrollReset:u,viewTransition:p})};return U.createElement("form",{ref:v,method:T,action:_,onSubmit:r?l:I,...m,"data-discover":!$&&t==="render"?"true":void 0})});jze.displayName="Form";function Uze(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mwe(t){let e=U.useContext(TT);return sn(e,Uze(t)),e}function Bze(t,{target:e,replace:i,state:r,preventScrollReset:n,relative:s,viewTransition:o}={}){let a=mj(),l=yy(),c=ek(t,{relative:s});return U.useCallback(u=>{if(wze(u,e)){u.preventDefault();let p=i!==void 0?i:kA(l)===kA(c);a(t,{replace:p,state:r,preventScrollReset:n,relative:s,viewTransition:o})}},[l,a,c,i,r,e,t,n,s,o])}var Vze=0,Gze=()=>`__${String(++Vze)}__`;function qze(){let{router:t}=mwe("useSubmit"),{basename:e}=U.useContext(qh),i=uze();return U.useCallback(async(r,n={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=Sze(r,e);if(n.navigate===!1){let u=n.fetcherKey||Gze();await t.fetch(u,i,n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,flushSync:n.flushSync})}else await t.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,i])}function Hze(t,{relative:e}={}){let{basename:i}=U.useContext(qh),r=U.useContext(Hh);sn(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),s={...ek(t||".",{relative:e})},o=yy();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(s.pathname=s.pathname==="/"?i:Hm([i,s.pathname])),kA(s)}function Wze(t,{relative:e}={}){let i=U.useContext(swe);sn(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mwe("useViewTransitionState"),n=ek(t,{relative:e});if(!i.isTransitioning)return!1;let s=ry(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=ry(i.nextLocation.pathname,r)||i.nextLocation.pathname;return SD(n.pathname,o)!=null||SD(n.pathname,s)!=null}var ywe=ewe();const gj=U.createContext(),Zze=({children:t})=>{const[e,i]=U.useState(null),r=U.useCallback((s,o)=>{i({type:s,message:o}),setTimeout(()=>i(null),3e3)},[]),n=()=>i(null);return H.jsxs(gj.Provider,{value:{alert:e,showAlert:r,hideAlert:n},children:[t,e&&H.jsxs("div",{className:`alert alert-${e.type} fixed top-4 right-4 w-auto shadow-lg z-50`,children:[H.jsx("span",{children:e.message}),H.jsx("button",{onClick:n,className:"btn btn-sm btn-ghost ml-auto",type:"button",children:""})]})]})},gy=U.createContext(),Yze=({children:t})=>{const[e,i]=U.useState(null),[r,n]=U.useState(!0),{showAlert:s}=U.useContext(gj),o=mj(),a=async u=>{try{const p=await fetch("https://reiseplaner-backend.onrender.com/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u),credentials:"include"}),m=await p.json();if(!p.ok)throw new Error(m.error||"Signup failed");s("success",`Signup erfolgreich, ${m.data.username}! Bitte logge dich ein.`),o("/login")}catch(p){throw s("error",p.message),console.error(p),p}},l=async u=>{try{const p=await fetch("https://reiseplaner-backend.onrender.com/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u),credentials:"include"}),m=await p.json();if(!p.ok)throw new Error(m.error||"Login failed");i(m.data),s("success",`Login erfolgreich, ${m.data.username}. Rolle: ${m.data.role}`),o("/")}catch(p){throw s("error",p.message),console.error(p),p}},c=async()=>{try{const u=await fetch("https://reiseplaner-backend.onrender.com/users/logout",{method:"DELETE",credentials:"include"}),p=await u.json();if(!u.ok)throw new Error(p.error||"Logout failed");i(null),o("/"),s("info",p.message||"Logout erfolgreich")}catch(u){throw s("error",u.message),console.error(u),u}};return U.useEffect(()=>{(async()=>{try{const p=await fetch("https://reiseplaner-backend.onrender.com/users/me",{method:"GET",credentials:"include"}),m=await p.json();p.ok&&i(m.data)}catch(p){console.warn("Session refresh failed",p)}finally{n(!1)}})()},[]),H.jsx(gy.Provider,{value:{user:e,setUser:i,signup:a,login:l,logout:c,isRefreshing:r},children:t})},Kze=()=>{const{login:t}=U.useContext(gy);return H.jsxs("div",{className:"flex items-center gap-6 px-4",children:[H.jsx(sc,{to:"/travelplannerpage",className:"btn btn-ghost btn-sm text-lg",children:"Eine Reise planen"}),H.jsxs("nav",{className:"flex gap-4",children:[H.jsx(sc,{to:"/signup",className:"btn btn-ghost btn-sm text-lg",children:"Sign Up"}),H.jsx(sc,{to:"/login",className:"btn btn-ghost btn-sm text-lg",children:"Login"})]})]})},Jze=()=>{const{user:t,logout:e}=U.useContext(gy),i=new Date().getHours();let r="Hallo";return i<12?r="Guten Morgen":i<18?r="Guten Tag":r="Guten Abend",H.jsxs("div",{className:"flex items-center gap-6 px-4",children:[H.jsxs("nav",{className:"flex gap-4",children:[H.jsx(sc,{to:"/travelplannerpage",className:"btn btn-ghost btn-sm text-lg",children:"Eine Reise planen"}),H.jsx(sc,{to:"/travelstepperpage",className:"btn btn-ghost btn-sm text-lg",children:"Eine Reise erstellen"}),H.jsx(sc,{to:"/travelstable",className:"btn btn-ghost btn-sm text-lg",children:"Geplante Reisen"}),H.jsx(sc,{to:"/generalphotogallery",className:"btn btn-ghost btn-sm text-lg",children:"Fotogalerie"}),t.role==="admin"&&H.jsx(sc,{to:"/dashboard",className:"btn btn-ghost btn-sm text-lg",children:"Dashboard"}),H.jsx("button",{onClick:e,className:"btn btn-neutral btn-sm text-lg",children:"Logout"})]}),H.jsxs("span",{className:"hidden md:block",children:[r,", ",t.username]})]})};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xze=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qze=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),moe=t=>{const e=Qze(t);return e.charAt(0).toUpperCase()+e.slice(1)},gwe=(...t)=>t.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),eje=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tje={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ije=U.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:n="",children:s,iconNode:o,...a},l)=>U.createElement("svg",{ref:l,...tje,width:e,height:e,stroke:t,strokeWidth:r?Number(i)*24/Number(e):i,className:gwe("lucide",n),...!s&&!eje(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>U.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=(t,e)=>{const i=U.forwardRef(({className:r,...n},s)=>U.createElement(ije,{ref:s,iconNode:e,className:gwe(`lucide-${Xze(moe(t))}`,`lucide-${t}`,r),...n}));return i.displayName=moe(t),i};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rje=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nje=e1("arrow-left",rje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sje=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],VB=e1("chart-column",sje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oje=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aje=e1("earth",oje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lje=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],P3=e1("map",lje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cje=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uje=e1("trash-2",cje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hje=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dje=e1("user-cog",hje);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pje=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yoe=e1("users",pje),vwe=U.createContext(),fje=({children:t})=>{const[e,i]=U.useState("leaflet"),r=()=>{i(n=>n==="leaflet"?"arc":"leaflet")};return H.jsx(vwe.Provider,{value:{mapType:e,toggleMap:r},children:t})},tk=()=>U.useContext(vwe),mje=()=>{const{user:t}=U.useContext(gy),{mapType:e,toggleMap:i}=tk();return H.jsxs("header",{className:"navbar bg-base-100 shadow-sm px-4 py-2 min-h-[48px]",children:[H.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[H.jsx(sc,{to:"/",className:"btn btn-ghost text-xl",children:"Reiseplaner"}),H.jsx("button",{className:"btn btn-sm btn-primary flex items-center gap-2",onClick:i,children:e==="leaflet"?H.jsxs(H.Fragment,{children:[H.jsx(aje,{size:16})," ArcGISMap"]}):H.jsxs(H.Fragment,{children:[H.jsx(P3,{size:16})," Leaflet"]})})]}),H.jsx("div",{className:"flex gap-2 items-center",children:t?H.jsx(Jze,{}):H.jsx(Kze,{})})]})},yje=()=>H.jsx("footer",{className:"footer sm:footer-horizontal footer-center bg-base-300 bg-opacity-60 text-base-content p-2",children:H.jsx("aside",{children:H.jsxs("p",{className:"text-sm",children:["Copyright  ",new Date().getFullYear()," - All right reserved by Dmytro Ovcharenko"]})})}),gje=()=>H.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] min-h-screen",children:[H.jsx(mje,{}),H.jsx("main",{className:"h-full",children:H.jsx(uwe,{})}),H.jsx(yje,{})]}),RI=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const n=t[r];if(typeof n=="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(typeof n=="object")for(const s in n)n[s]&&e.push(s)}const i=e.join(" ");return e.length=0,i};let OA=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const vje=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},bje=(t,e,i)=>{const r=wje(e).subscribe;return r(n=>{n.some(o=>vje(t,o.target))&&i()})},GB={},wje=t=>{const e=t.join(","),i=GB[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),GB[e]=void 0)})};return GB[e]=s,s},_je=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return null;i=o.host}return null},xje=(t,e,i)=>{const r=_je(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},gn=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},sG=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},Sje="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),Eje=new Set(Sje),ED="en",Tje={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},$je=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return qB[n]??(qB[n]=bwe(t,r)),await qB[n]},qB={},bwe=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===ED?{}:await bwe(ED,e)},wwe=t=>{var i;const e=xje(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||ED);return{lang:e,t9nLocale:_we(e)}},_we=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=Tje[n]??n,Eje.has(n)?n:i?_we(r):ED},Mje=(t,e,i,r)=>{let n;const s=()=>Cje(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),bje(t,["lang"],s)},Cje=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=wwe(t),s=`${e}/${i}/t9n`,a=i===null?{}:await $je(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},Ije=t=>t.replace(Aje,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),Aje=/[A-Z]+(?![a-z])|[A-Z]/gu,Pje=(t,e)=>{const i=e/kje;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},kje=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const k3=globalThis,TJ=k3.ShadowRoot&&(k3.ShadyCSS===void 0||k3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,$J=Symbol(),goe=new WeakMap;let xwe=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==$J)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(TJ&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=goe.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&goe.set(i,e))}return e}toString(){return this.cssText}};const Oje=t=>new xwe(typeof t=="string"?t:t+"",void 0,$J),Xi=(t,...e)=>{const i=t.length===1?t[0]:e.reduce(((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return new xwe(i,t,$J)},Lje=(t,e)=>{if(TJ)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(const i of e){const r=document.createElement("style"),n=k3.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},voe=TJ?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return Oje(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Rje,defineProperty:Nje,getOwnPropertyDescriptor:Dje,getOwnPropertyNames:Fje,getOwnPropertySymbols:zje,getPrototypeOf:jje}=Object,Bv=globalThis,boe=Bv.trustedTypes,Uje=boe?boe.emptyScript:"",HB=Bv.reactiveElementPolyfillSupport,NI=(t,e)=>t,oG={toAttribute(t,e){switch(e){case Boolean:t=t?Uje:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},vj=(t,e)=>!Rje(t,e),woe={attribute:!0,type:String,converter:oG,reflect:!1,useDefault:!1,hasChanged:vj};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Bv.litPropertyMetadata??(Bv.litPropertyMetadata=new WeakMap);let Wx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=woe){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&Nje(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=Dje(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){const a=n==null?void 0:n.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??woe}static _$Ei(){if(this.hasOwnProperty(NI("elementProperties")))return;const e=jje(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(NI("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(NI("properties"))){const i=this.properties,r=[...Fje(i),...zje(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(voe(n))}else e!==void 0&&i.push(voe(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((i=>this.enableUpdating=i)),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach((i=>i(this)))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Lje(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)}))}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach((i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)}))}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:oG).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s,o;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const a=r.getPropertyOptions(n),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:oG;this._$Em=n;const c=l.fromAttribute(i,a.type);this[n]=c??((o=this._$Ej)==null?void 0:o.get(n))??c,this._$Em=null}}requestUpdate(e,i,r){var n;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??vj)(o,i)||r.useDefault&&r.reflect&&o===((n=this._$Ej)==null?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n){const{wrapped:a}=o,l=this[s];a!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach((n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)})),this.update(i)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach((r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((i=>this._$ET(i,this[i])))),this._$EM()}updated(e){}firstUpdated(e){}};Wx.elementStyles=[],Wx.shadowRootOptions={mode:"open"},Wx[NI("elementProperties")]=new Map,Wx[NI("finalized")]=new Map,HB==null||HB({ReactiveElement:Wx}),(Bv.reactiveElementVersions??(Bv.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const DI=globalThis,TD=DI.trustedTypes,_oe=TD?TD.createPolicy("lit-html",{createHTML:t=>t}):void 0,Swe="$lit$",pv=`lit$${Math.random().toFixed(9).slice(2)}$`,Ewe="?"+pv,Bje=`<${Ewe}>`,M_=document,LA=()=>M_.createComment(""),RA=t=>t===null||typeof t!="object"&&typeof t!="function",MJ=Array.isArray,Vje=t=>MJ(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",WB=`[ 	
\f\r]`,gM=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xoe=/-->/g,Soe=/>/g,ub=RegExp(`>|${WB}(?:([^\\s"'>=/]+)(${WB}*=${WB}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Eoe=/'/g,Toe=/"/g,Twe=/^(?:script|style|textarea|title)$/i,$we=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),Pe=$we(1),NA=$we(2),cc=Symbol.for("lit-noChange"),Ye=Symbol.for("lit-nothing"),$oe=new WeakMap,Nw=M_.createTreeWalker(M_,129);function Mwe(t,e){if(!MJ(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return _oe!==void 0?_oe.createHTML(e):e}const Gje=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=gM;for(let a=0;a<i;a++){const l=t[a];let c,u,p=-1,m=0;for(;m<l.length&&(o.lastIndex=m,u=o.exec(l),u!==null);)m=o.lastIndex,o===gM?u[1]==="!--"?o=xoe:u[1]!==void 0?o=Soe:u[2]!==void 0?(Twe.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=ub):u[3]!==void 0&&(o=ub):o===ub?u[0]===">"?(o=n??gM,p=-1):u[1]===void 0?p=-2:(p=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?ub:u[3]==='"'?Toe:Eoe):o===Toe||o===Eoe?o=ub:o===xoe||o===Soe?o=gM:(o=ub,n=void 0);const v=o===ub&&t[a+1].startsWith("/>")?" ":"";s+=o===gM?l+Bje:p>=0?(r.push(c),l.slice(0,p)+Swe+l.slice(p)+pv+v):l+pv+(p===-2?a:v)}return[Mwe(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let aG=class Cwe{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=Gje(e,i);if(this.el=Cwe.createElement(c,r),Nw.currentNode=this.el.content,i===2||i===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(n=Nw.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const p of n.getAttributeNames())if(p.endsWith(Swe)){const m=u[o++],v=n.getAttribute(p).split(pv),w=/([.?@])?(.*)/.exec(m);l.push({type:1,index:s,name:w[2],strings:v,ctor:w[1]==="."?Hje:w[1]==="?"?Wje:w[1]==="@"?Zje:wj}),n.removeAttribute(p)}else p.startsWith(pv)&&(l.push({type:6,index:s}),n.removeAttribute(p));if(Twe.test(n.tagName)){const p=n.textContent.split(pv),m=p.length-1;if(m>0){n.textContent=TD?TD.emptyScript:"";for(let v=0;v<m;v++)n.append(p[v],LA()),Nw.nextNode(),l.push({type:2,index:++s});n.append(p[m],LA())}}}else if(n.nodeType===8)if(n.data===Ewe)l.push({type:2,index:s});else{let p=-1;for(;(p=n.data.indexOf(pv,p+1))!==-1;)l.push({type:7,index:s}),p+=pv.length-1}s++}}static createElement(e,i){const r=M_.createElement("template");return r.innerHTML=e,r}};function zE(t,e,i=t,r){var o,a;if(e===cc)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=RA(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=zE(t,n._$AS(t,e.values),n,r)),e}let qje=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??M_).importNode(i,!0);Nw.currentNode=n;let s=Nw.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new bj(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new Yje(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=Nw.nextNode(),o++)}return Nw.currentNode=M_,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},bj=class Iwe{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=Ye,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=zE(this,e,i),RA(e)?e===Ye||e==null||e===""?(this._$AH!==Ye&&this._$AR(),this._$AH=Ye):e!==this._$AH&&e!==cc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Vje(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ye&&RA(this._$AH)?this._$AA.nextSibling.data=e:this.T(M_.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=aG.createElement(Mwe(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new qje(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=$oe.get(e.strings);return i===void 0&&$oe.set(e.strings,i=new aG(e)),i}k(e){MJ(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new Iwe(this.O(LA()),this.O(LA()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},wj=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=Ye,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ye}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=zE(this,e,i,0),o=!RA(e)||e!==this._$AH&&e!==cc,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=zE(this,a[r+l],i,l),c===cc&&(c=this._$AH[l]),o||(o=!RA(c)||c!==this._$AH[l]),c===Ye?e=Ye:e!==Ye&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===Ye?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Hje=class extends wj{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ye?void 0:e}},Wje=class extends wj{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ye)}},Zje=class extends wj{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=zE(this,e,i,0)??Ye)===cc)return;const r=this._$AH,n=e===Ye&&r!==Ye||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Ye&&(r===Ye||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},Yje=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){zE(this,e)}};const Kje={I:bj},ZB=DI.litHtmlPolyfillSupport;ZB==null||ZB(aG,bj),(DI.litHtmlVersions??(DI.litHtmlVersions=[])).push("3.3.1");const Awe=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new bj(e.insertBefore(LA(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const n_=globalThis;let Wm=class extends Wx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Awe(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return cc}};var Nbe;Wm._$litElement$=!0,Wm.finalized=!0,(Nbe=n_.litElementHydrateSupport)==null||Nbe.call(n_,{LitElement:Wm});const YB=n_.litElementPolyfillSupport;YB==null||YB({LitElement:Wm});(n_.litElementVersions??(n_.litElementVersions=[])).push("4.2.1");const CJ=Symbol.for("controller"),Jje=t=>typeof t=="object"&&t!==null&&(CJ in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),Xje=t=>typeof(t==null?void 0:t.then)=="function",Qje=t=>t.M.length;let gC;const HS=t=>{gC!==t&&(gC=t,queueMicrotask(()=>gC===t?gC=void 0:0))},MT=t=>gC;let Ib=[];const Pwe=t=>{if(t===void 0){Ib=[];return}const e=Ib.indexOf(t);Ib=e===-1?[...Ib,t]:Ib.slice(0,e+1),queueMicrotask(()=>Ib=[])},kwe=()=>Ib;let WS;const e4e=t=>{WS!==t&&(WS=t,queueMicrotask(()=>WS===t?WS=void 0:0))},t4e=()=>{const t=WS;return WS=void 0,t},i4e=async(t,e)=>{const i=IJ(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},r4e=async t=>{const e=IJ(t);return await e.ready,e},IJ=t=>{const i=MT().manager.X(t);if(i!==void 0)return i;if(Jje(t))return t;const r=t4e();if(r!==void 0)return r};let lG=!1;const n4e=t=>{lG=!0;try{return t()}finally{lG=!1}},s4e=(t,e,i)=>{const r=Object.keys(t),n=r.length;Mv===void 0&&queueMicrotask(AJ),Mv??(Mv=new Map);let s=Mv.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Mv.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>gn(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Mv;const AJ=()=>{Mv==null||Mv.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Mv=void 0},PJ=(t,e,i)=>{const r=t.manager;return r.V!==Ye&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>gn(e,void 0,i===s?n:void 0)),i},kJ=(t=[MT(),...kwe()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>s4e(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){PJ(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},OJ=(t="",e={},i=MT())=>{const r={emit:n=>{t===""&&AJ();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&kJ(void 0,n=>t=n.key,r),r},jE=OJ.bind(null,"");var Owe;Owe=CJ;var j2,U2,Yw,B2,V2,G2,q2,H2,xv,Kw,Qa,Ud,Cm,W2,O3,Dbe;let Lwe=(Dbe=class{constructor(e){pt(this,W2);pt(this,j2);pt(this,U2);pt(this,Yw);pt(this,B2);pt(this,V2);pt(this,G2);pt(this,q2);pt(this,H2);pt(this,xv);pt(this,Kw);pt(this,Qa);pt(this,Ud);pt(this,Cm);nt(this,j2,[]),nt(this,U2,[]),nt(this,Yw,[]),nt(this,B2,[]),nt(this,V2,[]),nt(this,G2,[]),nt(this,q2,[]),nt(this,H2,[]),nt(this,xv,[]),nt(this,Kw,!1),this.P=new OA,this.connectedCalled=!1,this.loadedCalled=!1,this[Owe]=!0,nt(this,Cm,[]);const i=this,r=e??MT();nt(i,Qa,r),i.ready=i.P.promise,nt(i,Ud,Coe(i)),i.component=r,me(i,Qa).addController(i),me(i,Qa).manager===void 0||(Pwe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=me(this,Qa);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),me(e,Kw)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return me(this,Ud)}set exports(e){const i=me(this,Ud);i!==e&&(nt(this,Ud,e),me(this,Cm).forEach(gn),this.connectedCalled&&this.O!==!1&&me(this,Qa).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){nt(this,Ud,i?Coe(e):e),me(this,Cm).forEach(gn)}watchExports(e){const i=()=>e(me(this,Ud));return me(this,Cm).push(i),()=>void me(this,Cm).splice(me(this,Cm).indexOf(i),1)}get use(){return HS(me(this,Qa)),i4e}get useRef(){return HS(me(this,Qa)),r4e}get useRefSync(){return HS(me(this,Qa)),IJ}controllerRemoved(){me(this,Qa).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){me(this,j2).push(e)}onDisconnected(e){me(this,U2).push(e)}onLoad(e){me(this,Yw).push(e)}onLoaded(e){me(this,B2).push(e)}onUpdate(e){me(this,V2).push(e)}onUpdated(e){me(this,G2).push(e)}onDestroy(e){me(this,q2).push(e)}onLifecycle(e){me(this,H2).push(e),this.connectedCalled&&me(this,Qa).el.isConnected&&si(this,W2,O3).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&gn(e.hostConnected,e),me(e,j2).forEach(gn),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&gn(e.hostDisconnected,e),me(e,U2).forEach(gn),me(e,xv).forEach(gn),nt(e,xv,[])}async triggerLoad(){if(me(this,Kw))return;nt(this,Kw,!0);const e=this;e.hostLoad&&await sG(e.hostLoad,e),me(this,Yw).length>0&&await Promise.allSettled(me(this,Yw).map(sG)),this.P.resolve(me(this,Ud))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&gn(this.hostLoaded,this),me(this,B2).forEach(gn),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&gn(this.hostUpdate,this,e),me(this,V2).forEach(Moe,e)}triggerUpdated(e){this.hostUpdated&&gn(this.hostUpdated,this,e),me(this,G2).forEach(Moe,e)}triggerDestroy(){this.hostDestroy&&gn(this.hostDestroy,this),me(this,q2).forEach(gn)}triggerLifecycle(){this.hostLifecycle&&si(this,W2,O3).call(this,()=>this.hostLifecycle()),me(this,H2).forEach(si(this,W2,O3),this)}},j2=new WeakMap,U2=new WeakMap,Yw=new WeakMap,B2=new WeakMap,V2=new WeakMap,G2=new WeakMap,q2=new WeakMap,H2=new WeakMap,xv=new WeakMap,Kw=new WeakMap,Qa=new WeakMap,Ud=new WeakMap,Cm=new WeakMap,W2=new WeakSet,O3=function(e){HS(me(this,Qa));const i=gn(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?me(this,xv).push(n):typeof n=="object"&&typeof n.remove=="function"&&me(this,xv).push(n.remove)})},Dbe);function Moe(t){gn(t,void 0,this)}const LJ=Lwe,Coe=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},o4e=1,a4e=2,l4e=4,c4e=8,u4e=16,h4e=32,d4e=64,Rwe=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},C_={};function Nwe(){}const L3=Object.defineProperty,p4e=globalThis.HTMLElement??Nwe;var el,Im,Z2,UP,cG,Y2;let bjt=(Y2=class extends p4e{constructor(){var n,s;super();pt(this,UP);pt(this,el);pt(this,Im);pt(this,Z2);nt(this,Im,{}),nt(this,Z2,[]),this.I=new OA,this.H=new OA,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(me(i,Im)[o]=i[o],delete i[o])}),r.A?si(s=i,UP,cG).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,si(l=i,UP,cG).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])L3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return me(this,Im)[i]},set(r){me(this,Im)[i]=r}});for(const i of this.E??[])L3(this.prototype,i,{async value(...r){return me(this,el)||await this.H.promise,await me(this,el)[i](...r)},configurable:!0});for(const i of this.D??[])L3(this.prototype,i,{value(...r){return me(this,el)[i](...r)},configurable:!0})}get manager(){var i;return(i=me(this,el))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=me(this,el))==null||s.attributeChangedCallback(i,r,n),me(this,el)||me(this,Z2).push(i)}connectedCallback(){var i,r;me(this,el)?(r=(i=me(this,el)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=Rwe(this))}disconnectedCallback(){var i,r;(r=(i=me(this,el))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=me(this,el))==null||i.requestUpdate()}},el=new WeakMap,Im=new WeakMap,Z2=new WeakMap,UP=new WeakSet,cG=function(i){var m;const r=this.constructor,n=r.L,s=me(this,Im),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);m4e(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,nt(this,el,u),nt(this,Im,u),me(this,Z2).forEach(v=>u.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(f4e,u);const p=this.isConnected;(p||this.G)&&((m=u.connectedCallback)==null||m.call(u),p||u.disconnectedCallback())},Y2.lumina=!0,Y2);function f4e([t,e]){this[t]=e}const m4e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},L3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qd={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},CT=t=>(...e)=>({_$litDirective$:t,values:e});let IT=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dwe=CT(class extends IT{constructor(t){var e;if(super(t),t.type!==qd.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((s=>s!==""))));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return cc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fwe="important",y4e=" !"+Fwe,g4e=CT(class extends IT{constructor(t){var e;if(super(t),t.type!==qd.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(y4e);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?Fwe:""):i[r]=n}}return cc}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:v4e}=Kje,zwe=t=>t.strings===void 0,Ioe=()=>document.createComment(""),vM=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(Ioe(),n),a=r.insertBefore(Ioe(),n);i=new v4e(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,l=a!==t;if(l){let c;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(c=t._$AU)!==a._$AU&&i._$AP(c)}if(o!==n||l){let c=i._$AA;for(;c!==o;){const u=c.nextSibling;r.insertBefore(c,n),c=u}}}return i},hb=(t,e,i=t)=>(t._$AI(e,i),t),b4e={},RJ=(t,e=b4e)=>t._$AH=e,w4e=t=>t._$AH,KB=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Aoe=CT(class extends IT{constructor(t){if(super(t),t.type!==qd.PROPERTY&&t.type!==qd.ATTRIBUTE&&t.type!==qd.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!zwe(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===cc||e===Ye)return e;const i=t.element,r=t.name;if(t.type===qd.PROPERTY){if(e===i[r])return cc}else if(t.type===qd.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return cc}else if(t.type===qd.ATTRIBUTE&&i.getAttribute(r)===e+"")return cc;return RJ(t),e}});var Am,dh,K2,Fbe;let _4e=(Fbe=class extends LJ{constructor(i){super(i);pt(this,Am);pt(this,dh);pt(this,K2);this.destroyed=!1,this.R=!1,this.V=Ye,this.T=[],nt(this,K2,new WeakMap),nt(this,dh,i),this.exports=void 0,this.hasDestroy=uG in i&&typeof i.destroy=="function",Wm.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${uG} prop.`)}me(this,Am)!==void 0&&clearTimeout(me(this,Am)),AJ();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():gn(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():gn(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):gn(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):gn(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),HS(i)}async destroy(){if(!this.destroyed){me(this,dh).el.isConnected&&(this.hasDestroy=!1,me(this,dh).el.remove()),nt(this,Am,void 0),this.destroyed=!0;for(const i of me(this,dh).M)"triggerDestroy"in i?i.triggerDestroy():gn(i.hostDestroy,i);me(this,dh).M.splice(0)}}U(){me(this,Am)!==void 0&&clearTimeout(me(this,Am)),!me(this,dh).el.isConnected&&!me(this,dh).autoDestroyDisabled&&nt(this,Am,Pje(()=>void me(this,dh).destroy(),x4e))}S(i,r){const n=this.T;this.V=Ye,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&me(this,K2).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return me(this,K2).get(i)}},Am=new WeakMap,dh=new WeakMap,K2=new WeakMap,Fbe),x4e=1e3;const uG="autoDestroyDisabled";var Jw,BP,VP,Xw,Bd,_T,jwe,Uwe,Yv;let ik=(Yv=class extends Wm{constructor(){super();pt(this,_T);pt(this,Jw);pt(this,BP);pt(this,VP);pt(this,Xw);pt(this,Bd);this.M=[],this.manager=new _4e(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=Yv.prototype.shouldUpdate;nt(i,Xw,(n==null?void 0:n.H)??new OA),i.I=(n==null?void 0:n.I)??new OA,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,nt(i,VP,i.enableUpdating),i.enableUpdating=Nwe,i.shouldUpdate!==o&&(nt(i,BP,i.shouldUpdate),i.shouldUpdate=o),s&&(nt(i,Jw,new Map),r.elementProperties.forEach((a,l)=>me(i,Jw).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===C_;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??vj,a={attribute:n&o4e&&typeof i=="string"?Ije(i):!1,reflect:!!(n&a4e),type:n&l4e?Boolean:n&c4e?Number:void 0,state:!!(n&u4e),readOnly:!!(n&h4e),noAccessor:!!(n&d4e),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,me(this,Jw).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,u;const l=this.manager;if(n.readOnly&&!lG&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((u=(c=me(this,Jw))==null?void 0:c.get(i))==null||u.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());nt(this,Bd,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>si(this,_T,Uwe).call(this).catch(o=>{me(this,Xw).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=me(this,Bd))==null||i.destroy(),nt(this,Bd,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===C_?this.el:this.el.attachShadow(n));if(i)return Wm.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=me(this,BP))==null?void 0:r.call(this,i))??!0}update(i){me(this,Bd)?si(this,_T,jwe).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await me(this,Xw).promise,this}addController(i){var r;this.M.push(i),!(CJ in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},Jw=new WeakMap,BP=new WeakMap,VP=new WeakMap,Xw=new WeakMap,Bd=new WeakMap,_T=new WeakSet,jwe=function(i){try{me(this,Bd).clear(),this.constructor.K.r(me(this,Bd),()=>LB(Yv.prototype,this,"update").call(this,i))}catch(r){throw me(this,Bd).clear(),r}},Uwe=async function(){var s,o;const i=this.el.G??Rwe(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(sG(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(uG)&&this.manager.U()),me(this,VP).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():gn(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),me(this,Xw).resolve()},Yv.lumina=!0,Yv);const S4e=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},Yd=t=>typeof t=="object"&&t!=null?Dwe(t):t,hG=Ye;let Cv;function ge(t){return typeof Cv[t]=="function"?Cv[t]=Cv[t](globalThis):Cv[t]}var zbe,jbe,Ube,Bbe;Cv=(zbe=globalThis.dojoConfig)!=null&&zbe.has||(jbe=globalThis.esriConfig)!=null&&jbe.has?{...(Ube=globalThis.dojoConfig)==null?void 0:Ube.has,...(Bbe=globalThis.esriConfig)==null?void 0:Bbe.has}:{},ge.add=(t,e,i,r)=>{(r||Cv[t]===void 0)&&(Cv[t]=e),i&&ge(t)},ge.cache=Cv,ge.add("big-integer-warning-enabled",!0),ge.add("esri-deprecation-warnings",!0),ge.add("esri-tests-disable-screenshots",!1),ge.add("esri-tests-use-full-window",!1),ge.add("esri-tests-post-to-influx",!0),ge.add("esri-cim-animations-enable-status","enabled"),ge.add("esri-cim-animations-spotlight",!1),ge.add("esri-cim-animations-freeze-time",!1),(()=>{var e;ge.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ge.add("host-browser",t),ge.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ge.add("dom",t),ge("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(ge.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ge.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ge.add("khtml",n.includes("Konqueror")?s:void 0),ge.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ge.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ge.add("webkit",!ge("wp")&&!ge("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ge.add("chrome",!ge("edge")&&!ge("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ge.add("android",!ge("wp")&&parseFloat(r.split("Android ")[1])||void 0),ge.add("safari",!n.includes("Safari")||ge("wp")||ge("chrome")||ge("android")||ge("edge")||ge("opr")?void 0:parseFloat(n.split("Version/")[1])),ge.add("mac",n.includes("Macintosh")),!ge("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));ge.add(o,l),ge.add("ios",l)}ge("webkit")||(!r.includes("Gecko")||ge("wp")||ge("khtml")||ge("edge")||ge.add("mozilla",s),ge("mozilla")&&ge.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ge.add("esri-mobile",e),i&&ge.add("esri-iPhone",i),ge.add("esri-geolocation",!!navigator.geolocation)}ge.add("esri-wasm","WebAssembly"in globalThis),ge.add("esri-performance-mode-frames-between-render",20),ge.add("esri-force-performance-mode",!1),ge.add("esri-shared-array-buffer",(()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e})),ge.add("wasm-simd",(()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))})),ge.add("esri-atomics","Atomics"in globalThis),ge.add("esri-workers","Worker"in globalThis),ge.add("web-feat:cache","caches"in globalThis),ge.add("esri-workers-arraybuffer-transfer",!ge("safari")||Number(ge("safari"))>=12),ge.add("workers-pool-size",8),ge.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ge.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ge.add("featurelayer-fast-triangulation-enabled",!0),ge.add("featurelayer-animation-enabled",!0),ge.add("featurelayer-snapshot-enabled",!0),ge.add("featurelayer-snapshot-initial-tolerance",0),ge.add("featurelayer-snapshot-point-min-threshold",8e4),ge.add("featurelayer-snapshot-point-max-threshold",4e5),ge.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ge.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ge.add("featurelayer-snapshot-polygon-min-threshold",1e3),ge.add("featurelayer-snapshot-polygon-max-threshold",2e3),ge.add("featurelayer-snapshot-polyline-min-threshold",1e3),ge.add("featurelayer-snapshot-polyline-max-threshold",2e3),ge.add("featurelayer-snapshot-max-vertex-count",25e4),ge.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),ge.add("featurelayer-snapshot-concurrency",4),ge.add("featurelayer-snapshot-coverage",.1),ge.add("featurelayer-query-max-depth",4),ge.add("featurelayer-query-pausing-enabled",!1),ge.add("featurelayer-query-tile-concurrency",4),ge.add("featurelayer-query-tile-max-features",6e5),ge.add("featurelayer-advanced-symbols",!1),ge.add("featurelayer-pbf",!0),ge.add("featurelayer-pbf-statistics",!1),ge.add("feature-layers-workers",!0),ge.add("feature-polyline-generalization-factor",1),ge.add("mapview-transitions-duration",200),ge.add("mapview-essential-goto-duration",200),ge.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ge.add("mapserver-pbf-version-support",10.81),ge.add("mapservice-popup-identify-max-tolerance",20),ge.add("request-queue-concurrency-hosted",16),ge.add("request-queue-concurrency-non-hosted",4),ge.add("curve-densification-coarse-segments",128),ge.add("curve-densification-max-segments",2e3),ge.add("curve-densification-min-segments",3),ge.add("curve-densification-pixel-deviation",.5),ge.add("view-readyState-waiting-delay",1e3),ge.add("gradient-depth-bias",.01),ge.add("gradient-depth-epsilon",1e-8),ge.add("enable-feature:esri-compress-textures",!0),ge("host-webworker")||ge("host-browser")&&(ge.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),ge.add("esri-image-decode",(()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then((()=>{ge.add("esri-image-decode",!0,!0,!0)})).catch((()=>{ge.add("esri-image-decode",!1,!0,!0)}))}return!1})),ge.add("esri-url-encodes-apostrophe",(()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")})))})();function xjt(t){}function E4e(t){return()=>t}function Sjt(t){return t}var sl;let NJ=(sl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*sl._m}getInt(){return this._seed=(sl._a*this._seed+sl._c)%sl._m,this._seed}getFloat(){return this.getInt()/(sl._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/sl._m*r}},sl._m=2147483647,sl._a=48271,sl._c=0,sl);const T4e=1.5,Ejt=1/T4e,Tjt=.5;function $jt(t,e){return e?t.filter(((i,r,n)=>n.findIndex(e.bind(null,i))===r)):Array.from(new Set(t))}function $4e(t,e,i,r,n,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),s=Math.max(0,s<0?((r==null?void 0:r.length)??0)+s:s);const a=i-e;if(t==null||r==null||a!==s-n)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[n+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[n+l])return!1;return!0}function _j(t,e,i){return $4e(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function Poe(t,e,i){let r,n;return i?(r=e.filter((s=>!t.some((o=>i(o,s))))),n=t.filter((s=>!e.some((o=>i(o,s)))))):(r=e.filter((s=>!t.includes(s))),n=t.filter((s=>!e.includes(s)))),{added:r,removed:n}}function Mjt(t){return t&&typeof t.length=="number"}let Bwe=class{constructor(){this.last=0}};const Vwe=new Bwe;function dG(t,e,i,r){r=r||Vwe;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function M4e(t,e,i,r){const n=t.length,s=dG(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const Uu=new Set;function C4e(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;Uu.clear();for(let a=0;a<r;++a)Uu.add(e[a]);n=n||Vwe;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(Uu.has(t[a])&&(s==null||s.push(t[a]),Uu.delete(t[a]),t[a]=t[i-1],--i,--a,Uu.size===0||i===0))return Uu.clear(),i;for(let a=0;a<o;++a)if(Uu.has(t[a])&&(s==null||s.push(t[a]),Uu.delete(t[a]),t[a]=t[i-1],--i,--a,Uu.size===0||i===0))return Uu.clear(),i;return Uu.clear(),i}function Ijt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=DJ(i),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(n()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function DJ(t){return t?(koe.seed=t,()=>koe.getFloat()):Math.random}const koe=new NJ;function Gwe(t,e){if(!t)return t;const i=DJ(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function FJ(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function rs(t,e){return t!=null}const Ajt=[];function Pjt(t){return t instanceof ArrayBuffer}function zJ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function qwe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function Hwe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function jJ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Wwe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function UJ(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function Zwe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function I4e(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function xj(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function Sj(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Ywe(t){return"buffer"in t}const Kwe=1024;function kjt(t){return Sj(t)||xj(t)||UJ(t)||jJ(t)||zJ(t)}function Ojt(t){return Sj(t)||xj(t)}function Ljt(t){return Sj(t)?179769e303:I4e(t)?65504:xj(t)?3402823e32:Zwe(t)?4294967295:Wwe(t)?65535:qwe(t)||Hwe(t)?255:UJ(t)?2147483647:jJ(t)?32767:zJ(t)?127:256}const Rjt=-32768,Njt=-2147483648;function A4e(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function le(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Qwe(t);if(e!=null)return e;if($D(t))return t.clone();if(Jwe(t))return t.map(le);if(Xwe(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=le(t[r]);return i}function pG(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=Qwe(t);if(e!=null)return e;if(Jwe(t)){let r=!0;const n=t.map((s=>{const o=pG(s);return s!=null&&o==null&&(r=!1),o}));return r?n:null}if($D(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(Xwe(t))return null;const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],s=pG(n);if(n!=null&&s==null)return null;i[r]=s}return i}function $D(t){return typeof t.clone=="function"}function Jwe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Xwe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Ooe(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Qwe(t){if(zJ(t)||qwe(t)||Hwe(t)||jJ(t)||Wwe(t)||UJ(t)||Zwe(t)||xj(t)||Sj(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,le(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(le(i));return e}return null}function BJ(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function e_e(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&_j(t,e):t instanceof Set?e instanceof Set&&k4e(t,e):t instanceof Map?e instanceof Map&&O4e(t,e):!!Ooe(t)&&Ooe(e)&&P4e(t,e))}function P4e(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function k4e(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function O4e(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function VJ(t,e,i=!1){return i_e(t,e,i)}function rk(t,e){if(e!=null)return e[t]||t_e(t.split("."),!1,e)}function Vn(t,e,i){const r=t.split("."),n=r.pop(),s=t_e(r,!0,i);s&&n&&(s[n]=e)}function Loe(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(Loe(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(Loe(t[i],e[i]))return!0;return!1}return t!==e}function t_e(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function i_e(t,e,i){return e?Object.keys(e).reduce(((r,n)=>{if(n==="__proto__")return r;let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=le(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach((a=>{s.includes(a)||s.push(a)})):r[n]=o.slice())):o&&typeof o=="object"?r[n]=i_e(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)}),t||{}):t}var Vbe;const fi={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(Vbe=globalThis.location)==null?void 0:Vbe.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(VJ(fi,globalThis.esriConfig,!0),delete fi.has),!fi.assetsPath){{const t="4.33";fi.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}fi.defaultAssetsPath=fi.assetsPath}const L4e=/\{([^}]+)\}/g;function Roe(t){return t??""}function v0(t,e){return e?t.replaceAll(L4e,typeof e=="object"?(i,r)=>Roe(rk(r,e)):(i,r)=>Roe(e(r))):t}function Djt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(i=>e!=null&&e.includes(i)?i:`\\${i}`))}function r_e(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let Noe;function R4e(t){return Noe??(Noe=new DOMParser),Noe.parseFromString(t||"","text/html").body.innerText||""}function Fjt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function zjt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const Doe={info:0,warn:1,error:2,none:3};var ts;let Ce=(ts=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ts._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=ts.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ts._loggers.get(e)||new ts({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!ts._throttlingDisabled){const n=D4e(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=ts._tickCounter)return;this._loggedMessages[e].set(n,ts._tickCounter),ts._scheduleTickCounterIncrement()}for(const n of fi.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",N4e)}_matchLevel(e){const i=fi.log.level||"warn";return Doe[this._parentWithMember("level",i)]<=Doe[e]}static _scheduleTickCounterIncrement(){ts._tickCounterScheduled||(ts._tickCounterScheduled=!0,Promise.resolve().then((()=>{ts._tickCounter++,ts._tickCounterScheduled=!1})))}},ts._loggers=new Map,ts._tickCounter=0,ts._tickCounterScheduled=!1,ts._throttlingDisabled=!1,ts);function N4e(t,e,...i){console[t](`[${e}]`,...i)}function D4e(...t){return r_e(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const F4e={remove:()=>{}};function Ci(t){return t?{remove(){t&&(t(),t=void 0)}}:F4e}function n_e(t){t.forEach((e=>e==null?void 0:e.remove()))}function jjt(t){n_e(t),t.length=0}function t1(t){return Ci((()=>n_e(t)))}function Ujt(t){return Ci((()=>{var e;return(e=t())==null?void 0:e.remove()}))}function Bjt(t){return Ci((()=>t==null?void 0:t.abort()))}function Vjt(t){return Ci(t!=null?()=>t.destroy():void 0)}function z4e(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function Gjt(t){z4e(t)&&t.remove()}function qjt(t){return{[Symbol.dispose](){t.remove()}}}function Ra(t){return t.__accessor__??null}function j4e(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function R3(t,e,i){return i?MD(t,e,{policy:i,path:""}):MD(t,e,null)}function MD(t,e,i){return e?Object.keys(e).reduce(((r,n)=>{const s=n;if(s==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=le(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach((u=>{l.includes(u)||l.push(u)})));else if(c&&typeof c=="object")if(i){const u=i.path;i.path=o,r[s]=MD(l,c,i),i.path=u}else r[s]=MD(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r}),t||{}):t}function s_e(t){return Array.isArray(t)?t:t.split(".")}function Foe(t){return t.includes(",")?t.split(",").map((e=>e.trim())):[t.trim()]}function U4e(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Foe(i));return e}return Foe(t)}function o_e(t,e,i,r){const n=U4e(e);if(n.length!==1){const s=n.map((o=>r(t,o,i)));return t1(s)}return r(t,n[0],i)}const Vr={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let Ej=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const CD=new Ej,vC=[];let FI=CD;function It(t){FI.onAccessed(t)}let N3=!1,D3=!1;function jp(t,e,i){if(N3)return GJ(t,e,i);let r=null;return a_e(t),r=e.call(i),l_e(),r}function B4e(t,e){return jp(CD,t,e)}function GJ(t,e,i){const r=N3;N3=!0,a_e(t);let n=null;try{n=e.call(i)}catch(s){D3&&Ce.getLogger("esri.core.accessorSupport.tracking").error(s)}return l_e(),N3=r,n}function a_e(t){FI=t,vC.push(t)}function l_e(){const t=vC.length;if(t>1){const e=vC.pop();FI=vC[t-2],e.onTrackingEnd()}else if(t===1){const e=vC.pop();FI=CD,e.onTrackingEnd()}else FI=CD}function c_e(t,e){if(e.flags&Vr.DepTrackingInitialized)return;e.flags|=Vr.DepTrackingInitialized;const i=D3;D3=!1,e.flags&Vr.AutoTracked?GJ(e.trackingTarget,e.metadata.get,t):u_e(t,e),D3=i}const V4e=[];function u_e(t,e){e.flags&Vr.ExplicitlyTracking||(e.flags|=Vr.ExplicitlyTracking,GJ(e.trackingTarget,(()=>{const i=e.metadata.dependsOn||V4e;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=s_e(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=zoe(o,n[s],s!==n.length-1)}else zoe(t,r,!1)})),e.flags&=-129)}function zoe(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=Ra(t);if(n){const s=n.propertiesByName.get(r);s&&(It(s),c_e(t,s))}return i?t[r]:void 0}let G4e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){FJ(this._observers,this._observer)}},h_e=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return q4e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new G4e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const q4e=Ci();let AT=class extends h_e{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},H4e=class{constructor(e,i){this._observable=new AT,this._value=e,this._equalityFunction=i}get value(){return It(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function I_(t,e=e_e){return new H4e(t,e)}let nk=class extends Ej{constructor(e){super(new W4e(e)),this._observer&&joe.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&joe.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},W4e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Z4e}};const joe=new FinalizationRegistry((t=>{var e;(e=t.deref())==null||e.destroy()}));function Z4e(){}function Y4e(t,e){return I_(t,e)}function d_e(){return new AT}function K4e(t){return new nk(t)}function p_e(t){It(t)}function J4e(t,e){return jp(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const sk=S4e({defaultAssetPath:"https://js.arcgis.com/4.33/map-components/",hydratedAttribute:"hydrated"}),{customElement:ok,getAssetPath:X4e,setAssetPath:Qjt}=sk;sk.t=p_e;sk.o=d_e;sk.c=K4e;sk.r=J4e;function Tj(t){return Q4e(t)||f_e(t)}function Q4e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function f_e(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function PT(t,e,i){if(!Tj(t))throw new TypeError("target is not a Evented or EventTarget object");return f_e(t)?eUe(t,e,i):t.on(e,i)}function eUe(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Ci((()=>{for(const s of n)t.removeEventListener(s,i,r)}))}return t.addEventListener(e,i,r),Ci((()=>t.removeEventListener(e,i,r)))}function m_e(t,e,i){if(!Tj(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=PT(t,e,(n=>{r.remove(),i.call(t,n)}));return r}function ak(t,e){if(t==null)throw new Error(e??"value is None")}function Lr(t){return t==null||t.destroy(),null}function e4t(t){return t==null||t.dispose(),null}function Wr(t){return t==null||t.remove(),null}function UE(t){return t==null||t.abort(),null}function t4t(t){return t==null||t.release(),null}function tUe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function ID(t,e){let i;return t.some(((r,n)=>(i=e(r,n),i!=null))),i??void 0}function iUe(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Ci((()=>t.clearTimeout(r)))}}}const kT=iUe(globalThis);function rUe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((i,r)=>r===""?"$":(rk(r,e)??"").toString()))}let y_e=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&rUe(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ae=class g_e extends y_e{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return le(i)}catch{return"[object]"}})))}}catch(e){throw Ce.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new g_e(e.name,e.message,e.details)}};ae.prototype.type="error";function gr(t="Aborted"){return new ae("AbortError",t)}function Rr(t,e="Aborted"){if(_u(t))throw gr(e)}function lk(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function _u(t){const e=lk(t);return e!=null&&e.aborted}function Hd(t){if(io(t))throw t}function Uoe(t){if(!io(t))throw t}function Fh(t,e){const i=lk(t);if(i!=null){if(!i.aborted)return m_e(i,"abort",(()=>e()));e()}}function qJ(t,e){const i=lk(t);if(i!=null)return Rr(i),m_e(i,"abort",(()=>e(gr())))}function v_e(t,e){return lk(e)==null?t:new Promise(((i,r)=>{let n=Fh(e,(()=>r(gr())));const s=()=>{n=Wr(n)};t.then(s,s),t.then(i,r)}))}function io(t){return(t==null?void 0:t.name)==="AbortError"}async function DA(t){try{return await t}catch(e){if(!io(e))throw e;return}}async function Dw(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map((o=>t[o])),n=await Dw(r),s={};return i.map(((o,a)=>s[o]=n[a])),s}const e=t;return Promise.allSettled(e).then((i=>Array.from(e,((r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))))}async function nUe(t){return(await Promise.allSettled(t)).filter((e=>e.status==="fulfilled")).map((e=>e.value))}async function r4t(t){return(await Promise.allSettled(t)).filter((e=>e.status==="rejected")).map((e=>e.reason))}function HJ(t,e=void 0,i){const r=new AbortController;return Fh(i,(()=>r.abort())),new Promise(((n,s)=>{let o=setTimeout((()=>{o=0,n(e)}),t);Fh(r,(()=>{o&&(clearTimeout(o),s(gr()))}))}))}function n4t(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout((()=>{s=0,n==null||n.abort()}),e);const o=()=>r||new ae("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then((a=>{if(s===0)throw o();return clearTimeout(s),a}),(a=>{throw clearTimeout(s),s===0?o():a}))}function sUe(t,e){const i=new AbortController,r=setTimeout((()=>i.abort()),e);return Fh(t,(()=>{i.abort(),clearTimeout(r)})),{...t,signal:i.signal}}function ef(t){return t&&typeof t.then=="function"}function fG(t){return ef(t)?t:Promise.resolve(t)}function ck(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(gr()),s=gc();const m=s.promise;if(o){const v=o;o=null,v.abort()}return m}if(n=s||gc(),s=null,e>0){const m=new AbortController;i=fG(t(...l,m.signal));const v=i;HJ(e).then((()=>{i===v&&(s?m.abort():o=m)}))}else i=1,i=fG(t(...l));const c=()=>{const m=r;r=n=i=o=null,m!=null&&a(...m)},u=i,p=n;return u.then(c,c),u.then(p.resolve,p.reject),p.promise};return a}function gc(){let t,e;const i=new Promise(((n,s)=>{t=n,e=s})),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>kT.setTimeout((()=>r.reject(s)),n),r.promise=i,r}function s4t(t,e){e.then(t.resolve,t.reject)}async function Boe(t){await Promise.resolve(),Rr(t)}function oUe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function aUe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var Kv;let i1=(Kv=class{constructor(e,i,r,n=1,s=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Kv.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):aUe(i)&&i.acquire(...e),i}release(e){e&&!Kv.test.disabled&&(this._releaseFunction?this._releaseFunction(e):oUe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Kv.test={disabled:!1},Kv);function lUe(t){t.length=0}let Ta=class{constructor(e=50,i=50){this._pool=new i1(Array,void 0,lUe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return JB.acquire()}static release(e){return JB.release(e)}static prune(){JB.prune()}};const JB=new Ta(100);let b_e=class extends i1{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const AL=[];function AD(t){AL.push(t),AL.length===1&&queueMicrotask((()=>{const e=AL.slice();AL.length=0;for(const i of e)i()}))}let zI=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,i)=>e-i))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,i)=>e+i),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var mG;(function(t){const e=(s,o,a,l)=>{let c=o,u=o;const p=a>>>1,m=s[c-1];for(;u<=p;){u=c<<1,u<a&&l(s[u-1],s[u])<0&&++u;const v=s[u-1];if(l(v,m)<=0)break;s[c-1]=v,c=u}s[c-1]=m},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let u=a>>>1;u>o;u--)e(s,u,a,l);const c=o+1;for(let u=a-1;u>o;u--){const p=s[o];s[o]=s[u],s[u]=p,e(s,c,u,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let u=a>>>1;u>o;u--)e(s,u,a,l),yield;const c=o+1;for(let u=a-1;u>o;u--){const p=s[o];s[o]=s[u],s[u]=p,e(s,c,u,l),yield}}t.sort=r,t.iterableSort=n})(mG||(mG={}));const Voe=mG,cUe=1.5,uUe=1.1;let jI=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Bwe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Goe(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Goe(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=dG(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(dG(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=C4e(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){Voe.sort(this.data,0,this.length,e)}iterableSort(e){return Voe.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Goe(t){t.data.length>cUe*t.length&&(t.data.length=Math.floor(t.length*uUe))}function u4t(t){return t}function hUe(t){return 1e3*t}function h4t(t){return t}function d4t(t){return .001*t}let dUe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},pUe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},yG=0;const bM={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},gG=["prepare","preRender","render","postRender","update","finish"],vG=[],A_=new jI;let fUe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,w_e()}};function mUe(){s_!=null&&(cancelAnimationFrame(s_),s_=requestAnimationFrame(WJ))}function w_e(){s_==null&&(yG=performance.now(),s_=requestAnimationFrame(WJ))}const PD={frameTasks:A_,willDispatch:!1,clearFrameTasks:yUe,dispatch:x_e,executeFrameTasks:gUe,reschedule:mUe};function uk(t){const e=new pUe(t);return vG.push(e),PD.willDispatch||(PD.willDispatch=!0,AD(x_e)),e}function BE(t){const e=new dUe(t);return A_.push(e),w_e(),new fUe(e)}let s_=null;function yUe(t=!1){A_.forAll((e=>{e.removed=!0})),t&&__e()}function WJ(){const t=performance.now();s_=null,s_=A_.some((i=>!i.paused&&!i.removed))?requestAnimationFrame(WJ):null,PD.executeFrameTasks(t)}function gUe(t){const e=t-yG;yG=t;const i=1e3/60,r=Math.max(0,e-i);bM.time=t,bM.frameDuration=i-r;for(let n=0;n<gG.length;n++){const s=performance.now(),o=gG[n];A_.forAll((a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(bM.elapsedFrameTime=performance.now()-t,bM.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,bM)))})),_Ue[n].push(performance.now()-s)}__e(),xUe.push(performance.now()-t)}const PL=new jI;function __e(){A_.forAll((t=>{t.removed&&PL.push(t)})),A_.removeUnorderedMany(PL.data,PL.length),PL.clear()}function x_e(){for(;vG.length;){const t=vG.shift();t.isActive&&t.callback()}PD.willDispatch=!1}function vUe(t=1,e){const i=gc(),r=()=>{_u(e)?i.reject(gr()):t===0?i():(--t,AD((()=>r())))};return r(),i.promise}function bUe(t){return vUe(1,t)}async function wUe(t){await bUe(t),await new Promise((e=>requestAnimationFrame((()=>{t!=null&&t.aborted||e()}))))}const _Ue=gG.map((t=>new zI(t))),xUe=new zI("total");function S_e(t,e){for(const i of t.values())if(e(i))return!0;return!1}function kD(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function qoe(t,e){return e!=null&&t.add(e),t}function ZJ(t,e){const i=new Set;return kD(i,t),kD(i,e),i}function SUe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function y4t(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function g4t(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function EUe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function TUe(t,e){return EUe(ZJ(t,e),SUe(t,e))}let $Ue=0;function F3(){return++$Ue}function E_e(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=Ra(e);return j4e(r,i)?r.get(i):e[i]}function T_e(t,e,i){if(t==null)return t;const r=E_e(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:T_e(r,e,i+1)}function hk(t,e,i=0){return typeof e!="string"||e.includes(".")?T_e(t,s_e(e),i):E_e(e,t)}function pu(t,e){return hk(t,e)}function Hoe(t,e){return hk(e,t)!==void 0}const nc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let v2=!1;const OD=[];function $_e(t,e){let i=new nk(s),r=null,n=!1;function s(){if(!i||n)return;if(v2)return void I_e(s);const a=r;i.clear(),v2=!0,n=!0,r=jp(i,t),n=!1,v2=!1,e(r,a),A_e()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=jp(i,t),n=!1,Ci(o)}function M_e(t,e){let i=new nk(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=jp(i,t),r):null}return o(),Ci(s)}function C_e(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new nk((()=>{i||r||(r=!0,n?o():queueMicrotask(o))}));function o(){r=!1,s&&!i&&(v2?I_e(o):(s.clear(),v2=!0,i=!0,jp(s,t),i=!1,v2=!1,A_e()))}function a(){s&&(s.destroy(),s=null)}return i=!0,jp(s,t),i=!1,Ci(a)}function I_e(t){OD.includes(t)||OD.unshift(t)}function A_e(){for(;OD.length;)OD.pop()()}var UI;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(UI||(UI={}));var w_;let YJ=(w_=class{constructor(){this.uid=F3(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(UI.Untracked,e,i,r,n,s,BJ)}static acquireTracked(e,i,r,n){return this.pool.acquire(UI.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===UI.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=F3(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=F3(),this.removed=!0}},w_.pool=new b_e(w_),w_);const z3=new Ta,Zm=new Set;let LD;function RD(t){Zm.delete(t),Zm.add(t),LD||(LD=uk(IUe))}function MUe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function CUe(t){for(const e of Zm.values())e.target===t&&(e.removed=!0)}function IUe(){let t=10;for(;LD&&t--;){LD=null;const e=AUe(),i=z3.acquire();for(const r of e){const n=r.uid;MUe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Zm)r.removed&&(i.push(r),Zm.delete(r));for(const r of i)YJ.pool.release(r);z3.release(i),z3.release(e),bG.forEach((r=>r()))}}function AUe(){const t=z3.acquire();t.length=Zm.size;let e=0;for(const i of Zm)t[e]=i,++e;return Zm.clear(),t}const bG=new Set;function PUe(t){return bG.add(t),Ci((()=>bG.delete(t)))}function kUe(t,e,i){let r=o_e(t,e,i,((n,s,o)=>{let a,l,c=M_e((()=>hk(n,s)),((u,p)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===nc.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=YJ.acquireUntracked(u,o,p,n,s),l=a.uid),RD(a))}));return Ci((()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,RD(a)),a=null),r=c=null}))}));return r}function OUe(t,e,i){const r=o_e(t,e,i,((n,s,o)=>{let a=!1;return $_e((()=>hk(n,s)),((l,c)=>{n.__accessor__.lifecycle!==nc.DESTROYED?a||(a=!0,BJ(c,l)||o.call(n,l,c,s,n),a=!1):r.remove()}))}));return r}function LUe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==nc.DESTROYED?r?OUe(t,e,i):kUe(t,e,i):Ci()}function RUe(t,e,i){let r,n,s=M_e(t,((o,a)=>{r&&r.uid!==n?s.remove():(r||(r=YJ.acquireTracked(o,e,a,i),n=r.uid),RD(r))}));return Ci((()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,RD(r)),r=null),s=null}))}function NUe(t,e,i){let r=!1;return $_e(t,((n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)}))}function DUe(t,e,i=!1,r=e_e){return i?NUe(t,e,r):RUe(t,e,r)}function Woe(t){return S_e(Zm,(e=>e.oldValue===t))}function Je(t,e,i={}){return KJ(t,e,i,P_e)}function $o(t,e,i={}){return KJ(t,e,i,k_e)}function KJ(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(Wr(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=DUe(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function wu(t,e,i,r={}){let n=null,s=null,o=null;function a(){var u;n&&s&&(s.remove(),(u=r.onListenerRemove)==null||u.call(r,n),n=null,s=null)}function l(u){r.once&&r.once&&Wr(o),i(u)}const c=Je(t,((u,p)=>{var m;a(),Tj(u)&&(n=u,s=PT(u,e,l),(m=r.onListenerAdd)==null||m.call(r,u))}),{sync:r.sync,initial:!0});return o=Ci((()=>{c.remove(),a()})),o}function P_(t,e){return FUe(t,k_e,e)}function FUe(t,e,i){if(_u(i))return Promise.reject(gr());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=Wr(n)}return new Promise(((o,a)=>{n=t1([Fh(i,(()=>{s(),a(gr())})),KJ(t,(l=>{s(),o(l)}),{sync:!1,once:!0},e??P_e)])}))}function P_e(t){return!0}function k_e(t){return!!t}function v4t(t,e,i={}){let r=!1;const n=Je(t,((s,o)=>{r||e(s,o)}),i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const Up={sync:!0},rn={initial:!0},Sa={sync:!0,initial:!0},dk=t=>(...e)=>{const i=kwe(),r=new t(...e),n=r.exports;Pwe(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),e4e(r);const o=[r.component,...i].reverse();return kJ(o,a=>a===void 0?void 0:zUe(r,a,n),n)},zUe=(t,{host:e,key:i,isReactive:r},n)=>{var p;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const m=t.component.manager;a&&m.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&m.W(t,w)}})}t.O=r?void 0:i}const u=(p=t.component.constructor.elementProperties.get(i))==null?void 0:p.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(u?n4e(()=>{s[i]=t.exports}):s[i]=t.exports)})};function jUe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function b4t(t,e){for(const i of t.values())if(e(i))return i;return null}function r1(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function w4t(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const o_=()=>Ce.getLogger("esri.core.accessorSupport.ensureTypes");function UUe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(o_().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function BUe(t){return t==null?t:!!t}function pk(t){return t==null?t:t.toString()}function $a(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function JJ(t){return t==null?t:Math.round(parseFloat(t))}function VUe(t){return null}function GUe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function O_e(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function ND(t,e){return e!=null&&t&&!(e instanceof t)}function L_e(t){return t&&"isCollection"in t}function Zoe(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function qUe(t,e){if(!(e!=null&&e.constructor)||!L_e(e.constructor))return wG(t,e)?e:new t(e);const i=Zoe(t.prototype.itemType),r=Zoe(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(wG(t,e),e):new t(e):e}function wG(t,e){return!!O_e(e)&&(o_().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+$j(t)+"'"),!0)}function fk(t,e){return e==null?e:L_e(t)?qUe(t,e):ND(t,e)?wG(t,e)?e:new t(e):e}function $j(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const HUe=new WeakMap;function WUe(t){switch(t){case Number:return e=>$a(e);case ri:return JJ;case Boolean:return BUe;case String:return pk;case Date:return UUe;case OT:return VUe;default:return r1(HUe,t,(()=>fk.bind(null,t)))}}function Zr(t,e){const i=WUe(t);return arguments.length===1?i:i(e)}function FA(t,e,i){return arguments.length===1?FA.bind(null,t):e&&(Array.isArray(e)?e.map((r=>t(r,i))):[t(e,i)])}function ZUe(t,e){return arguments.length===1?FA((i=>Zr(t,i))):FA((i=>Zr(t,i)),e)}function R_e(t,e,i){return e!==0&&Array.isArray(i)?i.map((r=>R_e(t,e-1,r))):t(i)}function DD(t,e,i){if(arguments.length===2)return s=>DD(t,e,s);if(!i)return i;i=R_e(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function YUe(t,e,i){return arguments.length===2?DD((r=>Zr(t,r)),e):DD((r=>Zr(t,r)),e,i)}function N_e(t){return!!Array.isArray(t)&&!t.some((e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)}))}function _G(t,e){if(arguments.length===2)return _G(t).call(null,e);const i=new Set,r=t.filter((a=>typeof a!="function")),n=t.filter((a=>typeof a=="function"));for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(i.has(a)||n.some((p=>c==="string"&&p===String||c==="number"&&p===Number)))||c==="object"&&n.some((p=>!ND(a,p)))?a:(u&&r.length?(s||(s=r.map((p=>typeof p=="string"?`'${p}'`:`${p}`)).join(", ")),o_().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map((p=>$j(p))).join(", ")),o_().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):o_().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Bp(t,e){if(arguments.length===2)return Bp(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=Zr(c),r.push($j(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!ND(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,u=i[c];if(!u)return o_().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!ND(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!O_e(l)){const p={};for(const m in l)m!==t.key&&(p[m]=l[m]);return u(p)}return u(l)}}let ri=class{},OT=class{};const S4t={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function KUe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function D_e(t){switch(t.type){case"native":return Zr(t.value);case"array":return FA(D_e(t.value));case"one-of":return JUe(t);default:return null}}function JUe(t){let e=null;return(i,r)=>SG(i,t)?i:(e==null&&(e=xG(t)),o_().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function xG(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ri:return"integer";case Date:return"date";case OT:return"null";default:return $j(t.value)}case"array":return`array of ${xG(t.value)}`;case"one-of":{const e=t.values.map((i=>xG(i)));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function SG(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case ri:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case OT:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((i=>!SG(i,e.value)));case"one-of":return e.values.some((i=>SG(t,i)))}}function mk(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=le(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function yk(t,e){const i=mk(t);let r=i[e];return r||(r=i[e]={}),r}function XUe(t,e){return R3(t,e,e6e)}const QUe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function e6e(t){return QUe.test(t)?"replace":"merge"}function FD(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))FD(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void FD(pu(t,n),s,i)}const r=t.__accessor__;r!=null&&t6e(e,r),t[e]=i}}function t6e(t,e){if(ge("esri-unknown-property-errors")&&!i6e(t,e))throw new ae("set:unknown-property",r6e(t,e))}function i6e(t,e){return e.metadata[t]!=null}function r6e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function g(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=yk(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&Ce.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;n.dependsOn=[l],n.get=function(){let p=pu(this,l);if(typeof p=="function"){u||(u=l.split(".").slice(0,-1).join("."));const m=pu(this,u);m&&(p=p.bind(m))}return p},n.readOnly||(n.set=c?function(p){this._override(i,p)}:function(p){FD(this,l,p)})}const o=t.type,a=t.types;if(!n.cast){let l;o?l=n6e(o):a&&(l=Array.isArray(a)?FA(Bp(a[0])):Bp(a)),t.cast=s6e(t.cast,l)}XUe(n,t),t.range&&(n.cast=GUe(n.cast,t.range))}}function XJ(t,e,i){const r=yk(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function n6e(t){let e=0,i=t;if(KUe(t))return D_e(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(N_e(r))return e===0?_G(r):DD(_G(r),e);if(e===1)return ZUe(r);if(e>1)return YUe(r,e);const n=t;return n.from?n.from:Zr(n)}function s6e(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const o6e=Object.prototype.toString;function a6e(t){const e="__accessorMetadata__"in t?Zr(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return l6e.apply(this,i)}}function l6e(t,e,i,r){yk(t,e).cast=r}function c6e(t){return(e,i)=>{yk(e,t).cast=e[i]}}function Ai(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&o6e.call(t[0])==="[object Function]"?a6e(t[0]):t.length===1&&typeof t[0]=="string"?c6e(t[0]):void 0}let Bt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=u6e(e),this.apiValues=Yoe(this._apiToJSON),this.jsonValues=Yoe(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Vn(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function u6e(t){const e={};for(const i in t)e[t[i]]=i;return e}function Yoe(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function bs(){return function(t,e){return new Bt(t,{ignoreUnknown:!0,...e})}}function dt(t,e={}){const i=t instanceof Bt?t:new Bt(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return g({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}function je(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach((l=>{const c=XJ(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))}))}}function QJ(t){return(e,i)=>{e[i]=t}}const F_e=Symbol("Accessor-beforeDestroy");function h6e(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach((s=>{e[s]=n})),delete e[r]}}}let vc=class extends y_e{constructor(e,i,r){super(e,i,r)}};vc.prototype.type="warning";function z_e(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const EG=()=>Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Koe(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||f6e(t)&&Vn("read.reader",LT(t),e))}function LT(t){var i,r;const e=t.ndimArray??0;if(e>1)return p6e(t);if(e===1)return Joe(t);if("type"in t&&U_e(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=Joe(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new t.type(c)}}return eX(t)}function eX(t){return"type"in t?d6e(t.type):m6e(t.types)}function d6e(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void EG().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function j_e(t,e,i,r){return r!==0&&Array.isArray(e)?e.map((n=>j_e(t,n,i,r-1))):t(e,void 0,i)}function p6e(t){const e=eX(t),i=j_e.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function Joe(t){const e=eX(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function U_e(t){if(!z_e(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?tX(e.Type):B_e(e.Type))}function f6e(t){return"types"in t?B_e(t.types):tX(t.type)}function tX(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||U_e(t))}function B_e(t){for(const e in t.typeMap)if(!tX(t.typeMap[e]))return!1;return!0}function m6e(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void EG().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=y6e(t));const l=t.key;if(typeof l!="string")return;const c=n[l],u=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const m=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new vc(`${i}:unsupported`,m,{definition:n,context:o})),void EG().error(m)}const p=new u;return p.read(n,o),r?r(p):p}}function y6e(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=mk(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=s;continue}const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const c=l.target,u=typeof c=="string"?c:t.key,p={};l.writer(n,p,u),p[u]&&(e[p[u]]=s)}return e}function g6e(t){if(t.json||(t.json={}),Qoe(t.json),eae(t.json),Xoe(t.json),t.json.origins)for(const e in t.json.origins)Qoe(t.json.origins[e]),eae(t.json.origins[e]),Xoe(t.json.origins[e]);return!0}function Xoe(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function Qoe(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function eae(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function tae(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&z_e(t.type))?e.write.writer=w6e:i>1?e.write.writer=_6e(i):e.types?Array.isArray(e.types)?e.write.writer=b6e(e.types[0]):e.write.writer=v6e(e.types):e.write.writer=zA}function v6e(t){return(e,i,r,n)=>e?V_e(e,t,n)?zA(e,i,r,n):void 0:zA(e,i,r,n)}function V_e(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ae(`${r}:unsupported`,n,{definition:t,context:i})),Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function b6e(t){return(e,i,r,n)=>!e||!Array.isArray(e)?zA(e,i,r,n):zA(e.filter((s=>V_e(s,t,n))),i,r,n)}function zA(t,e,i,r){Vn(i,zD(t,r),e)}function zD(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?jD(t):t}function jD(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function w6e(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map((s=>zD(s,r))),typeof n.toArray=="function"&&(n=n.toArray())):n=[zD(t,r)],Vn(i,n,e)}function G_e(t,e,i){return i!==0&&Array.isArray(t)?t.map((r=>G_e(r,e,i-1))):zD(t,e)}function _6e(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=G_e(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Vn(r,s,i)}}function x6e(t,e){return iX(t,"any",e==null?void 0:e.origin)}function TG(t,e){return iX(t,"read",e==null?void 0:e.origin)}function q_e(t,e){return iX(t,"write",e==null?void 0:e.origin)}function iX(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function S6e(t){var i;const e=E6e(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?T6e(n):e;Koe(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),tae(s,n)}Koe(e,t.json,!0),tae(e,t.json)}function E6e(t){return t.json.types?$G(t.json):t.type?H_e(t):$G(t)}function T6e(t){return t.type?H_e(t):$G(t)}function H_e(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!N_e(i);)i=i[0],e++;return{type:i,ndimArray:e}}function $G(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function $6e(t){g6e(t)&&(h6e(t),S6e(t))}const XB=new Set,QB=new Set;function G(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,C6e(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!XB.has(n.initialize)&&(XB.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!QB.has(n.destroy)&&(QB.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);XB.clear(),QB.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[F_e];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=nc.DESTROYING,l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=mk(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function M6e(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&It(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function C6e(t){const e=t.prototype,i=mk(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];$6e(s),r[n]={enumerable:!0,configurable:!0,get:M6e(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?iae("read-only",n):a.lifecycle===nc.CONSTRUCTED&&s.constructOnly?iae("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const iae=(t,e)=>{Ce.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};function Ge(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=XJ(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}const rae=new WeakMap;function I6e(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=rae.get(t);n||(n=new Set,rae.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const UD="https://www.esriurl.com/";function A6e(t,e,i,r={}){ge("esri-deprecation-warnings")&&r0(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${UD}${i}/`,`Esri's move to web components: ${UD}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function P6e(t,e,i,r={}){ge("esri-deprecation-warnings")&&r0(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${UD}${i}/`,`Esri's move to web components: ${UD}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function $4t(t,e,i={}){ge("esri-deprecation-warnings")&&r0(t,`Module: ${e}`,i)}function W_e(t,e,i={}){if(ge("esri-deprecation-warnings")){const{moduleName:r}=i;r0(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function Z_e(t,e,i={}){if(ge("esri-deprecation-warnings")){const{moduleName:r}=i;r0(t,`Property: ${(r?r+"::":"")+e}`,i)}}function k6e(t,e,i={}){ge("esri-deprecation-warnings")&&r0(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function r0(t,e,i={}){if(ge("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),n&&(a+=`
	 Version: ${n}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;I6e(t,a,o)}}function M4t(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function O6e(t,e){for(const i of t)if(i!=null&&e(i))return i}function BD(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let RT=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((i=>{e+=i.length})),e}add(e,i){if(BD(e)){const r=this._getOrCreateGroup(i);for(const n of e)sae(n)&&r.push(n)}else sae(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach((r=>r.forEach(e)));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(kL(e))}remove(e){if(typeof e!="string"&&BD(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(nae(this._getGroup(e)),this._groups.delete(kL(e)),this):this}removeAll(){return this._groups.forEach(nae),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(kL(e),i),i}_getGroup(e){return this._groups.get(kL(e))}};function kL(t){return t||"_default_"}function nae(t){for(const e of t)e instanceof RT?e.removeAll():e.remove()}function sae(t){return t!=null&&(!!t.remove||t instanceof RT)}var Dt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Dt||(Dt={}));const MG=Dt.USER+1;function Nm(t){switch(t){case"defaults":return Dt.DEFAULTS;case"service":return Dt.SERVICE;case"portal-item":return Dt.PORTAL_ITEM;case"web-scene":return Dt.WEB_SCENE;case"web-map":return Dt.WEB_MAP;case"link-chart":return Dt.LINK_CHART;case"user":return Dt.USER;default:return null}}function jA(t){switch(t){case Dt.DEFAULTS:return"defaults";case Dt.SERVICE:return"service";case Dt.PORTAL_ITEM:return"portal-item";case Dt.WEB_SCENE:return"web-scene";case Dt.WEB_MAP:return"web-map";case Dt.LINK_CHART:return"link-chart";case Dt.USER:return"user"}}function L6e(t){return jA(t)}let oae=class extends h_e{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new Ej(this),this.flags=0,this.flags=Vr.Dirty|(i.nonNullable?Vr.NonNullable:0)|(i.hasOwnProperty("value")?Vr.HasDefaultValue:0)|(i.get===void 0?Vr.DepTrackingInitialized:0)|(i.dependsOn===void 0?Vr.AutoTracked:0)}destroy(){this.flags&Vr.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&It(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&Vr.Computing||~n&Vr.Dirty&&i.has(r))return s;this.flags|=Vr.Computing;const o=e.host;let a;n&Vr.AutoTracked?a=jp(this.trackingTarget,this.metadata.get,o):(u_e(o,this),a=this.metadata.get.call(o)),this.flags|=Vr.DepTrackingInitialized,i.set(r,a,Dt.COMPUTED);const l=i.get(r);return l===s?this.flags&=-2:B4e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Vr.Overridden&&(this.flags|=Vr.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},R6e=class Y_e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Y_e;return this._values.forEach(((r,n)=>{e&&e.has(n)||i.set(n,le(r))})),i}get(e){return this._values.get(e)}originOf(){return Dt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function dx(t,e,i){return t!==void 0}function aae(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Vr.NonNullable)||(r.lifecycle,!1))}let N6e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=nc.INITIALIZING,this.store=new R6e,this.mutable=!0,this._origin=Dt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new oae(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=nc.CONSTRUCTING}constructed(){this.lifecycle=nc.CONSTRUCTED}destroy(){this.lifecycle=nc.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==nc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!dx(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&It(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Vr.HasDefaultValue)return"defaults"}return jA(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(dx(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);dx(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!dx(n))return"";const s=new Ej,o=jp(s,(()=>{var c;return(c=n.metadata.get)==null?void 0:c.call(e)}));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof oae&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(dx(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Vr.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!dx(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&Vr.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Vr.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!aae(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(e8.release(s),!o)return;i=a}r.flags|=Vr.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!aae(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(e8.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Nm(e)}getDefaultOrigin(){return jA(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==nc.INITIALIZING?this._origin:Dt.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&BJ(i,n.get(s))&&~e.flags&Vr.Overridden)return;const o=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);o&&e.invalidate(),n.set(s,i,r),o&&e.commit(),c_e(this.host,e)}_cast(e,i){const r=e8.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},D6e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const e8=new i1(D6e);let F6e;function z6e(){return F6e}var lae;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(lae||(lae={}));var cae,uae;function j6e(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const ud=Symbol("Accessor-Handles"),t8=Symbol("Accessor-Initialized");var Jv;let ut=(Jv=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}mk(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let p;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{p=l.apply(this,c)}catch(m){throw this.inherited=u,m}return this.inherited=u,p}:e[a]}for(const a in i){const l=j6e(i[a]);g(l)(o.prototype,a)}return G(r)(o)}static freeze(e){return e instanceof Jv?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Jv?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[cae]=null,this[uae]=!1,this.constructor===Jv)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new N6e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[t8]=!0}initialize(){}[F_e](){this[ud]=Lr(this[ud])}destroy(){var e;this.destroyed||(CUe(this),this.__accessor__.destroy(),(e=z6e())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[t8]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===nc.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===nc.DESTROYING||!1}commitProperty(e){pu(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return FD(this,e,i),this}watch(e,i,r){return W_e(Ce.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),LUe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[ud]??(this[ud]=new RT)).add(e,i)}removeHandles(e){var i;(i=this[ud])==null||i.remove(e)}removeAllHandles(){var e;(e=this[ud])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[ud])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[ud])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},cae=ud,uae=t8,Jv);const yn=(t,e)=>{const r=MT().manager;r.onLoaded(()=>r.onLifecycle(()=>wu(t,e,n.emit)));const n=OJ();return n},K_e=(t,e)=>i=>U6e(i,t);var Qw,J2,Sv;class rX extends LJ{constructor(i,r){super(i);pt(this,Qw);pt(this,J2);pt(this,Sv);this.Y=new Map,this.A=void 0,nt(this,J2,d_e());const n=this;nt(n,Sv,r),n.Z(),n.setProvisionalExports(J_e(i,new WeakRef(n),i.M.length-1,n.instance,n.Y),!1),PJ(i,s=>{if(s){const o=Je(()=>i[s],a=>{if(a===n.instance)return;const l=n.instance;n.exports=a,n.instance=a,n.Y.forEach((c,u)=>i.requestUpdate(c,l[u])),me(n,Qw)&&l.destroy(),nt(n,Qw,!1)},{sync:!0});n.onDestroy(o.remove)}},n.exports)}get exports(){return p_e(me(this,J2)),super.exports}set exports(i){super.exports=i,me(this,J2).notify()}Z(){var r;const i=this;i.instance="prototype"in me(i,Sv)&&"declaredClass"in me(i,Sv).prototype?new(me(i,Sv)):me(r=i,Sv).call(r),nt(i,Qw,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;me(this,Qw)&&((r=(i=this.instance).destroy)==null||r.call(i))}}Qw=new WeakMap,J2=new WeakMap,Sv=new WeakMap;const U6e=dk(rX),J_e=(t,e,i,r,n)=>new Proxy(r,{get:(s,o)=>{const a=s[o];if(typeof o=="symbol"||n.has(o))return a;const l=t.M[i];return l.A=o,kJ(t,c=>{if(l.A=void 0,c!==void 0){const u=c.key;n.set(o,u);const p=t.constructor.getPropertyOptions(u),m=o!==u&&u.toLowerCase().includes("disable");B6e(e,p,o,u,m),p.i===void 0&&V6e(p,i,o,m)}},a)}}),B6e=(t,e,i,r,n,s)=>s=Je(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?s=s.remove():o.exports[i]},(o,a)=>{if(!s)return;const l=t.deref().component;l==null||l.requestUpdate(r,n?!a:a),e.c=!1},{sync:!0}),V6e=(t,e,i,r)=>{t.d.get=function(){var s;const n=(s=this.M[e])==null?void 0:s.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},G6e=t=>t.Y,q6e=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};function d(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function k4t(t,e){return function(i,r){e(i,r,t)}}function O4t(t,e,i,r){function n(s){return s instanceof i?s:new i((function(o){o(s)}))}return new(i||(i=Promise))((function(s,o){function a(u){try{c(r.next(u))}catch(p){o(p)}}function l(u){try{c(r.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):n(u.value).then(a,l)}c((r=r.apply(t,[])).next())}))}function L4t(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var H6e=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function R4t(t){function e(s){t.error=t.hasError?new H6e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,(function(o){return e(o),n()}))}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}const W6e="modulepreload",Z6e=function(t){return"/"+t},hae={},Re=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(i.map(c=>{if(c=Z6e(c),c in hae)return;hae[c]=!0;const u=c.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":W6e,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},X_e=t=>{let e=class extends t{clone(){var l;const i=Ra(this);ak(i,"unable to clone instance of non-accessor class");const r=i.metadata,n=i.store,s={},o=new Map;for(const c in r){const u=r[c],p=n==null?void 0:n.originOf(c),m=u.clonable;if(u.readOnly||m===!1||p!==Dt.USER&&p!==Dt.DEFAULTS&&p!==Dt.WEB_MAP&&p!==Dt.WEB_SCENE)continue;const v=this[c];let w=null;w=typeof m=="function"?m(v):m==="reference"?v:pG(v),v!=null&&w==null||(p===Dt.DEFAULTS?o.set(c,w):s[c]=w)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=Ra(a))==null?void 0:l.store;if(c)for(const[u,p]of o)c.set(u,p,Dt.DEFAULTS)}return a}};return e=d([G("esri.core.Clonable")],e),e};let bC=class extends X_e(ut){};bC=d([G("esri.core.Clonable")],bC),(function(t){t.ClonableMixin=X_e})(bC||(bC={}));const Et=bC;let Ab=class extends Et{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};d([g({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ab.prototype,"row",void 0),d([g({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ab.prototype,"column",void 0),d([g({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ab.prototype,"rows",void 0),d([g({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ab.prototype,"columns",void 0),Ab=d([G("esri.CameraLayout")],Ab);const Q_e=Ab,dae=new Float32Array(1);function F4t(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function sa(t,e,i){return Math.min(Math.max(t,e),i)}function Y6e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function wC(t,e,i){return t+(e-t)*i}function z4t(t,e,i,r,n){return wC(r,n,(t-e)/(i-e))}function NT(t){return t*Math.PI/180}function e1e(t){return 180*t/Math.PI}function j4t(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function U4t(t){return Math.acos(sa(t,-1,1))}function K6e(t){return Math.asin(sa(t,-1,1))}function Oh(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function t1e(t,e,i=1e-6){return!Oh(t,e,i)&&t>e}function CG(t,e,i=1e-6){return!Oh(t,e,i)&&t<e}function J6e(t,e,i=1e-6){return Oh(t,e,i)||t>e}const VD=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function IG(t){return VD.setFloat64(0,t),VD.getBigInt64(0)}function X6e(t){return VD.setBigInt64(0,t),VD.getFloat64(0)}const j3=BigInt("1000000"),Q6e=i1e(1);function i1e(t){const e=IG(t=Math.abs(t)),i=X6e(e<=j3?j3:e-j3);return Math.abs(t-i)}function B4t(t,e,i=Q6e){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&i1e(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=IG(t),n=IG(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>j3)}function V4t(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function G4t(t){return r1e(Math.max(-pae,Math.min(t,pae)))}function r1e(t){return dae[0]=t,dae[0]}function q4t(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Oh(e,1)&&Oh(i,1)&&Oh(r,1))}const pae=r1e(34028234663852886e22);function H4t(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let nX=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return fae(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return sa(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+AG(this.range,e-i,r)}minimalMonotonic(e,i,r){return fae(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function fae(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=AG(t,e-r):r>i&&(r-=AG(t,r-i)),s&&r===i&&(r=e),r+n}function AG(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const Z4t=new nX(0,2*Math.PI),Y4t=new nX(-Math.PI,Math.PI),eBe=new nX(0,360);let tBe=class n1e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new n1e;return this._values.forEach(((r,n)=>{e&&e.has(n)||i.set(n,le(r.value),r.origin)})),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Dt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter((r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e}))}set(e,i,r){if((r=this._normalizeOrigin(r))===Dt.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new iBe(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach((({value:i},r)=>e(i,r)))}_normalizeOrigin(e){if(e!=null)return e===Dt.DEFAULTS?e:Dt.USER}},iBe=class{constructor(e,i){this.value=e,this.origin=i}};function s1e(t,e,i){e.keys().forEach((n=>{i.set(n,e.get(n),Dt.DEFAULTS)}));const r=t.metadata;Object.keys(r).forEach((n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Dt.DEFAULTS)}))}function rBe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&Hoe(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&Hoe(n,i))return!0;return!1}function nBe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function sBe(t,e,i,r,n){let s=TG(e[i],n);nBe(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=TG(e[o],n),rBe(s,i,r)&&(t[o]=!0)}function oBe(t,e,i,r){const n=i.metadata,s=x6e(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const o1e={origin:"service"};function a1e(t,e,i=o1e){if(!e||typeof e!="object")return;const r=Ra(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))sBe(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=TG(n[o],i).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?hk(e,l):e[o],a!=null&&a.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||oBe(t,o,r,i)}r.setDefaultOrigin("user")}function l1e(t,e,i,r=o1e){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach((o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)}))}function aBe(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function c1e(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=pu(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new ae("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&Ce.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Dt.DEFAULTS)&&lBe(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Nm(s.origin))}function lBe(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return _j(o,n)}return!1}return s===n}function cBe(t,e,i,r){const n=Ra(t),s=n.metadata,o=q_e(s[e],r);return!!o&&c1e(t,n,e,o,i,r)}function u1e(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return R3(e,t.toJSON(i));const r=Ra(t),n=r.metadata;for(const a in n){const l=q_e(n[a],i);if(!c1e(t,r,a,l,void 0,i))continue;const c=pu(t,a),u=aBe(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,i);Object.keys(u).length>0&&(e=R3(e,u),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then((()=>R3(e,u,(()=>"replace-arrays"))))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:L6e(r.store.originOf(a)),newOrigin:i.origin}))}return e}const h1e=t=>{let e=class extends t{constructor(...i){super(...i);const r=Ra(this),n=r.store,s=new tBe;r.store=s,s1e(r,n,s)}read(i,r){a1e(this,i,r)}write(i,r){return u1e(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return uBe.call(this,i,r)}};return e=d([G("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function uBe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let _C=class extends h1e(ut){};_C=d([G("esri.core.JSONSupport")],_C),(function(t){t.JSONSupportMixin=h1e})(_C||(_C={}));const ve=_C;let sX=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const wn=new sX(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),kp=new sX(3396190,1/169.8944472236118,23e4,6e4,.111),n0=new sX(1737400,0,0,0,0);function UA(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const hBe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,dBe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function mae(t){const e=t==null?void 0:t.match(hBe);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=dBe;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function d1e(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function p1e(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function f1e(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function pBe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const fBe=()=>Ce.getLogger("esri.core.urlUtils"),DT=fi.request,yae="esri/config: esriConfig.request.proxyUrl is not set.",m1e=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,y1e=/^\s*http:/i,mBe=/^\s*https:/i,yBe=/^\s*file:/i,g1e=/:\d+$/,gBe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,vBe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),bBe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let a_=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(vBe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(bBe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const OL={},wBe=new a_(fi.applicationUrl);let ta=wBe;const _Be=xBe();let oX=_Be;const aX=()=>ta,eUt=()=>oX;function xBe(){const t=ta.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ta.scheme}://${ta.host}${ta.port!=null?`:${ta.port}`:""}`}${e}`}function qn(t){if(!t)return null;const e={path:null,query:null},i=new a_(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=lX(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function lX(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function BA(t,e){return t?Object.keys(t).map((i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map((o=>UA(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o))).join("&"):UA(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)})).filter((i=>i)).join("&"):""}function v1e(t=!1){let e,i=DT.proxyUrl;if(typeof t=="string"){e=x1e(t);const r=Mj(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw fBe().warn(yae),new ae("urlUtils:proxy-not-set",yae);return e&&kG()&&(i=pX(i)),qn(i)}function tUt(t,e=!1){const i=Mj(t);let r,n;if(i){const s=cX(i.proxyUrl);r=s.path,n=s.query?lX(s.query):null}else if(e){const s=v1e(t);r=s.path,n=s.query}if(r){const s=qn(t);t=r+"?"+s.path;const o=BA({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const wM={path:"",query:""};function cX(t){const e=t.indexOf("?");return e!==-1?(wM.path=t.slice(0,e),wM.query=t.slice(e+1)):(wM.path=t,wM.query=null),wM}function b1e(t){return t=(t=qD(t=OBe(t=cX(t).path),!0)).toLowerCase()}function SBe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:b1e(t.urlPrefix)},i=DT.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function Mj(t){const e=DT.proxyRules,i=b1e(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function EBe(t,e){if(!t||!e)return!1;t=GD(t),e=GD(e);const i=mae(t),r=mae(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Op(t,e,!0)}function w1e(t,e){return t=GD(t),e=GD(e),qD(t)===qD(e)}function GD(t){const e=(t=Lh(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function PG(t,e=DT.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Op(t,e,i=!1){if(!t||!e)return!1;const r=LG(t),n=LG(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function uX(t){if(typeof t=="string"){if(!pl(t))return!0;t=LG(t)}if(Op(t,ta))return!0;const e=DT.trustedServers||[];for(let i=0;i<e.length;i++){const r=TBe(e[i]);for(let n=0;n<r.length;n++)if(Op(t,r[n]))return!0}return!1}function TBe(t){return OL[t]||(dX(t)||Vp(t)?OL[t]=[new a_(oc(t))]:OL[t]=[new a_(`http://${t}`),new a_(`https://${t}`)]),OL[t]}function oc(t,e=oX,i){return Vp(t)?i!=null&&i.preserveProtocolRelative?t:ta.scheme==="http"&&ta.authority===dc(t).slice(2)?`http:${t}`:`https:${t}`:dX(t)?t:k_(t[0]==="/"?kBe(e):e,t)}function hX(t,e=oX,i){if(t==null||!pl(t))return t;const r=Lh(t),n=r.toLowerCase(),s=Lh(e).toLowerCase().replace(/\/+$/,""),o=i?Lh(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(p,m,v)=>(v=p.indexOf(m,v))===-1?p.length:v;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let p=0;p<u;p++)t=`../${t}`;else t=`./${t}`;return t}function Lh(t){return t=NBe(t=RBe(t=LBe(t=oc(t=t.trim()))))}function k_(...t){const e=t.filter(rs);if(!(e!=null&&e.length))return;const i=[];if(pl(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),ABe(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce(((n,s)=>s?n.concat(s.split("/")):n),[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function dc(t,e=!1){if(t==null||FT(t)||vy(t))return null;let i=t.indexOf("://");if(i===-1&&Vp(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=qD(t,!0)),t}function pl(t){return Vp(t)||dX(t)}function FT(t){return t!=null&&t.slice(0,5)==="blob:"}function vy(t){return t!=null&&t.slice(0,5)==="data:"}function $Be(t){const e=O_(t);return e!=null&&e.isBase64?f1e(e.data):null}function iUt(t){return pBe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const MBe=/^data:(.*?)(;base64)?,(.*)$/;function O_(t){const e=t.match(MBe);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function _1e(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function CBe(t){return(await fetch(t)).blob()}function rUt(t){const e=$Be(t);if(!e)return null;const i=O_(t);return new Blob([e],{type:i.mediaType})}function Vp(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function dX(t){return t!=null&&m1e.test(t)}function x1e(t){return t!=null&&mBe.test(t)||ta.scheme==="https"&&Vp(t)}function IBe(t){return t!=null&&y1e.test(t)||ta.scheme==="http"&&Vp(t)}function ABe(t){return t!=null&&yBe.test(t)}function pX(t){return Vp(t)?`https:${t}`:t.replace(y1e,"https:")}function PBe(){return ta.scheme==="http"}function kG(){return ta.scheme==="https"}function qD(t,e=!1){return Vp(t)?t.slice(2):(t=t.replace(m1e,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function kBe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function fX(t){let e=0;if(pl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function nUt(t,e){if(!t)return"";const i=qn(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function OBe(t){return t.endsWith("/")?t:`${t}/`}function S1e(t){return t.replace(/\/+$/,"")}function LBe(t){if(/^https?:\/\//i.test(t)){const e=cX(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function RBe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function NBe(t){const e=DT.httpsDomains;if(!IBe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),g1e.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return PBe()&&r===ta.authority&&!gBe.test(t)||(kG()&&r===ta.authority||e&&e.some((n=>r===n||r.endsWith(`.${n}`)))||kG()&&!Mj(t))&&(t=pX(t)),t}function OG(t,e,i){if(!(e&&i&&t&&pl(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function E1e(t,e){const i=new URL(t);return i.host=e,i.port&&!g1e.test(e)&&(i.port=""),i.toString()}function DBe(t){return new URL(t).host}function LG(t){return typeof t=="string"?new a_(oc(t)):(t.scheme||(t.scheme=ta.scheme),t)}function sUt(t){return FBe.test(t)}function T1e(t,e){const i=qn(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function $1e(t,e,i){const r=qn(t),n=r.query||{};return n[e]=String(i),`${r.path}?${BA(n)}`}function U3(t,e){if(!e)return t;const i=qn(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=BA(r);return n?`${i.path}?${n}`:i.path}function M1e(t){if(t==null)return null;const e=t.match(C1e);return e?e[2]:null}function gae(t){if(t==null)return null;const e=t.match(C1e);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function oUt(t){return typeof t=="string"?O_(t)??{data:t}:new Promise(((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(O_(r.result)),r.onerror=n=>i(n)}))}const C1e=/([^.]*)\.([^/]*)$/,FBe=/(^data:image\/svg|\.svg$)/i,I1e="20250917",A1e="2136612b0849a0d597a86ff9f672ef9f9b4016c4";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const P1e="4.33";let Rt,mX=P1e;mX="4.33.14";function aUt(t){Rt=t}function zBe(t){const e=Rt==null?void 0:Rt.findCredential(t);return e!=null&&e.token?$1e(t,"token",e.token):t}ge("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ge("host-webworker");function ny(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=oc(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=hX(t,e.portalItem.itemUrl);n!=null&&jBe.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=RG(t,e==null?void 0:e.portal))&&Ij.test(t)?yX(t):t}function L_(t,e,i=VE.YES){var n,s;if((t=t&&Ij.test(t)?R1e(t):t)==null)return t;!pl(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=oc(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=RG(o,e.portal),l=RG(r,e.portal);r=hX(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=L1e(r,e==null?void 0:e.portal),pl(r)&&(r=Lh(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!pl(r)&&!vy(r)&&i===VE.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function Cj(t,e,i){return ny(t,i)}function R_(t,e,i,r){const n=L_(t,r);n!==void 0&&(e[i]=n)}const Ij=/\/items\/([^/]+)\/resources\/(.*)/,jBe=/^\.\/resources\//;function k1e(t){const e=(t==null?void 0:t.match(Ij))??null;return(e==null?void 0:e[1])??null}function O1e(t){const e=(t==null?void 0:t.match(Ij))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=gae(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=gae(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function L1e(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?OG(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function RG(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=aX();return Op(r,`${r.scheme}://${i}`)?OG(t,e.portalHostname,i):OG(t,i,e.portalHostname)}function yX(t){if(!t)return t||null;let e=t;return e&&Rt&&!Rt.findCredential(e)&&(e=p1e(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function R1e(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Rt&&!Rt.findCredential(e)&&(e=p1e(e)),e}var VE;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(VE||(VE={}));const UBe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return VE},ensureMainOnlineDomain:L1e,fromCDNUrl:R1e,fromJSON:ny,itemIdFromResourceUrl:k1e,prefixAndFilenameFromResourceUrl:O1e,read:Cj,toCDNUrl:yX,toJSON:L_,write:R_},Symbol.toStringTag,{value:"Module"})),N1e={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},D1e=Object.values(N1e),F1e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${D1e.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),BBe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${D1e.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),VBe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function lUt(t){return F1e.test(t)}function Gp(t){if(t==null)return null;const e=qn(t),i=(e==null?void 0:e.path.match(F1e))||(e==null?void 0:e.path.match(BBe));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:gX(a!==-1?n.slice(a+1):n),serverType:N1e[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function GBe(t){const e=qn(t).path.match(VBe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function gX(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function qBe(t,e){const i=[];if(t){const r=Gp(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=gX(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function HD(t){let e=dc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function HBe(t,e){return t&&S1e(T1e(t,e))}function WBe(t){let{url:e}=t;if(!e)return{url:e};e=T1e(e,t.logger);const i=qn(e),r=Gp(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=GBe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:S1e(e),layerId:n}}function ZBe(t,e,i,r,n){R_(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=k_(r.url,i,t.layerId.toString()))}function cUt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function uUt(t){var r;if(!t)return!1;const e=new a_(oc(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const YBe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function vX(t){if(!bX(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=fi.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:fi.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?fi.apiKey:null}function NG(){return fi.apiKey!=null||fi.apiKeys.basemapStyles!=null}function z1e(t,e){return e?bX(t):vX(t)!=null}function bX(t){const e=dc(t,!0);return!!e&&!YBe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function KBe(t,e,i=!1,r){return new Promise(((n,s)=>{if(_u(r))return void s(vae());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=()=>{const u=t;c(),n(u)},l=()=>{if(!t)return;const u=t;c(),u.src="",s(vae())};const c=()=>{ge("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),ge("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))}))}function vae(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const j1e="Timeout exceeded";function JBe(){return new Error(j1e)}function hUt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===j1e}function XBe(t){fi.request.crossOriginNoCorsDomains||(fi.request.crossOriginNoCorsDomains={});const e=fi.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[dc(i)??""]=0:(e[dc("http://"+i)??""]=0,e[dc("https://"+i)??""]=0)}function QBe(t){const e=fi.request.crossOriginNoCorsDomains;if(e){let i=dc(t);if(i)return i=i.toLowerCase(),!Op(i,aX())&&e[i]<Date.now()-36e5}return!1}async function e8e(t){var n;const e=qn(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=fi.request.crossOriginNoCorsDomains,r=dc(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const DG=new Map;function t8e(t,e){const i=e==null?void 0:e.preferredHost;if(!i||Op(t,`https://${i}`,!0))return;const r=Gp(t);if(!r||r.serverType!=="FeatureServer"||d1e(t))return;const n=r.url.path.toLowerCase();DG.has(n)||DG.set(n,i)}function bae(t){var r;const e=(r=Gp(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=DG.get(e);return i?E1e(t,i):t}async function ni(t,e){var v;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=lX(e.query.toString().replaceAll("+"," ")));const i=vy(t),r=FT(t);r||i||(t=Lh(t));const n={url:t,requestOptions:{...e}},s=w=>({data:w,getAllHeaders:GE,getHeader:GE,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=PG(t,su.internalInterceptors);if(o){const w=await _ae(o,n);if(w!=null)return s(w)}let a=PG(t);if(a){const w=await _ae(a,n);if(w!=null)return s(w);a.after||a.error||(a=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ge("host-webworker")||ge("host-node")))throw Rh("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Rh("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Rh("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await o8e(),WD)return WD.execute(t,e);const l=new AbortController,c=Fh(e,(()=>l.abort())),u={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:su.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=e.useRequestQueue?h8e(u):zG(u),m=await p.finally((()=>c==null?void 0:c.remove()));return(v=a==null?void 0:a.after)==null||v.call(a,m),m}let WD,U1e=!1;const su=fi.request,B1e="FormData"in globalThis,i8e=new Set([499,498,403,401]),r8e=new Set(["COM_0056","COM_0057","SB_0008"]),n8e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],GE=()=>null,ZD=Symbol();function s8e(t){const e=dc(t);e&&!ni._corsServers.includes(e)&&ni._corsServers.push(e)}function wae(t){const e=dc(t);return!e||e.endsWith(".arcgis.com")||ni._corsServers.includes(e)||uX(e)}function Rh(t,e,i,r){var o;let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:GE,getHeader:GE,ssl:!1};if(e instanceof ae)return e.details?(e.details=le(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const a=r&&(()=>Array.from(r.headers)),l=r&&(p=>r.headers.get(p)),c=r==null?void 0:r.status,u=e.message;u&&(n=u),a&&l&&(s.getAllHeaders=a,s.getHeader=l),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??(n=e.details)):(s.messages=e.details,n??(n=(o=s.messages)==null?void 0:o[0])),s.raw=ZD in e?e[ZD]:e}return n??(n="Error"),io(e)?gr():new ae(t,n,s)}async function o8e(){ge("host-webworker")&&(!WD&&globalThis.invokeStaticMessage?WD=await Re(()=>import("./request-O1CAWufJ.js"),[]):U1e=!0)}async function FG(){Rt||await Re(()=>import("./IdentityManager-CX0dRFKN.js"),[])}async function a8e(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(B1e&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:su.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(U1e||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken){const l=vX(e);l&&(i.query??(i.query={}),i.query.token=l,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!V1e(e)&&!_u(r)){let l;i.authMode==="immediate"?(await FG(),l=await Rt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await FG(),l=await Rt.getCredential(e,{prompt:!1,signal:r}).catch((()=>{}))):Rt&&(l=Rt.findCredential(e)),l&&(t.credential=l,t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function V1e(t){return n8e.some((e=>e.test(t)))}async function l8e(t){let e=t.params.url,i=bae(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=FT(e)||vy(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:su.timeout;let l=!1;if(!s){t.useSSL&&(e=pX(e));let v={...r.query};t.credentialToken&&(v.token=t.credentialToken);let w=BA(v);ge("esri-url-encodes-apostrophe")&&(w=w.replaceAll("'","%27"));const _=i.length+1+w.length;let T;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>su.maxUrlLength;const $=r.useProxy||!!Mj(e);if($){const I=v1e(e);T=I.path,!l&&T.length+1+_>su.maxUrlLength&&(l=!0),I.query&&(v={...I.query,...v})}if(n.method==="HEAD"&&(l||$)){if(l)throw _>su.maxUrlLength?Rh("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Rh("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if($)throw Rh("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=U3(e,v):(n.body=BA(v),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=U3(e,v),$&&(t.useProxy=!0,e=`${T}?${e}`),v.token&&B1e&&n.body instanceof FormData&&!d1e(e)&&n.body.set("token",v.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!Op(e,aX())){if(uX(e))t.withCredentials=!0;else if(Rt){const I=Rt.findServerInfo(e);I!=null&&I.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",QBe(e)&&await e8e(l?U3(e,v):e)),i=bae(e)}let c,u,p=0,m=!1;a>0&&(p=setTimeout((()=>{m=!0,t.controller.abort()}),a));try{if(r.responseType==="native-request-init")u=n,u.url=i,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||l||c8e(r.headers)||!s&&!t.useProxy&&su.proxyUrl&&!wae(e)){if(ni._beforeFetch&&await ni._beforeFetch(e,n),c=await fetch(i,n),ni._afterFetch&&await ni._afterFetch(c),t.useProxy||s8e(e),r.responseType==="native")u=c;else if(n.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":u=await c.arrayBuffer();break;case"blob":case"image":u=await c.blob();break;default:u=await c.text()}if(p&&(clearTimeout(p),p=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=xae(u,"application/xml");break;case"document":u=xae(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const v=c.headers.get("Content-Type");if(v&&/application\/json|text\/plain/i.test(v)&&u[o==="blob"?"size":"byteLength"]<=750)try{const w=await new Response(u).json();w.error&&(u=w)}catch{}}o==="image"&&u instanceof Blob&&(u=await Sae(URL.createObjectURL(u),t,!0))}}else{u=await c.text();try{u=JSON.parse(u)}catch{}}}else u=await Sae(i,t)}catch(v){if(v.name==="AbortError")throw m?JBe():gr("Request canceled");if(!(!c&&v instanceof TypeError&&su.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||wae(e))throw v;t.redoRequest=!0,SBe({proxyUrl:su.proxyUrl,urlPrefix:dc(e)??""})}finally{p&&clearTimeout(p)}return[c,u]}async function _ae(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Rh("request:interceptor",n,e)}if((r instanceof Error||r instanceof ae)&&(i=Rh("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function c8e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function xae(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}ni._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ni._beforeFetch=void 0,ni._afterFetch=void 0;const u8e=new Map;async function h8e(t){const e=p8e(t.params.url);if(!e)return zG(t);const{QueueProcessor:i}=await Re(()=>import("./QueueProcessor-CRNlWwV5.js"),[]);return r1(u8e,e.origin,(()=>{const n=e.isHosted?ge("request-queue-concurrency-hosted"):ge("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(_u(s.params.requestOptions))throw Rh("",gr("Request canceled"),s.params);return zG(s)}})})).push(t)}async function zG(t){var s,o;let e,i;await a8e(t);try{do[e,i]=await l8e(t);while(!await d8e(t,e,i))}catch(a){const l=Rh("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!uX(r)){const a=dc(r,!0);a&&su.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&XBe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&t8e(r,i);const n=t.credential;if(n&&Rt){const a=Rt.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Rt.findCredential(l,n.userId);c&&Rt._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):GE,getHeader:e?a=>e.headers.get(a):GE,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function d8e(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[ZD]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[ZD]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&i8e.has(s)&&!V1e(t.params.url)&&(s!==403||(!o||!r8e.has(o))&&(a==null||a===2&&t.credentialToken))){await FG();try{const u=await Rt.getCredential(t.params.url,{error:Rh("request:server",n,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=u,t.credentialToken=u.token,t.useSSL=t.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=u}}if(n)throw n;return!0}function Sae(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=su.priority,n.src=t,KBe(n,t,i,r)}function p8e(t){let e,i;return typeof t=="string"?(e=dc(t,!0),i=HD(t)):(e=t.origin,i=HD(t.toString())),e==null?null:{origin:e,isHosted:i}}function Pr(t){if(!fi.assetsPath)throw Ce.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ae("assets:path-not-set","config.assetsPath is not set");return k_(fi.assetsPath,t)}let i8,pe=null;function wX(){return!!pe}function f8e(){return!!ge("esri-wasm")}function G1e(){return i8||(i8=Re(()=>import("./pe-wasm-dPKcsouR.js"),[]).then((({default:t})=>t({locateFile:e=>Pr(`esri/geometry/support/${e}`)}))).then((t=>{W1e(t)})),i8)}var jG,Gr;(function(t){function e(s,o,a){pe.ensureCache.prepare();const l=Ew(a),c=a===l,u=pe.ensureFloat64(l),p=pe._pe_geog_to_proj(pe.getPointer(s),o,u);return p&&fv(a,o,u,c),p}function i(s,o,a,l){switch(l){case Gr.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Gr.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){pe.ensureCache.prepare();const c=Ew(a),u=a===c,p=pe.ensureFloat64(c),m=pe._pe_proj_to_geog_center(pe.getPointer(s),o,p,l);return m&&fv(a,o,p,u),m}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(jG||(jG={})),(function(t){function e(){t.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e})(Gr||(Gr={}));let q1e=null;var UG;(function(t){const e={},i={},r=v=>{const w=v.getType();switch(w){case Gr.PE_TYPE_GEOGCS:v=pe.castObject(v,pe.PeGeogcs);break;case Gr.PE_TYPE_PROJCS:v=pe.castObject(v,pe.PeProjcs);break;case Gr.PE_TYPE_GEOGTRAN:v=pe.castObject(v,pe.PeGeogtran);break;default:w&Gr.PE_TYPE_UNIT&&(v=pe.castObject(v,pe.PeUnit))}return v};function n(){pe.PeFactory.prototype.initialize(null)}function s(v){return o(Gr.PE_TYPE_COORDSYS,v)}function o(v,w){let _=null,T=e[v];if(T||(T={},e[v]=T),T.hasOwnProperty(String(w))&&(_=T[w],pe.compare(_,pe.NULL)&&(_=null)),!_){const $=pe.PeFactory.prototype.factoryByType(v,w);pe.compare($,pe.NULL)||(_=r($),T[w]=_)}return _}function a(v,w){let _=null,T=i[v];if(T||(T={},i[v]=T),T.hasOwnProperty(w)&&(_=T[w],pe.compare(_,pe.NULL)&&(_=null)),!_){const $=pe.PeFactory.prototype.fromString(v,w);pe.compare($,pe.NULL)||(_=r($),T[w]=_)}return _}function l(v){return o(Gr.PE_TYPE_GEOGCS,v)}function c(v){return o(Gr.PE_TYPE_GEOGTRAN,v)}function u(v){return pe.PeFactory.prototype.getCode(v)}function p(v){return o(Gr.PE_TYPE_PROJCS,v)}function m(v){return o(Gr.PE_TYPE_UNIT,v)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=c,t.getCode=u,t.projcs=p,t.unit=m})(UG||(UG={}));let H1e=null;var YD,BG,VG,GG,qG,HG,KD,WG,JD,XD,ZG;function W1e(t){function e(s,o,a){s[o]=a(s[o])}pe=t,Gr.init(),YD.init(),KD.init(),JD.init(),XD.init(),q1e=class extends pe.PeDouble{constructor(s=NaN){super(s)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},H1e=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const s of i)e(s.prototype,"getName",(o=>function(){return o.call(this,new Array(Gr.PE_NAME_MAX))}));for(const s of[pe.PeGeogtran,pe.PeProjcs])e(s.prototype,"getParameters",(o=>function(){const a=new Array(Gr.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=pe.getValue(l,"*");a[c]=u?pe.wrapPointer(u,pe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a}));e(pe.PeHorizon.prototype,"getCoord",(s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return fv(l,a,s.call(this),o),l})),e(pe.PeGTlistExtendedEntry.prototype,"getEntries",(s=>{const o=pe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=pe.getPointer(l);for(let p=1;p<c;p++)a.push(pe.wrapPointer(u+o*p,pe.PeGTlistExtendedGTs))}}return a}}));const r=pe._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=l.getNump();if(c>1){const u=pe.getPointer(l);for(let p=1;p<c;p++)a.push(pe.wrapPointer(u+r*p,pe.PeHorizon))}}return o.set(s,a),a};e(pe.PeProjcs.prototype,"horizonGcsGenerate",n),e(pe.PeProjcs.prototype,"horizonPcsGenerate",n),pe.PeObject.prototype.toString=function(s=Gr.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const o=pe.getPointer(this),a=pe.ensureInt8(new Array(Gr.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(o,s,a))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),ch(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),ch(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ch(t){if(!t)return;const e=pe.getClass(t);if(!e)return;const i=pe.getCache(e);if(!i)return;const r=pe.getPointer(t);r&&delete i[r]}function LL(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(pe.ensureInt8(r));return i}function Ew(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function fv(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=pe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=pe.getValue(i,"double"),t[s][1]=pe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=pe._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,c){let u=null;const p=new pe.PeInteger(c);try{const m=pe.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,p);if((c=p.val)&&(u=[m],c>1)){const v=pe.getPointer(m);for(let w=1;w<c;w++)u.push(pe.wrapPointer(v+e*w,pe.PeGTlistExtendedEntry))}}finally{pe.destroy(p)}return u}t.init=i,t.getGTlist=r})(YD||(YD={})),(function(t){function e(i){if(i!=null&&i.length){for(const r of i)ch(r),r.getEntries().forEach((n=>{ch(n);const s=n.getGeogtran();ch(s),s.getParameters().forEach(ch),[s.getGeogcs1(),s.getGeogcs2()].forEach((o=>{ch(o);const a=o.getDatum();ch(a),ch(a.getSpheroid()),ch(o.getPrimem()),ch(o.getUnit())}))}));pe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e})(BG||(BG={})),(function(t){function e(i,r,n,s,o){pe.ensureCache.prepare();const a=Ew(n),l=n===a,c=pe.ensureFloat64(a);let u=0;s&&(u=pe.ensureFloat64(s));const p=pe._pe_geog_to_geog(pe.getPointer(i),r,c,u,o);return p&&fv(n,r,c,l),p}t.geogToGeog=e})(VG||(VG={})),(function(t){function e(s,o,a,l,c,u,p,m){pe.PeLineType.prototype.geodesic_coordinate(s,o,a,l,c,u,p,m)}function i(s,o,a,l,c,u,p,m,v){pe.PeLineType.prototype.geodetic_coordinate(s,o,a,l,c,u,p,m,v)}function r(s,o,a,l,c,u,p,m,v,w){pe.PeLineType.prototype.geodetic_distance(s,o,a,l,c,u,p,m,v,w)}function n(s,o,a,l,c,u,p,m,v){pe.PeLineType.prototype.great_elliptic_distance(s,o,a,l,c,u,p,m,v)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=n})(GG||(GG={})),(function(t){function e(o,a){return pe.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return pe.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return pe.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,l){return pe.PeMath.prototype.q(o,a,l)}function s(o,a){return pe.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=n,t.q90=s})(qG||(qG={})),(function(t){const e=(c,u,p,m,v,w)=>{let _,T;switch(pe.ensureCache.prepare(),c){case"dd":_=pe._pe_geog_to_dd,T=Gr.PE_DD_MAX;break;case"ddm":_=pe._pe_geog_to_ddm,T=Gr.PE_DDM_MAX;break;case"dms":_=pe._pe_geog_to_dms,T=Gr.PE_DMS_MAX}let $=0;u&&($=pe.getPointer(u));const I=Ew(m),A=pe.ensureFloat64(I),k=LL(p,T),R=_($,p,A,v,pe.ensureInt32(k));if(R)for(let F=0;F<p;F++)w[F]=pe.UTF8ToString(k[F]);return R},i=(c,u,p,m,v)=>{let w;switch(pe.ensureCache.prepare(),c){case"dd":w=pe._pe_dd_to_geog;break;case"ddm":w=pe._pe_ddm_to_geog;break;case"dms":w=pe._pe_dms_to_geog}let _=0;u&&(_=pe.getPointer(u));const T=m.map((k=>pe.ensureString(k))),$=pe.ensureInt32(T),I=pe.ensureFloat64(new Array(2*p)),A=w(_,p,$,I);return A&&fv(v,p,I),A};function r(c,u,p,m,v){return e("dms",c,u,p,m,v)}function n(c,u,p,m){return i("dms",c,u,p,m)}function s(c,u,p,m,v){return e("ddm",c,u,p,m,v)}function o(c,u,p,m){return i("ddm",c,u,p,m)}function a(c,u,p,m,v){return e("dd",c,u,p,m,v)}function l(c,u,p,m){return i("dd",c,u,p,m)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l})(HG||(HG={})),(function(t){function e(){t.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,c,u){pe.ensureCache.prepare();let p=0;n&&(p=pe.getPointer(n));const m=Ew(o),v=pe.ensureFloat64(m),w=LL(s,Gr.PE_MGRS_MAX),_=pe.ensureInt32(w),T=pe._pe_geog_to_mgrs_extended(p,s,v,a,l,c,_);if(T)for(let $=0;$<s;$++)u[$]=pe.UTF8ToString(w[$]);return T}function r(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const u=o.map((w=>pe.ensureString(w))),p=pe.ensureInt32(u),m=pe.ensureFloat64(new Array(2*s)),v=pe._pe_mgrs_to_geog_extended(c,s,p,a,m);return v&&fv(l,s,m),v}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r})(KD||(KD={})),(function(t){function e(r,n,s,o,a,l,c){pe.ensureCache.prepare();let u=0;r&&(u=pe.getPointer(r));const p=Ew(s),m=pe.ensureFloat64(p),v=LL(n,Gr.PE_MGRS_MAX),w=pe.ensureInt32(v),_=pe._pe_geog_to_usng(u,n,m,o,a,l,w);if(_)for(let T=0;T<n;T++)c[T]=pe.UTF8ToString(v[T]);return _}function i(r,n,s,o){pe.ensureCache.prepare();let a=0;r&&(a=pe.getPointer(r));const l=s.map((m=>pe.ensureString(m))),c=pe.ensureInt32(l),u=pe.ensureFloat64(new Array(2*n)),p=pe._pe_usng_to_geog(a,n,c,u);return p&&fv(o,n,u),p}t.geogToUsng=e,t.usngToGeog=i})(WG||(WG={})),(function(t){function e(){t.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const u=Ew(o),p=pe.ensureFloat64(u),m=LL(s,Gr.PE_UTM_MAX),v=pe.ensureInt32(m),w=pe._pe_geog_to_utm(c,s,p,a,v);if(w)for(let _=0;_<s;_++)l[_]=pe.UTF8ToString(m[_]);return w}function r(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const u=o.map((w=>pe.ensureString(w))),p=pe.ensureInt32(u),m=pe.ensureFloat64(new Array(2*s)),v=pe._pe_utm_to_geog(c,s,p,a,m);return v&&fv(l,s,m),v}t.init=e,t.geogToUtm=i,t.utmToGeog=r})(JD||(JD={})),(function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=pe.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r})(XD||(XD={})),(function(t){function e(){return pe.PeVersion.prototype.version_string()}t.versionString=e})(ZG||(ZG={}));const m8e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return jG},get PeDefs(){return Gr},get PeDouble(){return q1e},get PeFactory(){return UG},get PeGCSExtent(){return H1e},get PeGTTransformations(){return VG},get PeGTlistExtended(){return YD},get PeGTlistExtendedEntry(){return BG},get PeLineType(){return GG},get PeMath(){return qG},get PeNotationDms(){return HG},get PeNotationMgrs(){return KD},get PeNotationUsng(){return WG},get PeNotationUtm(){return JD},get PePCSInfo(){return XD},get PeVersion(){return ZG},_init:W1e,get _pe(){return pe},isLoaded:wX,isSupported:f8e,load:G1e},Symbol.toStringTag,{value:"Module"}));var N_;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(N_||(N_={}));let x;const W={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(x=2e3;x<=2045;x++)W[x]=0;for(x=2056;x<=2065;x++)W[x]=0;for(x=2067;x<=2135;x++)W[x]=0;for(x=2137;x<=2154;x++)W[x]=0;for(x=2161;x<=2170;x++)W[x]=0;for(x=2172;x<=2193;x++)W[x]=0;for(x=2195;x<=2198;x++)W[x]=0;for(x=2200;x<=2203;x++)W[x]=0;for(x=2205;x<=2217;x++)W[x]=0;for(x=2222;x<=2224;x++)W[x]=1;for(x=2225;x<=2250;x++)W[x]=2;for(x=2251;x<=2253;x++)W[x]=1;for(x=2257;x<=2264;x++)W[x]=2;for(x=2274;x<=2279;x++)W[x]=2;for(x=2280;x<=2282;x++)W[x]=1;for(x=2283;x<=2289;x++)W[x]=2;for(x=2290;x<=2292;x++)W[x]=0;for(x=2308;x<=2313;x++)W[x]=0;for(x=2315;x<=2491;x++)W[x]=0;for(x=2494;x<=2866;x++)W[x]=0;for(x=2867;x<=2869;x++)W[x]=1;for(x=2870;x<=2888;x++)W[x]=2;for(x=2891;x<=2895;x++)W[x]=2;for(x=2896;x<=2898;x++)W[x]=1;for(x=2902;x<=2908;x++)W[x]=2;for(x=2915;x<=2920;x++)W[x]=2;for(x=2921;x<=2923;x++)W[x]=1;for(x=2924;x<=2930;x++)W[x]=2;for(x=2931;x<=2962;x++)W[x]=0;for(x=2964;x<=2968;x++)W[x]=2;for(x=2969;x<=2973;x++)W[x]=0;for(x=2975;x<=2991;x++)W[x]=0;for(x=2995;x<=3051;x++)W[x]=0;for(x=3054;x<=3079;x++)W[x]=0;for(x=3081;x<=3088;x++)W[x]=0;for(x=3092;x<=3101;x++)W[x]=0;for(x=3106;x<=3138;x++)W[x]=0;for(x=3146;x<=3151;x++)W[x]=0;for(x=3153;x<=3166;x++)W[x]=0;for(x=3168;x<=3172;x++)W[x]=0;for(x=3174;x<=3203;x++)W[x]=0;for(x=3294;x<=3358;x++)W[x]=0;for(x=3367;x<=3403;x++)W[x]=0;for(x=3408;x<=3416;x++)W[x]=0;for(x=3417;x<=3438;x++)W[x]=2;for(x=3441;x<=3446;x++)W[x]=2;for(x=3447;x<=3450;x++)W[x]=0;for(x=3451;x<=3459;x++)W[x]=2;for(x=3460;x<=3478;x++)W[x]=0;for(x=3554;x<=3559;x++)W[x]=0;for(x=3560;x<=3570;x++)W[x]=2;for(x=3571;x<=3581;x++)W[x]=0;for(x=3594;x<=3597;x++)W[x]=0;for(x=3601;x<=3604;x++)W[x]=0;for(x=3637;x<=3639;x++)W[x]=0;for(x=3665;x<=3667;x++)W[x]=0;for(x=3693;x<=3695;x++)W[x]=0;for(x=3701;x<=3727;x++)W[x]=0;for(x=3728;x<=3739;x++)W[x]=2;for(x=3740;x<=3751;x++)W[x]=0;for(x=3753;x<=3760;x++)W[x]=2;for(x=3761;x<=3773;x++)W[x]=0;for(x=3775;x<=3777;x++)W[x]=0;for(x=3779;x<=3781;x++)W[x]=0;for(x=3783;x<=3785;x++)W[x]=0;for(x=3788;x<=3791;x++)W[x]=0;for(x=3797;x<=3802;x++)W[x]=0;for(x=3814;x<=3816;x++)W[x]=0;for(x=3825;x<=3829;x++)W[x]=0;for(x=3832;x<=3841;x++)W[x]=0;for(x=3844;x<=3852;x++)W[x]=0;for(x=3873;x<=3885;x++)W[x]=0;for(x=3890;x<=3893;x++)W[x]=0;for(x=3907;x<=3912;x++)W[x]=0;for(x=3942;x<=3950;x++)W[x]=0;for(x=3968;x<=3970;x++)W[x]=0;for(x=3973;x<=3976;x++)W[x]=0;for(x=3986;x<=3989;x++)W[x]=0;for(x=3994;x<=3997;x++)W[x]=0;for(x=4048;x<=4051;x++)W[x]=0;for(x=4056;x<=4063;x++)W[x]=0;for(x=4093;x<=4096;x++)W[x]=0;for(x=4390;x<=4398;x++)W[x]=0;for(x=4399;x<=4413;x++)W[x]=2;for(x=4418;x<=4433;x++)W[x]=2;for(x=4455;x<=4457;x++)W[x]=2;for(x=4484;x<=4489;x++)W[x]=0;for(x=4491;x<=4554;x++)W[x]=0;for(x=4568;x<=4589;x++)W[x]=0;for(x=4652;x<=4656;x++)W[x]=0;for(x=4766;x<=4800;x++)W[x]=0;for(x=5014;x<=5016;x++)W[x]=0;for(x=5069;x<=5072;x++)W[x]=0;for(x=5105;x<=5130;x++)W[x]=0;for(x=5167;x<=5188;x++)W[x]=0;for(x=5253;x<=5259;x++)W[x]=0;for(x=5269;x<=5275;x++)W[x]=0;for(x=5292;x<=5311;x++)W[x]=0;for(x=5329;x<=5331;x++)W[x]=0;for(x=5343;x<=5349;x++)W[x]=0;for(x=5355;x<=5357;x++)W[x]=0;for(x=5387;x<=5389;x++)W[x]=0;for(x=5459;x<=5463;x++)W[x]=0;for(x=5479;x<=5482;x++)W[x]=0;for(x=5518;x<=5520;x++)W[x]=0;for(x=5530;x<=5539;x++)W[x]=0;for(x=5550;x<=5552;x++)W[x]=0;for(x=5562;x<=5583;x++)W[x]=0;for(x=5623;x<=5625;x++)W[x]=2;for(x=5631;x<=5639;x++)W[x]=0;for(x=5649;x<=5653;x++)W[x]=0;for(x=5663;x<=5680;x++)W[x]=0;for(x=5682;x<=5685;x++)W[x]=0;for(x=5875;x<=5877;x++)W[x]=0;for(x=5896;x<=5899;x++)W[x]=0;for(x=5921;x<=5940;x++)W[x]=0;for(x=6050;x<=6125;x++)W[x]=0;for(x=6244;x<=6275;x++)W[x]=0;for(x=6328;x<=6348;x++)W[x]=0;for(x=6350;x<=6356;x++)W[x]=0;for(x=6366;x<=6372;x++)W[x]=0;for(x=6381;x<=6387;x++)W[x]=0;for(x=6393;x<=6404;x++)W[x]=0;for(x=6480;x<=6483;x++)W[x]=0;for(x=6511;x<=6514;x++)W[x]=0;for(x=6579;x<=6581;x++)W[x]=0;for(x=6619;x<=6624;x++)W[x]=0;for(x=6625;x<=6627;x++)W[x]=2;for(x=6628;x<=6632;x++)W[x]=0;for(x=6634;x<=6637;x++)W[x]=0;for(x=6669;x<=6692;x++)W[x]=0;for(x=6707;x<=6709;x++)W[x]=0;for(x=6720;x<=6723;x++)W[x]=0;for(x=6732;x<=6738;x++)W[x]=0;for(x=6931;x<=6933;x++)W[x]=0;for(x=6956;x<=6959;x++)W[x]=0;for(x=7005;x<=7007;x++)W[x]=0;for(x=7057;x<=7070;x++)W[x]=2;for(x=7074;x<=7082;x++)W[x]=0;for(x=7109;x<=7118;x++)W[x]=0;for(x=7119;x<=7127;x++)W[x]=1;for(x=7374;x<=7376;x++)W[x]=0;for(x=7528;x<=7586;x++)W[x]=0;for(x=7587;x<=7645;x++)W[x]=2;for(x=7692;x<=7696;x++)W[x]=0;for(x=7755;x<=7787;x++)W[x]=0;for(x=7791;x<=7795;x++)W[x]=0;for(x=7799;x<=7801;x++)W[x]=0;for(x=7803;x<=7805;x++)W[x]=0;for(x=7825;x<=7831;x++)W[x]=0;for(x=7845;x<=7859;x++)W[x]=0;for(x=8013;x<=8032;x++)W[x]=0;for(x=8065;x<=8068;x++)W[x]=1;for(x=8518;x<=8529;x++)W[x]=2;for(x=8533;x<=8536;x++)W[x]=2;for(x=8538;x<=8540;x++)W[x]=2;for(x=8677;x<=8679;x++)W[x]=0;for(x=8836;x<=8840;x++)W[x]=0;for(x=8857;x<=8859;x++)W[x]=0;for(x=8908;x<=8910;x++)W[x]=0;for(x=9154;x<=9159;x++)W[x]=0;for(x=9205;x<=9218;x++)W[x]=0;for(x=9271;x<=9273;x++)W[x]=0;for(x=9295;x<=9297;x++)W[x]=0;for(x=9356;x<=9360;x++)W[x]=0;for(x=9404;x<=9407;x++)W[x]=0;for(x=9476;x<=9482;x++)W[x]=0;for(x=9487;x<=9494;x++)W[x]=0;for(x=9697;x<=9699;x++)W[x]=0;for(x=9821;x<=9865;x++)W[x]=0;for(x=10285;x<=10291;x++)W[x]=0;for(x=10314;x<=10317;x++)W[x]=0;for(x=10448;x<=10465;x++)W[x]=0;for(x=10726;x<=10729;x++)W[x]=0;for(x=10731;x<=10733;x++)W[x]=0;for(x=11114;x<=11118;x++)W[x]=0;for(x=20004;x<=20032;x++)W[x]=0;for(x=20047;x<=20049;x++)W[x]=0;for(x=20062;x<=20092;x++)W[x]=0;for(x=20135;x<=20138;x++)W[x]=0;for(x=20248;x<=20258;x++)W[x]=0;for(x=20348;x<=20358;x++)W[x]=0;for(x=20436;x<=20440;x++)W[x]=0;for(x=20822;x<=20824;x++)W[x]=0;for(x=20904;x<=20932;x++)W[x]=0;for(x=20934;x<=20936;x++)W[x]=0;for(x=21004;x<=21032;x++)W[x]=0;for(x=21035;x<=21037;x++)W[x]=0;for(x=21095;x<=21097;x++)W[x]=0;for(x=21148;x<=21150;x++)W[x]=0;for(x=21207;x<=21264;x++)W[x]=0;for(x=21307;x<=21364;x++)W[x]=0;for(x=21413;x<=21423;x++)W[x]=0;for(x=21453;x<=21463;x++)W[x]=0;for(x=21473;x<=21483;x++)W[x]=0;for(x=21780;x<=21782;x++)W[x]=0;for(x=21891;x<=21894;x++)W[x]=0;for(x=21896;x<=21899;x++)W[x]=0;for(x=22171;x<=22177;x++)W[x]=0;for(x=22181;x<=22187;x++)W[x]=0;for(x=22191;x<=22197;x++)W[x]=0;for(x=22207;x<=22222;x++)W[x]=0;for(x=22229;x<=22232;x++)W[x]=0;for(x=22234;x<=22236;x++)W[x]=0;for(x=22243;x<=22250;x++)W[x]=0;for(x=22262;x<=22265;x++)W[x]=0;for(x=22307;x<=22322;x++)W[x]=0;for(x=22348;x<=22357;x++)W[x]=0;for(x=22407;x<=22422;x++)W[x]=0;for(x=22462;x<=22465;x++)W[x]=0;for(x=22521;x<=22525;x++)W[x]=0;for(x=22607;x<=22622;x++)W[x]=0;for(x=22641;x<=22646;x++)W[x]=0;for(x=22648;x<=22657;x++)W[x]=0;for(x=22707;x<=22722;x++)W[x]=0;for(x=22762;x<=22765;x++)W[x]=0;for(x=22807;x<=22822;x++)W[x]=0;for(x=22991;x<=22994;x++)W[x]=0;for(x=23028;x<=23038;x++)W[x]=0;for(x=23301;x<=23333;x++)W[x]=2;for(x=23830;x<=23853;x++)W[x]=0;for(x=23866;x<=23872;x++)W[x]=0;for(x=23877;x<=23884;x++)W[x]=0;for(x=23886;x<=23894;x++)W[x]=0;for(x=23946;x<=23948;x++)W[x]=0;for(x=24311;x<=24313;x++)W[x]=0;for(x=24342;x<=24347;x++)W[x]=0;for(x=24370;x<=24374;x++)W[x]=10;for(x=24375;x<=24381;x++)W[x]=0;for(x=24718;x<=24721;x++)W[x]=0;for(x=24817;x<=24821;x++)W[x]=0;for(x=24877;x<=24882;x++)W[x]=0;for(x=24891;x<=24893;x++)W[x]=0;for(x=25391;x<=25395;x++)W[x]=0;for(x=25828;x<=25838;x++)W[x]=0;for(x=26191;x<=26195;x++)W[x]=0;for(x=26391;x<=26393;x++)W[x]=0;for(x=26701;x<=26722;x++)W[x]=0;for(x=26729;x<=26799;x++)W[x]=2;for(x=26801;x<=26803;x++)W[x]=2;for(x=26811;x<=26813;x++)W[x]=2;for(x=26847;x<=26870;x++)W[x]=2;for(x=26891;x<=26899;x++)W[x]=0;for(x=26901;x<=26923;x++)W[x]=0;for(x=26929;x<=26946;x++)W[x]=0;for(x=26948;x<=26998;x++)W[x]=0;for(x=27037;x<=27040;x++)W[x]=0;for(x=27205;x<=27232;x++)W[x]=0;for(x=27258;x<=27260;x++)W[x]=0;for(x=27391;x<=27398;x++)W[x]=0;for(x=27561;x<=27564;x++)W[x]=0;for(x=27571;x<=27574;x++)W[x]=0;for(x=27581;x<=27584;x++)W[x]=0;for(x=27591;x<=27594;x++)W[x]=0;for(x=27700;x<=27707;x++)W[x]=0;for(x=28191;x<=28193;x++)W[x]=0;for(x=28348;x<=28358;x++)W[x]=0;for(x=28402;x<=28432;x++)W[x]=0;for(x=28462;x<=28492;x++)W[x]=0;for(x=29118;x<=29122;x++)W[x]=0;for(x=29168;x<=29172;x++)W[x]=0;for(x=29177;x<=29185;x++)W[x]=0;for(x=29187;x<=29195;x++)W[x]=0;for(x=29900;x<=29903;x++)W[x]=0;for(x=30161;x<=30179;x++)W[x]=0;for(x=30491;x<=30494;x++)W[x]=0;for(x=30729;x<=30732;x++)W[x]=0;for(x=31251;x<=31259;x++)W[x]=0;for(x=31265;x<=31268;x++)W[x]=0;for(x=31275;x<=31279;x++)W[x]=0;for(x=31281;x<=31297;x++)W[x]=0;for(x=31461;x<=31469;x++)W[x]=0;for(x=31491;x<=31495;x++)W[x]=0;for(x=31917;x<=31922;x++)W[x]=0;for(x=31965;x<=32e3;x++)W[x]=0;for(x=32001;x<=32003;x++)W[x]=2;for(x=32005;x<=32031;x++)W[x]=2;for(x=32033;x<=32060;x++)W[x]=2;for(x=32064;x<=32067;x++)W[x]=2;for(x=32074;x<=32077;x++)W[x]=2;for(x=32081;x<=32086;x++)W[x]=0;for(x=32107;x<=32130;x++)W[x]=0;for(x=32133;x<=32159;x++)W[x]=0;for(x=32164;x<=32167;x++)W[x]=2;for(x=32180;x<=32199;x++)W[x]=0;for(x=32201;x<=32260;x++)W[x]=0;for(x=32301;x<=32360;x++)W[x]=0;for(x=32401;x<=32460;x++)W[x]=0;for(x=32501;x<=32560;x++)W[x]=0;for(x=32601;x<=32662;x++)W[x]=0;for(x=32664;x<=32667;x++)W[x]=2;for(x=32701;x<=32761;x++)W[x]=0;for(x=53001;x<=53004;x++)W[x]=0;for(x=53008;x<=53019;x++)W[x]=0;for(x=53021;x<=53032;x++)W[x]=0;for(x=53034;x<=53037;x++)W[x]=0;for(x=53042;x<=53046;x++)W[x]=0;for(x=53074;x<=53080;x++)W[x]=0;for(x=54001;x<=54004;x++)W[x]=0;for(x=54008;x<=54019;x++)W[x]=0;for(x=54021;x<=54032;x++)W[x]=0;for(x=54034;x<=54037;x++)W[x]=0;for(x=54042;x<=54046;x++)W[x]=0;for(x=54048;x<=54053;x++)W[x]=0;for(x=54074;x<=54080;x++)W[x]=0;for(x=54090;x<=54096;x++)W[x]=0;for(x=54098;x<=54101;x++)W[x]=0;for(x=65161;x<=65163;x++)W[x]=0;for(x=102001;x<=102040;x++)W[x]=0;for(x=102042;x<=102063;x++)W[x]=0;for(x=102065;x<=102067;x++)W[x]=0;for(x=102070;x<=102117;x++)W[x]=0;for(x=102122;x<=102216;x++)W[x]=0;for(x=102221;x<=102377;x++)W[x]=0;for(x=102382;x<=102388;x++)W[x]=0;for(x=102389;x<=102398;x++)W[x]=2;for(x=102399;x<=102444;x++)W[x]=0;for(x=102445;x<=102447;x++)W[x]=2;for(x=102448;x<=102458;x++)W[x]=0;for(x=102459;x<=102468;x++)W[x]=2;for(x=102469;x<=102499;x++)W[x]=0;for(x=102500;x<=102519;x++)W[x]=1;for(x=102520;x<=102524;x++)W[x]=0;for(x=102525;x<=102529;x++)W[x]=2;for(x=102530;x<=102588;x++)W[x]=0;for(x=102590;x<=102598;x++)W[x]=0;for(x=102601;x<=102603;x++)W[x]=0;for(x=102605;x<=102628;x++)W[x]=0;for(x=102629;x<=102646;x++)W[x]=2;for(x=102648;x<=102700;x++)W[x]=2;for(x=102701;x<=102703;x++)W[x]=0;for(x=102707;x<=102730;x++)W[x]=2;for(x=102733;x<=102758;x++)W[x]=2;for(x=102767;x<=102900;x++)W[x]=0;for(x=102901;x<=102933;x++)W[x]=2;for(x=102934;x<=102950;x++)W[x]=13;for(x=102951;x<=102963;x++)W[x]=0;for(x=102965;x<=102969;x++)W[x]=0;for(x=102971;x<=102973;x++)W[x]=0;for(x=102975;x<=102989;x++)W[x]=0;for(x=102990;x<=102992;x++)W[x]=1;for(x=102997;x<=103002;x++)W[x]=0;for(x=103003;x<=103008;x++)W[x]=2;for(x=103009;x<=103011;x++)W[x]=0;for(x=103012;x<=103014;x++)W[x]=2;for(x=103019;x<=103021;x++)W[x]=0;for(x=103022;x<=103024;x++)W[x]=2;for(x=103029;x<=103031;x++)W[x]=0;for(x=103032;x<=103034;x++)W[x]=2;for(x=103065;x<=103068;x++)W[x]=0;for(x=103074;x<=103076;x++)W[x]=0;for(x=103077;x<=103079;x++)W[x]=1;for(x=103080;x<=103082;x++)W[x]=0;for(x=103083;x<=103085;x++)W[x]=2;for(x=103090;x<=103093;x++)W[x]=0;for(x=103097;x<=103099;x++)W[x]=0;for(x=103100;x<=103102;x++)W[x]=2;for(x=103107;x<=103109;x++)W[x]=0;for(x=103110;x<=103112;x++)W[x]=2;for(x=103113;x<=103116;x++)W[x]=0;for(x=103117;x<=103120;x++)W[x]=2;for(x=103153;x<=103157;x++)W[x]=0;for(x=103158;x<=103162;x++)W[x]=2;for(x=103163;x<=103165;x++)W[x]=0;for(x=103166;x<=103168;x++)W[x]=1;for(x=103169;x<=103171;x++)W[x]=2;for(x=103186;x<=103188;x++)W[x]=0;for(x=103189;x<=103191;x++)W[x]=2;for(x=103192;x<=103195;x++)W[x]=0;for(x=103196;x<=103199;x++)W[x]=2;for(x=103200;x<=103224;x++)W[x]=0;for(x=103225;x<=103227;x++)W[x]=1;for(x=103232;x<=103237;x++)W[x]=0;for(x=103238;x<=103243;x++)W[x]=2;for(x=103244;x<=103246;x++)W[x]=0;for(x=103247;x<=103249;x++)W[x]=2;for(x=103254;x<=103256;x++)W[x]=0;for(x=103257;x<=103259;x++)W[x]=2;for(x=103264;x<=103266;x++)W[x]=0;for(x=103267;x<=103269;x++)W[x]=2;for(x=103300;x<=103375;x++)W[x]=0;for(x=103381;x<=103383;x++)W[x]=0;for(x=103384;x<=103386;x++)W[x]=1;for(x=103387;x<=103389;x++)W[x]=0;for(x=103390;x<=103392;x++)W[x]=2;for(x=103397;x<=103399;x++)W[x]=0;for(x=103400;x<=103471;x++)W[x]=2;for(x=103476;x<=103478;x++)W[x]=0;for(x=103479;x<=103481;x++)W[x]=2;for(x=103486;x<=103488;x++)W[x]=0;for(x=103489;x<=103491;x++)W[x]=2;for(x=103492;x<=103495;x++)W[x]=0;for(x=103496;x<=103499;x++)W[x]=2;for(x=103528;x<=103543;x++)W[x]=0;for(x=103544;x<=103548;x++)W[x]=2;for(x=103549;x<=103551;x++)W[x]=0;for(x=103552;x<=103554;x++)W[x]=1;for(x=103555;x<=103557;x++)W[x]=2;for(x=103558;x<=103560;x++)W[x]=0;for(x=103571;x<=103573;x++)W[x]=0;for(x=103574;x<=103576;x++)W[x]=2;for(x=103577;x<=103580;x++)W[x]=0;for(x=103581;x<=103583;x++)W[x]=2;for(x=103595;x<=103694;x++)W[x]=0;for(x=103696;x<=103699;x++)W[x]=0;for(x=103700;x<=103793;x++)W[x]=2;for(x=103794;x<=103890;x++)W[x]=0;for(x=103891;x<=103896;x++)W[x]=2;for(x=103900;x<=103971;x++)W[x]=2;for(x=103972;x<=103977;x++)W[x]=0;for(x=112e3;x<=112101;x++)W[x]=0;const Z1e=[102100,102113,3857,3785,900913],y8e=[104905,104971],g8e=[4326,...Z1e,...y8e],VA=[-20037508342788905e-9,20037508342788905e-9],YG=[-20037508342787e-6,20037508342787e-6],r8={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:VA,origin:YG,dx:1e-5},Y1e={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:VA,origin:YG,dx:1e-5},102100:r8,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:VA,origin:YG,dx:1e-5},3857:r8,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:r8};function ks(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||qp(t)&&qp(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function ka(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Y1e[e]||null}function QD(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function zT(t){if(!uc(t))return!1;const{wkid:e}=t;if(e)return W[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function v8e(t){return!(K1e(t)||J1e(t))}function D_(t){return(t==null?void 0:t.wkid)===4326}function dUt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function Eae(t){return(t==null?void 0:t.wkid)===N_.CGCS2000}function qp(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Z1e.includes(e)}function b8e(t){return(t==null?void 0:t.wkid)===32662}function Aj(t){return t===N_.GCSMARS2000||t===N_.GCSMARS2000_SPHERE}function K1e(t){return Aj(t==null?void 0:t.wkid)}function Pj(t){return t===N_.GCSMOON2000}function J1e(t){return Pj(t==null?void 0:t.wkid)}function w8e(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&g8e.includes(e)}function uc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const X1e={wkid:4326,wkt:v0(Y1e[4326].wkTemplate,{Central_Meridian:"0.0"})},Q1e={wkid:102100,latestWkid:3857},_8e={wkid:32662};function _X(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const x8e=_X(wn),xX=_X(kp),SX=_X(n0),S8e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${wn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},E8e=xX.wkt.toUpperCase(),T8e=SX.wkt.toUpperCase();function $8e(t){if(t!=null&&uc(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(Aj(e))return kp;const r=i==null?void 0:i.toUpperCase();if(i&&r===E8e)return kp;if(Pj(e)||r&&r===T8e)return n0}return wn}function pUt(t){return Aj(t)?kp:Pj(t)?n0:wn}function e5(t){return ks(t,x8e)}function s0(t){return e5(t)||ks(t,xX)||ks(t,SX)}const exe=39.37,M8e=wn.radius*Math.PI/200,txe=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,qE=W,ixe=/UNIT\[([^\]]+)]/i,C8e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),I8e=bs()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Bu=t=>t*t,bg=t=>t*t*t,GA={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bu(.001)},"square-centimeters":{inBaseUnits:Bu(.01)},"square-decimeters":{inBaseUnits:Bu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bu(1e3)},"square-inches":{inBaseUnits:Bu(.0254)},"square-feet":{inBaseUnits:Bu(.3048)},"square-yards":{inBaseUnits:Bu(.9144)},"square-miles":{inBaseUnits:Bu(1609.344)},"square-nautical-miles":{inBaseUnits:Bu(1852)},"square-us-feet":{inBaseUnits:Bu(1200/3937)},acres:{inBaseUnits:.0015625*Bu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*bg(.001)},"cubic-centimeters":{inBaseUnits:1e3*bg(.01)},"cubic-decimeters":{inBaseUnits:1e3*bg(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*bg(1e3)},"cubic-inches":{inBaseUnits:1e3*bg(.0254)},"cubic-feet":{inBaseUnits:1e3*bg(.3048)},"cubic-yards":{inBaseUnits:1e3*bg(.9144)},"cubic-miles":{inBaseUnits:1e3*bg(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},A8e=(()=>{const t={};for(const e in GA)for(const i in GA[e].units)t[i]=e;return t})();function P8e(t,e,i){return t*GA[i].units[e].inBaseUnits}function k8e(t,e,i){return t/GA[i].units[e].inBaseUnits}const O8e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],L8e=["metric","imperial"],rxe=[...L8e,...O8e],R8e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function KG(t){const e=A8e[t];if(!e)throw new Error("unknown type");return e}function Tae(t,e=null){return e=e||KG(t),GA[e].baseUnit===t}function Ln(t,e,i){if(e===i)return t;const r=KG(e);if(r!==KG(i))throw new Error("incompatible units");const n=Tae(e,r)?t:P8e(t,e,r);return Tae(i,r)?n:k8e(n,i,r)}function fUt(t,e,i,r=!1){if(!r&&zT(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=n1(e);return n!==i&&(t=n?Ln(t,n,i):Ln(t*=_c(e),"meters",i)),t}function mUt(t,e,i,r=!1){if(!r&&zT(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=n1(i);return e!==n&&(t=n?Ln(t,e,n):Ln(t,e,"meters")/_c(i)),t}function N8e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function yUt(t){return N8e(t)}function gUt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function vUt(t,e){const i=Ln(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function bUt(t,e){const i=Ln(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function wUt(t,e){const i=Ln(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function _Ut(t,e){const i=Ln(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function xUt(t,e){const i=Ln(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function SUt(t,e){const i=Ln(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function D8e(t,e,i){return Ln(t,e,"meters")/(i*Math.PI/180)}function EX(t){return I8e.fromJSON(t.toLowerCase())||null}function t5(t){if(t!=null&&!v8e(t))return 1;const e=_c(t);return e>1e5?1:e}function nxe(t){return _c(t)>=$8e(t).metersPerDegree?"meters":n1(t)}function _c(t,e=wn.metersPerDegree){return F8e(t,!0)??e}function F8e(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(Aj(i))return kp.metersPerDegree;if(Pj(i))return n0.metersPerDegree;n=qE.values[qE[i]],!n&&e&&C8e.has(i)&&(n=M8e)}else r&&(axe(r)?n=$ae(txe.exec(r),n):oxe(r)&&(n=$ae(ixe.exec(r),n)));return n}function EUt(t){return zT(t)?1:_c(t)}function $ae(t,e){return t!=null&&t[1]?sxe(t[1]):e}function sxe(t){return parseFloat(t.split(",")[1])}function n1(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=qE.units[qE[e]];else if(i){const n=axe(i)?txe:oxe(i)?ixe:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=j8e(s[1]))}}return r!=null?EX(r):null}function TUt(t){const e=n1(t);return e!=null&&rxe.includes(e)?e:null}function $Ut(t){const e=nxe(t);return e!=null&&rxe.includes(e)?e:null}function MUt(t){const e=n1(t);return e==null?null:R8e.get(e)}function oxe(t){return/^GEOCCS/i.test(t)}function axe(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const z8e=1e-7;function j8e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!EX(i)){const r=sxe(t);i=null;const n=qE.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<z8e){i=qE.units[s];break}}return i}function CUt(t){const e=n1(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const U8e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},B8e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V8e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},G8e=bs()(U8e),q8e=bs()(B8e),IUt=bs()(V8e);var fd,ep;let tt=(ep=class extends ve{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return fd.WebMercator;if((e==null?void 0:e.wkid)===4326)return fd.WGS84;const i=new fd;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return D_(this)}get isWebMercator(){return qp(this)}get isGeographic(){return zT(this)}get isWrappable(){return w8e(this)}get metersPerUnit(){return _c(this)}get unit(){return n1(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===fd.WGS84)return new fd(X1e);if(this===fd.WebMercator)return new fd(Q1e);const e=new fd;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=le(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return ks(this,e)}toJSON(e){return this.write(void 0,e)}},fd=ep,ep.GCS_NAD_1927=null,ep.WGS84=null,ep.WebMercator=null,ep.PlateCarree=null,ep);d([g({readOnly:!0})],tt.prototype,"isWGS84",null),d([g({readOnly:!0})],tt.prototype,"isWebMercator",null),d([g({readOnly:!0})],tt.prototype,"isGeographic",null),d([g({readOnly:!0})],tt.prototype,"isWrappable",null),d([g({type:ri,json:{write:!0}})],tt.prototype,"latestWkid",void 0),d([g({readOnly:!0})],tt.prototype,"metersPerUnit",null),d([g({readOnly:!0})],tt.prototype,"unit",null),d([g({type:ri,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],tt.prototype,"wkid",void 0),d([g({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],tt.prototype,"wkt",void 0),d([Ge("wkt"),Ge("web-scene","wkt")],tt.prototype,"writeWkt",null),d([g({type:String,json:{write:!1}})],tt.prototype,"wkt2",void 0),d([g({type:ri,json:{write:!0}})],tt.prototype,"vcsWkid",void 0),d([g({type:ri,json:{write:!0}})],tt.prototype,"latestVcsWkid",void 0),d([g()],tt.prototype,"imageCoordinateSystem",void 0),tt=fd=d([G("esri.geometry.SpatialReference")],tt),tt.prototype.toJSON.isDefaultToJSON=!0,tt.GCS_NAD_1927=ut.freeze(new tt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),tt.WGS84=ut.freeze(new tt(X1e)),tt.WebMercator=ut.freeze(new tt(Q1e)),tt.PlateCarree=ut.freeze(new tt(_8e));let Js=class extends ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=tt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof tt)return e;if(e!=null){const r=new tt;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};d([g()],Js.prototype,"type",void 0),d([g({readOnly:!0})],Js.prototype,"cache",null),d([g({readOnly:!0})],Js.prototype,"extent",null),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Js.prototype,"hasM",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Js.prototype,"hasZ",void 0),d([g({type:tt,json:{write:!0},value:tt.WGS84})],Js.prototype,"spatialReference",void 0),d([je("spatialReference")],Js.prototype,"readSpatialReference",null),Js=d([G("esri.geometry.Geometry")],Js);function HE(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new ae("internal:mesh","Mesh geometries are not supported for this operation")}function H8e(t){t.forEach(HE)}const W8e=57.29577951308232,Z8e=.017453292519943;function Mae(t){return t*W8e}function Cae(t){return t*Z8e}function PUt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/wn.radius))}function JG(t){return t.wkid!=null||t.wkt!=null}const n8=[0,0];function i5(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,n8,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,n8,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,n8,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const p=a[u];c=[],l.push(c);for(let m=0;m<p.length;m++)c.push(e(p[m][0],p[m][1],[0,0],r)),p[m].length>2&&c[m].push(p[m][2]),p[m].length>3&&c[m].push(p[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function B3(t,e){const i=t&&(JG(t)?t:t.spatialReference),r=e&&(JG(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!ks(r,i)||qp(r)&&D_(i)||qp(i)&&D_(r))}function kj(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(JG(e)?e:e.spatialReference);return B3(i,r)?ks(i,r)?le(t):qp(r)?i5(t,ZS,tt.WebMercator,!1,le(t)):D_(r)?i5(t,Oj,tt.WGS84,!1,le(t)):null:null}function ZS(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=Cae(e);return i[0]=Cae(t)*wn.radius,i[1]=wn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Oj(t,e,i=[0,0],r=!1){if(t===VA[0])i[0]=-180;else if(t===VA[1])i[0]=180;else{const n=Mae(t/wn.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=Mae(Math.PI/2-2*Math.atan(Math.exp(-e/wn.radius))),i}function Ym(t,e=!1,i=le(t)){return HE(t),HE(i),i5(t,ZS,tt.WebMercator,e,i)}function YS(t,e=!1,i=le(t)){return HE(t),HE(i),i5(t,Oj,tt.WGS84,e,i)}function lxe(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function Y8e(t){var e;return((e=cxe(t,uxe))==null?void 0:e[0])??null}function K8e(t){var e;return((e=cxe(t,uxe))==null?void 0:e[1])??null}function cxe({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(qp(i))return Oj(t,e,r);if(zT(i))return r[0]=t,r[1]=e,r}return null}const uxe=[0,0];var V3;const s8=[0,0];function Iae(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let gt=V3=class extends Js{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",ut.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new tt(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Ce.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Ce.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=ZS(s.longitude,s.latitude,s8);t=a[0],e=a[1]}}}else Iae(i)?(n=i,i=null):Iae(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?Ce.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Ce.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return K8e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",ZS(i,t,s8)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return Y8e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",ZS(t,e,s8)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new V3;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return V3.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:u}=t;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=ZS(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=Oj(l,c),u=s}return e===l&&i===c&&r===o&&n===a&&s.wkid===u.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=ka(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return lxe(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};d([g({readOnly:!0})],gt.prototype,"cache",null),d([g({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasM",null),d([g({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],gt.prototype,"hasZ",null),d([g({type:Number})],gt.prototype,"latitude",null),d([g({type:Number})],gt.prototype,"longitude",null),d([g({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ai((t=>isNaN(t)?t:$a(t)))],gt.prototype,"x",void 0),d([Ge("x")],gt.prototype,"writeX",null),d([je("x")],gt.prototype,"readX",null),d([g({type:Number,json:{write:!0}})],gt.prototype,"y",void 0),d([g({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],gt.prototype,"z",void 0),d([g({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],gt.prototype,"m",void 0),gt=V3=d([G("esri.geometry.Point")],gt),gt.prototype.toJSON.isDefaultToJSON=!0;let md=class extends Et.ClonableMixin(ve){constructor(...e){super(...e),this.position=new gt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Q_e}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=$a(e.x||0),s.y=$a(e.y||0),s.z=e.hasZ?$a(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new gt;return r.read(e,i),r.x=$a(r.x||0),r.y=$a(r.y||0),r.z=r.hasZ?$a(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};d([g({type:gt,json:{write:{isRequired:!0}}})],md.prototype,"position",void 0),d([Ge("position")],md.prototype,"writePosition",null),d([je("position")],md.prototype,"readPosition",null),d([g({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ai((t=>eBe.normalize($a(t))))],md.prototype,"heading",void 0),d([g({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ai((t=>sa($a(t),-180,180)))],md.prototype,"tilt",void 0),d([g({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ai((t=>sa($a(t,55),1,170)))],md.prototype,"fov",void 0),d([g({type:Q_e,nonNullable:!0,json:{read:!1,write:!1}})],md.prototype,"layout",void 0),md=d([G("esri.Camera")],md);const J8e=md,o8=[0,0];function gk(t,e){return e!=null&&ba(t,e.x,e.y,e.z)}function OUt(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!WE(t,r))return!1;return!0}function X8e(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?ba(t,i,r,n)&&ba(t,i,o,n)&&ba(t,s,o,n)&&ba(t,s,r,n)&&ba(t,i,r,a)&&ba(t,i,o,a)&&ba(t,s,o,a)&&ba(t,s,r,a):ba(t,i,r)&&ba(t,i,o)&&ba(t,s,o)&&ba(t,s,r)}function WE(t,e){return ba(t,e[0],e[1])}function Q8e(t,e){return ba(t,e[0],e[1],e[2])}function ba(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function TX(t,e){return o8[1]=e.y,o8[0]=e.x,eVe(t,o8)}function eVe(t,e){return $X(t.rings,e)}function $X(t,e){if(!t)return!1;if(tVe(t))return Aae(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Aae(i,t[r],e);return i}function tVe(t){return!Array.isArray(t[0][0])}function Aae(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=e[a],[p,m]=e[o];(u<n&&m>=n||m<n&&u>=n)&&c+(n-u)/(m-u)*(p-c)<r&&(s=!s)}return s}function iVe(t,e){return gk(t,e)}function rVe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function nVe(t,e){const{points:i,hasZ:r}=e,n=r?Q8e:WE;for(const s of i)if(n(t,s))return!0;return!1}const F_=[0,0],z_=[0,0],j_=[0,0],U_=[0,0],sVe=[F_,z_,j_,U_],hxe=[[j_,F_],[F_,z_],[z_,U_],[U_,j_]];function oVe(t,e){return aVe(t,e.rings)}function aVe(t,e){F_[0]=t.xmin,F_[1]=t.ymax,z_[0]=t.xmax,z_[1]=t.ymax,j_[0]=t.xmin,j_[1]=t.ymin,U_[0]=t.xmax,U_[1]=t.ymin;for(const i of sVe)if($X(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(WE(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(WE(t,s)||dxe(r,s,hxe))return!0;r=s}}return!1}function lVe(t,e){F_[0]=t.xmin,F_[1]=t.ymax,z_[0]=t.xmax,z_[1]=t.ymax,j_[0]=t.xmin,j_[1]=t.ymin,U_[0]=t.xmax,U_[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(WE(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(WE(t,o)||dxe(n,o,hxe))return!0;n=o}}return!1}const Bs=[0,0];function cVe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],u=t[a][l+1];if(r5(s,o,c,u,Bs)&&!(Bs[0]===s[0]&&Bs[1]===s[1]||Bs[0]===c[0]&&Bs[1]===c[1]||Bs[0]===o[0]&&Bs[1]===o[1]||Bs[0]===u[0]&&Bs[1]===u[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],u=i[l+1];if(r5(o,a,c,u,Bs)&&!(Bs[0]===o[0]&&Bs[1]===o[1]||Bs[0]===c[0]&&Bs[1]===c[1]||Bs[0]===a[0]&&Bs[1]===a[1]||Bs[0]===u[0]&&Bs[1]===u[1]))return!0}}}return!1}function dxe(t,e,i){for(let r=0;r<i.length;r++)if(r5(t,e,i[r][0],i[r][1]))return!0;return!1}function r5(t,e,i,r,n){const[s,o]=t,[a,l]=e,[c,u]=i,[p,m]=r,v=p-c,w=s-c,_=a-s,T=m-u,$=o-u,I=l-o,A=T*_-v*I;if(A===0)return!1;const k=(v*$-T*w)/A,R=(_*$-I*w)/A;return k>=0&&k<=1&&R>=0&&R<=1&&(n&&(n[0]=s+k*(a-s),n[1]=o+k*(l-o)),!0)}function uVe(t){switch(t){case"esriGeometryEnvelope":case"extent":return rVe;case"esriGeometryMultipoint":case"multipoint":return nVe;case"esriGeometryPoint":case"point":return iVe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return oVe;case"esriGeometryPolyline":case"polyline":return lVe}}var Xu;function hVe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function wg(t,e,i){return e==null?i:i==null?e:t(e,i)}let Ut=Xu=class extends Js{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return hVe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?tt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??tt.WGS84}}static fromPoint(t){return new Xu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new gt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Xu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&B3(e,i)&&(t=e.isWebMercator?Ym(t):YS(t,!0)),t.type==="point"?gk(this,t):t.type==="extent"&&X8e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&B3(e,i)&&(t=e.isWebMercator?Ym(t):YS(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!ks(e,i)&&B3(e,i)&&(t=e.isWebMercator?Ym(t):YS(t,!0)),uVe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=wg(Math.min,this.zmin,t.zmin),this.zmax=wg(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=wg(Math.min,this.mmin,t.mmin),this.mmax=wg(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=wg(Math.max,this.zmin,t.zmin),this.zmax=wg(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=wg(Math.max,this.mmin,t.mmin),this.mmax=wg(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=ka(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?YS(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=a8(r.x,t).x),this.spatialReference=new tt(v0((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??ka(r);if(n==null)return this;const s=this._getParts(n).map((l=>l.extent));if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach((l=>{l.hasZ||(o=!1),l.hasM||(a=!1)})),{rings:s.map((l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let p=0;p<c.length;p++)c[p].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let p=0;p<c.length;p++)c[p].push(u)}return c})),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;t=t||ka(o);const[p,m]=t.valid;u=a8(this.xmin,t);const v=u.x,w=u.frameId;u=a8(this.xmax,t);const _=u.x,T=u.frameId,$=v===_&&a>0;if(a>2*m){const I=new Xu(l<c?v:_,n,m,s,o),A=new Xu(p,n,l<c?_:v,s,o),k=new Xu(0,n,m,s,o),R=new Xu(p,n,0,s,o),F=[],B=[];I.contains(k)&&F.push(w),I.contains(R)&&B.push(w),A.contains(k)&&F.push(T),A.contains(R)&&B.push(T);for(let q=w+1;q<T;q++)F.push(q),B.push(q);e.push({extent:I,frameIds:[w]},{extent:A,frameIds:[T]},{extent:k,frameIds:F},{extent:R,frameIds:B})}else v>_||$?e.push({extent:new Xu(v,n,m,s,o),frameIds:[w]},{extent:new Xu(p,n,_,s,o),frameIds:[T]}):e.push({extent:new Xu(v,n,_,s,o),frameIds:[w]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function a8(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}d([g({readOnly:!0})],Ut.prototype,"cache",null),d([g({readOnly:!0})],Ut.prototype,"center",null),d([g({readOnly:!0})],Ut.prototype,"extent",null),d([g({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ut.prototype,"hasM",null),d([g({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ut.prototype,"hasZ",null),d([g({readOnly:!0})],Ut.prototype,"height",null),d([g({readOnly:!0})],Ut.prototype,"width",null),d([g({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Ut.prototype,"xmin",void 0),d([g({type:Number,json:{write:!0}})],Ut.prototype,"ymin",void 0),d([g({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ut.prototype,"mmin",void 0),d([g({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ut.prototype,"zmin",void 0),d([g({type:Number,json:{write:!0}})],Ut.prototype,"xmax",void 0),d([g({type:Number,json:{write:!0}})],Ut.prototype,"ymax",void 0),d([g({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ut.prototype,"mmax",void 0),d([g({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ut.prototype,"zmax",void 0),Ut=Xu=d([G("esri.geometry.Extent")],Ut),Ut.prototype.toJSON.isDefaultToJSON=!0;function ZE(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var XG;function Pae(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function dVe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ou=XG=class extends Js{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):dVe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Ut,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=Pae(Math.min),a=Pae(Math.max);let l,c,u,p,[m,v]=s,[w,_]=s;for(let T=0,$=t.length;T<$;T++){const I=t[T],[A,k]=I;if(m=o(m,A),v=o(v,k),w=a(w,A),_=a(_,k),i&&I.length>2){const R=I[2];l=o(l,R),u=a(u,R)}if(r&&I.length>n){const R=I[n];c=o(c,R),p=a(p,R)}}return e.xmin=m,e.ymin=v,e.xmax=w,e.ymax=_,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=u):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=c,e.mmax=p):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=le(this.points)}addPoint(t){return ZE(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:le(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new XG(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new gt(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new gt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(ZE(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};d([g({readOnly:!0})],ou.prototype,"cache",null),d([g()],ou.prototype,"extent",null),d([g({type:[[Number]],json:{write:{isRequired:!0}}})],ou.prototype,"points",void 0),d([Ge("points")],ou.prototype,"writePoints",null),ou=XG=d([G("esri.geometry.Multipoint")],ou),ou.prototype.toJSON.isDefaultToJSON=!0;function Lj(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function Vv(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var n5;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(n5||(n5={}));function LUt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach((o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)})),r.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}))}return null}function Rj(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function pxe(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function pVe(t,e,i,r){return fxe(t,e,i[r],i[r+1])}function fxe(t,e,i,r){const[n,s]=e,[o,a]=i,[l,c]=r,u=l-o,p=c-a,m=u*u+p*p,v=(n-o)*u+(s-a)*p,w=Math.min(1,Math.max(0,v/m));return t[0]=o+u*w,t[1]=a+p*w,t}function fVe(t,e,i,r,n,s){let o=i,a=r,l=n-o,c=s-a;if(l!==0||c!==0){const u=((t-o)*l+(e-a)*c)/(l*l+c*c);u>1?(o=n,a=s):u>0&&(o+=l*u,a+=c*u)}return l=t-o,c=e-a,l*l+c*c}function mxe(t,e){return pxe(t,e,.5)}function mVe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=Rj(t[r],t[r+1]);return i}function RUt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=Rj(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return pxe(t[n],t[n+1],o)}r+=s}return t[i-1]}function yxe(t,e=n5.X,i=n5.Y){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const a=t[o];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}if(gxe(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function gxe(t){const e=t.length;return e>0&&!_j(t[0],t[e-1])}function yVe(t){"rings"in t&&(gVe(t),vVe(t))}function gVe(t){if("rings"in t)for(const e of t.rings)gxe(e)&&e.push(e[0].slice())}function vVe(t){if(!("rings"in t)||t.rings.length===0||yxe(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function NUt(t){return t.type!=="polygon"&&t.type!=="polyline"||bVe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function bVe(t,e){const i=ka(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,l=-1/0;for(const u of o){const p=wVe(u[0],r,n);a=Math.min(a,p),l=Math.max(l,p),u[0]=p}const c=l-a;s-c<c&&o.forEach((u=>{u[0]<0&&(u[0]+=s)}))}}function wVe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function DUt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every(((n,s)=>n.length===r[s].length))}function FUt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function vxe(t){return t?_Ve(t.rings,t.hasZ??!1):null}function _Ve(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=bxe(t[s],e,n);a&&r.push(a)}if(r.sort(((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a})),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?SVe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function bxe(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const v=t[m],w=t[(m+1)%t.length],[_,T,$]=v,I=_-l,A=T-c,[k,R,F]=w,B=k-l,q=R-c,Y=I*q-B*A;if(o+=Y,r+=(I+B)*Y,n+=(A+q)*Y,e&&v.length>2&&w.length>2){const J=$-u,Q=F-u,te=I*Q-B*J;s+=(J+Q)*te,a+=te}_<i[0]&&(i[0]=_),_>i[1]&&(i[1]=_),T<i[2]&&(i[2]=T),T>i[3]&&(i[3]=T),e&&($<i[4]&&(i[4]=$),$>i[5]&&(i[5]=$))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[r/(6*o)+l,n/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=s/(6*a)+u,p[4]=a)),p}function xVe(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[u,p]=l,m=u-s,v=p-o,[w,_]=c,T=w-s,$=_-o,I=m*$-T*v;n+=I,i+=(m+T)*I,r+=(v+$)*I,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),p<e[2]&&(e[2]=p),p>e[3]&&(e[3]=p)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function SVe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const u=t[l],p=t[l+1];if(u&&p){i[0]=u[0],i[1]=u[1],r[0]=p[0],r[1]=p[1],e&&u.length>2&&p.length>2&&(i[2]=u[2],r[2]=p[2]);const m=Rj(i,r);if(m){n+=m;const v=mxe(u,p);s+=m*v[0],o+=m*v[1],e&&v.length>2&&(a+=m*v[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function wxe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=bxe(Vv(t),t.hasZ,s);o&&n.push(o)}if(n.sort(((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l})),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?EVe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function EVe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,u=t.z;for(;t.nextPoint();){const p=t.x,m=t.y,v=t.z;i[0]=l,i[1]=c,r[0]=p,r[1]=m,e&&(i[2]=u,r[2]=v);const w=Rj(i,r);if(w){n+=w;const _=mxe(i,r);s+=w*_[0],o+=w*_[1],e&&_.length>2&&(a+=w*_[2])}l=p,c=m,u=v}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const TVe=1e-6;function $Ve(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<TVe){const n=wxe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)CVe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const MVe=1/3;function CVe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*MVe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const u=i.getCurrentRingArea(),p=[r,n];return p[0]-=e[0],p[1]-=e[1],p[0]*=u,p[1]*=u,t[0]+=p[0],t[1]+=p[1],t}function Bn(t=RVe){return[t[0],t[1],t[2],t[3]]}function _xe(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function IVe(t,e,i,r,n=Bn()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function zUt(t,e=Bn()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function AVe(t,e,i=new Ut){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function xC(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function jUt(t,e,i){if(e!=null)if("length"in e)QG(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else _xe(i,t)}function UUt(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function BUt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function Nj(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Dj(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function VUt(t){return Nj(t)*Dj(t)}function kae(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function PVe(t){const e=Nj(t),i=Dj(t);return Math.sqrt(e*e+i*i)}function GUt(t,e){return kVe(t,e.x,e.y)}function kVe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function qUt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function HUt(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function OVe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function WUt(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function LVe(t){return t?_xe(t,Oae):Bn(Oae)}function QG(t){return t!=null&&t.length===4}function ZUt(t,e){return QG(t)&&QG(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const Oae=[1/0,1/0,-1/0,-1/0],RVe=[0,0,0,0];function xxe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Sxe(t){return t.points!==void 0}function Exe(t){return t.x!==void 0&&t.y!==void 0}function Txe(t){return t.paths!==void 0}function $xe(t){return t.rings!==void 0}function Mxe(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Iv=Mxe(Math.min),Av=Mxe(Math.max);function MX(t,e){return Txe(e)?YE(t,e.paths,!1,!1):$xe(e)?YE(t,e.rings,!1,!1):Sxe(e)?CX(t,e.points,!1,!1,!1,!1):xxe(e)?Ixe(t,e):(Exe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function vk(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=Cxe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return Bn([e,r,i,n])}function Cxe(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return Bn([e,r,i,n])}function YUt(t,e){return Txe(e)?YE(t,e.paths,!0,!1):$xe(e)?YE(t,e.rings,!0,!1):Sxe(e)?CX(t,e.points,!0,!1,!0,!1):xxe(e)?Ixe(t,e,!0,!1,!0,!1):(Exe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function YE(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,u]=e[0][0],[p,m]=e[0][0];for(let v=0;v<e.length;v++){const w=e[v];for(let _=0;_<w.length;_++){const T=w[_],[$,I]=T;if(c=Iv(c,$),u=Iv(u,I),p=Av(p,$),m=Av(m,I),i&&T.length>2){const A=T[2];s=Iv(s,A),o=Av(o,A)}if(r&&T.length>n){const A=T[n];a=Iv(s,A),l=Av(o,A)}}}return i?r?(t[0]=c,t[1]=u,t[2]=s,t[3]=a,t[4]=p,t[5]=m,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=u,t[2]=s,t[3]=p,t[4]=m,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=u,t[2]=a,t[3]=p,t[4]=m,t[5]=l,t.length=6,t):(t[0]=c,t[1]=u,t[2]=p,t[3]=m,t.length=4,t)}function Ixe(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let u=e.zmin,p=e.zmax,m=e.mmin,v=e.mmax;return n?(u=u||0,p=p||0,s?(m=m||0,v=v||0,t[0]=o,t[1]=l,t[2]=u,t[3]=m,t[4]=a,t[5]=c,t[6]=p,t[7]=v,t):(t[0]=o,t[1]=l,t[2]=u,t[3]=a,t[4]=c,t[5]=p,t)):s?(m=m||0,v=v||0,t[0]=o,t[1]=l,t[2]=m,t[3]=a,t[4]=c,t[5]=v,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function CX(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,u,p,m,[v,w]=e[0],[_,T]=e[0];for(let $=0;$<e.length;$++){const I=e[$],[A,k]=I;if(v=Iv(v,A),w=Iv(w,k),_=Av(_,A),T=Av(T,k),l&&I.length>2){const R=I[2];c=Iv(c,R),u=Av(u,R)}if(a&&I.length>o){const R=I[o];p=Iv(c,R),m=Av(u,R)}}return n?(c=c||0,u=u||0,s?(p=p||0,m=m||0,t[0]=v,t[1]=w,t[2]=c,t[3]=p,t[4]=_,t[5]=T,t[6]=u,t[7]=m,t):(t[0]=v,t[1]=w,t[2]=c,t[3]=_,t[4]=T,t[5]=u,t)):s?(p=p||0,m=m||0,t[0]=v,t[1]=w,t[2]=p,t[3]=_,t[4]=T,t[5]=m,t):(t[0]=v,t[1]=w,t[2]=_,t[3]=T,t)}function NVe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function DVe(t){return t.points!==void 0}function FVe(t){return t.x!==void 0&&t.y!==void 0}function zVe(t){return t.paths!==void 0}function jVe(t){return t.rings!==void 0}const IX=[];function Axe(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function Pxe(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function kxe(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function Oxe(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function AX(t,e=!1,i=!1){return e?i?Oxe(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Pxe(t[0],t[1],t[2],t[3],t[4],t[5]):i?kxe(t[0],t[1],t[2],t[3],t[4],t[5]):Axe(t[0],t[1],t[2],t[3])}function KUt(t){return t?NVe(t)?t:FVe(t)?BVe(t):jVe(t)?Lxe(t):zVe(t)?Rxe(t):DVe(t)?UVe(t):null:null}function UVe(t){const{hasZ:e,hasM:i,points:r}=t;return AX(CX(IX,r,e??!1,i??!1),e,i)}function BVe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?Oxe(e,i,r,n,e,i,r,n):Pxe(e,i,r,e,i,r):s?kxe(e,i,n,e,i,n):Axe(e,i,e,i)}function Lxe(t){const{hasZ:e,hasM:i,rings:r}=t,n=YE(IX,r,e??!1,i??!1);return n?AX(n,e,i):null}function Rxe(t){const{hasZ:e,hasM:i,paths:r}=t,n=YE(IX,r,e??!1,i??!1);return n?AX(n,e,i):null}var G3;function Lae(t){return!Array.isArray(t[0])}function VVe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function GVe(t){var s,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),VVe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=tt.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let or=G3=class extends Js{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map((o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new G3(s)}constructor(t){super(GVe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=vxe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new gt;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=le(t)}get extent(){const t=Lxe(this),{spatialReference:e}=this;return t?new Ut({...t,spatialReference:e}):null}get isSelfIntersecting(){return Z_e(Ce.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),cVe(this.rings)}writeRings(t,e){e.rings=le(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(Lae(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new G3;return t.spatialReference=this.spatialReference,t.rings=le(this.rings),t.curveRings=le(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,c,u,p])=>n===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&p==null||a===p);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!_j(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=kj(t,this.spatialReference);return TX(this,e??t)}isClockwise(t){const e=Lae(t)?t.map((i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y])):t;return yxe(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new gt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new gt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new gt(i[0],i[1],i[2],i[3],this.spatialReference):new gt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(ZE(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new gt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map((n=>new gt(n,i)));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(ZE(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([g({readOnly:!0})],or.prototype,"cache",null),d([g({readOnly:!0})],or.prototype,"centroid",null),d([g({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],or.prototype,"curveRings",void 0),d([Ge("curveRings")],or.prototype,"writeCurveRings",null),d([g({readOnly:!0})],or.prototype,"extent",null),d([g({readOnly:!0})],or.prototype,"isSelfIntersecting",null),d([g({type:[[[Number]]],json:{write:{isRequired:!0}}})],or.prototype,"rings",void 0),d([Ge("rings")],or.prototype,"writeRings",null),or=G3=d([G("esri.geometry.Polygon")],or),or.prototype.toJSON.isDefaultToJSON=!0;var eq;function qVe(t){return!Array.isArray(t[0])}function HVe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function WVe(t){var s,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),HVe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=tt.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let en=eq=class extends Js{constructor(t){super(WVe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=le(t)}get extent(){const t=Rxe(this),{spatialReference:e}=this;return t?new Ut({...t,spatialReference:e}):null}writePaths(t,e){e.paths=le(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(qVe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new eq;return t.spatialReference=this.spatialReference,t.paths=le(this.paths),t.curvePaths=le(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new gt(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new gt(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new gt(i[0],i[1],i[2],i[3],this.spatialReference):new gt(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(ZE(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map((n=>new gt(n,i)));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new gt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(ZE(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};d([g({readOnly:!0})],en.prototype,"cache",null),d([g({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],en.prototype,"curvePaths",void 0),d([Ge("curvePaths")],en.prototype,"writeCurvePaths",null),d([g({readOnly:!0})],en.prototype,"extent",null),d([g({type:[[[Number]]],json:{write:{isRequired:!0}}})],en.prototype,"paths",void 0),d([Ge("paths")],en.prototype,"writePaths",null),en=eq=d([G("esri.geometry.Polyline")],en),en.prototype.toJSON.isDefaultToJSON=!0;function Ea(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function b2(t){return t.points!==void 0}function qA(t){return t.x!==void 0&&t.y!==void 0}function To(t){return t.paths!==void 0||t.curvePaths!==void 0}function zn(t){return t.rings!==void 0||t.curveRings!==void 0}function Hp(t){return t==null?null:t instanceof Js?t:qA(t)?gt.fromJSON(t):To(t)?en.fromJSON(t):zn(t)?or.fromJSON(t):b2(t)?ou.fromJSON(t):Ea(t)?Ut.fromJSON(t):null}function jT(t){return t?qA(t)?"esriGeometryPoint":To(t)?"esriGeometryPolyline":zn(t)?"esriGeometryPolygon":Ea(t)?"esriGeometryEnvelope":b2(t)?"esriGeometryMultipoint":null:null}const ZVe={esriGeometryPoint:gt,esriGeometryPolyline:en,esriGeometryPolygon:or,esriGeometryEnvelope:Ut,esriGeometryMultipoint:ou,esriGeometryMultiPatch:or};function YVe(t){return t&&ZVe[t]||null}const KVe=bs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Rae=bs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),UT={base:Js,key:"type",typeMap:{extent:Ut,multipoint:ou,point:gt,polyline:en,polygon:or}};var tq;let Lg=tq=class extends ve{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new tq({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};d([g({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l8}}}}})],Lg.prototype,"rotation",void 0),d([Ai("rotation")],Lg.prototype,"castRotation",null),d([g({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l8}}}}})],Lg.prototype,"scale",void 0),d([g({types:UT,json:{read:Hp,write:!0,origins:{"web-scene":{read:Hp,write:{overridePolicy:l8}}}}})],Lg.prototype,"targetGeometry",void 0),d([g({type:J8e,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Lg.prototype,"camera",void 0),Lg=tq=d([G("esri.Viewpoint")],Lg);const Ps=Lg;function l8(){return{enabled:!this.camera}}let q3=class Nxe{constructor(){this._emitter=new Nxe.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const p="deref"in u?u.deref():u;p?p==null||p.call(a,s):l=!0}return l&&(o=o.filter((u=>!("deref"in u)||u.deref()!=null)),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map((l=>this.on(l,s)));return t1(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Ci((()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)}))}once(n,s){const o=this.on(n,(a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)}));return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=d([G("esri.core.Evented")],n),n};let i=class extends ut{constructor(){super(...arguments),this._emitter=new q3.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=d([G("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(q3||(q3={}));const Wh=q3;var Ui;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Ui||(Ui={}));var jf;let JVe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},XVe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const zc=new i1(JVe,void 0,(t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}));function Nae(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function c8(t){return t?t instanceof ev?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function u8(t){if(t!=null&&t.length)return t[0]}function QVe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function Dxe(t,e,i,r){e&&e.forEach(((n,s,o)=>{t.push(n),Dxe(t,i.call(r,n,s,o),i,r)}))}const _g=new Set,xg=new Set,Sg=new Set,h8=new Map;let e9e=0;var __;let ev=(__=class extends Wh.EventedAccessor{static isCollection(e){return e!=null&&e instanceof jf}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new AT,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:e9e++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof jf?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return It(this._observable),this._items}set items(e){this._emitBeforeChanges(Ui.ADD)||(this._splice(0,this.length,c8(e)),this._emitAfterChanges(Ui.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return Ci();if(e==="change"){const r=this._chgListeners,n={removed:!1,callback:i};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Ci((()=>{n.removed=!0,r.splice(r.indexOf(n),1)}))}return this._emitter.on(e,i)}once(e,i){const r="deref"in i?()=>i.deref():()=>i,n=this.on(e,(s=>{var o;(o=r())==null||o.call(null,s),n.remove()}));return n}add(e,i){if(It(this._observable),this._emitBeforeChanges(Ui.ADD))return this;const r=this.getNextIndex(i??null);return this._splice(r,0,[e]),this._emitAfterChanges(Ui.ADD),this}addMany(e,i=this._items.length){if(It(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Ui.ADD))return this;const r=this.getNextIndex(i);return this._splice(r,0,c8(e)),this._emitAfterChanges(Ui.ADD),this}at(e){if(It(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(It(this._observable),!this.length||this._emitBeforeChanges(Ui.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Ui.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return It(this._observable),this._createNewInstance({items:this._items.map(le)})}concat(...e){It(this._observable);const i=e.map(c8);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(It(this._observable),!this.length||this._emitBeforeChanges(Ui.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let s=0;s<n;s++)e.call(i,r[s],s,r);this._emitAfterChanges(Ui.REMOVE)}destroyAll(){this.drain(Nae)}destroyMany(e){const i=this.removeMany(e);return i.forEach(Nae),i}every(e,i){return It(this._observable),this._items.every(e,i)}filter(e,i){It(this._observable);const r=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:r})}find(e,i){return It(this._observable),this._items.find(e,i)}findIndex(e,i){return It(this._observable),this._items.findIndex(e,i)}flatten(e,i){It(this._observable);const r=[];return Dxe(r,this,e,i),new jf(r)}forEach(e,i){return It(this._observable),this._items.forEach(e,i)}getItemAt(e){return It(this._observable),this._items[e]}getNextIndex(e){It(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return It(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return It(this._observable),this._items.indexOf(e,i)}join(e=","){return It(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return It(this._observable),this._items.lastIndexOf(e,i)}map(e,i){It(this._observable);const r=this._items.map(e,i);return new jf({items:r})}reorder(e,i=this.length-1){It(this._observable);const r=this.indexOf(e);if(r!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),r!==i){if(this._emitBeforeChanges(Ui.MOVE))return e;this._splice(r,1),this._splice(i,0,[e]),this._emitAfterChanges(Ui.MOVE)}return e}}pop(){if(It(this._observable),!this.length||this._emitBeforeChanges(Ui.REMOVE))return;const e=u8(this._splice(this.length-1,1));return this._emitAfterChanges(Ui.REMOVE),e}push(...e){return It(this._observable),this._emitBeforeChanges(Ui.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ui.ADD)),this.length}reduce(e,i){It(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,i):r.reduce(e)}reduceRight(e,i){It(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,i):r.reduceRight(e)}remove(e){return It(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(It(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ui.REMOVE))return;const i=u8(this._splice(e,1));return this._emitAfterChanges(Ui.REMOVE),i}removeMany(e){if(It(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Ui.REMOVE))return[];const i=e instanceof jf?e.toArray():e,r=this._items,n=[],s=i.length;for(let o=0;o<s;o++){const a=i[o],l=r.indexOf(a);if(l>-1){const c=1+QVe(i,r,o+1,l+1),u=this._splice(l,c);u&&u.length>0&&n.push.apply(n,u),o+=c-1}}return this._emitAfterChanges(Ui.REMOVE),n}reverse(){if(It(this._observable),this._emitBeforeChanges(Ui.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ui.MOVE),this}shift(){if(It(this._observable),!this.length||this._emitBeforeChanges(Ui.REMOVE))return;const e=u8(this._splice(0,1));return this._emitAfterChanges(Ui.REMOVE),e}slice(e=0,i=this.length){return It(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return It(this._observable),this._items.some(e,i)}sort(e){if(It(this._observable),!this.length||this._emitBeforeChanges(Ui.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges(Ui.MOVE),this}_requiresSort(e=(i,r)=>i===r?0:i<r?-1:1){const i=this.length-1;for(let r=0;r<i;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,i,...r){It(this._observable),arguments.length===1&&(i=this.length),i??(i=0);const n=(i?Ui.REMOVE:0)|(r.length?Ui.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,i,r)||[];return this._emitAfterChanges(n),s}toArray(){return It(this._observable),this._items.slice()}toJSON(e){return It(this._observable),this.toArray().map((i=>UA(i)?i.toJSON(e):i))}toLocaleString(){return It(this._observable),this._items.toLocaleString()}toString(){return It(this._observable),this._items.toString()}unshift(...e){return It(this._observable),!e.length||this._emitBeforeChanges(Ui.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ui.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,r){const n=this._items,s=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=uk((()=>this._dispatchChange()))),e<0&&(e+=this.length),i){if(a=n.splice(e,i),this.hasEventListener("before-remove")){const l=zc.acquire();l.target=this,l.cancellable=!0;for(let c=0,u=a.length;c<u;c++)o=a[c],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(c,1),n.splice(e,0,o),e+=1,c-=1,u-=1);zc.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=zc.acquire();l.target=this,l.cancellable=!1;const c=a.length;for(let u=0;u<c;u++)l.reset(a[u]),this.emit("after-remove",l);zc.release(l)}}if(r!=null&&r.length){if(s){const p=[];for(const m of r){const v=s.ensureType(m);v==null&&m!=null||p.push(v)}r=p}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),u=e===this.length;if(l||c){const p=zc.acquire();p.target=this,p.cancellable=!0;const m=zc.acquire();m.target=this,m.cancellable=!1;for(const v of r)l?(p.reset(v),this.emit("before-add",p),p.defaultPrevented||(u?n.push(v):n.splice(e++,0,v),this._set("length",n.length),c&&(m.reset(v),this.emit("after-add",m)))):(u?n.push(v):n.splice(e++,0,v),this._set("length",n.length),m.reset(v),this.emit("after-add",m));zc.release(m),zc.release(p)}else{if(u)for(const p of r)n.push(p);else n.splice(e,0,...r);this._set("length",n.length)}}if((r!=null&&r.length||a!=null&&a.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const l=new XVe(this,r,a,e,i);this.emit("after-splice",l)}return a}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const r=zc.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),i=r.defaultPrevented,zc.release(r)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=zc.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),zc.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const r=i.changes;_g.clear(),xg.clear(),Sg.clear();for(const{added:c,removed:u}of r){if(c)if(Sg.size===0&&xg.size===0)for(const p of c)_g.add(p);else for(const p of c)xg.has(p)?(Sg.add(p),xg.delete(p)):Sg.has(p)||_g.add(p);if(u)if(Sg.size===0&&_g.size===0)for(const p of u)xg.add(p);else for(const p of u)_g.has(p)?_g.delete(p):(Sg.delete(p),xg.add(p))}const n=Ta.acquire();_g.forEach((c=>{n.push(c)}));const s=Ta.acquire();xg.forEach((c=>{s.push(c)}));const o=this._items,a=i.items,l=Ta.acquire();if(Sg.forEach((c=>{a.indexOf(c)!==o.indexOf(c)&&l.push(c)})),i.listeners&&(n.length||s.length||l.length)){const c={target:this,added:n,removed:s,moved:l},u=i.listeners.length;for(let p=0;p<u;p++){const m=i.listeners[p];m.removed||m.callback.call(this,c)}}Ta.release(n),Ta.release(s),Ta.release(l)}_g.clear(),xg.clear(),Sg.clear()}},jf=__,__.ofType=e=>{if(!e)return jf;if(h8.has(e))return h8.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const n in e.typeMap){const s=e.typeMap[n].prototype.declaredClass;i?i+=` | ${s}`:i=s}let r=class extends jf{};return d([QJ({Type:e,ensureType:typeof e=="function"?Zr(e):Bp(e)})],r.prototype,"itemType",void 0),r=d([G(`esri.core.Collection<${i}>`)],r),h8.set(e,r),r},__);d([g()],ev.prototype,"_updating",void 0),d([g()],ev.prototype,"length",void 0),d([g()],ev.prototype,"items",null),d([g({readOnly:!0})],ev.prototype,"updating",null),ev=jf=d([G("esri.core.Collection")],ev);const et=ev;let Kd=class extends et{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(C_e((()=>this._refresh()),Up))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new et(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};d([g()],Kd.prototype,"getCollections",void 0),d([g()],Kd.prototype,"getChildrenFunction",void 0),d([g()],Kd.prototype,"itemFilterFunction",void 0),Kd=d([G("esri.core.CollectionFlattener")],Kd);let HA=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new AT,this._items=new Set}get length(){return It(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return It(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach((r=>{e(r)||this._items.delete(r)})),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){It(this._observable),yield*this._items}};const Fxe=new FinalizationRegistry((t=>{t.close()}));function t9e(t,e){Fxe.register(t,e,e)}function i9e(t){Fxe.unregister(t)}function zxe(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,a;const l=s[s.length-1];return r9e(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function r9e(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const n9e={statsWorker:()=>Re(()=>import("./statsWorker-CHCUN0eN.js"),__vite__mapDeps([0,1,2,3])),geometryEngineWorker:()=>Re(()=>import("./geometryEngineWorker-BNwIbmiN.js"),__vite__mapDeps([4,5,6,7,8])),arcadeGeometryOperatorsWorker:()=>Re(()=>import("./operatorsWorker-BPv1osdT.js"),[]),CSVSourceWorker:()=>Re(()=>import("./CSVSourceWorker-BrYVQ4qq.js"),__vite__mapDeps([9,10,8,11,12,13,14,15,16,17,18,19,20,1,2,3,21,22,23,24,25,26,27,28])),EdgeProcessingWorker:()=>Re(()=>import("./EdgeProcessingWorker-Bflj28er.js"),__vite__mapDeps([29,30,31,32,33,34,35,36,37,38,39,40])),ElevationSamplerWorker:()=>Re(()=>import("./ElevationSamplerWorker-BxB1E7L5.js"),__vite__mapDeps([41,25,42,43,44,45,46,47,48,49,50,32,51])),FeatureServiceSnappingSourceWorker:()=>Re(()=>import("./FeatureServiceSnappingSourceWorker-jP8gGwc9.js"),__vite__mapDeps([52,12,13,8,14,15,11,16,17,18,19,20,1,2,3,21,22,23,24,25,26,53,54,55,56,57])),GeoJSONSourceWorker:()=>Re(()=>import("./GeoJSONSourceWorker-Bv4BPQdI.js"),__vite__mapDeps([58,15,11,16,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,59,10,28,60])),LercWorker:()=>Re(()=>import("./LercWorker-D8RJAwXz.js"),[]),MemorySourceWorker:()=>Re(()=>import("./MemorySourceWorker-ByGKgPRK.js"),__vite__mapDeps([61,15,11,16,62,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,28,60,10])),PBFDecoderWorker:()=>Re(()=>import("./PBFDecoderWorker-Ddgdgl6r.js"),__vite__mapDeps([63,64,15,11,16,54,55])),FeaturePipelineWorker:()=>Re(()=>import("./FeaturePipelineWorker-is4hQYag.js"),__vite__mapDeps([65,66,67,39,68,69,13,8,19,15,11,16,70,71,72,73,74,75,76,26,14,17,18,20,1,2,3,21,22,77,78,79,80,56,54,55,81,59,10,28,60,82,83,84])),PointCloudWorker:()=>Re(()=>import("./PointCloudWorker-CMzFQ_-Q.js"),__vite__mapDeps([85,86,44,87,88,89,90,37,91,45,46,47,92,93])),RasterWorker:()=>Re(()=>import("./RasterWorker-IYEAwsYq.js"),__vite__mapDeps([94,95,96,97,7,98,99,100,101])),SceneLayerSnappingSourceWorker:()=>Re(()=>import("./SceneLayerSnappingSourceWorker-CzascGVF.js"),__vite__mapDeps([102,103,104,44,93,45,87,105,92,32,34,35,36,31,33,37,38,39,40])),SceneLayerWorker:()=>Re(()=>import("./SceneLayerWorker-Bo3eIsHC.js"),__vite__mapDeps([106,42,50,107,48,104,44,93,45,87,108,90,37,109,110,111,112,113,91,86,46,47,92])),WFSSourceWorker:()=>Re(()=>import("./WFSSourceWorker-CK9toHy2.js"),__vite__mapDeps([114,15,11,16,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,59,10,60,115,116])),WorkerTileHandler:()=>Re(()=>import("./WorkerTileHandler-hhyoUSDl.js"),__vite__mapDeps([117,118,119,120,55,74,121,122,39,75])),Lyr3DWorker:()=>Re(()=>import("./Lyr3DWorker-DkOklP7p.js"),[]),Feature3DPipelineWorker:()=>Re(()=>import("./Feature3DPipelineWorker-DxrxoKSs.js"),__vite__mapDeps([123,14,15,11,16,17,18,19,13,8,20,1,2,3,21,22,45,124,111,49,42,107,48,125,88,126,127,128,129,130,32,36,131,104,44,93,87,103,37,113,112,132,91,86,46,47,92,133,134,135,136,31,33,137,138,139,110,25,56,54,55])),TextureCompressionWorker:()=>Re(()=>import("./TextureCompressionWorker-Dl8maHM-.js"),__vite__mapDeps([140,130]))},jxe="worker:port-closed";var eo;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(eo||(eo={}));let s9e=0;function Uxe(){return s9e++}function o9e(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function WA(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function PX(t,e,i,r){if(e.type===eo.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==eo.INVOKE&&e.type!==eo.RESPONSE)return void t.postMessage(e);let n;if(o9e(i)?(n=Dae(i.transferList),e.data=i.result):(n=Dae(r),e.data=i),n){if(ge("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case eo.INVOKE:throw o;case eo.RESPONSE:return void PX(t,{type:eo.RESPONSE,jobId:e.jobId,error:WA(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function ZA(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Dae(t){if(!(t!=null&&t.length))return null;if(ge("esri-workers-arraybuffer-transfer"))return t;const e=t.filter((i=>!a9e(i)));return e.length?e:null}function a9e(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function t6t(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===jxe;if(!(io(e)||i))throw e;return}}const{CLOSE:Fae,ABORT:zae,INVOKE:jae,RESPONSE:_M,OPEN_PORT:Uae,ON:l9e}=eo,c9e=2;let u9e=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===eo.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var au;let KE=(au=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new au(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),au.clients.set(s,n),r.port2}static loadWorker(e){const i=n9e[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new u9e((s=>this._onInvokeMessage(s))),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:Fae}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ae(jxe,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=Uxe();return new Promise(((a,l)=>{if(_u(n))return this._processWork(),void l(gr());const c=Fh(n,(()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),Wr(p.abortHandle),this._post({type:zae,jobId:o}),l(gr()))})),u={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,u),this._post({type:jae,jobId:o,methodName:e,abortable:n!=null},i,s)}))}createInvokeProxy(e){return zxe(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:eo.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Ci((()=>{r.port1.postMessage({type:eo.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Uae,port:e.port2}),e.port1}_processWork(){var o,a;if(this._outJobs.size>=c9e)return;const e=((o=this._jobQueue)==null?void 0:o.pop())??((a=this._lowPriorityJobQueue)==null?void 0:a.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then((l=>s.resolve(l))).catch((l=>s.reject(l)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{Wr(e.abortHandle),e.reject(gr(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,i){const r=ZA(e);if(r)switch(r.type){case _M:this._onResponseMessage(r);break;case jae:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case zae:this._onAbortMessage(r);break;case Fae:this._onCloseMessage();break;case Uae:this._onOpenPortMessage(r);break;case l9e:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&au.clients.get(this)===e&&e.destroy(),au.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[i];try{if(!u&&i&&i.includes(".")){const p=i.split(".");for(let m=0;m<p.length-1;m++)c=c[p[m]],u=c[p[m+1]]}if(typeof u!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=u.apply(c,n)}catch(p){return void this._post({type:_M,jobId:r,error:WA(p)})}ef(l)?(a.set(r,{controller:o,promise:l}),l.then((p=>{a.has(r)&&(a.delete(r),this._post({type:_M,jobId:r},p))}),(p=>{a.has(r)&&(a.delete(r),io(p)||this._post({type:_M,jobId:r,error:WA(p||{message:`Error encountered at method ${i}`})}))}))):this._post({type:_M,jobId:r},l)}_onOpenPortMessage(e){new au(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,(s=>{i.postMessage(s)})),n=PT(e.port,"message",(s=>{const o=ZA(s);(o==null?void 0:o.type)===eo.CLOSE&&(n.remove(),r.remove(),i.close())}))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),Wr(o.abortHandle),r?o.reject(ae.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return PX(this._port,e,i,r)}},au.kernelInfo={buildDate:I1e,fullVersion:mX,revision:A1e},au.clients=new Map,au),h9e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new HA,this._ongoingLowPriorityJobsQueue=new HA}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise(((r,n)=>{let s=!0;const o=a=>{Rr(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];ef(l)?this._clientPromises[a]=l.then((c=>(this._clients[a]=new KE(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a])),(()=>(o(n),null))):(this._clients[a]=new KE(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}}))}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then((a=>a==null?void 0:a.invoke(e,i,r)))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(gr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(gr(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then((r=>r==null?void 0:r.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,i9e(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=gc();((r==null?void 0:r.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then((a=>a==null?void 0:a.jobAdded()))}return n.promise}createInvokeProxy(e){return zxe(this,e)}on(e,i){return Promise.all(this._clientPromises).then((()=>t1(this._clients.map((r=>r.on(e,i))))))}openPorts(){return new Promise((e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then((s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)}))}))}get test(){}};const d9e={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=PG(t.url))!=null&&o.after)?r:"array-buffer";const n=await ni(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let BI;var Gbe,qbe;const p9e=((Gbe=globalThis.esriConfig)==null?void 0:Gbe.locale)??((qbe=globalThis.dojoConfig)==null?void 0:qbe.locale);var Hbe;const VI=(Hbe=globalThis.document)==null?void 0:Hbe.documentElement;function Bxe(){var i;const t=VI==null?void 0:VI.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return p9e??t??e??"en"}function fl(){return BI===void 0&&(BI=Bxe()),BI}const f9e=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function kX(t=fl()){var e;return(e=f9e.exec(t))==null?void 0:e.groups}const H3=[];function Fj(t){return H3.push(t),Ci((()=>{H3.splice(H3.indexOf(t),1)}))}const W3=[];function OX(t){return W3.push(t),Ci((()=>W3.splice(W3.indexOf(t),1)))}function Bae(){const t=Bxe();BI!==t&&([...W3].forEach((e=>e(t))),BI=t,[...H3].forEach((e=>e(t))))}var Wbe;(Wbe=globalThis.addEventListener)==null||Wbe.call(globalThis,"languagechange",Bae),VI&&new MutationObserver((()=>{Bae()})).observe(VI,{attributeFilter:["lang"]});const xu="system",o0="unknown",Wp="UTC",m9e=Intl.DateTimeFormat().resolvedOptions().timeZone,Vae=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class s1 extends Error{}class y9e extends s1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class g9e extends s1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class v9e extends s1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class KS extends s1{}class Vxe extends s1{constructor(e){super(`Invalid unit ${e}`)}}class Wo extends s1{}class Eg extends s1{constructor(){super("Zone is an abstract class")}}const at="numeric",zh="short",pc="long",s5={year:at,month:at,day:at},Gxe={year:at,month:zh,day:at},b9e={year:at,month:zh,day:at,weekday:zh},qxe={year:at,month:pc,day:at},Hxe={year:at,month:pc,day:at,weekday:pc},Wxe={hour:at,minute:at},Zxe={hour:at,minute:at,second:at},Yxe={hour:at,minute:at,second:at,timeZoneName:zh},Kxe={hour:at,minute:at,second:at,timeZoneName:pc},Jxe={hour:at,minute:at,hourCycle:"h23"},Xxe={hour:at,minute:at,second:at,hourCycle:"h23"},Qxe={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:zh},eSe={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:pc},tSe={year:at,month:at,day:at,hour:at,minute:at},iSe={year:at,month:at,day:at,hour:at,minute:at,second:at},rSe={year:at,month:zh,day:at,hour:at,minute:at},nSe={year:at,month:zh,day:at,hour:at,minute:at,second:at},w9e={year:at,month:zh,day:at,weekday:zh,hour:at,minute:at},sSe={year:at,month:pc,day:at,hour:at,minute:at,timeZoneName:zh},oSe={year:at,month:pc,day:at,hour:at,minute:at,second:at,timeZoneName:zh},aSe={year:at,month:pc,day:at,weekday:pc,hour:at,minute:at,timeZoneName:pc},lSe={year:at,month:pc,day:at,weekday:pc,hour:at,minute:at,second:at,timeZoneName:pc};class o1{get type(){throw new Eg}get name(){throw new Eg}get ianaName(){return this.name}get isUniversal(){throw new Eg}offsetName(e,i){throw new Eg}formatOffset(e,i){throw new Eg}offset(e){throw new Eg}equals(e){throw new Eg}get isValid(){throw new Eg}}let d8=null;class zj extends o1{static get instance(){return d8===null&&(d8=new zj),d8}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return bSe(e,i,r)}formatOffset(e,i){return GI(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const iq=new Map;function _9e(t){let e=iq.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),iq.set(t,e)),e}const x9e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function S9e(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,c,u]=r;return[o,n,s,a,l,c,u]}function E9e(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=x9e[s];s==="era"?r[a]=o:ei(a)||(r[a]=parseInt(o,10))}return r}const p8=new Map;class gl extends o1{static create(e){let i=p8.get(e);return i===void 0&&p8.set(e,i=new gl(e)),i}static resetCache(){p8.clear(),iq.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=gl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return bSe(e,i,r,this.name)}formatOffset(e,i){return GI(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=_9e(this.name);let[n,s,o,a,l,c,u]=r.formatToParts?E9e(r,i):S9e(r,i);a==="BC"&&(n=-Math.abs(n)+1);const m=Uj({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let v=+i;const w=v%1e3;return v-=w>=0?w:1e3+w,(m-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Gae={};function T9e(t,e={}){const i=JSON.stringify([t,e]);let r=Gae[i];return r||(r=new Intl.ListFormat(t,e),Gae[i]=r),r}const rq=new Map;function nq(t,e={}){const i=JSON.stringify([t,e]);let r=rq.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),rq.set(i,r)),r}const sq=new Map;function $9e(t,e={}){const i=JSON.stringify([t,e]);let r=sq.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),sq.set(i,r)),r}const oq=new Map;function M9e(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=oq.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),oq.set(n,s)),s}let SC=null;function C9e(){return SC||(SC=new Intl.DateTimeFormat().resolvedOptions().locale,SC)}const aq=new Map;function cSe(t){let e=aq.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),aq.set(t,e)),e}const lq=new Map;function I9e(t){let e=lq.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...uSe,...e}),lq.set(t,e)}return e}function A9e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=nq(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=nq(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function P9e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function k9e(t){const e=[];for(let i=1;i<=12;i++){const r=ht.utc(2009,i,1);e.push(t(r))}return e}function O9e(t){const e=[];for(let i=1;i<=7;i++){const r=ht.utc(2016,11,13+i);e.push(t(r))}return e}function RL(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function L9e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||cSe(t.locale).numberingSystem==="latn"}class R9e{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=$9e(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):FX(e,3);return ds(i,this.padTo)}}}class N9e{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&gl.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=nq(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class D9e{constructor(e,i,r){this.opts={style:"long",...r},!i&&gSe()&&(this.rtf=M9e(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):s7e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const uSe={firstDay:1,minimalDays:4,weekend:[6,7]};class Ji{static fromOpts(e){return Ji.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||Nn.defaultLocale,a=o||(s?"en-US":C9e()),l=i||Nn.defaultNumberingSystem,c=r||Nn.defaultOutputCalendar,u=uq(n)||Nn.defaultWeekSettings;return new Ji(a,l,c,u,o)}static resetCache(){SC=null,rq.clear(),sq.clear(),oq.clear(),aq.clear(),lq.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return Ji.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,l]=A9e(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=P9e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=L9e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Ji.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,uq(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return RL(this,e,xSe,()=>{const r=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=k9e(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return RL(this,e,TSe,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=O9e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return RL(this,void 0,()=>$Se,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ht.utc(2016,11,13,9),ht.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return RL(this,e,MSe,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[ht.utc(-40,1,1),ht.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new R9e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new N9e(e,this.intl,i)}relFormatter(e={}){return new D9e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return T9e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cSe(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:vSe()?I9e(this.locale):uSe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let f8=null;class fs extends o1{static get utcInstance(){return f8===null&&(f8=new fs(0)),f8}static instance(e){return e===0?fs.utcInstance:new fs(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new fs(Bj(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${GI(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${GI(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return GI(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class F9e extends o1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function mv(t,e){if(ei(t)||t===null)return e;if(t instanceof o1)return t;if(G9e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?zj.instance:i==="utc"||i==="gmt"?fs.utcInstance:fs.parseSpecifier(i)||gl.create(t)}else return Gv(t)?fs.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new F9e(t)}const LX={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},qae={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},z9e=LX.hanidec.replace(/[\[|\]]/g,"").split("");function j9e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(LX.hanidec)!==-1)e+=z9e.indexOf(t[i]);else for(const n in qae){const[s,o]=qae[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const cq=new Map;function U9e(){cq.clear()}function Vu({numberingSystem:t},e=""){const i=t||"latn";let r=cq.get(i);r===void 0&&(r=new Map,cq.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${LX[i]}${e}`),r.set(e,n)),n}let Hae=()=>Date.now(),Wae="system",Zae=null,Yae=null,Kae=null,Jae=60,Xae,Qae=null;class Nn{static get now(){return Hae}static set now(e){Hae=e}static set defaultZone(e){Wae=e}static get defaultZone(){return mv(Wae,zj.instance)}static get defaultLocale(){return Zae}static set defaultLocale(e){Zae=e}static get defaultNumberingSystem(){return Yae}static set defaultNumberingSystem(e){Yae=e}static get defaultOutputCalendar(){return Kae}static set defaultOutputCalendar(e){Kae=e}static get defaultWeekSettings(){return Qae}static set defaultWeekSettings(e){Qae=uq(e)}static get twoDigitCutoffYear(){return Jae}static set twoDigitCutoffYear(e){Jae=e%100}static get throwOnInvalid(){return Xae}static set throwOnInvalid(e){Xae=e}static resetCaches(){Ji.resetCache(),gl.resetCache(),ht.resetCache(),U9e()}}class Ah{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const hSe=[0,31,59,90,120,151,181,212,243,273,304,334],dSe=[0,31,60,91,121,152,182,213,244,274,305,335];function fu(t,e){return new Ah("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function RX(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function pSe(t,e,i){return i+(bk(t)?dSe:hSe)[e-1]}function fSe(t,e){const i=bk(t)?dSe:hSe,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function NX(t,e){return(t-e+7)%7+1}function o5(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=pSe(r,n,s),a=NX(RX(r,n,s),i);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=YA(c,e,i)):l>YA(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...Vj(t)}}function ele(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=NX(RX(r,1,e),i),a=w2(r);let l=n*7+s-o-7+e,c;l<1?(c=r-1,l+=w2(c)):l>a?(c=r+1,l-=w2(r)):c=r;const{month:u,day:p}=fSe(c,l);return{year:c,month:u,day:p,...Vj(t)}}function m8(t){const{year:e,month:i,day:r}=t,n=pSe(e,i,r);return{year:e,ordinal:n,...Vj(t)}}function tle(t){const{year:e,ordinal:i}=t,{month:r,day:n}=fSe(e,i);return{year:e,month:r,day:n,...Vj(t)}}function ile(t,e){if(!ei(t.localWeekday)||!ei(t.localWeekNumber)||!ei(t.localWeekYear)){if(!ei(t.weekday)||!ei(t.weekNumber)||!ei(t.weekYear))throw new KS("Cannot mix locale-based week fields with ISO-based week fields");return ei(t.localWeekday)||(t.weekday=t.localWeekday),ei(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ei(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function B9e(t,e=4,i=1){const r=jj(t.weekYear),n=mu(t.weekNumber,1,YA(t.weekYear,e,i)),s=mu(t.weekday,1,7);return r?n?s?!1:fu("weekday",t.weekday):fu("week",t.weekNumber):fu("weekYear",t.weekYear)}function V9e(t){const e=jj(t.year),i=mu(t.ordinal,1,w2(t.year));return e?i?!1:fu("ordinal",t.ordinal):fu("year",t.year)}function mSe(t){const e=jj(t.year),i=mu(t.month,1,12),r=mu(t.day,1,a5(t.year,t.month));return e?i?r?!1:fu("day",t.day):fu("month",t.month):fu("year",t.year)}function ySe(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=mu(e,0,23)||e===24&&i===0&&r===0&&n===0,o=mu(i,0,59),a=mu(r,0,59),l=mu(n,0,999);return s?o?a?l?!1:fu("millisecond",n):fu("second",r):fu("minute",i):fu("hour",e)}function ei(t){return typeof t>"u"}function Gv(t){return typeof t=="number"}function jj(t){return typeof t=="number"&&t%1===0}function G9e(t){return typeof t=="string"}function q9e(t){return Object.prototype.toString.call(t)==="[object Date]"}function gSe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function vSe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function H9e(t){return Array.isArray(t)?t:[t]}function rle(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function W9e(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function JE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uq(t){if(t==null)return null;if(typeof t!="object")throw new Wo("Week settings must be an object");if(!mu(t.firstDay,1,7)||!mu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!mu(e,1,7)))throw new Wo("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function mu(t,e,i){return jj(t)&&t>=e&&t<=i}function Z9e(t,e){return t-e*Math.floor(t/e)}function ds(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function tv(t){if(!(ei(t)||t===null||t===""))return parseInt(t,10)}function db(t){if(!(ei(t)||t===null||t===""))return parseFloat(t)}function DX(t){if(!(ei(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function FX(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function bk(t){return t%4===0&&(t%100!==0||t%400===0)}function w2(t){return bk(t)?366:365}function a5(t,e){const i=Z9e(e-1,12)+1,r=t+(e-i)/12;return i===2?bk(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Uj(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function nle(t,e,i){return-NX(RX(t,1,e),i)+e-1}function YA(t,e=4,i=1){const r=nle(t,e,i),n=nle(t+1,e,i);return(w2(t)-r+n)/7}function hq(t){return t>99?t:t>Nn.twoDigitCutoffYear?1900+t:2e3+t}function bSe(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Bj(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function wSe(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Wo(`Invalid unit value ${t}`);return e}function l5(t,e){const i={};for(const r in t)if(JE(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=wSe(n)}return i}function GI(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${ds(i,2)}:${ds(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${ds(i,2)}${ds(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Vj(t){return W9e(t,["hour","minute","second","millisecond"])}const Y9e=["January","February","March","April","May","June","July","August","September","October","November","December"],_Se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],K9e=["J","F","M","A","M","J","J","A","S","O","N","D"];function xSe(t){switch(t){case"narrow":return[...K9e];case"short":return[..._Se];case"long":return[...Y9e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const SSe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ESe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],J9e=["M","T","W","T","F","S","S"];function TSe(t){switch(t){case"narrow":return[...J9e];case"short":return[...ESe];case"long":return[...SSe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const $Se=["AM","PM"],X9e=["Before Christ","Anno Domini"],Q9e=["BC","AD"],e7e=["B","A"];function MSe(t){switch(t){case"narrow":return[...e7e];case"short":return[...Q9e];case"long":return[...X9e];default:return null}}function t7e(t){return $Se[t.hour<12?0:1]}function i7e(t,e){return TSe(e)[t.weekday-1]}function r7e(t,e){return xSe(e)[t.month-1]}function n7e(t,e){return MSe(e)[t.year<0?0:1]}function s7e(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${n[t][0]}`;case-1:return p?"yesterday":`last ${n[t][0]}`;case 0:return p?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=n[t],u=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function sle(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const o7e={D:s5,DD:Gxe,DDD:qxe,DDDD:Hxe,t:Wxe,tt:Zxe,ttt:Yxe,tttt:Kxe,T:Jxe,TT:Xxe,TTT:Qxe,TTTT:eSe,f:tSe,ff:rSe,fff:sSe,ffff:aSe,F:iSe,FF:nSe,FFF:oSe,FFFF:lSe};class ia{static create(e,i={}){return new ia(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return o7e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return ds(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,w)=>this.loc.extract(e,v,w),o=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",a=()=>r?t7e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(v,w)=>r?r7e(e,v):s(w?{month:v}:{month:v,day:"numeric"},"month"),c=(v,w)=>r?i7e(e,v):s(w?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),u=v=>{const w=ia.macroTokenToFormatOpts(v);return w?this.formatWithSystemDefault(e,w):v},p=v=>r?n7e(e,v):s({era:v},"era"),m=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(v)}};return sle(ia.parseFormat(i),m)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const u=r(c);return u?this.num(l.get(u),c.length):c},s=ia.parseFormat(i),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return sle(s,n(a))}}const CSe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function BT(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function VT(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function GT(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function ISe(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=tv(e[i+n]);return[r,null,i+n]}}const ASe=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,a7e=`(?:${ASe.source}?(?:\\[(${CSe.source})\\])?)?`,zX=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,PSe=RegExp(`${zX.source}${a7e}`),jX=RegExp(`(?:T${PSe.source})?`),l7e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,c7e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,u7e=/(\d{4})-?(\d{3})/,h7e=ISe("weekYear","weekNumber","weekDay"),d7e=ISe("year","ordinal"),p7e=/(\d{4})-(\d\d)-(\d\d)/,kSe=RegExp(`${zX.source} ?(?:${ASe.source}|(${CSe.source}))?`),f7e=RegExp(`(?: ${kSe.source})?`);function _2(t,e,i){const r=t[e];return ei(r)?i:tv(r)}function m7e(t,e){return[{year:_2(t,e),month:_2(t,e+1,1),day:_2(t,e+2,1)},null,e+3]}function qT(t,e){return[{hours:_2(t,e,0),minutes:_2(t,e+1,0),seconds:_2(t,e+2,0),milliseconds:DX(t[e+3])},null,e+4]}function wk(t,e){const i=!t[e]&&!t[e+1],r=Bj(t[e+1],t[e+2]),n=i?null:fs.instance(r);return[{},n,e+3]}function _k(t,e){const i=t[e]?gl.create(t[e]):null;return[{},i,e+1]}const y7e=RegExp(`^T?${zX.source}$`),g7e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function v7e(t){const[e,i,r,n,s,o,a,l,c]=t,u=e[0]==="-",p=l&&l[0]==="-",m=(v,w=!1)=>v!==void 0&&(w||v&&u)?-v:v;return[{years:m(db(i)),months:m(db(r)),weeks:m(db(n)),days:m(db(s)),hours:m(db(o)),minutes:m(db(a)),seconds:m(db(l),l==="-0"),milliseconds:m(DX(c),p)}]}const b7e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function UX(t,e,i,r,n,s,o){const a={year:e.length===2?hq(tv(e)):tv(e),month:_Se.indexOf(i)+1,day:tv(r),hour:tv(n),minute:tv(s)};return o&&(a.second=tv(o)),t&&(a.weekday=t.length>3?SSe.indexOf(t)+1:ESe.indexOf(t)+1),a}const w7e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function _7e(t){const[,e,i,r,n,s,o,a,l,c,u,p]=t,m=UX(e,n,r,i,s,o,a);let v;return l?v=b7e[l]:c?v=0:v=Bj(u,p),[m,new fs(v)]}function x7e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const S7e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,E7e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,T7e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ole(t){const[,e,i,r,n,s,o,a]=t;return[UX(e,n,r,i,s,o,a),fs.utcInstance]}function $7e(t){const[,e,i,r,n,s,o,a]=t;return[UX(e,a,i,r,n,s,o),fs.utcInstance]}const M7e=BT(l7e,jX),C7e=BT(c7e,jX),I7e=BT(u7e,jX),A7e=BT(PSe),OSe=VT(m7e,qT,wk,_k),P7e=VT(h7e,qT,wk,_k),k7e=VT(d7e,qT,wk,_k),O7e=VT(qT,wk,_k);function L7e(t){return GT(t,[M7e,OSe],[C7e,P7e],[I7e,k7e],[A7e,O7e])}function R7e(t){return GT(x7e(t),[w7e,_7e])}function N7e(t){return GT(t,[S7e,ole],[E7e,ole],[T7e,$7e])}function D7e(t){return GT(t,[g7e,v7e])}const F7e=VT(qT);function z7e(t){return GT(t,[y7e,F7e])}const j7e=BT(p7e,f7e),U7e=BT(kSe),B7e=VT(qT,wk,_k);function V7e(t){return GT(t,[j7e,OSe],[U7e,B7e])}const ale="Invalid Duration",LSe={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},G7e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...LSe},jc=146097/400,px=146097/4800,q7e={years:{quarters:4,months:12,weeks:jc/7,days:jc,hours:jc*24,minutes:jc*24*60,seconds:jc*24*60*60,milliseconds:jc*24*60*60*1e3},quarters:{months:3,weeks:jc/28,days:jc/4,hours:jc*24/4,minutes:jc*24*60/4,seconds:jc*24*60*60/4,milliseconds:jc*24*60*60*1e3/4},months:{weeks:px/7,days:px,hours:px*24,minutes:px*24*60,seconds:px*24*60*60,milliseconds:px*24*60*60*1e3},...LSe},Fw=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],H7e=Fw.slice(0).reverse();function Tg(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Li(r)}function RSe(t,e){let i=e.milliseconds??0;for(const r of H7e.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function lle(t,e){const i=RSe(t,e)<0?-1:1;Fw.reduceRight((r,n)=>{if(ei(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),Fw.reduce((r,n)=>{if(ei(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function W7e(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Li{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?q7e:G7e;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Ji.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Li.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Wo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Li({values:l5(e,Li.normalizeUnit),loc:Ji.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Gv(e))return Li.fromMillis(e);if(Li.isDuration(e))return e;if(typeof e=="object")return Li.fromObject(e);throw new Wo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=D7e(e);return r?Li.fromObject(r,i):Li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=z7e(e);return r?Li.fromObject(r,i):Li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Wo("need to specify a reason the Duration is invalid");const r=e instanceof Ah?e:new Ah(e,i);if(Nn.throwOnInvalid)throw new v9e(r);return new Li({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Vxe(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ia.create(this.loc,r).formatDurationFromString(this,e):ale}toHuman(e={}){if(!this.isValid)return ale;const i=Fw.map(r=>{const n=this.values[r];return ei(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=FX(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ht.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?RSe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e),r={};for(const n of Fw)(JE(i.values,n)||JE(this.values,n))&&(r[n]=i.get(n)+this.get(n));return Tg(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=wSe(e(this.values[r],r));return Tg(this,{values:i},!0)}get(e){return this[Li.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...l5(e,Li.normalizeUnit)};return Tg(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return Tg(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return lle(this.matrix,e),Tg(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=W7e(this.normalize().shiftToAll().toObject());return Tg(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Li.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of Fw)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;Gv(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Gv(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return lle(this.matrix,i),Tg(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Tg(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Fw)if(!i(this.values[r],e.values[r]))return!1;return!0}}const fx="Invalid Interval";function Z7e(t,e){return!t||!t.isValid?kn.invalid("missing or invalid start"):!e||!e.isValid?kn.invalid("missing or invalid end"):e<t?kn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class kn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Wo("need to specify a reason the Interval is invalid");const r=e instanceof Ah?e:new Ah(e,i);if(Nn.throwOnInvalid)throw new g9e(r);return new kn({invalid:r})}static fromDateTimes(e,i){const r=xM(e),n=xM(i),s=Z7e(r,n);return s??new kn({start:r,end:n})}static after(e,i){const r=Li.fromDurationLike(i),n=xM(e);return kn.fromDateTimes(n,n.plus(r))}static before(e,i){const r=Li.fromDurationLike(i),n=xM(e);return kn.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=ht.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=ht.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return kn.fromDateTimes(s,a);if(o){const c=Li.fromISO(n,i);if(c.isValid)return kn.after(s,c)}else if(l){const c=Li.fromISO(r,i);if(c.isValid)return kn.before(a,c)}}return kn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?kn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(xM).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(kn.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=Li.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(kn.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:kn.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return kn.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(kn.fromDateTimes(i,l.time)),i=null);return kn.merge(n)}difference(...e){return kn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:fx}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=s5,i={}){return this.isValid?ia.create(this.s.loc.clone(i),e).formatInterval(this):fx}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:fx}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:fx}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:fx}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:fx}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Li.invalid(this.invalidReason)}mapEndpoints(e){return kn.fromDateTimes(e(this.s),e(this.e))}}class NL{static hasDST(e=Nn.defaultZone){const i=ht.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return gl.isValidZone(e)}static normalizeZone(e){return mv(e,Nn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Ji.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Ji.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Ji.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ji.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ji.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Ji.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Ji.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Ji.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Ji.create(i,null,"gregory").eras(e)}static features(){return{relative:gSe(),localeWeek:vSe()}}}function cle(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Li.fromMillis(r).as("days"))}function Y7e(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=cle(l,c);return(u-u%7)/7}],["days",cle]],n={},s=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,n[l]=c(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n),t>e&&(a=t,n[l]--,t=s.plus(n))):t=a);return[t,n,a,o]}function K7e(t,e,i,r){let[n,s,o,a]=Y7e(t,e,i);const l=e-n,c=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);c.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const u=Li.fromObject(s,r);return c.length>0?Li.fromMillis(l,r).shiftTo(...c).plus(u):u}const J7e="missing Intl.DateTimeFormat.formatToParts support";function qi(t,e=i=>i){return{regex:t,deser:([i])=>e(j9e(i))}}const X7e="",NSe=`[ ${X7e}]`,DSe=new RegExp(NSe,"g");function Q7e(t){return t.replace(/\./g,"\\.?").replace(DSe,NSe)}function ule(t){return t.replace(/\./g,"").replace(DSe," ").toLowerCase()}function Gu(t,e){return t===null?null:{regex:RegExp(t.map(Q7e).join("|")),deser:([i])=>t.findIndex(r=>ule(i)===ule(r))+e}}function hle(t,e){return{regex:t,deser:([,i,r])=>Bj(i,r),groups:e}}function DL(t){return{regex:t,deser:([e])=>e}}function eGe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tGe(t,e){const i=Vu(e),r=Vu(e,"{2}"),n=Vu(e,"{3}"),s=Vu(e,"{4}"),o=Vu(e,"{6}"),a=Vu(e,"{1,2}"),l=Vu(e,"{1,3}"),c=Vu(e,"{1,6}"),u=Vu(e,"{1,9}"),p=Vu(e,"{2,4}"),m=Vu(e,"{4,6}"),v=T=>({regex:RegExp(eGe(T.val)),deser:([$])=>$,literal:!0}),_=(T=>{if(t.literal)return v(T);switch(T.val){case"G":return Gu(e.eras("short"),0);case"GG":return Gu(e.eras("long"),0);case"y":return qi(c);case"yy":return qi(p,hq);case"yyyy":return qi(s);case"yyyyy":return qi(m);case"yyyyyy":return qi(o);case"M":return qi(a);case"MM":return qi(r);case"MMM":return Gu(e.months("short",!0),1);case"MMMM":return Gu(e.months("long",!0),1);case"L":return qi(a);case"LL":return qi(r);case"LLL":return Gu(e.months("short",!1),1);case"LLLL":return Gu(e.months("long",!1),1);case"d":return qi(a);case"dd":return qi(r);case"o":return qi(l);case"ooo":return qi(n);case"HH":return qi(r);case"H":return qi(a);case"hh":return qi(r);case"h":return qi(a);case"mm":return qi(r);case"m":return qi(a);case"q":return qi(a);case"qq":return qi(r);case"s":return qi(a);case"ss":return qi(r);case"S":return qi(l);case"SSS":return qi(n);case"u":return DL(u);case"uu":return DL(a);case"uuu":return qi(i);case"a":return Gu(e.meridiems(),0);case"kkkk":return qi(s);case"kk":return qi(p,hq);case"W":return qi(a);case"WW":return qi(r);case"E":case"c":return qi(i);case"EEE":return Gu(e.weekdays("short",!1),1);case"EEEE":return Gu(e.weekdays("long",!1),1);case"ccc":return Gu(e.weekdays("short",!0),1);case"cccc":return Gu(e.weekdays("long",!0),1);case"Z":case"ZZ":return hle(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return hle(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return DL(/[a-z_+-/]{1,256}?/i);case" ":return DL(/[^\S\n\r]/);default:return v(T)}})(t)||{invalidReason:J7e};return _.token=t,_}const iGe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rGe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=iGe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function nGe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function sGe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(JE(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function oGe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ei(t.z)||(i=gl.create(t.z)),ei(t.Z)||(i||(i=new fs(t.Z)),r=t.Z),ei(t.q)||(t.M=(t.q-1)*3+1),ei(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ei(t.u)||(t.S=DX(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let y8=null;function aGe(){return y8||(y8=ht.fromMillis(1555555555555)),y8}function lGe(t,e){if(t.literal)return t;const i=ia.macroTokenToFormatOpts(t.val),r=USe(i,e);return r==null||r.includes(void 0)?t:r}function FSe(t,e){return Array.prototype.concat(...t.map(i=>lGe(i,e)))}class zSe{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=FSe(ia.parseFormat(i),e),this.units=this.tokens.map(r=>tGe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=nGe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=sGe(e,this.regex,this.handlers),[n,s,o]=r?oGe(r):[null,null,void 0];if(JE(r,"a")&&JE(r,"H"))throw new KS("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function jSe(t,e,i){return new zSe(t,i).explainFromTokens(e)}function cGe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=jSe(t,e,i);return[r,n,s,o]}function USe(t,e){if(!t)return null;const r=ia.create(e,t).dtFormatter(aGe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>rGe(o,t,s))}const g8="Invalid DateTime",dle=864e13;function EC(t){return new Ah("unsupported zone",`the zone "${t.name}" is not supported`)}function v8(t){return t.weekData===null&&(t.weekData=o5(t.c)),t.weekData}function b8(t){return t.localWeekData===null&&(t.localWeekData=o5(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function pb(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ht({...i,...e,old:i})}function BSe(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function FL(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Z3(t,e,i){return BSe(Uj(t),e,i)}function ple(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,a5(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Li.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Uj(s);let[l,c]=BSe(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function mx(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=ht.fromObject(t,{...i,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return ht.invalid(new Ah("unparsable",`the input "${n}" can't be parsed as ${r}`))}function zL(t,e,i=!0){return t.isValid?ia.create(Ji.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function w8(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=ds(t.c.year,i?6:4),e?(r+="-",r+=ds(t.c.month),r+="-",r+=ds(t.c.day)):(r+=ds(t.c.month),r+=ds(t.c.day)),r}function fle(t,e,i,r,n,s){let o=ds(t.c.hour);return e?(o+=":",o+=ds(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=ds(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=ds(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=ds(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=ds(Math.trunc(-t.o/60)),o+=":",o+=ds(Math.trunc(-t.o%60))):(o+="+",o+=ds(Math.trunc(t.o/60)),o+=":",o+=ds(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const VSe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},uGe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hGe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},GSe=["year","month","day","hour","minute","second","millisecond"],dGe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],pGe=["year","ordinal","hour","minute","second","millisecond"];function fGe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Vxe(t);return e}function mle(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fGe(t)}}function mGe(t){if(TC===void 0&&(TC=Nn.now()),t.type!=="iana")return t.offset(TC);const e=t.name;let i=dq.get(e);return i===void 0&&(i=t.offset(TC),dq.set(e,i)),i}function yle(t,e){const i=mv(e.zone,Nn.defaultZone);if(!i.isValid)return ht.invalid(EC(i));const r=Ji.fromObject(e);let n,s;if(ei(t.year))n=Nn.now();else{for(const l of GSe)ei(t[l])&&(t[l]=VSe[l]);const o=mSe(t)||ySe(t);if(o)return ht.invalid(o);const a=mGe(i);[n,s]=Z3(t,a,i)}return new ht({ts:n,zone:i,loc:r,o:s})}function gle(t,e,i){const r=ei(i.round)?!0:i.round,n=(o,a)=>(o=FX(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function vle(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let TC;const dq=new Map;class ht{constructor(e){const i=e.zone||Nn.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ah("invalid input"):null)||(i.isValid?null:EC(i));this.ts=ei(e.ts)?Nn.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=Gv(e.o)&&!e.old?e.o:i.offset(this.ts);n=FL(this.ts,a),r=Number.isNaN(n.year)?new Ah("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||Ji.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new ht({})}static local(){const[e,i]=vle(arguments),[r,n,s,o,a,l,c]=i;return yle({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=vle(arguments),[r,n,s,o,a,l,c]=i;return e.zone=fs.utcInstance,yle({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=q9e(e)?e.valueOf():NaN;if(Number.isNaN(r))return ht.invalid("invalid input");const n=mv(i.zone,Nn.defaultZone);return n.isValid?new ht({ts:r,zone:n,loc:Ji.fromObject(i)}):ht.invalid(EC(n))}static fromMillis(e,i={}){if(Gv(e))return e<-dle||e>dle?ht.invalid("Timestamp out of range"):new ht({ts:e,zone:mv(i.zone,Nn.defaultZone),loc:Ji.fromObject(i)});throw new Wo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Gv(e))return new ht({ts:e*1e3,zone:mv(i.zone,Nn.defaultZone),loc:Ji.fromObject(i)});throw new Wo("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=mv(i.zone,Nn.defaultZone);if(!r.isValid)return ht.invalid(EC(r));const n=Ji.fromObject(i),s=l5(e,mle),{minDaysInFirstWeek:o,startOfWeek:a}=ile(s,n),l=Nn.now(),c=ei(i.specificOffset)?r.offset(l):i.specificOffset,u=!ei(s.ordinal),p=!ei(s.year),m=!ei(s.month)||!ei(s.day),v=p||m,w=s.weekYear||s.weekNumber;if((v||u)&&w)throw new KS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&u)throw new KS("Can't mix ordinal dates with month/day");const _=w||s.weekday&&!v;let T,$,I=FL(l,c);_?(T=dGe,$=uGe,I=o5(I,o,a)):u?(T=pGe,$=hGe,I=m8(I)):(T=GSe,$=VSe);let A=!1;for(const J of T){const Q=s[J];ei(Q)?A?s[J]=$[J]:s[J]=I[J]:A=!0}const k=_?B9e(s,o,a):u?V9e(s):mSe(s),R=k||ySe(s);if(R)return ht.invalid(R);const F=_?ele(s,o,a):u?tle(s):s,[B,q]=Z3(F,c,r),Y=new ht({ts:B,zone:r,o:q,loc:n});return s.weekday&&v&&e.weekday!==Y.weekday?ht.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${Y.toISO()}`):Y.isValid?Y:ht.invalid(Y.invalid)}static fromISO(e,i={}){const[r,n]=L7e(e);return mx(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=R7e(e);return mx(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=N7e(e);return mx(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ei(e)||ei(i))throw new Wo("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=Ji.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=cGe(o,e,i);return u?ht.invalid(u):mx(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return ht.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=V7e(e);return mx(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Wo("need to specify a reason the DateTime is invalid");const r=e instanceof Ah?e:new Ah(e,i);if(Nn.throwOnInvalid)throw new y9e(r);return new ht({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=USe(e,Ji.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return FSe(ia.parseFormat(e),Ji.fromObject(i)).map(n=>n.val).join("")}static resetCache(){TC=void 0,dq.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?v8(this).weekYear:NaN}get weekNumber(){return this.isValid?v8(this).weekNumber:NaN}get weekday(){return this.isValid?v8(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?b8(this).weekday:NaN}get localWeekNumber(){return this.isValid?b8(this).weekNumber:NaN}get localWeekYear(){return this.isValid?b8(this).weekYear:NaN}get ordinal(){return this.isValid?m8(this.c).ordinal:NaN}get monthShort(){return this.isValid?NL.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?NL.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?NL.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?NL.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=Uj(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const l=r-o*i,c=r-a*i,u=FL(l,o),p=FL(c,a);return u.hour===p.hour&&u.minute===p.minute&&u.second===p.second&&u.millisecond===p.millisecond?[pb(this,{ts:l}),pb(this,{ts:c})]:[this]}get isInLeapYear(){return bk(this.year)}get daysInMonth(){return a5(this.year,this.month)}get daysInYear(){return this.isValid?w2(this.year):NaN}get weeksInWeekYear(){return this.isValid?YA(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?YA(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=ia.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(fs.instance(e),i)}toLocal(){return this.setZone(Nn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=mv(e,Nn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=Z3(o,s,e)}return pb(this,{ts:n,zone:e})}else return ht.invalid(EC(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return pb(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=l5(e,mle),{minDaysInFirstWeek:r,startOfWeek:n}=ile(i,this.loc),s=!ei(i.weekYear)||!ei(i.weekNumber)||!ei(i.weekday),o=!ei(i.ordinal),a=!ei(i.year),l=!ei(i.month)||!ei(i.day),c=a||l,u=i.weekYear||i.weekNumber;if((c||o)&&u)throw new KS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new KS("Can't mix ordinal dates with month/day");let p;s?p=ele({...o5(this.c,r,n),...i},r,n):ei(i.ordinal)?(p={...this.toObject(),...i},ei(i.day)&&(p.day=Math.min(a5(p.year,p.month),p.day))):p=tle({...m8(this.c),...i});const[m,v]=Z3(p,this.o,this.zone);return pb(this,{ts:m,o:v})}plus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e);return pb(this,ple(this,i))}minus(e){if(!this.isValid)return this;const i=Li.fromDurationLike(e).negate();return pb(this,ple(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Li.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?ia.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):g8}toLocaleString(e=s5,i={}){return this.isValid?ia.create(this.loc.clone(i),e).formatDateTime(this):g8}toLocaleParts(e={}){return this.isValid?ia.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=w8(this,o);return a+="T",a+=fle(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?w8(this,e==="extended"):null}toISOWeekDate(){return zL(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+fle(this,o==="extended",i,e,r,s):null}toRFC2822(){return zL(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return zL(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?w8(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),zL(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():g8}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Li.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=H9e(i).map(Li.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=K7e(a,l,s,n);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(ht.now(),e,i)}until(e){return this.isValid?kn.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ht.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),gle(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?gle(e.base||ht.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ht.isDateTime))throw new Wo("min requires all arguments be DateTimes");return rle(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ht.isDateTime))throw new Wo("max requires all arguments be DateTimes");return rle(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=Ji.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return jSe(o,e,i)}static fromStringExplain(e,i,r={}){return ht.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=Ji.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new zSe(s,e)}static fromFormatParser(e,i,r={}){if(ei(e)||ei(i))throw new Wo("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=Ji.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new Wo(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=i.explainFromTokens(e);return u?ht.invalid(u):mx(a,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return s5}static get DATE_MED(){return Gxe}static get DATE_MED_WITH_WEEKDAY(){return b9e}static get DATE_FULL(){return qxe}static get DATE_HUGE(){return Hxe}static get TIME_SIMPLE(){return Wxe}static get TIME_WITH_SECONDS(){return Zxe}static get TIME_WITH_SHORT_OFFSET(){return Yxe}static get TIME_WITH_LONG_OFFSET(){return Kxe}static get TIME_24_SIMPLE(){return Jxe}static get TIME_24_WITH_SECONDS(){return Xxe}static get TIME_24_WITH_SHORT_OFFSET(){return Qxe}static get TIME_24_WITH_LONG_OFFSET(){return eSe}static get DATETIME_SHORT(){return tSe}static get DATETIME_SHORT_WITH_SECONDS(){return iSe}static get DATETIME_MED(){return rSe}static get DATETIME_MED_WITH_SECONDS(){return nSe}static get DATETIME_MED_WITH_WEEKDAY(){return w9e}static get DATETIME_FULL(){return sSe}static get DATETIME_FULL_WITH_SECONDS(){return oSe}static get DATETIME_HUGE(){return aSe}static get DATETIME_HUGE_WITH_SECONDS(){return lSe}}function xM(t){if(ht.isDateTime(t))return t;if(t&&t.valueOf&&Gv(t.valueOf()))return ht.fromJSDate(t);if(t&&typeof t=="object")return ht.fromObject(t);throw new Wo(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const yGe="shortOffset";function gGe(t){return"timeZoneIANA"in t}function vGe(t){return t.startsWith("UTC")}function c5(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?Y3(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?bGe(i):null}}}}}function Y3(t,e=xu){return t?gGe(t)?t.timeZoneIANA:wGe(t,e):e}function bGe(t){return{timeZoneIANA:t}}function wGe(t,e=xu){if(!t||!Vae.has(t.timeZone))return e;const i=Vae.get(t.timeZone);return vGe(t.timeZone)||t.respectsDaylightSaving?i:_Ge(i)}function _Ge(t){const e=ht.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${fs.instance(-i).formatOffset(0,"narrow")}`}function xGe(t,e,i,r,n){if(e&&n==="date")return{timeZone:Wp,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=i===o0;return{timeZone:o?n==="timestamp-offset"?void 0:t??Wp:i,timeZoneName:o&&s?yGe:void 0}}function SGe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map((r=>r.toLowerCase())));return t===xu||t===o0||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const EGe={year:void 0,month:void 0,day:void 0,weekday:void 0},TGe={hour:void 0,minute:void 0,second:void 0},qSe={timeZone:Wp},hd={year:"numeric",month:"numeric",day:"numeric"},SM={year:"numeric",month:"long",day:"numeric"},EM={year:"numeric",month:"short",day:"numeric"},TM={year:"numeric",month:"long",weekday:"long",day:"numeric"},iv={hour:"numeric",minute:"numeric"},Pb={...iv,second:"numeric"},HSe={hourCycle:"h23"},$M={...iv,...HSe},MM={...Pb,...HSe},WSe={"short-date":hd,"short-date-short-time":{...hd,...iv},"short-date-short-time-24":{...hd,...$M},"short-date-long-time":{...hd,...Pb},"short-date-long-time-24":{...hd,...MM},"short-date-le":hd,"short-date-le-short-time":{...hd,...iv},"short-date-le-short-time-24":{...hd,...$M},"short-date-le-long-time":{...hd,...Pb},"short-date-le-long-time-24":{...hd,...MM},"long-month-day-year":SM,"long-month-day-year-short-time":{...SM,...iv},"long-month-day-year-short-time-24":{...SM,...$M},"long-month-day-year-long-time":{...SM,...Pb},"long-month-day-year-long-time-24":{...SM,...MM},"day-short-month-year":EM,"day-short-month-year-short-time":{...EM,...iv},"day-short-month-year-short-time-24":{...EM,...$M},"day-short-month-year-long-time":{...EM,...Pb},"day-short-month-year-long-time-24":{...EM,...MM},"long-date":TM,"long-date-short-time":{...TM,...iv},"long-date-short-time-24":{...TM,...$M},"long-date-long-time":{...TM,...Pb},"long-date-long-time-24":{...TM,...MM},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":iv,"long-time":Pb},$Ge=bs()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),ZSe={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},MGe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var Zbe;const CGe=(Zbe=MGe.find((({type:t})=>t==="month")))==null?void 0:Zbe.value.toLowerCase();function YSe(){var i;const t=fl(),e=(i=kX(t))==null?void 0:i.language;return(e&&ZSe[e])??t}CGe!=="mart"&&(ZSe.bs="sr-Latn-CS");let pq=new WeakMap;const Gj=WSe["short-date-short-time"];function IGe(t){let e=pq.get(t);if(!e){const i=YSe(),r=BX(t.timeZone??xu),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),pq.set(t,e)}return e}function CM(t){return WSe[t]}function yu(t,e=Gj){return IGe(e).format(t)}function AGe(t,e=Gj){return yu(new Date(t),{...e,...qSe,...TGe})}function PGe(t,e=Gj){return yu(new Date(`1970-01-01T${t}Z`),{...e,...qSe,...EGe})}function kGe(t,e=Gj){if(e.timeZone)return yu(new Date(t),e);const i=ht.fromISO(t,{setZone:!0}),r=i.offset===0?Wp:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:YSe()})}function BX(t){switch(t){case xu:return m9e;case o0:return Wp;default:return t}}OX((()=>{pq=new WeakMap}));const OGe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let K3=new WeakMap,KSe={};function fq(t){var i;const e=t||KSe;if(!K3.has(e)){const r=fl(),n=(i=kX(r))==null?void 0:i.language,s=n&&OGe[n]||r;K3.set(e,new Intl.NumberFormat(s,t))}return K3.get(e)}function n6t(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function B_(t,e){return Object.is(t,-0)&&(t=0),fq(e).format(t)}function s6t(t,e=fl()){var r,n;if(!t)return null;let i=ble.get(e);if(!i){const s=fq().formatToParts(12345.6),o=[...fq({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map(((v,w)=>[v,w]))),l=new RegExp(`[${(r=s.find((v=>v.type==="group")))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(n=s.find((v=>v.type==="decimal")))==null?void 0:n.value}]`),u=new RegExp(`[${o.join("")}]`,"g"),p=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;i=v=>{if((v=v.trim().replaceAll(l,"").replace(c,".").replace(u,(_=>String(a.get(_)))).replaceAll(p,"").replaceAll(m,"-"))==="")return null;const w=Number(v);return isNaN(w)?null:w},ble.set(e,i)}return i(t)}OX((()=>{K3=new WeakMap,KSe={}}));const ble=new Map,JSe=()=>Ce.getLogger("esri.intl.substitute");function V_(t,e,i={}){const{format:r={}}=i;return v0(t,(n=>LGe(n,e,r)))}function LGe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=rk(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?RGe(o,a):n?NGe(o,n):VX(o)}function RGe(t,e){switch(e.type){case"date":return yu(t,e.intlOptions);case"number":return B_(t,e.intlOptions);default:return JSe().warn("missing format descriptor for key {key}"),VX(t)}}function NGe(t,e){switch(e.toLowerCase()){case"dateformat":return yu(t);case"numberformat":return B_(t);default:return JSe().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?yu(t):/^numberformat/i.test(e)?B_(t):VX(t)}}function VX(t){switch(typeof t){case"string":return t;case"number":return B_(t);case"boolean":return""+t;default:return t instanceof Date?yu(t):""}}const XSe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function DGe(t){return t in XSe}function wle(t){if(DGe(t)){const e=XSe[t];return e===!0?t:e}return null}const $C=[],x2=new Map;function _le(t){for(const e of x2.keys())e2e(t.pattern,e)&&x2.delete(e)}function FGe(t){return $C.includes(t)||(_le(t),$C.unshift(t)),Ci((()=>{const e=$C.indexOf(t);e>-1&&($C.splice(e,1),_le(t))}))}async function qj(t){const e=fl();x2.has(t)||x2.set(t,zGe(t,e));const i=x2.get(t);return i&&await jGe.add(i),i}function QSe(t){const e=kX(t);return e?wle(t)??wle(e.language):null}async function zGe(t,e){const i=[];for(const r of $C)if(e2e(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new ae("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ae("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function e2e(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}OX((()=>{x2.clear()}));const jGe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=gc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function UGe(t,e,i,r){const n=e.exec(i);if(!n)throw new ae("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=QSe(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await xle(t(c))}catch(p){if(c===l)throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{u=await xle(t(l))}catch(m){throw new ae("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return u}async function xle(t){if(Sle.fetchBundleAsset!=null)return Sle.fetchBundleAsset(t);const e=await ni(t,{responseType:"text"});return JSON.parse(e.data)}let BGe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return UGe(this.getAssetUrl,this.matcher,e,i)}};function VGe(t){return new BGe(t)}const Sle={};FGe(VGe({pattern:"esri/",location:Pr}));const Ele={};function GGe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...Ele.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ele.baseUrl),e}let qGe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((i=>{this[i]=(...r)=>e[i](...r)}))}},J3=class{constructor(){this._dispatcher=new qGe,this._workerPostMessage({type:eo.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){AD((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){AD((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const i=ZA(e);if(i&&i.type===eo.OPEN){const{modulePath:r,jobId:n}=i;let s=await KE.loadWorker(r);s||(s=await import(r));const o=KE.connect(s);this._workerPostMessage({type:eo.OPENED,jobId:n,data:o})}}};const mq=()=>Ce.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:HGe}=eo,WGe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let jL,UL;const Tle="Failed to create Worker. Fallback to execute module in main thread";async function ZGe(){if(!ge("esri-workers"))return $le(new J3);if(!jL&&!UL)try{const e=WGe.split("{CONFIGURATION}").join(YGe());jL=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){UL=e||{}}let t;if(jL)try{t=new Worker(jL,{name:"esri-worker-"+KGe++})}catch{mq().warn(Tle,UL),t=new J3}else mq().warn(Tle,UL),t=new J3;return $le(t)}async function $le(t){return new Promise((e=>{function i(n){const s=ZA(n);s&&s.type===HGe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),mq().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new J3).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)}))}function YGe(){let t;if(fi.default!=null){const n={...fi};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(fi));t.assetsPath=oc(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?oc(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=fl(),t.has={"esri-csp-restrictions":ge("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ge("esri-2d-update-debug"),"esri-2d-log-updating":ge("esri-2d-log-updating"),"featurelayer-pbf":ge("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ge("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ge("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ge("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ge("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ge("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ge("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ge("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ge("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ge("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ge("featurelayer-snapshot-enabled"),"esri-atomics":ge("esri-atomics"),"esri-shared-array-buffer":ge("esri-shared-array-buffer"),"esri-tiles-debug":ge("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ge("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ge("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=oc(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=oc(t.workers.workerPath):t.workers.workerPath=oc(Pr("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=fi.workers.loaderConfig,i=GGe({baseUrl:e==null?void 0:e.baseUrl,locale:fl(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:I1e,fullVersion:mX,revision:A1e}})}let KGe=0;const{ABORT:Mle,INVOKE:JGe,OPEN:XGe,OPENED:QGe,RESPONSE:IM}=eo;let eqe=class t2e{static async create(e){const i=await ZGe();return new t2e(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(r=>{r.preventDefault(),Ce.getLogger("esri.core.workers.WorkerOwner").error(r)}))}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=Uxe();return new Promise(((s,o)=>{const a={resolve:s,reject:o,abortHandle:qJ(r,(()=>{this._outJobs.delete(n),this._post({type:Mle,jobId:n})}))};this._outJobs.set(n,a),this._post({type:XGe,jobId:n,modulePath:e})}))}_onMessage(e){const i=ZA(e);if(i)switch(i.type){case QGe:this._onOpenedMessage(i);break;case IM:this._onResponseMessage(i);break;case Mle:this._onAbortMessage(i);break;case JGe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=d9e[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(u){return void this._post({type:IM,jobId:r,error:WA(u)})}ef(c)?(a.set(r,{controller:o,promise:c}),c.then((u=>{a.has(r)&&(a.delete(r),this._post({type:IM,jobId:r},u))}),(u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+i}),io(u)||this._post({type:IM,jobId:r,error:WA(u||{message:`Error encountered at method ${i}`})}))}))):this._post({type:IM,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Wr(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Wr(s.abortHandle),r?s.reject(ae.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return PX(this.worker,e,i,r)}};const Cle=ge("host-browser")?Math.min(navigator.hardwareConcurrency-1,ge("workers-pool-size")??8):0;let zw=ge("esri-mobile")?Math.min(Cle,3):Cle;zw||(zw=ge("safari")&&ge("mac")?7:2);let Ile=0;const X3=[];function tqe(){i2e()}async function BL(t,e){const i=new h9e,{registryTarget:r,...n}=e;return await i.open(t,n),r&&t9e(r,i),i}async function iqe(t,e={}){if(typeof t!="string")throw new ae("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ge("host-webworker")&&!ge("esri-workers")&&(i="local"),i==="local"){let r=await KE.loadWorker(t);r||(r=await import(t)),Rr(e.signal);const n=e.client||r;return BL([KE.connect(r,e.schedule)],{...e,client:n})}if(await i2e(),Rr(e.signal),i==="dedicated"){const r=Ile++%zw;return BL([await X3[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,zw);if(r<zw){const n=new Array(r);for(let s=0;s<r;++s){const o=Ile++%zw;n[s]=X3[o].open(t,e)}return BL(n,e)}}return BL(X3.map((r=>r.open(t,e))),e)}let VL=null;async function i2e(){if(VL)return VL;new AbortController;const t=[];for(let e=0;e<zw;e++){const i=eqe.create(e).then((r=>(X3[e]=r,r)));t.push(i)}return VL=Promise.all(t),VL}function b0(){return[0,0,0]}function rqe(t){return[t[0],t[1],t[2]]}function HT(t,e,i){return[t,e,i]}function nqe(t,e,i){return[t,e,i]}function sqe(t,e=b0()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function r2e(){return b0()}function n2e(){return HT(1,1,1)}function s2e(){return HT(1,0,0)}function o2e(){return HT(0,1,0)}function a2e(){return HT(0,0,1)}const oqe=r2e(),l2e=n2e(),aqe=s2e(),lqe=o2e(),cqe=a2e();Object.freeze(Object.defineProperty({__proto__:null,ONES:l2e,UNIT_X:aqe,UNIT_Y:lqe,UNIT_Z:cqe,ZEROS:oqe,clone:rqe,create:b0,freeze:nqe,fromArray:sqe,fromValues:HT,ones:n2e,unitX:s2e,unitY:o2e,unitZ:a2e,zeros:r2e},Symbol.toStringTag,{value:"Module"}));const c6t=Math.PI/180,u6t=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,$g=wn.radius,qu=wn.eccentricitySquared,uqe={a1:$g*qu,a2:$g*qu*$g*qu,a3:$g*qu*qu/2,a4:$g*qu*$g*qu*2.5,a5:$g*qu+$g*qu*qu/2,a6:1-qu},h6t={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:wn.radius,f:wn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:n0.radius,f:n0.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:kp.radius,f:kp.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:kp.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var we;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(we||(we={}));const hqe={[we.WGS84]:{[we.CGCS2000]:jr,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:jr,[we.SPHERICAL_ECEF]:HI,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:S2,[we.PLATE_CARREE]:E2,[we.WGS84]:jr,[we.WGS84_ECEF]:M2},[we.CGCS2000]:{[we.CGCS2000]:jr,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:jr,[we.SPHERICAL_ECEF]:HI,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:S2,[we.PLATE_CARREE]:E2,[we.WGS84]:jr,[we.WGS84_ECEF]:M2},[we.GCSMARS2000]:{[we.CGCS2000]:null,[we.GCSMARS2000]:jr,[we.GCSMOON2000]:null,[we.LON_LAT]:jr,[we.SPHERICAL_ECEF]:null,[we.SPHERICAL_MARS_PCPF]:kle,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:null,[we.PLATE_CARREE]:null,[we.WGS84]:null,[we.WGS84_ECEF]:null},[we.GCSMOON2000]:{[we.CGCS2000]:null,[we.GCSMARS2000]:null,[we.GCSMOON2000]:jr,[we.LON_LAT]:jr,[we.SPHERICAL_ECEF]:null,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:Ple,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:null,[we.PLATE_CARREE]:null,[we.WGS84]:null,[we.WGS84_ECEF]:null},[we.WEB_MERCATOR]:{[we.CGCS2000]:qI,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:qI,[we.SPHERICAL_ECEF]:pqe,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:jr,[we.PLATE_CARREE]:yqe,[we.WGS84]:qI,[we.WGS84_ECEF]:fqe},[we.WGS84_ECEF]:{[we.CGCS2000]:C2,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:C2,[we.SPHERICAL_ECEF]:Tqe,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:$qe,[we.PLATE_CARREE]:gqe,[we.WGS84]:C2,[we.WGS84_ECEF]:jr},[we.SPHERICAL_ECEF]:{[we.CGCS2000]:$2,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:$2,[we.SPHERICAL_ECEF]:jr,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:xqe,[we.PLATE_CARREE]:vqe,[we.WGS84]:$2,[we.WGS84_ECEF]:Sqe},[we.SPHERICAL_MARS_PCPF]:{[we.CGCS2000]:null,[we.GCSMARS2000]:Lle,[we.GCSMOON2000]:null,[we.LON_LAT]:Lle,[we.SPHERICAL_ECEF]:null,[we.SPHERICAL_MARS_PCPF]:jr,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:null,[we.PLATE_CARREE]:null,[we.WGS84]:null,[we.WGS84_ECEF]:null},[we.SPHERICAL_MOON_PCPF]:{[we.CGCS2000]:null,[we.GCSMARS2000]:null,[we.GCSMOON2000]:Ole,[we.LON_LAT]:Ole,[we.SPHERICAL_ECEF]:null,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:jr,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:null,[we.PLATE_CARREE]:null,[we.WGS84]:null,[we.WGS84_ECEF]:null},[we.UNKNOWN]:{[we.CGCS2000]:null,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:null,[we.SPHERICAL_ECEF]:null,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:jr,[we.WEB_MERCATOR]:null,[we.PLATE_CARREE]:null,[we.WGS84]:null,[we.WGS84_ECEF]:null},[we.LON_LAT]:{[we.CGCS2000]:jr,[we.GCSMARS2000]:jr,[we.GCSMOON2000]:jr,[we.LON_LAT]:jr,[we.SPHERICAL_ECEF]:HI,[we.SPHERICAL_MARS_PCPF]:kle,[we.SPHERICAL_MOON_PCPF]:Ple,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:S2,[we.PLATE_CARREE]:E2,[we.WGS84]:jr,[we.WGS84_ECEF]:M2},[we.PLATE_CARREE]:{[we.CGCS2000]:T2,[we.GCSMARS2000]:null,[we.GCSMOON2000]:null,[we.LON_LAT]:T2,[we.SPHERICAL_ECEF]:bqe,[we.SPHERICAL_MARS_PCPF]:null,[we.SPHERICAL_MOON_PCPF]:null,[we.UNKNOWN]:null,[we.WEB_MERCATOR]:wqe,[we.PLATE_CARREE]:jr,[we.WGS84]:T2,[we.WGS84_ECEF]:_qe}};function c2e(t,e){var i;return(i=dqe(t,e))==null?void 0:i.projector}function dqe(t,e){if(t==null||e==null)return null;if(Mf.source.spatialReference===t&&Mf.dest.spatialReference===e)return Mf;const i=Ale(t,Mf.source),r=Ale(e,Mf.dest);return i===we.UNKNOWN&&r===we.UNKNOWN?ks(t,e)?Mf.projector=jr:Mf.projector=null:Mf.projector=hqe[i][r],Mf}function Ale(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=_c(t,1)),e5(t)?e.spatialReferenceId=we.SPHERICAL_ECEF:D_(t)?e.spatialReferenceId=we.WGS84:qp(t)?e.spatialReferenceId=we.WEB_MERCATOR:b8e(t)?e.spatialReferenceId=we.PLATE_CARREE:t.wkt===S8e.wkt?e.spatialReferenceId=we.WGS84_ECEF:t.wkid===N_.CGCS2000?e.spatialReferenceId=we.CGCS2000:t.wkt===xX.wkt?e.spatialReferenceId=we.SPHERICAL_MARS_PCPF:t.wkt===SX.wkt?e.spatialReferenceId=we.SPHERICAL_MOON_PCPF:K1e(t)?e.spatialReferenceId=we.GCSMARS2000:J1e(t)?e.spatialReferenceId=we.GCSMOON2000:e.spatialReferenceId=we.UNKNOWN):we.UNKNOWN}function jr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function qI(t,e,i,r){i[r]=QE*(t[e]/l_),i[r+1]=QE*(u2e-2*Math.atan(Math.exp(-t[e+1]/l_))),i[r+2]=t[e+2]}function pqe(t,e,i,r){const n=t[e]/l_,s=u2e-2*Math.atan(Math.exp(-t[e+1]/l_)),o=l_+t[e+2],a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o}function fqe(t,e,i,r){qI(t,e,i,r),M2(i,r,i,r)}function mqe(t,e,i,r,n){const s=.4999999*Math.PI,o=sa(XE*t[e+1],-s,s),a=Math.sin(o);i[r++]=XE*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function S2(t,e,i,r){mqe(t,e,i,r,wn)}function E2(t,e,i,r){i[r]=t[e]*Rle,i[r+1]=t[e+1]*Rle,i[r+2]=t[e+2]}function T2(t,e,i,r){i[r]=t[e]*Nle,i[r+1]=t[e+1]*Nle,i[r+2]=t[e+2]}function yqe(t,e,i,r){qI(t,e,i,r),E2(i,r,i,r)}function gqe(t,e,i,r){C2(t,e,i,r),E2(i,r,i,r)}function vqe(t,e,i,r){$2(t,e,i,r),E2(i,r,i,r)}function bqe(t,e,i,r){T2(t,e,i,r),HI(i,r,i,r)}function wqe(t,e,i,r){T2(t,e,i,r),S2(i,r,i,r)}function _qe(t,e,i,r){T2(t,e,i,r),M2(i,r,i,r)}function GX(t,e,i,r,n){const s=n+t[e+2],o=XE*t[e+1],a=XE*t[e],l=Math.cos(o)*s;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*s}function Ple(t,e,i,r){GX(t,e,i,r,n0.radius)}function kle(t,e,i,r){GX(t,e,i,r,kp.radius)}function HI(t,e,i,r){GX(t,e,i,r,wn.radius)}function qX(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=K6e(a/(l===0?1:l)),u=Math.atan2(o,s);i[r++]=QE*u,i[r++]=QE*c,i[r]=l-n}function Ole(t,e,i,r){qX(t,e,i,r,n0.radius)}function Lle(t,e,i,r){qX(t,e,i,r,kp.radius)}function $2(t,e,i,r){qX(t,e,i,r,wn.radius)}function xqe(t,e,i,r){$2(t,e,i,r),S2(i,r,i,r)}function Sqe(t,e,i,r){$2(t,e,i,r),M2(i,r,i,r)}function Eqe(t,e,i,r,n){const s=XE*t[e],o=XE*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),u=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(u+a)*c*Math.cos(s),i[r++]=(u+a)*c*Math.sin(s),i[r++]=(u*(1-n.eccentricitySquared)+a)*l}function M2(t,e,i,r){Eqe(t,e,i,r,wn)}function C2(t,e,i,r){const n=uqe,s=t[e],o=t[e+1],a=t[e+2];let l,c,u,p,m,v,w,_,T,$,I,A,k,R,F,B,q,Y,J,Q,te;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),p=c+a*a,m=Math.sqrt(p),Q=Math.atan2(o,s),v=a*a/p,w=c/p,R=n.a2/m,F=n.a3-n.a4/m,w>.3?(_=l/m*(1+w*(n.a1+R+v*F)/m),J=Math.asin(_),$=_*_,T=Math.sqrt(1-$)):(T=u/m*(1-v*(n.a5-R-w*F)/m),J=Math.acos(T),$=1-T*T,_=Math.sqrt($)),I=1-wn.eccentricitySquared*$,A=wn.radius/Math.sqrt(I),k=n.a6*A,R=u-A*T,F=l-k*_,q=T*R+_*F,B=T*F-_*R,Y=B/(k/I+q),J+=Y,te=q+B*Y/2,a<0&&(J=-J),i[r++]=QE*Q,i[r++]=QE*J,i[r]=te}function Tqe(t,e,i,r){C2(t,e,i,r),HI(i,r,i,r)}function $qe(t,e,i,r){C2(t,e,i,r),S2(i,r,i,r)}const Mf={source:{spatialReference:null,spatialReferenceId:we.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:we.UNKNOWN,metersPerUnit:1},projector:jr},XE=NT(1),QE=e1e(1),u2e=.5*Math.PI,l_=wn.radius,Rle=l_*Math.PI/180,Nle=180/(l_*Math.PI);function xk(t,e,i,r,n,s,o=Math.floor(t.length/3)){const a=c2e(e,n);if(a==null)return!1;if(a===jr){if(t===r&&i===s)return!0;const c=i+3*o;for(let u=i,p=s;u<c;u++,p++)r[p]=t[u];return!0}const l=i+3*o;for(let c=i,u=s;c<l;c+=3,u+=3)a(t,c,r,u);return!0}const d6t=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:xk},Symbol.toStringTag,{value:"Module"}));function Dle(t,e,i,r,n,s){return GL[0]=t,GL[1]=e,GL[2]=i,xk(GL,r,0,n,s,0)}const GL=b0();let qL=0,_8=class yq{static fromGE(e){const i=new yq;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=qL++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=qL++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=qL++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=qL++}getInverse(){const e=new yq;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},u5=class MC{static cacheKey(e,i){var r,n,s,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new MC;let r="";for(const n of e.steps){const s=_8.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof _8?this.steps.push(i):this.steps.push(new _8({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new MC;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[MC.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[MC.cacheKey(e,i)];return n===void 0?null:n}};function h2e(t,e,i){if(e==null||i==null||i.vcsWkid||ks(e,i)||s0(e)||s0(i))return null;const r=t5(e)/t5(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>Mqe(n,r);case"polyline":case"esriGeometryPolyline":return n=>Iqe(n,r);case"polygon":case"esriGeometryPolygon":return n=>Cqe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>Aqe(n,r);case"extent":case"esriGeometryEnvelope":return n=>Pqe(n,r);default:return null}}function Mqe(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function Cqe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function Iqe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function Aqe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function Pqe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Nh=null,a0=null,WI=null,Q3={};const HX=new AT;function w0(){return!!Nh&&wX()}function d2e(){return!!w0()||(It(HX),l0(),!1)}function p2e(t,e){return!t||!e||jh(t,e)||d2e()}function kqe(t,e){return!jh(t,e)&&!w0()}function l0(t){return WI==null&&(WI=Promise.all([G1e(),Re(()=>import("./geometryEngineBase-DGkk6OIh.js"),__vite__mapDeps([6,7])).then((e=>e.g)),Re(()=>import("./hydrated-C7P_0TZm.js"),[])])),WI.then((([,e,{hydratedAdapter:i}])=>{Rr(t),a0=i,Nh=e.default,Nh._enableProjection(m8e),HX.notify()}))}function _0(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(H8e(t),gq(a0,t,t[0].spatialReference,e,i,r)):(HE(t),gq(a0,[t],t.spatialReference,e,i,r)[0])}function gq(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if(jh(i,r,n))return e.map((o=>eN(o,i,r)));if(n==null&&e5(i))return e.map((o=>eN(o,i,tt.WGS84))).map((o=>KA(o,r)));if(n==null&&e5(r))return e.map((o=>KA(o,tt.WGS84))).map((o=>eN(o,tt.WGS84,r)));if(n==null){const o=u5.cacheKey(i,r);Q3[o]!==void 0?n=Q3[o]:((n=m2e(i,r,void 0))==null&&(n=new u5),Q3[o]=n)}if(Nh==null||t==null)throw new Hj;return s!=null?Nh._project(t,e,i,r,n,s):Nh._project(t,e,i,r,n)}function Oqe(t,e){const i=f2e([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function f2e(t,e){if(!w0()){for(const i of t)if(i!=null&&!ks(i.spatialReference,e)&&uc(i.spatialReference)&&uc(e)&&!jh(i.spatialReference,e))return It(HX),{pending:l0(),geometries:null}}return{pending:null,geometries:t.map((i=>i==null?null:ks(i.spatialReference,e)?i:uc(i.spatialReference)&&uc(e)?KA(i,e):null))}}function m2e(t,e,i=null){if(t==null||e==null)return null;if(Nh==null||a0==null)throw new Hj;const r=Nh._getTransformation(a0,t,e,i,i==null?void 0:i.spatialReference);return r!==null?u5.fromGE(r):null}function Lqe(t,e,i=null){if(Nh==null||a0==null)throw new Hj;const r=Nh._getTransformationBySuitability(a0,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(u5.fromGE(s));return n}return[]}let Hj=class extends ae{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Rqe(){Nh=null,a0=null,WI=null,Q3={}}const Nqe={get loadPromise(){return WI}};function KA(t,e){try{const i=_0(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=h2e(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof Hj))throw i;return null}}async function y2e(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await WX(r,e,null,i),KA(t,e)}function jh(t,e,i){return!i&&(!!ks(t,e)||uc(t)&&uc(e)&&!!c2e(t,e))}function Dqe(t,e){if(ks(t,e))return!0;if(!uc(t)||!uc(e))return!1;const i=D_(t)||qp(t)||Eae(t),r=D_(e)||qp(e)||Eae(e);return i&&r}async function WX(t,e,i,r){if(w0())return Boe(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(n&&s&&!jh(n,s,o))return l0(r)}else if(t&&e&&!jh(t,e,i))return l0(r);return Boe(r)}function eN(t,e,i){return t?"x"in t?g2e(t,e,new gt,i,0):"xmin"in t?x2e(t,e,new Ut,i,0):"rings"in t?_2e(t,e,new or,i,0):"paths"in t?b2e(t,e,new en,i,0):"points"in t?v2e(t,e,new ou,i,0):null:null}function Fqe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&g2e(t,t.spatialReference,e,i,r)!=null}function g2e(t,e,i,r,n){Zo[0]=t.x,Zo[1]=t.y;const s=t.z;return Zo[2]=s!==void 0?s:n,xk(Zo,e,0,Zo,r,0)?(i.x=Zo[0],i.y=Zo[1],i.spatialReference=r,s!==void 0||s0(r)?(i.z=Zo[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function zqe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&v2e(t,t.spatialReference,e,i,r)!=null}function v2e(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,u=[];for(const m of s)u.push(m[0],m[1],o?m[2]:n);if(!xk(u,e,0,u,r,0,c))return null;const p=o||s0(r);for(let m=0;m<c;++m){const v=3*m,w=u[v],_=u[v+1];p&&a?l.push([w,_,u[v+2],s[m][3]]):p?l.push([w,_,u[v+2]]):a?l.push([w,_,s[m][2]]):l.push([w,_])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function jqe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&b2e(t,t.spatialReference,e,i,r)!=null}function b2e(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!S2e(s,o??!1,a??!1,e,l,r,n))return null;const c=o||s0(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function w2e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&_2e(t,t.spatialReference,e,i,r)!=null}function _2e(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!S2e(s,o??!1,a??!1,e,l,r,n))return null;const c=o||s0(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function Uqe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&x2e(t,t.spatialReference,e,i,r)!=null}function x2e(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=t,p=c?t.zmin:n;if(!Dle(s,o,p,e,Zo,r))return null;const m=c||s0(r);i.xmin=Zo[0],i.ymin=Zo[1],m&&(i.zmin=Zo[2]);const v=c?t.zmax:n;return Dle(a,l,v,e,Zo,r)?(i.xmax=Zo[0],i.ymax=Zo[1],m&&(i.zmax=Zo[2]),u&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function S2e(t,e,i,r,n,s,o=0){const a=new Array;for(const u of t)for(const p of u)a.push(p[0],p[1],e?p[2]:o);if(!xk(a,r,0,a,s,0))return!1;let l=0;n.length=0;const c=e||s0(s);for(const u of t){const p=new Array;for(const m of u)c&&i?p.push([a[l++],a[l++],a[l++],m[3]]):c?p.push([a[l++],a[l++],a[l++]]):i?(p.push([a[l++],a[l++],m[2]]),l++):(p.push([a[l++],a[l++]]),l++);n.push(p)}return!0}const Zo=b0(),f6t=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:jh,getTransformation:m2e,getTransformations:Lqe,initializeProjection:WX,isEqualBaseGCS:Dqe,isLoaded:w0,isLoadedOrLoad:d2e,isLoadedOrLoadFor:p2e,load:l0,project:_0,projectExtent:Uqe,projectMany:gq,projectMultipoint:zqe,projectOrLoad:Oqe,projectOrLoadMany:f2e,projectPoint:Fqe,projectPolygon:w2e,projectPolyline:jqe,projectWithZConversion:y2e,projectWithoutEngine:eN,requiresLoad:kqe,test:Nqe,tryProjectWithZConversion:KA,unload:Rqe},Symbol.toStringTag,{value:"Module"}));var vq,X2;let So=(X2=class extends ve{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new vq({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},vq=X2,X2);d([g({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],So.prototype,"cols",void 0),d([g({type:ri,json:{write:!0}})],So.prototype,"level",void 0),d([g({type:String,json:{write:!0}})],So.prototype,"levelValue",void 0),d([g({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],So.prototype,"origin",void 0),d([g({type:Number,json:{write:!0}})],So.prototype,"resolution",void 0),d([g({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],So.prototype,"rows",void 0),d([g({type:Number,json:{write:!0}})],So.prototype,"scale",void 0),So=vq=d([G("esri.layers.support.LOD")],So);let Bqe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var Rg;const Fle=new Bt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Q2;let mo=(Q2=class extends ve{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=tt.WebMercator,numLODs:o=24}=e;if(!uc(s)){const m=[];if(r)for(let v=0;v<r.length;v++){const w=r[v];m.push(new So({level:v,scale:w,resolution:w}))}else{let v=5e-4;for(let w=o-1;w>=0;w--)m.unshift(new So({level:w,scale:v,resolution:v})),v*=2}return new Rg({dpi:96,lods:m,origin:new gt(0,0,s),size:[n,n],spatialReference:s})}const a=ka(s),l=e.origin?new gt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new gt(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,u=1/(_c(s)*39.37*c),p=[];if(r)for(let m=0;m<r.length;m++){const v=r[m],w=v*u;p.push(new So({level:m,scale:v,resolution:w}))}else{let m=zT(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const v=Math.ceil(o/i);p.push(new So({level:0,scale:m,resolution:m*u}));for(let w=1;w<v;w++){const _=m/2**i,T=_*u;p.push(new So({level:w,scale:_,resolution:T})),m=_}}return new Rg({dpi:c,lods:p,origin:l,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=ka(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return gt.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach((o=>{n.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,s[o.level]=o}))),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],o=i[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(ks(i.spatialReference,this.spatialReference))o=i.x,a=i.y,n=r;else{const u=kj(i,this.spatialReference);if(u==null)return null;o=u.x,a=u.y,n=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return n||(n=new Bqe(null,0,0,0,Bn())),n.level=e,n.row=Math.floor((this.origin.y-a)/c+.001),n.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=Rg.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&i===Rg.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Bn()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return Rg.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const o=s+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new So({level:s,scale:a,resolution:l}))}return new Rg({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},Rg=Q2,Q2);d([g({type:Number,json:{write:!0}})],mo.prototype,"compressionQuality",void 0),d([g({type:Number,json:{write:!0}})],mo.prototype,"dpi",void 0),d([g({type:String,json:{read:Fle.read,write:Fle.write,origins:{"web-scene":{read:!1,write:!1}}}})],mo.prototype,"format",void 0),d([g({readOnly:!0})],mo.prototype,"isWrappable",null),d([g({type:gt,json:{write:!0}})],mo.prototype,"origin",void 0),d([je("origin")],mo.prototype,"readOrigin",null),d([g({type:[So],value:null,json:{write:!0}})],mo.prototype,"lods",null),d([g({readOnly:!0})],mo.prototype,"scales",void 0),d([g({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],mo.prototype,"size",void 0),d([je("size",["rows","cols"])],mo.prototype,"readSize",null),d([Ge("size",{cols:{type:ri},rows:{type:ri}})],mo.prototype,"writeSize",null),d([g({type:tt,json:{write:!0}})],mo.prototype,"spatialReference",void 0),mo=Rg=d([G("esri.layers.support.TileInfo")],mo),(function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"})(mo||(mo={}));const tN={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},x8={xsmall:544,small:768,medium:992,large:1200};function Vqe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function S8(t,e){return e?tN[t].valueToClassName[e].split(" "):[]}const Gqe=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=x8}initialize(){this.addHandles(Je((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),rn))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!Vqe(i)){const r=JSON.stringify(x8,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=x8}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=Ta.acquire(),r=Ta.acquire();let n,s=!1;for(n in tN){const o=this[n],a=tN[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,S8(n,o).forEach((l=>r.push(l))),S8(n,a).forEach((l=>i.push(l))))}s&&(this._applyClassNameChanges(i,r),Ta.release(i),Ta.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach((s=>n.classList.remove(s))),i.forEach((s=>n.classList.add(s))))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in tN)S8(r,this[r]).forEach((n=>i.classList.remove(n)))}};return d([g()],e.prototype,"breakpoints",null),d([g()],e.prototype,"orientation",void 0),d([g()],e.prototype,"widthBreakpoint",void 0),d([g()],e.prototype,"heightBreakpoint",void 0),e=d([G("esri.views.BreakpointsOwner")],e),e};function ZX(t){return typeof t=="string"?document.getElementById(t):t??null}function zle(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let c_=class extends ut{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,Je)}addWhen(e,i,r={}){return this._installWatch(e,i,r,$o)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([wu(e,"after-changes",this._createSyncUpdatingCallback(),Up),wu(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Ci((()=>this.removeHandles(s)))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Ci((()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(HL)||this._set("updating",!1))})),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),Ci((()=>this.removeHandles(s)))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=Je(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(HL),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(uk((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(HL))})),HL)}}};d([g({readOnly:!0})],c_.prototype,"updating",void 0),c_=d([G("esri.core.support.UpdatingHandles")],c_);const HL=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var h5=function(){return h5=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},h5.apply(this,arguments)},bq={exports:{}},xn={},wq={exports:{}},a1={};function E2e(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function qqe(t,e,i){}function Hqe(t,e,i){}var Wqe=/javascript\s*\:/img;function Zqe(t,e){return Wqe.test(e)?"":e}a1.whiteList=E2e();a1.getDefaultWhiteList=E2e;a1.onAttr=qqe;a1.onIgnoreAttr=Hqe;a1.safeAttrValue=Zqe;var Yqe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},AM=Yqe;function Kqe(t,e){t=AM.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var u=AM.trim(t.slice(n,s)),p=u.indexOf(":");if(p!==-1){var m=AM.trim(u.slice(0,p)),v=AM.trim(u.slice(p+1));if(m){var w=e(n,o.length,m,v,u);w&&(o+=w+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return AM.trim(o)}var Jqe=Kqe,WL=a1,Xqe=Jqe;function jle(t){return t==null}function Qqe(t){var e={};for(var i in t)e[i]=t[i];return e}function T2e(t){t=Qqe(t||{}),t.whiteList=t.whiteList||WL.whiteList,t.onAttr=t.onAttr||WL.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||WL.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||WL.safeAttrValue,this.options=t}T2e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=Xqe(t,function(l,c,u,p,m){var v=r[u],w=!1;if(v===!0?w=v:typeof v=="function"?w=v(p):v instanceof RegExp&&(w=v.test(p)),w!==!0&&(w=!1),p=o(u,p),!!p){var _={position:c,sourcePosition:l,source:m,isWhite:w};if(w){var T=n(u,p,_);return jle(T)?u+":"+p:T}else{var T=s(u,p,_);if(!jle(T))return T}}});return a};var eHe=T2e;(function(t,e){var i=a1,r=eHe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(wq,wq.exports);var YX=wq.exports,KX={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},tHe=YX.FilterCSS,iHe=YX.getDefaultWhiteList,d5=KX;function $2e(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var M2e=new tHe;function rHe(t,e,i){}function nHe(t,e,i){}function sHe(t,e,i){}function oHe(t,e,i){}function C2e(t){return t.replace(lHe,"&lt;").replace(cHe,"&gt;")}function aHe(t,e,i,r){if(i=L2e(i),e==="href"||e==="src"){if(i=d5.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(ZL.lastIndex=0,ZL.test(i))return""}else if(e==="style"){if(Ule.lastIndex=0,Ule.test(i)||(Ble.lastIndex=0,Ble.test(i)&&(ZL.lastIndex=0,ZL.test(i))))return"";r!==!1&&(r=r||M2e,i=r.process(i))}return i=R2e(i),i}var lHe=/</g,cHe=/>/g,uHe=/"/g,hHe=/&quot;/g,dHe=/&#([a-zA-Z0-9]*);?/gim,pHe=/&colon;?/gim,fHe=/&newline;?/gim,ZL=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ule=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Ble=/u\s*r\s*l\s*\(.*/gi;function I2e(t){return t.replace(uHe,"&quot;")}function A2e(t){return t.replace(hHe,'"')}function P2e(t){return t.replace(dHe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function k2e(t){return t.replace(pHe,":").replace(fHe," ")}function O2e(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return d5.trim(e)}function L2e(t){return t=A2e(t),t=P2e(t),t=k2e(t),t=O2e(t),t}function R2e(t){return t=I2e(t),t=C2e(t),t}function mHe(){return""}function yHe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:d5.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return n.push([s!==!1?s:l.position,u]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return d5.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function gHe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function vHe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}xn.whiteList=$2e();xn.getDefaultWhiteList=$2e;xn.onTag=rHe;xn.onIgnoreTag=nHe;xn.onTagAttr=sHe;xn.onIgnoreTagAttr=oHe;xn.safeAttrValue=aHe;xn.escapeHtml=C2e;xn.escapeQuote=I2e;xn.unescapeQuote=A2e;xn.escapeHtmlEntities=P2e;xn.escapeDangerHtml5Entities=k2e;xn.clearNonPrintableCharacter=O2e;xn.friendlyAttrValue=L2e;xn.escapeAttrValue=R2e;xn.onIgnoreTagStripAll=mHe;xn.StripTagBody=yHe;xn.stripCommentTag=gHe;xn.stripBlankChar=vHe;xn.cssFilter=M2e;xn.getDefaultCSSWhiteList=iHe;var Wj={},rv=KX;function bHe(t){var e=rv.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=rv.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function wHe(t){return t.slice(0,2)==="</"}function _He(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,c="",u="";e:for(a=0;a<l;a++){var p=t.charAt(a);if(s===!1){if(p==="<"){s=a;continue}}else if(o===!1){if(p==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(p===">"){r+=i(t.slice(n,s)),u=t.slice(s,a+1),c=bHe(u),r+=e(s,r.length,c,u,wHe(u)),n=a+1,s=!1;continue}if(p==='"'||p==="'")for(var m=1,v=t.charAt(a-m);v.trim()===""||v==="=";){if(v==="="){o=p;continue e}v=t.charAt(a-++m)}}else if(p===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var xHe=/[^a-zA-Z0-9\\_:.-]/gim;function SHe(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(m,v){if(m=rv.trim(m),m=m.replace(xHe,"").toLowerCase(),!(m.length<1)){var w=e(m,v||"");w&&n.push(w)}}for(var l=0;l<o;l++){var c=t.charAt(l),u,p;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:THe(t,l+1);continue}if(s!==!1&&l===r){if(p=t.indexOf(c,l+1),p===-1)break;u=rv.trim(t.slice(r+1,p)),a(s,u),s=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(p=EHe(t,l),p===-1){u=rv.trim(t.slice(i,l)),a(u),s=!1,i=l+1;continue}else{l=p-1;continue}else if(p=$He(t,l-1),p===-1){u=rv.trim(t.slice(i,l)),u=Vle(u),a(s,u),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,Vle(rv.trim(t.slice(i))))),rv.trim(n.join(" "))}function EHe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function THe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function $He(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function MHe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Vle(t){return MHe(t)?t.substr(1,t.length-2):t}Wj.parseTag=_He;Wj.parseAttr=SHe;var CHe=YX.FilterCSS,hh=xn,N2e=Wj,IHe=N2e.parseTag,AHe=N2e.parseAttr,iN=KX;function YL(t){return t==null}function PHe(t){var e=iN.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=iN.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=iN.trim(t.slice(0,-1))),{html:t,closing:i}}function kHe(t){var e={};for(var i in t)e[i]=t[i];return e}function OHe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function D2e(t){t=kHe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=hh.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=OHe(t.whiteList||t.allowList):t.whiteList=hh.whiteList,t.onTag=t.onTag||hh.onTag,t.onTagAttr=t.onTagAttr||hh.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||hh.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||hh.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||hh.safeAttrValue,t.escapeHtml=t.escapeHtml||hh.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new CHe(t.css))}D2e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,u=e.cssFilter;i.stripBlankChar&&(t=hh.stripBlankChar(t)),i.allowCommentTag||(t=hh.stripCommentTag(t));var p=!1;i.stripIgnoreTagBody&&(p=hh.StripTagBody(i.stripIgnoreTagBody,s),s=p.onIgnoreTag);var m=IHe(t,function(v,w,_,T,$){var I={sourcePosition:v,position:w,isClosing:$,isWhite:Object.prototype.hasOwnProperty.call(r,_)},A=n(_,T,I);if(!YL(A))return A;if(I.isWhite){if(I.isClosing)return"</"+_+">";var k=PHe(T),R=r[_],F=AHe(k.html,function(B,q){var Y=iN.indexOf(R,B)!==-1,J=o(_,B,q,Y);return YL(J)?Y?(q=l(_,B,q,u),q?B+'="'+q+'"':B):(J=a(_,B,q,Y),YL(J)?void 0:J):J});return T="<"+_,F&&(T+=" "+F),k.closing&&(T+=" /"),T+=">",T}else return A=s(_,T,I),YL(A)?c(T):A},c);return p&&(m=p.remove(m)),m};var LHe=D2e;(function(t,e){var i=xn,r=Wj,n=LHe;function s(a,l){var c=new n(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(bq,bq.exports);var yx=bq.exports,RHe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},NHe=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=h5(h5({},yx.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):yx.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new yx.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?yx.escapeAttrValue(e):!s&&!n?yx.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):yx.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(RHe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],u=r.validate(c,i);return u.isValid?a[l]=c:(n=!0,a[l]=u.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const DHe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],FHe=DHe.reduce(((t,e)=>(t[e]=[],t)),{}),zHe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],F2e=new NHe({whiteList:FHe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(zHe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),z2e="http://www.w3.org/",Zj=`${z2e}2000/svg`,j2e=`${z2e}1999/xlink`;let Gle=[],JX=(t,e)=>{let i={};return Object.keys(t).forEach((r=>{i[r]=t[r]})),e&&Object.keys(e).forEach((r=>{i[r]=e[r]})),i},XX=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),U2e=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},jHe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(XX(t[r],e))return r}return-1},E8=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(XX(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},UHe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},_q=[],xq=!1,B2e=t=>{(t.children||[]).forEach(B2e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},qle=()=>{xq=!1,_q.forEach(B2e),_q.length=0},Hle=t=>{_q.push(t),xq||(xq=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(qle,{timeout:16}):setTimeout(qle,16))},Wle=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Hle(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),Hle(t))},BHe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")Eq(t,l,!0);else if(a==="classes"){let c=Object.keys(l),u=c.length;for(let p=0;p<u;p++){let m=c[p];l[m]&&t.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),u=c.length;for(let p=0;p<u;p++){let m=c[p],v=l[m];v&&(U2e(v),i.styleApplyer(t,m,v))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let u=l;l=function(p){u.apply(this,[p]),p.target["oninput-value"]=p.target.value}})()),t[a]=l):i.namespace===Zj?a==="href"?t.setAttributeNS(j2e,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=F2e.sanitize(l):Sq(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function Sq(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let p5,VHe=(t,e,i)=>{if(e)for(let r of e)ZI(r,t,void 0,i)},V2e=(t,e,i)=>{VHe(t,e.children,i),e.text&&(t.textContent=e.text),BHe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},ZI=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let u=o.charAt(s-1),p=o.slice(s,l);u==="."?n.classList.add(p):u==="#"?n.id=p:(p==="svg"&&(r=JX(r,{namespace:Zj})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,p):(n=t.domNode=t.domNode||a.createElement(p),p==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}V2e(n,t,r)}},Eq=(t,e,i)=>{e&&e.split(" ").forEach((r=>{r&&t.classList.toggle(r,i)}))},GHe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=i[l],u=e[l];if(l==="class")u!==c&&(Eq(t,u,!1),Eq(t,c,!0));else if(l==="classes"){let p=t.classList,m=Object.keys(c),v=m.length;for(let w=0;w<v;w++){let _=m[w],T=!!c[_];T!==!!u[_]&&(n=!0,T?p.add(_):p.remove(_))}}else if(l==="styles"){let p=Object.keys(c),m=p.length;for(let v=0;v<m;v++){let w=p[v],_=c[w];_!==u[w]&&(n=!0,_?(U2e(_),r.styleApplyer(t,w,_)):r.styleApplyer(t,w,""))}}else if(c||typeof u!="string"||(c=""),l!=="value"||Sq(t)){if(c!==u){let p=typeof c;p==="function"&&r.eventHandlerInterceptor||(r.namespace===Zj?l==="href"?t.setAttributeNS(j2e,l,c):t.setAttribute(l,c):p==="string"?l==="innerHTML"?t[l]=F2e.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):Sq(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}else{let p=t[l];p!==c&&(t["oninput-value"]?p===t["oninput-value"]:c!==u)&&(t[l]=c,t["oninput-value"]=void 0),c!==u&&(n=!0)}}return n},qHe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||Gle;let s,o=(i=i||Gle).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let p=l<o?i[l]:void 0,m=r[c];if(p!==void 0&&XX(p,m))u=p5(p,m,n)||u,l++;else{let v=jHe(i,m,l+1);if(v>=0){for(s=l;s<v;s++)Wle(i[s]),E8(i,s,t,"removed");u=p5(i[v],m,n)||u,l=v+1}else ZI(m,e,l<o?i[l].domNode:void 0,n),UHe(m),E8(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)Wle(i[s]),E8(i,s,t,"removed");return u};p5=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=JX(i,{namespace:Zj})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=qHe(e,r,t.children,e.children,i)||s,s=GHe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let KL=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,p5(r,i,e)},domNode:t.domNode});const HHe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let CC=t=>JX(HHe,t),Pv={append:(t,e,i)=>(i=CC(i),ZI(e,t,void 0,i),KL(e,i)),insertBefore:(t,e,i)=>(i=CC(i),ZI(e,t.parentNode,t,i),KL(e,i)),merge:(t,e,i)=>(i=CC(i),e.domNode=t,V2e(t,e,i),KL(e,i)),replace:(t,e,i)=>(i=CC(i),ZI(e,t.parentNode,t,i),t.parentNode.removeChild(t),KL(e,i))},G2e,WHe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};G2e=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let ZHe=(t,e)=>{let i=t;return e.forEach((r=>{i=i&&i.children?G2e(i.children,(n=>n.domNode===r)):void 0})),i},YHe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=WHe(n.currentTarget,s.domNode);o.reverse();let a,l=ZHe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},f5=t=>{let e,i,r=CC(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(p,m,v)=>{let w,_=()=>w;r.eventHandlerInterceptor=YHe(e,_,n),w=p(m,v(),r),a.push(w),l.push(v)},u=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let p=0;p<a.length;p++){let m=l[p]();n("rendered",void 0),a[p].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:u,scheduleRender:()=>{i||o||(i=requestAnimationFrame(u))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(p,m)=>{c(Pv.append,p,m)},insertBefore:(p,m)=>{c(Pv.insertBefore,p,m)},merge:(p,m)=>{c(Pv.merge,p,m)},replace:(p,m)=>{c(Pv.replace,p,m)},detach:p=>{for(let m=0;m<l.length;m++)if(l[m]===p)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},Ng=class extends ut{constructor(){super(...arguments),this.items=new et,this._watchUpdatingTracking=new c_,this._callbacks=new Map,this._projector=f5(),this._hiddenProjector=f5()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some((s=>s.visible&&!(r&&s.isDecoration))))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach((s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())})),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};d([g({readOnly:!0})],Ng.prototype,"surface",void 0),d([g({readOnly:!0})],Ng.prototype,"items",void 0),d([g({readOnly:!0})],Ng.prototype,"needsRender",null),d([g({readOnly:!0})],Ng.prototype,"_watchUpdatingTracking",void 0),d([g({readOnly:!0})],Ng.prototype,"updating",null),Ng=d([G("esri.views.overlay.ViewOverlay")],Ng);const Zle=Ng,T8=[0,0];function KHe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return T8[0]=i.left+((e==null?void 0:e.pageXOffset)??0),T8[1]=i.top+((e==null?void 0:e.pageYOffset)??0),T8}function Yle(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function JHe(t){const e=document.createElement("div");return t.appendChild(e),e}const gx=16,PM=750,XHe=512,QHe=2,eWe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:gx,time:PM},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Je((()=>this.cursor),(r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)})),Je((()=>this.navigating),(r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())}))])}initialize(){this.addHandles([Je((()=>this.ui),((i,r)=>this._handleUIChange(i,r)),rn),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=ZX(i);if(n||typeof i!="string"||Ce.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Yle(this.root),this._set("root",null)),this.userContent&&(zle(this.userContent,r),Yle(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",zle(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new Zle;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Je((()=>l.needsRender),(c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=BE({render:()=>{var u;return(u=this.overlay)==null?void 0:u.render()}}):this._overlayRenderTaskHandle=Wr(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}set ui(i){const r=this._get("ui");r!==i&&(r==null||r.destroy()),this._set("ui",i)}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Je((()=>this.root),(n=>{i.container=n?JHe(n):null}),rn),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=gx,i.time=PM;const r=BE({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=gx,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const c=this._position();l.freq=c||a?gx:Math.min(PM,l.freq*QHe),!a&&l.freq>=XHe&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver((o=>{i.freq=gx,i.time=PM,r.resume()}));this.container!=null&&n.observe(this.container);const s=Ci((()=>n.disconnect()));this.addHandles([PT(window,"resize",(()=>{i.freq=gx,i.time=PM,r.resume()})),s,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&KHe(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return d([g()],e.prototype,"container",null),d([g({readOnly:!0})],e.prototype,"focused",null),d([g({readOnly:!0})],e.prototype,"height",void 0),d([g()],e.prototype,"messagesCommon",void 0),d([g({type:Zle})],e.prototype,"overlay",void 0),d([g({readOnly:!0})],e.prototype,"position",void 0),d([g({readOnly:!0})],e.prototype,"resizing",void 0),d([g({readOnly:!0})],e.prototype,"root",void 0),d([g({value:null,readOnly:!0})],e.prototype,"size",null),d([g({readOnly:!0})],e.prototype,"surface",void 0),d([g({readOnly:!0})],e.prototype,"suspended",void 0),d([g({nonNullable:!0})],e.prototype,"ui",null),d([g({readOnly:!0})],e.prototype,"userContent",void 0),d([g({readOnly:!0})],e.prototype,"width",void 0),d([g()],e.prototype,"widthBreakpoint",void 0),e=d([G("esri.views.DOMContainer")],e),e};function tWe(t,e,i){return Dw(t.map(((r,n)=>e.apply(i,[r,n]))))}async function iWe(t,e,i){return(await Dw(t.map(((r,n)=>e.apply(i,[r,n]))))).map((r=>r.value))}function QX(t){return{ok:!0,value:t}}function eQ(t){return{ok:!1,error:t}}function rWe(t){return t!=null&&t.ok===!0?t.value:null}function nWe(t){return t!=null&&t.ok===!1?t.error:null}async function Yj(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return QX(await t)}catch(e){return eQ(e)}}async function sWe(t){try{return QX(await t)}catch(e){return Hd(e),eQ(e)}}function Kj(t,e){return new Dg(t,e)}let Dg=class extends ut{get value(){return rWe(this._result)}get error(){return nWe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=UE(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then((n=>{this._result=QX(n),this._cleanup()}),(n=>{this._result=eQ(n),this._cleanup()})),this._abortHandle=Fh(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Wr(this._abortHandle),this._abortController=null}};d([g()],Dg.prototype,"value",null),d([g()],Dg.prototype,"error",null),d([g()],Dg.prototype,"finished",null),d([g()],Dg.prototype,"promise",void 0),d([g()],Dg.prototype,"_result",void 0),Dg=d([G("esri.core.asyncUtils.ReactiveTask")],Dg);const q2e=ge("mac")?"Meta":"Control",oWe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),aWe=t=>oWe.has(t);let lWe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Os=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback((i=>this._handleEvent(i))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new lWe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const p=this._incoming[u.match.eventType];if(p){const m=p.indexOf(u);p.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new cWe(s,r,{onPause:a,onRemove:a,onResume:u=>{const p=this._incoming[u.match.eventType];p&&!p.includes(u)&&(p.push(u),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new uWe(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},cWe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},uWe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},hWe=class extends Os{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(i=>this._update(i.data)))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},dWe=class extends Os{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=I_(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},pWe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new b_e(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=PUe((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)Woe(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)Woe(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},Vc=class extends ut{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=q2e,this._latestPointerType="mouse",this._propertiesPool=new pWe({latestPointerLocation:yWe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Km.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map((s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,p,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach((r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ce.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)aWe(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new hWe(((e,i,r)=>this._setLatestPointer(e,i,r))),this._multiTouchHandler=new dWe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Km.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Km.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new fWe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new HA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new HA;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter((o=>n.keyModifiers.includes(o)));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e((()=>this._onEventReceived(i,r)))},disablePointerCapture:e}}};d([g({readOnly:!0})],Vc.prototype,"hasPendingInputs",null),d([g({constructOnly:!0})],Vc.prototype,"eventSource",void 0),d([g({constructOnly:!0})],Vc.prototype,"recognizers",void 0),d([g()],Vc.prototype,"_latestPointerType",void 0),d([g()],Vc.prototype,"latestPointerType",null),d([g()],Vc.prototype,"multiTouchActive",null),d([g({readOnly:!0})],Vc.prototype,"latestPointerLocation",void 0),d([g()],Vc.prototype,"_paused",void 0),d([g({readOnly:!0})],Vc.prototype,"updating",null),Vc=d([G("esri.views.input.InputManager")],Vc);let fWe=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=nv.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=nv.STOPPED}shouldStopPropagation(){return(this._propagationState&nv.STOPPED)!==0}defer(e){this._propagationState|=nv.PAUSED;const i=(r,n)=>{this._propagationState&=~nv.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then((r=>i(r,!1)),(r=>i(r,!0)))}shouldPausePropagation(e){return!!(this._propagationState&nv.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var nv;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(nv||(nv={}));const Km={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let mWe=class{};const yWe=mWe;function Mg(t){return t!=null&&"open"in t&&"declaredClass"in t}function Kle(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const gWe=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Je((()=>[this.ui,this.popup]),(([i,r],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&Mg(l)&&(l.view=null,Kle(l)&&(a.remove(l,s),l!==r&&r&&l.destroy()))}i&&Mg(r)&&(r.view=this,Kle(r)&&i.add(r,{key:s,position:o,internal:!0}))}),Sa),this.on("click",(i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Mg(this.popup)?this.popup.viewModel.handleViewClick(i):i.defer((async()=>{await this.setupPopup(),Mg(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))}),Km.WIDGET)]),P_((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{Re(()=>import("./Popup-BLugrt0E.js").then(i=>i.P),__vite__mapDeps([141,142,57,143,144,145,146,56,54,55,11,16,147,148]))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Mg(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void Ce.getLogger(this).error(new ae("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Mg(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Mg(this.popup))return this._popupSetupTask=Kj((async r=>{const{default:n}=await Re(()=>import("./Popup-BLugrt0E.js").then(o=>o.P),__vite__mapDeps([141,142,57,143,144,145,146,56,54,55,11,16,147,148]));if(Rr(r),!this.popup||Mg(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},n){const s=[],o=[];let a=!1;const l=sUe(n,ge("popup-view-fetch-timeout")??bWe),c=m=>{const v=new vWe(m);return o.push(v),s.push(v.promise),v},u=m=>{const v=o.at(-1);return v&&v.layerView===m&&!a?v:c(m)};for(const m of r)"graphic"in m?(u(m.layerView).graphics.push(m.graphic),a=!1):(s.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map((m=>m.resolve(l)));const p=nUe(s).then((m=>m.filter((v=>!!v)).flat()));return{pendingFeatures:s,allGraphicsPromise:p,location:i}}async _getPopupHits(i,r){const{hits:n,location:s}=await this.popupHitTest(i);Rr(r);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return d([g()],e.prototype,"popup",void 0),d([g()],e.prototype,"popupEnabled",void 0),e=d([G("esri.views.PopupView")],e),e};let vWe=class{constructor(e){this.layerView=e,this._resolver=gc(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch((o=>(s=o,null))).then((o=>{o?n.resolve(o):n.reject(s)})),n.promise}};const bWe=5e3;function sy(t,e,i=et){return e||(e=new i),e===t||(e.removeAll(),wWe(t)?e.addMany(t):t&&e.add(t)),e}function H2e(t){return t}function wWe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var sv;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(sv||(sv={}));let _We=class{constructor(){this._resolver=gc(),this._status=sv.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=sv.RESOLVED,this._cleanUp()}),(()=>{this._status=sv.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===sv.RESOLVED}isRejected(){return this._status===sv.REJECTED}isFulfilled(){return this._status!==sv.PENDING}abort(){this._resolver.reject(gr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=gc(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()}),(n=>{this.isFulfilled()||this._allPromise!==r||io(n)||this._resolver.reject(n)})),e.resolve()}};const W2e=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new _We,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then((()=>this)).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=d([G("esri.core.Promise")],e),e};let Mp=class extends W2e(ut){};Mp=d([G("esri.core.Promise")],Mp),(function(t){t.EsriPromiseMixin=W2e})(Mp||(Mp={}));const xWe="not-loaded",SWe="loading",EWe="failed",Jle="loaded",Z2e=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise(((a,l)=>{const c=qJ(s,l);this.destroyed&&l(new ae("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally((()=>{c&&c.remove()}))}));if(this.loadStatus===xWe){this._set("loadStatus",SWe);const a=this._loadController=new AbortController;n({signal:a.signal})}return r(),o}}))),this.when((()=>{this._set("loadStatus",Jle),this._loadController=null}),(r=>{this._set("loadStatus",EWe),this._set("loadError",r),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=UE(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Jle}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ae("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return d([g({readOnly:!0})],e.prototype,"loaded",null),d([g({readOnly:!0})],e.prototype,"loadError",void 0),d([g({clonable:!1})],e.prototype,"loadStatus",void 0),d([g({type:[vc],readOnly:!0})],e.prototype,"loadWarnings",null),e=d([G("esri.core.Loadable")],e),e};let ra=class extends Z2e(Mp){};ra=d([G("esri.core.Loadable")],ra),(function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Z2e,t.isLoadable=e})(ra||(ra={}));async function Jj(t,e){return await t.load(),TWe(t,e)}async function TWe(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):et.isCollection(o)?o.forEach((a=>r(a))):ra.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await iWe(i,(async s=>{const o=await Yj($We(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)})),n)throw n.error;return t}function $We(t){return"loadAll"in t&&typeof t.loadAll=="function"}let JL;function MWe(t){return JL&&!JL.destroyed||(JL=t()),JL}var Tq;const CWe=new Bt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Rn=Tq=class extends ut{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Tq({categories:this.categories?le(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map((o=>Array.isArray(o)?JSON.stringify(o):o)));let r="";if(this.extent){const o=kj(this.extent,tt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((o=>CWe.toJSON(o.trim()))).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};d([g()],Rn.prototype,"categories",void 0),d([g()],Rn.prototype,"disableExtraQuery",void 0),d([g({type:Ut})],Rn.prototype,"extent",void 0),d([g()],Rn.prototype,"filter",void 0),d([g()],Rn.prototype,"num",void 0),d([g()],Rn.prototype,"query",void 0),d([g()],Rn.prototype,"sortField",void 0),d([g()],Rn.prototype,"sortOrder",null),d([g()],Rn.prototype,"start",void 0),Rn=Tq=d([G("esri.portal.PortalQueryParams")],Rn);var $q;let Pn=$q=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then((e=>{const i=e.categorySchema||[];return i.some((r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",t):i}))}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ae("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new $q({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Zr(Rn,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new Rn,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Rn,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then((r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new Rn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){const n=r.results[0],s=new Rn({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new ae("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((r=>r.total?r.results[0].fetchData("json",e).then((n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]})):[]))}};d([g()],Pn.prototype,"access",void 0),d([g({type:Date})],Pn.prototype,"created",void 0),d([g()],Pn.prototype,"description",void 0),d([g()],Pn.prototype,"id",void 0),d([g()],Pn.prototype,"isInvitationOnly",void 0),d([g({type:Date})],Pn.prototype,"modified",void 0),d([g()],Pn.prototype,"owner",void 0),d([g()],Pn.prototype,"portal",void 0),d([g()],Pn.prototype,"snippet",void 0),d([g()],Pn.prototype,"sortField",void 0),d([g()],Pn.prototype,"sortOrder",void 0),d([g()],Pn.prototype,"sourceJSON",void 0),d([g()],Pn.prototype,"tags",void 0),d([g()],Pn.prototype,"thumbnail",void 0),d([g({readOnly:!0})],Pn.prototype,"thumbnailUrl",null),d([g()],Pn.prototype,"title",void 0),d([g({readOnly:!0})],Pn.prototype,"url",null),Pn=$q=d([G("esri.portal.PortalGroup")],Pn);let kb=class extends ut{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};d([g()],kb.prototype,"nextQueryParams",void 0),d([g()],kb.prototype,"queryParams",void 0),d([g()],kb.prototype,"results",void 0),d([g()],kb.prototype,"total",void 0),kb=d([G("esri.portal.PortalQueryResult")],kb);let Uf=class extends ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ae("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};d([g({type:Date})],Uf.prototype,"created",void 0),d([g()],Uf.prototype,"id",void 0),d([g()],Uf.prototype,"portal",void 0),d([g()],Uf.prototype,"title",void 0),d([g({readOnly:!0})],Uf.prototype,"url",null),d([g()],Uf.prototype,"username",void 0),Uf=d([G("esri.portal.PortalFolder")],Uf);var Mq;let Ki=Mq=class extends ve{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then((o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load())))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map((s=>s.id));if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const a of o.results){const l=t.find((p=>a.itemId===p.id)),c=a.success;let u=null;c?(l.id=null,l.portal=null):a.error&&(u=new ae("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:u})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then((e=>{let i;return i=e&&e.folders?e.folders.map((r=>{const n=Uf.fromJSON(r);return n.portal=this.portal,n})):[],i}))}fetchGroups(){return this.portal.request(this.url??"").then((t=>{let e;return e=t&&t.groups?t.groups.map((i=>{const r=Pn.fromJSON(i);return r.portal=this.portal,r})):[],e}))}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await Re(()=>Promise.resolve().then(()=>Y2e),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map((o=>{const a=i.fromJSON(o);return a.portal=this.portal,a})),await Promise.all(s.map((o=>o.load()))),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Pn({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ae("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new ae("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Mq({sourceJSON:t});return e.read(t),e}};d([g()],Ki.prototype,"access",void 0),d([g({type:Date})],Ki.prototype,"created",void 0),d([g()],Ki.prototype,"culture",void 0),d([g()],Ki.prototype,"description",void 0),d([g()],Ki.prototype,"email",void 0),d([g()],Ki.prototype,"favGroupId",void 0),d([g()],Ki.prototype,"fullName",void 0),d([g()],Ki.prototype,"id",void 0),d([g({type:Date})],Ki.prototype,"modified",void 0),d([g()],Ki.prototype,"orgId",void 0),d([g()],Ki.prototype,"portal",void 0),d([g()],Ki.prototype,"preferredView",void 0),d([g()],Ki.prototype,"privileges",void 0),d([g()],Ki.prototype,"region",void 0),d([g()],Ki.prototype,"role",void 0),d([g()],Ki.prototype,"roleId",void 0),d([g()],Ki.prototype,"sourceJSON",void 0),d([g()],Ki.prototype,"thumbnail",void 0),d([g({readOnly:!0})],Ki.prototype,"thumbnailUrl",null),d([g()],Ki.prototype,"units",void 0),d([g({readOnly:!0})],Ki.prototype,"userContentUrl",null),d([g({readOnly:!0})],Ki.prototype,"url",null),d([g()],Ki.prototype,"username",void 0),d([g()],Ki.prototype,"userLicenseTypeId",void 0),d([g()],Ki.prototype,"userType",void 0),Ki=Mq=d([G("esri.portal.PortalUser")],Ki);var zl;let kM;const Xle={PortalGroup:()=>Promise.resolve({default:Pn}),PortalItem:()=>Re(()=>Promise.resolve().then(()=>Y2e),void 0),PortalUser:()=>Promise.resolve({default:Ki})};var tp;let Ue=(tp=class extends ve.JSONSupportMixin(ra){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=fi.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){Qle.unregister(this),this.defaultBasemap=Lr(this.defaultBasemap),this.defaultDevBasemap=Lr(this.defaultDevBasemap),this.defaultVectorBasemap=Lr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Wr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)fi.request.trustedServers.includes(i)||fi.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return z1e(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Ki.fromJSON(e),i.portal=this),i}load(e){const i=Re(()=>Promise.resolve().then(()=>YWe),void 0).then((({default:r})=>{Rr(e),kM=r})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e))).then((r=>{var n;if(!this.hasAPIKey&&Rt){const s=Rt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==zl.AUTH_MODE_AUTO&&this.authMode!==zl.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",IWe(new WeakRef(this))),Qle.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await Re(async()=>{const{default:r}=await import("./ElevationLayer-BZVfN3Bx.js");return{default:r}},__vite__mapDeps([149,150,151,152,57,153]))).default;return e?e.map((r=>new i({id:r.id,url:r.url}))):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new Rn;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find((n=>n.type==="Web Scene"));return r?new kM({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then((i=>i.categorySchema)):_u(e)?Promise.reject(gr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then((i=>i.classificationSchema)):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new Rn({num:100,sortField:"title"});if(i!=null&&i.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then((s=>s.results))}return _u(e)?Promise.reject(gr()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||fl();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||fl();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return MWe((()=>new zl))}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:fl().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=Zr(Rn,i),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then((l=>{const c=s.clone();return c.start=l.nextStart,new kb({nextQueryParams:c,queryParams:s,total:l.total,results:zl._resultsToTypedArray(a,{portal:this},l,n)})})).then((l=>Promise.all(l.results.map((c=>typeof c.when=="function"?c.when():l))).then((()=>l),(c=>(Hd(c),l)))));return r&&Xle[r]?Xle[r]().then((({default:a})=>(Rr(n),o(a)))):o()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new ae("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===zl.AUTH_MODE_ANONYMOUS||this.authMode===zl.AUTH_MODE_NO_PROMPT&&!Rt)return Promise.reject(new ae("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate")))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate")))).then((r=>{r&&(this.sourceJSON=r,this.read(r))}));return Rt?Rt.getCredential(this.restUrl,{prompt:this.authMode!==zl.AUTH_MODE_NO_PROMPT}).then((i=>e(i))):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then((n=>{const s=zl._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map((o=>typeof o.when=="function"?o.when():n))).then((()=>s),(()=>s))}))}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===zl.AUTH_MODE_ANONYMOUS||this.authMode===zl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=i,u={authMode:n,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(u.withCredentials=!0),ni(this._normalizeSSL(e),u).then((p=>p.data))}toJSON(){throw new ae("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new zl({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new ae("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new Rn;r.query=e||(NG()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,i);return o.total?o.results.filter((a=>a.type==="Web Map")).map((a=>new kM({portalItem:a}))):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(NG())return[];const n=new Rn({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const o=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=o.sortField||"name",n.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(n,i);return a.total?a.results.filter((l=>l.type==="Web Scene")).map((l=>new kM({portalItem:l}))):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=kM.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const o=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map((a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l})))}else s=[];return s}},zl=tp,tp.AUTH_MODE_ANONYMOUS="anonymous",tp.AUTH_MODE_AUTO="auto",tp.AUTH_MODE_IMMEDIATE="immediate",tp.AUTH_MODE_NO_PROMPT="no-prompt",tp);d([g()],Ue.prototype,"access",void 0),d([g()],Ue.prototype,"allSSL",void 0),d([g()],Ue.prototype,"authMode",void 0),d([g()],Ue.prototype,"authorizedCrossOriginDomains",void 0),d([je("authorizedCrossOriginDomains")],Ue.prototype,"readAuthorizedCrossOriginDomains",null),d([g()],Ue.prototype,"basemapGalleryGroupQuery",void 0),d([g({json:{name:"3DBasemapGalleryGroupQuery"}})],Ue.prototype,"basemapGalleryGroupQuery3D",void 0),d([g()],Ue.prototype,"bingKey",void 0),d([g()],Ue.prototype,"canListApps",void 0),d([g()],Ue.prototype,"canListData",void 0),d([g()],Ue.prototype,"canListPreProvisionedItems",void 0),d([g()],Ue.prototype,"canProvisionDirectPurchase",void 0),d([g()],Ue.prototype,"canSearchPublic",void 0),d([g()],Ue.prototype,"canShareBingPublic",void 0),d([g()],Ue.prototype,"canSharePublic",void 0),d([g()],Ue.prototype,"canSignInArcGIS",void 0),d([g()],Ue.prototype,"canSignInIDP",void 0),d([g()],Ue.prototype,"colorSetsGroupQuery",void 0),d([g()],Ue.prototype,"commentsEnabled",void 0),d([g({type:Date})],Ue.prototype,"created",void 0),d([g()],Ue.prototype,"credential",void 0),d([g()],Ue.prototype,"culture",void 0),d([g()],Ue.prototype,"currentVersion",void 0),d([g()],Ue.prototype,"customBaseUrl",void 0),d([g()],Ue.prototype,"default3DBasemapQuery",void 0),d([g()],Ue.prototype,"defaultBasemap",void 0),d([je("defaultBasemap")],Ue.prototype,"readDefaultBasemap",null),d([g()],Ue.prototype,"defaultDevBasemap",void 0),d([je("defaultDevBasemap")],Ue.prototype,"readDefaultDevBasemap",null),d([g({type:Ut})],Ue.prototype,"defaultExtent",void 0),d([g()],Ue.prototype,"defaultVectorBasemap",void 0),d([je("defaultVectorBasemap")],Ue.prototype,"readDefaultVectorBasemap",null),d([g()],Ue.prototype,"description",void 0),d([g()],Ue.prototype,"devBasemapGalleryGroupQuery",void 0),d([g()],Ue.prototype,"eueiEnabled",void 0),d([g({readOnly:!0})],Ue.prototype,"extraQuery",null),d([g()],Ue.prototype,"featuredGroups",void 0),d([g()],Ue.prototype,"featuredItemsGroupQuery",void 0),d([g()],Ue.prototype,"galleryTemplatesGroupQuery",void 0),d([g()],Ue.prototype,"layoutGroupQuery",void 0),d([g()],Ue.prototype,"livingAtlasGroupQuery",void 0),d([g({readOnly:!0})],Ue.prototype,"hasAPIKey",null),d([g()],Ue.prototype,"hasCategorySchema",void 0),d([g()],Ue.prototype,"hasClassificationSchema",void 0),d([g()],Ue.prototype,"helpBase",void 0),d([g()],Ue.prototype,"helperServices",void 0),d([g()],Ue.prototype,"helpMap",void 0),d([g()],Ue.prototype,"homePageFeaturedContent",void 0),d([g()],Ue.prototype,"homePageFeaturedContentCount",void 0),d([g()],Ue.prototype,"httpPort",void 0),d([g()],Ue.prototype,"httpsPort",void 0),d([g()],Ue.prototype,"id",void 0),d([g()],Ue.prototype,"ipCntryCode",void 0),d([g({readOnly:!0})],Ue.prototype,"isOrganization",null),d([g()],Ue.prototype,"isPortal",void 0),d([g()],Ue.prototype,"isReadOnly",void 0),d([g({readOnly:!0})],Ue.prototype,"itemPageUrl",null),d([g()],Ue.prototype,"layerTemplatesGroupQuery",void 0),d([g()],Ue.prototype,"maxTokenExpirationMinutes",void 0),d([g({type:Date})],Ue.prototype,"modified",void 0),d([g()],Ue.prototype,"name",void 0),d([g()],Ue.prototype,"portalHostname",void 0),d([g()],Ue.prototype,"portalMode",void 0),d([g()],Ue.prototype,"portalProperties",void 0),d([g()],Ue.prototype,"region",void 0),d([g()],Ue.prototype,"recycleBinEnabled",void 0),d([g({readOnly:!0})],Ue.prototype,"restUrl",null),d([g()],Ue.prototype,"rotatorPanels",void 0),d([g()],Ue.prototype,"showHomePageDescription",void 0),d([g()],Ue.prototype,"sourceJSON",void 0),d([g()],Ue.prototype,"staticImagesUrl",void 0),d([g({json:{name:"2DStylesGroupQuery"}})],Ue.prototype,"stylesGroupQuery2d",void 0),d([g({json:{name:"stylesGroupQuery"}})],Ue.prototype,"stylesGroupQuery3d",void 0),d([g()],Ue.prototype,"supportsHostedServices",void 0),d([g()],Ue.prototype,"symbolSetsGroupQuery",void 0),d([g()],Ue.prototype,"templatesGroupQuery",void 0),d([g()],Ue.prototype,"thumbnail",void 0),d([g({readOnly:!0})],Ue.prototype,"thumbnailUrl",null),d([g()],Ue.prototype,"units",void 0),d([g()],Ue.prototype,"url",void 0),d([g()],Ue.prototype,"urlKey",void 0),d([je("urlKey")],Ue.prototype,"readUrlKey",null),d([g()],Ue.prototype,"user",void 0),d([je("user")],Ue.prototype,"readUser",null),d([g()],Ue.prototype,"use3dBasemaps",void 0),d([g()],Ue.prototype,"useDefault3dBasemap",void 0),d([g()],Ue.prototype,"useStandardizedQuery",void 0),d([g()],Ue.prototype,"useVectorBasemaps",void 0),d([g()],Ue.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ue=zl=d([G("esri.portal.Portal")],Ue);const Qle=new FinalizationRegistry((t=>{t.remove()}));function IWe(t){const e=Rt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch((()=>{}))}}let Bf=class extends ut{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:ece(e.path,e.portalItem)}:e}set path(e){e!=null&&pl(e)?Ce.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return ece(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ae("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await Re(()=>import("./resourceUtils-CVNSN7md.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function ece(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&pl(t)&&(t=hX(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}d([g()],Bf.prototype,"portalItem",void 0),d([g({type:String,value:null})],Bf.prototype,"path",null),d([Ai("path")],Bf.prototype,"_castPath",null),d([g({type:String,readOnly:!0})],Bf.prototype,"url",null),d([g({type:String,readOnly:!0})],Bf.prototype,"cdnUrl",null),d([g({type:String,readOnly:!0})],Bf.prototype,"itemRelativeUrl",null),Bf=d([G("esri.portal.PortalItemResource")],Bf);let jw=class extends ut{constructor(e){super(e),this.created=null,this.rating=null}};d([g({type:Date})],jw.prototype,"created",void 0),d([g()],jw.prototype,"rating",void 0),jw=d([G("esri.portal.PortalRating")],jw);var Ob;const AWe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),PWe=new Set(["KML","GeoJson","CSV"]);let Lt=Ob=class extends ve.JSONSupportMixin(ra){static from(t){return fk(Ob,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Ut(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var v;const t=((v=this.type)==null?void 0:v.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,p=!1,m=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),u=e.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":u?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),p=e.includes("Relational"),n=c||p?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(m=e.includes("Map"),n=m?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?Pr(i+n+r+".png"):null}get isLayer(){return this.type!=null&&AWe.has(this.type)}get itemCdnUrl(){return yX(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Ue.getDefault()),i=e.load(t).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{})).then((r=>{this.sourceJSON=r,this.read(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof jw?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new jw({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:le(this.applicationProxies),avgRating:this.avgRating,categories:le(this.categories),classification:le(this.classification),created:le(this.created),culture:this.culture,description:this.description,extent:le(this.extent),groupCategories:le(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:le(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:le(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:le(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Ob({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new jw(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Ob)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this)))}update(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ae("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Ob({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")vy(e)?r.query={data:e}:r.query={url:oc(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new ae("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await Re(()=>import("./resourceUtils-CVNSN7md.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await Re(()=>import("./resourceUtils-CVNSN7md.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await Re(()=>import("./resourceUtils-CVNSN7md.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ae("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await Re(()=>import("./resourceUtils-CVNSN7md.js"),[]);return e(this,t)}resourceFromPath(t){return new Bf({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:le(this.categories),classification:le(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:le(this.typeKeywords),url:this.url};return A4e(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Ob({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};d([g({type:["private","shared","org","public"]})],Lt.prototype,"access",void 0),d([g()],Lt.prototype,"accessInformation",void 0),d([g({type:String})],Lt.prototype,"apiKey",void 0),d([g({json:{read:{source:"appProxies"}}})],Lt.prototype,"applicationProxies",void 0),d([g()],Lt.prototype,"avgRating",void 0),d([g()],Lt.prototype,"categories",void 0),d([g()],Lt.prototype,"classification",void 0),d([g({type:Date})],Lt.prototype,"created",void 0),d([g()],Lt.prototype,"culture",void 0),d([g()],Lt.prototype,"description",void 0),d([g({readOnly:!0})],Lt.prototype,"displayName",null),d([g({type:Ut})],Lt.prototype,"extent",void 0),d([je("extent")],Lt.prototype,"readExtent",null),d([g()],Lt.prototype,"groupCategories",void 0),d([g({readOnly:!0})],Lt.prototype,"iconUrl",null),d([g()],Lt.prototype,"id",void 0),d([g({readOnly:!0})],Lt.prototype,"isLayer",null),d([g({type:Boolean,readOnly:!0})],Lt.prototype,"isOrgItem",void 0),d([g()],Lt.prototype,"itemControl",void 0),d([g({readOnly:!0})],Lt.prototype,"itemPageUrl",null),d([g({readOnly:!0})],Lt.prototype,"itemUrl",null),d([g()],Lt.prototype,"licenseInfo",void 0),d([g({type:Date})],Lt.prototype,"modified",void 0),d([g()],Lt.prototype,"name",void 0),d([g()],Lt.prototype,"numComments",void 0),d([g()],Lt.prototype,"numRatings",void 0),d([g()],Lt.prototype,"numViews",void 0),d([g()],Lt.prototype,"owner",void 0),d([g()],Lt.prototype,"ownerFolder",void 0),d([g({type:Ue})],Lt.prototype,"portal",void 0),d([g()],Lt.prototype,"screenshots",void 0),d([g()],Lt.prototype,"size",void 0),d([g()],Lt.prototype,"snippet",void 0),d([g()],Lt.prototype,"sourceJSON",void 0),d([g({type:String})],Lt.prototype,"sourceUrl",void 0),d([g({type:String})],Lt.prototype,"spatialReference",void 0),d([g()],Lt.prototype,"tags",void 0),d([g()],Lt.prototype,"thumbnail",void 0),d([g({readOnly:!0})],Lt.prototype,"thumbnailUrl",null),d([g()],Lt.prototype,"title",void 0),d([g()],Lt.prototype,"type",void 0),d([g()],Lt.prototype,"typeKeywords",void 0),d([g({type:String,json:{read(t,e){var i;if(PWe.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],Lt.prototype,"url",void 0),d([g({readOnly:!0})],Lt.prototype,"userItemUrl",null),Lt=Ob=d([G("esri.portal.PortalItem")],Lt);const Y2e=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Lt}},Symbol.toStringTag,{value:"Module"}));async function kWe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await qj("esri/t9n/basemaps");return i[t]||i[e]}const Cq={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Pr("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Pr("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Pr("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Pr("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Pr("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Pr("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let Vf=class extends ut{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:QSe(e??fl())??"global";return i=i==="no"?"nb":i,i}};d([g()],Vf.prototype,"apiKey",void 0),d([g()],Vf.prototype,"id",void 0),d([g()],Vf.prototype,"language",void 0),d([g()],Vf.prototype,"places",void 0),d([g()],Vf.prototype,"serviceUrl",void 0),d([g()],Vf.prototype,"worldview",void 0),Vf=d([G("esri.support.BasemapStyle")],Vf);const OWe=Vf,XL=new WeakMap;function tQ(t){return!t.destroyed&&(XL.has(t)||t.addHandles([Je((()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||tQ(e))}),(e=>XL.set(t,e)),Sa),Ci((()=>XL.delete(t)))]),XL.get(t))}function K2e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function F6t(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function LWe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function RWe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function z6t(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function tce(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function yv(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const j6t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Iq(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function U6t(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function Xj(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function B6t(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}async function iQ(t,e){const i=Rt==null?void 0:Rt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await ni(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function J2e(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function NWe(t){return J2e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function DWe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function FWe(t){return!!DWe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function V6t(t){const e=new et;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||tQ(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function zWe(t,e){return null}function G6t(t){return null}function Aq(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function q6t(t,e){!e||!Aq(t)||zWe(t.url)}const jWe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),X2e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),UWe=new Set([...X2e,"link-chart"]);function BWe(t){switch(t.layerContainerType){case"basemap":return jWe;case"operational-layers":return t.origin==="link-chart"?UWe:X2e;default:return null}}function VWe(t,e){if(e.restrictedWebMapWriting){const i=BWe(e);return i==null||i.has(t.type)&&!Xj(t)}return!0}function GWe(t,e){var i;if(e)if(Xj(t)){const r=rk("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&ice(t,n)}else t.type!=="group"&&ice(t,e)}function ice(t,e){"maxScale"in t&&(e.maxScale=jD(t.maxScale)??void 0),"minScale"in t&&(e.minScale=jD(t.minScale)??void 0)}function qWe(t,e){if(GWe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=jD(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(Xj(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function Pq(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new ae("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Xj(t)&&!t.isTable)e=t.resourceInfo;else if(VWe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&qWe(t,e=le(e)),e}var IC;let HWe=0,jl=IC=class extends ve.JSONSupportMixin(ra){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+HWe++,this.baseLayers=new et,this.referenceLayers=new et;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ce.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",(r=>e(r.item))),this.referenceLayers.on("after-add",(r=>e(r.item))),this.baseLayers.on("after-remove",(r=>i(r.item))),this.referenceLayers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{Ce.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Lr(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",sy(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((n=>{const s=Pq(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)})),this.referenceLayers.forEach((n=>{const s=Pq(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))}))),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",sy(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Jj(this,(t=>{t(this.baseLayers,this.referenceLayers)}))}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>$D(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>$D(e)?e.clone():e))};return this.loaded&&(t.loadStatus="loaded"),new IC({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((r=>{const n=le(r);return n.url&&Vp(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Vp(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n}))),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;Rr(t);const n=[];if(e){const s=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;n.push(kWe(o).then((a=>{a&&this.read({title:a},e.context)})))}}else i?n.push(this._loadFromItem(i,t)):r&&n.push(this._loadFromStylesService(r,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){var l,c;const r=(l=this.resourceInfo)==null?void 0:l.context,n=((c=this.portalItem)==null?void 0:c.portal)||(r==null?void 0:r.portal)||null,s=ZWe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await Re(async()=>{const{populateOperationalLayers:u}=await import("./layersCreator-CLMvck7j.js");return{populateOperationalLayers:u}},__vite__mapDeps([154,155,156,157,158,159])),a=[];if(Rr(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const u={context:{...r,origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},p=w=>s==="web-scene"&&w.layerType==="ArcGISSceneServiceLayer"||w.isReference,m=o(this.baseLayers,t.baseMapLayers.filter((w=>!p(w))),u);a.push(m);const v=o(this.referenceLayers,t.baseMapLayers.filter(p),u);a.push(v)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=qn(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:WWe[t.type||""]??"web-map",portal:t.portal||Ue.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Ue.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,n=`${i}/webmaps/${t.id}`,s=t.apiKey??fi.apiKeys.basemapStyles,[o,a]=await Promise.all([(await ni(r,{query:{token:s},signal:e==null?void 0:e.signal})).data,(await ni(n,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:s},signal:e==null?void 0:e.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const l=qn(n);if(this._set("resourceInfo",{data:a.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:a.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,e),s)for(const c of[...this.baseLayers,...this.referenceLayers])"apiKey"in c&&(c.apiKey=s)}static fromId(t){const e=Cq[t];return e?e.itemId?new IC({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):IC.fromJSON(e,e.is3d?{origin:"web-scene",portal:new Ue({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};d([g({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:et}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],jl.prototype,"baseLayers",null),d([g({type:String,json:{origins:{"web-scene":{write:!0}}}})],jl.prototype,"id",void 0),d([g({type:Lt})],jl.prototype,"portalItem",void 0),d([g()],jl.prototype,"referenceLayers",null),d([g({readOnly:!0})],jl.prototype,"resourceInfo",void 0),d([g({type:tt})],jl.prototype,"spatialReference",void 0),d([g({type:OWe})],jl.prototype,"style",void 0),d([g()],jl.prototype,"thumbnailUrl",void 0),d([g({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],jl.prototype,"title",void 0),d([Ge("title")],jl.prototype,"writeTitle",null),jl=IC=d([G("esri.Basemap")],jl);const WWe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},ZWe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},YI=jl,YWe=Object.freeze(Object.defineProperty({__proto__:null,default:YI},Symbol.toStringTag,{value:"Module"})),m5={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Q2e(t){return!!m5[t]||!!m5[t.toLowerCase()]}function rQ(t){return m5[t]??m5[t.toLowerCase()]}function KWe(t){return[...rQ(t)]}function $8(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function eEe(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*$8(o,s,n+1/3)),Math.round(255*$8(o,s,n)),Math.round(255*$8(o,s,n-1/3)),r]}function JWe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function tEe(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function iEe(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){const n=i[0];if(n.charAt(n.length-1)==="%"){const s=i.map((o=>2.56*parseFloat(o)));return i.length===4&&(s[3]=parseFloat(i[3])),rce(s)}return rce(i.map((s=>parseFloat(s))))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return eEe(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function rce(t){return t[0]=I2(t[0]),t[1]=I2(t[1]),t[2]=I2(t[2]),t[3]=t.length===4?nEe(t[3]):1,t}function rEe(t){let e=Q2e(t)?rQ(t):null;return e??(e=iEe(t)),e??(e=tEe(t)),e}function H6t(t){const e=rEe(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function nEe(t){return sEe(t,0,1)}function I2(t){return Math.round(sEe(t,0,255))}function sEe(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const W6t=2.2;function QL(t){return sa(JJ(t),0,255)}function eR(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let rN=class Ga{static blendColors(e,i,r,n=new Ga){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=iEe(e);return r?Ga.fromArray(r,i):null}static fromHex(e,i=new Ga){const r=tEe(e);return r?Ga.fromArray(r,i):null}static fromArray(e,i=new Ga){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=rEe(e);return r?Ga.fromArray(r,i):null}static fromJSON(e){return e!=null?new Ga([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Ga.fromString(e,this):Array.isArray(e)?Ga.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Ga||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${eR(this.r,n)}${eR(this.g,n)}${eR(this.b,n)}${s?eR(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Ga.AlphaMode.ALWAYS){const i=QL(this.r),r=QL(this.g),n=QL(this.b);return e===Ga.AlphaMode.ALWAYS||this.a!==1?[i,r,n,QL(255*this.a)]:[i,r,n]}clone(){return new Ga(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=I2(this.r),this.g=I2(this.g),this.b=I2(this.b),this.a=nEe(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};rN.prototype.declaredClass="esri.Color",(function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(rN||(rN={}));const Ze=rN;var kq;let nN=kq=class extends ve{constructor(t){super(t),this.type="none"}clone(){return new kq({type:this.type})}};d([dt({none:"none",stayAbove:"stay-above"}),g({json:{write:{isRequired:!0}}})],nN.prototype,"type",void 0),nN=kq=d([G("esri.ground.NavigationConstraint")],nN);const XWe=Symbol("GroundInstance");function Qj(t){const e=JJ(100*(1-t));return Math.max(0,Math.min(e,100))}function JA(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var nce,Oq,Ybe;let Gf=Oq=(Ybe=class extends ve.JSONSupportMixin(ra){constructor(t){super(t),this[nce]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new et;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ce.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>i(r.item)))])}initialize(){this.when().catch((t=>{io(t)||Ce.getLogger(this).error("#load()","Failed to load ground",t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)Lr(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",sy(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach((s=>{if("write"in s){const o={};E4e(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new ae("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))}))),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Jj(this,(t=>{t(this.layers)}))}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Re(()=>import("./ElevationQuery-CWbU7Piv.js"),[]);Rr(e);const r=new i,n=this.layers.filter(sce).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Re(()=>import("./ElevationQuery-CWbU7Piv.js"),[]);Rr(e);const r=new i,n=this.layers.filter(sce).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:le(this.surfaceColor),navigationConstraint:le(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Oq({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await Re(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-CLMvck7j.js");return{populateOperationalLayers:l}},__vite__mapDeps([154,155,156,157,158,159]));Rr(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},nce=XWe,Ybe);function QWe(t){return t&&"createElevationSampler"in t}function sce(t){return t.type==="elevation"||QWe(t)}d([g({json:{read:!1,write:{isRequired:!0}}})],Gf.prototype,"layers",null),d([Ge("layers")],Gf.prototype,"writeLayers",null),d([g({readOnly:!0})],Gf.prototype,"resourceInfo",void 0),d([g({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ri,read:{reader:JA,source:"transparency"},write:{writer:(t,e)=>{e.transparency=Qj(t)},target:"transparency"}}})],Gf.prototype,"opacity",void 0),d([g({type:Ze,json:{type:[ri],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Gf.prototype,"surfaceColor",void 0),d([g({type:nN,json:{write:!0}})],Gf.prototype,"navigationConstraint",void 0),Gf=Oq=d([G("esri.Ground")],Gf);const y5=Gf,eZe="randomUUID"in crypto;function WT(){if(eZe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function Z6t(){return`{${WT().toUpperCase()}}`}function tZe(){return`{${WT()}}`}function iZe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const vx={Base64:0,Hex:1,String:2,Raw:3},A2=8,oEe=(1<<A2)-1;function kv(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function rZe(t){const e=[];for(let i=0,r=t.length*A2;i<r;i+=A2)e[i>>5]|=(t.charCodeAt(i/A2)&oEe)<<i%32;return e}function nZe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=A2)e.push(String.fromCharCode(t[i>>5]>>>i%32&oEe));return e.join("")}function sZe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function oZe(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push("="):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function aZe(t,e){return t<<e|t>>>32-e}function e4(t,e,i,r,n,s){return kv(aZe(kv(kv(e,t),kv(r,s)),n),i)}function Ro(t,e,i,r,n,s,o){return e4(e&i|~e&r,t,e,n,s,o)}function No(t,e,i,r,n,s,o){return e4(e&r|i&~r,t,e,n,s,o)}function Do(t,e,i,r,n,s,o){return e4(e^i^r,t,e,n,s,o)}function Fo(t,e,i,r,n,s,o){return e4(i^(e|~r),t,e,n,s,o)}function lZe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=n,u=s;i=Ro(i,r,n,s,t[o],7,-680876936),s=Ro(s,i,r,n,t[o+1],12,-389564586),n=Ro(n,s,i,r,t[o+2],17,606105819),r=Ro(r,n,s,i,t[o+3],22,-1044525330),i=Ro(i,r,n,s,t[o+4],7,-176418897),s=Ro(s,i,r,n,t[o+5],12,1200080426),n=Ro(n,s,i,r,t[o+6],17,-1473231341),r=Ro(r,n,s,i,t[o+7],22,-45705983),i=Ro(i,r,n,s,t[o+8],7,1770035416),s=Ro(s,i,r,n,t[o+9],12,-1958414417),n=Ro(n,s,i,r,t[o+10],17,-42063),r=Ro(r,n,s,i,t[o+11],22,-1990404162),i=Ro(i,r,n,s,t[o+12],7,1804603682),s=Ro(s,i,r,n,t[o+13],12,-40341101),n=Ro(n,s,i,r,t[o+14],17,-1502002290),r=Ro(r,n,s,i,t[o+15],22,1236535329),i=No(i,r,n,s,t[o+1],5,-165796510),s=No(s,i,r,n,t[o+6],9,-1069501632),n=No(n,s,i,r,t[o+11],14,643717713),r=No(r,n,s,i,t[o],20,-373897302),i=No(i,r,n,s,t[o+5],5,-701558691),s=No(s,i,r,n,t[o+10],9,38016083),n=No(n,s,i,r,t[o+15],14,-660478335),r=No(r,n,s,i,t[o+4],20,-405537848),i=No(i,r,n,s,t[o+9],5,568446438),s=No(s,i,r,n,t[o+14],9,-1019803690),n=No(n,s,i,r,t[o+3],14,-187363961),r=No(r,n,s,i,t[o+8],20,1163531501),i=No(i,r,n,s,t[o+13],5,-1444681467),s=No(s,i,r,n,t[o+2],9,-51403784),n=No(n,s,i,r,t[o+7],14,1735328473),r=No(r,n,s,i,t[o+12],20,-1926607734),i=Do(i,r,n,s,t[o+5],4,-378558),s=Do(s,i,r,n,t[o+8],11,-2022574463),n=Do(n,s,i,r,t[o+11],16,1839030562),r=Do(r,n,s,i,t[o+14],23,-35309556),i=Do(i,r,n,s,t[o+1],4,-1530992060),s=Do(s,i,r,n,t[o+4],11,1272893353),n=Do(n,s,i,r,t[o+7],16,-155497632),r=Do(r,n,s,i,t[o+10],23,-1094730640),i=Do(i,r,n,s,t[o+13],4,681279174),s=Do(s,i,r,n,t[o],11,-358537222),n=Do(n,s,i,r,t[o+3],16,-722521979),r=Do(r,n,s,i,t[o+6],23,76029189),i=Do(i,r,n,s,t[o+9],4,-640364487),s=Do(s,i,r,n,t[o+12],11,-421815835),n=Do(n,s,i,r,t[o+15],16,530742520),r=Do(r,n,s,i,t[o+2],23,-995338651),i=Fo(i,r,n,s,t[o],6,-198630844),s=Fo(s,i,r,n,t[o+7],10,1126891415),n=Fo(n,s,i,r,t[o+14],15,-1416354905),r=Fo(r,n,s,i,t[o+5],21,-57434055),i=Fo(i,r,n,s,t[o+12],6,1700485571),s=Fo(s,i,r,n,t[o+3],10,-1894986606),n=Fo(n,s,i,r,t[o+10],15,-1051523),r=Fo(r,n,s,i,t[o+1],21,-2054922799),i=Fo(i,r,n,s,t[o+8],6,1873313359),s=Fo(s,i,r,n,t[o+15],10,-30611744),n=Fo(n,s,i,r,t[o+6],15,-1560198380),r=Fo(r,n,s,i,t[o+13],21,1309151649),i=Fo(i,r,n,s,t[o+4],6,-145523070),s=Fo(s,i,r,n,t[o+11],10,-1120210379),n=Fo(n,s,i,r,t[o+2],15,718787259),r=Fo(r,n,s,i,t[o+9],21,-343485551),i=kv(i,a),r=kv(r,l),n=kv(n,c),s=kv(s,u)}return[i,r,n,s]}function nQ(t,e=vx.Hex){const i=e||vx.Base64,r=lZe(rZe(t),t.length*A2);switch(i){case vx.Raw:return r;case vx.Hex:return sZe(r);case vx.String:return nZe(r);case vx.Base64:return oZe(r)}}function cZe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function Lq(t){return sQ[uZe(t)]||dZe}function uZe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:hZe(t.url)}function hZe(t){const e=M1e(t);return Rq[e]||aEe}const sQ={},aEe="text/plain",dZe=sQ[aEe],Rq={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in Rq)sQ[Rq[t]]=t;function pZe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const n=fZe(t,i,r);for(const s of e){const o=XJ(i,s,r);for(const a in n)o[a]=n[a]}}}function fZe(t,e,i){if((t==null?void 0:t.type)==="resource")return mZe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=UBe;return{read:r,write:n}}}}function mZe(t,e,i){var n,s;const r=yk(e,i);return{type:String,read:(o,a,l)=>{const c=Cj(o,a,l);return r.type===String?c:typeof r.type=="function"?new r.type({url:c}):void 0},write:{isRequired:(s=(n=r.json)==null?void 0:n.write)==null?void 0:s.isRequired,writer(o,a,l,c){if(!(c!=null&&c.resources))return typeof o=="string"?void(a[l]=L_(o,c)):void(a[l]=o.write({},c));const u=vZe(o),p=L_(u,{...c,verifyItemRelativeUrls:c!=null&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},VE.NO),m=r.type!==String&&(!cZe(this)||(c==null?void 0:c.origin)&&this.originIdOf(i)>Nm(c.origin)),v={object:this,propertyName:i,value:o,targetUrl:p,dest:a,targetPropertyName:l,context:c,params:t};c!=null&&c.portalItem&&p&&!pl(p)?m&&(t!=null&&t.contentAddressed)?Nq(v):m?yZe(v):gZe(v):c!=null&&c.portalItem&&(p==null||k1e(p)!=null||FT(p)||m)?Nq(v):a[l]=p}}}}function Nq(t){var w;const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:o}=t;if(!n.portalItem)return;const a=O1e(e),l=cEe(r,e,n);if(i!=null&&i.contentAddressed&&l.type!=="json")return void((w=n.messages)==null?void 0:w.push(new ae("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l})));const c=i!=null&&i.contentAddressed&&l.type==="json"?nQ(l.jsonString):(a==null?void 0:a.filename)??WT(),u=k_((i==null?void 0:i.prefix)??(a==null?void 0:a.prefix),c),p=`${u}.${Lq(l)}`;if(i!=null&&i.contentAddressed&&n.resources&&l.type==="json"){const _=n.resources.toKeep.find((({resource:T})=>T.path===p))??n.resources.toAdd.find((({resource:T})=>T.path===p));if(_)return void(s[o]=_.resource.itemRelativeUrl)}const m=n.portalItem.resourceFromPath(p);FT(e)&&n.resources&&n.resources.pendingOperations.push(CBe(e).then((_=>{m.path=`${u}.${Lq({type:"blob",blob:_})}`,s[o]=m.itemRelativeUrl})).catch((()=>{})));const v=(i==null?void 0:i.compress)??!1;n.resources&&lEe({...t,resource:m,content:l,compress:v,updates:n.resources.toAdd}),s[o]=m.itemRelativeUrl}function yZe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=cEe(n,i,e),c=Lq(l),u=M1e(a.path),p=(r==null?void 0:r.compress)??!1;c===u?(e.resources&&lEe({...t,resource:a,content:l,compress:p,updates:e.resources.toUpdate}),s[o]=i):Nq(t)}function gZe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function lEe({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const o=a=>{bZe(t,e,a)};i.push({resource:r,content:n,compress:s,finish:o})}function cEe(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function vZe(t){return t==null?null:typeof t=="string"?t:t.url}function bZe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let sN=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.color=null}};d([g({type:Ze,json:{type:[ri],write:!0}})],sN.prototype,"color",void 0),sN=d([G("esri.effects.FocusAreaOutline")],sN);const wZe=sN;var oN;let Dq=oN=class extends ve.JSONSupportMixin(et.ofType(or)){constructor(t){super(t)}clone(){return new oN(this.items.map((t=>t.clone())))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map((r=>{var s;if(!e.equals(r.spatialReference)){if(!jh(r.spatialReference,e))return(s=t==null?void 0:t.messages)==null||s.push(new vc("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const o=new or;w2e(r,o,e),r=o}const n=r.toJSON(t);return delete n.spatialReference,n})).filter((r=>r!=null)):this.toArray().map((r=>r.toJSON(t)))}static fromJSON(t,e){const i=new oN;return t.forEach((r=>i.add(or.fromJSON(r,e)))),i}};Dq=oN=d([G("esri.layers.support.PolygonCollection")],Dq);const KI=Dq;let qf=class extends ve.JSONSupportMixin(Et){constructor(e){super(e),this.id=`focusarea-${WT()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new KI}readGeometries(e,i,r){var n,s;Array.isArray(e)?this.geometries=KI.fromJSON(e,r):(s=(n=r.hooks)==null?void 0:n.onAfterLoad)==null||s.call(n,(()=>this._loadGeometries(ny(e,r),r)))}async _loadGeometries(e,i){const r=await ni(e,{responseType:"json"});this.geometries=KI.fromJSON(r.data,i)}};d([g({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),g()],qf.prototype,"id",void 0),d([g({type:String,json:{write:!0}})],qf.prototype,"title",void 0),d([g({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],qf.prototype,"enabled",void 0),d([g({type:wZe,json:{write:!0}})],qf.prototype,"outline",void 0),d([g({type:KI,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new KI(t.items.map((e=>e.clone())))}),pZe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],qf.prototype,"geometries",void 0),d([je(["web-scene","portal-item"],"geometries")],qf.prototype,"readGeometries",null),qf=d([G("esri.effects.FocusArea")],qf);const _Ze=qf;let AC=class extends ve.JSONSupportMixin(Et){constructor(e){super(e),this.areas=new et,this.style="bright"}};d([g({type:et.ofType(_Ze),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new et(t.items.map((e=>e.clone())))})],AC.prototype,"areas",void 0),d([g({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],AC.prototype,"style",void 0),AC=d([G("esri.effects.FocusAreas")],AC);const uEe=AC;function xZe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function SZe(t){var e,i;return!(!xZe(t)||!((i=(e=NWe(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!FWe(t)||tQ(t))}const EZe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,TZe="screenUtils.toPt: input not recognized!",hEe=96;function li(t){return t?t/72*hEe:0}function Bi(t){return t?72*t/hEe:0}function Ti(t){if(typeof t=="string"){const e=t.match(EZe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?Bi(i):i;return n?-s:s}return console.warn(TZe),null}return t}function to(t=0,e=0){return{x:t,y:e}}function X6t(t){return t?to(t.x,t.y):null}function Q6t(t=0,e=0){return[t,e]}function eBt(t=0,e=0,i=0){return[t,e,i]}function tBt(t){return t}function iBt(t){return t}function rBt(t){return t}function nBt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function t4(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function $Ze(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function MZe(t,e,i,r,n,s,o,a,l,c,u,p,m,v,w,_){const T=new Float32Array(16);return T[0]=t,T[1]=e,T[2]=i,T[3]=r,T[4]=n,T[5]=s,T[6]=o,T[7]=a,T[8]=l,T[9]=c,T[10]=u,T[11]=p,T[12]=m,T[13]=v,T[14]=w,T[15]=_,T}const CZe=t4();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:CZe,clone:$Ze,create:t4,fromValues:MZe},Symbol.toStringTag,{value:"Module"}));let oQ=1e-6;function Oa(){return oQ}function IZe(t){oQ=t}const i4=Math.random,AZe=Math.PI/180,PZe=180/Math.PI;function aQ(t){return t*AZe}function kZe(t){return t*PZe}function OZe(t,e){return Math.abs(t-e)<=oQ*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:i4,equals:OZe,getEpsilon:Oa,setEpsilon:IZe,toDegree:kZe,toRadian:aQ},Symbol.toStringTag,{value:"Module"}));function dEe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x0(t,e,i,r,n,s,o,a,l,c,u,p,m,v,w,_,T){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=p,t[11]=m,t[12]=v,t[13]=w,t[14]=_,t[15]=T,t}function r4(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S0(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function LZe(t,e){return pEe(t,e)||r4(t),t}function pEe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=e[9],m=e[10],v=e[11],w=e[12],_=e[13],T=e[14],$=e[15],I=i*a-r*o,A=i*l-n*o,k=i*c-s*o,R=r*l-n*a,F=r*c-s*a,B=n*c-s*l,q=u*_-p*w,Y=u*T-m*w,J=u*$-v*w,Q=p*T-m*_,te=p*$-v*_,re=m*$-v*T;let ee=I*re-A*te+k*Q+R*J-F*Y+B*q;return ee?(ee=1/ee,t[0]=(a*re-l*te+c*Q)*ee,t[1]=(n*te-r*re-s*Q)*ee,t[2]=(_*B-T*F+$*R)*ee,t[3]=(m*F-p*B-v*R)*ee,t[4]=(l*J-o*re-c*Y)*ee,t[5]=(i*re-n*J+s*Y)*ee,t[6]=(T*k-w*B-$*A)*ee,t[7]=(u*B-m*k+v*A)*ee,t[8]=(o*te-a*J+c*q)*ee,t[9]=(r*J-i*te-s*q)*ee,t[10]=(w*F-_*k+$*I)*ee,t[11]=(p*k-u*F-v*I)*ee,t[12]=(a*Y-o*Q-l*q)*ee,t[13]=(i*Q-r*Y+n*q)*ee,t[14]=(_*A-w*R-T*I)*ee,t[15]=(u*R-p*A+m*I)*ee,t):null}function RZe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=e[9],m=e[10],v=e[11],w=e[12],_=e[13],T=e[14],$=e[15];return t[0]=a*(m*$-v*T)-p*(l*$-c*T)+_*(l*v-c*m),t[1]=-(r*(m*$-v*T)-p*(n*$-s*T)+_*(n*v-s*m)),t[2]=r*(l*$-c*T)-a*(n*$-s*T)+_*(n*c-s*l),t[3]=-(r*(l*v-c*m)-a*(n*v-s*m)+p*(n*c-s*l)),t[4]=-(o*(m*$-v*T)-u*(l*$-c*T)+w*(l*v-c*m)),t[5]=i*(m*$-v*T)-u*(n*$-s*T)+w*(n*v-s*m),t[6]=-(i*(l*$-c*T)-o*(n*$-s*T)+w*(n*c-s*l)),t[7]=i*(l*v-c*m)-o*(n*v-s*m)+u*(n*c-s*l),t[8]=o*(p*$-v*_)-u*(a*$-c*_)+w*(a*v-c*p),t[9]=-(i*(p*$-v*_)-u*(r*$-s*_)+w*(r*v-s*p)),t[10]=i*(a*$-c*_)-o*(r*$-s*_)+w*(r*c-s*a),t[11]=-(i*(a*v-c*p)-o*(r*v-s*p)+u*(r*c-s*a)),t[12]=-(o*(p*T-m*_)-u*(a*T-l*_)+w*(a*m-l*p)),t[13]=i*(p*T-m*_)-u*(r*T-n*_)+w*(r*m-n*p),t[14]=-(i*(a*T-l*_)-o*(r*T-n*_)+w*(r*l-n*a)),t[15]=i*(a*m-l*p)-o*(r*m-n*p)+u*(r*l-n*a),t}function NZe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],p=t[10],m=t[11],v=t[12],w=t[13],_=t[14],T=t[15];return(e*o-i*s)*(p*T-m*_)-(e*a-r*s)*(u*T-m*w)+(e*l-n*s)*(u*_-p*w)+(i*a-r*o)*(c*T-m*v)-(i*l-n*o)*(c*_-p*v)+(r*l-n*a)*(c*w-u*v)}function fEe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=e[8],m=e[9],v=e[10],w=e[11],_=e[12],T=e[13],$=e[14],I=e[15];let A=i[0],k=i[1],R=i[2],F=i[3];return t[0]=A*r+k*a+R*p+F*_,t[1]=A*n+k*l+R*m+F*T,t[2]=A*s+k*c+R*v+F*$,t[3]=A*o+k*u+R*w+F*I,A=i[4],k=i[5],R=i[6],F=i[7],t[4]=A*r+k*a+R*p+F*_,t[5]=A*n+k*l+R*m+F*T,t[6]=A*s+k*c+R*v+F*$,t[7]=A*o+k*u+R*w+F*I,A=i[8],k=i[9],R=i[10],F=i[11],t[8]=A*r+k*a+R*p+F*_,t[9]=A*n+k*l+R*m+F*T,t[10]=A*s+k*c+R*v+F*$,t[11]=A*o+k*u+R*w+F*I,A=i[12],k=i[13],R=i[14],F=i[15],t[12]=A*r+k*a+R*p+F*_,t[13]=A*n+k*l+R*m+F*T,t[14]=A*s+k*c+R*v+F*$,t[15]=A*o+k*u+R*w+F*I,t}function DZe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],p=e[5],m=e[6],v=e[7],w=e[8],_=e[9],T=e[10],$=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=p,t[6]=m,t[7]=v,t[8]=w,t[9]=_,t[10]=T,t[11]=$,t[12]=o*r+u*n+w*s+e[12],t[13]=a*r+p*n+_*s+e[13],t[14]=l*r+m*n+T*s+e[14],t[15]=c*r+v*n+$*s+e[15]}return t}function FZe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zZe(t,e,i,r){let n=r[0],s=r[1],o=r[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=Oa())return void dEe(t,e);a=1/a,n*=a,s*=a,o*=a;const l=Math.sin(i),c=Math.cos(i),u=1-c,p=e[0],m=e[1],v=e[2],w=e[3],_=e[4],T=e[5],$=e[6],I=e[7],A=e[8],k=e[9],R=e[10],F=e[11],B=n*n*u+c,q=s*n*u+o*l,Y=o*n*u-s*l,J=n*s*u-o*l,Q=s*s*u+c,te=o*s*u+n*l,re=n*o*u+s*l,ee=s*o*u-n*l,ye=o*o*u+c;t[0]=p*B+_*q+A*Y,t[1]=m*B+T*q+k*Y,t[2]=v*B+$*q+R*Y,t[3]=w*B+I*q+F*Y,t[4]=p*J+_*Q+A*te,t[5]=m*J+T*Q+k*te,t[6]=v*J+$*Q+R*te,t[7]=w*J+I*Q+F*te,t[8]=p*re+_*ee+A*ye,t[9]=m*re+T*ee+k*ye,t[10]=v*re+$*ee+R*ye,t[11]=w*re+I*ee+F*ye,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function jZe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],p=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=o*n+u*r,t[6]=a*n+p*r,t[7]=l*n+m*r,t[8]=c*n-s*r,t[9]=u*n-o*r,t[10]=p*n-a*r,t[11]=m*n-l*r,t}function UZe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],p=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=o*n-u*r,t[2]=a*n-p*r,t[3]=l*n-m*r,t[8]=s*r+c*n,t[9]=o*r+u*n,t[10]=a*r+p*n,t[11]=l*r+m*n,t}function BZe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],p=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=o*n+u*r,t[2]=a*n+p*r,t[3]=l*n+m*r,t[4]=c*n-s*r,t[5]=u*n-o*r,t[6]=p*n-a*r,t[7]=m*n-l*r,t}function VZe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function GZe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qZe(t,e,i){if(e===0)return r4(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=Oa())return null;o=1/o,r*=o,n*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=n*r*c+s*a,t[2]=s*r*c-n*a,t[3]=0,t[4]=r*n*c-s*a,t[5]=n*n*c+l,t[6]=s*n*c+r*a,t[7]=0,t[8]=r*s*c+n*a,t[9]=n*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HZe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function WZe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ZZe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mEe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,u=r*a,p=r*l,m=r*c,v=n*l,w=n*c,_=s*c,T=o*a,$=o*l,I=o*c;return t[0]=1-(v+_),t[1]=p+I,t[2]=m-$,t[3]=0,t[4]=p-I,t[5]=1-(u+_),t[6]=w+T,t[7]=0,t[8]=m+$,t[9]=w-T,t[10]=1-(u+v),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function YZe(t,e){const i=KZe,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=r*r+n*n+s*s+o*o;return p>0?(i[0]=2*(a*o+u*r+l*s-c*n)/p,i[1]=2*(l*o+u*n+c*r-a*s)/p,i[2]=2*(c*o+u*s+a*n-l*r)/p):(i[0]=2*(a*o+u*r+l*s-c*n),i[1]=2*(l*o+u*n+c*r-a*s),i[2]=2*(c*o+u*s+a*n-l*r)),mEe(t,e,i),t}const KZe=b0();function JZe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function XZe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function QZe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function eYe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,c=s+s,u=o+o,p=n*l,m=n*c,v=n*u,w=s*c,_=s*u,T=o*u,$=a*l,I=a*c,A=a*u,k=r[0],R=r[1],F=r[2];return t[0]=(1-(w+T))*k,t[1]=(m+A)*k,t[2]=(v-I)*k,t[3]=0,t[4]=(m-A)*R,t[5]=(1-(p+T))*R,t[6]=(_+$)*R,t[7]=0,t[8]=(v+I)*F,t[9]=(_-$)*F,t[10]=(1-(p+w))*F,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function tYe(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,p=a+a,m=s*c,v=s*u,w=s*p,_=o*u,T=o*p,$=a*p,I=l*c,A=l*u,k=l*p,R=r[0],F=r[1],B=r[2],q=n[0],Y=n[1],J=n[2],Q=(1-(_+$))*R,te=(v+k)*R,re=(w-A)*R,ee=(v-k)*F,ye=(1-(m+$))*F,ne=(T+I)*F,ue=(w+A)*B,he=(T-I)*B,Ne=(1-(m+_))*B;return t[0]=Q,t[1]=te,t[2]=re,t[3]=0,t[4]=ee,t[5]=ye,t[6]=ne,t[7]=0,t[8]=ue,t[9]=he,t[10]=Ne,t[11]=0,t[12]=i[0]+q-(Q*q+ee*Y+ue*J),t[13]=i[1]+Y-(te*q+ye*Y+he*J),t[14]=i[2]+J-(re*q+ne*Y+Ne*J),t[15]=1,t}function iYe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,u=r*o,p=r*a,m=n*o,v=n*a,w=n*l,_=s*o,T=s*a,$=s*l;return t[0]=1-p-w,t[1]=u+$,t[2]=m-T,t[3]=0,t[4]=u-$,t[5]=1-c-w,t[6]=v+_,t[7]=0,t[8]=m+T,t[9]=v-_,t[10]=1-c-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rYe(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function nYe(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function sYe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function oYe(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*c,t[15]=1,t}function aYe(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],c=o-i[2];const u=Oa();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void r4(t);let p=1/Math.sqrt(a*a+l*l+c*c);a*=p,l*=p,c*=p;const m=r[0],v=r[1],w=r[2];let _=v*c-w*l,T=w*a-m*c,$=m*l-v*a;p=Math.sqrt(_*_+T*T+$*$),p?(p=1/p,_*=p,T*=p,$*=p):(_=0,T=0,$=0);let I=l*$-c*T,A=c*_-a*$,k=a*T-l*_;p=Math.sqrt(I*I+A*A+k*k),p?(p=1/p,I*=p,A*=p,k*=p):(I=0,A=0,k=0),t[0]=_,t[1]=I,t[2]=a,t[3]=0,t[4]=T,t[5]=A,t[6]=l,t[7]=0,t[8]=$,t[9]=k,t[10]=c,t[11]=0,t[12]=-(_*n+T*s+$*o),t[13]=-(I*n+A*s+k*o),t[14]=-(a*n+l*s+c*o),t[15]=1}function lYe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let u=n-i[0],p=s-i[1],m=o-i[2],v=u*u+p*p+m*m;v>0&&(v=1/Math.sqrt(v),u*=v,p*=v,m*=v);let w=l*m-c*p,_=c*u-a*m,T=a*p-l*u;return v=w*w+_*_+T*T,v>0&&(v=1/Math.sqrt(v),w*=v,_*=v,T*=v),t[0]=w,t[1]=_,t[2]=T,t[3]=0,t[4]=p*T-m*_,t[5]=m*w-u*T,t[6]=u*_-p*w,t[7]=0,t[8]=u,t[9]=p,t[10]=m,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function cYe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function uYe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function hYe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function yEe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function dYe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function pYe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function fYe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function mYe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],p=t[9],m=t[10],v=t[11],w=t[12],_=t[13],T=t[14],$=t[15],I=e[0],A=e[1],k=e[2],R=e[3],F=e[4],B=e[5],q=e[6],Y=e[7],J=e[8],Q=e[9],te=e[10],re=e[11],ee=e[12],ye=e[13],ne=e[14],ue=e[15],he=Oa();return Math.abs(i-I)<=he*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(r-A)<=he*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-k)<=he*Math.max(1,Math.abs(n),Math.abs(k))&&Math.abs(s-R)<=he*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(o-F)<=he*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(a-B)<=he*Math.max(1,Math.abs(a),Math.abs(B))&&Math.abs(l-q)<=he*Math.max(1,Math.abs(l),Math.abs(q))&&Math.abs(c-Y)<=he*Math.max(1,Math.abs(c),Math.abs(Y))&&Math.abs(u-J)<=he*Math.max(1,Math.abs(u),Math.abs(J))&&Math.abs(p-Q)<=he*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(m-te)<=he*Math.max(1,Math.abs(m),Math.abs(te))&&Math.abs(v-re)<=he*Math.max(1,Math.abs(v),Math.abs(re))&&Math.abs(w-ee)<=he*Math.max(1,Math.abs(w),Math.abs(ee))&&Math.abs(_-ye)<=he*Math.max(1,Math.abs(_),Math.abs(ye))&&Math.abs(T-ne)<=he*Math.max(1,Math.abs(T),Math.abs(ne))&&Math.abs($-ue)<=he*Math.max(1,Math.abs($),Math.abs(ue))}function yYe(t){const e=Oa(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+u*u))<=e}function gYe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const vYe=fEe,bYe=yEe;Object.freeze(Object.defineProperty({__proto__:null,add:hYe,adjoint:RZe,copy:dEe,determinant:NZe,equals:mYe,exactEquals:fYe,frob:uYe,fromQuat:iYe,fromQuat2:YZe,fromRotation:qZe,fromRotationTranslation:mEe,fromRotationTranslationScale:eYe,fromRotationTranslationScaleOrigin:tYe,fromScaling:GZe,fromTranslation:VZe,fromXRotation:HZe,fromYRotation:WZe,fromZRotation:ZZe,frustum:rYe,getRotation:QZe,getScale:XZe,getTranslation:JZe,hasIdentityRotation:gYe,identity:r4,invert:pEe,invertOrIdentity:LZe,isOrthoNormal:yYe,lookAt:aYe,mul:vYe,multiply:fEe,multiplyScalar:dYe,multiplyScalarAndAdd:pYe,ortho:oYe,perspective:nYe,perspectiveFromFieldOfView:sYe,rotate:zZe,rotateX:jZe,rotateY:UZe,rotateZ:BZe,scale:FZe,set:x0,str:cYe,sub:bYe,subtract:yEe,targetTo:lYe,translate:DZe,transpose:S0},Symbol.toStringTag,{value:"Module"}));const wYe=(t,e)=>{const i=x0(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return S0(i,i)},_Ye=(t,e)=>{const i=x0(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return S0(i,i)},xYe=(t,e)=>{const i=1-e,r=x0(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return S0(r,r)},SYe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=x0(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return S0(n,n)},EYe=(t,e)=>{const i=1-2*e,r=x0(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return S0(r,r)},TYe=(t,e)=>{const i=x0(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return S0(i,i)},$Ye=(t,e)=>{const i=1-e,r=x0(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return S0(r,r)};let gEe=class vEe{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=al(e.strength,i.strength,r),this.radius=al(e.radius,i.radius,r),this.threshold=al(e.threshold,i.threshold,r)}clone(){return new vEe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:JI(this.radius),strength:this.strength,threshold:this.threshold}}},bEe=class wEe{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(al(e.radius,i.radius,r))}clone(){return new wEe(this.radius)}toJSON(){return{type:"blur",radius:JI(this.radius)}}},Fq=class _Ee{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=al(e.amount,i.amount,r),this._updateMatrix()}clone(){return new _Ee(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||t4();switch(this.type){case"brightness":this._colorMatrix=wYe(e,this.amount);break;case"contrast":this._colorMatrix=_Ye(e,this.amount);break;case"grayscale":this._colorMatrix=xYe(e,this.amount);break;case"invert":this._colorMatrix=EYe(e,this.amount);break;case"saturate":this._colorMatrix=TYe(e,this.amount);break;case"sepia":this._colorMatrix=$Ye(e,this.amount)}}},xEe=class SEe{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=al(e.offsetX,i.offsetX,r),this.offsetY=al(e.offsetY,i.offsetY,r),this.blurRadius=al(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(al(e.color[0],i.color[0],r)),this.color[1]=Math.round(al(e.color[1],i.color[1],r)),this.color[2]=Math.round(al(e.color[2],i.color[2],r)),this.color[3]=al(e.color[3],i.color[3],r)}clone(){return new SEe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:JI(this.offsetX),yoffset:JI(this.offsetY),blurRadius:JI(this.blurRadius),color:e}}},EEe=class TEe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=al(e.angle,i.angle,r),this._updateMatrix()}clone(){return new TEe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||t4();this._colorMatrix=SYe(e,this.angle)}},$Ee=class MEe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=al(e.amount,i.amount,r)}clone(){return new MEe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function al(t,e,i){return t+(e-t)*i}function JI(t){return Math.round(1e3*Bi(t))/1e3}function MYe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new Fq(t.type,0);case"saturate":case"brightness":case"contrast":return new Fq(t.type,1);case"opacity":return new $Ee(1);case"hue-rotate":return new EEe(0);case"blur":return new bEe(0);case"drop-shadow":return new xEe(0,0,0,[...rQ("transparent")]);case"bloom":return new gEe(0,0,1)}}function CEe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((r,n)=>r.type===i[n].type))}function IEe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(MYe(i[n]))}function CYe(t){const e=t[0];return!!e&&"type"in e}const M8=()=>Ce.getLogger("esri.support.basemapUtils");function IYe(){return{}}function AYe(t){for(const e in t){const i=t[e];Lr(i),delete t[e]}}function PYe(t,e){let i;if(typeof t=="string"){const r=t in Cq,n=!r&&t.includes("/");if(!r&&!n){if(NG())M8().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(Cq).filter((([o,a])=>a.classic||a.is3d)).map((([o])=>`"${o}"`)).sort().join(", ");M8().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?YI.fromId(t):new YI({style:{id:t}}),e&&(e[t]=i))}else i=Zr(YI,t);return i!=null&&i.destroyed&&(M8().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function kYe(t){return new Kd({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function C8(t){for(const e of t.values())e==null||e.destroy();t.clear()}const oce={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function OYe(t){let e=null;if(typeof t=="string")if(t in oce){const i=oce[t];e=new y5({resourceInfo:{data:{layers:[i]}}})}else Ce.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Zr(y5,t);return e}let AEe=0;const PEe=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+AEe++})}};return e=d([G("esri.core.Identifiable")],e),e},LYe=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:AEe++})}};return e=d([G("esri.core.Identifiable.NumericIdentifiable")],e),e};let PC=class extends PEe(class{}){};PC=d([G("esri.core.Identifiable")],PC),(function(t){t.IdentifiableMixin=PEe,t.NumericIdentifiableMixin=LYe})(PC||(PC={}));const l1=PC;async function RYe(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await Re(async()=>{const{fromItem:n}=await import("./portalLayers-dAgcwqck.js");return{fromItem:n}},__vite__mapDeps([159,157,156,155,158]));try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||fi.portalUrl;throw Ce.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const zq={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function I8(t,e,i,r=xu){const n=new gl(BX(r)),s=ht.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":OEe(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function oBt(t,e,i="milliseconds"){const r=t.getTime(),n=kEe(e,i,"milliseconds");return new Date(r+n)}function ace(t,e,i=xu){const r=new gl(BX(i)),n=ht.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=OEe(e);return n.startOf(s).toJSDate()}function kEe(t,e,i){return t===0?0:t*zq[e]/zq[i]}function aBt(t,e){return t&&e?t.intersection(e):t||e}function OEe(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Gc,eE;let Wi=(eE=class extends ve{static get allTime(){return lce}static get empty(){return NYe}static fromArray(e){return new Gc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Gc.allTime)}get isEmpty(){return this.equals(Gc.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new Gc({end:this.end,start:this.start})}equals(e){var o,a,l,c;if(!e)return!1;const i=((o=this.start)==null?void 0:o.getTime())??this.start,r=((a=this.end)==null?void 0:a.getTime())??this.end,n=((l=e.start)==null?void 0:l.getTime())??e.start,s=((c=e.end)==null?void 0:c.getTime())??e.end;return i===n&&r===s}expandTo(e,i=xu){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=ace(r,e,i));let n=this.end;if(n){const s=ace(n,e,i);n=n.getTime()===s.getTime()?s:I8(s,1,e,i)}return new Gc({start:r,end:n})}intersection(e){var l,c,u,p;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Gc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,n=((u=e.start)==null?void 0:u.getTime())??-1/0,s=((p=e.end)==null?void 0:p.getTime())??1/0;let o,a;return n>=i&&n<=r?o=n:i>=n&&i<=s&&(o=i),r>=n&&r<=s?a=r:s>=i&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?Gc.empty:new Gc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=xu){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Gc,{start:s,end:o}=this;return s!=null&&(n.start=I8(s,e,i,r)),o!=null&&(n.end=I8(o,e,i,r)),n}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return lce.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Gc({start:i,end:r})}},Gc=eE,eE);d([g({type:Date,json:{write:{allowNull:!0}}})],Wi.prototype,"end",void 0),d([je("end")],Wi.prototype,"readEnd",null),d([Ge("end")],Wi.prototype,"writeEnd",null),d([g({readOnly:!0,json:{read:!1}})],Wi.prototype,"isAllTime",null),d([g({readOnly:!0,json:{read:!1}})],Wi.prototype,"isEmpty",null),d([g({type:Date,json:{write:{allowNull:!0}}})],Wi.prototype,"start",void 0),d([je("start")],Wi.prototype,"readStart",null),d([Ge("start")],Wi.prototype,"writeStart",null),Wi=Gc=d([G("esri.time.TimeExtent")],Wi);const lce=new Wi,NYe=new Wi({start:void 0,end:void 0});let DYe=0,Br=class extends Wh.EventedMixin(l1.IdentifiableMixin(ra)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ut(-180,-90,180,90,tt.WGS84),this.id=Date.now().toString(16)+"-layer-"+DYe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=tt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await Re(async()=>{const{fromUrl:r}=await import("./arcgisLayers-W9ASXq-b.js");return{fromUrl:r}},__vite__mapDeps([160,157,156,158]))).fromUrl(i)}static fromPortalItem(e){return RYe(e)}initialize(){this.when().catch((e=>{io(e)||Ce.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return qn(this.url)}createLayerView(e,i){return Promise.reject(new ae("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ni(e,{query:{f:"json"},responseType:"json"})).data;throw new ae("layer:no-attribution-data","Layer does not have attribution data")}};d([g({type:String})],Br.prototype,"attributionDataUrl",void 0),d([g({readOnly:!0})],Br.prototype,"effectiveVisible",null),d([g({type:Ut})],Br.prototype,"fullExtent",void 0),d([g({readOnly:!0})],Br.prototype,"hasAttributionData",null),d([g({type:String,clonable:!1})],Br.prototype,"id",void 0),d([g({type:Boolean,nonNullable:!0})],Br.prototype,"legendEnabled",void 0),d([g({type:["show","hide","hide-children"]})],Br.prototype,"listMode",void 0),d([g({type:Number,range:{min:0,max:1},nonNullable:!0})],Br.prototype,"opacity",void 0),d([g({clonable:!1})],Br.prototype,"parent",void 0),d([g({readOnly:!0})],Br.prototype,"parsedUrl",null),d([g({type:Boolean,readOnly:!0})],Br.prototype,"persistenceEnabled",void 0),d([g({type:Boolean})],Br.prototype,"popupEnabled",void 0),d([g({type:Boolean})],Br.prototype,"attributionVisible",void 0),d([g({type:tt})],Br.prototype,"spatialReference",void 0),d([g({type:String})],Br.prototype,"title",void 0),d([g({readOnly:!0,json:{read:!1}})],Br.prototype,"type",void 0),d([g()],Br.prototype,"url",void 0),d([g({type:Wi})],Br.prototype,"visibilityTimeExtent",void 0),d([g({type:Boolean,nonNullable:!0})],Br.prototype,"visible",void 0),Br=d([G("esri.layers.Layer")],Br);function jq(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=jq(r.layers,e,i),n))return n}}const FYe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new et;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||Ce.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",(o=>{if(o.item===this)return o.preventDefault(),void Ce.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)})),this.layers.on("after-add",(o=>n(o.item))),this.layers.on("after-remove",(o=>s(o.item)))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",sy(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof Br){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else ef(i)?i.then((s=>{this.destroyed||this.add(s,r)})):Ce.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach((o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)}))}findLayerById(i){return jq(this.layers,"id",i)}findLayerByUid(i){return jq(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return d([g()],e.prototype,"layers",null),e=d([G("esri.support.LayersMixin")],e),e},zYe=new Set(["feature","subtype-group"]);function Uq(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=Uq(s.tables,e,i);if(o)return o}}}const jYe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new et,this.addHandles([this.tables.on("after-add",(r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,zYe.has(n.type)||Ce.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(r=>{r.item.parent=null}))])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",sy(i,this._get("tables")))}findTableById(i){return Uq(this.tables,"id",i)}findTableByUid(i){return Uq(this.tables,"uid",i)}};return d([g()],e.prototype,"tables",null),e=d([G("esri.support.TablesMixin")],e),e};let qc=class extends jYe(FYe(Wh.EventedMixin(ut))){constructor(e){super(e),this.allLayers=new Kd({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new uEe,this.allTables=kYe(this),this.basemap=null,this.editableLayers=new Kd({getCollections:()=>[this.allLayers],itemFilterFunction:SZe}),this.ground=new y5,this._basemapCache=IYe()}destroy(){AYe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Lr(this.basemap),Lr(this.ground),this._set("ground",null)}castBasemap(e){return PYe(e,this._basemapCache)}castGround(e){return OYe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find((i=>i.id===e))}findTableById(e){return this.allTables.find((i=>i.id===e))}};d([g({readOnly:!0,dependsOn:[]})],qc.prototype,"allLayers",void 0),d([g({type:uEe,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],qc.prototype,"focusAreas",void 0),d([g({readOnly:!0})],qc.prototype,"allTables",void 0),d([g({type:YI,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],qc.prototype,"basemap",void 0),d([Ai("basemap")],qc.prototype,"castBasemap",null),d([g({readOnly:!0})],qc.prototype,"editableLayers",void 0),d([g({type:y5,nonNullable:!0})],qc.prototype,"ground",void 0),d([Ai("ground")],qc.prototype,"castGround",null),d([g()],qc.prototype,"undoRedo",void 0),qc=d([G("esri.Map")],qc);const lQ=qc;let XI=class extends et{constructor(e){super(e),this.addHandles([this.on("before-add",(i=>{i.item==null&&i.preventDefault()})),this.on("after-add",(i=>this._own(i.item))),this.on("after-remove",(i=>this._release(i.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(et.ofType(this.itemType.Type))(e):new et(e)}};function Bq(t,e){return{type:t,cast:H2e,set(i){const r=sy(i,this._get(e),t);r.owner=this,this._set(e,r)}}}d([g()],XI.prototype,"owner",null),XI=d([G("esri.core.support.OwningCollection")],XI);var kC;const g5=bs()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),LEe=g5.jsonValues.slice();M4e(LEe,"orthometric");const QI=bs()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let wa=kC=class extends ve{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return g5.write(t,e,i)}readHeightModel(t,e,i){return g5.read(t)||(i!=null&&i.messages&&i.messages.push(UYe(t,{context:i})),null)}readHeightUnit(t,e,i){return QI.read(t)||(i!=null&&i.messages&&i.messages.push(cce(t,{context:i})),null)}readHeightUnitService(t,e,i){return EX(t)||QI.read(t)||(i!=null&&i.messages&&i.messages.push(cce(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new kC({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=nxe(e);return new kC({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new kC;return e.read(t,{origin:"web-scene"}),e}};function cce(t,e){return new vc("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function UYe(t,e){return new vc("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}d([g({type:g5.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:LEe,default:"ellipsoidal",write:{isRequired:!0}}}}})],wa.prototype,"heightModel",void 0),d([Ge("web-scene","heightModel")],wa.prototype,"writeHeightModel",null),d([je(["web-scene","service"],"heightModel")],wa.prototype,"readHeightModel",null),d([g({type:QI.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:QI.jsonValues,write:{writer:QI.write,isRequired:!0}}}}})],wa.prototype,"heightUnit",void 0),d([je("web-scene","heightUnit")],wa.prototype,"readHeightUnit",null),d([je("service","heightUnit")],wa.prototype,"readHeightUnitService",null),d([g({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],wa.prototype,"vertCRS",void 0),d([je("service","vertCRS",["vertCRS","ellipsoid","geoid"])],wa.prototype,"readVertCRS",null),wa=kC=d([G("esri.geometry.HeightModelInfo")],wa);let v5=class extends XI{constructor(e){super(e),this.addHandles(this.on("before-add",(i=>{i.item!=null&&i.item.parent===this.owner&&(Ce.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};v5=d([G("esri.support.AnalysesCollection")],v5);let A8;async function BYe(){return A8==null&&(A8=Re(()=>import("./WhereClauseCache-DL5oMt3h.js"),__vite__mapDeps([17,18])).then((t=>new t.WhereClauseCache(500,500)))),A8}async function cQ(t,e){const i=await BYe(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function eA(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function Vq(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function VYe(t,e){return e.length===0?null:`${t} IN (${GYe(e)})`}function GYe(t){return t.map((e=>typeof e=="string"?qYe(e):e)).join(",")}function qYe(t){return`'${t.replaceAll("'","''")}'`}function G_(t){return typeof t=="number"}function dBt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function pBt(t){return typeof t=="boolean"}function Sk(t){return typeof t=="string"||t instanceof String}function HYe(t){return t==null||Sk(t)}function fBt(t){return Array.isArray(t)}function REe(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function mBt(t){return t instanceof Date}const WYe="HH:mm",ZYe="HH:mm:ss",YYe="HH:mm:ss.SSS",KYe=[YYe,ZYe,WYe,"TT"],JYe="yyyy-MM-dd";function uce(t){if(!t||!Sk(t))return null;const e=ht.fromFormat(t,JYe);return e.isValid?e:null}function hce(t){return t&&Sk(t)?ID(KYe,(e=>{const i=ht.fromFormat(t,e);return i.isValid?i:null}))??null:null}function dce(t){if(!t||!Sk(t))return null;const e=ht.fromISO(t);return e.isValid?e:null}var b5;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(b5||(b5={}));const NEe=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function XYe(t){return t!=null&&NEe.has(t.type)}function DEe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function FEe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function zEe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const QYe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);ZJ(NEe,QYe);function yBt(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=XYe(t);return DEe(t)||zEe(t)||FEe(t)?{...eKe(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function eKe(t,e,i){var r,n,s,o,a,l;return DEe(t)?{min:(r=uce(i))==null?void 0:r.toMillis(),max:(n=uce(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:zEe(t)?{min:(s=hce(i))==null?void 0:s.toMillis(),max:(o=hce(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:FEe(t)?{min:(a=dce(i))==null?void 0:a.toMillis(),max:(l=dce(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function tKe(t){if(!t)return;const e=t.match(iKe);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const iKe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function rKe(t){var e,i;return((i=(e=t.match(nKe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const nKe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let P8;function oy(){return P8||(P8=(async()=>{const[t,e,i]=await Promise.all([Re(()=>import("./arcadeUtils-BPdWR_C6.js"),__vite__mapDeps([161,162,163,164,147,27,15,11,16,18,165])),Re(()=>import("./batchExec-Riyr7TX3.js"),__vite__mapDeps([166,76])),Re(()=>import("./aiServices-BjoUSC6d.js").then(r=>r.ag),__vite__mapDeps([163,164,147,27]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),P8}const sKe=/^([0-9_])/,oKe=/[^a-z0-9_\u0080-\uffff]+/gi;function aKe(t){return t==null?null:t.trim().replaceAll(oKe,"_").replace(sKe,"F$1")||null}const lKe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],cKe=["field","normalizationField"];function pce(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(fce(lKe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)fce(cKe,r,e)}}function fce(t,e,i){if(t)for(const r of t){const n=rk(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Vn(r,s.name,e)}}function jEe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const k8=new Set;function n4(t,e){return t&&e?(k8.clear(),c0(k8,t,e),Array.from(k8).sort()):[]}function c0(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)La(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function La(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function gBt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map((i=>i.name)):e}function vBt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=n4(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Mo(t,e,i){var s;if(!i)return;let r;const n=tKe(i);if(n)r=[n];else{const{arcadeUtils:o}=await oy();r=o.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map((a=>a.name)))}for(const o of r)La(t,e,o)}async function uQ(t,e,i){if(i&&i!=="1=1"){const r=await cQ(i,e);if(!r.isStandardized)throw new ae("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});c0(t,e,r.fieldNames)}}function uKe({displayField:t,fields:e}){return t||(e!=null&&e.length?O8(e,"name-or-title")||O8(e,"unique-identifier")||O8(e,"type-or-category")||hKe(e):null)}function hKe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function O8(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function bBt(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function dKe(t,e,i){i.onStatisticExpression?Mo(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function wBt(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(UEe(t,e,n)),i.fields&&r.push(...i.fields.map((async s=>dKe(t,e.fieldsIndex,s)))),await Promise.all(r)}async function _Bt(t,e){var s,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&n.push(UEe(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const c of l)n.push(GEe(t,i,c));await Promise.all(n)}async function UEe(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map((s=>Mo(t,e.fieldsIndex,s.expression))));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Mo(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function xBt(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&c0(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&c0(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await uQ(t,e.fieldsIndex,i.where))}async function SBt(t,e,i){e&&i&&await Promise.all(i.map((r=>pKe(t,e,r))))}async function pKe(t,e,i){e&&i&&(i.valueExpression?await Mo(t,e.fieldsIndex,i.valueExpression):i.field&&La(t,e.fieldsIndex,i.field))}function EBt(t){return t?n4(t.fieldsIndex,BEe(t)):[]}function fKe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?n4(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function TBt(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map((n=>uQ(t,r,n.where))))}const mKe=new Set(["oid","global-id","guid"]),yKe=new Set(["oid","global-id"]),gKe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function vKe(t){const e=new Set;VEe(t).forEach((r=>e.add(r))),fKe(t).forEach((r=>e.add(r.toLowerCase())));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach((r=>e.add(r.toLowerCase()))),Object.values(i.transformFieldRoles).forEach((r=>e.add(r.toLowerCase())))),Array.from(e)}function BEe(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function VEe(t){return BEe(t).map((e=>e.toLowerCase()))}function bKe(t,e){var i;return t.editable&&!mKe.has(t.type)&&!VEe(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function wKe(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||vKe(e).includes(i)||yKe.has(t.type)||gKe.some((n=>n.test(i))))}async function $Bt(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map((n=>GEe(t,r,n))))}async function GEe(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Mo(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach((o=>{La(t,e,o.slice(1,-1))}))}await uQ(t,e,n)}function _Ke(t){const e=t.defaultValue;return e!==void 0&&HEe(t,e)?e:t.nullable?null:void 0}function MBt(t){const e=typeof t=="string"?{type:t}:t;return YEe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function qEe(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function xKe(t){return t===null||qEe(t)}function SKe(t){return t===null||Number.isInteger(t)}function EKe(){return!0}function HEe(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?SKe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?xKe:qEe;break;case"string":case"esriFieldTypeString":i=t.nullable?HYe:Sk;break;default:i=EKe}return arguments.length===1?i:i(e)}const TKe=["integer","small-integer","big-integer","long"],$Ke=["single","double"],MKe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],CKe=["esriFieldTypeSingle","esriFieldTypeDouble"],WEe=new Set([...TKe,...MKe]),IKe=new Set([...$Ke,...CKe]),AKe=ZJ(WEe,IKe);function PKe(t){return t!=null&&WEe.has(t.type)}function ZEe(t){return t!=null&&AKe.has(t.type)}function YEe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function hQ(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function kKe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function OKe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function KEe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function mce(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function yce(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function CBt(t,e){return LKe(t,e)===null}var w5,_5;function IBt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function LKe(t,e){return t==null||t.nullable&&e===null?null:HEe(t,e)?ZEe(t)&&!RKe(t.type,Number(e))?w5.OUT_OF_RANGE:null:_5.INVALID_TYPE}function RKe(t,e){const i=typeof t=="string"?JEe(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function JEe(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return NKe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return DKe;case"esriFieldTypeBigInteger":case"big-integer":return FKe;case"esriFieldTypeSingle":case"single":return zKe;case"esriFieldTypeDouble":case"double":return jKe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(w5||(w5={})),(function(t){t.INVALID_TYPE="type-validation-error::invalid-type"})(_5||(_5={}));const NKe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},DKe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},FKe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},zKe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},jKe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function ABt(t,e,i){switch(t){case b5.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case b5.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case _5.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case w5.OUT_OF_RANGE:{const{min:r,max:n}=JEe(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function UKe(t,e){return!BKe(t,e,null)}function BKe(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function VKe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some((e=>t.toLowerCase().startsWith(e)))}function dQ(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map((i=>i.slice(1,-1).split(":")[0].trim())):[]}let aN=class extends ve{constructor(e){super(e),this.type=null}};d([g({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],aN.prototype,"type",void 0),aN=d([G("esri.popup.content.Content")],aN);const by=aN,tR=new Bt({asc:"ascending",desc:"descending"});let OC=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.field=null,this.order="ascending"}};d([g({type:String,json:{write:!0}})],OC.prototype,"field",void 0),d([g({type:tR.apiValues,json:{type:tR.jsonValues,read:tR.read,write:tR.write}})],OC.prototype,"order",void 0),OC=d([G("esri.popup.support.AttachmentsOrderByInfo")],OC);const GKe=OC;let Fg=class extends Et.ClonableMixin(by){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};d([g({type:String,json:{write:!0}})],Fg.prototype,"description",void 0),d([g({type:["auto","preview","list"],json:{write:!0}})],Fg.prototype,"displayType",void 0),d([g({type:[GKe],json:{write:!0}})],Fg.prototype,"orderByFields",void 0),d([g({type:String,json:{write:!0}})],Fg.prototype,"title",void 0),d([g({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Fg.prototype,"type",void 0),Fg=d([G("esri.popup.content.AttachmentsContent")],Fg);const eT=Fg;var Gq;let Lb=Gq=class extends by{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Gq({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?le(this.outFields):null})}};d([g()],Lb.prototype,"creator",void 0),d([g()],Lb.prototype,"destroyer",void 0),d([g()],Lb.prototype,"outFields",void 0),d([g({type:["custom"],readOnly:!0})],Lb.prototype,"type",void 0),Lb=Gq=d([G("esri.popup.content.CustomContent")],Lb);const qKe=Lb;var qq;let Zx=qq=class extends ve{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new qq({title:this.title,expression:this.expression})}};d([g({type:String,json:{write:!0}})],Zx.prototype,"title",void 0),d([g({type:String,json:{write:!0}})],Zx.prototype,"expression",void 0),d([g({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Zx.prototype,"returnType",void 0),Zx=qq=d([G("esri.popup.ElementExpressionInfo")],Zx);const HKe=Zx;var Hq;let LC=Hq=class extends by{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new Hq({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};d([g({type:HKe,json:{write:!0}})],LC.prototype,"expressionInfo",void 0),d([g({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],LC.prototype,"type",void 0),LC=Hq=d([G("esri.popup.content.ExpressionContent")],LC);const s4=LC;let Yx=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};d([dt($Ge)],Yx.prototype,"dateFormat",void 0),d([g({type:Boolean,json:{write:!0}})],Yx.prototype,"digitSeparator",void 0),d([g({type:ri,json:{write:!0}})],Yx.prototype,"places",void 0),Yx=d([G("esri.popup.support.FieldInfoFormat")],Yx);const lN=Yx;var Wq;let Qu=Wq=class extends ve{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new Wq({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};d([g({type:String,json:{write:!0}})],Qu.prototype,"fieldName",void 0),d([g({type:lN,json:{write:!0}})],Qu.prototype,"format",void 0),d([g({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Qu.prototype,"isEditable",void 0),d([g({type:String,json:{write:!0}})],Qu.prototype,"label",void 0),d([dt(new Bt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Qu.prototype,"stringFieldOption",void 0),d([g({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Qu.prototype,"statisticType",void 0),d([g({type:String,json:{write:!0}})],Qu.prototype,"tooltip",void 0),d([g({type:Boolean,json:{write:!0}})],Qu.prototype,"visible",void 0),Qu=Wq=d([G("esri.popup.FieldInfo")],Qu);const pQ=Qu;var Zq;let Hf=Zq=class extends by{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map((i=>i.toJSON()))}clone(){return new Zq(le({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};d([g({type:Object,json:{write:!0}})],Hf.prototype,"attributes",void 0),d([g({type:String,json:{write:!0}})],Hf.prototype,"description",void 0),d([g({type:[pQ]})],Hf.prototype,"fieldInfos",void 0),d([Ge("fieldInfos")],Hf.prototype,"writeFieldInfos",null),d([g({type:String,json:{write:!0}})],Hf.prototype,"title",void 0),d([g({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hf.prototype,"type",void 0),Hf=Zq=d([G("esri.popup.content.FieldsContent")],Hf);const tT=Hf;let Rb=class extends ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};d([g({type:String,json:{write:!0}})],Rb.prototype,"altText",void 0),d([g({type:String,json:{write:!0}})],Rb.prototype,"caption",void 0),d([g({type:String,json:{write:!0}})],Rb.prototype,"title",void 0),d([g({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Rb.prototype,"type",void 0),Rb=d([G("esri.popup.content.mixins.MediaInfo")],Rb);const fQ=Rb;var Yq;let Nb=Yq=class extends ut{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new Yq({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};d([g()],Nb.prototype,"color",void 0),d([g()],Nb.prototype,"fieldName",void 0),d([g()],Nb.prototype,"tooltip",void 0),d([g()],Nb.prototype,"value",void 0),Nb=Yq=d([G("esri.popup.content.support.ChartMediaInfoValueSeries")],Nb);const WKe=Nb;var Kq;let zg=Kq=class extends ve{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Kq({colors:le(this.colors),fields:le(this.fields),normalizeField:this.normalizeField,series:le(this.series),tooltipField:this.tooltipField})}};d([g({type:[Ze],json:{type:[[ri]],write:!0}})],zg.prototype,"colors",void 0),d([g({type:[String],json:{write:{isRequired:!0}}})],zg.prototype,"fields",void 0),d([g({type:String,json:{write:!0}})],zg.prototype,"normalizeField",void 0),d([g({type:[WKe],json:{read:!1}})],zg.prototype,"series",void 0),d([g({type:String,json:{write:!0}})],zg.prototype,"tooltipField",void 0),zg=Kq=d([G("esri.popup.content.support.ChartMediaInfoValue")],zg);const ZKe=zg;let RC=class extends fQ{constructor(e){super(e),this.type=null,this.value=void 0}};d([g({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],RC.prototype,"type",void 0),d([g({type:ZKe,json:{write:{isRequired:!0}}})],RC.prototype,"value",void 0),RC=d([G("esri.popup.content.mixins.ChartMediaInfo")],RC);const o4=RC,a4=bs()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Jq;let cN=Jq=class extends o4{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new Jq({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([g({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:a4.write,isRequired:!0}}})],cN.prototype,"type",void 0),cN=Jq=d([G("esri.popup.content.BarChartMediaInfo")],cN);const XEe=cN;var Xq;let uN=Xq=class extends o4{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new Xq({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([g({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:a4.write,isRequired:!0}}})],uN.prototype,"type",void 0),uN=Xq=d([G("esri.popup.content.ColumnChartMediaInfo")],uN);const QEe=uN;var Qq;let NC=Qq=class extends ve{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new Qq({linkURL:this.linkURL,sourceURL:this.sourceURL})}};d([g({type:String,json:{write:!0}})],NC.prototype,"linkURL",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],NC.prototype,"sourceURL",void 0),NC=Qq=d([G("esri.popup.content.support.ImageMediaInfoValue")],NC);const YKe=NC;var eH;let Kx=eH=class extends fQ{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new eH({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};d([g({type:Number,json:{write:!0}})],Kx.prototype,"refreshInterval",void 0),d([g({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Kx.prototype,"type",void 0),d([g({type:YKe,json:{write:{isRequired:!0}}})],Kx.prototype,"value",void 0),Kx=eH=d([G("esri.popup.content.ImageMediaInfo")],Kx);const eTe=Kx;var tH;let hN=tH=class extends o4{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new tH({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([g({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:a4.write,isRequired:!0}}})],hN.prototype,"type",void 0),hN=tH=d([G("esri.popup.content.LineChartMediaInfo")],hN);const tTe=hN;var iH;let dN=iH=class extends o4{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new iH({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};d([g({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:a4.write,isRequired:!0}}})],dN.prototype,"type",void 0),dN=iH=d([G("esri.popup.content.PieChartMediaInfo")],dN);const iTe=dN,rH={base:fQ,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":XEe,"column-chart":QEe,"line-chart":tTe,"pie-chart":iTe,image:eTe}};var nH;let eh=nH=class extends by{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map((e=>e.type==="image"?eTe.fromJSON(e):e.type==="barchart"?XEe.fromJSON(e):e.type==="columnchart"?QEe.fromJSON(e):e.type==="linechart"?tTe.fromJSON(e):e.type==="piechart"?iTe.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map((i=>i.toJSON()))}clone(){return new nH(le({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};d([g()],eh.prototype,"activeMediaInfoIndex",void 0),d([g({type:Object,json:{write:!0}})],eh.prototype,"attributes",void 0),d([g({type:String,json:{write:!0}})],eh.prototype,"description",void 0),d([g({types:[rH]})],eh.prototype,"mediaInfos",void 0),d([je("mediaInfos")],eh.prototype,"readMediaInfos",null),d([Ge("mediaInfos")],eh.prototype,"writeMediaInfos",null),d([g({type:String,json:{write:!0}})],eh.prototype,"title",void 0),d([g({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],eh.prototype,"type",void 0),eh=nH=d([G("esri.popup.content.MediaContent")],eh);const XA=eh;var sH;let DC=sH=class extends ve{constructor(t){super(t),this.field=null,this.order=null}clone(){return new sH({field:this.field,order:this.order})}};d([g({type:String,json:{write:!0}})],DC.prototype,"field",void 0),d([g({type:["asc","desc"],json:{write:!0}})],DC.prototype,"order",void 0),DC=sH=d([G("esri.popup.support.RelatedRecordsInfoFieldOrder")],DC);const mQ=DC;let yd=class extends Et.ClonableMixin(by){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};d([g({type:String,json:{write:!0}})],yd.prototype,"description",void 0),d([g({type:Number,json:{type:ri,write:!0}})],yd.prototype,"displayCount",void 0),d([g({type:["list"],json:{write:{isRequired:!0}}})],yd.prototype,"displayType",void 0),d([g({type:[mQ],json:{write:!0}})],yd.prototype,"orderByFields",void 0),d([g({type:Number,json:{type:ri,write:{isRequired:!0}}})],yd.prototype,"relationshipId",void 0),d([g({type:String,json:{write:!0}})],yd.prototype,"title",void 0),d([g({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],yd.prototype,"type",void 0),yd=d([G("esri.popup.content.RelationshipContent")],yd);const QA=yd;var oH;let FC=oH=class extends by{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new oH({text:this.text})}};d([g({type:String,json:{write:!0}})],FC.prototype,"text",void 0),d([g({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],FC.prototype,"type",void 0),FC=oH=d([G("esri.popup.content.TextContent")],FC);const eP=FC;let Wf=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};d([g({type:String,json:{write:!0}})],Wf.prototype,"title",void 0),d([g({type:String,json:{write:!0}})],Wf.prototype,"description",void 0),d([g({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Wf.prototype,"type",void 0),d([g({type:Number,json:{type:ri,write:!0}})],Wf.prototype,"associatedNetworkSourceId",void 0),d([g({type:Number,json:{type:ri,write:!0}})],Wf.prototype,"associatedAssetGroup",void 0),d([g({type:Number,json:{type:ri,write:!0}})],Wf.prototype,"associatedAssetType",void 0),Wf=d([G("esri.popup.support.UtilityNetworkAssociationType")],Wf);const rTe=Wf;let jg=class extends Et.ClonableMixin(by){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};d([g({type:String,json:{write:!0}})],jg.prototype,"description",void 0),d([g({type:Number,json:{type:ri,write:!0}})],jg.prototype,"displayCount",void 0),d([g({type:String,json:{write:!0}})],jg.prototype,"title",void 0),d([g({type:[rTe],json:{write:!0}})],jg.prototype,"associationTypes",void 0),d([dt({utilityNetworkAssociations:"utility-network-associations"})],jg.prototype,"type",void 0),jg=d([G("esri.popup.content.UtilityNetworkAssociationsContent")],jg);const yQ=jg,KKe={base:null,key:"type",typeMap:{attachment:eT,media:XA,text:eP,expression:s4,field:tT,relationship:QA,utilityNetworkAssociations:yQ}},JKe={base:null,key:"type",typeMap:{attachment:eT,media:XA,text:eP,expression:s4,field:tT,relationship:QA}};var aH;let Db=aH=class extends ve{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new aH({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([g({type:String,json:{write:!0}})],Db.prototype,"name",void 0),d([g({type:String,json:{write:!0}})],Db.prototype,"title",void 0),d([g({type:String,json:{write:!0}})],Db.prototype,"expression",void 0),d([g({type:["string","number"],json:{write:!0}})],Db.prototype,"returnType",void 0),Db=aH=d([G("esri.popup.ExpressionInfo")],Db);const XKe=Db;var lH;let zC=lH=class extends ve{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new lH({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};d([g({type:Boolean,json:{write:!0}})],zC.prototype,"returnTopmostRaster",void 0),d([g({type:Boolean,json:{write:!0}})],zC.prototype,"showNoDataRecords",void 0),zC=lH=d([G("esri.popup.LayerOptions")],zC);const QKe=zC;var cH;let jC=cH=class extends ve{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new cH({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?le(this.orderByFields):null})}};d([g({type:Boolean,json:{write:!0}})],jC.prototype,"showRelatedRecords",void 0),d([g({type:[mQ],json:{write:!0}})],jC.prototype,"orderByFields",void 0),jC=cH=d([G("esri.popup.RelatedRecordsInfo")],jC);const gce=jC;var uH;let Hc=uH=class extends l1.IdentifiableMixin(ut){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new uH({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};d([g()],Hc.prototype,"active",void 0),d([g()],Hc.prototype,"className",void 0),d([g()],Hc.prototype,"disabled",void 0),d([g()],Hc.prototype,"icon",void 0),d([g()],Hc.prototype,"id",void 0),d([g()],Hc.prototype,"indicator",void 0),d([g()],Hc.prototype,"title",void 0),d([g()],Hc.prototype,"type",void 0),d([g()],Hc.prototype,"visible",void 0),Hc=uH=d([G("esri.support.actions.ActionBase")],Hc);const gQ=Hc;var hH;let pN=hH=class extends gQ{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new hH({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};d([g()],pN.prototype,"image",void 0),pN=hH=d([G("esri.support.actions.ActionButton")],pN);const eJe=pN;var dH;let UC=dH=class extends gQ{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new dH({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};d([g()],UC.prototype,"image",void 0),d([g()],UC.prototype,"value",void 0),UC=dH=d([G("esri.support.actions.ActionToggle")],UC);const tJe=UC,OM="relationships/",vce="expression/",iJe=et.ofType({key:"type",defaultKeyValue:"button",base:gQ,typeMap:{button:eJe,toggle:tJe}}),rJe={base:by,key:"type",typeMap:{media:XA,custom:qKe,text:eP,attachments:eT,fields:tT,expression:s4,relationship:QA,utilityNetworkAssociations:yQ}},nTe=new Set(["attachments","fields","media","text","expression","relationship"]),nJe=new Set([...nTe,"utility-network-associations"]);let ls=class extends Et.ClonableMixin(ve){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map((i=>Bp(rJe,i))):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ef(e)?e:(Ce.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter((c=>c.type==="fields")):[],l=a.length&&a.every((c=>{var u;return(u=c.fieldInfos)==null?void 0:u.length}));i.fieldInfos=e.filter(Boolean).map((c=>{const u=c.toJSON(n);return l&&(u.visible=!1),u}))}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),c0(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter((n=>(r==null?void 0:r.origin)==="web-scene"?nTe.has(n.type):nJe.has(n.type))).map((n=>n==null?void 0:n.toJSON(r))),i.popupElements.forEach((n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)}))):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=le(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach((n=>{const s=i.fieldInfos.find((o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())}));s?s.visible=!0:i.fieldInfos.push(n)})):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map((a=>this._toFieldOrderJSON(a,e.relationshipId))))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=le(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map((s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),XA.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),eP.fromJSON(s)):s.type==="attachments"?eT.fromJSON(s):s.type==="fields"?tT.fromJSON(s):s.type==="expression"?s4.fromJSON(s):s.type==="relationship"?QA.fromJSON(s):s.type==="utilityNetworkAssociations"?yQ.fromJSON(s):void 0)).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(OM)))return null;const n=i.replace(OM,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?QA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${OM}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new eP({text:e})):s.push(new tT),Array.isArray(i)&&i.length&&s.push(XA.fromJSON({mediaInfos:i})),r&&s.push(eT.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach((l=>{const c=this._toRelationshipContent(l);c&&s.push(c)})),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce(((n,s)=>[...n,...this._getMediaInfoFields(s)]),[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,p=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce(((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]]),i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((i,r)=>[...i,...this._getContentElementFields(r)]),[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map((n=>Mo(e,i,n.expression))))}_getFieldInfoFields(e){return e?e.filter((({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(OM)||i.startsWith(vce)))).map((i=>i.fieldName)):[]}_getActionsFields(e){return e?e.toArray().reduce(((i,r)=>[...i,...this._getActionFields(r)]),[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return dQ(e).filter((i=>!(i.indexOf(OM)===0||i.indexOf(vce)===0)))}};d([g({type:iJe})],ls.prototype,"actions",void 0),d([g()],ls.prototype,"content",void 0),d([Ai("content")],ls.prototype,"castContent",null),d([je("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],ls.prototype,"readContent",null),d([Ge("web-scene","content",{popupElements:{type:et.ofType(JKe)},showAttachments:{type:Boolean},mediaInfos:{type:et.ofType(rH)},description:{type:String},relatedRecordsInfo:{type:gce}})],ls.prototype,"writeWebSceneContent",null),d([Ge("content",{popupElements:{type:et.ofType(KKe)},showAttachments:{type:Boolean},mediaInfos:{type:et.ofType(rH)},description:{type:String},relatedRecordsInfo:{type:gce}})],ls.prototype,"writeWebMapContent",null),d([g({type:[XKe],json:{write:!0}})],ls.prototype,"expressionInfos",void 0),d([g({type:[pQ]})],ls.prototype,"fieldInfos",void 0),d([Ge("fieldInfos")],ls.prototype,"writeFieldInfos",null),d([g({type:QKe})],ls.prototype,"layerOptions",void 0),d([Ge("layerOptions")],ls.prototype,"writeLayerOptions",null),d([g({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],ls.prototype,"lastEditInfoEnabled",void 0),d([g()],ls.prototype,"outFields",void 0),d([g()],ls.prototype,"overwriteActions",void 0),d([g()],ls.prototype,"returnGeometry",void 0),d([g({json:{type:String}})],ls.prototype,"title",void 0),d([Ge("title")],ls.prototype,"writeTitle",null),ls=d([G("esri.PopupTemplate")],ls);const Zp=ls;function UBt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function sJe(t,e){var i,r,n;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const s=e.uniqueIdFields.map((o=>{var a;return(a=t.attributes)==null?void 0:a[o]}));return JSON.stringify(s)}return"objectIdField"in e&&e.objectIdField?(n=t.attributes)==null?void 0:n[e.objectIdField]:null}const bce=new Bt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let oJe=0,Un=class extends ve{constructor(e){super(e),this.id="sym"+oJe++,this.type=null,this.color=new Ze([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};d([g({type:bce.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:bce.write,isRequired:!0}}})],Un.prototype,"type",void 0),d([g({type:Ze,json:{write:{allowNull:!0}}})],Un.prototype,"color",void 0),d([je("color")],Un.prototype,"readColor",null),Un=d([G("esri.symbols.Symbol")],Un);var pH;let Ko=pH=class extends Un{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map((s=>{const o=s.valueExpressionInfo;return o?Mo(t,e,o.expression):null}));await Promise.all(n)}}}clone(){return new pH({data:le(this.data)})}hash(){return r_e(JSON.stringify(this.data)).toString()}};d([g({json:{write:!1}})],Ko.prototype,"color",void 0),d([g({json:{write:!0}})],Ko.prototype,"data",void 0),d([je("data",["symbol"])],Ko.prototype,"readData",null),d([Ge("data",{})],Ko.prototype,"writeData",null),d([dt({CIMSymbolReference:"cim"},{readOnly:!0})],Ko.prototype,"type",void 0),Ko=pH=d([G("esri.symbols.CIMSymbol")],Ko);let Ia=class extends ve{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};d([g({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ia.prototype,"enabled",void 0),d([Ge("enabled")],Ia.prototype,"writeEnabled",null),d([g({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Ia.prototype,"type",void 0),Ia=d([G("esri.symbols.Symbol3DLayer")],Ia);function aJe(t,e){const i=e.transparency!=null?JA(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ze([r[0]||0,r[1]||0,r[2]||0,i]):null}function lJe(t,e){e.color=t.toJSON().slice(0,3);const i=Qj(t.a);i!==0&&(e.transparency=i)}function E0(t){return{type:Ze,nonNullable:t==null?void 0:t.nonNullable,json:{type:[ri],default:null,read:{source:["color","transparency"],reader:aJe},write:{target:{color:{type:[ri],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:ri}},writer:lJe}}}}const Yp={type:Number,cast:Ti,json:{write:!0}};var x5;function GBt(t){return t==="emissive"?x5.Emissive:x5.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})(x5||(x5={}));let Fb=class extends ve{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.extensionLength=0,this.size=Bi(1)}clone(){}cloneProperties(){return{color:le(this.color),size:this.size,extensionLength:this.extensionLength}}};d([g({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Fb.prototype,"type",void 0),d([g(E0({colorRequiredOnWrite:!0}))],Fb.prototype,"color",void 0),d([g({...Yp,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Fb.prototype,"extensionLength",void 0),d([g(Yp)],Fb.prototype,"size",void 0),Fb=d([G("esri.symbols.edges.Edges3D")],Fb);const vQ=Fb;var fH;let fN=fH=class extends vQ{constructor(t){super(t),this.type="sketch"}clone(){return new fH(this.cloneProperties())}};d([dt({sketch:"sketch"},{readOnly:!0})],fN.prototype,"type",void 0),fN=fH=d([G("esri.symbols.edges.SketchEdges3D")],fN);const cJe=fN;var mH;let mN=mH=class extends vQ{constructor(t){super(t),this.type="solid"}clone(){return new mH(this.cloneProperties())}};d([dt({solid:"solid"},{readOnly:!0})],mN.prototype,"type",void 0),mN=mH=d([G("esri.symbols.edges.SolidEdges3D")],mN);const sTe=mN,oTe={types:{key:"type",base:vQ,typeMap:{solid:sTe,sketch:cJe}},json:{write:!0}};var yH;let JS=yH=class extends ve{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new yH(t)}};d([g({json:{write:!1}})],JS.prototype,"strength",void 0),d([g({json:{write:!1}})],JS.prototype,"source",void 0),JS=yH=d([G("esri.symbols.support.Symbol3DEmissive")],JS);var gH;let cl=gH=class extends ve{constructor(t){super(t),this.color=null,this.emissive=new JS({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new gH(t)}};d([g(E0())],cl.prototype,"color",void 0),d([g({type:JS,json:{write:!1}})],cl.prototype,"emissive",void 0),cl=gH=d([G("esri.symbols.support.Symbol3DMaterial")],cl);var vH,tE;let cm=(tE=class extends Ia{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new vH({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},vH=tE,tE);d([dt({Extrude:"extrude"},{readOnly:!0})],cm.prototype,"type",void 0),d([g({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],cm.prototype,"size",void 0),d([g({type:cl,json:{write:!0}})],cm.prototype,"material",void 0),d([g({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],cm.prototype,"castShadows",void 0),d([g(oTe)],cm.prototype,"edges",void 0),cm=vH=d([G("esri.symbols.ExtrudeSymbol3DLayer")],cm);let tA=class extends ve{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};d([g({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],tA.prototype,"type",void 0),tA=d([G("esri.symbols.patterns.LinePattern3D")],tA);const uJe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var bH;const hJe=bs()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Uw=bH=class extends tA{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new bH(t)}};d([g({type:["style"],json:{write:{isRequired:!0}}})],Uw.prototype,"type",void 0),d([dt(hJe),g({type:uJe,json:{write:{isRequired:!0}}})],Uw.prototype,"style",void 0),Uw=bH=d([G("esri.symbols.patterns.LineStylePattern3D")],Uw);let iA=class extends ve{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};d([g({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],iA.prototype,"type",void 0),iA=d([G("esri.symbols.patterns.Pattern3D")],iA);const dJe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var wH;let XS=wH=class extends iA{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new wH({style:this.style})}};d([g({type:["style"],json:{write:{isRequired:!0}}})],XS.prototype,"type",void 0),d([g({type:dJe,json:{read:!0,write:{isRequired:!0}}})],XS.prototype,"style",void 0),XS=wH=d([G("esri.symbols.patterns.StylePattern3D")],XS);const pJe={types:{key:"type",base:iA,typeMap:{style:XS}},json:{write:!0}},aTe={types:{key:"type",base:tA,typeMap:{style:Uw}},json:{write:!0}},rA=new Ze("white"),fJe=new Ze([255,255,255,0]);function mJe(t){return t.r===0&&t.g===0&&t.b===0}var _H;let nA=_H=class extends cl{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new _H(t)}};d([dt({multiply:"multiply",replace:"replace",tint:"tint"})],nA.prototype,"colorMixMode",void 0),nA=_H=d([G("esri.symbols.support.Symbol3DFillMaterial")],nA);function yJe(t,e=!1){return t<=Kwe?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function ZBt(t){return(Ywe(t)?t.byteLength/8:t.length)<=Kwe?Array.from(t):new Float64Array(t)}function YBt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function Ek(t=wJe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function bQ(t,e,i,r,n,s,o=Ek()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function KBt(t,e=Ek()){return gJe(t,0,t.length/3,e)}function gJe(t,e,i,r=Ek()){return lTe(r,xH),vJe(r,t,e,i),r}function JBt(t,e=yJe(24)){const[i,r,n,s,o,a]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=a,e}function XBt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Ut(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function QBt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function e8t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function t8t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function vJe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<r;u++)n=Math.min(n,e[i+3*u]),s=Math.min(s,e[i+3*u+1]),o=Math.min(o,e[i+3*u+2]),a=Math.max(a,e[i+3*u]),l=Math.max(l,e[i+3*u+1]),c=Math.max(c,e[i+3*u+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function i8t(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let u=0;u<r;u++){const p=e[u];n=Math.min(n,p[0]),s=Math.min(s,p[1]),o=Math.min(o,p[2]),a=Math.max(a,p[0]),l=Math.max(l,p[1]),c=Math.max(c,p[2])}else for(let u=0;u<r;u++){const p=e[u];n=Math.min(n,p[0]),s=Math.min(s,p[1]),a=Math.max(a,p[0]),l=Math.max(l,p[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function r8t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Tk(t){return t[0]>=t[3]?0:t[3]-t[0]}function $k(t){return t[1]>=t[4]?0:t[4]-t[1]}function Mk(t){return t[2]>=t[5]?0:t[5]-t[2]}function n8t(t){const e=Tk(t),i=Mk(t),r=$k(t);return Math.sqrt(e*e+i*i+r*r)}function s8t(t,e=[0,0,0]){return e[0]=t[0]+Tk(t)/2,e[1]=t[1]+$k(t)/2,e[2]=t[2]+Mk(t)/2,e}function o8t(t,e=[0,0,0]){return e[0]=Tk(t),e[1]=$k(t),e[2]=Mk(t),e}function a8t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function bJe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function l8t(t,e){return e==null||bJe(t,e)}function c8t(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function u8t(t,e,i=t){const r=t[0]+Tk(t)/2,n=t[1]+$k(t)/2,s=t[2]+Mk(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function h8t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function d8t(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function p8t(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function lTe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function f8t(t){return t?lTe(t,xH):Ek(xH)}function m8t(t,e){return e||(e=Bn()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function y8t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function g8t(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function wce(t){return t.length===6}function v8t(t){return Tk(t)===0&&$k(t)===0&&Mk(t)===0}function b8t(t,e,i){if(t==null||e==null)return t===e;if(!wce(t)||!wce(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const xH=[1/0,1/0,1/0,-1/0,-1/0,-1/0],wJe=[0,0,0,0,0,0];Ek();function w8t(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=HT(i,r,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const _Je=bQ(-.5,-.5,-.5,.5,.5,.5),xJe=bQ(-.5,-.5,0,.5,.5,1),SJe=bQ(-.5,-.5,0,.5,.5,.5);function _8t(t){switch(t){case"sphere":case"cube":case"diamond":return _Je;case"cylinder":case"cone":case"inverted-cone":return xJe;case"tetrahedron":return SJe;default:return}}const wQ=["butt","square","round"],EJe=[...wQ,"none"],cTe=["miter","bevel","round"];var SH;let zb=SH=class extends ve{constructor(t){super(t),this.color=new Ze([0,0,0,1]),this.size=Bi(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new SH(t)}};d([g(E0({colorRequiredOnWrite:!0}))],zb.prototype,"color",void 0),d([g({...Yp,json:{write:{isRequired:!0}}})],zb.prototype,"size",void 0),d([g(aTe)],zb.prototype,"pattern",void 0),d([g({type:wQ,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],zb.prototype,"patternCap",void 0),zb=SH=d([G("esri.symbols.support.Symbol3DOutline")],zb);var yN,iE;let xa=(iE=class extends Ia{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new yN(e)}static fromSimpleFillSymbol(e){var n,s,o;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Uw({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??rA).clone(),pattern:i};return i&&((o=e.outline)!=null&&o.cap)&&(r.patternCap=e.outline.cap),new yN({material:new nA({color:(e.color??fJe).clone()}),pattern:e.style&&e.style!=="solid"?new XS({style:e.style}):null,outline:r})}},yN=iE,iE);d([dt({Fill:"fill"},{readOnly:!0})],xa.prototype,"type",void 0),d([g({type:nA,json:{write:!0}})],xa.prototype,"material",void 0),d([g(pJe)],xa.prototype,"pattern",void 0),d([g({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xa.prototype,"castShadows",void 0),d([g({type:zb,json:{write:!0}})],xa.prototype,"outline",void 0),d([g(oTe)],xa.prototype,"edges",void 0),xa=yN=d([G("esri.symbols.FillSymbol3DLayer")],xa);var EH;const TJe=bs()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let jb=EH=class extends ve{constructor(t){super(t)}readHref(t,e,i){return t?ny(t,i):e.dataURI}writeHref(t,e,i,r){t&&(vy(t)?e.dataURI=t:(e.href=L_(t,r),pl(e.href)&&(e.href=Lh(e.href))))}clone(){return new EH({href:this.href,primitive:this.primitive})}};d([g({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],jb.prototype,"href",void 0),d([je("href")],jb.prototype,"readHref",null),d([Ge("href",{href:{type:String},dataURI:{type:String}})],jb.prototype,"writeHref",null),d([dt(TJe)],jb.prototype,"primitive",void 0),jb=EH=d([G("esri.symbols.support.IconSymbol3DLayerResource")],jb);const $Je="circle";var TH;let QS=TH=class extends ut{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new TH({x:this.x,y:this.y})}};d([g({type:Number})],QS.prototype,"x",void 0),d([g({type:Number})],QS.prototype,"y",void 0),QS=TH=d([G("esri.symbols.support.Symbol3DAnchorPosition2D")],QS);var $H;let BC=$H=class extends ve{constructor(t){super(t),this.color=new Ze([0,0,0,1]),this.size=Bi(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new $H(t)}};d([g(E0({colorRequiredOnWrite:!0}))],BC.prototype,"color",void 0),d([g({...Yp,json:{write:{isRequired:!0}}})],BC.prototype,"size",void 0),BC=$H=d([G("esri.symbols.support.Symbol3DIconOutline")],BC);var Jx,rE;let xo=(rE=class extends Ia{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Jx({anchor:this.anchor,anchorPosition:le(this.anchorPosition),enabled:this.enabled,material:le(this.material),outline:le(this.outline),resource:le(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||rA,r=_ce(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||rA).clone()}:null;return new Jx({size:e.size,angle:e.angle,resource:{primitive:CJe((()=>Ce.getLogger(this.prototype)),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||mJe(e.color)?rA:e.color,r=_ce(e);return new Jx({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Jx({resource:{href:_1e({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Jx=rE,rE);function _ce(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=xce(t.xoffset),n=xce(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function xce(t){return isFinite(t)?t:0}d([g({type:cl,json:{write:!0}})],xo.prototype,"material",void 0),d([g({type:jb,json:{write:!0}})],xo.prototype,"resource",void 0),d([dt({Icon:"icon"},{readOnly:!0})],xo.prototype,"type",void 0),d([g({...Yp,json:{write:{isRequired:!0}}})],xo.prototype,"size",void 0),d([dt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],xo.prototype,"anchor",void 0),d([g({type:QS,json:{type:[Number],read:{reader:t=>new QS({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],xo.prototype,"anchorPosition",void 0),d([g({type:BC,json:{write:!0}})],xo.prototype,"outline",void 0),d([g({type:Number,json:{write:!0,default:0}})],xo.prototype,"angle",void 0),xo=Jx=d([G("esri.symbols.IconSymbol3DLayer")],xo);const MJe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function CJe(t,e){return MJe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const IJe=["begin","end","begin-end"],uTe=["arrow","circle","square","diamond","cross","x"];let _m=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};d([g({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],_m.prototype,"type",void 0),d([g({type:IJe,json:{default:"begin-end",write:!0}})],_m.prototype,"placement",void 0),d([g({type:uTe,json:{default:"arrow",write:!0}})],_m.prototype,"style",void 0),d([g({type:Ze,json:{type:[ri],default:null,write:!0}})],_m.prototype,"color",void 0),_m=d([G("esri.symbols.LineStyleMarker3D")],_m);var gN,nE;let _a=(nE=class extends Ia{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Bi(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new gN(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??Bi(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Uw({style:e.style}):null,material:new cl({color:(e.color||rA).clone()}),marker:e.marker?new _m({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new gN(i)}},gN=nE,nE);d([g({type:cl,json:{write:!0}})],_a.prototype,"material",void 0),d([dt({Line:"line"},{readOnly:!0})],_a.prototype,"type",void 0),d([g({type:cTe,json:{write:!0,default:"miter"}})],_a.prototype,"join",void 0),d([g({type:wQ,json:{write:!0,default:"butt"}})],_a.prototype,"cap",void 0),d([g({...Yp,json:{write:{isRequired:!0}}})],_a.prototype,"size",void 0),d([g(aTe)],_a.prototype,"pattern",void 0),d([g({types:{key:"type",base:_m,typeMap:{style:_m}},json:{write:!0}})],_a.prototype,"marker",void 0),_a=gN=d([G("esri.symbols.LineSymbol3DLayer")],_a);var MH;const AJe=bs()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let VC=MH=class extends ve{clone(){return new MH({href:this.href,primitive:this.primitive})}};d([g({type:String,json:{read:Cj,write:R_}})],VC.prototype,"href",void 0),d([dt(AJe)],VC.prototype,"primitive",void 0),VC=MH=d([G("esri.symbols.support.ObjectSymbol3DLayerResource")],VC);const PJe="sphere";var CH;let Tw=CH=class extends ut{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new CH({x:this.x,y:this.y,z:this.z})}};d([g({type:Number})],Tw.prototype,"x",void 0),d([g({type:Number})],Tw.prototype,"y",void 0),d([g({type:Number})],Tw.prototype,"z",void 0),Tw=CH=d([G("esri.symbols.support.Symbol3DAnchorPosition3D")],Tw);var IH,sE;let Ws=(sE=class extends Ia{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new IH({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},IH=sE,sE);d([g({type:cl,json:{write:!0}})],Ws.prototype,"material",void 0),d([g({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ws.prototype,"castShadows",void 0),d([g({type:VC,json:{write:!0}})],Ws.prototype,"resource",void 0),d([dt({Object:"object"},{readOnly:!0})],Ws.prototype,"type",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"width",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"height",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"depth",void 0),d([dt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ws.prototype,"anchor",void 0),d([g({type:Tw,json:{type:[Number],read:{reader:t=>new Tw({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ws.prototype,"anchorPosition",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"heading",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"tilt",void 0),d([g({type:Number,json:{write:!0}})],Ws.prototype,"roll",void 0),d([g({readOnly:!0})],Ws.prototype,"isPrimitive",null),Ws=IH=d([G("esri.symbols.ObjectSymbol3DLayer")],Ws);var AH,oE;let bo=(oE=class extends Ia{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new AH({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},AH=oE,oE);d([g({type:cl,json:{write:!0}})],bo.prototype,"material",void 0),d([g({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],bo.prototype,"castShadows",void 0),d([dt({Path:"path"},{readOnly:!0})],bo.prototype,"type",void 0),d([g({type:["circle","quad"],json:{write:!0,default:"circle"}})],bo.prototype,"profile",void 0),d([g({type:cTe,json:{write:!0,default:"miter"}})],bo.prototype,"join",void 0),d([g({type:EJe,json:{write:!0,default:"butt"}})],bo.prototype,"cap",void 0),d([g({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],bo.prototype,"width",void 0),d([je("width",["width","size","height"])],bo.prototype,"readWidth",null),d([g({type:Number,json:{write:!0}})],bo.prototype,"height",void 0),d([je("height",["height","size","width"])],bo.prototype,"readHeight",null),d([g({type:["center","bottom","top"],json:{write:!0,default:"center"}})],bo.prototype,"anchor",void 0),d([g({type:["heading","all"],json:{write:!0,default:"all"}})],bo.prototype,"profileRotation",void 0),bo=AH=d([G("esri.symbols.PathSymbol3DLayer")],bo);const kJe=["none","underline","line-through"],OJe=["normal","italic","oblique"],LJe=["normal","lighter","bold","bolder"],hTe={type:Number,cast:t=>{const e=$a(t);return e===0?1:sa(e,.1,4)},nonNullable:!0},RJe=["left","right","center"],NJe=["baseline","top","middle","bottom"],dTe={type:RJe,nonNullable:!0},pTe={type:NJe,nonNullable:!0},DJe=8;var PH;let tc=PH=class extends ve{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ti(t)}clone(){return new PH({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};d([g({type:kJe,json:{default:"none",write:!0}})],tc.prototype,"decoration",void 0),d([g({type:String,json:{write:!0}})],tc.prototype,"family",void 0),d([g({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],tc.prototype,"size",void 0),d([Ai("size")],tc.prototype,"castSize",null),d([g({type:OJe,json:{default:"normal",write:!0}})],tc.prototype,"style",void 0),d([g({type:LJe,json:{default:"normal",write:!0}})],tc.prototype,"weight",void 0),tc=PH=d([G("esri.symbols.Font")],tc);var kH;let e2=kH=class extends ve{constructor(){super(...arguments),this.color=new Ze([0,0,0,1]),this.size=0}clone(){const t={color:le(this.color),size:this.size};return new kH(t)}};d([g(E0())],e2.prototype,"color",void 0),d([g(Yp)],e2.prototype,"size",void 0),e2=kH=d([G("esri.symbols.support.Symbol3DHalo")],e2);let sA=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.color=null}};d([g(E0())],sA.prototype,"color",void 0),sA=d([G("esri.symbols.support.Symbol3DTextBackground")],sA);var vN,aE;let Is=(aE=class extends Ia{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new vN({enabled:this.enabled,font:this.font&&le(this.font),halo:this.halo&&le(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:le(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new vN({font:e.font!=null?e.font.clone():new tc,halo:FJe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new cl({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new sA({color:e.backgroundColor.clone()}):null})}},vN=aE,aE);function FJe(t,e){return t&&e!=null&&e>0?new e2({color:le(t),size:e}):null}d([g({type:tc,json:{write:!0}})],Is.prototype,"font",null),d([Ge("font")],Is.prototype,"writeFont",null),d([g({type:e2,json:{write:!0}})],Is.prototype,"halo",void 0),d([g({...dTe,json:{default:"center",write:!0}})],Is.prototype,"horizontalAlignment",void 0),d([g({...hTe,json:{default:1,write:!0}})],Is.prototype,"lineHeight",void 0),d([g({type:cl,json:{write:!0}})],Is.prototype,"material",void 0),d([g({type:sA,json:{write:!0}})],Is.prototype,"background",void 0),d([g(Yp)],Is.prototype,"size",null),d([g({type:String,json:{write:!0}})],Is.prototype,"text",void 0),d([dt({Text:"text"},{readOnly:!0})],Is.prototype,"type",void 0),d([g({...pTe,json:{default:"baseline",write:!0}})],Is.prototype,"verticalAlignment",void 0),Is=vN=d([G("esri.symbols.TextSymbol3DLayer")],Is);var OH,lE;let um=(lE=class extends Ia{constructor(e){super(e),this.color=LH.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new OH({color:le(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},OH=lE,lE);d([g({type:Ze,nonNullable:!0,json:{type:[ri],write:(t,e,i)=>e[i]=t.toArray(Ze.AlphaMode.UNLESS_OPAQUE),default:()=>LH.clone(),defaultEquals:t=>t.toCss(!0)===LH.toCss(!0)}})],um.prototype,"color",void 0),d([dt({Water:"water"},{readOnly:!0})],um.prototype,"type",void 0),d([g({type:["small","medium","large"],json:{write:!0,default:"medium"}})],um.prototype,"waterbodySize",void 0),d([g({type:Number,json:{write:!0,default:null}})],um.prototype,"waveDirection",void 0),d([g({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],um.prototype,"waveStrength",void 0),um=OH=d([G("esri.symbols.WaterSymbol3DLayer")],um);const LH=new Ze([0,119,190]);var RH;let xh=RH=class extends ut{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new RH({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};d([g({type:String})],xh.prototype,"name",void 0),d([g({type:String})],xh.prototype,"styleUrl",void 0),d([g({type:String})],xh.prototype,"styleName",void 0),d([g({type:Ue})],xh.prototype,"portal",void 0),xh=RH=d([G("esri.symbols.support.StyleOrigin")],xh);var NH;let u_=NH=class extends ut{constructor(){super(...arguments),this.url=""}clone(){return new NH({url:this.url})}};d([g({type:String})],u_.prototype,"url",void 0),u_=NH=d([G("esri.symbols.support.Thumbnail")],u_);const fTe={icon:xo,object:Ws,line:_a,path:bo,fill:xa,extrude:cm,text:Is,water:um},zJe=et.ofType({base:Ia,key:"type",typeMap:fTe,errorContext:"symbol-layer"});let rl=class extends Un{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||et;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&Ce.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){sy(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=ny(e.styleUrl,r);return new xh({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new xh({portal:(r==null?void 0:r.portal)||Ue.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new vc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=L_(e.styleUrl,n);pl(s)&&(s=Lh(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!w1e(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new vc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ia||e&&fTe[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};d([g({json:{read:!1,write:!1}})],rl.prototype,"color",null),d([g({type:zJe,nonNullable:!0,json:{write:!0}}),Ai(H2e)],rl.prototype,"symbolLayers",null),d([g({type:xh})],rl.prototype,"styleOrigin",void 0),d([je("styleOrigin")],rl.prototype,"readStyleOrigin",null),d([Ge("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],rl.prototype,"writeStyleOrigin",null),d([g({type:u_,json:{read:!1}})],rl.prototype,"thumbnail",void 0),d([g({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],rl.prototype,"type",void 0),rl=d([G("esri.symbols.Symbol3D")],rl);let t2=class extends ve{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};d([g({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],t2.prototype,"type",void 0),d([g({readOnly:!0})],t2.prototype,"visible",void 0),t2=d([G("esri.symbols.callouts.Callout3D")],t2);var DH;let bN=DH=class extends ve{constructor(t){super(t),this.color=new Ze("white")}clone(){return new DH({color:le(this.color)})}};d([g(E0({colorRequiredOnWrite:!0}))],bN.prototype,"color",void 0),bN=DH=d([G("esri.symbols.callouts.LineCallout3DBorder")],bN);const jJe=bN;var FH;let hm=FH=class extends t2{constructor(t){super(t),this.type="line",this.color=new Ze([0,0,0,1]),this.size=Bi(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new FH({color:le(this.color),size:this.size,border:le(this.border)})}};d([dt({line:"line"})],hm.prototype,"type",void 0),d([g(E0({colorRequiredOnWrite:!0}))],hm.prototype,"color",void 0),d([g({...Yp,json:{write:{isRequired:!0}}})],hm.prototype,"size",void 0),d([g({type:jJe,json:{write:!0}})],hm.prototype,"border",void 0),d([g({readOnly:!0})],hm.prototype,"visible",null),hm=FH=d([G("esri.symbols.callouts.LineCallout3D")],hm);function _Q(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function mTe(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!_Q(t)}function $8t(t){return t.type==="point-3d"||t.type==="label-3d"}function M8t(t){return t.horizontalAlignment==="center"}const yTe={types:{key:"type",base:t2,typeMap:{line:hm}},json:{write:!0}};var zH;let gv=zH=class extends ve{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new zH({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};d([g({...Yp,json:{write:{isRequired:!0}}})],gv.prototype,"screenLength",void 0),d([g({type:Number,nonNullable:!0,json:{write:!0,default:0}})],gv.prototype,"minWorldLength",void 0),d([g({type:Number,json:{write:!0}})],gv.prototype,"maxWorldLength",void 0),gv=zH=d([G("esri.symbols.support.Symbol3DVerticalOffset")],gv);var wN;const gTe=et.ofType({base:null,key:"type",typeMap:{text:Is}});let fh=wN=class extends rl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new gTe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return mTe(this)}hasVisibleVerticalOffset(){return _Q(this)}clone(){return new wN({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail),callout:le(this.callout),verticalOffset:le(this.verticalOffset)})}static fromTextSymbol(t){return new wN({symbolLayers:new et([Is.fromTextSymbol(t)])})}};d([g({type:gv,json:{write:!0}})],fh.prototype,"verticalOffset",void 0),d([g(yTe)],fh.prototype,"callout",void 0),d([g({json:{read:!1,write:!1}})],fh.prototype,"styleOrigin",void 0),d([g({type:gTe})],fh.prototype,"symbolLayers",void 0),d([dt({LabelSymbol3D:"label-3d"},{readOnly:!0})],fh.prototype,"type",void 0),fh=wN=d([G("esri.symbols.LabelSymbol3D")],fh);var _N;const vTe=et.ofType({base:null,key:"type",typeMap:{line:_a,path:bo}}),UJe=et.ofType({base:null,key:"type",typeMap:{line:_a,path:bo}});let Ph=_N=class extends rl{constructor(t){super(t),this.symbolLayers=new vTe,this.type="line-3d"}clone(){return new _N({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleLineSymbol(t){return new _N({symbolLayers:new et([_a.fromSimpleLineSymbol(t)])})}};d([g({type:vTe,json:{type:UJe}})],Ph.prototype,"symbolLayers",void 0),d([dt({LineSymbol3D:"line-3d"},{readOnly:!0})],Ph.prototype,"type",void 0),Ph=_N=d([G("esri.symbols.LineSymbol3D")],Ph);var xN;const bTe=et.ofType({base:null,key:"type",typeMap:{fill:xa}});let Dm=xN=class extends rl{constructor(t){super(t),this.symbolLayers=new bTe,this.type="mesh-3d"}clone(){return new xN({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleFillSymbol(t){return new xN({symbolLayers:new et([xa.fromSimpleFillSymbol(t)])})}};d([g({type:bTe})],Dm.prototype,"symbolLayers",void 0),d([dt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Dm.prototype,"type",void 0),Dm=xN=d([G("esri.symbols.MeshSymbol3D")],Dm);let GC=class extends Un{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};d([dt({esriSLS:"simple-line"},{readOnly:!0})],GC.prototype,"type",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],GC.prototype,"width",void 0),GC=d([G("esri.symbols.LineSymbol")],GC);var jH;let gd=jH=class extends ve{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new jH({color:le(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};d([g({type:["begin","end","begin-end"],json:{write:!0}})],gd.prototype,"placement",void 0),d([dt({"line-marker":"line-marker"},{readOnly:!0}),g({json:{origins:{"web-map":{write:!1}}}})],gd.prototype,"type",void 0),d([g({type:uTe})],gd.prototype,"style",void 0),d([Ge("style")],gd.prototype,"writeStyle",null),d([g({type:Ze,value:null,json:{write:{allowNull:!0}}})],gd.prototype,"color",null),d([je("color")],gd.prototype,"readColor",null),d([Ge("color")],gd.prototype,"writeColor",null),gd=jH=d([G("esri.symbols.LineSymbolMarker")],gd);const BJe=gd;var UH;const L8=new Bt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Hr=UH=class extends GC{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Ti(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ti(s)),o}clone(){var t;return new UH({color:le(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};d([dt({esriSLS:"simple-line"},{readOnly:!0})],Hr.prototype,"type",void 0),d([g({type:L8.apiValues,json:{read:L8.read,write:L8.write}})],Hr.prototype,"style",void 0),d([g({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Hr.prototype,"cap",void 0),d([g({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Hr.prototype,"join",void 0),d([g({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":BJe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Hr.prototype,"marker",void 0),d([g({type:Number,json:{read:!1,write:!1}})],Hr.prototype,"miterLimit",void 0),Hr=UH=d([G("esri.symbols.SimpleLineSymbol")],Hr);let i2=class extends Un{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};d([g({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Hr}},json:{default:null,write:!0}})],i2.prototype,"outline",void 0),d([g({type:["simple-fill","picture-fill"],readOnly:!0})],i2.prototype,"type",void 0),i2=d([G("esri.symbols.FillSymbol")],i2);function VJe(t,e,i){return e.imageData?_1e({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):wTe(e.url,i)}function wTe(t,e){if(!pl(t)){const i=qJe(e);if(i)return k_(i,"images",t)}return ny(t,e)}function GJe(t,e,i,r){if(vy(t)){const n=O_(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&R_(i.url,e,"url",r)}else R_(t,e,"url",r)}const _Te={json:{read:{source:["imageData","url"],reader:VJe},write:{writer(t,e,i,r){GJe(t,e,this.source,r)}}}},xTe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=wTe(e.url,i)),r}}}};function qJe(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var BH;let Ja=BH=class extends i2{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Ti(i)),r!=null&&(n.height=Ti(r)),n}clone(){const t=new BH({color:le(this.color),height:this.height,outline:le(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",le(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};d([dt({esriPFS:"picture-fill"},{readOnly:!0})],Ja.prototype,"type",void 0),d([g(_Te)],Ja.prototype,"url",void 0),d([g({type:Number,json:{write:!0}})],Ja.prototype,"xscale",void 0),d([g({type:Number,json:{write:!0}})],Ja.prototype,"yscale",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Ja.prototype,"width",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Ja.prototype,"height",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Ja.prototype,"xoffset",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Ja.prototype,"yoffset",void 0),d([g(xTe)],Ja.prototype,"source",void 0),Ja=BH=d([G("esri.symbols.PictureFillSymbol")],Ja);let dm=class extends Un{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};d([g({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],dm.prototype,"angle",void 0),d([g({type:["simple-marker","picture-marker"],readOnly:!0})],dm.prototype,"type",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],dm.prototype,"xoffset",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],dm.prototype,"yoffset",void 0),d([g({cast:t=>t==="auto"?t:$a(Ti(t)),json:{write:!0}})],dm.prototype,"size",void 0),dm=d([G("esri.symbols.MarkerSymbol")],dm);var VH;let Go=VH=class extends dm{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ti(e)),i!=null&&(r.height=Ti(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new VH({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",le(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};d([g({json:{write:!1}})],Go.prototype,"color",void 0),d([dt({esriPMS:"picture-marker"},{readOnly:!0})],Go.prototype,"type",void 0),d([g(_Te)],Go.prototype,"url",void 0),d([g(xTe)],Go.prototype,"source",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Go.prototype,"height",void 0),d([je("height",["height","size"])],Go.prototype,"readHeight",null),d([g({type:Number,cast:Ti,json:{write:!0}})],Go.prototype,"width",void 0),d([g({json:{write:!1}})],Go.prototype,"size",void 0),Go=VH=d([G("esri.symbols.PictureMarkerSymbol")],Go);var Ub;const STe=et.ofType({base:null,key:"type",typeMap:{icon:xo,object:Ws,text:Is}});let Ma=Ub=class extends rl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new STe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return mTe(this)}hasVisibleVerticalOffset(){return _Q(this)}clone(){return new Ub({verticalOffset:le(this.verticalOffset),callout:le(this.callout),styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Ub({symbolLayers:new et([xo.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Ub({symbolLayers:new et([xo.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Ub(i!=null&&i.callout?{symbolLayers:new et([xo.fromCIMSymbol(t)]),callout:new hm({size:.5,color:new Ze([0,0,0])}),verticalOffset:new gv({screenLength:40})}:{symbolLayers:new et([xo.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Ub({symbolLayers:new et([Is.fromTextSymbol(t)])})}};d([g({type:gv,json:{write:!0}})],Ma.prototype,"verticalOffset",void 0),d([g(yTe)],Ma.prototype,"callout",void 0),d([g({type:STe,json:{origins:{"web-scene":{write:!0}}}})],Ma.prototype,"symbolLayers",void 0),d([dt({PointSymbol3D:"point-3d"},{readOnly:!0})],Ma.prototype,"type",void 0),Ma=Ub=d([G("esri.symbols.PointSymbol3D")],Ma);var qC;const ETe=et.ofType({base:null,key:"type",typeMap:{extrude:cm,fill:xa,icon:xo,line:_a,object:Ws,text:Is,water:um}});let gu=qC=class extends rl{constructor(t){super(t),this.symbolLayers=new ETe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&r0(Ce.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&r0(Ce.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(wu((()=>this.symbolLayers),"after-add",(({item:e})=>t(e)),Up))}clone(){return new qC({styleOrigin:le(this.styleOrigin),symbolLayers:le(this.symbolLayers),thumbnail:le(this.thumbnail)})}static fromJSON(t){var i;const e=new qC;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new qC({symbolLayers:new et([xa.fromSimpleFillSymbol(t)])})}};d([g({type:ETe,json:{write:!0}})],gu.prototype,"symbolLayers",void 0),d([dt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],gu.prototype,"type",void 0),gu=qC=d([G("esri.symbols.PolygonSymbol3D")],gu);var GH;const R8=new Bt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Jo=GH=class extends i2{constructor(...t){super(...t),this.color=new Ze([0,0,0,.25]),this.outline=new Hr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new GH({color:le(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};d([g()],Jo.prototype,"color",void 0),d([g()],Jo.prototype,"outline",void 0),d([dt({esriSFS:"simple-fill"},{readOnly:!0})],Jo.prototype,"type",void 0),d([g({type:R8.apiValues,json:{read:R8.read,write:R8.write}})],Jo.prototype,"style",void 0),Jo=GH=d([G("esri.symbols.SimpleFillSymbol")],Jo);var qH;const N8=new Bt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Or=qH=class extends dm{constructor(...t){super(...t),this.color=new Ze([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Hr}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Ti(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new qH({angle:this.angle,color:le(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};d([g()],Or.prototype,"color",void 0),d([Ge("color")],Or.prototype,"writeColor",null),d([dt({esriSMS:"simple-marker"},{readOnly:!0})],Or.prototype,"type",void 0),d([g()],Or.prototype,"size",void 0),d([g({type:N8.apiValues,json:{read:N8.read,write:N8.write}})],Or.prototype,"style",void 0),d([g({type:String,json:{write:!0}})],Or.prototype,"path",null),d([g({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Hr}},json:{default:null,write:!0}})],Or.prototype,"outline",void 0),Or=qH=d([G("esri.symbols.SimpleMarkerSymbol")],Or);var HH;let Hi=HH=class extends Un{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new tc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Ti(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new HH({angle:this.angle,backgroundColor:le(this.backgroundColor),borderLineColor:le(this.borderLineColor),borderLineSize:this.borderLineSize,color:le(this.color),font:this.font&&this.font.clone(),haloColor:le(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};d([g({type:Ze,json:{write:!0}})],Hi.prototype,"backgroundColor",void 0),d([g({type:Ze,json:{write:!0}})],Hi.prototype,"borderLineColor",void 0),d([g({type:Number,json:{write:!0},cast:Ti})],Hi.prototype,"borderLineSize",void 0),d([g({type:tc,json:{write:!0}})],Hi.prototype,"font",void 0),d([g({...dTe,json:{write:!0}})],Hi.prototype,"horizontalAlignment",void 0),d([g({type:Boolean,json:{write:!0}})],Hi.prototype,"kerning",void 0),d([g({type:Ze,json:{write:!0}})],Hi.prototype,"haloColor",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Hi.prototype,"haloSize",void 0),d([g({type:Boolean,json:{write:!0}})],Hi.prototype,"rightToLeft",void 0),d([g({type:Boolean,json:{write:!0}})],Hi.prototype,"rotated",void 0),d([g({type:String,json:{write:!0}})],Hi.prototype,"text",void 0),d([dt({esriTS:"text"},{readOnly:!0})],Hi.prototype,"type",void 0),d([g({...pTe,json:{write:!0}})],Hi.prototype,"verticalAlignment",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Hi.prototype,"xoffset",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Hi.prototype,"yoffset",void 0),d([g({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Hi.prototype,"angle",void 0),d([g({type:Number,json:{write:!0}})],Hi.prototype,"width",void 0),d([g({type:Number})],Hi.prototype,"lineWidth",void 0),d([Ge("lineWidth")],Hi.prototype,"writeLineWidth",null),d([Ai("lineWidth")],Hi.prototype,"castLineWidth",null),d([g(hTe)],Hi.prototype,"lineHeight",void 0),d([Ge("lineHeight")],Hi.prototype,"writeLineHeight",null),Hi=HH=d([G("esri.symbols.TextSymbol")],Hi);var WH;let Ks=WH=class extends Un{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Ue.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new WH({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){W_e(Ce.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new ae("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await Re(()=>Promise.resolve().then(()=>Svt),void 0);Rr(t);const n=r(this,{portal:this.portal},t);n.catch((o=>{Ce.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)}));const s=await n;return e!=null&&e.set(i,s.clone()),s}};d([g({json:{write:!1}})],Ks.prototype,"color",void 0),d([g({type:String,json:{write:!0}})],Ks.prototype,"styleName",void 0),d([g({type:Ue,json:{write:!1}})],Ks.prototype,"portal",void 0),d([g({type:String,json:{read:Cj,write:R_}})],Ks.prototype,"styleUrl",void 0),d([g({type:u_,json:{read:!1}})],Ks.prototype,"thumbnail",void 0),d([g({type:String,json:{write:!0}})],Ks.prototype,"name",void 0),d([dt({styleSymbolReference:"web-style"},{readOnly:!0})],Ks.prototype,"type",void 0),d([g()],Ks.prototype,"_fetchCacheKey",null),Ks=WH=d([G("esri.symbols.WebStyleSymbol")],Ks);function l4(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function tf(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ov={base:Un,key:"type",typeMap:{"simple-fill":Jo,"picture-fill":Ja,"picture-marker":Go,"simple-line":Hr,"simple-marker":Or,text:Hi,"label-3d":fh,"line-3d":Ph,"mesh-3d":Dm,"point-3d":Ma,"polygon-3d":gu,"web-style":Ks,cim:Ko},errorContext:"symbol"},P8t={base:Un,key:"type",typeMap:{"picture-marker":Go,"simple-marker":Or,"point-3d":Ma,cim:Ko},errorContext:"symbol"},k8t={base:Un,key:"type",typeMap:{"simple-line":Hr,"line-3d":Ph,cim:Ko},errorContext:"symbol"},O8t={base:Un,key:"type",typeMap:{"simple-fill":Jo,"picture-fill":Ja,"polygon-3d":gu,cim:Ko},errorContext:"symbol"},HJe={base:Un,key:"type",typeMap:{"picture-marker":Go,"simple-marker":Or,text:Hi,"web-style":Ks,cim:Ko},errorContext:"symbol"},WJe=LT({types:Ov}),TTe={base:Un,key:"type",typeMap:{"simple-fill":Jo,"picture-fill":Ja,"picture-marker":Go,"simple-line":Hr,"simple-marker":Or,text:Hi,"line-3d":Ph,"mesh-3d":Dm,"point-3d":Ma,"polygon-3d":gu,"web-style":Ks,cim:Ko},errorContext:"symbol"},ZJe={base:Un,key:"type",typeMap:{text:Hi,"label-3d":fh},errorContext:"symbol"},Sce={base:Un,key:"type",typeMap:{"line-3d":Ph,"mesh-3d":Dm,"point-3d":Ma,"polygon-3d":gu,"web-style":Ks,cim:Ko},errorContext:"symbol"},YJe={base:Un,key:"type",typeMap:{"label-3d":fh},errorContext:"symbol"},$Te=Bp(Ov);var ZH;function KJe(t){if(!t)return null;const e={};for(const i in t){const r=Hp(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function JJe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var cE;let sr=(cE=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:F3(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&k6e(Ce.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new ZH({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[i,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?sJe(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){var e;return{aggregateGeometries:JJe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:UA(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([$o((()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0}),(({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())})),$o((()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0}),(()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,i)=>e===i,sync:!0})])}},ZH=cE,cE);d([g({value:null,json:{read:KJe}})],sr.prototype,"aggregateGeometries",null),d([g({value:null})],sr.prototype,"attributes",null),d([g({value:null,types:UT,json:{read:Hp}})],sr.prototype,"geometry",null),d([g({type:Boolean})],sr.prototype,"isAggregate",void 0),d([g({clonable:!1})],sr.prototype,"layer",void 0),d([g({clonable:"reference"})],sr.prototype,"origin",void 0),d([g({type:Zp,value:null})],sr.prototype,"popupTemplate",null),d([g({clonable:"reference"})],sr.prototype,"sourceLayer",void 0),d([g({value:null,types:Ov})],sr.prototype,"symbol",null),d([g({clonable:!1,json:{read:!1,write:!1}})],sr.prototype,"_version",void 0),d([g({type:Boolean,value:!0})],sr.prototype,"visible",null),sr=ZH=d([G("esri.Graphic")],sr);let h_=class extends XI{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};d([QJ({Type:sr,ensureType:Zr(sr)})],h_.prototype,"itemType",void 0),h_=d([G("esri.support.GraphicsCollection")],h_);let Ug=class extends ut{constructor(e){super(e),this.view=null,this.baseLayerViews=new et,this.referenceLayerViews=new et,this._loadingHandle=Je((()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap}),(i=>{i&&i.load().catch((()=>{}))}),rn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some((s=>s.updating))||this.referenceLayerViews.some((s=>s.updating)))}};d([g({constructOnly:!0})],Ug.prototype,"view",void 0),d([g({readOnly:!0})],Ug.prototype,"baseLayerViews",void 0),d([g({readOnly:!0})],Ug.prototype,"referenceLayerViews",void 0),d([g({readOnly:!0})],Ug.prototype,"suspended",null),d([g({type:Boolean,readOnly:!0})],Ug.prototype,"updating",null),Ug=d([G("esri.views.BasemapView")],Ug);const XJe=Ug;let Ul=class extends ut{constructor(e){super(e),this.factor=1.5,this.offset=to(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};d([g({type:Number})],Ul.prototype,"factor",void 0),d([g({nonNullable:!0})],Ul.prototype,"offset",void 0),d([g()],Ul.prototype,"position",void 0),d([g({type:Number,range:{min:0}})],Ul.prototype,"size",void 0),d([g()],Ul.prototype,"maskUrl",void 0),d([g()],Ul.prototype,"maskEnabled",void 0),d([g()],Ul.prototype,"overlayUrl",void 0),d([g()],Ul.prototype,"overlayEnabled",void 0),d([g({readOnly:!0})],Ul.prototype,"version",null),d([g({type:Boolean})],Ul.prototype,"visible",void 0),Ul=d([G("esri.views.Magnifier")],Ul);const MTe=Ul;let SN=class{constructor(e){this._observable=new AT,this._map=new Map(e)}get size(){return It(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return It(this._observable),this._map.entries()}forEach(e,i){It(this._observable),this._map.forEach(((r,n)=>e.call(i,r,n,this)),i)}get(e){return It(this._observable),this._map.get(e)}has(e){return It(this._observable),this._map.has(e)}keys(){return It(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return It(this._observable),this._map.values()}[Symbol.iterator](){return It(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var YH;let Bw=YH=class extends ve{constructor(t){super(t),this.name=null,this.code=null}clone(){return new YH({name:this.name,code:this.code})}};d([g({type:String,json:{write:{isRequired:!0}}})],Bw.prototype,"name",void 0),d([g({type:[String,Number],json:{write:{isRequired:!0}}})],Bw.prototype,"code",void 0),Bw=YH=d([G("esri.layers.support.CodedValue")],Bw);const QJe=new Bt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Lv=class extends ve{constructor(e){super(e),this.name=null,this.type=null}};d([g({type:String,json:{write:!0}})],Lv.prototype,"name",void 0),d([dt(QJe),g({json:{write:{isRequired:!0}}})],Lv.prototype,"type",void 0),Lv=d([G("esri.layers.support.Domain")],Lv);var KH,uE;let Rv=(uE=class extends Lv{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some((n=>(String(n.code)===r&&(i=n.name),!!i)))}return i}clone(){return new KH({codedValues:le(this.codedValues),name:this.name})}},KH=uE,uE);d([g({type:[Bw],json:{write:{isRequired:!0}}})],Rv.prototype,"codedValues",void 0),d([dt({codedValue:"coded-value"})],Rv.prototype,"type",void 0),Rv=KH=d([G("esri.layers.support.CodedValueDomain")],Rv);var JH,hE;let oA=(hE=class extends Lv{constructor(e){super(e),this.type="inherited"}clone(){return new JH}},JH=hE,hE);d([dt({inherited:"inherited"})],oA.prototype,"type",void 0),oA=JH=d([G("esri.layers.support.InheritedDomain")],oA);var XH,dE;let $w=(dE=class extends Lv{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new XH({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},XH=dE,dE);d([g({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],$w.prototype,"maxValue",void 0),d([g({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],$w.prototype,"minValue",void 0),d([dt({range:"range"})],$w.prototype,"type",void 0),$w=XH=d([G("esri.layers.support.RangeDomain")],$w);const CTe={key:"type",base:Lv,typeMap:{range:$w,"coded-value":Rv,inherited:oA}};function c4(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return $w.fromJSON(t);case"codedValue":return Rv.fromJSON(t);case"inherited":return oA.fromJSON(t)}return null}const xQ=new Bt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var QH;const eXe=new Bt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var pE;let Zs=(pE=class extends ve{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?eXe.fromJSON(r.fieldValueType):null}clone(){var e;return new QH({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},QH=pE,pE);d([g({type:String,json:{write:!0}})],Zs.prototype,"alias",void 0),d([g({type:[String,Number],json:{write:{allowNull:!0}}})],Zs.prototype,"defaultValue",void 0),d([g()],Zs.prototype,"description",void 0),d([je("description")],Zs.prototype,"readDescription",null),d([g({types:CTe,json:{read:{reader:c4},write:!0}})],Zs.prototype,"domain",void 0),d([g({type:Boolean,json:{write:!0}})],Zs.prototype,"editable",void 0),d([g({type:ri,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Zs.prototype,"length",void 0),d([g({type:String,json:{write:!0}})],Zs.prototype,"name",void 0),d([g({type:Boolean,json:{write:!0}})],Zs.prototype,"nullable",void 0),d([dt(xQ)],Zs.prototype,"type",void 0),d([g()],Zs.prototype,"valueType",void 0),d([je("valueType",["description"])],Zs.prototype,"readValueType",null),d([g({type:Boolean,json:{read:!1}})],Zs.prototype,"visible",void 0),Zs=QH=d([G("esri.layers.support.Field")],Zs);var eW;let Xx=eW=class extends ve{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new eW({mapLayerId:t,gdbVersion:e})}};d([dt({mapLayer:"map-layer"}),g({json:{write:{isRequired:!0}}})],Xx.prototype,"type",void 0),d([g({type:ri,json:{write:{isRequired:!0}}})],Xx.prototype,"mapLayerId",void 0),d([g({type:String,json:{write:!0}})],Xx.prototype,"gdbVersion",void 0),Xx=eW=d([G("esri.layers.support.source.MapLayerSource")],Xx);var tW;let Zf=tW=class extends ve{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new tW(s)}};d([dt({queryTable:"query-table"}),g({json:{write:{isRequired:!0}}})],Zf.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Zf.prototype,"workspaceId",void 0),d([g({type:String,json:{write:!0}})],Zf.prototype,"query",void 0),d([g({type:String,json:{write:!0}})],Zf.prototype,"oidFields",void 0),d([g({type:tt,json:{write:!0}})],Zf.prototype,"spatialReference",void 0),d([dt(KVe)],Zf.prototype,"geometryType",void 0),Zf=tW=d([G("esri.layers.support.source.QueryTableDataSource")],Zf);var iW;let Qx=iW=class extends ve{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new iW({workspaceId:t,dataSourceName:e})}};d([dt({raster:"raster"}),g({json:{write:{isRequired:!0}}})],Qx.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Qx.prototype,"dataSourceName",void 0),d([g({type:String,json:{write:!0}})],Qx.prototype,"workspaceId",void 0),Qx=iW=d([G("esri.layers.support.source.RasterDataSource")],Qx);var rW;let Bb=rW=class extends ve{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new rW({workspaceId:t,gdbVersion:e,dataSourceName:i})}};d([dt({table:"table"}),g({json:{write:{isRequired:!0}}})],Bb.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Bb.prototype,"workspaceId",void 0),d([g({type:String,json:{write:!0}})],Bb.prototype,"gdbVersion",void 0),d([g({type:String,json:{write:!0}})],Bb.prototype,"dataSourceName",void 0),Bb=rW=d([G("esri.layers.support.source.TableDataSource")],Bb);var nW,sW;const tXe=bs()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Bl=nW=class extends ve{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return Ece()(t,e,i)}castLeftTableSource(t){return Bp(oW(),t)}readRightTableSource(t,e,i){return Ece()(t,e,i)}castRightTableSource(t){return Bp(oW(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new nW(s)}};d([dt({joinTable:"join-table"}),g({json:{write:{isRequired:!0}}})],Bl.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Bl.prototype,"leftTableKey",void 0),d([g({type:String,json:{write:!0}})],Bl.prototype,"rightTableKey",void 0),d([g({json:{write:!0}})],Bl.prototype,"leftTableSource",void 0),d([je("leftTableSource")],Bl.prototype,"readLeftTableSource",null),d([Ai("leftTableSource")],Bl.prototype,"castLeftTableSource",null),d([g({json:{write:!0}})],Bl.prototype,"rightTableSource",void 0),d([je("rightTableSource")],Bl.prototype,"readRightTableSource",null),d([Ai("rightTableSource")],Bl.prototype,"castRightTableSource",null),d([dt(tXe)],Bl.prototype,"joinType",void 0),Bl=nW=d([G("esri.layers.support.source.JoinTableDataSource")],Bl);let D8=null;function Ece(){return D8||(D8=LT({types:oW()})),D8}let F8=null;function oW(){return F8||(F8={key:"type",base:null,typeMap:{"data-layer":mh,"map-layer":Xx}}),F8}const iXe={key:"type",base:null,typeMap:{"join-table":Bl,"query-table":Zf,raster:Qx,table:Bb}};var fE;let mh=(fE=class extends ve{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new sW({fields:e,dataSource:i})}},sW=fE,fE);d([dt({dataLayer:"data-layer"}),g({json:{write:{isRequired:!0}}})],mh.prototype,"type",void 0),d([g({type:[Zs],json:{write:!0}})],mh.prototype,"fields",void 0),d([g({types:iXe,json:{write:!0}})],mh.prototype,"dataSource",void 0),mh=sW=d([G("esri.layers.support.source.DataLayerSource")],mh),mh.from=Zr(mh);let Vb=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};d([g({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Vb.prototype,"onFields",void 0),d([g({type:String,json:{write:!0}})],Vb.prototype,"operator",void 0),d([g({type:String,json:{write:!0}})],Vb.prototype,"searchTerm",void 0),d([g({type:String,json:{write:!0}})],Vb.prototype,"searchType",void 0),Vb=d([G("esri.rest.support.FullTextSearch")],Vb);const ITe=Vb;var aW;const Tce=new Bt({upperLeft:"upper-left",lowerLeft:"lower-left"});let ov=aW=class extends ve{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new aW(le({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};d([g({type:Ut,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ov.prototype,"extent",void 0),d([g({type:["view","edit"],json:{write:!0}})],ov.prototype,"mode",void 0),d([g({type:String,json:{read:Tce.read,write:Tce.write}})],ov.prototype,"originPosition",void 0),d([g({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ov.prototype,"tolerance",void 0),ov=aW=d([G("esri.rest.support.QuantizationParameters")],ov);const rXe=new Bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var lW;const $ce=new Bt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let th=lW=class extends ve{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=le(t))}clone(){return new lW({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:le(this.statisticParameters)})}};d([g({type:Number,json:{write:!0}})],th.prototype,"maxPointCount",void 0),d([g({type:Number,json:{write:!0}})],th.prototype,"maxRecordCount",void 0),d([g({type:Number,json:{write:!0}})],th.prototype,"maxVertexCount",void 0),d([g({type:String,json:{write:!0}})],th.prototype,"onStatisticField",void 0),d([g({type:String,json:{write:!0}})],th.prototype,"outStatisticFieldName",void 0),d([g({type:String,json:{read:{source:"statisticType",reader:$ce.read},write:{target:"statisticType",writer:$ce.write}}})],th.prototype,"statisticType",void 0),d([g({type:Object})],th.prototype,"statisticParameters",void 0),d([Ge("statisticParameters")],th.prototype,"writeStatisticParameters",null),th=lW=d([G("esri.rest.support.StatisticDefinition")],th);var EN;const nXe=new Bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var x_;let bt=(x_=class extends ve{static from(e){return fk(EN,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map((o=>o instanceof Date?o.getTime():o)):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new EN(le({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},EN=x_,x_.MAX_MAX_RECORD_COUNT_FACTOR=5,x_);d([g({json:{write:!0}})],bt.prototype,"aggregateIds",void 0),d([g({type:Boolean,json:{write:!0}})],bt.prototype,"cacheHint",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"compactGeometryEnabled",void 0),d([g({json:{write:!0}})],bt.prototype,"datumTransformation",void 0),d([Ai("datumTransformation")],bt.prototype,"castDatumTransformation",null),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"defaultSpatialReferenceEnabled",void 0),d([g({type:Number,json:{write:!0}})],bt.prototype,"distance",void 0),d([g({type:mh,json:{write:!0}})],bt.prototype,"dynamicDataSource",void 0),d([g({type:String,json:{write:!0}})],bt.prototype,"formatOf3DObjects",void 0),d([g({type:[ITe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],bt.prototype,"fullText",void 0),d([g({type:String,json:{write:!0}})],bt.prototype,"gdbVersion",void 0),d([g({types:UT,json:{read:Hp,write:!0}})],bt.prototype,"geometry",void 0),d([g({type:Number,json:{write:!0}})],bt.prototype,"geometryPrecision",void 0),d([g({type:[String],json:{write:!0}})],bt.prototype,"groupByFieldsForStatistics",void 0),d([g({type:String,json:{write:!0}})],bt.prototype,"having",void 0),d([g({type:Date})],bt.prototype,"historicMoment",void 0),d([Ge("historicMoment")],bt.prototype,"writeHistoricMoment",null),d([g({type:Number,json:{write:!0}})],bt.prototype,"maxAllowableOffset",void 0),d([g({type:Number,cast:t=>t<1?1:t>bt.MAX_MAX_RECORD_COUNT_FACTOR?bt.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],bt.prototype,"maxRecordCountFactor",void 0),d([g({type:["xyFootprint"],json:{write:!0}})],bt.prototype,"multipatchOption",void 0),d([g({type:Number,json:{read:{source:"resultRecordCount"}}})],bt.prototype,"num",void 0),d([g({json:{write:!0}})],bt.prototype,"objectIds",void 0),d([g({type:[String],json:{write:!0}})],bt.prototype,"orderByFields",void 0),d([g({type:[String],json:{write:!0}})],bt.prototype,"outFields",void 0),d([g({type:tt,json:{name:"outSR",write:!0}})],bt.prototype,"outSpatialReference",void 0),d([g({type:[th],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],bt.prototype,"outStatistics",void 0),d([g({json:{write:!0}})],bt.prototype,"parameterValues",void 0),d([Ge("parameterValues")],bt.prototype,"writeParameterValues",null),d([g({type:gt,json:{write:!0}})],bt.prototype,"pixelSize",void 0),d([g({type:ov,json:{write:!0}})],bt.prototype,"quantizationParameters",void 0),d([g({type:[Object],json:{write:!0}})],bt.prototype,"rangeValues",void 0),d([g({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],bt.prototype,"relationParameter",void 0),d([g({type:String,json:{write:!0}})],bt.prototype,"resultType",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"returnCentroid",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"returnDistinctValues",void 0),d([g({type:Boolean,json:{default:!0,write:!0}})],bt.prototype,"returnExceededLimitFeatures",void 0),d([g({type:Boolean,json:{write:!0}})],bt.prototype,"returnGeometry",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"returnQueryGeometry",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"returnM",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],bt.prototype,"returnZ",void 0),d([g({type:Boolean,json:{write:!0}})],bt.prototype,"returnTrueCurves",void 0),d([g({type:tt,json:{write:!0}})],bt.prototype,"sourceSpatialReference",void 0),d([dt(rXe,{ignoreUnknown:!1,name:"spatialRel"})],bt.prototype,"spatialRelationship",void 0),d([g({type:Number,json:{read:{source:"resultOffset"}}})],bt.prototype,"start",void 0),d([Ge("start"),Ge("num")],bt.prototype,"writeStart",null),d([g({type:String,json:{write:!0}})],bt.prototype,"sqlFormat",void 0),d([g({type:String,json:{write:!0}})],bt.prototype,"text",void 0),d([g({type:Wi,json:{write:!0}})],bt.prototype,"timeExtent",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],bt.prototype,"timeReferenceUnknownClient",void 0),d([dt(nXe,{ignoreUnknown:!1}),g({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],bt.prototype,"units",void 0),d([g({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],bt.prototype,"where",void 0),d([Ge("where")],bt.prototype,"writeWhere",null),bt=EN=d([G("esri.rest.support.Query")],bt);function Cg(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Wc=class extends Wh.EventedAccessor{constructor(e){super(e),this._selectionMap=new SN,this._sources=new et,this._trashCan=[],this._layerEditHandles=new et,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Je((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),Je((()=>this.view),(e=>{e==null||e.when().then((()=>this.syncSources()))}),rn),wu((()=>this.sources),"change",(e=>{var n;const i=this._selectionMap,r=[];for(const s of e.removed){const o=i.get(s);o&&(i.delete(s),(n=o.highlightHandle)==null||n.remove(),r.push({layer:s,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Wr)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}}))}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){sy(e,this._sources)}syncSources(){var n;const e=new Set,i=(n=this.view)==null?void 0:n.map;if(!i)return;const r=s=>{var o,a,l,c,u;RWe(s)?((o=s.layers)==null||o.forEach(r),(a=s.tables)==null||a.forEach(r)):LWe(s)?((l=s.sublayers)==null||l.forEach(r),(c=s.subtables)==null||c.forEach(r)):tce(s)?(u=s.sublayers)==null||u.forEach(r):Cg(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return Ce.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e!=null&&e.length?s.filter((a=>e.includes(a.layer))):s).map((async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const u=yv(l)?l.parent:l;if(u!=null){if(n&&r==="layerView"&&!Mce(u)&&Cce(u)){const p=await n.whenLayerView(u).catch((()=>null));if(p)return Ice(p,c,i)}return Ice(u,c,i)}})).filter(rs);return(await Promise.all(o)).filter(rs)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Cg(o)||yv(o))&&a!==null){const l=r1(i,o,(()=>[]));l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Cg(o)||yv(o))&&a!==null){const l=i.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of i){const u=s.get(l);u!==void 0&&o.push(u),s.set(l,{selection:c}),a.push({layer:l,selection:c,...Poe(u!==void 0?u.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=TUe(n,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const a of e){const l=r.get(a),c=yv(a)?a.parent:a;if(c!=null&&Cce(c)){if(Mce(c))continue;i.whenLayerView(c).then((u=>{var p;(p=l==null?void 0:l.highlightHandle)==null||p.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in u&&typeof u.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=u.highlight(l.selection,this.highlightName))})).catch((()=>{var u;(u=l==null?void 0:l.highlightHandle)==null||u.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(Wr);const e=new Set(this.sources.map((i=>yv(i)?i.parent:i)));for(const i of e)Cg(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",(r=>this._onLayerEdit(r,i))))}_onLayerEdit(e,i){if(tce(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach((({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)})),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var o;const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if((o=n==null?void 0:n.updateFeatures)==null||o.forEach((a=>{var p;const l=a.getObjectId()??a.attributes[i.objectIdField];if(l==null||(p=s.find((m=>m.objectId===l)))!=null&&p.error)return;const c=i.findSublayerForFeature(a);if(!Cg(c))return;const u=i.sublayers.find((m=>{var v;return!(!Cg(m)||!((v=this.getSelection(m))!=null&&v.includes(l)))}));Cg(u)&&u!==c&&(this.removeFromSelection(u,[l]),this.appendToSelection(c,[l]))})),r.length){const a=[];r.forEach((({error:l,objectId:c})=>{c!=null&&l==null&&a.push(c)})),i.sublayers.forEach((l=>{Cg(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,a)}))}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!oXe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...Poe(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};d([g()],Wc.prototype,"_selectionMap",void 0),d([g()],Wc.prototype,"_sources",void 0),d([g({readOnly:!0,nonNullable:!0})],Wc.prototype,"selections",null),d([g({readOnly:!0,nonNullable:!0})],Wc.prototype,"count",null),d([g()],Wc.prototype,"view",void 0),d([g({readOnly:!0,nonNullable:!0})],Wc.prototype,"hasSelection",null),d([g()],Wc.prototype,"showHighlight",void 0),d([g()],Wc.prototype,"sources",null),d([g()],Wc.prototype,"highlightName",void 0),Wc=d([G("esri.views.SelectionManager")],Wc);const Mce=t=>{var e;return yv(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},sXe=t=>t.layer!==void 0,Cce=t=>(t==null?void 0:t.when)!==void 0,oXe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},Ice=async(t,e,i={})=>{let r;if(sXe(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new bt({...i,objectIds:e})).then((s=>({data:s,layer:t.layer})))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new bt({...i,objectIds:e})).then((s=>({data:s,layer:n})))}return r},aXe=Wc;let HC=class extends Et.ClonableMixin(ut){constructor(e){super(e),this.accentColor=new Ze([255,127,0]),this.textColor=new Ze([255,255,255])}};d([g({type:Ze,nonNullable:!0})],HC.prototype,"accentColor",void 0),d([g({type:Ze,nonNullable:!0})],HC.prototype,"textColor",void 0),HC=d([G("esri.views.Theme")],HC);const cW=HC;var Ace;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Ace||(Ace={}));const ATe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],PTe={};function kTe(t){return!!PTe[t]}function lXe(t){for(const e of t)if(!kTe(e))return!1;return!0}ATe.forEach((t=>{PTe[t]=!0}));let OTe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)}))}disconnect(){this.inputManager&&this._handlers.forEach(((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)})),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!lXe(s))return s.some(kTe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??Km.DEFAULT;const l=this._createUniqueGroupName(),c=new cXe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const u of s){const p=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Ci((()=>this._removeHandler(l,s)))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},cXe=class extends Os{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,(o=>n(dXe(e,o))));break;case"double-click":this.registerIncoming("double-click",r,(o=>n(pXe(e,o))));break;case"immediate-click":this.registerIncoming("immediate-click",r,(o=>n(fXe(e,o))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,(o=>n(mXe(e,o))));break;case"hold":this.registerIncoming("hold",r,(o=>n(yXe(e,o))));break;case"drag":this.registerIncoming("drag",r,(o=>{const a=this._wrapDrag(o);a&&n(a)}));break;case"key-down":this.registerIncoming("key-down",r,(o=>n(gXe(o))));break;case"key-up":this.registerIncoming("key-up",r,(o=>n(vXe(o))));break;case"pointer-down":this.registerIncoming("pointer-down",r,(o=>n(LM(o,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",r,(o=>n(LM(o,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",r,(o=>n(LM(o,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,(o=>n(bXe(o))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,(o=>n(wXe(o))));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,(o=>n(LM(o,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,(o=>n(LM(o,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",r,(o=>{n(_Xe(o))}));break;case"focus":this.registerIncoming("focus",r,(o=>{n(uXe(o))}));break;case"blur":this.registerIncoming("blur",r,(o=>{n(hXe(o))}))}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:u,timestamp:p}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:i.radius,angle:e1e(i.angle),native:l,timestamp:p,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}};function uXe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function hXe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function dXe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:u,screenPoint:to(s,o),mapPoint:Ck(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function pXe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:Ck(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:p=>e.defer(p),preventDefault:()=>e.preventDefault()}}function fXe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:Ck(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function mXe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:Ck(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function yXe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:Ck(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function Ck(t,e,i){return t.toMap(to(e,i),{exclude:[]})}function gXe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function vXe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function LM(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:u,timestamp:p}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:p,eventId:a,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function bXe(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:p,timestamp:m}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:u,native:n,timestamp:m,eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function wXe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function _Xe(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}var tP,Pce,kce;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(tP||(tP={})),(function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"})(Pce||(Pce={})),(function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"})(kce||(kce={}));const xXe="z",SXe="r",LTe={cancel:"Escape",complete:"Enter"},G8t={...LTe,redo:SXe,undo:xXe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},q8t={toggle:"Control"},H8t={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},W8t={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:q2e,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Z8t=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,(r=>{r.type==="key-down"&&i(r)}))}addToggle(e,i){const r=EXe.fromDefinition(e,i),n=r1(this._bindings,r.key,(()=>[]));return n.push(r),Ci((()=>FJ(n,r)))}register(e,i=Km.WIDGET){return t1([e.on("key-down",(r=>this.dispatch(e.inputManager,r)),i),e.on("key-up",(r=>this.dispatch(e.inputManager,r)),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},EXe=class uW{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new uW(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:o}=e;return new uW(r,n?Array.isArray(n)?n:[n]:[],!!s,!!o,i)}};function TXe(t){return[t.on("before-add",(e=>{const i=e.item;if(i==null||t.includes(i))return Ce.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()})),t.on("after-remove",(e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()}))]}function hW(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(tP.USER)&&t.getEditableFlag(tP.MANAGER)}function $Xe(t){return t.type==="key-down"&&t.key===LTe.cancel}function vd(t){return to(t.x,t.y)}function RTe(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?to(e.clientX-i.left,e.clientY-i.top):to(0,0)}function NTe(t,e){return e instanceof Event?RTe(t,e):vd(e)}function DTe(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let MXe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Lce(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Rce(e))break;const n=vd(e),s=bx(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Rce(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=vd(e);a.x=sa(a.x,0,i.view.width),a.y=sa(a.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=vd(e),s=bx(n,e.pointerType,i.forEachTool);if(CXe(e)||i.forEachTool((c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach((({manipulator:p})=>{p.selected&&(p.selected=!1,u=!0)})),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}})),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),z8(o,r);break}case"click":{const n=vd(e),s=bx(n,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=vd(e),s=bx(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),z8(o,r);break}case"immediate-double-click":{const n=vd(e),s=bx(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&z8(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:vd(i)}),this._grabbedManipulators.forEach((({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)})),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:vd(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=Oce(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=Oce(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach((({tool:n})=>{i.add(n)})),this._hoveredManipulators.forEach((({tool:n})=>{r.add(n)})),e((n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=O6e(s,(({tool:a})=>a===n));n.firstGrabbedManipulator=o!=null?o.manipulator:null}))}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach((({tool:a,manipulator:l,pointerType:c},u)=>{o(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))})),this._draggedManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))})),n&&this._hoveredManipulators.forEach((({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)})),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(to(i.x,i.y),r,i.pointerType,e)}))}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Lce(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(vd(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=bx(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach((({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)}))}};function Oce(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function bx(t,e,i){let r=null;return i((n=>{if(n.manipulators==null||!hW(n))return!1;const s=n.manipulators.intersect(t,e);return s!=null&&(r={tool:n,manipulator:s},!0)})),r}function Lce(t){return t==="mouse"}function Rce(t){return t.pointerType!=="mouse"||t.button===0}function CXe(t){return!!t.native.shiftKey}function z8(t,e){t!=null&&t.consumesClicks&&e()}const Nce="attached",j8="tools",IXe=1e3;let bd=class extends ut{constructor(e){super(e),this._updatingHandles=new c_,this._clock=kT,this._manipulatorState=new MXe,this.tools=new et,this.cursor=null,this._interacting=!1,this._interactingTimeout=IXe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(ATe,(e=>{this._handleInputEvent(e)}),Km.TOOL),...TXe(this.tools),this.tools.on("before-add",(({item:e})=>{this._updateToolEditableFlag(e)})),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((e=>e.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ce.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=hW(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((e=>e.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Wr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Je((()=>{const{state:i}=this.view;return"camera"in i&&i.camera}),(()=>this._forEachManipulator((i=>i.onViewChange())))),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",(i=>this._forEachManipulator((r=>r.onElevationChange(i)))))],Nce):this.addHandles(Je((()=>this.view.extent),(()=>this._forEachManipulator((i=>i.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Nce),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool((i=>{i.manipulators&&i.manipulators.forEach((({manipulator:r})=>e(r,i)))}))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool((n=>{!i&&n.visible&&n.handleInputEvent(r)})),!i&&$Xe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(j8),this._forEachTool((e=>{if(e instanceof ut){const i=Je((()=>[e.cursor,e.visible,e.editable]),(()=>{hW(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(i,j8)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",(i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)})),e.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],j8)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,tP.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool((i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel)).forEach((i=>{this.tools.remove(i)}))}get test(){}};d([g({constructOnly:!0,nonNullable:!0})],bd.prototype,"view",void 0),d([g({value:null})],bd.prototype,"activeTool",null),d([g({readOnly:!0,type:et})],bd.prototype,"tools",void 0),d([g({readOnly:!0})],bd.prototype,"cursor",void 0),d([g({readOnly:!0})],bd.prototype,"updating",null),d([g()],bd.prototype,"_interacting",void 0),d([g({readOnly:!0})],bd.prototype,"interacting",null),bd=d([G("esri.views.ToolViewManager")],bd);const AXe=new Ze("cyan"),PXe=1,kXe=.25,OXe=new Ze("black"),LXe=.4,RXe=.2,X8t=.25,FTe="default",NXe="temporary",DXe=new Ze("yellow");var dW;let Vl=dW=class extends ut{constructor(t){super(t),this.name=FTe,this.color=AXe.clone(),this.haloColor=null,this.haloOpacity=PXe,this.fillOpacity=kXe,this.shadowColor=OXe.clone(),this.shadowOpacity=LXe,this.shadowDifference=RXe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new dW({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};d([g({type:String,constructOnly:!0,nonNullable:!0})],Vl.prototype,"name",void 0),d([g({type:Ze,nonNullable:!0})],Vl.prototype,"color",void 0),d([g({type:Ze})],Vl.prototype,"haloColor",void 0),d([g({nonNullable:!0})],Vl.prototype,"haloOpacity",void 0),d([g({nonNullable:!0})],Vl.prototype,"fillOpacity",void 0),d([g({type:Ze,nonNullable:!0})],Vl.prototype,"shadowColor",void 0),d([g({nonNullable:!0})],Vl.prototype,"shadowOpacity",void 0),d([g({nonNullable:!0})],Vl.prototype,"shadowDifference",void 0),d([g({nonNullable:!0})],Vl.prototype,"haloWidth",void 0),d([g({nonNullable:!0})],Vl.prototype,"haloBlur",void 0),Vl=dW=d([G("esri.views.support.HighlightOptions")],Vl);const qv=Vl;function FXe(){return new(et.ofType(qv))([new qv({name:FTe}),new qv({name:NXe,color:DXe})])}let eS=class extends ut{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":zXe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return jXe[this.deviceType]}};d([g({nonNullable:!0,readOnly:!0})],eS.prototype,"nativeIndex",void 0),d([g({type:String,readOnly:!0})],eS.prototype,"deviceType",null),d([g({type:Number,readOnly:!0})],eS.prototype,"axisThreshold",null),eS=d([G("esri.views.input.gamepad.GamepadInputDevice")],eS);const SQ=eS,zXe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),jXe={standard:.15,spacemouse:.025,unknown:0};let WC=class extends ut{constructor(...e){super(...e),this.devices=new et,this.enabledFocusMode="document"}};d([g({type:et.ofType(SQ),readOnly:!0})],WC.prototype,"devices",void 0),d([g({type:["document","view","none"]})],WC.prototype,"enabledFocusMode",void 0),WC=d([G("esri.views.input.gamepad.GamepadSettings")],WC);const UXe=WC;let TN=class extends ut{constructor(){super(...arguments),this.gamepad=new UXe}};d([g({readOnly:!0})],TN.prototype,"gamepad",void 0),TN=d([G("esri.views.input.Input")],TN);const BXe=TN,zTe=()=>fi.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,U8=()=>g({type:["pan","rotate","zoom","none"],nonNullable:!0});let Gb=class extends ut{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};d([U8()],Gb.prototype,"dragPrimary",void 0),d([U8()],Gb.prototype,"dragSecondary",void 0),d([U8()],Gb.prototype,"dragTertiary",void 0),d([g({type:["zoom","none"],nonNullable:!0})],Gb.prototype,"mouseWheel",void 0),Gb=d([G("esri.views.navigation.NavigationActionMap")],Gb);const EQ=Gb;let Bg=class extends ut{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};d([g({type:Boolean,nonNullable:!0})],Bg.prototype,"enabled",void 0),d([g({type:SQ})],Bg.prototype,"device",void 0),d([g({type:["pan","zoom"],nonNullable:!0})],Bg.prototype,"mode",void 0),d([g({type:["forward-down","forward-up"],nonNullable:!0})],Bg.prototype,"tiltDirection",void 0),d([g({type:Number,nonNullable:!0})],Bg.prototype,"velocityFactor",void 0),Bg=d([G("esri.views.navigation.gamepad.GamepadSettings")],Bg);const jTe=Bg;let Vg=class extends ut{constructor(e){super(e),this.actionMap=new EQ,this.browserTouchPanEnabled=!0,this.gamepad=new jTe,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!zTe()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){Z_e(Ce.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};d([g({type:EQ,nonNullable:!0})],Vg.prototype,"actionMap",void 0),d([g({type:Boolean})],Vg.prototype,"browserTouchPanEnabled",void 0),d([g({type:jTe,nonNullable:!0})],Vg.prototype,"gamepad",void 0),d([g({type:Boolean})],Vg.prototype,"momentumEnabled",void 0),d([g({type:Boolean})],Vg.prototype,"mouseWheelZoomEnabled",null),Vg=d([G("esri.views.navigation.Navigation")],Vg);const u4=Vg;function sVt(t,e,i){const r=UTe(t),n=e,s=VXe(r,n,i);if(r){const o=wa.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new ae("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new ae("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!GXe(t)||s===ol.Unsupported)return new ae("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case ol.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new ae("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case ol.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new ae("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case ol.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new ae("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new ae("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function VXe(t,e,i){if(!Dce(t)||!Dce(e))return ol.Unsupported;if(t==null||e==null)return ol.Ok;if(!i&&t.heightUnit!==e.heightUnit)return ol.Units;if(t.heightModel!==e.heightModel)return ol.HeightModel;switch(t.heightModel){case"gravity-related-height":return ol.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?ol.Ok:ol.CRS;default:return ol.Unsupported}}var ol;function Dce(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function GXe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!GTe(t)}function UTe(t){var r;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?Gp(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&BTe(t)&&t.heightModelInfo?t.heightModelInfo:GTe(t)?wa.deriveUnitFromSR(HXe,t.spatialReference):null}function BTe(t){return"heightModelInfo"in t}function VTe(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function GTe(t){return VTe(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):qTe(t)}function qXe(t){return t.layers!=null||qTe(t)||VTe(t)||BTe(t)}function qTe(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(ol||(ol={}));const HXe=new wa({heightModel:"gravity-related-height"});var S5;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(S5||(S5={}));let pW,B8=null;async function WXe(t){B8||(B8=Re(()=>import("./geometryServiceUtils-Dw286zY-.js"),[]).then((e=>pW=e))),await B8,Rr(t)}async function HTe(t,e,i,r){if(!t)return null;const n=t.spatialReference;return w0()||jh(n,e)?_0(t,e):pW?pW.projectGeometry(t,e,i,r):(await Promise.race([WXe(r),l0(r)]),HTe(t,e,i,r))}async function oVt(t,e){try{return t!=null&&t.spatialReference?await y2e(t,e):null}catch{return null}}let dr=class extends ut{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=UE(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,(r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1}))&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{layers:e==null?void 0:e.layers}],(a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(i)))&&(r=a,!0)}),(a=>"tileInfo"in a));return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,(n=>{var o,a;const s=UTe(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)}),(n=>qXe(n)));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,(r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find((a=>a.spatialReference.equals(this.spatialReference)))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of n)e.push({extent:a,layer:r});return!1}));return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=UE(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:Kj((async s=>{try{const o=await HTe(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(_u(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=YXe(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some((({spatialReference:r})=>r.equals(i)))&&(e=e.filter((({spatialReference:r})=>r.equals(i)))),e.length>1&&e.some((({viewingMode:r})=>r!==S5.Local))&&(e=e.filter((({viewingMode:r})=>r!==S5.Local))),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find((({extent:r})=>i.equals(r.spatialReference)))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new ZXe(r,i);for(const o of e)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch((i=>{io(i)})),"loading"):e.loadStatus:"loaded"}};d([g()],dr.prototype,"required",void 0),d([g({constructOnly:!0})],dr.prototype,"map",void 0),d([g({constructOnly:!0})],dr.prototype,"getSpatialReferenceSupport",void 0),d([g()],dr.prototype,"defaultSpatialReference",void 0),d([g()],dr.prototype,"userSpatialReference",void 0),d([g()],dr.prototype,"sourcePreloadCount",void 0),d([g()],dr.prototype,"priorityCollection",void 0),d([g()],dr.prototype,"requiresExtentInSpatialReference",void 0),d([g()],dr.prototype,"suspended",void 0),d([g({readOnly:!0})],dr.prototype,"ready",null),d([g({readOnly:!0})],dr.prototype,"heightModelInfoReady",null),d([g({readOnly:!0})],dr.prototype,"spatialReference",null),d([g({readOnly:!0})],dr.prototype,"extent",null),d([g({readOnly:!0})],dr.prototype,"heightModelInfo",null),d([g({readOnly:!0})],dr.prototype,"vcsWkid",null),d([g({readOnly:!0})],dr.prototype,"latestVcsWkid",null),d([g({readOnly:!0})],dr.prototype,"viewingMode",null),d([g({readOnly:!0})],dr.prototype,"tileInfo",null),d([g({readOnly:!0})],dr.prototype,"mapCollections",null),d([g({readOnly:!0})],dr.prototype,"_spatialReferenceTask",null),d([g({readOnly:!0})],dr.prototype,"_tileInfoTask",null),d([g({readOnly:!0})],dr.prototype,"_heightModelInfoTask",null),d([g({readOnly:!0})],dr.prototype,"_extentCandidatesTask",null),d([g()],dr.prototype,"_extentTask",null),d([g()],dr.prototype,"_projectExtentTask",void 0),dr=d([G("esri.views.support.DefaultsFromMap")],dr);let ZXe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function YXe(t,e){return t!=null?e!=null?t===e&&t:t:e}function KXe(t){return"tryRecycleWith"in t}let JXe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=gc(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Fh(this._controller.signal,(()=>{var s;(s=this._recycleController)==null||s.abort();const n=new ae("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)}))}tryRecycle(e){var n;if(!this.done||!this.layerView||!KXe(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const o=e[s];if(o.type!==i)continue;const a=this.layerView.tryRecycleWith(o,{signal:r});if(a){e.splice(s,1),this.layer=o;const l=this.layerView,c=l.view;return this.promise=a.then((()=>(Rr(r),o.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),o.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var n,s;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let o,a;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),XXe(r))o=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new ae("layer:view-not-supported","No layerview implementation was found");const u=await this.layerViewImporter.importLayerView(r);Rr(i),o="default"in u?new u.default({layer:r,view:e}):new u({layer:r,view:e})}const l=()=>{a=Wr(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Fh(i,l),Rr(i);try{await o.when()}catch(u){throw l(),u}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new ae("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:e,layerView:o}),e.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:e,error:o}),e.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new ae("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}};function XXe(t){return t.createLayerView!==Br.prototype.createLayerView}function QXe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Gl=class extends ut{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new c_,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,n;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=gc(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(uk(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,p,m;const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=v=>{var w;if(v!=null){for(const _ of v)if(_){if(((w=this.layerViewFilter)==null?void 0:w.call(this,_))===!1)continue;r.add(_);const T=this._layerLayerViewInfoMap.get(_);T&&s?T.start():T||this._recyclingInfoMap.has(_)||n.push(_),"layers"in _&&_.layers&&o(_.layers)}}};for(const v of this._rootCollectionNames)o(pu(this,v));const a=new Array,l=v=>{const w=v.tryRecycle(n);w?(this._recyclingInfoMap.set(v.layer,v),this.notifyChange("updating"),w.then((()=>{this._recyclingInfoMap.delete(v.layer),this._layerLayerViewInfoMap.set(v.layer,v),this._reschedule(),this.notifyChange("updating")})).catch((_=>{io(_)||(this._recyclingInfoMap.delete(v.layer),v.destroy(),this._reschedule(),this.notifyChange("updating"))}))):a.push(v)};for(const v of this._layerLayerViewInfoMap.values())r.has(v.layer)||(this._layerLayerViewInfoMap.delete(v.layer),l(v));for(const v of this._recyclingInfoMap.values())r.has(v.layer)||(this._recyclingInfoMap.delete(v.layer),l(v));for(const v of n)this._createLayerView(v);this._refreshCollections(),a.forEach((v=>v.destroy()));const c=[(u=i==null?void 0:i.ground)==null?void 0:u.layers,(p=i==null?void 0:i.basemap)==null?void 0:p.baseLayers,(m=i==null?void 0:i.basemap)==null?void 0:m.referenceLayers,i==null?void 0:i.layers].filter((v=>!!v));r.forEach((v=>"layers"in v&&c.push(v.layers))),this.addHandles(c.map((v=>this._watchUpdatingTracking.addOnCollectionChange((()=>v),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([wu((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Je((()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]}),(()=>this._reschedule()),Sa)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),C8(this._recyclingInfoMap),C8(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(gr()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||jUe(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),C8(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ae("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some((o=>this.isCreatingLayerViewsForLayer(o,n)))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(pu(this,e),pu(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=pu(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),"layers"in s&&QXe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new JXe(e,this.view,this.layerViewImporter);i.promise.then((()=>this._refreshCollections()),(r=>{r&&(io(r)||r.name==="cancelled:layerview-create")||Ce.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};d([g()],Gl.prototype,"_workPromise",void 0),d([g({readOnly:!0})],Gl.prototype,"_watchUpdatingTracking",void 0),d([g({readOnly:!0})],Gl.prototype,"_layersToLayerViews",null),d([g({readOnly:!0})],Gl.prototype,"_rootCollectionNames",null),d([g({constructOnly:!0})],Gl.prototype,"layerViewFilter",void 0),d([g()],Gl.prototype,"layerViewImporter",void 0),d([g()],Gl.prototype,"supportsGround",void 0),d([g({readOnly:!0})],Gl.prototype,"updating",null),d([g({readOnly:!0})],Gl.prototype,"updatingRemaining",null),d([g({constructOnly:!0})],Gl.prototype,"view",void 0),Gl=d([G("esri.views.support.LayerViewManager")],Gl);const eQe=Gl;let tS=class extends ut{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};d([g()],tS.prototype,"featureTitleFields",void 0),d([g()],tS.prototype,"utilityNetworkFields",void 0),d([g()],tS.prototype,"globalIdField",void 0),tS=d([G("esri.views.support.RequiredFieldsOptions")],tS);const tQe=tS;var ZC,S_;let vt=(S_=class extends Wh.EventedMixin(Mp.EsriPromiseMixin(ut)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new RT,this.updatingHandles=new c_,this.allLayerViews=new Kd({getCollections:()=>{var i,r,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:rQe}),this.analyses=new v5,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new h_,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new et,this.magnifier=new MTe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new BXe,this.navigation=new u4,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new OTe(this),this.persistableViewModels=new et,this.requiredFieldsOptions=new tQe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Je((()=>this.preconditionsReady),(i=>{var n,s;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,ZC.views.add(this)):(this._lockedSpatialReference=null,ZC.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(n=this.toolViewManager)==null||n.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(o){return void queueMicrotask((()=>{this.fatalError=new ae("view:startup-error","View._startup failed",o)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),Up))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,P_((()=>this.ready)))))),this.basemapView=new XJe({view:this}),this.layerViewManager=new eQe({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new bd({view:this}),this.selectionManager=new aXe({view:this}),this.addHandles([$o((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{Ce.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),Je((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),Sa),Je((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),Up),Je((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),Sa)])}destroy(){var e,i;this.destroyed||(ZC.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Lr(this.graphics),this.analyses=Lr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Lr(this.analysisViewManager),this.toolViewManager=Lr(this.toolViewManager),this.layerViewManager=Lr(this.layerViewManager),this.selectionManager=Lr(this.selectionManager),this.basemapView=Lr(this.basemapView),(e=this.groundView)==null||e.destroy(),(i=this.layerViews)==null||i.forEach((r=>r.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Lr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ce.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new dr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??FXe()}set highlights(e){this._set("highlights",sy(e,this._get("highlights"),et.ofType(qv)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ra.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Ce.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),ra.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,n;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,a=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return s&&a&&o&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Kj((l=>HJ(ge("view-readyState-waiting-delay"),null,l))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(n=this._readyStateWaitingTask)!=null&&n.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=UE(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const i=!ks(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??xu}set timeZone(e){this._userTimeZone=e,SGe(e)||Ce.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new cW}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ae("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&Ce.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&($o((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},ZC=S_,S_.views=new et,S_);d([g()],vt.prototype,"_userSpatialReference",void 0),d([g()],vt.prototype,"activeTool",null),d([g({readOnly:!0})],vt.prototype,"allLayerViews",void 0),d([g(Bq(v5,"analyses"))],vt.prototype,"analyses",void 0),d([g()],vt.prototype,"animation",null),d([g()],vt.prototype,"basemapView",void 0),d([g()],vt.prototype,"center",null),d([g()],vt.prototype,"defaultsFromMapSettings",null),d([g()],vt.prototype,"defaultsFromMap",null),d([g()],vt.prototype,"displayFilterEnabled",void 0),d([g({type:Ut})],vt.prototype,"extent",null),d([g()],vt.prototype,"fatalError",void 0),d([g(Bq(h_,"graphics"))],vt.prototype,"graphics",void 0),d([g()],vt.prototype,"groundView",void 0),d([g({readOnly:!0,type:wa})],vt.prototype,"heightModelInfo",null),d([g({type:et.ofType(qv)})],vt.prototype,"highlights",null),d([g({readOnly:!0})],vt.prototype,"interacting",null),d([g({constructOnly:!0})],vt.prototype,"layerViewFilter",void 0),d([g({readOnly:!0})],vt.prototype,"navigating",null),d([g({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],vt.prototype,"preconditionsReady",null),d([g({readOnly:!0})],vt.prototype,"typeSpecificPreconditionsReady",void 0),d([g({type:et,readOnly:!0})],vt.prototype,"layerViews",void 0),d([g()],vt.prototype,"resolution",null),d([g({type:MTe})],vt.prototype,"magnifier",void 0),d([g({value:null,type:lQ})],vt.prototype,"map",null),d([g()],vt.prototype,"padding",void 0),d([g({readOnly:!0})],vt.prototype,"ready",void 0),d([g()],vt.prototype,"_readyStateWaitingTask",void 0),d([g({readOnly:!0})],vt.prototype,"readyState",null),d([g({type:tt})],vt.prototype,"spatialReference",null),d([g()],vt.prototype,"stationary",null),d([g({readOnly:!0})],vt.prototype,"supportsGround",void 0),d([g({type:Wi})],vt.prototype,"timeExtent",null),d([g({type:String,nonNullable:!0})],vt.prototype,"timeZone",null),d([g()],vt.prototype,"tools",null),d([g()],vt.prototype,"toolViewManager",void 0),d([g({readOnly:!0})],vt.prototype,"type",void 0),d([g({type:Number})],vt.prototype,"scale",void 0),d([g({readOnly:!0})],vt.prototype,"updating",void 0),d([g({readOnly:!0})],vt.prototype,"initialExtentRequired",void 0),d([g({readOnly:!0})],vt.prototype,"initialExtent",null),d([g()],vt.prototype,"cursor",null),d([g({readOnly:!0})],vt.prototype,"input",void 0),d([g({type:u4,nonNullable:!0})],vt.prototype,"navigation",void 0),d([g()],vt.prototype,"layerViewManager",void 0),d([g()],vt.prototype,"analysisViewManager",void 0),d([g()],vt.prototype,"selectionManager",void 0),d([g()],vt.prototype,"width",void 0),d([g()],vt.prototype,"height",void 0),d([g({readOnly:!0})],vt.prototype,"resizing",void 0),d([g({value:null,readOnly:!0})],vt.prototype,"size",null),d([g({readOnly:!0})],vt.prototype,"suspended",void 0),d([g({readOnly:!0})],vt.prototype,"viewEvents",void 0),d([g({readOnly:!0})],vt.prototype,"persistableViewModels",void 0),d([g()],vt.prototype,"_isValid",void 0),d([g()],vt.prototype,"_readyCycleForced",void 0),d([g()],vt.prototype,"_lockedSpatialReference",void 0),d([g()],vt.prototype,"_userTimeZone",void 0),d([g()],vt.prototype,"_lockedTimeZone",void 0),d([g()],vt.prototype,"_userTimeExtent",void 0),d([g()],vt.prototype,"_lockedTimeExtent",void 0),d([g({type:cW})],vt.prototype,"theme",void 0),d([g({readOnly:!0,type:cW})],vt.prototype,"effectiveTheme",null),vt=ZC=d([G("esri.views.View")],vt);const V8=globalThis.$arcgis;V8&&!V8.views&&Object.defineProperty(V8,"views",{configurable:!1,enumerable:!0,writable:!1,value:vt.views});const iQe=vt;function rQe(t){return t.layerViews}function P2(t,e){return t[0]=e[0],t[1]=e[1],t}function Dn(t,e,i){return t[0]=e,t[1]=i,t}function WTe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function iP(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function ZTe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function YTe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function nQe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function sQe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function oQe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function aQe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function lQe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ik(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function cQe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function h4(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function E5(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function T5(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function KTe(t){const e=t[0],i=t[1];return e*e+i*i}function JTe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function uQe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function fW(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function XTe(t,e){return t[0]*e[0]+t[1]*e[1]}function QTe(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function hQe(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function dQe(t,e=1){const i=2*i4()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function pQe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Xo(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function fQe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function mQe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function yQe(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function gQe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function vQe(t){return"vec2("+t[0]+", "+t[1]+")"}function bQe(t,e){return t[0]===e[0]&&t[1]===e[1]}function wQe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=Oa();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function _Qe(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const xQe=T5,TQ=iP,SQe=ZTe,EQe=YTe,TQe=h4,$Qe=E5,MQe=KTe;Object.freeze(Object.defineProperty({__proto__:null,add:WTe,angle:gQe,ceil:nQe,copy:P2,cross:QTe,dist:TQe,distance:h4,div:EQe,divide:YTe,dot:XTe,equals:wQe,exactEquals:bQe,floor:sQe,inverse:uQe,len:xQe,length:T5,lerp:hQe,max:aQe,min:oQe,mul:SQe,multiply:ZTe,negate:JTe,normalize:fW,projectAndScale:_Qe,random:dQe,rotate:yQe,round:lQe,scale:Ik,scaleAndAdd:cQe,set:Dn,sqrDist:$Qe,sqrLen:MQe,squaredDistance:E5,squaredLength:KTe,str:vQe,sub:TQ,subtract:iP,transformMat2:pQe,transformMat2d:Xo,transformMat3:fQe,transformMat4:mQe},Symbol.toStringTag,{value:"Module"}));function bn(){return[0,0]}function CQe(t){return[t[0],t[1]]}function Ak(t,e){return[t,e]}function IQe(t,e){return[t,e]}function AQe(t,e=bn()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function e$e(){return bn()}function t$e(){return Ak(1,1)}function i$e(){return Ak(1,0)}function r$e(){return Ak(0,1)}const PQe=e$e(),kQe=t$e(),OQe=i$e(),LQe=r$e();Object.freeze(Object.defineProperty({__proto__:null,ONES:kQe,UNIT_X:OQe,UNIT_Y:LQe,ZEROS:PQe,clone:CQe,create:bn,freeze:IQe,fromArray:AQe,fromValues:Ak,ones:t$e,unitX:i$e,unitY:r$e,zeros:e$e},Symbol.toStringTag,{value:"Module"}));function RQe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Pk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function NQe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function $Q(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function DQe(t){return t[0]*t[3]-t[1]*t[2]}function Jd(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1],p=i[2],m=i[3],v=i[4],w=i[5];return t[0]=r*c+s*u,t[1]=n*c+o*u,t[2]=r*p+s*m,t[3]=n*p+o*m,t[4]=r*v+s*w+a,t[5]=n*v+o*w+l,t}function u0(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),u=Math.cos(i);return t[0]=r*u+s*c,t[1]=n*u+o*c,t[2]=r*-c+s*u,t[3]=n*-c+o*u,t[4]=a,t[5]=l,t}function kk(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function Lp(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=n*c+o*u+l,t}function d4(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function n$e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function MQ(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function FQe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function zQe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function jQe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function s$e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function UQe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function BQe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function VQe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function GQe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],p=e[3],m=e[4],v=e[5],w=Oa();return Math.abs(i-l)<=w*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=w*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-u)<=w*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-p)<=w*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-m)<=w*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=w*Math.max(1,Math.abs(a),Math.abs(v))}const qQe=Jd,HQe=s$e;Object.freeze(Object.defineProperty({__proto__:null,add:jQe,copy:RQe,determinant:DQe,equals:GQe,exactEquals:VQe,frob:zQe,fromRotation:d4,fromScaling:n$e,fromTranslation:MQ,identity:Pk,invert:$Q,mul:qQe,multiply:Jd,multiplyScalar:UQe,multiplyScalarAndAdd:BQe,rotate:u0,scale:kk,set:NQe,str:FQe,sub:HQe,subtract:s$e,translate:Lp},Symbol.toStringTag,{value:"Module"}));function Rp(){return[1,0,0,1,0,0]}function WQe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function ZQe(t,e,i,r,n,s){return[t,e,i,r,n,s]}const YQe=Rp();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:YQe,clone:WQe,create:Rp,fromValues:ZQe},Symbol.toStringTag,{value:"Module"}));const iR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new en({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator}),minus180Line:new en({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new en({paths:[[[180,-180],[180,180]]],spatialReference:tt.WGS84}),minus180Line:new en({paths:[[[-180,-180],[-180,180]]],spatialReference:tt.WGS84})}};function Vw(t,e){return Math.ceil((t-e)/(2*e))}function o$e(t,e){const i=aA(t);for(const r of i)for(const n of r)n[0]+=e;return t}function aA(t){return zn(t)?t.rings:t.paths}function p4(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Ok(t){return typeof t=="string"?qn(t):le(t)}function f4(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map((o=>f4(o)));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function KQe(t,e){var i;return t?e&&bX(t)?e:vX(t)??((i=Rt==null?void 0:Rt.findCredential(t))==null?void 0:i.token):null}async function dVt(t,e,i){const r=KQe(t,e);if(r)return r;!Rt&&fi.request.useIdentity&&await Re(()=>import("./IdentityManager-CX0dRFKN.js"),[]);const n=await Rt.getCredential(t,i);return n==null?void 0:n.token}async function JQe(t,e,i,r){const n=Ok(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:QD(s),target:JSON.stringify({geometryType:jT(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await ni(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map((u=>{const p=Hp(u);return p.spatialReference=s,p}))}}function XQe(t){return{geometryType:jT(t[0]),geometries:t.map((e=>e.toJSON()))}}function a$e(t,e,i){const r=YVe(e);return t.map((n=>{const s=r.fromJSON(n);return s.spatialReference=i,s}))}async function QQe(t,e,i){const r=typeof t=="string"?qn(t):t,n=e[0].spatialReference,s=jT(e[0]),o={...i,query:{...r.query,f:"json",sr:QD(n),geometries:JSON.stringify(XQe(e))}},{data:a}=await ni(r.path+"/simplify",o);return a$e(a.geometries,s,n)}const l$e=()=>Ce.getLogger("esri.geometry.support.normalizeUtils");function eet(t){return t.type==="polygon"}function tet(t){return t[0].type==="polygon"}function iet(t){return t[0].type==="polyline"}function Fce(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function ret(t,e){if(!(t instanceof en||t instanceof or)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw l$e().error(n),new ae("internal:geometry",n)}const i=aA(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],u=n[o+1][1],p=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),m=(u-l)/p,v=(c-a)/p,w=p/e;if(w>1){for(let I=1;I<=w-1;I++){const A=I*e,k=v*A+a,R=m*A+l;s.push([k,R])}const _=(p+Math.floor(w-1)*e)/2,T=v*_+a,$=m*_+l;s.push([T,$])}s.push([c,u])}}return eet(t)?new or({rings:r,spatialReference:t.spatialReference}):new en({paths:r,spatialReference:t.spatialReference})}function zce(t,e,i){if(e){const r=ret(t,1e6);t=YS(r,!0)}return i&&(t=o$e(t,i)),t}function jce(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Vw(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=Vw(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=Vw(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=Vw(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function net(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=aA(s);for(let a=0;a<o.length;a++){const l=o[a];l.some((c=>{if(c[0]<180)return!0;{let u=0;for(let m=0;m<l.length;m++){const v=l[m][0];u=v>u?v:u}u=Number(u.toFixed(9));const p=-360*Vw(u,180);for(let m=0;m<l.length;m++){const v=s.getPoint(a,m);s.setPoint(a,m,v.clone().offset(p,0))}return!0}}))}if(n===i){if(tet(t))for(const a of aA(s))t[n]=t[n].addRing(a);else if(iet(t))for(const a of aA(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function set(t,e,i){if(!Array.isArray(t))return set([t],e);e&&typeof e!="string"&&l$e().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??fi.geometryServiceUrl;let n,s,o,a,l,c,u,p,m=0;const v=[],w=[];for(const k of t)if(k!=null)if(n||(n=k.spatialReference,s=ka(n),o=n.isWebMercator,c=o?102100:4326,a=iR[c].maxX,l=iR[c].minX,u=iR[c].plus180Line,p=iR[c].minus180Line),s)if(k.type==="mesh")w.push(k);else if(k.type==="point")w.push(jce(k.clone(),a,l));else if(k.type==="multipoint"){const R=k.clone();R.points=R.points.map((F=>jce(F,a,l))),w.push(R)}else if(k.type==="extent"){const R=k.clone()._normalize(!1,!1,s);w.push(R.rings?new or(R):R)}else if(k.extent){const R=k.extent,F=Vw(R.xmin,l)*(2*a);let B=F===0?k.clone():o$e(k.clone(),F);R.offset(F,0);let{xmin:q,xmax:Y}=R;q=Number(q.toFixed(9)),Y=Number(Y.toFixed(9)),R.intersects(u)&&Y!==a?(m=Y>m?Y:m,B=zce(B,o),v.push(B),w.push("cut")):R.intersects(p)&&q!==l?(m=Y*(2*a)>m?Y*(2*a):m,B=zce(B,o,360),v.push(B),w.push("cut")):w.push(B)}else w.push(k.clone());else w.push(k);else w.push(k);let _=Vw(m,a),T=-90;const $=_,I=new en;for(;_>0;){const k=360*_-180;I.addPath([[k,T],[k,-1*T]]),T*=-1,_--}if(v.length>0&&$>0){const k=net(v,await JQe(r,v,I,i)),R=[],F=[];for(let Y=0;Y<w.length;Y++){const J=w[Y];if(J!=="cut")F.push(J);else{const Q=k.shift(),te=t[Y];te!=null&&te.type==="polygon"&&te.rings&&te.rings.length>1&&Q.rings.length>=te.rings.length?(R.push(Q),F.push("simplify")):F.push(o?Ym(Q):Q)}}if(!R.length)return F;const B=await QQe(r,R,i),q=[];for(let Y=0;Y<F.length;Y++){const J=F[Y];J!=="simplify"?q.push(J):q.push(o?Ym(B.shift()):B.shift())}return q}const A=[];for(let k=0;k<w.length;k++){const R=w[k];if(R!=="cut")A.push(R);else{const F=v.shift();A.push(o===!0?Ym(F):F)}}return A}function oet(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&ka(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=n||o>s||l<r||c>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=Fce(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=Fce(t.paths);break;case"multipoint":a=t.points}const u=e.clone();for(let p=0;p<a.length;p++){let m=a[p][0];m<0?(m+=n,c=Math.max(m,c)):(m-=n,l=Math.min(m,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=n,u.xmax-=n,u):e}function CQ(t,e,i){const r=ka(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o));let c=t+(a-l)*o;const u=c-e;return u>s?c-=o:u<n&&(c+=o),c}function pVt(t,e){const i=ka(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}const c$e=96,u$e=39.37,aet=180/Math.PI;function h$e(t){return t.wkid?t:t.spatialReference||tt.WGS84}function IQ(t,e){return e.type?Dn(t,e.x,e.y):P2(t,e)}function d$e(t){return _c(t)}function m4(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const a=NT(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,n=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*yet(t.spatialReference)}async function YC(t,e,i,r){var a,l,c;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(et.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const u=t.every((v=>"attributes"in v)),p=t.some((v=>!v.geometry));let m=t;if(u&&p&&e&&e.allLayerViews){const v=new Map;for(const $ of t){const I=$.layer,A=v.get(I)||[],k=$.attributes[I.objectIdField];k!=null&&A.push(k),v.set(I,A)}const w=[];v.forEach((($,I)=>{var k;const A=(k=e.allLayerViews)==null?void 0:k.find((R=>R.layer.id===I.id));if(A&&"queryFeatures"in A){const R=I.createQuery();R.objectIds=$,R.returnGeometry=!0,w.push(A.queryFeatures(R))}}));const _=await Promise.all(w),T=[];for(const $ of _)if($&&$.features&&$.features.length)for(const I of $.features)I.geometry!=null&&T.push(I.geometry);m=T}for(const v of m)r=await YC(v,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new gt(t);else if(t instanceof Js)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const u=t.layer,p=(a=e.allLayerViews)==null?void 0:a.find((m=>m.layer.id===u.id));if(p&&"queryFeatures"in p){const m=u.createQuery();m.objectIds=[t.attributes[u.objectIdField]],m.returnGeometry=!0;const v=await p.queryFeatures(m);n=(c=(l=v==null?void 0:v.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Ut({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=oet(n);break;default:s=n.extent}if(!s)return null;w0()||jh(s.spatialReference,i)||await l0();const o=_0(s,i);if(!o)return null;if(r){const u=o.center,p=u.clone();p.x=CQ(u.x,r.center.x,i),p.x!==u.x&&o.centerAt(p),r=r.union(o)}else r=o;return r}function cet(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every((i=>"layer"in i))){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function Uce(t,e){const i=h$e(t);return ks(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:_0(t,e)}async function uet(t,e){var T;if(!t||!e)return new Ps({targetGeometry:new gt,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof Ps?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:t instanceof Ut?c=t:t instanceof Js?c=await YC(t,e,i):t&&(c=await YC(t.center,e,i)||await YC(t.target,e,i)||await YC(t,e,i)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=h$e(e.spatialReference||e.extent||c)),w0()||ks(c.spatialReference,i)||jh(c.spatialReference,i)||await l0();const u=Uce(c,i),p="center"in u?u.center:u;e.pickClosestTarget!==!1&&p.type==="point"&&((T=s.targetGeometry)==null?void 0:T.type)==="point"&&(p.x=CQ(p.x,s.targetGeometry.x,p.spatialReference));let m=0;l?m=l.rotation:t.hasOwnProperty("rotation")?m=t.rotation:s&&(m=s.rotation);let v=0;v=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:m4(Uce(c.extent,i),a,m);const w=cet(t.target??t);w&&(w.min&&w.min<v?v=w.min:w.max&&w.max>v&&(v=w.max));let _=new Ps({targetGeometry:p,scale:v,rotation:m});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function na(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function het(t,e,i){return i?Dn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Ik(t,e,.5)}const det=(function(){const t=bn();return function(e,i,r){const n=i.targetGeometry;IQ(t,n);const s=.5*ZT(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}})();function pet(t,e,i,r,n){var s;return mW(t,e,i.center),t.scale=m4(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function fet(t,e,i,r){return kQ(t,e,i,r),$Q(t,t)}const p$e=(function(){const t=bn();return function(e,i,r){return TQ(e,get(e,i),het(t,i,r))}})(),met=(function(){const t=Rp(),e=bn();return function(i,r,n,s){const o=ZT(r),a=AQ(r);return Dn(e,o,o),n$e(t,e),u0(t,t,a),Lp(t,t,p$e(e,n,s)),Lp(t,t,[0,s.top-s.bottom]),Dn(i,t[4],t[5])}})();function ZT(t){var e;return t.scale*f$e((e=t.targetGeometry)==null?void 0:e.spatialReference)}function f$e(t){return uc(t)?1/(d$e(t)*u$e*c$e):1}function AQ(t){return aQ(t.rotation)||0}function yet(t){return uc(t)?d$e(t)*u$e*c$e:1}function get(t,e){return Ik(t,e,.5)}const PQ=(function(){const t=bn(),e=bn(),i=bn();return function(r,n,s,o,a,l){return JTe(t,n),Ik(e,s,.5*l),Dn(i,1/o*l,-1/o*l),MQ(r,e),a&&u0(r,r,a),kk(r,r,i),Lp(r,r,t),r}})(),kQ=(function(){const t=bn();return function(e,i,r,n){const s=ZT(i),o=AQ(i);return IQ(t,i.targetGeometry),PQ(e,t,r,s,o,n)}})(),vet=(function(){const t=bn();return function(e,i,r,n){const s=ZT(i);return IQ(t,i.targetGeometry),PQ(e,t,r,s,0,n)}})();function m$e(t){const e=ka(t);return e?e.valid[1]-e.valid[0]:0}function bet(t,e){return Math.round(m$e(t)/e)}const wet=(function(){const t=bn(),e=bn(),i=[0,0,0];return function(r,n,s){iP(t,r,n),fW(t,t),iP(e,r,s),fW(e,e),QTe(i,t,e);let o=Math.acos(XTe(t,e)/(T5(t)*T5(e)))*aet;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),_et=(function(){const t=bn();return function(e,i,r,n){const s=e.targetGeometry;return na(e,i),met(t,i,r,n),s.x+=t[0],s.y+=t[1],e}})(),mW=function(t,e,i){na(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},xet=(function(){const t=bn();return function(e,i,r,n,s){s||(s="center"),TQ(t,r,n),Ik(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":Dn(t,0,0);break;case"left":Dn(t,-o,0);break;case"top":Dn(t,0,a);break;case"right":Dn(t,o,0);break;case"bottom":Dn(t,0,-a);break;case"top-left":Dn(t,-o,a);break;case"bottom-left":Dn(t,-o,-a);break;case"top-right":Dn(t,o,a);break;case"bottom-right":Dn(t,o,-a)}return y4(e,i,t),e}})();function fVt(t,e,i){return na(t,e),t.rotation+=i,t}function Eet(t,e,i){return na(t,e),t.rotation=i,t}const Tet=(function(){const t=bn();return function(e,i,r,n,s){return na(e,i),isNaN(r)||r===0||(g$e(t,n,i,s),e.scale=i.scale*r,v$e(t,t,e,s),y4(e,e,Dn(t,t[0]-n[0],n[1]-t[1]))),e}})();function Bce(t,e,i){return na(t,e),t.scale=i,t}const y$e=(function(){const t=bn();return function(e,i,r,n,s,o){return na(e,i),isNaN(r)||r===0||(g$e(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,v$e(t,t,e,o),y4(e,e,Dn(t,t[0]-s[0],s[1]-t[1]))),e}})(),mVt=(function(){const t=bn(),e=bn();return function(i,r,n,s,o,a,l){return p$e(e,a,l),WTe(t,o,e),s?y$e(i,r,n,s,t,a):Tet(i,r,n,t,a)}})(),g$e=(function(){const t=Rp();return function(e,i,r,n){return Xo(e,i,fet(t,r,n,1))}})(),v$e=(function(){const t=Rp();return function(e,i,r,n){return Xo(e,i,kQ(t,r,n,1))}})(),y4=(function(){const t=bn(),e=Rp();return function(i,r,n){na(i,r);const s=ZT(r),o=i.targetGeometry;return d4(e,AQ(r)),kk(e,e,Ak(s,s)),Xo(t,n,e),o.x+=t[0],o.y+=t[1],i}})();function Jm(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function $et(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Met(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function b$e(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function w$e(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)b$e(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:$et,create:Jm,fromValues:Met,transform:b$e,transformMany:w$e},Symbol.toStringTag,{value:"Module"}));function Cet(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Iet(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _$e(t,e,i,r,n,s,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function x$e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Aet(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Pet(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=u*o-a*c,m=-u*s+a*l,v=c*s-o*l;let w=i*p+r*m+n*v;return w?(w=1/w,t[0]=p*w,t[1]=(-u*r+n*c)*w,t[2]=(a*r-n*o)*w,t[3]=m*w,t[4]=(u*i-n*l)*w,t[5]=(-a*i+n*s)*w,t[6]=v*w,t[7]=(-c*i+r*l)*w,t[8]=(o*i-r*s)*w,t):null}function ket(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=n*c-r*u,t[2]=r*a-n*o,t[3]=a*l-s*u,t[4]=i*u-n*l,t[5]=n*s-i*a,t[6]=s*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*s,t}function Oet(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+i*(-c*n+o*a)+r*(l*n-s*a)}function OQ(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=e[8],m=i[0],v=i[1],w=i[2],_=i[3],T=i[4],$=i[5],I=i[6],A=i[7],k=i[8];return t[0]=m*r+v*o+w*c,t[1]=m*n+v*a+w*u,t[2]=m*s+v*l+w*p,t[3]=_*r+T*o+$*c,t[4]=_*n+T*a+$*u,t[5]=_*s+T*l+$*p,t[6]=I*r+A*o+k*c,t[7]=I*n+A*a+k*u,t[8]=I*s+A*l+k*p,t}function yW(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=e[8],m=i[0],v=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=m*r+v*o+c,t[7]=m*n+v*a+u,t[8]=m*s+v*l+p,t}function S$e(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],p=e[8],m=Math.sin(i),v=Math.cos(i);return t[0]=v*r+m*o,t[1]=v*n+m*a,t[2]=v*s+m*l,t[3]=v*o-m*r,t[4]=v*a-m*n,t[5]=v*l-m*s,t[6]=c,t[7]=u,t[8]=p,t}function Let(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function Ret(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function Net(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Det(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Fet(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function zet(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jet(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,u=r*o,p=r*a,m=n*o,v=n*a,w=n*l,_=s*o,T=s*a,$=s*l;return t[0]=1-p-w,t[3]=u-$,t[6]=m+T,t[1]=u+$,t[4]=1-c-w,t[7]=v-_,t[2]=m-T,t[5]=v+_,t[8]=1-c-p,t}function Uet(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10],p=u*o-a*c,m=-u*s+a*l,v=c*s-o*l,w=i*p+r*m+n*v;if(!w)return null;const _=1/w;return t[0]=p*_,t[1]=(-u*r+n*c)*_,t[2]=(a*r-n*o)*_,t[3]=m*_,t[4]=(u*i-n*l)*_,t[5]=(-a*i+n*s)*_,t[6]=v*_,t[7]=(-c*i+r*l)*_,t[8]=(o*i-r*s)*_,t}function Bet(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=e[9],m=e[10],v=e[11],w=e[12],_=e[13],T=e[14],$=e[15],I=i*a-r*o,A=i*l-n*o,k=i*c-s*o,R=r*l-n*a,F=r*c-s*a,B=n*c-s*l,q=u*_-p*w,Y=u*T-m*w,J=u*$-v*w,Q=p*T-m*_,te=p*$-v*_,re=m*$-v*T;let ee=I*re-A*te+k*Q+R*J-F*Y+B*q;return ee?(ee=1/ee,t[0]=(a*re-l*te+c*Q)*ee,t[1]=(l*J-o*re-c*Y)*ee,t[2]=(o*te-a*J+c*q)*ee,t[3]=(n*te-r*re-s*Q)*ee,t[4]=(i*re-n*J+s*Y)*ee,t[5]=(r*J-i*te-s*q)*ee,t[6]=(_*B-T*F+$*R)*ee,t[7]=(T*k-w*B-$*A)*ee,t[8]=(w*F-_*k+$*I)*ee,t):null}function Vet(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Get(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function qet(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Het(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function E$e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function Wet(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function Zet(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Yet(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Ket(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],p=e[0],m=e[1],v=e[2],w=e[3],_=e[4],T=e[5],$=e[6],I=e[7],A=e[8],k=Oa();return Math.abs(i-p)<=k*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-m)<=k*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-v)<=k*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-w)<=k*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-_)<=k*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-T)<=k*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-$)<=k*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(c-I)<=k*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-A)<=k*Math.max(1,Math.abs(u),Math.abs(A))}function Jet(t){const e=Oa(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+u*u))<=e}const Xet=OQ,Qet=E$e;Object.freeze(Object.defineProperty({__proto__:null,add:Het,adjoint:ket,copy:Iet,determinant:Oet,equals:Ket,exactEquals:Yet,frob:qet,fromMat2d:zet,fromMat4:Cet,fromQuat:jet,fromRotation:Det,fromScaling:Fet,fromTranslation:Net,identity:x$e,invert:Pet,isOrthoNormal:Jet,mul:Xet,multiply:OQ,multiplyScalar:Wet,multiplyScalarAndAdd:Zet,normalFromMat4:Bet,normalFromMat4Legacy:Uet,projection:Vet,rotate:S$e,scale:Let,scaleByVec2:Ret,set:_$e,str:Get,sub:Qet,subtract:E$e,translate:yW,transpose:Aet},Symbol.toStringTag,{value:"Module"}));function $N(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function ett(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ttt(t,e,i,r,n,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:ett,create:$N,fromValues:ttt},Symbol.toStringTag,{value:"Module"}));function rP(){return new Float32Array(2)}function itt(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function q_(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function T$e(){return rP()}function $$e(){return q_(1,1)}function M$e(){return q_(1,0)}function C$e(){return q_(0,1)}const rtt=T$e(),ntt=$$e(),stt=M$e(),ott=C$e();Object.freeze(Object.defineProperty({__proto__:null,ONES:ntt,UNIT_X:stt,UNIT_Y:ott,ZEROS:rtt,clone:itt,create:rP,fromValues:q_,ones:$$e,unitX:M$e,unitY:C$e,zeros:T$e},Symbol.toStringTag,{value:"Module"}));function att(t){return t instanceof Float32Array&&t.length>=2}function ltt(t){return Array.isArray(t)&&t.length>=2}function G8(t){return att(t)||ltt(t)}var gW;const Cf=[0,0];let Yf=gW=class extends ve{constructor(t){super(t),this._viewpoint2D={center:bn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ut,this.id=0,this.inverseTransform=Rp(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Rp(),this.transformNoRotation=Rp(),this.displayMat3=$N(),this.displayViewMat3=$N(),this.viewMat3=$N(),this.viewMat2d=Jm(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=na(i,t.viewpoint),this._set("size",P2(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new gW({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return G8(e)?Xo(t,e,this.inverseTransform):(Cf[0]=e,Cf[1]=i,Xo(t,Cf,this.inverseTransform))}toScreen(t,e,i){return G8(e)?Xo(t,e,this.transform):(Cf[0]=e,Cf[1]=i,Xo(t,Cf,this.transform))}toScreenNoRotation(t,e,i){return G8(e)?Xo(t,e,this.transformNoRotation):(Cf[0]=e,Cf[1]=i,Xo(t,Cf,this.transformNoRotation))}wrapMapCoordinate(t,e){P2(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=m$e(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=CQ(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return PQ(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Ps({targetGeometry:new gt(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=ZT(o),this.rotation=r,this.scale=i,this.spatialReference=e,P2(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;_$e(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=x$e(this.viewMat3),u=q_(s[0]/2,s[1]/2),p=q_(-s[0]/2,-s[1]/2),m=aQ(r);yW(c,c,u),S$e(c,c,m),yW(c,c,p),OQ(this.displayViewMat3,this.displayMat3,c);const v=MQ(this.viewMat2d,u);return u0(v,v,m),Lp(v,v,p),det(this.extent,o,s),kQ(this.transform,o,s,n),$Q(this.inverseTransform,this.transform),vet(this.transformNoRotation,o,s,n),this.worldScreenWidth=bet(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};d([g({readOnly:!0})],Yf.prototype,"id",void 0),d([g({value:1,json:{write:!0}})],Yf.prototype,"pixelRatio",null),d([g({json:{write:!0}})],Yf.prototype,"size",null),d([g()],Yf.prototype,"spatialReference",void 0),d([g({type:Ps,json:{write:!0}})],Yf.prototype,"viewpoint",null),d([g({readOnly:!0})],Yf.prototype,"visibleArea",null),Yf=gW=d([G("esri.views.2d.ViewState")],Yf);const Vce=Yf;var vW,bW;let xm=vW=class extends ut{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new vW({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};d([g()],xm.prototype,"left",void 0),d([g()],xm.prototype,"top",void 0),d([g()],xm.prototype,"right",void 0),d([g()],xm.prototype,"bottom",void 0),xm=vW=d([G("esri.views.2d.PaddedViewState.Padding")],xm);let iS=bW=class extends Vce{constructor(...t){super(...t),this.paddedViewState=new Vce,this._updateContent=(()=>{const e=bn();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Dn(e,r.left+r.right,r.top+r.bottom),iP(e,i,e),P2(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Je((()=>[this.size,this.padding]),(()=>this._updateContent()),Up)),this.padding=new xm,this.size=[0,0]}set padding(t){this._set("padding",t||new xm)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=_et(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new bW({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};d([g()],iS.prototype,"paddedViewState",void 0),d([g({type:xm})],iS.prototype,"padding",null),d([g()],iS.prototype,"viewpoint",null),iS=bW=d([G("esri.views.2d.PaddedViewState")],iS);const LQ=iS;var qo;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(qo||(qo={}));const I$e=Symbol("Yield");let ctt=class{constructor(){this._tasks=new Array,this._numPendingTasks=I_(0),this._running=I_(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return I$e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return new Promise(((n,s)=>{this._tasks.push(new Gce(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(e,i,r){return new Promise(((n,s)=>{this._tasks.unshift(new Gce(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const n=_u(i.signal);if(n&&!i.abortCallback)i.reject(gr());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,gr()):i.callback(e);ef(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=gr();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},Gce=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},KC=class extends ut{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};d([g()],KC.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),d([g()],KC.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),KC=d([G("esri.views.support.debugFlags")],KC);const utt=new KC;function htt(){return new $5.Scheduler}var ti;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(ti||(ti={}));const tu=0,qce=new Map([[ti.RESOURCE_CONTROLLER_IMMEDIATE,tu],[ti.RESOURCE_CONTROLLER,4],[ti.SLIDE,tu],[ti.STREAM_DATA_LOADER,tu],[ti.ELEVATION_QUERY,tu],[ti.TERRAIN_SURFACE,1],[ti.SURFACE_GEOMETRY_UPDATES,1],[ti.LOD_RENDERER,2],[ti.GRAPHICS_CORE,2],[ti.I3S_CONTROLLER,2],[ti.POINT_CLOUD_LAYER,2],[ti.FEATURE_TILE_FETCHER,2],[ti.CLOUDS_GENERATOR,2],[ti.OVERLAY,4],[ti.OVERLAY_RENDERER,4],[ti.STAGE,4],[ti.GRAPHICS_DECONFLICTOR,4],[ti.FILTER_VISIBILITY,4],[ti.SCALE_VISIBILITY,4],[ti.FRUSTUM_VISIBILITY,4],[ti.POINT_OF_INTEREST_FREQUENT,6],[ti.POINT_OF_INTEREST_INFREQUENT,30],[ti.LABELER,8],[ti.FEATURE_QUERY_ENGINE,8],[ti.FEATURE_TILE_TREE,16],[ti.FEATURE_TILE_TREE_ACTIVE,tu],[ti.ELEVATION_ALIGNMENT,12],[ti.ELEVATION_ALIGNMENT_SCENE,14],[ti.TEXT_TEXTURE_ATLAS,12],[ti.TEXTURE_UNLOAD,12],[ti.LINE_OF_SIGHT_TOOL,16],[ti.LINE_OF_SIGHT_TOOL_INTERACTIVE,tu],[ti.SNAPPING,tu],[ti.SHADOW_ACCUMULATOR,30],[ti.MAPVIEW_FETCH_QUEUE,tu],[ti.MAPVIEW_LAYERVIEW_UPDATE,2],[ti.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,tu]]);function Hce(t){return qce.has(t)?qce.get(t):typeof t=="number"?t:1}const dtt=6.5,Wce=1,ptt=30,ftt=1e3/30,mtt=100,Zce=.9;var $5,fb;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((s=>s.needsUpdate))}constructor(){this._updating=I_(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new zI("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=qo.INTERACTING,this._tasks=new jI,this._runQueue=new jI,this._load=0,this._idleStateCallbacks=new jI,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Je((()=>utt.SCHEDULER_LOG_SLOW_TASKS),(s=>this._debug=s),rn);for(const s of Object.keys(ti))this.performanceInfo.tasks.set(ti[s],new zI(ti[s]))}destroy(){this._tasks.toArray().forEach((s=>s.remove())),this._tasks.clear(),Wr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(s,o){const a=new i(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new zI(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===qo.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===qo.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==qo.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((o=>o.idleEnd()))))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=dtt,a=s.frameDuration,l=Wce;switch(this.state){case qo.IDLE:o=0,a=Math.max(mtt,s.frameDuration),l=ptt;break;case qo.INTERACTING:a=Math.max(ftt,s.frameDuration);case qo.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==qo.IDLE&&a<Wce&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case qo.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((s=>s.idleBegin()))),this._runIdle();break;case qo.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll((o=>{o.name===s&&o.setPriority(s)}))}_getState(s){if(this._runQueue.some((a=>a.name===s)))return fb.SCHEDULED;let o=fb.IDLE;return this._tasks.forAll((a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=fb.READY:o!==fb.READY&&(o=fb.WAITING))})),o}_getRuntime(s){let o=0;return this._tasks.forAll((a=>{a.name===s&&(o+=a.runtime)})),o}_resetRuntimes(){this._tasks.forAll((s=>s.runtime=0))}_getRunning(){const s=new Map;if(this._tasks.forAll((a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)})),s.size===0)return null;let o="";return s.forEach(((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`})),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce(((o,a)=>a.needsUpdate?++o:o),0);this._load=this._load*Zce+s*(1-Zce)}_schedule(){for(this._runQueue.filterInPlace((s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1))),this._tasks.forAll((s=>{s.basePriority===tu&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)}));this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll((a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==tu&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)})),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===I$e&&(o.blockFrame=this._frameNumber)}catch(l){Ce.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,ti.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(ti))this._frameTaskTimes.set(ti[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach(((o,a)=>this.performanceInfo.tasks.get(a).push(o))),this.performanceInfo.total.push(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new ctt,this._handles=new RT,this._basePriority=Hce(o),this.schedulePriority=this._basePriority,this._task=I_(a??this._queue),this._handles.add($o((()=>this.task.running),(l=>s.taskRunningChanged(l))))}remove(){this.processQueue(RQ),this._scheduler.removeTask(this),this.schedule=Yce.schedule,this.reschedule=Yce.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=Hce(s);this._basePriority!==tu&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class r{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s){this._begin=this.now(),this._budget=s,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})($5||($5={})),(function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"})(fb||(fb={}));const RQ=new $5.Budget;RQ.enabled=!1;let ytt=class{remove(){}processQueue(){}schedule(e,i,r){try{if(_u(i)){const n=gr();return r?Promise.resolve(r(n)):Promise.reject(n)}return fG(e(RQ))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const Yce=new ytt;let gtt=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=htt(),this._schedulerHandle=$o((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||ef(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,l,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=qo.ANIMATING:this.view.interacting?this._scheduler.state=qo.INTERACTING:this._scheduler.state=qo.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==qo.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new LQ,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Je((()=>e.stationary),(i=>{this.stationary=i,this.requestFrame()})),this._frameTaskHandle=BE(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function vtt(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,a;const l=[0,0],c=btt(t);for(let m=0;m<c.length;m++){const v=c[m];for(let w=0;w<v.length-1;w++){pVe(l,r,v,w);const _=h4(r,l);(n==null||_<n)&&(n=_,s=[...l],o=m,a=w)}}if(n==null||!s||o==null||a==null)throw new ae("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,p]=s;return{coordinate:new gt({x:u,y:p,spatialReference:i}),distance:n}}function btt(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var wW;let Mw=wW=class extends l1.NumericIdentifiableMixin(ut){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return _0(this.geometry,this.spatialReference)}catch(t){return Ce.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?gk(this.normalizedGeometry,i):TX(this.normalizedGeometry,i))return t;const{coordinate:r}=vtt(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new wW({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};d([g({constructOnly:!0})],Mw.prototype,"geometry",void 0),d([g({readOnly:!0})],Mw.prototype,"normalizedGeometry",null),d([g({constructOnly:!0})],Mw.prototype,"spatialReference",void 0),Mw=wW=d([G("esri.views.2d.constraints.GeometryConstraint")],Mw);var _W;let JC=_W=class extends l1.NumericIdentifiableMixin(ut){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new _W({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};d([g()],JC.prototype,"enabled",void 0),d([g()],JC.prototype,"rotationEnabled",void 0),JC=_W=d([G("esri.views.2d.constraints.RotationConstraint")],JC);const A$e=JC;var xW;let qa=xW=class extends l1.NumericIdentifiableMixin(ut){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map((u=>u.clone())),e.sort(((u,p)=>p.scale-u.scale)),e.forEach(((u,p)=>u.level=p));for(const u of e)!l&&i>0&&i>=u.scale&&(o=u.level,l=!0),!c&&r>0&&r>=u.scale&&(a=t?t.level:-1,c=!0),t=u;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach(((u,p)=>{this._lodByScale[u.scale]=u,this._scales[p]=u.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new xW({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};d([g({readOnly:!0})],qa.prototype,"effectiveLODs",void 0),d([g({readOnly:!0})],qa.prototype,"effectiveMinZoom",void 0),d([g({readOnly:!0})],qa.prototype,"effectiveMaxZoom",void 0),d([g({readOnly:!0})],qa.prototype,"effectiveMinScale",void 0),d([g({readOnly:!0})],qa.prototype,"effectiveMaxScale",void 0),d([g()],qa.prototype,"lods",void 0),d([g()],qa.prototype,"minZoom",void 0),d([g()],qa.prototype,"maxZoom",void 0),d([g()],qa.prototype,"minScale",void 0),d([g()],qa.prototype,"maxScale",void 0),d([g()],qa.prototype,"snapToZoom",void 0),qa=xW=d([G("esri.views.2d.constraints.ZoomConstraint")],qa);const P$e=qa,wtt={base:null,key:"type",typeMap:{extent:Ut,polygon:or}};let Cn=class extends ut{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new et}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Mw({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new A$e({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new P$e({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach((r=>r.constrain(e,i))),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach((i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)})),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};d([g({readOnly:!0})],Cn.prototype,"effectiveLODs",null),d([g({readOnly:!0})],Cn.prototype,"effectiveMinScale",null),d([g({readOnly:!0})],Cn.prototype,"effectiveMaxScale",null),d([g({readOnly:!0})],Cn.prototype,"effectiveMinZoom",null),d([g({readOnly:!0})],Cn.prototype,"effectiveMaxZoom",null),d([g({types:wtt,value:null})],Cn.prototype,"geometry",null),d([g({type:[So]})],Cn.prototype,"lods",void 0),d([g()],Cn.prototype,"minScale",void 0),d([g()],Cn.prototype,"maxScale",void 0),d([g()],Cn.prototype,"minZoom",void 0),d([g()],Cn.prototype,"maxZoom",void 0),d([g()],Cn.prototype,"rotationEnabled",void 0),d([g()],Cn.prototype,"snapToZoom",void 0),d([g({type:et})],Cn.prototype,"customConstraints",void 0),d([g()],Cn.prototype,"view",void 0),d([g({readOnly:!0})],Cn.prototype,"version",null),d([g({type:Mw,readOnly:!0})],Cn.prototype,"_geometry",null),d([g({type:A$e})],Cn.prototype,"_rotation",null),d([g({readOnly:!0,type:P$e})],Cn.prototype,"_zoom",null),Cn=d([G("esri.views.2d.MapViewConstraints")],Cn);const Kce=Cn;let Uo=class extends ut{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Je((()=>{var i;return(i=this.constraints)==null?void 0:i.version}),(i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),Up)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new gt({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ce.getLogger(this).error(new ae("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;mW(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ce.getLogger(this).error(new ae("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ce.getLogger(this).error(new ae("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;pet(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;Eet(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;Bce(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ae("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ae("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new ae("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void Ce.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Ps({targetGeometry:new gt,scale:0,rotation:0});na(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;Bce(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let p,m,v;const w=l==null?void 0:l.rotation,_=l==null?void 0:l.targetGeometry;(_==null?void 0:_.type)==="extent"?p=_:(_==null?void 0:_.type)==="point"&&(m=_,v=l==null?void 0:l.scale);const T=s??p;return{center:n??m??(T==null?void 0:T.center),rotation:a??w,scale:(o??u??v??(T&&m4(T,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){Ce.getLogger(this).warn(new vc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new gt({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new LQ({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new gt({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new gt({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(c){wX()||Ce.getLogger(this).warn(new vc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new gt({x:0,y:0,spatialReference:e}));const a=mW(new Ps({targetGeometry:new gt,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const u=[i.size[0]/2,i.size[1]/2],p=[u[0]+20,u[1]],m=i.toMap([0,0],p),{x:v,y:w}=this._project(new gt({x:m[0],y:m[1],spatialReference:i.spatialReference}),e);m[0]=v,m[1]=w,r.toScreen(m,m);const _=wet(u,m,p),T=Math.hypot(m[0]-u[0],m[1]-u[1])/20;!Number.isFinite(T)||Math.abs(T)>4?(a.rotation=0,a.targetGeometry=new gt({x:0,y:0,spatialReference:e})):(a.scale*=T,a.scale>ge("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(_)?_:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],xet(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new gt({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),to(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||ks(i,r.spatialReference))return e;const n=_0(r,i);if(!n)throw new ae("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return _tt(e)?(e.targetGeometry=n,e):n}};function _tt(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}d([g({type:gt})],Uo.prototype,"center",null),d([g()],Uo.prototype,"constraints",void 0),d([g({type:Ut})],Uo.prototype,"extent",null),d([g({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Uo.prototype,"padding",null),d([g()],Uo.prototype,"ready",void 0),d([g()],Uo.prototype,"resizeAlign",void 0),d([g({readOnly:!0})],Uo.prototype,"resolution",null),d([g({type:Number})],Uo.prototype,"rotation",null),d([g({type:Number})],Uo.prototype,"scale",null),d([g({readOnly:!0})],Uo.prototype,"state",void 0),d([g({type:Ps})],Uo.prototype,"viewpoint",null),d([g({readOnly:!0})],Uo.prototype,"visibleArea",null),d([g()],Uo.prototype,"zoom",null),Uo=d([G("esri.views.2d.ViewStateManager")],Uo);const Jce=160;let XC=class extends ut{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=Jce&&this.clear()}),Jce))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};d([g()],XC.prototype,"_timer",void 0),d([g()],XC.prototype,"stationary",null),XC=d([G("esri.views.2d.support.StationaryManager")],XC);const xtt=t=>{let e=class extends t{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new Uo({constraints:new Kce({view:this})}),this.stationaryManager=new XC,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new gtt(this),this.viewEvents=new OTe(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Je((()=>this.viewpoint),(()=>this.stationaryManager.flip()),Up)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const n=()=>{var s;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};i.when(n,n)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}};return d([g({readOnly:!0})],e.prototype,"animationManager",void 0),d([g({readOnly:!0})],e.prototype,"fullOpacity",void 0),d([g()],e.prototype,"stateManager",void 0),d([g()],e.prototype,"constraintsInfo",null),d([g()],e.prototype,"extent",null),d([g({readOnly:!0})],e.prototype,"state",null),d([g({readOnly:!0})],e.prototype,"mapViewNavigation",void 0),d([g()],e.prototype,"renderingOptions",void 0),d([g({readOnly:!0})],e.prototype,"interacting",null),d([g()],e.prototype,"stationary",null),d([g()],e.prototype,"animation",null),d([g({type:Kce})],e.prototype,"constraints",null),d([g()],e.prototype,"padding",null),d([g()],e.prototype,"resizeAlign",null),d([g()],e.prototype,"rotation",null),d([g({readOnly:!0})],e.prototype,"viewEvents",void 0),d([g({type:Ps})],e.prototype,"viewpoint",null),e=d([G("esri.views.Viewport2DBaseMixin")],e),e};let Gg=class extends Mp{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=gc(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ae("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=ef(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};d([g({readOnly:!0})],Gg.prototype,"done",null),d([g({readOnly:!0,type:String})],Gg.prototype,"state",void 0),d([g()],Gg.prototype,"target",void 0),Gg=d([G("esri.views.ViewAnimation")],Gg),(function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(Gg||(Gg={}));const SW=Gg;let MN=class extends ut{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ce.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new SW;this.view.animation=r,await P_((()=>this.view.ready),i);const n={...i,animate:(i==null?void 0:i.animate)??!zTe(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:p}=this.view,m=uet(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:p,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then((o=>{if(Rr(i),r!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()}));return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then((o=>{if(Rr(i),r!==this._gotoTask)throw new ae("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return v_e(r,n).finally((()=>{s()&&(i.done||i.stop())}))}};d([g({constructOnly:!0})],MN.prototype,"view",void 0),MN=d([G("esri.views.2d.GoToManager")],MN);function k$e(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function O$e(t,e){return e.some((i=>k$e(t,i)))}function Xce(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter((n=>n.value===t)).map((n=>n.key))}let Qce=class extends Os{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,(r=>this._handleDoubleClick(r,i)))}_handleDoubleClick(e,i){k$e(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Stt=class extends Os{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,(n=>this._handleDoubleTapDrag(n)))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const p=l.snapScale(this._currentScale),m=(s.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then((()=>{a.end()}));break}}}},g4=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Ett=class extends Os{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,(n=>this._handleDrag(n))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this._dragEventSeparator=new g4({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&O$e(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Ttt=class extends Os{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new g4({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&O$e(o.data,this.pointerActions)}),this.registerIncoming("drag",r,(s=>this._dragEventSeparator.handle(s)))}};function L$e(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function $tt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Mtt(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function Ctt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function R$e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function N$e(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function D$e(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Itt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Att(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Ptt(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function ktt(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function Ott(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Ltt(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function Rtt(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function Ntt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function F$e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Dtt(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function z$e(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function j$e(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function U$e(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function Ftt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ztt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function EW(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function B$e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jtt(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function Utt(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=n*l-s*a,u=s*o-r*l,p=r*a-n*o,m=Math.sqrt(c*c+u*u+p*p);return t[0]=c/m,t[1]=u/m,t[2]=p/m,t}function Btt(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function Vtt(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*c+n[0]*u,t[1]=e[1]*a+i[1]*l+r[1]*c+n[1]*u,t[2]=e[2]*a+i[2]*l+r[2]*c+n[2]*u,t}function Gtt(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,p=3*l*o,m=l*s;return t[0]=e[0]*c+i[0]*u+r[0]*p+n[0]*m,t[1]=e[1]*c+i[1]*u+r[1]*p+n[1]*m,t[2]=e[2]*c+i[2]*u+r[2]*p+n[2]*m,t}function qtt(t,e=1){const i=i4,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function Htt(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function Wtt(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function Ztt(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],c=e[2],u=n*c-s*l,p=s*a-r*c,m=r*l-n*a,v=n*m-s*p,w=s*u-r*m,_=r*p-n*u,T=2*o;return t[0]=a+u*T+2*v,t[1]=l+p*T+2*w,t[2]=c+m*T+2*_,t}function Ytt(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Ktt(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Jtt(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Xtt(t,e){EW(eue,t),EW(tue,e);const i=B$e(eue,tue);return i>1?0:i<-1?Math.PI:Math.acos(i)}const eue=b0(),tue=b0();function Qtt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function eit(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function tit(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=Oa();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function iit(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const rit=R$e,nit=N$e,sit=D$e,oit=z$e,ait=j$e,lit=L$e,cit=U$e;Object.freeze(Object.defineProperty({__proto__:null,abs:Ptt,add:Ctt,angle:Xtt,bezier:Gtt,ceil:Itt,clamp:Rtt,copy:$tt,cross:jtt,crossAndNormalize:Utt,direction:iit,dist:oit,distance:z$e,div:sit,divide:D$e,dot:B$e,equals:tit,exactEquals:eit,floor:Att,hermite:Vtt,inverse:ztt,len:lit,length:L$e,lerp:Btt,max:Ltt,min:Ott,mul:nit,multiply:N$e,negate:Ftt,normalize:EW,random:qtt,rotateX:Ytt,rotateY:Ktt,rotateZ:Jtt,round:Ntt,scale:F$e,scaleAndAdd:Dtt,set:Mtt,sign:ktt,sqrDist:ait,sqrLen:cit,squaredDistance:j$e,squaredLength:U$e,str:Qtt,sub:rit,subtract:R$e,transformMat3:Wtt,transformMat4:Htt,transformQuat:Ztt},Symbol.toStringTag,{value:"Module"}));function Hu(t){let e=t*t;return t<0&&(e*=-1),e}function uit(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function hit(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Hu(n.axes[0]),r.translation[1]=Hu(n.axes[1]),r.translation[2]=Hu(n.buttons[7])-Hu(n.buttons[6]),r.heading=Hu(n.axes[2]),r.tilt=Hu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Hu(n.axes[0]),r.translation[1]=1.2*Hu(n.axes[1]),r.translation[2]=2*-Hu(n.axes[2]),r.heading=1.2*Hu(n.axes[5]),r.tilt=1.2*Hu(n.axes[3])),r.tilt*=o,F$e(r.translation,r.translation,a),r}function dit(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let pit=class extends Os{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new RT,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(i=>this._handleGamePadEvent(i))),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Je((()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled}),(i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=BE({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),rn)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,uit(this._transformation)):(this._currentDevice=e.data.device,hit(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var p;const i=this._transformation;if(dit(i))return void((p=this._frameTask)==null?void 0:p.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=mit*n*e;y4(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*yit*e,a=this._view.constraints.rotationEnabled?-i.heading*fit*e:0,l=this._view.size,c=[l[0]/2,l[1]];y$e(r,r,o,a,c,l);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const fit=.06,mit=.7,yit=6e-4;function V$e(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Ci((()=>document.removeEventListener("visibilitychange",e)))}let git=class extends Os{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=V$e((n=>n?null:this._stopMovement()))}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout((()=>{this._timeout=void 0,e()}),this._stickyKeyDuration)}},vit=class extends Os{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,(n=>this._handleKeyDown(n))),this.registerIncoming("key-up",r,(n=>this._handleKeyUp(n))),this.registerIncoming("blur",r,(()=>this._handleStop())),this._visibilityHandle=V$e((n=>n?null:this._handleStop()))}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var r2;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(r2||(r2={}));let bit=class extends Os{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,(n=>this._handleKeyDown(n))),i.zoomIn.forEach((n=>this._keysToZoomAction[n]=r2.IN)),i.zoomOut.forEach((n=>this._keysToZoomAction[n]=r2.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case r2.IN:o=s.zoomIn();break;case r2.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then((()=>s.end())),e.stopPropagation()}};const wit=.6;let _it=class extends Os{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,(r=>this._handleMouseWheel(r)))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/wit**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch((()=>{})).then((()=>{this._canZoom=!0,i.end()})))}},xit=class extends Os{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(r=>this._handleDrag(r))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const i=this.view.mapViewNavigation;this._dragEventSeparator=new g4({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function iue(t){const e=t.native;return e?{buttons:e.buttons.map((i=>i.pressed?i.value||1:0)),axes:e.axes.map((i=>Tit(i,t.axisThreshold)))}:{buttons:[],axes:[]}}function Sit(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Eit(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Tit(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let $it=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,iue(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(rue((s=>this._connectGamepad(s))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new SQ(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=BE({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;rue((n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=iue(s),l=r||Eit(a);o&&(o.timestamp===n.timestamp||!o.active&&l||Sit(o.state,a))||this._emitGamepadEvent(n,a,!l)}))}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function Mit(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function rue(t){for(const e of navigator.getGamepads())Mit(e)&&t(e)}const nue=ge("edge"),Cit=ge("chrome"),Iit=ge("ff"),Ait=ge("safari"),sue="esri-view-surface",wx={touchNone:`${sue}--touch-none`,touchPan:`${sue}--touch-pan`};var E_;let Pit=(E_=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new $it(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>this._releasePointerCaptureSafe(e))),this._activePointerCaptures.clear(),this._gamepadSource=Lr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(q8[i],r),delete this._active[i]}e&&e.forEach((i=>{if(!this._active[i]&&q8[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(q8[i],r),this._active[i]=r}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?wx.touchNone:wx.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?wx.touchPan:wx.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(wx.touchNone),this._element.classList.remove(wx.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=RTe(this._element,e);return E_.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ge("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:nue&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}nue?r*=.7:Cit||Ait?r*=.6:Iit&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},E_.test={disableSubpixelCoordinates:!1},E_);const q8={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let kit=class extends Os{constructor(){super(!0),this.registerIncoming("context-menu",(e=>e.data.native.preventDefault()))}};const G$e=()=>({maximumClickDelay:300}),Oit=(t={})=>({...G$e(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),NQ=(t={})=>({...G$e(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function M5(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Lit(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function Rit(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:to()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[A,k]=t,[R,F]=[k.x-A.x,k.y-A.y];return e.radius=Math.sqrt(R*R+F*F)/2,e.center.x=(A.x+k.x)/2,e.center.y=(A.y+k.y)/2,e}let i=0,r=0;for(let A=0;A<t.length;A++)i+=t[A].x,r+=t[A].y;i/=t.length,r/=t.length;const n=t.map((A=>A.x-i)),s=t.map((A=>A.y-r));let o=0,a=0,l=0,c=0,u=0,p=0,m=0;for(let A=0;A<n.length;A++){const k=n[A],R=s[A],F=k*k,B=R*R;o+=F,a+=B,l+=k*R,c+=F*k,u+=B*R,p+=k*B,m+=R*F}const v=.5*(c+p),w=.5*(u+m),_=o*a-l*l,T=(v*a-w*l)/_,$=(o*w-l*v)/_,I=to(T+i,$+r);return{radius:Math.sqrt(T*T+$*$+(o+a)/t.length),center:I}}function d_(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let Nit=class extends Os{constructor(e={},i=kT){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=to(0,0),this._pointerState=new Map,this._parameters=NQ(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new g4({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",(r=>this._dragEventSeparator.handle(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{e.doubleTapTimeout=Wr(e.doubleTapTimeout)}))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Wr(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=H8("begin",to(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=H8("update",to(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=H8("end",to(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=d_(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),M5(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=d_(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(n)),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function H8(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let Dit=class extends Os{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:Fit(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=rR(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=CN(n,q$e(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=rR(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=rR(this._activePointerMap);this._activePointerMap.forEach((r=>{r.initialAngle=CN(r,i)-e,r.lastAngle=CN(r,i)-e}))}_emitEvent(e,i,r){const n=rR(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function q$e(t){const e=[];return t.forEach((i=>{e.push(to(i.event.x,i.event.y))})),Rit(e)}function rR(t){const e=q$e(t);let i=0;return t.forEach((r=>{let n=CN(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Fit(t){const e=new Map;return t.forEach(((i,r)=>e.set(r,i.event))),e}function CN(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var oue;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(oue||(oue={}));let zit=class extends Os{constructor(e={},i=kT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=NQ(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=d_(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=d_(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),M5(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):M5(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),r)}}_removeState(e){const i=d_(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},jit=class extends Os{constructor(e={},i=kT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=Oit(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r))),this.registerIncoming("pointer-up",(r=>this._handlePointerLoss(r,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(r=>this._handlePointerLoss(r,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(r=>this._handlePointerLoss(r,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(r=>this._handlePointerMove(r))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{e.holdTimeout=Wr(e.holdTimeout)})),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout((()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}}),this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(nR("update",n,i),void 0,n.modifiers):Lit(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach((n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(nR("start",n,i)):this._pointerDrag.emit(nR("start",n,n.previousEvent),e.timestamp))}))}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(nR("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function nR(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let Uit=class extends Os{constructor(e={},i=kT){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=NQ(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(r=>this._handleImmediateClick(r))),this.registerIncoming("pointer-down",(r=>this._handlePointerDown(r)))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=Wr(e.doubleClickTimer)))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Wr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=Bit(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;M5(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=d_(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=d_(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(n)),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Bit(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const sR={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},aue=Symbol("handles");let qb=class extends ut{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([$o((()=>!e()),(()=>this._disconnect())),$o(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(aue),this._inputManager=Lr(this._inputManager)}_connect(){const e=this.view.surface,i=new Pit(e,this.view.input),r=[new zit,new jit,new Uit,new Dit(this.view.navigation),new Nit],n=new Vc({eventSource:i,recognizers:r}),s=new Ett(this.view,["primary"]),o=new Ttt(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new kit],Km.INTERNAL),n.installHandlers("navigation",[new xit(this.view),new pit(this.view),new _it(this.view),new Qce(this.view),new Qce(this.view,[sR.counter]),s,new git(this.view,sR.pan),new bit(this.view,sR.zoom),new vit(this.view,sR.rotate),o,new Stt(this.view,"touch")],Km.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([Je((()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled}),(a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)}),rn),Je((()=>{const{actionMap:a}=this.view.navigation;return{panActions:Xce("pan",a),rotateActions:Xce("rotate",a)}}),(({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l}),Sa)],aue)}get test(){}};d([g()],qb.prototype,"view",void 0),d([g()],qb.prototype,"latestPointerType",null),d([g()],qb.prototype,"latestPointerLocation",null),d([g()],qb.prototype,"multiTouchActive",null),qb=d([G("esri.views.2d.input.MapViewInputManager")],qb);const Vit=qb,Git=t=>{let e=class extends t{constructor(...i){super(...i),this.goToManager=new MN({view:this}),this.inputManager=new Vit({view:this}),this.addHandles([this.on("resize",(r=>this.stateManager.resize(r.width,r.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(i,r,n,s){return this.inputManager&&this.viewEvents.on(i,r,n,s)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}toMap(i){if(!this.ready)return null;const r=DTe(i)?NTe(this,i):i;return this.stateManager.toMap(r)}};return d([g()],e.prototype,"goToManager",void 0),d([g({readOnly:!0})],e.prototype,"interacting",null),d([g()],e.prototype,"stationary",null),d([g({readOnly:!0})],e.prototype,"inputManager",void 0),e=d([G("esri.views.Viewport2DMixin")],e),e};let lue=class{constructor(e){this._view=e,this.viewpoint=new Ps({targetGeometry:new gt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return f$e(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=lxe(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=NT(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=wC(e.center.x,i.center.x,n),l.y=wC(e.center.y,i.center.y,n),this.viewpoint.scale=wC(e.scale,i.scale+a,o);let c=e.rotation;const u=i.rotation;Math.abs(u-c)>=180&&(c+=360*(c<u?1:-1)),this.viewpoint.rotation=wC(c,u,s)}copyFrom(e){na(this.viewpoint,e.viewpoint),this._view=e.view}};function RM(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function u(w){return((o*w+s)*w+n)*w}function p(w){return((c*w+l)*w+a)*w}function m(w){return(3*o*w+2*s)*w+n}function v(w,_){let T,$,I,A,k,R;for(I=w,R=0;R<8;R++){if(A=u(I)-w,Math.abs(A)<_)return I;if(k=m(I),Math.abs(k)<1e-6)break;I-=A/k}if(T=0,$=1,I=w,I<T)return T;if(I>$)return $;for(;T<$;){if(A=u(I),Math.abs(A-w)<_)return I;w>A?T=I:$=I,I=.5*($-T)+T}return I}return function(w,_=1e-6){return p(v(w,_))}}const nu={};nu.ease=RM(.25,.1,.25,1),nu.linear=RM(0,0,1,1),nu.easeIn=nu["ease-in"]=RM(.42,0,1,1),nu.easeOut=nu["ease-out"]=RM(0,0,.58,1),nu.easeInOut=nu["ease-in-out"]=RM(.42,0,.58,1);const qit=t=>t,nP=t=>t*t,C5=t=>1-nP(1-t),cue=t=>t<.5?nP(2*t)/2:(C5(2*(t-.5))+1)/2,I5=t=>t*t*t,TW=t=>1-I5(1-t),uue=t=>t<.5?I5(2*t)/2:(TW(2*(t-.5))+1)/2,A5=t=>t*t*t*t,$W=t=>1-A5(1-t),hue=t=>t<.5?A5(2*t)/2:($W(2*(t-.5))+1)/2,P5=t=>t*t*t*t*t,MW=t=>1-P5(1-t),due=t=>t<.5?P5(2*t)/2:(MW(2*(t-.5))+1)/2,k5=t=>1-Math.cos(t*Math.PI/2),CW=t=>1-k5(1-t),pue=t=>t<.5?k5(2*t)/2:(CW(2*(t-.5))+1)/2,O5=t=>2**(10*(t-1)),L5=t=>1-O5(1-t),fue=t=>t<.5?O5(2*t)/2:(L5(2*(t-.5))+1)/2,R5=t=>-(Math.sqrt(1-t*t)-1),IW=t=>1-R5(1-t),mue=t=>t<.5?R5(2*t)/2:(IW(2*(t-.5))+1)/2;function $u(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function Mu(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const yue=Mu($u(1),1),gue=Mu($u(1),0),N5=Mu($u(1),.5),vue=Mu($u(2),1),bue=Mu($u(2),0),wue=Mu($u(2),.5),_ue=Mu($u(3),1),xue=Mu($u(3),0),Sue=Mu($u(3),.5),Eue=Mu($u(4),1),Tue=Mu($u(4),0),$ue=Mu($u(4),.5),Mue={linear:qit,"in-quad":nP,"out-quad":C5,"in-out-quad":cue,"in-coast-quad":yue,"out-coast-quad":gue,"in-out-coast-quad":N5,"in-cubic":I5,"out-cubic":TW,"in-out-cubic":uue,"in-coast-cubic":vue,"out-coast-cubic":bue,"in-out-coast-cubic":wue,"in-quart":A5,"out-quart":$W,"in-out-quart":hue,"in-coast-quart":_ue,"out-coast-quart":xue,"in-out-coast-quart":Sue,"in-quint":P5,"out-quint":MW,"in-out-quint":due,"in-coast-quint":Eue,"out-coast-quint":Tue,"in-out-coast-quint":$ue,"in-sine":k5,"out-sine":CW,"in-out-sine":pue,"in-expo":O5,"out-expo":L5,"in-out-expo":fue,"in-circ":R5,"out-circ":IW,"in-out-circ":mue,"quad-in":nP,"quad-out":C5,"quad-in-out":cue,"quad-in-coast":yue,"quad-out-coast":gue,"quad-in-out-coast":N5,"cubic-in":I5,"cubic-out":TW,"cubic-in-out":uue,"cubic-in-coast":vue,"cubic-out-coast":bue,"cubic-in-out-coast":wue,"quart-in":A5,"quart-out":$W,"quart-in-out":hue,"quart-in-coast":_ue,"quart-out-coast":xue,"quart-in-out-coast":Sue,"quint-in":P5,"quint-out":MW,"quint-in-out":due,"quint-in-coast":Eue,"quint-out-coast":Tue,"quint-in-out-coast":$ue,"sine-in":k5,"sine-out":CW,"sine-in-out":pue,"expo-in":O5,"expo-out":L5,"expo-in-out":fue,"circ-in":R5,"circ-out":IW,"circ-in-out":mue,ease:t=>nu.ease(t),"ease-in":t=>nu.easeIn(t),"ease-out":t=>nu.easeOut(t),"ease-in-out":t=>nu.easeInOut(t)};let Hit=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const D5={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},H$e={maxDuration:4e3};let Wit=class W$e{constructor(e){this._createCamera=e,this.compared=new Hit,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:D5.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new W$e(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??D5.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Oa()}get hasFov(){return Math.abs(this.compared.fov)>Oa()}get hasRotate(){return this.compared.rotate>Oa()}},Zit=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Yit=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((e,i)=>e+i.time),0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce(((a,l)=>a||l.definition.hasZoom),!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+c.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:u,targetZoom:p}=c.compared,m=i.zoom*(p-u)+u,v=this.segments[0].definition.compared.sourceZoom,w=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(p-v)>Math.abs(u-v)?p:u;i.zoomOffset=_-w,i.zoom=(m-v)/(_-v)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},W8=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,u=1+c;this._panPixelFlow=c/u*l,this._rotatePixelFlow=1/u*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Kit:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const Kit=NT(45);function Jit(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function Xit(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*n*s*o*l+t.halfWindowSize*n*s*o*c/(a*a)}function Qit(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function ert(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function trt(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function irt(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function rrt(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function nrt(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function srt(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function ort(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function art(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*a+t.halfWindowSize*r*n*s*l/(o*o)+t.halfWindowSize*n*s*a*l/e}function lrt(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function crt(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function urt(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function hrt(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function drt(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function prt(t,e){let i=frt(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?ert:Jit,a=n?trt:Xit,l=n?irt:Qit,c=s?crt:ort,u=s?urt:art,p=s?hrt:lrt,m=R=>o(t,R,r)+rrt(t,R,r)+c(t,R,r),v=R=>a(t,R,r)+nrt(t,R,r)+u(t,R,r),w=R=>l(t,R,r)+srt(t,R,r)+p(t,R,r);let _=m(i);const T=drt(t);let $;const I=e.maximumIterations||20,A=e.maximumDistance!=null?e.maximumDistance:1/0;for($=0;$<I;$++){const R=e.desiredSlope??1e-6;let F=v(i);Math.abs(F)>R&&(F+=R);const B=F/w(i);if(isNaN(B)||i>=A&&B<0){if(!isFinite(A))return null;i=A,_=m(i);break}if(i-=B,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const q=m(i);if(Math.abs(q-_)/_<=.005)break;_=q}return isNaN(_)||_>T*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function frt(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let mrt=class extends Yit{constructor(e,i){super(),this._preallocSegments=[new W8,new W8,new W8],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?prt(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=C5(r.zoom):e===this._descensionSegment&&(r.zoom=nP(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const yrt=new Zit;let grt=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=N5,this.definition=new Wit(e),this.path=new mrt}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(hUe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?N5:L5)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,yrt);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??D5.minDuration/r,s=i.maxDuration??D5.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const vrt=2e3,brt=64;let wrt=class{constructor(e){this._view=e,this._animation=new grt((()=>new lue(this._view))),this._current=new lue(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){na(this._current.viewpoint,e),na(this._source.viewpoint,e),na(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),na(e,this._current.viewpoint)}},rS=class extends ut{constructor(e){super(e),this._animation=null,this._destinationViewState=new LQ,this.updateFunction=null,this.easing=Mue.ease,this.viewpoint=new Ps({targetGeometry:new gt,scale:0,rotation:0}),this._updateTask=BE({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new wrt(e.view)}destroy(){this._updateTask=Wr(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;na(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*brt,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??H$e.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?Mue[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,_rt(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new SW({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==SW.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function _rt(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,o=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??H$e.maxDuration/o))return!1;if(s){const l=bn(),c=to(...r.toScreen(l,...i.center)),u=to(...i.toScreen(l,...r.center)),p=u!=null&&u.x>-1*i.size[0]&&u.x<(1.5+.5)*i.size[0]&&u.y>-1*i.size[1]&&u.y<(1.5+.5)*i.size[1],m=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(n>vrt/o&&!p&&!m)return!1}return!0}d([g()],rS.prototype,"easing",void 0),d([g()],rS.prototype,"view",void 0),d([g()],rS.prototype,"viewpoint",void 0),rS=d([G("esri.views.2d.AnimationManager")],rS);const xrt=rS;function Mr(){return Promise.all([Re(()=>import("./webglDeps-Dkg07OCJ.js"),__vite__mapDeps([167,168,169,170])),Re(()=>import("./mapViewDeps-DJMJQ6ic.js"),__vite__mapDeps([171,172,72,173,169,168,135,113,68,174,69,39,175,67,88,176,120,119,75,15,11,16,70,76,177,73,74,118,167,170,178,83,179,180,181,132,129,111,55,66,13,8,19,182,183,71,184,78,185,80,44,64,186,187,188,189,128,190,191]))])}const NM=()=>Mr().then((()=>Re(()=>import("./TileLayerView2D-BNy0T8WW.js"),__vite__mapDeps([192,68,176,175,67,39,168,88,120,119,75,15,11,16,118,178,173,169,135,113,174,69,83,179,180,55,72,172,70,76,73,74,132,129,111,185,66,13,8,19,80,44,64,193,194,195,189,196,197,187,188,198,199,200,201])))),mb=()=>Mr().then((()=>Re(()=>import("./FeatureLayerView2D-BGx2o-fa.js").then(t=>t.F),__vite__mapDeps([202,15,11,16,203,204,205,13,8,22,196,176,188,68,67,39,169,168,189,175,88,120,119,75,172,72,173,135,113,174,69,70,76,83,177,206,82,201,198])))),Cue={"base-dynamic":()=>Mr().then((()=>Re(()=>import("./BaseDynamicLayerView2D-CAlqDZDu.js"),__vite__mapDeps([207,208,175,67,39,168,88,176,120,119,75,15,11,16,194,173,169,135,113,72,195,196,209,198])))),"base-tile":NM,"bing-maps":NM,catalog:()=>Mr().then((()=>Re(()=>import("./CatalogLayerView2D-B5YXHVND.js"),__vite__mapDeps([210,196,176])))),"catalog-dynamic-group":()=>Mr().then((()=>Re(()=>import("./CatalogDynamicGroupLayerView2D-DaMszXIL.js"),__vite__mapDeps([211,196,176])))),"catalog-footprint":()=>Mr().then((()=>Re(()=>import("./CatalogFootprintLayerView2D-V0EQN4Qs.js"),__vite__mapDeps([212,202,15,11,16,203,204,205,13,8,22,196,176,188,68,67,39,169,168,189,175,88,120,119,75,172,72,173,135,113,174,69,70,76,83,177,206,82,201,198])))),csv:mb,"geo-rss":()=>Mr().then((()=>Re(()=>import("./GeoRSSLayerView2D-R77DkABL.js"),__vite__mapDeps([213,196,176,186,187,188,68,67,39,169,168,189,175,88,120,119,75,15,11,16,172,72,173,135,113,174,69,70,76,185,66,13,8,19,80,44,64])))),feature:mb,geojson:mb,parquet:mb,graphics:()=>Mr().then((()=>Re(()=>import("./GraphicsLayerView2D-CqBAIY0l.js"),__vite__mapDeps([214,196,176,186,187,188,68,67,39,169,168,189,175,88,120,119,75,15,11,16,172,72,173,135,113,174,69,70,76,185,66,13,8,19,80,44,64])))),group:()=>Mr().then((()=>Re(()=>import("./GroupLayerView2D-DdKYBL_n.js"),__vite__mapDeps([215,196,176])))),imagery:()=>Mr().then((()=>Re(()=>import("./ImageryLayerView2D-Bj4SE6LA.js"),__vite__mapDeps([216,217,168,39,96,175,67,88,176,120,119,75,15,11,16,196,185,66,68,69,13,8,19,172,72,173,169,135,113,174,70,76,80,44,64,197,187,188,189,208,194,195,209,100,203,201,198])))),"imagery-tile":()=>Mr().then((()=>Re(()=>import("./ImageryTileLayerView2D-mxBkAj9y.js"),__vite__mapDeps([218,219,217,168,39,96,175,67,88,176,120,119,75,15,11,16,196,99,220,189,173,169,135,113,72,195,174,69,221,100,203,201,198])))),kml:()=>Mr().then((()=>Re(()=>import("./KMLLayerView2D-CkEx0A85.js"),__vite__mapDeps([222,223,194,176,173,169,168,135,113,72,195,208,175,67,39,88,120,119,75,15,11,16,196,186,187,188,68,189,172,174,69,70,76,185,66,13,8,19,80,44,64,184,78,100,181,167,170,132,129,111,179,220])))),"knowledge-graph":()=>Mr().then((()=>Re(()=>import("./KnowledgeGraphLayerView2D-y0LS7Ocp.js"),__vite__mapDeps([224,196,176])))),"link-chart":()=>Mr().then((()=>Re(()=>import("./KnowledgeGraphLayerView2D-y0LS7Ocp.js"),__vite__mapDeps([224,196,176])))),"knowledge-graph-sublayer":mb,"map-image":()=>Mr().then((()=>Re(()=>import("./MapImageLayerView2D-BSmdpxkl.js"),__vite__mapDeps([225,208,175,67,39,168,88,176,120,119,75,15,11,16,194,173,169,135,113,72,195,196,185,66,68,69,13,8,19,172,174,70,76,80,44,64,197,187,188,189,209,203,198,199,200,201])))),"map-notes":()=>Mr().then((()=>Re(()=>import("./MapNotesLayerView2D-DKFUm8NO.js"),__vite__mapDeps([226,196,176,186,187,188,68,67,39,169,168,189,175,88,120,119,75,15,11,16,172,72,173,135,113,174,69,70,76,185,66,13,8,19,80,44,64])))),media:()=>Mr().then((()=>Re(()=>import("./MediaLayerView2D-BEKdgwjr.js"),__vite__mapDeps([227,228,80,44,68,176,175,67,39,168,88,120,119,75,15,11,16,118,178,173,169,135,113,174,69,83,179,180,55,72,172,70,76,73,74,132,129,111,185,66,13,8,19,64,182,229,183,196])))),"ogc-feature":()=>Mr().then((()=>Re(()=>import("./OGCFeatureLayerView2D-Dj3kGhni.js"),__vite__mapDeps([230,202,15,11,16,203,204,205,13,8,22,196,176,188,68,67,39,169,168,189,175,88,120,119,75,172,72,173,135,113,174,69,70,76,83,177,206,82,201,198])))),"open-street-map":NM,"oriented-imagery":mb,route:()=>Mr().then((()=>Re(()=>import("./RouteLayerView2D-DmtO0-y1.js"),__vite__mapDeps([231,232,233,196,176,186,187,188,68,67,39,169,168,189,175,88,120,119,75,15,11,16,172,72,173,135,113,174,69,70,76,185,66,13,8,19,80,44,64])))),stream:()=>Mr().then((()=>Re(()=>import("./StreamLayerView2D-D6xgTyRX.js"),__vite__mapDeps([234,202,15,11,16,203,204,205,13,8,22,196,176,188,68,67,39,169,168,189,175,88,120,119,75,172,72,173,135,113,174,69,70,76,83,177,206,82,201,198])))),"subtype-group":()=>Mr().then((()=>Re(()=>import("./SubtypeGroupLayerView2D-C1Md6UJZ.js"),__vite__mapDeps([235,202,15,11,16,203,204,205,13,8,22,196,176,188,68,67,39,169,168,189,175,88,120,119,75,172,72,173,135,113,174,69,70,76,83,177,206,82,201,198])))),tile:NM,"vector-tile":()=>Mr().then((()=>Re(()=>import("./VectorTileLayerView2D-CISBnooM.js"),__vite__mapDeps([236,118,55,180,119,120,168,175,67,39,88,176,75,15,11,16,189,25,121,122,196,198])))),video:()=>Mr().then((()=>Re(()=>import("./VideoLayerView2D-BYzKVqvN.js"),__vite__mapDeps([237,238,229,88,175,67,39,168,176,120,119,75,15,11,16,172,72,173,169,135,113,68,174,69,70,76,183,196,186,187,188,189,185,66,13,8,19,80,44,64])))),wcs:()=>Mr().then((()=>Re(()=>import("./ImageryTileLayerView2D-mxBkAj9y.js"),__vite__mapDeps([218,219,217,168,39,96,175,67,88,176,120,119,75,15,11,16,196,99,220,189,173,169,135,113,72,195,174,69,221,100,203,201,198])))),"web-tile":NM,wfs:mb,wms:()=>Mr().then((()=>Re(()=>import("./WMSLayerView2D-C4DG7zw1.js"),__vite__mapDeps([239,208,175,67,39,168,88,176,120,119,75,15,11,16,194,173,169,135,113,72,195,196,209,198,240,203])))),wmts:()=>Mr().then((()=>Re(()=>import("./WMTSLayerView2D-Y4_AP4po.js"),__vite__mapDeps([241,193,194,176,173,169,168,135,113,72,195,175,67,39,88,120,119,75,15,11,16,189,196,198])))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Srt(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ae(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const Iue={hasLayerViewModule:t=>Cue[t.type]!=null,importLayerView:t=>{const e=Cue[t.type];if(e==null)throw Srt(t);return e(t)}};var ic;let YT=(ic=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ic(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ic(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new ic(e,i,r,n),new ic(e,i,r+1,n),new ic(e,i+1,r,n),new ic(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},ic.pool=new i1(ic,null,null,25,50),ic);function _x(t,e){return[t,e]}function yb(t,e,i){return t[0]=e,t[1]=i,t}function Ert(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const Wu=new YT("0/0/0/0");let Trt=class Z$e{static create(e,i,r=null){const n=ka(e.spatialReference),s=i.origin||_x(e.origin.x,e.origin.y),o=_x(e.size[0]*i.resolution,e.size[1]*i.resolution),a=_x(-1/0,-1/0),l=_x(1/0,1/0),c=_x(1/0,1/0);r!=null&&(yb(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),yb(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),yb(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:u,rows:p}=i;let m,v,w,_;return!r&&u&&p&&(yb(a,u[0],p[0]),yb(l,u[1],p[1]),yb(c,u[1]-u[0]+1,p[1]-p[0]+1)),e.isWrappable?(m=_x(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),v=!0,w=n.origin,_=n.valid):(m=c,v=!1),new Z$e(i.level,i.resolution,i.scale,s,a,l,c,o,m,v,w,_)}constructor(e,i,r,n,s,o,a,l,c,u,p,m){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=u,this._spatialReferenceOrigin=p,this._spatialReferenceValid=m}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){Wu.set(i);const n=r?Wu.col:this.denormalizeCol(Wu.col,Wu.world),s=Wu.row;return Ert(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){Wu.set(i);const n=r?Wu.col:this.denormalizeCol(Wu.col,Wu.world);return Array.isArray(e)?yb(e,this.getXForColumn(n),this.getYForRow(Wu.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(Wu.row)),e}};var T_;let DQ=(T_=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new YT(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}},T_.pool=new i1(T_),T_),Z8=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const zr=new YT("0/0/0/0");let $rt=class Y$e{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,c=l!==0?a/l:0,u=(Math.ceil(n)-n)*c,p=(Math.floor(n)-n)*c;return new Y$e(r,Math.floor(n),Math.ceil(o),c,a<0?u:p,a<0?p:u,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Dl=[[0,0],[0,0],[0,0],[0,0]],Mrt=1e-6;let Crt=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter((a=>a.level>=r&&a.level<=n));this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map((a=>Trt.create(e,a,i)));s.forEach(((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){zr.set(i);const n=this._infoByLevel[zr.level];return n?n.getTileBounds(e,zr,r):e}getTileCoords(e,i,r=!1){zr.set(i);const n=this._infoByLevel[zr.level];return n?n.getTileCoords(e,zr,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=DQ.pool.acquire(s),a=this._wrap;let l,c,u,p=1/0,m=-1/0;const v=o.spans;Dl[0][0]=Dl[0][1]=Dl[1][1]=Dl[3][0]=-i,Dl[1][0]=Dl[2][0]=e.size[0]+i,Dl[2][1]=Dl[3][1]=e.size[1]+i;for(const $ of Dl)e.toMap($,$),$[0]=s.getColumnForX($[0]),$[1]=s.getRowForY($[1]);const w=[];let _=3;for(let $=0;$<4;$++){if(Dl[$][1]===Dl[_][1]){_=$;continue}const I=$rt.create(Dl[$],Dl[_]);p=Math.min(I.ymin,p),m=Math.max(I.ymax,m),w[I.ymin]===void 0&&(w[I.ymin]=[]),w[I.ymin].push(I),_=$}if(p==null||m==null||m-p>100)return null;let T=[];for(l=p;l<m;){w[l]!=null&&(T=T.concat(w[l])),c=1/0,u=-1/0;for(let $=T.length-1;$>=0;$--){const I=T[$];c=Math.min(c,I.getLeftCol()),u=Math.max(u,I.getRightCol())}if(c=Math.floor(c),u=Math.floor(u),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const $=Math.floor(u/s.worldSize[0]);for(let I=Math.floor(c/s.worldSize[0]);I<=$;I++)v.push(new Z8(l,Math.max(s.getFirstColumnForWorld(I),c),Math.min(s.getLastColumnForWorld(I),u)))}else v.push(new Z8(l,c,u));else c>s.last[0]||u<s.first[0]||(c=Math.max(c,s.first[0]),u=Math.min(u,s.last[0]),v.push(new Z8(l,c,u)));l+=1;for(let $=T.length-1;$>=0;$--){const I=T[$];I.ymax>=l?I.incrRow():T.splice($,1)}}return o}getTileParentId(e){zr.set(e);const i=this._infoByLevel[zr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(zr,this._lodInfos[r],zr),zr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){zr.set(i);const r=this._infoByLevel[zr.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(zr,n,zr);const o=n.denormalizeCol(zr.col,zr.world);for(const a of e.spans)if(a.row===zr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce(((_,T)=>(_[0]=Math.min(_[0],T.row),_[1]=Math.max(_[1],T.row),_[2]=Math.min(_[2],T.colFrom),_[3]=Math.max(_[3],T.colTo),_)),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(zr.col,zr.world),p=n.getColumnForX(r.getXForColumn(u)),m=n.getRowForY(r.getYForRow(zr.row)),v=n.getColumnForX(r.getXForColumn(u+1))-1,w=n.getRowForY(r.getYForRow(zr.row+1))-1;return!(p>c||v<l||m>a||w<o)}const s=n.denormalizeCol(zr.col,zr.world);return e.spans.some((o=>o.row===zr.row&&o.colFrom<=s&&o.colTo>=s))}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=ka(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+Mrt)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce(((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r),i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},Irt=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Art=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new SN,this._controllers=new SN,this._processingItems=new SN,this._pausedSignal=I_(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new HA(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Wr(this._schedule),this._task=Wr(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((i=>e.push(i))),this._controllers.clear(),e.forEach((i=>i.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((i,r)=>e(r)))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=Fh(i,(()=>n.abort())));const o=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),a(),c.reject(gr())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=qJ(n.signal,o),c=gc();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(gr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=uk((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new Irt(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}ef(i)?(n.promise=i,i.then((s=>this._processResult(n,s)),(s=>this._processError(n,s)))):this._processResult(n,i)}get test(){}};const Aue=[0,0];let Kf=class extends ut{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new Art({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return i(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Lr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=r1(this._tilesByScale,n,(()=>new Set)),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(S_e(a,(l=>i.has(l)))){const l=Math.abs(o-r);l<s&&(n=a,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(Aue,a);const l=h4(Aue,n);l<o&&(o=l,s=a)}return s}};d([g({constructOnly:!0})],Kf.prototype,"concurrency",void 0),d([g({constructOnly:!0})],Kf.prototype,"priority",void 0),d([g({constructOnly:!0})],Kf.prototype,"process",void 0),d([g({constructOnly:!0})],Kf.prototype,"scheduler",void 0),d([g()],Kf.prototype,"state",void 0),d([g({constructOnly:!0})],Kf.prototype,"tileInfoView",void 0),Kf=d([G("esri.views.2d.tiling.TileQueue")],Kf);const s9t=Kf;let Prt=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];Pue(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],u=[0,0],p=[0,0];for(s.sort(((m,v)=>(u[0]=a.x+l*(m.col+.5),u[1]=a.y-c*(m.row+.5),p[0]=a.x+l*(v.col+.5),p[1]=a.y-c*(v.row+.5),E5(u,i)-E5(p,i))));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),Pue(this._tilePerId,e)}};function Pue(t,e){t.delete(e)}const gb=new YT(0,0,0,0),If=new Map,DM=[],Y8=[];let a9t=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Prt(e.cacheSize,this.tileInfoView,(i=>{this.releaseTile(i)})))}destroy(){this.tileIndex.clear()}update(e){var $,I;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:m}=u,{level:v}=m;this.tiles.length=0,r.forEach((A=>A.visible=!0));let w=0,_=0;if(p.length>0)for(const{row:A,colFrom:k,colTo:R}of p)for(let F=k;F<=R;F++){w++;const B=gb.set(v,A,m.normalizeCol(F),m.getWorldForColumn(F)).id;let q=r.get(B);if(q)q.isReady?(If.set(B,q),_++):c||this._addParentTile(B,If);else{if(($=this._tileCache)!=null&&$.has(B)){if(q=this._tileCache.pop(B),this.tileIndex.set(B,q),q.isReady){If.set(B,q),_++;continue}}else q=this.acquireTile(gb),this.tileIndex.set(B,q);c||this._addParentTile(B,If)}}const T=_===w;for(const[A,k]of r){if(If.has(A))continue;gb.set(A);const R=this.tileInfoView.intersects(u,gb),F=this.cachePolicy==="purge"?gb.level!==v:gb.level>v;!R||!c&&T?!F&&R||DM.push(k):k.isReady?F&&this.cachePolicy==="purge"&&this._hasReadyAncestor(gb,v)?DM.push(k):Y8.push(k):F&&DM.push(k)}for(const A of Y8)A.isReady&&If.set(A.key.id,A);for(const A of DM)this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(A.key.id);for(const A of If.values())this.tiles.push(A);for(const A of r.values())If.has(A.key.id)||(A.visible=!1);(I=this._tileCache)==null||I.prune(v,s,o),DQ.pool.release(u),Y8.length=0,DM.length=0,If.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=Bn();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=Bn();if(this.tileInfoView.getTileBounds(s,n.key,!0),OVe(s,r))return!0}return!1}},krt=class{constructor(e,i={}){this.events=new Wh,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=t1([PT(this._canvas,"webglcontextlost",(s=>this.events.emit("webgl-context-lost",s)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||ge("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ge("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,o=n[0],a=n[1],l=Math.round(o*s),c=Math.round(a*s);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,o]=i.center,[a,l]=e.toScreen([0,0],s,o),[c,u]=e.toScreen([0,0],r,n),p=c-a,m=u-l,v=e.scale/i.scale,w=i.rotation-e.rotation,_=Rp();return Pk(_),kk(_,_,[v,v]),u0(_,_,NT(w)),Lp(_,_,[p,m]),_}};function Ort(t,e,i,r,n){K$e(t,e,i||0,r||t.length-1,n||Lrt)}function K$e(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);K$e(t,e,Math.max(i,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),n)}var u=t[e],p=i,m=r;for(FM(t,i,e),n(t[r],u)>0&&FM(t,i,r);p<m;){for(FM(t,p,m),p++,m--;n(t[p],u)<0;)p++;for(;n(t[m],u)>0;)m--}n(t[i],u)===0?FM(t,i,m):FM(t,++m,r),m<=e&&(i=m+1),e<=m&&(r=m-1)}}function FM(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function Lrt(t,e){return t<e?-1:t>e?1:0}function F5(t,e){if(!(this instanceof F5))return new F5(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function Rrt(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function xx(t,e){QC(t,0,t.children.length,e,t)}function QC(t,e,i,r,n){n||(n=nS(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],eI(n,t.leaf?r(s):s);return n}function eI(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function kue(t,e){return t.minX-e.minX}function Oue(t,e){return t.minY-e.minY}function K8(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function oR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Nrt(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Drt(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function J8(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function aR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function nS(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Lue(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,Ort(t,s,e,i,n),o.push(e,s,s,i))}F5.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!aR(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],aR(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):J8(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!aR(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],aR(t,o=e.leaf?i(s):s)){if(e.leaf||J8(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=nS([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),o.leaf&&(n=Rrt(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!J8(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:kue,compareMinY:Oue,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return xx(n=nS(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=nS([])).leaf=!1,n.height=r;var a,l,c,u,p=Math.ceil(s/o),m=p*Math.ceil(Math.sqrt(o));for(Lue(t,e,i,m,this.compareMinX),a=e;a<=i;a+=m)for(Lue(t,a,c=Math.min(a+m-1,i),p,this.compareMinY),l=a;l<=c;l+=p)u=Math.min(l+p-1,c),n.children.push(this._build(t,l,u,r-1));return xx(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,c,u,p;r.push(e),!e.leaf&&r.length-1!==i;){for(u=p=1/0,n=0,s=e.children.length;n<s;n++)l=K8(o=e.children[n]),(c=Nrt(t,o)-l)<p?(p=c,u=l<u?l:u,a=o):c===p&&l<u&&(u=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),eI(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=nS(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,xx(i,this.toBBox),xx(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=nS([t,e]),this.data.height=t.height+1,this.data.leaf=!1,xx(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,c,u;for(l=c=1/0,r=e;r<=i-e;r++)o=Drt(n=QC(t,0,r,this.toBBox),s=QC(t,r,i,this.toBBox)),a=K8(n)+K8(s),o<l?(l=o,u=r,c=a<c?a:c):o===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:kue,n=t.leaf?this.compareMinY:Oue;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=QC(t,0,e,o),l=QC(t,i-e,i,o),c=oR(a)+oR(l);for(n=e;n<i-e;n++)s=t.children[n],eI(a,t.leaf?o(s):s),c+=oR(a);for(n=i-e-1;n>=e;n--)s=t.children[n],eI(l,t.leaf?o(s):s),c+=oR(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)eI(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():xx(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Frt(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let Rue=class J$e{constructor(e,i){this.key=new YT(0,0,0,0),this.bounds=Bn(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return AVe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return Frt(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Ta.acquire();for(let r=0;r<e.length;r++)i[r]=new J$e(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return ov.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const vb={added:[],removed:[]},X8=new Set,zrt=new YT(0,0,0,0);function jrt(t,e){const i=ka(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[Bn([t[0],t[1],n,t[3]]),Bn([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[Bn([r,t[1],t[2],t[3]]),Bn([n-(r-t[0]),t[1],n,t[3]])]:null}let Urt=class extends Wh{constructor(e){super(),this._tiles=new Map,this._index=F5(9,ge("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||Nj(e)===0||Dj(e)===0)return[];const i=jrt(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new Rue(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach((r=>this.tiles.push(r))),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const u=zrt.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(X8.add(u),!this.has(u)){const p=new Rue(this.tileScheme,u);this._tiles.set(u,p),this._index.insert(p),this.tiles.push(p),vb.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];X8.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),vb.removed.push(a))}(vb.added.length||vb.removed.length)&&this.emit("update",vb),DQ.pool.release(i),X8.clear(),vb.added.length=0,vb.removed.length=0}};const h9t=1e-30,n2=512,lR=16777216,d9t=8,X$e=29,Q$e=24,p9t=4,f9t=0,m9t=0,y9t=0,g9t=1,v9t=2,b9t=3,w9t=4,_9t=5,x9t=6,S9t=12,E9t=13,T9t=5,Brt=6,$9t=5,M9t=6;var Nue;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(Nue||(Nue={}));const eMe=6,Vrt=1<<eMe,C9t=Vrt<<1,I9t=1.05,A9t=3,P9t=1,Grt=3,qrt=3,k9t=5,O9t=6,L9t=1.15,Hrt=4,R9t=128,Wrt=256,N9t=Wrt-2*Hrt,D9t=2,F9t=128,tMe=1,z9t=10,Zrt=1024,j9t=128,U9t=4,B9t=1,V9t=1<<20,G9t=.75,q9t=10,H9t=.75,W9t=256,Yrt=32,Krt=512,Z9t=0,Y9t=1,Jrt=1,K9t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],J9t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],zM=256;var Due,Fue,zue,jue,Uue,AW,Bue,Vue,Ad,PW,lA,Xr,z5,hu,kW,is,wt,j5,iT,p_,OW,sP,Gue,que,Hue;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(Due||(Due={})),(function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Fue||(Fue={})),(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zue||(zue={})),(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(jue||(jue={})),(function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(Uue||(Uue={})),(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(AW||(AW={})),(function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(Bue||(Bue={})),(function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"})(Vue||(Vue={})),(function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"})(Ad||(Ad={})),(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(PW||(PW={})),(function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"})(lA||(lA={})),(function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(Xr||(Xr={})),(function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(z5||(z5={})),(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(hu||(hu={})),(function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(kW||(kW={})),(function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"})(is||(is={})),(function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"})(wt||(wt={})),(function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(j5||(j5={})),(function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(iT||(iT={})),(function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(p_||(p_={})),(function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(OW||(OW={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(sP||(sP={})),(function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"})(Gue||(Gue={})),(function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"})(que||(que={})),(function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(Hue||(Hue={}));const X9t=33984;var U5,Wue;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})(U5||(U5={})),(function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"})(Wue||(Wue={}));const Q9t=36064,e7t=36065,t7t=36066,i7t=33306,r7t=36096,n7t=36128;var Ys,Zue,Yue,Kue,Jue,Xue,Que,av,ehe;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Ys||(Ys={})),(function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(Zue||(Zue={})),(function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"})(Yue||(Yue={})),(function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"})(Kue||(Kue={})),(function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"})(Jue||(Jue={})),(function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(Xue||(Xue={})),(function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(Que||(Que={})),(function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(av||(av={})),(function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(ehe||(ehe={}));const Xrt=()=>Ce.getLogger("esri.views.webgl.checkWebGLError");function Qrt(t){switch(t){case av.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case av.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case av.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case av.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case av.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case av.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const iMe=!!ge("enable-feature:webgl-debug");function rMe(){return iMe}function s7t(){return iMe}function bb(t,e=rMe()){if(e){const i=t.getError();if(i){const r=Qrt(i),n=new Error().stack;Xrt().error(new ae("webgl-error","WebGL error occurred",{message:r,stack:n}))}}}var B5;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(B5||(B5={}));function ent(t){switch(t){case Ad.BYTE:case Ad.UNSIGNED_BYTE:return 1;case Ad.SHORT:case Ad.UNSIGNED_SHORT:case Ad.HALF_FLOAT:return 2;case Ad.FLOAT:case Ad.INT:case Ad.UNSIGNED_INT:return 4}}function tnt(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function o7t(t,e,i,r,n=0){var o;const s=t.gl;t.bindBuffer(i);for(const a of r){const l=e.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=n*a.stride;if(a.count<=4)s.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+c),s.enableVertexAttribArray(l),a.divisor>0&&t.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let u=0;u<3;u++)s.vertexAttribPointer(l+u,3,a.type,a.normalized,a.stride,a.offset+12*u+c),s.enableVertexAttribArray(l+u),a.divisor>0&&t.gl.vertexAttribDivisor(l+u,a.divisor);else if(a.count===16)for(let u=0;u<4;u++)s.vertexAttribPointer(l+u,4,a.type,a.normalized,a.stride,a.offset+16*u+c),s.enableVertexAttribArray(l+u),a.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(l+u,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(rMe()){const u=tnt(t),p=ent(a.type),m=a.offset,v=Math.round(p/m)!==p/m?`. Offset not a multiple of stride. DataType requires ${p} bytes, but descriptor has an offset of ${m}`:"";u&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${v}:`,u,a)}}}function a7t(t,e,i,r){var s,o,a;const n=t.gl;t.bindBuffer(i);for(const l of r){const c=e.get(l.name);if(l.count<=4)n.disableVertexAttribArray(c),l.divisor&&l.divisor>0&&((s=t.gl)==null||s.vertexAttribDivisor(c,0));else if(l.count===9)for(let u=0;u<3;u++)n.disableVertexAttribArray(c+u),l.divisor&&l.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(c+u,0));else if(l.count===16)for(let u=0;u<4;u++)n.disableVertexAttribArray(c+u),l.divisor&&l.divisor>0&&((a=t.gl)==null||a.vertexAttribDivisor(c+u,0));else console.error("Unsupported vertex attribute element count: "+l.count)}t.unbindBuffer(AW.ARRAY_BUFFER)}function int(t){switch(t){case is.ALPHA:case is.LUMINANCE:case is.RED:case is.RED_INTEGER:case wt.R8:case wt.R8I:case wt.R8UI:case wt.R8_SNORM:case OW.STENCIL_INDEX8:return 1;case is.LUMINANCE_ALPHA:case is.RG:case is.RG_INTEGER:case wt.RGBA4:case wt.R16F:case wt.R16I:case wt.R16UI:case wt.RG8:case wt.RG8I:case wt.RG8UI:case wt.RG8_SNORM:case wt.RGB565:case wt.RGB5_A1:case p_.DEPTH_COMPONENT16:return 2;case is.RGB:case is.RGB_INTEGER:case wt.RGB8:case wt.RGB8I:case wt.RGB8UI:case wt.RGB8_SNORM:case wt.SRGB8:case p_.DEPTH_COMPONENT24:return 3;case is.RGBA:case is.RGBA_INTEGER:case wt.RGBA8:case wt.R32F:case wt.R11F_G11F_B10F:case wt.RG16F:case wt.R32I:case wt.R32UI:case wt.RG16I:case wt.RG16UI:case wt.RGBA8I:case wt.RGBA8UI:case wt.RGBA8_SNORM:case wt.SRGB8_ALPHA8:case wt.RGB9_E5:case wt.RGB10_A2UI:case wt.RGB10_A2:case p_.DEPTH_COMPONENT32F:case iT.DEPTH24_STENCIL8:return 4;case iT.DEPTH32F_STENCIL8:return 5;case wt.RGB16F:case wt.RGB16I:case wt.RGB16UI:return 6;case wt.RG32F:case wt.RG32I:case wt.RG32UI:case wt.RGBA16F:case wt.RGBA16I:case wt.RGBA16UI:return 8;case wt.RGB32F:case wt.RGB32I:case wt.RGB32UI:return 12;case wt.RGBA32F:case wt.RGBA32I:case wt.RGBA32UI:return 16;case Ys.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ys.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ys.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ys.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ys.COMPRESSED_R11_EAC:case Ys.COMPRESSED_SIGNED_R11_EAC:case Ys.COMPRESSED_RGB8_ETC2:case Ys.COMPRESSED_SRGB8_ETC2:case Ys.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ys.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ys.COMPRESSED_RG11_EAC:case Ys.COMPRESSED_SIGNED_RG11_EAC:case Ys.COMPRESSED_RGBA8_ETC2_EAC:case Ys.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let nMe=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=B5.TextureDescriptor,this.target=hu.TEXTURE_2D,this.pixelFormat=is.RGBA,this.dataType=sP.UNSIGNED_BYTE,this.samplingMode=Xr.LINEAR,this.wrapMode=z5.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function rnt(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:int(t.internalFormat))*(t.target===hu.TEXTURE_CUBE_MAP?6:1))}const jM=()=>Ce.getLogger("esri/views/webgl/textureUtils");function UM(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&jM().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(sMe(n)||oMe(n))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&jM().error("Depth textures cannot have mipmaps"),s?a!==Xr.LINEAR&&a!==Xr.NEAREST&&jM().error("Depth textures cannot sample mipmaps"):(a!==Xr.NEAREST&&jM().error("Depth textures without filtering must use NEAREST filtering"),o&&jM().error("Depth textures without filtering cannot use compare function"))}}function nnt(t){return t in wt}function sMe(t){return t in p_}function oMe(t){return t in iT}function snt(t){return t!=null&&t in Ys}function sS(t){return t!=null&&"type"in t&&t.type==="compressed"}function ont(t){return t!=null&&"byteLength"in t}function the(t){return t!=null&&!sS(t)&&!ont(t)}function Sx(t){return t===hu.TEXTURE_3D||t===hu.TEXTURE_2D_ARRAY}function ihe(t,e,i,r=1){let n=Math.max(e,i);return t===hu.TEXTURE_3D&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function cR(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case sP.FLOAT:switch(t.pixelFormat){case is.RGBA:return wt.RGBA32F;case is.RGB:return wt.RGB32F;default:throw new ae("texture:unknown-format","Unable to derive format")}case sP.UNSIGNED_BYTE:switch(t.pixelFormat){case is.RGBA:return wt.RGBA8;case is.RGB:return wt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===j5.DEPTH_STENCIL?iT.DEPTH24_STENCIL8:e===j5.DEPTH_COMPONENT?p_.DEPTH_COMPONENT24:e,t.internalFormat}function ant(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let lnt=class aMe extends nMe{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case wt.R16F:case wt.R32F:case wt.R8_SNORM:case wt.R8:this.pixelFormat=is.RED;break;case wt.R8I:case wt.R8UI:case wt.R16I:case wt.R16UI:case wt.R32I:case wt.R32UI:this.pixelFormat=is.RED_INTEGER}}static validate(e,i){return new aMe(e,i)}};const Af=()=>Ce.getLogger("esri/views/webgl/Texture");var hs;let cnt=(hs=class{constructor(e,i=null,r=null){if(this.type=B5.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=lnt.validate(e,i);if(!n)throw new ae("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===hu.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return rnt(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(U5.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===hu.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!sS(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Ys&&(this._descriptor.internalFormat=void 0),this._setData(e),!sS(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,a=0){o||Af().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Af().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=cR(l);const{context:c,pixelFormat:u,dataType:p,target:m,isImmutable:v}=l;if(v&&!this._wasImmutablyAllocated)throw new ae("texture:uninitialized","Cannot update immutable texture before allocation!");const w=c.bindTexture(this,hs.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&Af().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;a&&(n&&s||Af().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),the(o)?_.texSubImage2D(m,e,i,r,n,s,u,p,o):sS(o)?_.compressedTexSubImage2D(m,e,i,r,n,s,l.internalFormat,o.levels[e]):_.texSubImage2D(m,e,i,r,n,s,u,p,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(w,hs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,a,l){l||Af().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Af().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=cR(c);const{context:u,pixelFormat:p,dataType:m,isImmutable:v,target:w}=c;if(v&&!this._wasImmutablyAllocated)throw new ae("texture:uninitialized","Cannot update immutable texture before allocation!");Sx(w)||Af().warn("Attempting to set 3D texture data on a non-3D texture");const _=u.bindTexture(this,hs.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(hs.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>c.width||r+o>c.height||n+a>c.depth)&&Af().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:T}=u;if(sS(l))l=l.levels[e],T.compressedTexSubImage3D(w,e,i,r,n,s,o,a,c.internalFormat,l);else{const $=l;T.texSubImage3D(w,e,i,r,n,s,o,a,p,m,$)}u.bindTexture(_,hs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,UM(e)}e.samplingMode===Xr.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=Xr.LINEAR_MIPMAP_NEAREST):e.samplingMode===Xr.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=Xr.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,hs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(hs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,hs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new ae("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,UM(e)}e.samplingMode===Xr.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=Xr.LINEAR):e.samplingMode===Xr.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=Xr.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,UM(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?Xr.LINEAR:Xr.NEAREST),UM(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=UE(this._compressionAbortController)}_setData(e,i){var l;const r=this._descriptor,n=(l=r.context)==null?void 0:l.gl;if(!n)return;bb(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(U5.Texture,this)),UM(r);const s=r.context.bindTexture(this,hs.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(hs.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),bb(n);const o=i??r.target,a=Sx(o);if(the(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:u,depth:p}=r;if(c==null||u==null)throw new ae("texture:missing-size","Width and height must be specified!");if(a&&p==null)throw new ae("texture:missing-depth","Depth must be specified!");if(r.internalFormat=cR(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,c,u,p),sS(e)){if(!snt(r.internalFormat))throw new ae("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,c,u,p,e),bb(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),bb(n),r.context.bindTexture(s,hs.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=hu.TEXTURE_CUBE_MAP_POSITIVE_X;i<=hu.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=cR(n);const s=Sx(i),{width:o,height:a,depth:l}=ant(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,a,l),this._texImage(i,0,n.internalFormat,o,a,l,e),bb(r),n.hasMipmap&&(this.generateMipmap(),bb(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:a}=n,l=e.levels,c=ihe(r,s,o,a),u=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,kW.MAX_LEVEL,u),this._forEachMipmapLevel(((p,m,v,w)=>{const _=l[Math.min(p,l.length-1)];this._compressedTexImage(r,p,i,m,v,w,_)}),u)}_texStorage(e,i,r,n,s,o){const{gl:a}=this._descriptor.context;if(!nnt(i)&&!sMe(i)&&!oMe(i))throw new ae("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?ihe(e,n,s,o):1;if(Sx(e)){if(o==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,n,s,o)}else a.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=Sx(e),{isImmutable:u,pixelFormat:p,dataType:m}=this._descriptor;if(u){if(a!=null){const v=a;if(c){if(o==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,o,p,m,v)}else l.texSubImage2D(e,i,0,0,n,s,p,m,v)}}else{const v=a;if(c){if(o==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,o,0,p,m,v)}else l.texImage2D(e,i,r,n,s,0,p,m,v)}}_compressedTexImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=Sx(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,a)}else if(c){if(o==null)throw new ae("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,o,0,a)}else l.compressedTexImage2D(e,i,r,n,s,0,a)}async _compressOnWorker(e){var v,w,_,T;const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=(v=this._descriptor.compress)==null?void 0:v.compressionTracker,c=(w=this._descriptor.compress)==null?void 0:w.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:p}=n.capabilities;if(!((_=hs.compressionWorkerHandle)!=null&&_.isCompressible(e,this._descriptor))||!u&&!p)return;this.abortCompression();const m=new AbortController;this._compressionAbortController=m,l==null||l.increment();try{let $;e instanceof Uint8Array?$=e.buffer:($=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),Rr(m));const I={data:$,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===is.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!u,hasS3TC:!!p},A=await hs.compressionWorkerHandle.invoke(I,m.signal,"low");if(Rr(m),A.compressedTexture&&this.hasWebGLTextureObject){const k=this.usedMemory;this._descriptor.internalFormat=A.internalFormat,this._setData(A.compressedTexture),c==null||c(k-this.usedMemory)}}catch($){io($)||Af().error("Texture compression failed!")}finally{l==null||l.decrement(),(T=this._compressionAbortController)!=null&&T.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===hu.TEXTURE_3D;if(r==null||n==null||l&&s==null)throw new ae("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,n,s),o&&(r!==1||n!==1||l&&s!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===Xr.LINEAR_MIPMAP_NEAREST||r===Xr.LINEAR_MIPMAP_LINEAR?(r=Xr.LINEAR,e.hasMipmap||(n=Xr.LINEAR)):r!==Xr.NEAREST_MIPMAP_NEAREST&&r!==Xr.NEAREST_MIPMAP_LINEAR||(r=Xr.NEAREST,e.hasMipmap||(n=Xr.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),bb(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},hs.TEXTURE_UNIT_FOR_UPDATES=0,hs.compressionWorkerHandle=null,hs);const Q8=()=>Ce.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function unt(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const hnt=[0,0,0,0];let lMe=class{constructor(){this.type="single",this._highlightOptions=new qv,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*zM),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,Brt),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<eMe)-1,activeGradient:this}]}_updateGradientTexture(e){const i=dnt(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,unt(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Jrt,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,u=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let p;c&&!u?Q8().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&u?Q8().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&u&&Q8().error("The highlight is "+Math.max(c,u)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function v(_,T,$){m[0]=(1-$)*_[0]+$*T[0],m[1]=(1-$)*_[1]+$*T[1],m[2]=(1-$)*_[2]+$*T[2],m[3]=(1-$)*_[3]+$*T[3]}const{_texelData:w}=this;for(let _=0;_<zM;++_)p=n+_/(zM-1)*(a-n),p<n?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):p<s?v(hnt,r.outlineColor,(p-n)/(s-n)):p<o?[m[0],m[1],m[2],m[3]]=r.outlineColor:p<a?v(r.outlineColor,r.fillColor,(p-o)/(a-o)):[m[0],m[1],m[2],m[3]]=r.fillColor,w[4*_]=255*m[0],w[4*_+1]=255*m[1],w[4*_+2]=255*m[2],w[4*_+3]=255*m[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const _=new nMe;_.wrapMode=z5.CLAMP_TO_EDGE,_.width=zM,_.height=1,this._shadeTex=new cnt(e,_)}this._shadeTex.updateData(0,0,0,zM,1,this._texelData)}};function dnt(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let pnt=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new lMe),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};var rhe,nhe,she,ohe,ahe,lhe,V5,che,uhe;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(rhe||(rhe={})),(function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(nhe||(nhe={})),(function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"})(she||(she={})),(function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(ohe||(ohe={})),(function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"})(ahe||(ahe={})),(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"})(lhe||(lhe={})),(function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"})(V5||(V5={})),(function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(che||(che={})),(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"})(uhe||(uhe={}));const cMe={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:PW.EQUAL,mask:255,op:{fail:lA.KEEP,zFail:lA.KEEP,zPass:lA.REPLACE}}}},fnt={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},mnt={...cMe,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function ynt({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:_c(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function uMe(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function hMe(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function gnt(t){if(!hMe(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function vnt(t){if(!uMe(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function h7t(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function d7t(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:ynt(t,e),hittestRequest:gnt(t),highlight:vnt(t)}}function p7t(t){return{inside:t.selection===V5.InsideEffect,outside:t.selection===V5.OutsideEffect}}function bnt(t){return hMe(t)?fnt:uMe(t)&&t.passOptions.stepType==="clear"?mnt:cMe}function f7t(t){const{row:e,col:i}=t.key,r=i*n2,n=e*n2;return{tileOffsetFromLocalOrigin:[r%lR,n%lR],maxIntsToLocalOrigin:[Math.floor(r/lR),Math.floor(n/lR)]}}const wnt=new Bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function m7t(t){return wnt.toJSON(t)}function y7t(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function _nt(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new pnt:new lMe),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function g7t(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const u={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(u),i(u),c<l.length-1){let m=0;for(let v=c+1;v<l.length;v++)m|=l[v].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:m,stepType:"clear",highlightAll:e}})}const p={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(bnt(t)),n.updatePipelineState(t.context),o.draw(p),o.unbind()}t.passOptions=a}const uR=t=>parseFloat(t)/100;function xnt(t,e,i){const r=typeof t.left=="string"?uR(t.left)*e:t.left,n=typeof t.right=="string"?uR(t.right)*e:t.right,s=typeof t.top=="string"?uR(t.top)*i:t.top,o=typeof t.bottom=="string"?uR(t.bottom)*i:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:a,ymax:Math.max(i-o,s)}}function dMe(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=xnt(e,n,s),{x:u,y:p}=i;return u>o&&u<a&&p>l&&p<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||$X(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?TX(e.geometry,r):gk(e.geometry,r))}}function Snt(t){if(!t.highlights)return null;const e=t.highlights.findIndex((i=>i.name==="default"));return e===-1?null:t.highlights.items[e]}function Ent(t,e){if(!t.highlights){if(!e)return;t.highlights=new et([new qv])}const i=t.highlights.findIndex((r=>r.name==="default"));e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function Tnt(t,e,i){const r=DTe(e)?NTe(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?dhe(i.include,hhe(t,(m=>{n.add(m),eV(m,(v=>s.add(v)))}),((m,v)=>{s.add(m),n.add(v)}),(m=>{a||(a=new Set),a.add(m)}),(m=>n.add(m)),(()=>o=!0))):(o=!0,n=new Set(t.allLayerViews),n.forEach((m=>{eV(m,(v=>s.add(v)))}))),i!=null&&i.exclude&&dhe(i.exclude,hhe(t,(m=>{n.delete(m),eV(m,(v=>s.delete(v)))}),(m=>s.delete(m)),(m=>{l||(l=new Set),l.add(m)})));const c=t.toMap(r),u=t.allLayerViews.filter((m=>!m.suspended&&n.has(m)&&m.clips.every((v=>dMe(t,v,r,c))))).reverse();let p=[...o?t.graphicsView.hitTest(c).map((m=>({type:"graphic",graphic:m,layer:null,mapPoint:c}))):[],...await Promise.all(u.map((m=>m.hitTest(c,r))).toArray())].filter(rs).flat().filter(rs);return p=p.filter((m=>{var v;return m.type!=="graphic"||((v=m.layer)==null?void 0:v.type)!=="subtype-group"||s.has(m.graphic.layer)})),a&&(p=p.filter((m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(LW(m.graphic)))))),l&&(p=p.filter((m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(LW(m.graphic)))))),{screenPoint:r,results:p}}function hhe(t,e,i,r,n,s){return o=>{if(o instanceof sr){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find((l=>l.layer===o.layer));a&&(n==null||n(a))}r(LW(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find((l=>l.layer===o.parent));a&&i(o,a)}else{const a=t.allLayerViews.find((l=>l.layer===o));a&&e(a)}}}function dhe(t,e){if(t)if(BD(t))for(const i of t)if(BD(i))for(const r of i)e(r);else e(i);else e(t)}function LW(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function eV({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach((i=>{e(i)}))}let BM=null,G5=!0;function $nt(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(G5)try{return new ImageData(t,e)}catch{G5=!1}return pMe(t,e,i)}function v7t(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(G5)try{return new ImageData(t,e,i)}catch{G5=!1}const n=pMe(e,i,r);return n.data.set(t,0),n}function Mnt(){return BM||(BM=document.createElement("canvas"),BM.width=1,BM.height=1),BM}function pMe(t,e,i){return i||(i=Mnt()),i.getContext("2d").createImageData(t,e)}async function Cnt(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await ni(i,{...e,responseType:"image"});return r}catch(r){throw io(r)?r:new ae("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function Int(t,e){const{arrayBuffer:i,mediaType:r}=await Ant(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await Re(()=>import("./gif-DJOLJZ8_.js"),[]);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await Re(()=>import("./apng-DmoNkkxS.js"),__vite__mapDeps([242,7]));if(s(i))return o(i,e)}return Cnt(new Blob([i],{type:r}),e)}async function Ant(t,e){var n;const i=O_(t);if(i!=null&&i.isBase64)return{arrayBuffer:f1e(i.data),mediaType:i.mediaType};const r=await ni(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function fMe(t,e,i){const{ctx:r,canvas:n}=yMe(t,i),s=r.getImageData(0,0,t.width,t.height),o=vMe(n,e);return gMe(n),{dataUrl:o,data:s}}function mMe(t,e){const{ctx:i,canvas:r}=yMe(t,e),n=i.getImageData(0,0,t.width,t.height);return gMe(r),n}function yMe(t,e){const i=Pnt();e.premultipliedAlpha&&Rnt(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&Lnt(r),{ctx:r,canvas:i}}function gMe(t){t.width=0,t.height=0}function Pnt(){return tV==null&&(tV=document.createElement("canvas")),tV}let tV=null;function vMe(t,e){const i=Nnt[e.format],r=e.quality/100;return t.toDataURL(i,r)}function bMe(t,e){const i=Ont(t),r=Fnt[i];return{format:i,quality:sa(e??r,0,100)}}function wMe(t,e){return e/Math.max(t[0],t[1])}function knt(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:c,height:u,data:p}=e,m=s/c,v=o/u,w=Math.ceil(m/2),_=Math.ceil(v/2),T=t.width;for(let $=0;$<u;$++)for(let I=0;I<c;I++){const A=4*(I+(a?u-$-1:$)*c);let k=0,R=0,F=0,B=0,q=0,Y=0;const J=($+.5)*v;for(let Q=Math.floor($*v);Q<($+1)*v;Q++){const te=Math.abs(J-(Q+.5))/_,re=(I+.5)*m,ee=te*te;for(let ye=Math.floor(I*m);ye<(I+1)*m;ye++){const ne=Math.abs(re-(ye+.5))/w,ue=Math.sqrt(ee+ne*ne);if(ue>=1)continue;let he=2*ue*ue*ue-3*ue*ue+1;const Ne=4*(r+ye+(n+Q)*T);Y+=he*l[Ne+3],R+=he,!i&&l[Ne+3]<255&&(he=he*l[Ne+3]/255),F+=he*l[Ne],B+=he*l[Ne+1],q+=he*l[Ne+2],k+=he}}p[A]=F/k,p[A+1]=B/k,p[A+2]=q/k,p[A+3]=Y/R}return e}function Ont(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Dnt}}function Lnt(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Rnt(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const Nnt={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},phe=98,Dnt="png",Fnt={png:100,jpg:phe,jpeg:phe},b7t=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:$nt,encode:fMe,encodeData:mMe,getFormatAndQuality:bMe,getMaximumResolutionScale:wMe,resampleHermite:knt,toDataUrl:vMe},Symbol.toStringTag,{value:"Module"})),_Me={flipY:!0,premultipliedAlpha:!0};async function znt(t,e){const i=await xMe(t,e),{format:r,quality:n}=bMe(e==null?void 0:e.format,e==null?void 0:e.quality);return fMe(i,{format:r,quality:n},_Me)}async function jnt(t,e){const i=await xMe(t,e);return mMe(i,_Me)}function xMe(t,e){const i=Vnt(e||{},Bnt(t.stage,t.size),t.size,t.padding),r=Unt(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function Unt(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach((r=>{const n=e.find((s=>s.layer.id===r.id));n!=null&&n.container&&i.push(n.container)})),i}function Bnt(t,e){return Math.min(4,wMe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Vnt(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(n){const u=s/o,p=n[0]/n[1];if(p>u){const m=c.width/p;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*p;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,e),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const Gnt=t=>t.includes("Brush");let SMe=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Gnt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},qnt=class{constructor(e){this.getUnmaskedRenderer=e}};function Hnt(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new qnt((()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL))):null}let fhe;function Wnt(){return fhe??(fhe=Knt()),fhe}let Znt=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Ynt(t){var n;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((n=Hnt(i))==null?void 0:n.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function Knt(){const t=new Znt,e=Ynt(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Jnt(t){const e=Wnt();return e.available?t==="3d"&&e.majorPerformanceCaveat?new ae("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new ae("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ae("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ae("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Xnt(t){return t&&"nodeType"in t}function Qnt(t){return t&&typeof t.render=="function"}const mhe={component:"esri-component"};let Hb=class extends ut{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(mhe.component),i&&i.classList.remove(mhe.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||Xnt(e)?(this._set("widget",null),ZX(e)):(Qnt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};d([g()],Hb.prototype,"id",null),d([g()],Hb.prototype,"node",null),d([Ai("node")],Hb.prototype,"castNode",null),d([g({readOnly:!0})],Hb.prototype,"widget",void 0),Hb=d([G("esri.views.ui.Component")],Hb);const IN=Hb,EMe="calcite-mode-",TMe="dark",est="light",tst=/\W/g,ist="--esri-calcite-mode-name";function $Me(){return getComputedStyle(document.body).getPropertyValue(ist).replaceAll(tst,"").toLowerCase()}function MMe(){return $Me()===TMe}function rst(){const t=$Me();switch(t){case TMe:case est:return`${EMe}${t}`;default:return null}}function nst(t){const e=rst();e&&(sst(t),t.classList.add(e))}function sst(t){Array.from(t.classList).forEach((e=>{e.startsWith(EMe)&&t.classList.remove(e)}))}const v4=new Map;function CMe(){v4.clear()}function ost(t){return v4.get(t)}function ast(t,e){v4.set(t,e)}function iV(t){v4.delete(t)}function s2(...t){const e=Ta.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return Ta.release(e),i}(()=>{const t=new Map,e=new ResizeObserver((r=>{var n;CMe();for(const s of r)(n=t.get(s.target))==null||n(s)})),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Ci((()=>{e.unobserve(r),t.delete(r)})));return(r,n,s)=>{let o=null;return t1([Je((()=>typeof r=="function"?r():r),(a=>{o==null||o.remove(),a&&(o=i(a,n,s))}),Sa),Ci((()=>o==null?void 0:o.remove()))])}})();function b4(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function E7t(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function T7t(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function lst(t){return t==="Enter"||t===" "}async function cst(t,e){await wUe(lk(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const ust={left:0,top:0,bottom:0,right:0},IMe={bottom:30,top:15,right:15,left:15},Pf="esri-ui",Ba={ui:Pf,corner:`${Pf}-corner`,innerContainer:`${Pf}-inner-container`,manualContainer:`${Pf}-manual-container`,cornerContainer:`${Pf}-corner-container`,topLeft:`${Pf}-top-left`,topRight:`${Pf}-top-right`,bottomLeft:`${Pf}-bottom-left`,bottomRight:`${Pf}-bottom-right`};function hst(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function hR(t){return t===0?"0":`${t}px`}function rV(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function nV(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let wd=class extends Wh.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=fl(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&nV(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&nV(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Je((()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]}),this._applyViewPadding,rn),Je((()=>this.padding),this._applyUIPadding,rn),Je((()=>[this.container,this._locale]),(([e,i])=>{e&&e.setAttribute("lang",i)}),rn),Fj((e=>{this._locale=e}))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Ba.ui),nst(e),this._attachContainers(e)),i&&(i.classList.remove(Ba.ui),nV(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...IMe,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach((a=>this.add(a,i)));const o=rV(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map((s=>this.remove(s,i)));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--})),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map((s=>this._findByNode(s))).filter((s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal}));for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach((o=>this.move(o,i))),!e)return;let r;const n=rV(e)||rV(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap((r=>this._getComponentsAtPosition(r,i))):this._getComponentsAtPosition(e,i):this._components.filter((r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)})).map((({widget:r,node:n})=>r??n))}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof IN||(e=new IN({node:e}));const{widget:o}=e;o!=null&&o instanceof ut&&o.addHandles(Ci((()=>{queueMicrotask((()=>this.remove(e)))})),this._removeWidgetHandleKey),this._components.some((a=>{var l,c;return((l=this._componentMap.get(a))==null?void 0:l.position)===i&&((c=this._componentMap.get(a))==null?void 0:c.index)===r}))&&this._components.forEach((a=>{const l=this._componentMap.get(a);l&&l.position===i&&l.index>=r&&l.index++})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof IN?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??ust}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ba.innerContainer,Ba.cornerContainer);const i=document.createElement("div");i.classList.add(Ba.innerContainer,Ba.manualContainer);const r=document.createElement("div");r.classList.add(Ba.topLeft,Ba.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ba.topRight,Ba.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Ba.bottomLeft,Ba.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Ba.bottomRight,Ba.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=b4();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var l,c;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(hst(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const u of a){const p=this._findByNode(u);if(p&&n<(((l=this._componentMap.get(p))==null?void 0:l.index)??0))return void((c=u.parentNode)==null?void 0:c.insertBefore(r.node,u))}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:hR(e.top),left:hR(e.left),right:hR(e.right),bottom:hR(e.bottom)}}_findByComponent(e){return this._components.find((i=>i===e))??null}_findById(e){return this._components.find((({id:i})=>i===e))??null}_findByNode(e){return e?this._components.find((({node:i})=>i===e)):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map((n=>this._findByNode(n))).filter(rs).filter((n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)})).map((({widget:n,node:s})=>n??s))}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};d([g()],wd.prototype,"_locale",void 0),d([g()],wd.prototype,"container",null),d([g()],wd.prototype,"height",null),d([g({value:IMe})],wd.prototype,"padding",null),d([Ai("padding")],wd.prototype,"castPadding",null),d([g()],wd.prototype,"view",void 0),d([g()],wd.prototype,"width",null),wd=d([G("esri.views.ui.UI")],wd);const dst=wd,pst={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},fst={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},mst=t=>({...fst,...t}),yst=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},gst=(t,e)=>t.find(e),yhe=(t,e,i=!1)=>{let r=t;return e.forEach(((n,s)=>{const o=r!=null&&r.children?gst(r.children,(a=>a.domNode===n)):void 0;i&&!o&&s!==e.length-1||(r=o)})),r},vst=t=>{let e;const i={...pst,...t},r=mst(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],u=(m,v,w)=>{var $;let _;r.eventHandlerInterceptor=(I,A,k,R)=>function(F){let B;n("domEvent",F);const q=yst(F.currentTarget,_.domNode),Y=q.some((Q=>{var te;return customElements.get((te=Q==null?void 0:Q.tagName)==null?void 0:te.toLowerCase())}));if(F.eventPhase===Event.CAPTURING_PHASE||!Y)q.reverse(),B=yhe(_.getLastRender(),q);else{const Q=F.composedPath(),te=Q.slice(Q.indexOf(F.currentTarget),Q.indexOf(_.domNode)).reverse();B=yhe(_.getLastRender(),te,!0)}let J;return B&&(J=i.handleInterceptedEvent(e,B,this,F)),n("domEventProcessed",F),J},($=i.postProcessProjectionOptions)==null||$.call(i,r);const T=w();_=m(v,T,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(w),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(_,T)};let p=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const v=c[m]();n("rendered",void 0);try{l[m].update(v)}catch(w){console.error(w)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,c)),e={renderNow:p,scheduleRender:()=>{s||a||(s=requestAnimationFrame(p))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(m,v)=>{u(Pv.append,m,v)},insertBefore:(m,v)=>{u(Pv.insertBefore,m,v)},merge:(m,v)=>{u(Pv.merge,m,v)},replace:(m,v)=>{u(Pv.replace,m,v)},detach:m=>{for(let v=0;v<c.length;v++)if(c[v]===m)return c.splice(v,1),l.splice(v,1)[0];throw new Error("renderFunction was not found")}},e},vn=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},RW=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},FQ=Symbol.for("controller"),bst=t=>typeof t=="object"&&t!==null&&(FQ in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),wst=t=>typeof(t==null?void 0:t.then)=="function";let tI;const o2=t=>{tI!==t&&(tI=t,queueMicrotask(()=>tI===t?tI=void 0:0))},w4=t=>tI;let Wb=[];const AMe=t=>{if(t===void 0){Wb=[];return}const e=Wb.indexOf(t);Wb=e===-1?[...Wb,t]:Wb.slice(0,e+1),queueMicrotask(()=>Wb=[])},PMe=()=>Wb;let a2;const _st=t=>{a2!==t&&(a2=t,queueMicrotask(()=>a2===t?a2=void 0:0))},xst=()=>{const t=a2;return a2=void 0,t},Sst=async(t,e)=>{const i=zQ(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},Est=async t=>{const e=zQ(t);return await e.ready,e},zQ=t=>{const i=w4().manager.X(t);if(i!==void 0)return i;if(bst(t))return t;const r=xst();if(r!==void 0)return r};let NW=!1;const Tst=t=>{NW=!0;try{return t()}finally{NW=!1}};class oP{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const $st=(t,e)=>{const i=e/Mst;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},Mst=4,Cst=(t,e,i)=>{const r=Object.keys(t),n=r.length;Nv===void 0&&queueMicrotask(_4),Nv??(Nv=new Map);let s=Nv.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Nv.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>vn(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Nv;const _4=()=>{Nv==null||Nv.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Nv=void 0},Ist=(t,e,i)=>{const r=t.manager;return r.V!==Ye&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>vn(e,void 0,i===s?n:void 0)),i},kMe=(t=[w4(),...PMe()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>Cst(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){Ist(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},Ast=(t="",e={},i=w4())=>{const r={emit:n=>{t===""&&_4();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&kMe(void 0,n=>t=n.key,r),r},ot=Ast.bind(null,"");var OMe;OMe=FQ;var mE,yE,e_,gE,vE,bE,wE,_E,Ev,t_,tl,Vd,Pm,xE,AN;class jQ{constructor(e){pt(this,xE);pt(this,mE);pt(this,yE);pt(this,e_);pt(this,gE);pt(this,vE);pt(this,bE);pt(this,wE);pt(this,_E);pt(this,Ev);pt(this,t_);pt(this,tl);pt(this,Vd);pt(this,Pm);nt(this,mE,[]),nt(this,yE,[]),nt(this,e_,[]),nt(this,gE,[]),nt(this,vE,[]),nt(this,bE,[]),nt(this,wE,[]),nt(this,_E,[]),nt(this,Ev,[]),nt(this,t_,!1),this.P=new oP,this.connectedCalled=!1,this.loadedCalled=!1,this[OMe]=!0,nt(this,Pm,[]);const i=this,r=e??w4();nt(i,tl,r),i.ready=i.P.promise,nt(i,Vd,vhe(i)),i.component=r,me(i,tl).addController(i),me(i,tl).manager===void 0||(AMe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=me(this,tl);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),me(e,t_)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return me(this,Vd)}set exports(e){const i=me(this,Vd);i!==e&&(nt(this,Vd,e),me(this,Pm).forEach(vn),this.connectedCalled&&this.O!==!1&&me(this,tl).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){nt(this,Vd,i?vhe(e):e),me(this,Pm).forEach(vn)}watchExports(e){const i=()=>e(me(this,Vd));return me(this,Pm).push(i),()=>void me(this,Pm).splice(me(this,Pm).indexOf(i),1)}get use(){return o2(me(this,tl)),Sst}get useRef(){return o2(me(this,tl)),Est}get useRefSync(){return o2(me(this,tl)),zQ}controllerRemoved(){me(this,tl).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){me(this,mE).push(e)}onDisconnected(e){me(this,yE).push(e)}onLoad(e){me(this,e_).push(e)}onLoaded(e){me(this,gE).push(e)}onUpdate(e){me(this,vE).push(e)}onUpdated(e){me(this,bE).push(e)}onDestroy(e){me(this,wE).push(e)}onLifecycle(e){me(this,_E).push(e),this.connectedCalled&&me(this,tl).el.isConnected&&si(this,xE,AN).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&vn(e.hostConnected,e),me(e,mE).forEach(vn),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&vn(e.hostDisconnected,e),me(e,yE).forEach(vn),me(e,Ev).forEach(vn),nt(e,Ev,[])}async triggerLoad(){if(me(this,t_))return;nt(this,t_,!0);const e=this;e.hostLoad&&await RW(e.hostLoad,e),me(this,e_).length>0&&await Promise.allSettled(me(this,e_).map(RW)),this.P.resolve(me(this,Vd))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&vn(this.hostLoaded,this),me(this,gE).forEach(vn),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&vn(this.hostUpdate,this,e),me(this,vE).forEach(ghe,e)}triggerUpdated(e){this.hostUpdated&&vn(this.hostUpdated,this,e),me(this,bE).forEach(ghe,e)}triggerDestroy(){this.hostDestroy&&vn(this.hostDestroy,this),me(this,wE).forEach(vn)}triggerLifecycle(){this.hostLifecycle&&si(this,xE,AN).call(this,()=>this.hostLifecycle()),me(this,_E).forEach(si(this,xE,AN),this)}}mE=new WeakMap,yE=new WeakMap,e_=new WeakMap,gE=new WeakMap,vE=new WeakMap,bE=new WeakMap,wE=new WeakMap,_E=new WeakMap,Ev=new WeakMap,t_=new WeakMap,tl=new WeakMap,Vd=new WeakMap,Pm=new WeakMap,xE=new WeakSet,AN=function(e){o2(me(this,tl));const i=vn(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?me(this,Ev).push(n):typeof n=="object"&&typeof n.remove=="function"&&me(this,Ev).push(n.remove)})};function ghe(t){vn(t,void 0,this)}const Pst=jQ,vhe=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},kst=t=>t.replace(Ost,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),Ost=/[A-Z]+(?![a-z])|[A-Z]/gu,Lst=1,Rst=2,Nst=4,Dst=8,Fst=16,zst=32,jst=64,LMe=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},bhe={};function RMe(){}const PN=Object.defineProperty,Ust=globalThis.HTMLElement??RMe;var il,km,SE,GP,DW;const ure=class ure extends Ust{constructor(){var n,s;super();pt(this,GP);pt(this,il);pt(this,km);pt(this,SE);nt(this,km,{}),nt(this,SE,[]),this.I=new oP,this.H=new oP,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(me(i,km)[o]=i[o],delete i[o])}),r.A?si(s=i,GP,DW).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,si(l=i,GP,DW).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])PN(this.prototype,i,{configurable:!0,enumerable:!0,get(){return me(this,km)[i]},set(r){me(this,km)[i]=r}});for(const i of this.E??[])PN(this.prototype,i,{async value(...r){return me(this,il)||await this.H.promise,await me(this,il)[i](...r)},configurable:!0});for(const i of this.D??[])PN(this.prototype,i,{value(...r){return me(this,il)[i](...r)},configurable:!0})}get manager(){var i;return(i=me(this,il))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=me(this,il))==null||s.attributeChangedCallback(i,r,n),me(this,il)||me(this,SE).push(i)}connectedCallback(){var i,r;me(this,il)?(r=(i=me(this,il)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=LMe(this))}disconnectedCallback(){var i,r;(r=(i=me(this,il))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=me(this,il))==null||i.requestUpdate()}};il=new WeakMap,km=new WeakMap,SE=new WeakMap,GP=new WeakSet,DW=function(i){var m;const r=this.constructor,n=r.L,s=me(this,km),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);Vst(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,nt(this,il,u),nt(this,km,u),me(this,SE).forEach(v=>u.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(Bst,u);const p=this.isConnected;(p||this.G)&&((m=u.connectedCallback)==null||m.call(u),p||u.disconnectedCallback())},ure.lumina=!0;let whe=ure;function Bst([t,e]){this[t]=e}const Vst=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},PN(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cA=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),cA(n,e);return!0},q5=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},NMe=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),Hst(e)}};function Gst(t){this._$AN!==void 0?(q5(this),this._$AM=t,NMe(this)):this._$AM=t}function qst(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)cA(r[s],!1),q5(r[s]);else r!=null&&(cA(r,!1),q5(r));else cA(this,t)}const Hst=t=>{t.type==qd.CHILD&&(t._$AP??(t._$AP=qst),t._$AQ??(t._$AQ=Gst))};let Wst=class extends IT{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),NMe(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(cA(this,e),q5(this))}setValue(e){if(zwe(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qo=()=>new Zst;let Zst=class{};const sV=new WeakMap,wi=CT(class extends Wst{render(t){return Ye}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Ye}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=sV.get(e);i===void 0&&(i=new WeakMap,sV.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=sV.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Om,ph,EE;class Yst extends Pst{constructor(i){super(i);pt(this,Om);pt(this,ph);pt(this,EE);this.destroyed=!1,this.R=!1,this.V=Ye,this.T=[],nt(this,EE,new WeakMap),nt(this,ph,i),this.exports=void 0,this.hasDestroy=FW in i&&typeof i.destroy=="function",Wm.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${FW} prop.`)}me(this,Om)!==void 0&&clearTimeout(me(this,Om)),_4();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():vn(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():vn(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):vn(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):vn(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),o2(i)}async destroy(){if(!this.destroyed){me(this,ph).el.isConnected&&(this.hasDestroy=!1,me(this,ph).el.remove()),nt(this,Om,void 0),this.destroyed=!0;for(const i of me(this,ph).M)"triggerDestroy"in i?i.triggerDestroy():vn(i.hostDestroy,i);me(this,ph).M.splice(0)}}U(){me(this,Om)!==void 0&&clearTimeout(me(this,Om)),!me(this,ph).el.isConnected&&!me(this,ph).autoDestroyDisabled&&nt(this,Om,$st(()=>void me(this,ph).destroy(),Kst))}S(i,r){const n=this.T;this.V=Ye,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&me(this,EE).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return me(this,EE).get(i)}}Om=new WeakMap,ph=new WeakMap,EE=new WeakMap;let Kst=1e3;const FW="autoDestroyDisabled";var i_,qP,HP,r_,Gd,xT,DMe,FMe;const CA=class CA extends Wm{constructor(){super();pt(this,xT);pt(this,i_);pt(this,qP);pt(this,HP);pt(this,r_);pt(this,Gd);this.M=[],this.manager=new Yst(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=CA.prototype.shouldUpdate;nt(i,r_,(n==null?void 0:n.H)??new oP),i.I=(n==null?void 0:n.I)??new oP,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,nt(i,HP,i.enableUpdating),i.enableUpdating=RMe,i.shouldUpdate!==o&&(nt(i,qP,i.shouldUpdate),i.shouldUpdate=o),s&&(nt(i,i_,new Map),r.elementProperties.forEach((a,l)=>me(i,i_).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===bhe;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??vj,a={attribute:n&Lst&&typeof i=="string"?kst(i):!1,reflect:!!(n&Rst),type:n&Nst?Boolean:n&Dst?Number:void 0,state:!!(n&Fst),readOnly:!!(n&zst),noAccessor:!!(n&jst),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,me(this,i_).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,u;const l=this.manager;if(n.readOnly&&!NW&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((u=(c=me(this,i_))==null?void 0:c.get(i))==null||u.notify()),l.T.length>0&&(_4(),l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());nt(this,Gd,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>si(this,xT,FMe).call(this).catch(o=>{me(this,r_).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=me(this,Gd))==null||i.destroy(),nt(this,Gd,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===bhe?this.el:this.el.attachShadow(n));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=me(this,qP))==null?void 0:r.call(this,i))??!0}update(i){me(this,Gd)?si(this,xT,DMe).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await me(this,r_).promise,this}addController(i){var r;this.M.push(i),!(FQ in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};i_=new WeakMap,qP=new WeakMap,HP=new WeakMap,r_=new WeakMap,Gd=new WeakMap,xT=new WeakSet,DMe=function(i){try{me(this,Gd).clear(),this.constructor.K.r(me(this,Gd),()=>LB(CA.prototype,this,"update").call(this,i))}catch(r){throw me(this,Gd).clear(),r}},FMe=async function(){var s,o;const i=this.el.G??LMe(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(RW(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(FW)&&this.manager.U()),me(this,HP).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():vn(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),me(this,r_).resolve()},CA.lumina=!0;let Nr=CA;const Jst=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},Oe=t=>typeof t=="object"&&t!=null?Dwe(t):t,zMe=t=>typeof t=="object"&&t!=null?g4e(t):t,Wd=Ye;function x4(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const H_={toAttribute:t=>t===!0?"":t===!1?null:t},Xst="calcite-mode-auto",Qst="calcite-mode-dark",jMe={rtl:"calcite--rtl"},UQ={filter:250,nextTick:0,resize:150,reposition:100},I7t=25;function _he(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Qst)||t.contains(Xst)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Xm=globalThis.calciteConfig,eot=(Xm==null?void 0:Xm.focusTrapStack)||[],tot=(Xm==null?void 0:Xm.logLevel)||"info",xhe="3.3.0",iot="2025-09-16",rot="e5e81153b";function not(){if(Xm&&Xm.version)return;console.info(`Using Calcite Components ${xhe} [Date: ${iot}, Revision: ${rot}]`);const t=Xm||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:xhe,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?_he():document.addEventListener("DOMContentLoaded",_he,{once:!0});queueMicrotask(not);const sot=Jst({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:an,getAssetPath:UMe,setAssetPath:oot}=sot;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */let BMe=!1;const aot=t=>{BMe=!0,oot(t)};let VMe;function lot(){BMe||aot(oc(Pr(VMe)))}function S4(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}VMe="components/assets";const GMe=Symbol("widget"),qMe=Symbol("widget-test-data"),cot=[],uot={},H5=new WeakMap;function HMe(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=HMe(t,i[n]);else i=cot;const r=e.vnodeSelector;if(W5(r)){const n=e.properties||uot,s=n.key||r,o={key:s,afterCreate:hot,afterUpdate:dot,afterRemoved:WMe,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function hot(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,H5.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Ci((()=>WMe(t)))),queueMicrotask((()=>{o[qMe].projector.renderNow()}))}function dot(t,e,i,{widgetProperties:r}){var s;const n=H5.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function WMe(t){var i;const e=H5.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),H5.delete(t))}function W5(t){return typeof t=="function"&&t[GMe]}const She=new Set;function pot(t){She.add(t),t.finally((()=>She.delete(t)))}function fot(t){return Ci()}var Ehe;let mot=0;function ZMe(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?ZMe(t[r],e[r]):t[r]=e[r]);return t}const yot=vst({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),u=v=>a==null?void 0:a.call(s,v);s.addEventListener(c,u,l);const p=()=>s.removeEventListener(c,u,l),m=o.afterRemoved;o.afterRemoved=v=>{m==null||m(v),p()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(CMe(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let oV=!1;var $_;let Gs=($_=class extends Mp.EsriPromiseMixin(Wh.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=yot,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=ck((async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:u,propertyName:p})=>{if(this.destroyed)return;let m=await qj(u);this.uiStrings&&Object.keys(this.uiStrings)&&(m=ZMe(le(m),this.uiStrings)),this[p]=m})));if(this.destroyed)return;for(const u of c)u.status==="rejected"&&Ce.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()})),this.addHandles(fot()),lot();const r="esri-widget-uid-"+WT(),n=this.render.bind(this);this._trackingTarget=new nk((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var p,m;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=r),W5(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(p=c.styles).display??(p.display="");let u=0;return(m=l.children)==null||m.forEach((v=>{var w;W5(v.vnodeSelector)||(v.properties??(v.properties={}),(w=v.properties).key??(w.key=`${this.id}--${u++}`))})),HMe(this,l)};this.render=()=>{if(oV)return o();let l=ost(this)??null;if(l)return l;this._trackingTarget.clear(),oV=!0;try{l=jp(this._trackingTarget,o)}catch(c){throw Ce.getLogger(this).error(c),c}finally{oV=!1}return l&&ast(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),pot(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(Uoe):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Lr(this._trackingTarget),Lr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,iV(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return ZX(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+mot++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Ehe=GMe,qMe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(iV(this),this._projector.scheduleRender())}classes(...e){return s2.apply(this,e)}renderNow(){iV(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Je((()=>this.viewModel),((r,n)=>{n&&this.removeHandles("delegated-events"),r&&Tj(r)&&this.addHandles(this._delegatedEventNames.map((s=>PT(r,s,(o=>{this.emit(s,o)})))),"delegated-events")}),Sa)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Uoe),this.scheduleRender()};this.addHandles([Fj(e),Je((()=>this.uiStrings),e)]),this.addHandles($o((()=>this.container),(r=>{this.destroyed||this._attach(r)}),{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},$_[Ehe]=!0,$_.vnodeSelector="div",$_);d([g()],Gs.prototype,"_readyForTrueRender",void 0),d([g({value:null})],Gs.prototype,"container",null),d([Ai("container")],Gs.prototype,"castContainer",null),d([g()],Gs.prototype,"icon",null),d([g()],Gs.prototype,"id",null),d([g()],Gs.prototype,"label",null),d([g()],Gs.prototype,"renderable",null),d([g()],Gs.prototype,"uiStrings",void 0),d([g()],Gs.prototype,"viewModel",void 0),d([g({value:!0})],Gs.prototype,"visible",null),d([g()],Gs.prototype,"key",void 0),d([g()],Gs.prototype,"children",void 0),d([g()],Gs.prototype,"afterCreate",void 0),d([g()],Gs.prototype,"afterUpdate",void 0),d([g()],Gs.prototype,"afterRemoved",void 0),Gs=d([G("esri.widgets.Widget")],Gs);const Co=Gs;var The,$he,Mhe,Che,Ihe,Ahe,Phe,khe,Ohe,Lhe,Rhe,Nhe,Dhe,Fhe,zhe;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(The||(The={})),(function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"})($he||($he={})),(function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"})(Mhe||(Mhe={})),(function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"})(Che||(Che={})),(function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"})(Ihe||(Ihe={})),(function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"})(Ahe||(Ahe={})),(function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"})(Phe||(Phe={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"})(khe||(khe={})),(function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"})(Ohe||(Ohe={})),(function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"})(Lhe||(Lhe={})),(function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"})(Rhe||(Rhe={})),(function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"})(Nhe||(Nhe={})),(function(t){t.Pbr="Pbr",t.Unlit="Unlit"})(Dhe||(Dhe={})),(function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"})(Fhe||(Fhe={})),(function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"})(zhe||(zhe={}));const got=new Map;function vot(t){return got.get(t)}function jhe(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function bot(t,e){return t.length!==e.length||t.some(((i,r)=>i.text!==e[r].text))}function VM(t,e,i){!i||!e||t.find((r=>r.layerView===e&&r.text===i))||t.push({text:i,layerView:e})}function wot(t){return t.type==="bing-maps"}const kf=[];let oS=class extends ut{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new et,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map((s=>Je((()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]}),(()=>this._updateAttributionItems())))).toArray(),"suspension"),r.forEach((s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),i!=null&&i.removed&&i.removed.forEach((s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)})),this._updateAttributionItems()},this.addHandles([wu((()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews}),"change",(i=>this._allLayerViewsChange(i)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),$o((()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0}),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(kf.length=0,!e||!i)return void this._clear();i.forEach((n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(jhe(s,"user"))return void VM(kf,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?VM(kf,n,this._getDynamicAttribution(c,e,s)):jhe(s)&&VM(kf,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;VM(kf,n,o||s.copyright)}));const r=i.find((n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"}));if(this.view&&r){const n=vot(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)VM(kf,r,s[o])}}bot(this.items,kf)&&(this.items.removeAll(),this.items.addMany(kf)),kf.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await Yj(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,wot(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,u=l.zoomMin-(i&&l.zoomMin?1:0),p=l.zoomMax-(i&&l.zoomMax?1:0),m=new Ut({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:tt.WGS84}),v={extent:Ym(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let w=u;w<=p;w++)n[w]??(n[w]=[]),n[w].push(v)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var u;const{extent:n,scale:s}=i;let o=((u=r.tileInfo)==null?void 0:u.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=kj(n.center.clone().normalize(),tt.WebMercator),c=new Set;return a?a.filter((p=>{const m=p.id,v=!c.has(m)&&l&&p.extent&&gk(p.extent,l);return v&&c.add(m),v})).sort(((p,m)=>m.score-p.score||p.objectId-m.objectId)).map((p=>p.attribution)).join(", "):""}};d([g({readOnly:!0,type:et})],oS.prototype,"items",void 0),d([g({readOnly:!0})],oS.prototype,"state",null),d([g()],oS.prototype,"view",void 0),oS=d([G("esri.widgets.Attribution.AttributionViewModel")],oS);const YMe=oS,ml={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function _ot(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Sot(t[e])}}}function xot(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Sot(t){return function(e,...i){xot(e)?lst(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function h0(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Eot=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},KMe=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?KMe(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Eot(n)),e.push(n))}},Tot=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return KMe(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function ce(t,e,...i){return typeof t!="function"||W5(t)?Tot(t,e??null,...i):t(e,...i)}function P7t(...t){return t}const Ex="esri-attribution",Tx={base:Ex,poweredBy:`${Ex}__powered-by`,sources:`${Ex}__sources`,open:`${Ex}--open`,sourcesOpen:`${Ex}__sources--open`,link:`${Ex}__link`};let ya=class extends Co{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((r=>r.forEach((({target:n})=>this._checkSourceTextOverflow(n))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new YMe}initialize(){this.addHandles(wu((()=>{var e;return(e=this.viewModel)==null?void 0:e.items}),"change",(()=>this.scheduleRender())))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,i)=>(e.includes(i.text)||e.push(i.text),e)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Tx.open]:this._isOpen};return ce("div",{bind:this,class:this.classes(Tx.base,ml.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return ce("div",{class:Tx.poweredBy},"Powered by"," ",ce("a",{class:Tx.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[Tx.sourcesOpen]:e,[ml.interactive]:i};return ce("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Tx.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};d([g()],ya.prototype,"_isOpen",void 0),d([g()],ya.prototype,"_isInteractive",null),d([g()],ya.prototype,"_attributionTextOverflowed",void 0),d([g()],ya.prototype,"_prevSourceNodeHeight",void 0),d([g({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ya.prototype,"attributionText",null),d([g()],ya.prototype,"icon",null),d([g()],ya.prototype,"itemDelimiter",void 0),d([g()],ya.prototype,"label",null),d([g(),h0("esri/widgets/Attribution/t9n/Attribution")],ya.prototype,"messages",void 0),d([g()],ya.prototype,"view",null),d([g({type:YMe})],ya.prototype,"viewModel",void 0),d([_ot()],ya.prototype,"_toggleState",null),ya=d([G("esri.widgets.Attribution")],ya);const $ot=ya;function Mot(){const t=ge("mapview-essential-goto-duration");return t==null?t:t}function Cot(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function Iot(t,e,i){return t.goTo(e,i)}const JMe=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return ak(r),this.goToOverride?this.goToOverride(r,i):Iot(r,i.target,i.options)}};return d([g()],e.prototype,"goToOverride",void 0),d([g()],e.prototype,"view",void 0),e=d([G("esri.widgets.support.GoTo")],e),e};let Zb=class extends JMe(ut){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(rn)}destroy(){this.view=null}get canShowNorth(){return Cot(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Mot()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?Je((()=>e==null?void 0:e.rotation),this._updateForRotation,rn):Je((()=>e==null?void 0:e.camera),this._updateForCamera,rn))}_watchForView(e){this.addHandles(Je((()=>this.view),this._updateRotationWatcher,e))}};d([g({readOnly:!0})],Zb.prototype,"canShowNorth",null),d([g({readOnly:!0})],Zb.prototype,"orientation",void 0),d([g({readOnly:!0})],Zb.prototype,"state",null),d([g()],Zb.prototype,"view",void 0),Zb=d([G("esri.widgets.Compass.CompassViewModel")],Zb);const XMe=Zb,Uhe="esri-compass",Bhe={base:Uhe,iconContainer:`${Uhe}__icon-container`};let Jf=class extends Co{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new XMe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return S4({button:()=>Re(()=>Promise.resolve().then(()=>Mee),void 0),icon:()=>Re(()=>Promise.resolve().then(()=>Wmt),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return ce("div",{class:this.classes(Bhe.base,ml.widget)},ce("calcite-button",{class:ml.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},ce("div",{"aria-hidden":"true",class:Bhe.iconContainer,title:r.reset},ce("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};d([g()],Jf.prototype,"goToOverride",null),d([g()],Jf.prototype,"icon",null),d([g()],Jf.prototype,"label",null),d([g(),h0("esri/widgets/Compass/t9n/Compass")],Jf.prototype,"messages",void 0),d([g()],Jf.prototype,"view",null),d([g({type:XMe})],Jf.prototype,"viewModel",void 0),Jf=d([G("esri.widgets.Compass")],Jf);const Aot=Jf,Vhe="esri-navigation-toggle",Ghe={base:Vhe,isLayoutHorizontal:`${Vhe}--horizontal`};let aS=class extends ut{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||P6e(Ce.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles($o((()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap}),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};d([g({readOnly:!0})],aS.prototype,"state",null),d([g()],aS.prototype,"_navigationMode",void 0),d([g()],aS.prototype,"view",void 0),aS=d([G("esri.widgets.NavigationToggle.NavigationToggleViewModel")],aS);const QMe=aS;let Xf=class extends Co{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new QMe({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;cst(r),this.toggle()},e!=null&&e.isDefaultUI||A6e(Ce.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return S4({button:()=>Re(()=>Promise.resolve().then(()=>Mee),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return ce("div",{class:this.classes(Ghe.base,ml.widget,{[Ghe.isLayoutHorizontal]:this.layout==="horizontal"})},ce("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:ml.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),ce("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:ml.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};d([g()],Xf.prototype,"icon",null),d([g()],Xf.prototype,"label",null),d([g({value:"vertical"})],Xf.prototype,"layout",null),d([g(),h0("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Xf.prototype,"messages",void 0),d([g()],Xf.prototype,"view",null),d([g({type:QMe})],Xf.prototype,"viewModel",void 0),Xf=d([G("esri.widgets.NavigationToggle")],Xf);const Pot=Xf;let Yb=class extends ut{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};d([g({readOnly:!0})],Yb.prototype,"canZoomIn",null),d([g({readOnly:!0})],Yb.prototype,"canZoomOut",null),d([g()],Yb.prototype,"view",void 0),d([g()],Yb.prototype,"_scale",null),Yb=d([G("esri.widgets.Zoom.ZoomConditions2D")],Yb);const kot=Yb;let lS=class extends ut{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};d([g({readOnly:!0})],lS.prototype,"canZoomIn",null),d([g({readOnly:!0})],lS.prototype,"canZoomOut",null),d([g()],lS.prototype,"view",void 0),lS=d([G("esri.widgets.Zoom.ZoomConditions3D")],lS);const Oot=lS;let qg=class extends ut{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new kot({view:e}):e.type==="3d"&&(this._zoomConditions=new Oot({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():DA(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():DA(e.goTo({zoomFactor:.5})))}};d([g()],qg.prototype,"_zoomConditions",void 0),d([g()],qg.prototype,"canZoomIn",null),d([g()],qg.prototype,"canZoomOut",null),d([g({readOnly:!0})],qg.prototype,"state",null),d([g()],qg.prototype,"view",null),qg=d([G("esri.widgets.Zoom.ZoomViewModel")],qg);const eCe=qg,qhe={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Qf=class extends Co{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new eCe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return S4({button:()=>Re(()=>Promise.resolve().then(()=>Mee),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[qhe.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return ce("div",{class:this.classes(qhe.base,ml.widget,e)},ce("calcite-button",{class:ml.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),ce("calcite-button",{class:ml.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};d([g()],Qf.prototype,"icon",null),d([g()],Qf.prototype,"label",null),d([g({value:"vertical"})],Qf.prototype,"layout",null),d([g(),h0("esri/widgets/Zoom/t9n/Zoom")],Qf.prototype,"messages",void 0),d([g()],Qf.prototype,"view",null),d([g({type:eCe})],Qf.prototype,"viewModel",void 0),Qf=d([G("esri.widgets.Zoom")],Qf);const Lot=Qf;function Rot(t){return(t==null?void 0:t.view)!==void 0}let kN=class extends dst{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach((r=>{const n=this._find(r),s=n==null?void 0:n.widget;Rot(s)&&(s.view=i)}))},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Je((()=>this.components),this._componentsWatcher,rn),Je((()=>this.view),this._updateViewAwareWidgets,rn)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach((i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())}))}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach((i=>this.add(this._createComponent(i),this._defaultPositionLookup[i])))}_createComponent(e){const i=this._createWidget(e);return new IN({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new $ot({view:i});case"compass":return new Aot({view:i});case"navigation-toggle":return new Pot({view:i,isDefaultUI:!0});case"zoom":return new Lot({view:i})}}};d([g()],kN.prototype,"components",void 0),kN=d([G("esri.views.ui.DefaultUI")],kN);const tCe=kN;let ON=class extends tCe{constructor(e){super(e),this.components=["attribution","zoom"]}};d([g()],ON.prototype,"components",void 0),ON=d([G("esri.views.ui.2d.DefaultUI2D")],ON);const iCe=ON;let rCe=class zW{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ae(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new zW(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new ae((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new ae((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new zW(o,a,i)}},k2=class extends rCe{constructor(e,i){super(e,i,"webmap")}};function aV(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const nCe=new k2(2,34);var jW;let LN=jW=class extends ve{constructor(t){super(t),this.color=new Ze([0,0,0,1])}clone(){return new jW(le({color:this.color}))}};d([g({type:Ze,json:{write:!0}})],LN.prototype,"color",void 0),LN=jW=d([G("esri.webmap.background.ColorBackground")],LN);const E4=LN;let sCe,oCe,aCe,lCe,cCe,uCe,hCe;async function Not(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([Re(()=>import("./webglDeps-Dkg07OCJ.js"),__vite__mapDeps([167,168,169,170])),Re(()=>import("./mapViewDeps-DJMJQ6ic.js"),__vite__mapDeps([171,172,72,173,169,168,135,113,68,174,69,39,175,67,88,176,120,119,75,15,11,16,70,76,177,73,74,118,167,170,178,83,179,180,181,132,129,111,55,66,13,8,19,182,183,71,184,78,185,80,44,64,186,187,188,189,128,190,191]))]);oCe=t,aCe=e,lCe=i,cCe=r,uCe=n,hCe=s,sCe=o}var TE;let vi=(TE=class extends Git(xtt(Gqe(gWe(eWe(iQe))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Kd({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new u4({actionMap:new EQ({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new et,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new SMe,this.type="2d",this.view2dType=null,this.ui=new iCe,this.test={takeScreenshot:async i=>jnt(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},tqe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Lr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Urt(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return p2e(i.spatialReference,r)}get background(){return aV(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return Snt(this)}set highlightOptions(e){Ent(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0))||e);if(ge("esri-2d-log-updating")){const a=this.allLayerViews.reduce(((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating})),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new or({rings:[e.map((i=>[i[0],i[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return Tnt(this,e,i)}async takeScreenshot(e){return znt(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return aV(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return aV(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return Iue.hasLayerViewModule(e)}importLayerView(e){return Iue.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ce.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter((u=>u.clips.every((p=>dMe(this,p,e,i))))).reverse(),s=new globalThis.Map(n.map((u=>[u.layer.uid,u]))),o=[];let a=0,l=0;for(;a<r.results.length||l<n.length;){const u=r.results.at(a);if(u&&u.type!=="graphic"){++a;continue}const p=s.get((c=(u==null?void 0:u.layer)??(u==null?void 0:u.graphic.layer))==null?void 0:c.uid);if((!u||p)&&l<n.length&&n.at(l)!==p){const m=n.at(l);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:i,layerView:m}),++l}else u&&(o.push({graphic:u.graphic,layerView:p}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Jnt(this.type);if(ge("safari")&&ge("safari")<9&&(e=new ae("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ge("safari")})),e!=null){Ce.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");throw s.innerHTML="https://esriurl.com/systemRequirements",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/systemRequirements",i.appendChild(r),i.appendChild(n),i.appendChild(s),this.surface.appendChild(i),e}}loadAsyncDependencies(){return Not()}_getDefaultViewpoint(){var T;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((T=l==null?void 0:l.targetGeometry)==null?void 0:T.extent)??i,u=c==null?void 0:c.center,p=(l==null?void 0:l.rotation)??0,m=(l==null?void 0:l.scale)||c&&m4(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),v=a.center??u,w=a.rotation??p,_=a.scale??m;return v&&_?new Ps({targetGeometry:v,scale:_,rotation:w}):null}_startup(){var l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new krt(this.surface),r=new sCe(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new uCe,this._magnifierView.magnifier=this.magnifier,this._gridView=new hCe;const n=new lCe({view:this});this._set("labelManager",n);const s=new xrt({view:this});this._set("animationManager",s);const o=new cCe({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),r.on("webgl-error",(c=>this.fatalError=c.error)),Je((()=>this.stationary),(c=>r.stationary=c),Sa),Je((()=>this.background),(c=>{r.backgroundColor=c==null?void 0:c.color,this._magnifierView.backgroundColor=c==null?void 0:c.color}),Sa),Je((()=>this.magnifier),(c=>this._magnifierView.magnifier=c),Sa),Je((()=>this.grid),(c=>this._gridView.grid=c),Sa),Je((()=>this.renderingOptions),(c=>r.renderingOptions=c),Sa),Je((()=>this.highlights.items.map((c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})))),(()=>{r.highlightGradient=_nt(r.highlightGradient,this.highlights.items)}),Sa),Je((()=>this.state.id),(()=>r.state=this.state),Sa)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((c=>c(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((i=>{this.stage.addChild(i.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new Crt(mo.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new oCe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new aCe(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},TE.type="2d",TE);d([g({constructOnly:!0})],vi.prototype,"deactivatedWebGLExtensions",void 0),d([g({constructOnly:!0})],vi.prototype,"debugWebGLExtensions",void 0),d([g({readOnly:!0})],vi.prototype,"featuresTilingScheme",void 0),d([g({readOnly:!0})],vi.prototype,"graphicsTileStore",null),d([g()],vi.prototype,"graphicsView",void 0),d([g()],vi.prototype,"constraintsInfo",null),d([g()],vi.prototype,"initialExtentRequired",null),d([g()],vi.prototype,"labelManager",void 0),d([g({type:u4,nonNullable:!0})],vi.prototype,"navigation",void 0),d([g({constructOnly:!0})],vi.prototype,"renderCanvas",void 0),d([g()],vi.prototype,"renderingOptions",void 0),d([g({constructOnly:!0})],vi.prototype,"supersampleScreenshotsEnabled",void 0),d([g({readOnly:!0})],vi.prototype,"supportsGround",void 0),d([g()],vi.prototype,"defaultsFromMapSettings",null),d([g({readOnly:!0})],vi.prototype,"typeSpecificPreconditionsReady",null),d([g({type:E4})],vi.prototype,"background",null),d([g()],vi.prototype,"center",null),d([g({type:et})],vi.prototype,"floors",void 0),d([g()],vi.prototype,"grid",void 0),d([g({type:qv})],vi.prototype,"highlightOptions",null),d([g()],vi.prototype,"map",void 0),d([g()],vi.prototype,"padding",null),d([g({readOnly:!0})],vi.prototype,"rendering",null),d([g({readOnly:!0})],vi.prototype,"resolution",null),d([g()],vi.prototype,"scale",null),d([g({constructOnly:!0})],vi.prototype,"spatialReferenceLocked",void 0),d([g({readOnly:!0})],vi.prototype,"tileInfo",null),d([g({type:SMe,readOnly:!0})],vi.prototype,"timeline",void 0),d([g({readOnly:!0})],vi.prototype,"type",void 0),d([g({readOnly:!0})],vi.prototype,"updating",null),d([g({readOnly:!0})],vi.prototype,"view2dType",void 0),d([g({readOnly:!0})],vi.prototype,"visibleArea",null),d([g()],vi.prototype,"zoom",null),d([g({readOnly:!0})],vi.prototype,"navigating",null),d([g(),Ai((t=>t instanceof tCe?t:fk(iCe,t)))],vi.prototype,"ui",void 0),vi=d([G("esri.views.View2D")],vi);const Dot=vi;let RN=class extends Dot{constructor(e){super(e),this.view2dType="map"}};d([g({readOnly:!0})],RN.prototype,"view2dType",void 0),RN=d([G("esri.views.MapView")],RN);const dCe=RN;let Fot=class pCe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(MG),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new pCe,r=this._originStores[Dt.DEFAULTS];r&&r.forEach(((n,s)=>{i.set(s,le(n),Dt.DEFAULTS)}));for(let n=Dt.SERVICE;n<MG;n++){const s=this._originStores[n];s&&s.forEach(((o,a)=>{e&&e.has(a)||i.set(a,le(o),n)}))}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Dt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=Dt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||Dt.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const fCe=t=>{let e=class extends t{constructor(...i){super(...i);const r=Ra(this),n=r.store,s=new Fot;r.store=s,s1e(r,n,s)}read(i,r){a1e(this,i,r)}getAtOrigin(i,r){const n=lV(this),s=Nm(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach((a=>{o[a]=n.get(a,s)})),o}originOf(i){return jA(this.originIdOf(i))}originIdOf(i){return lV(this).originOf(i)}revert(i,r){const n=lV(this),s=Nm(r),o=Ra(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach((l=>{o.invalidate(l),n.revert(l,s),o.commit(l)}))}};return e=d([G("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function lV(t){return Ra(t).store}let Hhe=class extends fCe(ut){};Hhe=d([G("esri.core.ReadOnlyMultiOriginJSONSupport")],Hhe);const zot=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){Ra(this).clearOrigin(i,Nm(r))}write(i,r){return u1e(this,i=i||{},r),i}setAtOrigin(i,r,n){Ra(this).setAtOrigin(i,r,Nm(n))}removeOrigin(i){const r=Whe(this),n=Nm(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),Dt.USER)}updateOrigin(i,r){const n=Whe(this),s=Nm(r),o=pu(this,i);for(let a=s+1;a<MG;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=d([G("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Whe(t){return Ra(t).store}const T4=t=>{let e=class extends zot(fCe(t)){constructor(...i){super(...i)}};return e=d([G("esri.core.MultiOriginJSONSupport")],e),e};let UW=class extends T4(ut){};UW=d([G("esri.core.MultiOriginJSONSupport")],UW);async function jot(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return YS(t);const i=tt.WGS84;return await WX(e,i),_0(t,i)}function Uot(t,e){if(!BQ(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function BQ(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function W7t(t){return BQ(t,VQ.HOSTED_SERVICE)}function Bot(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function Z7t(t,e,i){i?Uot(t,e):Bot(t,e)}async function Y7t(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return jot(i)}const VQ={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function Vot(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let Hg=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([g({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"facilityIdField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"layerId",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"nameField",void 0),d([g({type:String,json:{write:!0}})],Hg.prototype,"siteIdField",void 0),d([g({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Hg.prototype,"sublayerId",void 0),Hg=d([G("esri.layers.support.FacilityLayerInfo")],Hg);const Got=Hg;let ih=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"facilityIdField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"layerId",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"levelIdField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"levelNumberField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"longNameField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"shortNameField",void 0),d([g({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ih.prototype,"sublayerId",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ih.prototype,"verticalOrderField",void 0),ih=d([G("esri.layers.support.LevelLayerInfo")],ih);const qot=ih;let Kb=class extends ve{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};d([g({type:String,json:{write:{isRequired:!0}}})],Kb.prototype,"layerId",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],Kb.prototype,"nameField",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],Kb.prototype,"siteIdField",void 0),d([g({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Kb.prototype,"sublayerId",void 0),Kb=d([G("esri.layers.support.SiteLayerInfo")],Kb);const Hot=Kb;let cS=class extends ve{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};d([g({type:qot,json:{write:{isRequired:!0}}})],cS.prototype,"levelLayer",void 0),d([g({type:Got,json:{write:{isRequired:!0}}})],cS.prototype,"facilityLayer",void 0),d([g({type:Hot,json:{write:!0}})],cS.prototype,"siteLayer",void 0),cS=d([G("esri.support.MapFloorInfo")],cS);const Wot=cS;var Cp;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(Cp||(Cp={}));var BW;let uS=BW=class extends ve{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new BW(le({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};d([g({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],uS.prototype,"activeRange",void 0),d([g({type:[Number],json:{write:!0}})],uS.prototype,"currentRangeExtent",void 0),d([g({type:[Number],json:{write:!0}})],uS.prototype,"fullRangeExtent",void 0),uS=BW=d([G("esri.webdoc.RangeInfo")],uS);const GQ=uS;var VW;let _d=VW=class extends ve{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new VW(le({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};d([g({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],_d.prototype,"enabled",void 0),d([g({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],_d.prototype,"longNames",void 0),d([g({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],_d.prototype,"minimized",void 0),d([g({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],_d.prototype,"pinnedLevels",void 0),d([g({type:String,json:{read:{source:"site"},write:{target:"site"}}})],_d.prototype,"site",void 0),d([g({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],_d.prototype,"facility",void 0),d([g({type:String,json:{read:{source:"level"},write:{target:"level"}}})],_d.prototype,"level",void 0),_d=VW=d([G("esri.webdoc.widgets.FloorFilter")],_d);const Zot=_d;var GW;const dR=new Bt({slider:"slider",picker:"picker"});let hS=GW=class extends ve{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new GW({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};d([g({type:dR.apiValues,nonNullable:!0,json:{type:dR.jsonValues,default:null,read:{reader:dR.read},write:{isRequired:!0,writer:dR.write}}})],hS.prototype,"interactionMode",void 0),d([g({type:ri,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],hS.prototype,"numStops",void 0),d([g({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],hS.prototype,"stopInterval",void 0),hS=GW=d([G("esri.webdoc.widgets.Range")],hS);const Yot=hS,qQ=bs()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let kh=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return kEe(this.value,this.unit,"milliseconds")}};d([dt(qQ,{nonNullable:!0})],kh.prototype,"unit",void 0),d([g({type:Number,json:{write:!0},nonNullable:!0})],kh.prototype,"value",void 0),kh=d([G("esri.time.TimeInterval")],kh);var qW;let Ss=qW=class extends ve{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Wi.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Vn(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new Wi({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?kh.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Vn("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map((e=>new Date(e))):null}writeStops(t,e,i){t!=null&&t.length&&Vn(i,t.map((r=>r.getTime())),e)}clone(){return new qW(le({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};d([g({type:Wi,json:{type:[[ri,OT]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ss.prototype,"currentTimeExtent",void 0),d([je("currentTimeExtent")],Ss.prototype,"readCurrentTimeExtent",null),d([Ge("currentTimeExtent")],Ss.prototype,"writeCurrentTimeExtent",null),d([g({type:Wi,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ss.prototype,"fullTimeExtent",void 0),d([je("fullTimeExtent")],Ss.prototype,"readFullTimeExtent",null),d([Ge("fullTimeExtent")],Ss.prototype,"writeFullTimeExtent",null),d([g({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ss.prototype,"loop",void 0),d([g({type:ri,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],Ss.prototype,"numStops",void 0),d([g({type:[1,2],nonNullable:!0,json:{type:ri,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ss.prototype,"numThumbs",void 0),d([g({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ss.prototype,"stopDelay",void 0),d([g({type:kh,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:qQ.jsonValues.filter((t=>t!=="esriTimeUnitsUnknown"))}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],Ss.prototype,"stopInterval",void 0),d([je("stopInterval")],Ss.prototype,"readStopInterval",null),d([Ge("stopInterval")],Ss.prototype,"writeStopInterval",null),d([g({type:[Date],json:{type:[ri],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ss.prototype,"stops",void 0),d([je("stops")],Ss.prototype,"readStops",null),d([Ge("stops")],Ss.prototype,"writeStops",null),Ss=qW=d([G("esri.webdoc.widgets.TimeSlider")],Ss);const Kot=Ss;var HW;let dS=HW=class extends ve{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new HW(le({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};d([g({type:Yot,json:{write:!0}})],dS.prototype,"range",void 0),d([g({type:Kot,json:{write:!0}})],dS.prototype,"timeSlider",void 0),d([g({type:Zot,json:{write:!0}})],dS.prototype,"floorFilter",void 0),dS=HW=d([G("esri.webdoc.Widgets")],dS);const Jot=dS,Xot={width:600,height:400},pR=1.5;function Qot(t,e){e=e||Xot;let{width:i,height:r}=e;const n=i/r;return n<pR?r=i/pR:n>pR&&(i=r*pR),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function eat(t,e){return{...mCe(t,e),readResourcePaths:[]}}function tGt(t,e,i){const r=qn(t.itemUrl);return{...mCe(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function mCe(t,e){return{origin:e,url:qn(t.itemUrl),portal:t.portal||Ue.getDefault(),portalItem:t}}let Sm=class extends ve{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((n=>n.toJSON())),i=this.geometries[0],r={};return r.outSR=QD(this.outSpatialReference),r.inSR=QD(i.spatialReference),r.geometries=JSON.stringify({geometryType:jT(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};d([g()],Sm.prototype,"geometries",void 0),d([g({type:tt,json:{read:{source:"outSR"}}})],Sm.prototype,"outSpatialReference",void 0),d([g()],Sm.prototype,"transformation",void 0),d([g()],Sm.prototype,"transformForward",void 0),Sm=d([G("esri.rest.support.ProjectParameters")],Sm);const tat=Zr(Sm);async function yCe(t,e,i){e=tat(e);const r=Ok(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=jT(e.geometries[0]),a=p4(n,i);return ni(r.path+"/project",a).then((({data:{geometries:l}})=>a$e(l,o,s)))}function iat(t,e){var i;return e.resourceInfo?gCe(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?rat(t,e,e.portalItem):Promise.resolve()}function gCe(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||Ue.getDefault()),Re(()=>import("./layersCreator-CLMvck7j.js"),__vite__mapDeps([154,155,156,157,158,159])).then((({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,a)),Promise.allSettled(s).then((()=>{}))}))}async function rat(t,e,i){var o;if(await i.load().catch((a=>{throw new ae(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})})),i.type!==t.itemType)throw new ae(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=eat(i,t.origin);await nat(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await oat(e.initialViewProperties,i,Ce.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function nat(t,e,i,r){const n=sat(t,i);return e.read(n,r),gCe(e,n,r)}function sat(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function oat(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await aat(t,e,i);return n?new Ps({targetGeometry:n}):null}async function aat(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Ym(n);const{getGeometryServiceURL:s}=await Re(()=>import("./geometryServiceUtils-Dw286zY-.js"),[]);try{const o=await s(e),a=new Sm({geometries:[n],outSpatialReference:r});return(await yCe(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function Zhe(t){return{enabled:!!(t!=null&&t.length)}}var WW;let pS=WW=class extends ve{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new WW({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([g({type:Boolean,json:{write:!0}})],pS.prototype,"exactMatch",void 0),d([g({type:String,json:{write:!0}})],pS.prototype,"name",void 0),d([dt(xQ)],pS.prototype,"type",void 0),pS=WW=d([G("esri.webdoc.applicationProperties.SearchLayerField")],pS);const lat=pS;var ZW;let fS=ZW=class extends ve{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new ZW(le({field:this.field,id:this.id,subLayer:this.subLayer}))}};d([g({type:lat,json:{write:{isRequired:!0}}})],fS.prototype,"field",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],fS.prototype,"id",void 0),d([g({type:ri,json:{write:!0}})],fS.prototype,"subLayer",void 0),fS=ZW=d([G("esri.webdoc.applicationProperties.SearchLayer")],fS);const cat=fS;var YW;let mS=YW=class extends ve{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new YW({exactMatch:this.exactMatch,type:this.type,name:this.name})}};d([g({type:Boolean,json:{write:!0}})],mS.prototype,"exactMatch",void 0),d([g({type:String,json:{write:!0}})],mS.prototype,"name",void 0),d([dt(xQ)],mS.prototype,"type",void 0),mS=YW=d([G("esri.webdoc.applicationProperties.SearchTableField")],mS);const uat=mS;var KW;let iI=KW=class extends ve{constructor(t){super(t),this.field=null,this.id=null}clone(){return new KW(le({field:this.field,id:this.id}))}};d([g({type:uat,json:{write:{isRequired:!0}}})],iI.prototype,"field",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],iI.prototype,"id",void 0),iI=KW=d([G("esri.webdoc.applicationProperties.SearchTable")],iI);const hat=iI;var JW;const vCe=et.ofType(cat),bCe=et.ofType(hat);let xd=JW=class extends ve{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new vCe,this.tables=new bCe}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new JW(le({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};d([g({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],xd.prototype,"addressSearchEnabled",void 0),d([je("addressSearchEnabled")],xd.prototype,"readAddressSearchEnabled",null),d([Ge("addressSearchEnabled")],xd.prototype,"writeAddressSearchEnabled",null),d([g({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],xd.prototype,"enabled",void 0),d([g({type:String,json:{write:!0}})],xd.prototype,"hintText",void 0),d([g({type:vCe,json:{write:{overridePolicy:Zhe},origins:{"web-scene":{write:{isRequired:!0}}}}})],xd.prototype,"layers",void 0),d([g({type:bCe,json:{read:!0,write:{overridePolicy:Zhe}}})],xd.prototype,"tables",void 0),xd=JW=d([G("esri.webdoc.applicationProperties.Search")],xd);const dat=xd;var XW;let NN=XW=class extends ve{constructor(t){super(t),this.search=null}clone(){return new XW(le({search:this.search}))}};d([g({type:dat,json:{write:!0}})],NN.prototype,"search",void 0),NN=XW=d([G("esri.webdoc.applicationProperties.Viewing")],NN);const pat=NN;var QW;let yS=QW=class extends ve{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new QW(le({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};d([g({json:{write:!0}})],yS.prototype,"editing",void 0),d([g({json:{write:!0}})],yS.prototype,"offline",void 0),d([g({type:pat,json:{write:!0}})],yS.prototype,"viewing",void 0),yS=QW=d([G("esri.webmap.ApplicationProperties")],yS);const fat=yS;var eZ;let Lm=eZ=class extends ve{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return x1e(this.url)}get isDataURI(){return vy(this.url)}clone(){return new eZ({url:this.url})}};d([g({type:String,json:{write:{isRequired:!0}}})],Lm.prototype,"url",void 0),d([g()],Lm.prototype,"isSecureUrl",null),d([g()],Lm.prototype,"isDataURI",null),Lm=eZ=d([G("esri.webdoc.support.SlideThumbnail")],Lm);const mat={type:Wi,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Wi.fromArray(t):Wi.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new ae("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[ri,OT]]}}}}};var tZ;let Sd=tZ=class extends l1.IdentifiableMixin(ve){constructor(t){super(t),this.name=null,this.thumbnail=new Lm,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Lm({url:t}):Zr(Lm,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&Ce.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return Ps.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n==null||n.type==="extent")n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new ae("property:unsupported",s)):Ce.getLogger(this).error(s)}}clone(){return new tZ(le({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};d([g({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Sd.prototype,"name",void 0),d([g({type:Lm,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Sd.prototype,"thumbnail",void 0),d([Ai("thumbnail")],Sd.prototype,"castThumbnail",null),d([g(mat)],Sd.prototype,"timeExtent",void 0),d([g({type:Ps,nonNullable:!0,json:{write:!0}})],Sd.prototype,"viewpoint",null),d([je("viewpoint",["extent","viewpoint"])],Sd.prototype,"readViewpoint",null),d([Ge("viewpoint")],Sd.prototype,"writeViewpoint",null),Sd=tZ=d([G("esri.webmap.Bookmark")],Sd);const yat=Sd;let em=class extends Et.ClonableMixin(ut){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=xu,this.viewpoint=null}};d([g({type:E4})],em.prototype,"background",void 0),d([g({type:GQ})],em.prototype,"rangeInfo",void 0),d([g({type:tt})],em.prototype,"spatialReference",void 0),d([g({type:Wi})],em.prototype,"timeExtent",void 0),d([g({nonNullable:!0})],em.prototype,"timeZone",void 0),d([g({type:Ps})],em.prototype,"viewpoint",void 0),em=d([G("esri.webmap.InitialViewProperties")],em);const Z5=em,wCe=et.ofType(yat),gat=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),vat="ArcGIS Pro",bat=VQ.JSAPI;let Tr=class extends T4(ra.LoadableMixin(Mp.EsriPromiseMixin(lQ))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new wCe,this.floorInfo=null,this.initialViewProperties=new Z5,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=ck((async(i,r,n)=>{const{save:s,saveAs:o}=await Re(()=>import("./webdocSaveUtils-BhxnKJWs.js"),__vite__mapDeps([243,244,245,246,247,248]));switch(i){case Cp.SAVE:return s(this.context,this,r);case Cp.SAVE_AS:return o(this.context,this,n,r)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Lr(this.portalItem)}initialize(){if(this.when().catch((e=>{Ce.getLogger(this).error("#load()","Failed to load web map",e)})),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=bat}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=P1e}readInitialViewProperties(e,i){var o,a;const r=new Z5;i.background&&(r.background=E4.fromJSON(i.background));const n=(o=i.initialState)==null?void 0:o.timeExtent;n&&(r.timeExtent=Wi.fromArray(n));const s=(a=i.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&k2.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===vat&&(s.rotation*=-1),r.viewpoint=Ps.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=GQ.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=tt.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const l={};o&&(l.viewpoint=o.write({},n)),s&&(l.timeExtent=s.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new k2(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(iat(this.context,this)),Promise.resolve(this)}loadAll(){return Jj(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();l1e(this,e,(n=>super.read(e,n)),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new ae("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Ce.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(Cp.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Cp.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find((a=>a.id===e.id))}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:$1e(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce(((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i)),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map((n=>Pq(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i))).filter(rs).toArray()}_validateJSON(e){const i=k2.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=l=>this.allLayers.some((c=>c.id===l));if(i!=null&&i.layers&&(i.layers=i.layers.filter((l=>r(l.id)))),i!=null&&i.tables&&(i.tables=i.tables.filter((l=>this.tables.some((c=>c.id===l.id))))),e){const l=(a=e.editing)==null?void 0:a.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach((l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter((c=>r(c.id))))}))}async _updateFromInternal(e,i){if(i??(i={}),await P_((()=>e.ready)),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Ps({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=Qot(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(vy(e)){const i=O_(e),r=i==null?void 0:i.mediaType,n=r&&gat.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};d([g()],Tr.prototype,"_updateFromPromise",void 0),d([g({type:fat,json:{write:!0}})],Tr.prototype,"applicationProperties",void 0),d([g({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Tr.prototype,"authoringApp",null),d([Ge("authoringApp")],Tr.prototype,"writeAuthoringApp",null),d([g({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Tr.prototype,"authoringAppVersion",null),d([Ge("authoringAppVersion")],Tr.prototype,"writeAuthoringAppVersion",null),d([g({type:wCe,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Tr.prototype,"bookmarks",void 0),d([g({type:Wot,json:{name:"mapFloorInfo",write:!0}})],Tr.prototype,"floorInfo",void 0),d([g({type:Z5,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:E4},"initialState.timeExtent":{type:Wi},"initialState.viewpoint":{type:Ps},mapRangeInfo:{type:GQ},spatialReference:{type:tt},"timeZone:":{type:String}}}}})],Tr.prototype,"initialViewProperties",void 0),d([je("initialViewProperties")],Tr.prototype,"readInitialViewProperties",null),d([Ge("initialViewProperties")],Tr.prototype,"writeInitialViewProperties",null),d([g({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Tr.prototype,"layers",void 0),d([Ge("layers")],Tr.prototype,"writeLayers",null),d([g({type:Lt})],Tr.prototype,"portalItem",void 0),d([g()],Tr.prototype,"resourceInfo",void 0),d([g({readOnly:!0,type:k2,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Tr.prototype,"sourceVersion",void 0),d([je("sourceVersion")],Tr.prototype,"readSourceVersion",null),d([Ge("sourceVersion")],Tr.prototype,"writeSourceVersion",null),d([g({json:{read:!1,write:{ignoreOrigin:!0}}})],Tr.prototype,"tables",void 0),d([Ge("tables")],Tr.prototype,"writeTables",null),d([g()],Tr.prototype,"thumbnailUrl",null),d([g()],Tr.prototype,"updatingFromView",null),d([g({type:Jot,json:{write:!0}})],Tr.prototype,"widgets",void 0),Tr=d([G("esri.WebDocument2D")],Tr);const wat=Tr,mr=(t=>t)(["operational-layers","basemap","ground"]);var iZ;let Jb=iZ=class extends ve{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new iZ({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([g({type:String,json:{write:!0}})],Jb.prototype,"expression",void 0),d([g({type:String,json:{write:!0}})],Jb.prototype,"name",void 0),d([g({type:["boolean","date","number","string"],json:{write:!0}})],Jb.prototype,"returnType",void 0),d([g({type:String,json:{write:!0}})],Jb.prototype,"title",void 0),Jb=iZ=d([G("esri.form.ExpressionInfo")],Jb);const _at=Jb;let Xb=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};d([g({type:String,json:{write:!0}})],Xb.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],Xb.prototype,"label",void 0),d([g()],Xb.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Xb.prototype,"visibilityExpression",void 0),Xb=d([G("esri.form.elements.Element")],Xb);const d0=Xb;let DN=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.type=null}};d([g()],DN.prototype,"type",void 0),DN=d([G("esri.form.elements.inputs.attachments.Input")],DN);const p0=DN,$4=["any","capture","upload"];let gS=class extends p0{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};d([g({type:["audio"],readOnly:!0,json:{write:!0}})],gS.prototype,"type",void 0),d([g({type:$4,json:{write:!0}})],gS.prototype,"inputMethod",void 0),d([g({type:Number,json:{write:!0}})],gS.prototype,"maxDuration",void 0),gS=d([G("esri.form.elements.inputs.attachments.AudioInput")],gS);const Yhe=gS;let rI=class extends p0{constructor(e){super(e),this.type="document",this.maxFileSize=null}};d([g({type:["document"],readOnly:!0,json:{write:!0}})],rI.prototype,"type",void 0),d([g({type:Number,json:{write:!0}})],rI.prototype,"maxFileSize",void 0),rI=d([G("esri.form.elements.inputs.attachments.DocumentInput")],rI);const Khe=rI;let vS=class extends p0{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};d([g({type:["image"],readOnly:!0,json:{write:!0}})],vS.prototype,"type",void 0),d([g({type:$4,json:{write:!0}})],vS.prototype,"inputMethod",void 0),d([g({type:Number,json:{write:!0}})],vS.prototype,"maxImageSize",void 0),vS=d([G("esri.form.elements.inputs.attachments.ImageInput")],vS);const Jhe=vS;let nI=class extends p0{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};d([g({type:["signature"],readOnly:!0,json:{write:!0}})],nI.prototype,"type",void 0),d([g({type:$4,json:{write:!0}})],nI.prototype,"inputMethod",void 0),nI=d([G("esri.form.elements.inputs.attachments.SignatureInput")],nI);const Xhe=nI;let bS=class extends p0{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};d([g({type:["video"],readOnly:!0,json:{write:!0}})],bS.prototype,"type",void 0),d([g({type:$4,json:{write:!0}})],bS.prototype,"inputMethod",void 0),d([g({type:Number,json:{write:!0}})],bS.prototype,"maxDuration",void 0),bS=d([G("esri.form.elements.inputs.attachments.VideoInput")],bS);const Qhe=bS;function _Ce(t){return{nestableTypes:{base:p0,key:"type",typeMap:{audio:Yhe,document:Khe,image:Jhe,signature:Xhe,video:Qhe}},allTypes:{base:p0,key:"type",typeMap:{attachment:t,audio:Yhe,document:Khe,image:Jhe,signature:Xhe,video:Qhe}}}}function xat(t,e,i){return t?t.map((r=>Bp(e.nestableTypes,r))):null}function Sat(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((n=>r[n.type])).map((n=>r[n.type].fromJSON(n)))}function Eat(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter((n=>r[n.type])).map((n=>n.toJSON()))}let Pd=class extends p0{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return xat(e,cV)}readInputs(e,i){return Sat(i.inputTypes,cV)}writeInputs(e,i){i.inputTypes=Eat(e,cV)}};d([g({type:["attachment"],readOnly:!0,json:{write:!0}})],Pd.prototype,"type",void 0),d([g({type:["any","exact","exactOrNone"],json:{write:!0}})],Pd.prototype,"attachmentAssociationType",void 0),d([g({json:{write:{isRequired:!0}}})],Pd.prototype,"inputTypes",void 0),d([Ai("inputTypes")],Pd.prototype,"castInputs",null),d([je("inputTypes")],Pd.prototype,"readInputs",null),d([Ge("inputTypes")],Pd.prototype,"writeInputs",null),Pd=d([G("esri.form.elements.inputs.attachments.AttachmentInput")],Pd);const cV=_Ce(Pd),Tat=Pd;var rZ;const $at=_Ce(Tat);let ql=rZ=class extends d0{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new rZ({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};d([g({type:Boolean,json:{write:!0}})],ql.prototype,"allowUserRename",void 0),d([g({type:String,json:{write:{isRequired:!0}}})],ql.prototype,"attachmentKeyword",void 0),d([g({type:Boolean,json:{write:!0}})],ql.prototype,"displayFilename",void 0),d([g({type:String,json:{write:!0}})],ql.prototype,"editableExpression",void 0),d([g({type:String,json:{write:!0}})],ql.prototype,"filenameExpression",void 0),d([g({types:$at.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ql.prototype,"input",void 0),d([g({type:Number,json:{write:!0}})],ql.prototype,"maxAttachmentCount",void 0),d([g({type:Number,json:{write:!0}})],ql.prototype,"minAttachmentCount",void 0),d([g({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ql.prototype,"type",void 0),d([g({type:Boolean,json:{write:!0}})],ql.prototype,"useOriginalFilename",void 0),ql=rZ=d([G("esri.form.elements.AttachmentElement")],ql);const ede=ql;let FN=class extends ve{constructor(e){super(e),this.type=null}};d([g()],FN.prototype,"type",void 0),FN=d([G("esri.form.elements.inputs.Input")],FN);const wy=FN;let sI=class extends wy{constructor(e){super(e),this.maxLength=null,this.minLength=0}};d([g({type:Number,json:{write:!0}})],sI.prototype,"maxLength",void 0),d([g({type:Number,json:{write:!0}})],sI.prototype,"minLength",void 0),sI=d([G("esri.form.elements.inputs.TextInput")],sI);const HQ=sI;var nZ;let zN=nZ=class extends HQ{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new nZ({maxLength:this.maxLength,minLength:this.minLength})}};d([g({type:["barcode-scanner"],json:{read:!1,write:!0}})],zN.prototype,"type",void 0),zN=nZ=d([G("esri.form.elements.inputs.BarcodeScannerInput")],zN);const Mat=zN;var sZ;let wS=sZ=class extends wy{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new sZ({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};d([g({type:String,json:{write:!0}})],wS.prototype,"noValueOptionLabel",void 0),d([g({type:Boolean,json:{write:!0}})],wS.prototype,"showNoValueOption",void 0),d([g({type:["combo-box"],json:{read:!1,write:!0}})],wS.prototype,"type",void 0),wS=sZ=d([G("esri.form.elements.inputs.ComboBoxInput")],wS);const Cat=wS;var oZ;function tde(t){return t??null}function ide(t){return t??null}let Ed=oZ=class extends wy{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return tde(e.max)}writeMax(t,e){e.max=ide(t)}readMin(t,e){return tde(e.min)}writeMin(t,e){e.min=ide(t)}clone(){return new oZ({max:this.max,min:this.min})}};d([g({type:String,json:{type:String,write:!0}})],Ed.prototype,"max",void 0),d([je("max")],Ed.prototype,"readMax",null),d([Ge("max")],Ed.prototype,"writeMax",null),d([g({type:String,json:{type:String,write:!0}})],Ed.prototype,"min",void 0),d([je("min")],Ed.prototype,"readMin",null),d([Ge("min")],Ed.prototype,"writeMin",null),d([g({type:["date-picker"],json:{read:!1,write:!0}})],Ed.prototype,"type",void 0),Ed=oZ=d([G("esri.form.elements.inputs.DatePickerInput")],Ed);const Iat=Ed;var aZ;function uV(t){return t??null}function hV(t){return t??null}let Ha=aZ=class extends wy{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return uV(e.max)}writeMax(t,e){e.max=hV(t)}readMin(t,e){return uV(e.min)}writeMin(t,e){e.min=hV(t)}readTimeResolution(t,e){return uV(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=hV(t)}clone(){return new aZ({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([g({type:Boolean,json:{write:!0}})],Ha.prototype,"includeTimeOffset",void 0),d([g({type:String,json:{type:String,write:!0}})],Ha.prototype,"max",void 0),d([je("max")],Ha.prototype,"readMax",null),d([Ge("max")],Ha.prototype,"writeMax",null),d([g({type:String,json:{type:String,write:!0}})],Ha.prototype,"min",void 0),d([je("min")],Ha.prototype,"readMin",null),d([Ge("min")],Ha.prototype,"writeMin",null),d([g({type:String,json:{type:String,write:!0}})],Ha.prototype,"timeResolution",void 0),d([je("timeResolution")],Ha.prototype,"readTimeResolution",null),d([Ge("timeResolution")],Ha.prototype,"writeTimeResolution",null),d([g({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ha.prototype,"type",void 0),Ha=aZ=d([G("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ha);const Aat=Ha;var lZ;function rde(t){return t!=null?new Date(t):null}function nde(t){return t?t.getTime():null}let rh=lZ=class extends wy{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return rde(e.max)}writeMax(t,e){e.max=nde(t)}readMin(t,e){return rde(e.min)}writeMin(t,e){e.min=nde(t)}clone(){return new lZ({includeTime:this.includeTime,max:this.max,min:this.min})}};d([g({type:Boolean,json:{write:!0}})],rh.prototype,"includeTime",void 0),d([g({type:Date,json:{type:Number,write:!0}})],rh.prototype,"max",void 0),d([je("max")],rh.prototype,"readMax",null),d([Ge("max")],rh.prototype,"writeMax",null),d([g({type:Date,json:{type:Number,write:!0}})],rh.prototype,"min",void 0),d([je("min")],rh.prototype,"readMin",null),d([Ge("min")],rh.prototype,"writeMin",null),d([g({type:["datetime-picker"],json:{read:!1,write:!0}})],rh.prototype,"type",void 0),rh=lZ=d([G("esri.form.elements.inputs.DateTimePickerInput")],rh);const Pat=rh;var cZ;let _S=cZ=class extends wy{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new cZ({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};d([g({type:String,json:{write:!0}})],_S.prototype,"noValueOptionLabel",void 0),d([g({type:Boolean,json:{write:!0}})],_S.prototype,"showNoValueOption",void 0),d([g({type:["radio-buttons"],json:{read:!1,write:!0}})],_S.prototype,"type",void 0),_S=cZ=d([G("esri.form.elements.inputs.RadioButtonsInput")],_S);const kat=_S;var uZ;let xS=uZ=class extends wy{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new uZ({offValue:this.offValue,onValue:this.onValue})}};d([g({type:[String,Number],json:{write:!0}})],xS.prototype,"offValue",void 0),d([g({type:[String,Number],json:{write:!0}})],xS.prototype,"onValue",void 0),d([g({type:["switch"],json:{read:!1,write:!0}})],xS.prototype,"type",void 0),xS=uZ=d([G("esri.form.elements.inputs.SwitchInput")],xS);const Oat=xS;var hZ;let jN=hZ=class extends HQ{constructor(t){super(t),this.type="text-area"}clone(){return new hZ({maxLength:this.maxLength,minLength:this.minLength})}};d([g({type:["text-area"],json:{read:!1,write:!0}})],jN.prototype,"type",void 0),jN=hZ=d([G("esri.form.elements.inputs.TextAreaInput")],jN);const Lat=jN;var dZ;let UN=dZ=class extends HQ{constructor(t){super(t),this.type="text-box"}clone(){return new dZ({maxLength:this.maxLength,minLength:this.minLength})}};d([g({type:["text-box"],json:{read:!1,write:!0}})],UN.prototype,"type",void 0),UN=dZ=d([G("esri.form.elements.inputs.TextBoxInput")],UN);const Rat=UN;var pZ;function dV(t){return t??null}function pV(t){return t??null}let Hl=pZ=class extends wy{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return dV(e.max)}writeMax(t,e){e.max=pV(t)}readMin(t,e){return dV(e.min)}writeMin(t,e){e.min=pV(t)}readTimeResolution(t,e){return dV(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=pV(t)}clone(){return new pZ({max:this.max,min:this.min,timeResolution:this.timeResolution})}};d([g({type:String,json:{type:String,write:!0}})],Hl.prototype,"max",void 0),d([je("max")],Hl.prototype,"readMax",null),d([Ge("max")],Hl.prototype,"writeMax",null),d([g({type:String,json:{type:String,write:!0}})],Hl.prototype,"min",void 0),d([je("min")],Hl.prototype,"readMin",null),d([Ge("min")],Hl.prototype,"writeMin",null),d([g({type:String,json:{type:String,write:!0}})],Hl.prototype,"timeResolution",void 0),d([je("timeResolution")],Hl.prototype,"readTimeResolution",null),d([Ge("timeResolution")],Hl.prototype,"writeTimeResolution",null),d([g({type:["time-picker"],json:{read:!1,write:!0}})],Hl.prototype,"type",void 0),Hl=pZ=d([G("esri.form.elements.inputs.TimePickerInput")],Hl);const Nat=Hl,Dat={base:wy,key:"type",typeMap:{"barcode-scanner":Mat,"combo-box":Cat,"date-picker":Iat,"datetime-picker":Pat,"datetimeoffset-picker":Aat,"radio-buttons":kat,switch:Oat,"text-area":Lat,"text-box":Rat,"time-picker":Nat}};var fZ;let Zc=fZ=class extends d0{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new fZ({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};d([g({types:CTe,json:{read:{reader:c4},write:!0}})],Zc.prototype,"domain",void 0),d([g({type:Boolean,json:{write:!0}})],Zc.prototype,"editable",void 0),d([g({type:String,json:{write:!0}})],Zc.prototype,"editableExpression",void 0),d([g({type:String,json:{write:!0}})],Zc.prototype,"fieldName",void 0),d([g({type:String,json:{write:!0}})],Zc.prototype,"hint",void 0),d([g({types:Dat,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Zc.prototype,"input",void 0),d([g({type:String,json:{write:!0}})],Zc.prototype,"requiredExpression",void 0),d([g({type:String,json:{read:!1,write:!0}})],Zc.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Zc.prototype,"valueExpression",void 0),Zc=fZ=d([G("esri.form.elements.FieldElement")],Zc);const sde=Zc;var mZ;let tm=mZ=class extends d0{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new mZ({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:le(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};d([g({type:Number,json:{write:!0}})],tm.prototype,"displayCount",void 0),d([g({type:["list"],json:{write:!0}})],tm.prototype,"displayType",void 0),d([g({type:String,json:{write:!0}})],tm.prototype,"editableExpression",void 0),d([g({type:[mQ],json:{write:!0}})],tm.prototype,"orderByFields",void 0),d([g({type:Number,json:{write:!0}})],tm.prototype,"relationshipId",void 0),d([g({type:["relationship"],json:{read:!1,write:!0}})],tm.prototype,"type",void 0),tm=mZ=d([G("esri.form.elements.RelationshipElement")],tm);const ode=tm;var yZ;let SS=yZ=class extends d0{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new yZ({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};d([g({type:String,json:{write:!0}})],SS.prototype,"text",void 0),d([g({type:String,json:{write:!0}})],SS.prototype,"textFormat",void 0),d([g({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],SS.prototype,"type",void 0),SS=yZ=d([G("esri.form.elements.TextElement")],SS);const ade=SS;let ES=class extends Et.ClonableMixin(d0){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};d([g({type:[rTe],json:{write:{isRequired:!0}}})],ES.prototype,"associationTypes",void 0),d([g({type:String,json:{write:!0}})],ES.prototype,"editableExpression",void 0),d([g({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],ES.prototype,"type",void 0),ES=d([G("esri.form.elements.UtilityNetworkAssociationsElement")],ES);const lde=ES,Fat=t=>t.type==="field",zat=t=>t.type==="group",jat=t=>t.type==="text";function xCe(t){return{typesWithGroup:{base:d0,key:"type",typeMap:{attachment:ede,field:sde,group:t,relationship:ode,text:ade,utilityNetworkAssociations:lde}},typesWithoutGroup:{base:d0,key:"type",typeMap:{attachment:ede,field:sde,relationship:ode,text:ade,utilityNetworkAssociations:lde}}}}function SCe(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((n=>r[n.type])).map((n=>r[n.type].fromJSON(n)))}function ECe(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((n=>r[n.type])).map((n=>n.toJSON()))}function TCe(t,e,i=!0){return t?t.map((r=>Bp(i?e.typesWithGroup:e.typesWithoutGroup,r))):null}var gZ;let kd=gZ=class extends d0{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return TCe(t,fV,!1)}readElements(t,e){return SCe(e.formElements,fV,!1)}writeElements(t,e){e.formElements=ECe(t,fV,!1)}clone(){return new gZ({description:this.description,elements:le(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};d([g({json:{write:!0}})],kd.prototype,"elements",void 0),d([Ai("elements")],kd.prototype,"castElements",null),d([je("elements",["formElements"])],kd.prototype,"readElements",null),d([Ge("elements")],kd.prototype,"writeElements",null),d([g({type:["collapsed","expanded"],json:{write:!0}})],kd.prototype,"initialState",void 0),d([g({type:String,json:{read:!1,write:!0}})],kd.prototype,"type",void 0),kd=gZ=d([G("esri.form.elements.GroupElement")],kd);const fV=xCe(kd),Uat=kd;var vZ;const mV=xCe(Uat);let nh=vZ=class extends ve{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return TCe(t,mV)}readElements(t,e){return SCe(e.formElements,mV)}writeElements(t,e){e.formElements=ECe(t,mV)}clone(){return new vZ({description:this.description,expressionInfos:le(this.expressionInfos),elements:le(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(uA(i,t,r),uA(i,t,o),!n)return[];const a=Bat(n,s).map((l=>Mo(i,t,l)));await Promise.all(a);for(const l of n)$Ce(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function $Ce(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(uA(t,r,i.label),uA(t,r,i.description),i.type){case"field":La(t,r,i.fieldName);break;case"group":i.elements.forEach((s=>$Ce(t,e,s)));break;case"relationship":if(e.relationships){const s=e.relationships.find((o=>o.id===i.relationshipId));s&&La(t,r,s.keyField)}c0(t,r,(n=i.orderByFields)==null?void 0:n.map((s=>s.field)));break;case"text":uA(t,r,i.text)}}function Bat(t,e){if(!e||e.length===0)return[];const i=MCe(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function MCe(t){const e=new Set;for(const i of t)if(qoe(e,i.visibilityExpression),!jat(i)){if(zat(i))kD(e,MCe(i.elements));else if(qoe(e,i.editableExpression),Fat(i)){const{requiredExpression:r,valueExpression:n}=i;kD(e,[r,n])}}return e}function uA(t,e,i){c0(t,e,dQ(i))}d([g({type:String,json:{write:!0}})],nh.prototype,"description",void 0),d([g({json:{write:!0}})],nh.prototype,"elements",void 0),d([Ai("elements")],nh.prototype,"castElements",null),d([je("elements",["formElements"])],nh.prototype,"readElements",null),d([Ge("elements")],nh.prototype,"writeElements",null),d([g({type:[_at],json:{write:!0}})],nh.prototype,"expressionInfos",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],nh.prototype,"preserveFieldValuesWhenHidden",void 0),d([g({type:String,json:{write:!0}})],nh.prototype,"title",void 0),nh=vZ=d([G("esri.form.FormTemplate")],nh);const Vat=nh;function cde(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function Gat(t,e,i){if(!t&&!e||!i)return;const r=t5(i);ude(t,i,r),ude(e,i,r)}function ude(t,e,i){if(t)for(const r of t)qat(r.geometry,e,i)}function qat(t,e,i){if(!(t!=null&&t.spatialReference)||ks(t.spatialReference,e))return;const r=t5(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)cde(t,t.rings,r);else if("paths"in t)cde(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function hde(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=h2e(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var bZ;const wZ=new Bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ms=bZ=class extends ve{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,sr)}writeGeometryType(t,e,i,r){if(t)return void wZ.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void wZ.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Hp(t);return r&&!i&&e.spatialReference&&(r.spatialReference=tt.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new bZ(this.cloneProperties())}cloneProperties(){return le({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),o=c=>Math.round((n-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,u=a.length;c<u;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,u--);return this.transform=t,this}unquantize(){var m,v;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=w=>w*s+r,l=w=>n-w*o;let c=null,u=null;if(this.hasZ&&((m=i==null?void 0:i.scale)==null?void 0:m[2])!=null){const{translate:[,,w],scale:[,,_]}=i;c=T=>T*_+w}if(this.hasM&&((v=i==null?void 0:i.scale)==null?void 0:v[3])!=null){const{translate:[,,,w],scale:[,,,_]}=i;u=T=>T==null?T:T*_+w}const p=this._getHydrationFunction(t,a,l,c,u);for(const{geometry:w}of e)w!=null&&p&&p(w);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=tt.fromJSON(e.spatialReference),n=[];for(let o=0;o<t.length;o++){const a=t[o],l=i.fromJSON(a),c=(s=a.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const u=a.aggregateGeometries,p=l.aggregateGeometries;if(u&&p!=null)for(const m in p){const v=p[m],w=u[m],_=w==null?void 0:w.spatialReference;v==null||_||(v.spatialReference=r)}n.push(l)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),u=i(l[1]);c===r&&u===n||(s.push([c-r,u-n]),r=c,n=u)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=zn(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(zn(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=zn(s)?s.rings:s.paths;let a,l;for(let c=0,u=o.length;c<u;c++){const p=o[c];for(let m=0,v=p.length;m<v;m++){const w=p[m];m>0?(a+=w[0],l+=w[1]):(a=w[0],l=w[1]),w[0]=e(a),w[1]=i(l)}}if(r&&n)for(let c=0,u=o.length;c<u;c++){const p=o[c];for(let m=0,v=p.length;m<v;m++){const w=p[m];w[2]=r(w[2]),w[3]=n(w[3])}}else if(r)for(let c=0,u=o.length;c<u;c++){const p=o[c];for(let m=0,v=p.length;m<v;m++){const w=p[m];w[2]=r(w[2])}}else if(n)for(let c=0,u=o.length;c<u;c++){const p=o[c];for(let m=0,v=p.length;m<v;m++){const w=p[m];w[2]=n(w[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,u=o.length;c<u;c++){const p=o[c];c>0?(a+=p[0],l+=p[1]):(a=p[0],l=p[1]),p[0]=e(a),p[1]=i(l)}if(r&&n)for(let c=0,u=o.length;c<u;c++){const p=o[c];p[2]=r(p[2]),p[3]=n(p[3])}else if(r)for(let c=0,u=o.length;c<u;c++){const p=o[c];p[2]=r(p[2])}else if(n)for(let c=0,u=o.length;c<u;c++){const p=o[c];p[2]=n(p[2])}}:null}};d([g({type:String,json:{write:!0}})],Ms.prototype,"displayFieldName",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ms.prototype,"exceededTransferLimit",void 0),d([g({type:[sr],json:{write:!0}})],Ms.prototype,"features",void 0),d([je("features")],Ms.prototype,"readFeatures",null),d([g({type:[Zs],json:{write:!0}})],Ms.prototype,"fields",void 0),d([g({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:wZ.read}}})],Ms.prototype,"geometryType",void 0),d([Ge("geometryType")],Ms.prototype,"writeGeometryType",null),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ms.prototype,"hasM",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ms.prototype,"hasZ",void 0),d([g({types:UT,json:{write:!0}})],Ms.prototype,"queryGeometry",void 0),d([je("queryGeometry")],Ms.prototype,"readQueryGeometry",null),d([g({type:tt,json:{write:!0}})],Ms.prototype,"spatialReference",void 0),d([Ge("spatialReference")],Ms.prototype,"writeSpatialReference",null),d([g({json:{write:!0}})],Ms.prototype,"transform",void 0),Ms=bZ=d([G("esri.rest.support.FeatureSet")],Ms),Ms.prototype.toJSON.isDefaultToJSON=!0;let Hat=0,pm=class extends ra.LoadableMixin(Mp.EsriPromiseMixin(et)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);hde(e,this.layer.spatialReference,r);const n=Ms.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ae("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return hde(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i)))}queryObjectIds(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i)))}queryExtent(e,i={}){return this.load(i).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i))).then((r=>({count:r.count,extent:Ut.fromJSON(r.extent)})))}querySnapping(e,i={}){return this.load(i).then((()=>this._connection.invoke("querySnapping",e,i)))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new ae("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=u=>"objectId"in u&&u.objectId!=null?u.objectId:"attributes"in u&&u.attributes[i]!=null?u.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const u of e.deleteFeatures){const p=o(u);p!=null&&n.push(p)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const u of e.updateFeatures)if(s.push(this._serializeFeature(u)),a&&u.geometry!=null){const p=o(u);p!=null&&a.set(p,u)}}Gat(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new ae("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],u=i.get(l);u&&(u.attributes||(u.attributes={}),c===-1?delete u.attributes[a]:u.attributes[a]=c,s._addIdToClientGeometry(u))}}}}_addIdToClientGeometry(e){var n;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(Hat++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?or.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await iqe("MemorySourceWorker",{strategy:ge("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(w=>{Ce.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),w.preventDefault()})));const p={features:u.features,fields:i==null?void 0:i.map((w=>w.toJSON())),geometryType:Rae.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},m=await this._connection.invoke("load",p,{signal:e});for(const w of m.warnings)Ce.getLogger(this.layer).warn("#load()",`${w.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:w});m.featureErrors.length&&Ce.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const v=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(v.geometryType=Rae.toJSON(u.inferredGeometryType)),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),u.finish(m.assignedObjectIds)}};d([QJ({Type:sr,ensureType:Zr(sr)})],pm.prototype,"itemType",void 0),d([g()],pm.prototype,"type",void 0),d([g({constructOnly:!0})],pm.prototype,"layer",void 0),d([g({readOnly:!0})],pm.prototype,"_workerGeometryType",null),d([g()],pm.prototype,"sourceJSON",void 0),pm=d([G("esri.layers.graphics.sources.MemorySource")],pm);function Wat(t){return"portalItem"in t}const Zat=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Wat(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return d([g({type:String})],e.prototype,"apiKey",null),e=d([G("esri.layers.mixins.APIKeyMixin")],e),e},Yat=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Gp(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",HBe(i,Ce.getLogger(this)))}};return d([g()],e.prototype,"title",null),d([g({type:String})],e.prototype,"url",null),e=d([G("esri.layers.mixins.ArcGISService")],e),e};let dde=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find((l=>l.source===this.location.source));n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,c="".padEnd(o.line.toString().length," "),u=r[s.line-1],p=(s.line===l.line?l.column:u.length+1)-s.column||1;i+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+u+`
`+c+" | "+"".padEnd(s.column-1," ")+"".padEnd(p,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(m){return m.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(m){return n?m.replace(n,(v=>"\\u{"+r(v)+"}")):m}function o(m){return s(m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(v=>"\\x0"+r(v))).replace(/[\x10-\x1F\x7F-\x9F]/g,(v=>"\\x"+r(v))))}function a(m){return s(m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(v=>"\\x0"+r(v))).replace(/[\x10-\x1F\x7F-\x9F]/g,(v=>"\\x"+r(v))))}const l={literal:m=>'"'+o(m.text)+'"',class(m){const v=m.parts.map((w=>Array.isArray(w)?a(w[0])+"-"+a(w[1]):a(w)));return"["+(m.inverted?"^":"")+v.join("")+"]"+(m.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:m=>m.description};function c(m){return l[m.type](m)}function u(m){const v=m.map(c);if(v.sort(),v.length>0){let w=1;for(let _=1;_<v.length;_++)v[_-1]!==v[_]&&(v[w]=v[_],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function p(m){return m?'"'+o(m)+'"':"end of input"}return"Expected "+u(e)+" but "+p(i)+" found."}};function Kat(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:un};let s=un;const o="none",a=")",l=",",c="(",u="%",p="px",m="cm",v="mm",w="in",_="pt",T="pc",$="deg",I="rad",A="grad",k="turn",R="#",F=".",B="e",q=/^[ \t\n\r]/,Y=/^[a-z\-]/,J=/^[0-9a-fA-F]/,Q=/^[+\-]/,te=/^[0-9]/,re=aa("none"),ee=cn("none",!1),ye=cn(")",!1),ne=cn(",",!1),ue=Au([" ","	",`
`,"\r"],!1,!1,!1),he=aa("function"),Ne=cn("(",!1),X=aa("identifier"),_e=Au([["a","z"],"-"],!1,!1,!1),ke=aa("percentage"),qe=cn("%",!1),Ke=aa("length"),Qe=cn("px",!1),Xe=cn("cm",!1),di=cn("mm",!1),qt=cn("in",!1),it=cn("pt",!1),Vt=cn("pc",!1),Pt=aa("angle"),He=cn("deg",!1),Ri=cn("rad",!1),ci=cn("grad",!1),Sn=cn("turn",!1),En=aa("number"),_r=aa("color"),bl=cn("#",!1),O0=Au([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Cy=Au(["+","-"],!1,!1,!1),oo=Au([["0","9"]],!1,!1,!1),b1=cn(".",!1),L0=cn("e",!1);function f$(){return[]}function m$(ie,Te){return{type:"function",name:ie,parameters:Te||[]}}function Iu(ie,Te){return Te.length>0?Ou(ie,Te,3):[ie]}function Ns(ie){return{type:"quantity",value:ie.value,unit:ie.unit}}function wl(ie){return{type:"color",colorType:ie.type,value:ie.value}}function Io(ie){return ie}function w1(){return ws()}function _1(ie){return{value:ie,unit:"%"}}function y$(ie){return{value:ie,unit:"px"}}function nf(ie){return{value:ie,unit:"cm"}}function Yh(ie){return{value:ie,unit:"mm"}}function $c(ie){return{value:ie,unit:"in"}}function Iy(ie){return{value:ie,unit:"pt"}}function _l(ie){return{value:ie,unit:"pc"}}function g$(ie){return{value:ie,unit:"deg"}}function x1(ie){return{value:ie,unit:"rad"}}function R0(ie){return{value:ie,unit:"grad"}}function Ay(ie){return{value:ie,unit:"turn"}}function Kh(ie){return{value:ie,unit:null}}function v$(){return{type:"hex",value:ws()}}function S1(ie){return{type:"function",value:ie}}function E1(){return{type:"named",value:ws()}}function N0(){return parseFloat(ws())}let Me=0|e.peg$currPos,Qi=Me;const Mc=[{line:1,column:1}];let Ao,Yi=Me,Hn=e.peg$maxFailExpected||[],yt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function ws(){return t.substring(Qi,Me)}function Mt(ie=Me){const Te=t.codePointAt(ie);return Te===void 0?"":String.fromCodePoint(Te)}function cn(ie,Te){return{type:"literal",text:ie,ignoreCase:Te}}function Au(ie,Te,We,Tt){return{type:"class",parts:ie,inverted:Te,ignoreCase:We,unicode:Tt}}function Jh(){return{type:"end"}}function aa(ie){return{type:"other",description:ie}}function xl(ie){let Te,We=Mc[ie];if(We)return We;if(ie>=Mc.length)Te=Mc.length-1;else for(Te=ie;!Mc[--Te];);for(We=Mc[Te],We={line:We.line,column:We.column};Te<ie;)t.charCodeAt(Te)===10?(We.line++,We.column=1):We.column++,Te++;return Mc[ie]=We,We}function Cc(ie,Te,We){const Tt=xl(ie),lt=xl(Te);return{source:r,start:{offset:ie,line:Tt.line,column:Tt.column},end:{offset:Te,line:lt.line,column:lt.column}}}function kt(ie){Me<Yi||(Me>Yi&&(Yi=Me,Hn=[]),Hn.push(ie))}function Pu(ie,Te,We){return new dde(dde.buildMessage(ie,Te),ie,Te,We)}function un(){let ie;return ie=T1(),ie===i&&(ie=$1()),ie}function T1(){let ie,Te;return yt++,ie=Me,xr(),t.substr(Me,4)===o?(Te=o,Me+=4):(Te=i,yt===0&&kt(ee)),Te!==i?(xr(),Qi=ie,ie=f$()):(Me=ie,ie=i),yt--,ie===i&&yt===0&&kt(re),ie}function $1(){let ie,Te;if(ie=[],Te=Sl(),Te!==i)for(;Te!==i;)ie.push(Te),Te=Sl();else ie=i;return ie}function Sl(){let ie,Te,We,Tt;return ie=Me,xr(),Te=M1(),Te!==i?(xr(),We=ku(),We===i&&(We=null),xr(),t.charCodeAt(Me)===41?(Tt=a,Me++):(Tt=i,yt===0&&kt(ye)),Tt!==i?(xr(),Qi=ie,ie=m$(Te,We)):(Me=ie,ie=i)):(Me=ie,ie=i),ie}function ku(){let ie,Te,We,Tt,lt,Ht,Fr,Pi;if(ie=Me,Te=D0(),Te!==i){for(We=[],Tt=Me,lt=xr(),t.charCodeAt(Me)===44?(Ht=l,Me++):(Ht=i,yt===0&&kt(ne)),Ht===i&&(Ht=null),Fr=xr(),Pi=D0(),Pi!==i?(lt=[lt,Ht,Fr,Pi],Tt=lt):(Me=Tt,Tt=i);Tt!==i;)We.push(Tt),Tt=Me,lt=xr(),t.charCodeAt(Me)===44?(Ht=l,Me++):(Ht=i,yt===0&&kt(ne)),Ht===i&&(Ht=null),Fr=xr(),Pi=D0(),Pi!==i?(lt=[lt,Ht,Fr,Pi],Tt=lt):(Me=Tt,Tt=i);Qi=ie,ie=Iu(Te,We)}else Me=ie,ie=i;return ie}function D0(){let ie,Te;return ie=Me,Te=Py(),Te===i&&(Te=ky(),Te===i&&(Te=El(),Te===i&&(Te=sf()))),Te!==i&&(Qi=ie,Te=Ns(Te)),ie=Te,ie===i&&(ie=Me,Te=Xh(),Te!==i&&(Qi=ie,Te=wl(Te)),ie=Te),ie}function xr(){let ie,Te;for(yt++,ie=[],Te=t.charAt(Me),q.test(Te)?Me++:(Te=i,yt===0&&kt(ue));Te!==i;)ie.push(Te),Te=t.charAt(Me),q.test(Te)?Me++:(Te=i,yt===0&&kt(ue));return yt--,ie}function M1(){let ie,Te,We;return yt++,ie=Me,Te=C1(),Te!==i?(t.charCodeAt(Me)===40?(We=c,Me++):(We=i,yt===0&&kt(Ne)),We!==i?(Qi=ie,ie=Te):(Me=ie,ie=i)):(Me=ie,ie=i),yt--,ie===i&&(Te=i,yt===0&&kt(he)),ie}function C1(){let ie,Te,We;if(yt++,ie=Me,Te=[],We=t.charAt(Me),Y.test(We)?Me++:(We=i,yt===0&&kt(_e)),We!==i)for(;We!==i;)Te.push(We),We=t.charAt(Me),Y.test(We)?Me++:(We=i,yt===0&&kt(_e));else Te=i;return Te!==i&&(Qi=ie,Te=w1()),ie=Te,yt--,ie===i&&(Te=i,yt===0&&kt(X)),ie}function Py(){let ie,Te,We;return yt++,ie=Me,xr(),Te=Tn(),Te!==i?(t.charCodeAt(Me)===37?(We=u,Me++):(We=i,yt===0&&kt(qe)),We!==i?(Qi=ie,ie=_1(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),yt--,ie===i&&yt===0&&kt(ke),ie}function ky(){let ie,Te,We;return yt++,ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===p?(We=p,Me+=2):(We=i,yt===0&&kt(Qe)),We!==i?(Qi=ie,ie=y$(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===m?(We=m,Me+=2):(We=i,yt===0&&kt(Xe)),We!==i?(Qi=ie,ie=nf(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===v?(We=v,Me+=2):(We=i,yt===0&&kt(di)),We!==i?(Qi=ie,ie=Yh(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===w?(We=w,Me+=2):(We=i,yt===0&&kt(qt)),We!==i?(Qi=ie,ie=$c(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===_?(We=_,Me+=2):(We=i,yt===0&&kt(it)),We!==i?(Qi=ie,ie=Iy(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,xr(),Te=Tn(),Te!==i?(t.substr(Me,2)===T?(We=T,Me+=2):(We=i,yt===0&&kt(Vt)),We!==i?(Qi=ie,ie=_l(Te)):(Me=ie,ie=i)):(Me=ie,ie=i)))))),yt--,ie===i&&yt===0&&kt(Ke),ie}function El(){let ie,Te,We;return yt++,ie=Me,Te=Tn(),Te!==i?(t.substr(Me,3)===$?(We=$,Me+=3):(We=i,yt===0&&kt(He)),We!==i?(Qi=ie,ie=g$(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,Te=Tn(),Te!==i?(t.substr(Me,3)===I?(We=I,Me+=3):(We=i,yt===0&&kt(Ri)),We!==i?(Qi=ie,ie=x1(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,Te=Tn(),Te!==i?(t.substr(Me,4)===A?(We=A,Me+=4):(We=i,yt===0&&kt(ci)),We!==i?(Qi=ie,ie=R0(Te)):(Me=ie,ie=i)):(Me=ie,ie=i),ie===i&&(ie=Me,Te=Tn(),Te!==i?(t.substr(Me,4)===k?(We=k,Me+=4):(We=i,yt===0&&kt(Sn)),We!==i?(Qi=ie,ie=Ay(Te)):(Me=ie,ie=i)):(Me=ie,ie=i)))),yt--,ie===i&&(Te=i,yt===0&&kt(Pt)),ie}function sf(){let ie,Te;return yt++,ie=Me,xr(),Te=Tn(),Te!==i?(Qi=ie,ie=Kh(Te)):(Me=ie,ie=i),yt--,ie===i&&yt===0&&kt(En),ie}function Xh(){let ie,Te,We,Tt;if(yt++,ie=Me,t.charCodeAt(Me)===35?(Te=R,Me++):(Te=i,yt===0&&kt(bl)),Te!==i){if(We=[],Tt=t.charAt(Me),J.test(Tt)?Me++:(Tt=i,yt===0&&kt(O0)),Tt!==i)for(;Tt!==i;)We.push(Tt),Tt=t.charAt(Me),J.test(Tt)?Me++:(Tt=i,yt===0&&kt(O0));else We=i;We!==i?(Qi=ie,ie=v$()):(Me=ie,ie=i)}else Me=ie,ie=i;return ie===i&&(ie=Me,Te=Sl(),Te!==i&&(Qi=ie,Te=S1(Te)),ie=Te,ie===i&&(ie=Me,Te=C1(),Te!==i&&(Qi=ie,Te=E1()),ie=Te)),yt--,ie===i&&(Te=i,yt===0&&kt(_r)),ie}function Tn(){let ie,Te,We,Tt,lt,Ht,Fr,Pi;for(ie=Me,Te=t.charAt(Me),Q.test(Te)?Me++:(Te=i,yt===0&&kt(Cy)),Te===i&&(Te=null),We=Me,Tt=[],lt=t.charAt(Me),te.test(lt)?Me++:(lt=i,yt===0&&kt(oo));lt!==i;)Tt.push(lt),lt=t.charAt(Me),te.test(lt)?Me++:(lt=i,yt===0&&kt(oo));if(t.charCodeAt(Me)===46?(lt=F,Me++):(lt=i,yt===0&&kt(b1)),lt!==i){if(Ht=[],Fr=t.charAt(Me),te.test(Fr)?Me++:(Fr=i,yt===0&&kt(oo)),Fr!==i)for(;Fr!==i;)Ht.push(Fr),Fr=t.charAt(Me),te.test(Fr)?Me++:(Fr=i,yt===0&&kt(oo));else Ht=i;Ht!==i?(Tt=[Tt,lt,Ht],We=Tt):(Me=We,We=i)}else Me=We,We=i;if(We===i)if(We=[],Tt=t.charAt(Me),te.test(Tt)?Me++:(Tt=i,yt===0&&kt(oo)),Tt!==i)for(;Tt!==i;)We.push(Tt),Tt=t.charAt(Me),te.test(Tt)?Me++:(Tt=i,yt===0&&kt(oo));else We=i;if(We!==i){if(Tt=Me,t.charCodeAt(Me)===101?(lt=B,Me++):(lt=i,yt===0&&kt(L0)),lt!==i){if(Ht=t.charAt(Me),Q.test(Ht)?Me++:(Ht=i,yt===0&&kt(Cy)),Ht===i&&(Ht=null),Fr=[],Pi=t.charAt(Me),te.test(Pi)?Me++:(Pi=i,yt===0&&kt(oo)),Pi!==i)for(;Pi!==i;)Fr.push(Pi),Pi=t.charAt(Me),te.test(Pi)?Me++:(Pi=i,yt===0&&kt(oo));else Fr=i;Fr!==i?(lt=[lt,Ht,Fr],Tt=lt):(Me=Tt,Tt=i)}else Me=Tt,Tt=i;Tt===i&&(Tt=null),Qi=ie,ie=N0()}else Me=ie,ie=i;return ie}function Oy(ie,Te){return ie.map((function(We){return We[Te]}))}function Ou(ie,Te,We){return[ie].concat(Oy(Te,We))}Ao=s();const mi=Ao!==i&&Me===t.length;function er(){throw Ao!==i&&Me<t.length&&kt(Jh()),Pu(Hn,Yi<t.length?Mt(Yi):null,Yi<t.length?Cc(Yi,Yi+1):Cc(Yi,Yi))}return e.peg$library?{peg$result:Ao,peg$currPos:Me,peg$FAILED:i,peg$maxFailExpected:Hn,peg$maxFailPos:Yi,peg$success:mi,peg$throw:mi?void 0:er}:mi?Ao:void er()}function WQ(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=pde(t);return i&&i.length!==0?i:null}const e=t.map((i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ae("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:pde(i.value)}}));e.sort(((i,r)=>r.effects.length-i.effects.length));for(let i=0;i<e.length-1;i++){if(!CEe(e[i].effects,e[i+1].effects))throw new ae("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});IEe(e[i].effects,e[i+1].effects)}return e.sort(((i,r)=>r.scale-i.scale)),e}function pde(t){let e;if(!t)return[];try{e=Kat(t)}catch(i){throw new ae("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map((i=>Jat(i)))}function Jat(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Xat(t);case"opacity":return Qat(t);case"hue-rotate":return elt(t);case"blur":return tlt(t);case"drop-shadow":return ilt(t);case"bloom":return rlt(t)}}catch(e){throw e.details.filter=t,e}throw new ae("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Xat(t){let e=1;return KT(t.parameters,1),t.parameters.length===1&&(e=yh(t.parameters[0])),new Fq(t.name,e)}function Qat(t){let e=1;return KT(t.parameters,1),t.parameters.length===1&&(e=yh(t.parameters[0])),new $Ee(e)}function elt(t){let e=0;return KT(t.parameters,1),t.parameters.length===1&&(e=clt(t.parameters[0])),new EEe(e)}function tlt(t){let e=0;return KT(t.parameters,1),t.parameters.length===1&&(e=KQ(t.parameters[0]),Lk(e,t.parameters[0])),new bEe(e)}function ilt(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ae("effect:type-error","Accepts only one color",{});i=ult(r)}else{const n=KQ(r);if(Object.isFrozen(e))throw new ae("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&Lk(n,r)}if(e.length<2||e.length>3)throw new ae("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new xEe(e[0],e[1],e[2]||0,i||CCe("black"))}function rlt(t){let e=1,i=0,r=0;return KT(t.parameters,3),t.parameters[0]&&(e=yh(t.parameters[0])),t.parameters[1]&&(i=KQ(t.parameters[1]),Lk(i,t.parameters[1])),t.parameters[2]&&(r=yh(t.parameters[2])),new gEe(e,i,r)}function KT(t,e){if(t.length>e)throw new ae("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function M4(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in YQ)return"<length>";if(t.unit in ZQ)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Lk(t,e){if(t<0)throw new ae("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function nlt(t){if(t.type!=="quantity"||t.unit!==null)throw new ae("effect:type-error",`Expected <double>, Actual: ${M4(t)}`,{term:t})}function slt(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ae("effect:type-error",`Expected <double> or <percentage>, Actual: ${M4(t)}`,{term:t})}const ZQ={deg:1,grad:.9,rad:180/Math.PI,turn:360};function olt(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&ZQ[t.unit]!=null))throw new ae("effect:type-error",`Expected <angle>, Actual: ${M4(t)}`,{term:t})}const YQ={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function alt(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&YQ[t.unit]!=null))throw new ae("effect:type-error",`Expected <length>, Actual: ${M4(t)}`,{term:t})}function yh(t){slt(t);const e=t.value;return Lk(e,t),t.unit==="%"?.01*e:e}function llt(t){return nlt(t),Lk(t.value,t),t.value}function clt(t){return olt(t),t.value*ZQ[t.unit]||0}function KQ(t){return alt(t),t.value*YQ[t.unit]||0}function ult(t){switch(t.colorType){case"hex":return JWe(t.value);case"named":return CCe(t.value);case"function":return plt(t.value)}}function CCe(t){if(!Q2e(t))throw new ae("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return KWe(t)}const hlt=/^rgba?/i,dlt=/^hsla?/i;function plt(t){if(KT(t.parameters,4),hlt.test(t.name))return[yh(t.parameters[0]),yh(t.parameters[1]),yh(t.parameters[2]),t.parameters[3]?yh(t.parameters[3]):1];if(dlt.test(t.name))return eEe(llt(t.parameters[0]),yh(t.parameters[1]),yh(t.parameters[2]),t.parameters[3]?yh(t.parameters[3]):1);throw new ae("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function aP(t,e,i){var r;try{return mlt(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function lP(t,e,i,r){try{const n=flt(t);Vn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function flt(t){const e=WQ(t);return e?CYe(e)?e.map((i=>i.toJSON())):e.map((({scale:i,effects:r})=>({scale:i,value:r.map((n=>n.toJSON()))}))):null}function mlt(t){if(!t||t.length===0)return null;if(ylt(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:Y5(i.value)});return e}return Y5(t)}function ylt(t){const e=t[0];return!!e&&"scale"in e}function Y5(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Of(i,"amount")];break;case"blur":r=[Of(i,"radius","pt")];break;case"hue-rotate":r=[Of(i,"angle","deg")];break;case"drop-shadow":r=[Of(i,"xoffset","pt"),Of(i,"yoffset","pt"),Of(i,"blurRadius","pt"),glt(i,"color")];break;case"bloom":r=[Of(i,"strength"),Of(i,"radius","pt"),Of(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;WQ(n),e.push(n)}return e.join(" ")}function Of(t,e,i){if(t[e]==null)throw new ae("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function glt(t,e){if(t[e]==null)throw new ae("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const vlt={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:mr}},"portal-item":{read:!0,write:{layerContainerTypes:mr}}}}},fde={read:{reader:aP},write:{allowNull:!0,writer:lP,layerContainerTypes:mr}},blt={json:{read:!1,write:!1,origins:{"web-map":fde,"portal-item":fde}}},ICe=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return d([g(vlt)],e.prototype,"blendMode",void 0),d([g(blt)],e.prototype,"effect",void 0),e=d([G("esri.layers.mixins.BlendLayer")],e),e},wlt=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return d([g({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=d([G("esri.layers.mixins.CustomParametersMixin")],e),e},ACe=96;function vGt(t,e){const i=t.extent,r=t.width,n=_c(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*exe*ACe:0}function _lt(t,e){return t/(_c(e)*exe*ACe)}function xlt(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),n=_lt(e,i.spatialReference);return i.clone().expand(n*r/i.width)}function Slt(t,e,i){return Elt(t,e)&&Tlt(t,i)}function Elt(t,e){return e===0||Oh(t,e)||t<e}function Tlt(t,e){return e===0||Oh(t,e)||t>e}function $lt(t,e){return Oh(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const mde={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let fm=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.id=WT(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};d([g({type:String,json:{write:!0}})],fm.prototype,"id",void 0),d([g({type:Number,json:mde})],fm.prototype,"maxScale",void 0),d([g({type:Number,json:mde})],fm.prototype,"minScale",void 0),d([g({type:String,json:{write:!0}})],fm.prototype,"title",void 0),d([g({type:String,json:{write:!0}})],fm.prototype,"where",void 0),fm=d([G("esri.layers.support.DisplayFilter")],fm);function Mlt(t,e){return{...e,filterMode:t.mode}}function Clt(t,e){return PCe(t,e).next().value??null}function wGt(t,e,i){const r=Ilt(t);if(r&&(t1e(e,r[0])||CG(i,r[1])))return"";const n=Array.from(PCe(t,e,i)),s=Alt(n,e,i)?"1=1":n.map((o=>o.where||"1=1")).reduce(((o,a)=>Vq(o,a)),"");return s&&s!=="1=1"?s:""}function Ilt(t){if(kCe(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],cP(i)),e[1]=Math.min(e[1],K5(r));return e}function*PCe(t,e,i){if(kCe(t)==="manual"){const r=t.filters.find((n=>n.id===t.activeFilterId));r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)Plt(r.minScale,r.maxScale,e,i)&&(yield r)}}function Alt(t,e,i){var s,o;if(t.length===0)return!0;const r=cP((s=t.at(0))==null?void 0:s.minScale),n=K5((o=t.at(-1))==null?void 0:o.maxScale);if(CG(r,e)||t1e(n,i))return!0;for(let a=0;a<t.length-1;a++){const l=t[a],c=t[a+1];if(CG(cP(c.minScale),K5(l.maxScale)))return!0}return!1}function Plt(t,e,i,r){return t=cP(t),i=cP(i),e=K5(e),!(!Oh(i,t)&&(r??i)>t)&&!J6e(e,i)&&(r===void 0||!Oh(r,t))}function kCe(t){return"mode"in t?t.mode:t.filterMode}function cP(t){return t||Number.POSITIVE_INFINITY}function K5(t){return t||0}let Qb=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.activeFilterId=null,this.filters=new(et.ofType(fm)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort(((o,a)=>{const l=$lt(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l})),i[r]=s.map((o=>o.toJSON(n)))}write(e,i){return super.write(e,Mlt(this,i))}};d([g({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],Qb.prototype,"activeFilterId",void 0),d([g({type:et.ofType(fm),nonNullable:!0,json:{write:!0}})],Qb.prototype,"filters",void 0),d([Ge("filters")],Qb.prototype,"writeFilters",null),d([g({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Qb.prototype,"mode",void 0),Qb=d([G("esri.layers.support.DisplayFilterInfo")],Qb);const klt=t=>{let e=class extends t{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return d([g(Olt)],e.prototype,"displayFilterEnabled",void 0),d([g(Llt)],e.prototype,"displayFilterInfo",void 0),e=d([G("esri.layers.mixins.DisplayFilteredLayer")],e),e},Olt={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:mr,writer(t,e,i){Vn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},Llt={type:Qb,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:mr},origins:{"web-scene":{write:!1,read:!1}}}},_Z=tZe(),OCe=new Map,LCe=new Map;async function xGt(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=OCe.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await ni(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function yde(t,e,i=!1){var s,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=LCe.get(r))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===e){const u=!((o=c.stack)!=null&&o.hasForwardEdits());if(!u&&i){const[{deleteForwardEdits:p},{default:m}]=await Promise.all([Re(()=>import("./deleteForwardEdits-CgdVy1Mr.js"),[]),Re(()=>import("./DeleteForwardEditsParameters-Bocwz1m-.js"),[])]),v=await p(r,l,new m({sessionId:_Z,moment:c.moment}));return v.success&&((a=c.stack)==null||a.clearForwardEdits()),v.success}return u}}return!0}function BN(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=LCe.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const JQ=new Wh.EventEmitter;function RCe(t){return JQ.on("apply-edits",new WeakRef(t))}function NCe(t){return JQ.on("update-moment",new WeakRef(t))}function gde(t,e,i=null,r=!1){const n=gc();return r=e==null||r,JQ.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const DCe=Symbol();function SGt(t){return t!=null&&typeof t=="object"&&DCe in t}function GM(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function hA(t,e,i){const r=new URL(t).host,n=OCe.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const Rlt=t=>{var r;var e;let i=(r=class extends t{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=s=>{const{serviceUrl:o,layerId:a,gdbVersion:l,mayReceiveServiceEdits:c,result:u}=s,p=o===this.url,m=a!=null&&this.layerId!=null&&a===this.layerId,v=GM(this),w=GM(this)&&hA(o,l,this.gdbVersion);if(!p||v&&!w||!m&&!c)return;const _=u.then((T=>{var A;if(this.lastEditsEventDate=new Date,m&&(T.addedFeatures.length||T.updatedFeatures.length||T.deletedFeatures.length||T.addedAttachments.length||T.updatedAttachments.length||T.deletedAttachments.length))return this.emit("edits",le(T)),T;const $=(A=T.editedFeatures)==null?void 0:A.find((({layerId:k})=>k===this.layerId));if($){const{adds:k,updates:R,deletes:F}=$.editedFeatures,B={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:k?k.map((({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]}))):[],deletedFeatures:F?F.map((({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]}))):[],updatedFeatures:R?R.map((({current:{attributes:q}})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]}))):[],editedFeatures:le(T.editedFeatures),exceededTransferLimit:!1,historicMoment:le(T.historicMoment)};return this.emit("edits",B),B}const I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:le(T.editedFeatures),exceededTransferLimit:!1,historicMoment:le(T.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,I.historicMoment)&&this.emit("edits",I),I})).then((T=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(o,l,T.historicMoment)&&(this.historicMoment=T.historicMoment),T)));this.emit("apply-edits",{result:_})},this._updateMomentHandler=s=>{const{serviceUrl:o,gdbVersion:a,moment:l}=s,c=o===this.url,u=GM(this),p=GM(this)&&hA(o,a,this.gdbVersion),m=GM(this)&&!hA(o,this.gdbVersion,null);c&&u&&p&&m&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then((()=>{this.addHandles(RCe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(NCe(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(n,s,o){return"historicMoment"in this&&this.historicMoment!==o&&BN(n,s)}},e=DCe,r);return d([g()],i.prototype,"lastEditsEventDate",void 0),i=d([G("esri.layers.mixins.EditBusLayer")],i),i};var xZ;const yV=new Bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),gV=new Bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Td=xZ=class extends ve{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new bt({geometry:le(i),objectIds:le(s),spatialRelationship:r,timeExtent:le(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new xZ({geometry:le(e),objectIds:le(n),spatialRelationship:i,timeExtent:le(r),where:t,units:s,distance:o})}};d([g({type:String,json:{write:!0}})],Td.prototype,"where",void 0),d([g({types:UT,json:{write:!0}})],Td.prototype,"geometry",void 0),d([g({type:yV.apiValues,json:{name:"spatialRel",read:{reader:yV.read},write:{allowNull:!1,writer:yV.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Td.prototype,"spatialRelationship",void 0),d([g({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Td.prototype,"distance",void 0),d([g({type:[Number],json:{write:!0}})],Td.prototype,"objectIds",void 0),d([g({type:gV.apiValues,json:{read:gV.read,write:{writer:gV.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Td.prototype,"units",void 0),d([g({type:Wi,json:{write:!0}})],Td.prototype,"timeExtent",void 0),Td=xZ=d([G("esri.layers.support.FeatureFilter")],Td);const Nlt=Td;var SZ;const vde={read:{reader:aP},write:{writer:lP,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},bde={read:{reader:aP},write:{writer:lP,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},wde={name:"showExcludedLabels",default:!0};let ew=SZ=class extends ve{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new ae("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new ae("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new SZ({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};d([g({type:Nlt,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Vn(i,n,e):Vn(i,null,e)}}}})],ew.prototype,"filter",void 0),d([g({json:{read:aP,write:{writer:lP,allowNull:!0},origins:{"web-map":vde,"portal-item":vde}}})],ew.prototype,"includedEffect",void 0),d([g({json:{read:aP,write:{writer:lP,allowNull:!0},origins:{"web-map":bde,"portal-item":bde}}})],ew.prototype,"excludedEffect",void 0),d([g({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":wde,"portal-item":wde}}})],ew.prototype,"excludedLabelsVisible",void 0),ew=SZ=d([G("esri.layers.support.FeatureEffect")],ew);const _de={write:{allowNull:!0}},Dlt={type:ew,json:{origins:{"web-map":_de,"portal-item":_de}}},Flt=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return d([g(Dlt)],e.prototype,"featureEffect",void 0),e=d([G("esri.layers.mixins.FeatureEffectLayer")],e),e};var EZ;let oI=EZ=class extends ve{constructor(t){super(t)}async collectRequiredFields(t,e){return Mo(t,e,this.expression)}clone(){return new EZ({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};d([g({type:String,json:{write:{isRequired:!0}}})],oI.prototype,"expression",void 0),d([g({type:String,json:{write:!0}})],oI.prototype,"title",void 0),oI=EZ=d([G("esri.symbols.support.FeatureExpressionInfo")],oI);const xde=oI,C4={unknown:1,inches:Ln(1,"meters","inches"),feet:Ln(1,"meters","feet"),"us-feet":Ln(1,"meters","us-feet"),yards:Ln(1,"meters","yards"),miles:Ln(1,"meters","miles"),"nautical-miles":Ln(1,"meters","nautical-miles"),millimeters:Ln(1,"meters","millimeters"),centimeters:Ln(1,"meters","centimeters"),decimeters:Ln(1,"meters","decimeters"),meters:Ln(1,"meters","meters"),kilometers:Ln(1,"meters","kilometers"),"decimal-degrees":1/D8e(1,"meters",wn.radius)};function EGt(t){return!!t&&C4[t]!=null}function TGt(t){return 1/(C4[t]||1)}function zlt(){const t=Object.keys(C4);return FJ(t,"decimal-degrees"),t.sort(),t}const jlt=zlt();var TZ;const fR=bs()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Sde=new Bt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var $E;let Od=($E=class extends ve{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}clone(){return new TZ({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&tUe(this.featureExpressionInfo,e.featureExpressionInfo)}},TZ=$E,$E);d([g({type:xde,json:{write:!0}})],Od.prototype,"featureExpressionInfo",void 0),d([je("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Od.prototype,"readFeatureExpressionInfo",null),d([Ge("featureExpressionInfo",{featureExpressionInfo:{type:xde},"featureExpression.value":{type:[0]}})],Od.prototype,"writeFeatureExpressionInfo",null),d([g({type:fR.apiValues,nonNullable:!0,json:{type:fR.jsonValues,read:fR.read,write:{writer:fR.write,isRequired:!0}}})],Od.prototype,"mode",null),d([g({type:Number,json:{write:!0}})],Od.prototype,"offset",void 0),d([g({type:jlt,json:{type:String,read:Sde.read,write:Sde.write}})],Od.prototype,"unit",null),Od=TZ=d([G("esri.symbols.support.ElevationInfo")],Od);let TS=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};d([g({type:String,json:{write:!0}})],TS.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],TS.prototype,"label",void 0),d([g()],TS.prototype,"type",void 0),TS=d([G("esri.tables.elements.AttributeTableElement")],TS);const JT=TS;let aI=class extends Et.ClonableMixin(JT){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};d([g({type:["auto"],json:{write:!0}})],aI.prototype,"displayType",void 0),d([g({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],aI.prototype,"type",void 0),aI=d([G("esri.tables.elements.AttributeTableAttachmentElement")],aI);const FCe=aI;let tw=class extends Et.ClonableMixin(JT){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};d([g({type:String,json:{read:!1,write:!1}})],tw.prototype,"description",void 0),d([g({type:String,json:{write:{enabled:!0,isRequired:!0}}})],tw.prototype,"fieldName",void 0),d([g({type:String,json:{read:!1,write:!1}})],tw.prototype,"label",void 0),d([g({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],tw.prototype,"type",void 0),tw=d([G("esri.tables.elements.AttributeTableFieldElement")],tw);const zCe=tw;let lI=class extends Et.ClonableMixin(JT){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};d([g({type:Number,json:{type:ri,write:{enabled:!0,isRequired:!0}}})],lI.prototype,"relationshipId",void 0),d([g({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],lI.prototype,"type",void 0),lI=d([G("esri.tables.elements.AttributeTableRelationshipElement")],lI);const jCe=lI,UCe={base:JT,key:"type",typeMap:{attachment:FCe,field:zCe,relationship:jCe}};function Ult(t){return{typesWithGroup:{base:JT,key:"type",typeMap:{attachment:FCe,field:zCe,group:t,relationship:jCe}},typesWithoutGroup:UCe}}let cI=class extends Et.ClonableMixin(JT){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};d([g({types:[UCe],json:{name:"attributeTableElements",write:!0}})],cI.prototype,"elements",void 0),d([g({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],cI.prototype,"type",void 0),cI=d([G("esri.tables.elements.AttributeTableGroupElement")],cI);const Blt=cI;let uI=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.field=null,this.order=null}};d([g({type:String,json:{write:!0}})],uI.prototype,"field",void 0),d([g({type:["asc","desc"],json:{write:!0}})],uI.prototype,"order",void 0),uI=d([G("esri.tables.support.FieldOrder")],uI);const Vlt=uI;var $Z;const Glt=Ult(Blt);let hI=$Z=class extends ve{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new $Z({elements:le(this.elements),orderByFields:le(this.orderByFields)})}};d([g({types:[Glt.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],hI.prototype,"elements",void 0),d([g({type:[Vlt],json:{write:!0}})],hI.prototype,"orderByFields",void 0),hI=$Z=d([G("esri.tables.AttributeTableTemplate")],hI);const qlt=hI,Hlt={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:mr}}},I4={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},A4={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:mr}}},Wlt={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:R_}}},Zlt={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:mr}}},Ylt={value:null,type:Od,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:mr}}};function kGt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const BCe={write:{enabled:!0,layerContainerTypes:mr},read:!0},MZ={type:Number,json:{origins:{"web-document":BCe,"portal-item":{write:{layerContainerTypes:mr}}}}},Klt={...MZ,json:{...MZ.json,origins:{"web-document":{...BCe,write:{enabled:!0,layerContainerTypes:mr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?JA(e.layerDefinition.drawingInfo.transparency):void 0:JA(e.drawingInfo.transparency)}}}},OGt={type:Ut,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Ut.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=tt.fromJSON(e.spatialReference)),i}}}},read:!1}},Jlt={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Xlt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:mr}}},Qlt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:mr}}},VCe={json:{write:{ignoreOrigin:!0,layerContainerTypes:mr},origins:{"web-map":{read:!1,write:!1}}}},ect={type:qlt,json:{name:"attributeTableInfo",write:!0}};let im=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};d([g()],im.prototype,"creatorField",void 0),d([g()],im.prototype,"creationDateField",void 0),d([g()],im.prototype,"editorField",void 0),d([g()],im.prototype,"editDateField",void 0),d([g()],im.prototype,"realm",void 0),d([g(c5("dateFieldsTimeReference",!0))],im.prototype,"timeZone",void 0),im=d([G("esri.layers.support.EditFieldsInfo")],im);let Ld=class extends Et.ClonableMixin(ve){constructor(e){super(e)}};d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"name",void 0),d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"fields",void 0),d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"isAscending",void 0),d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"indexType",void 0),d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"isUnique",void 0),d([g({constructOnly:!0,json:{write:!0}})],Ld.prototype,"description",void 0),Ld=d([G("esri.layers.support.FeatureIndex")],Ld);async function GCe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=qCe(t));const r=tct(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function tct(t){return qCe(t)*ict(t)}function ict(t){return t.capabilities.query.maxRecordCount||2e3}function qCe(t){return t.capabilities.query.supportsMaxRecordCountFactor?bt.MAX_MAX_RECORD_COUNT_FACTOR:1}var CZ;let dI=CZ=class extends ve{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new CZ({minValue:this.minValue,maxValue:this.maxValue})}};d([g({type:Number,json:{write:!0}})],dI.prototype,"minValue",void 0),d([g({type:Number,json:{write:!0}})],dI.prototype,"maxValue",void 0),dI=CZ=d([G("esri.renderers.support.AuthoringInfoClassBreakInfo")],dI);var IZ;let lv=IZ=class extends ve{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new IZ({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:le(this.classBreakInfos)})}};d([g({type:String,json:{write:!0}})],lv.prototype,"field",void 0),d([g({type:String,json:{write:!0}})],lv.prototype,"normalizationField",void 0),d([g({type:String,json:{write:!0}})],lv.prototype,"label",void 0),d([g({type:[dI],json:{write:!0}})],lv.prototype,"classBreakInfos",void 0),lv=IZ=d([G("esri.renderers.support.AuthoringInfoFieldInfo")],lv);var AZ;let $S=AZ=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new AZ({label:this.label,value:this.value,size:this.size})}};d([g({type:String,json:{write:!0}})],$S.prototype,"label",void 0),d([g({type:Number,json:{write:!0}})],$S.prototype,"size",void 0),d([g({type:Number,json:{write:!0}})],$S.prototype,"value",void 0),$S=AZ=d([G("esri.renderers.support.AuthoringInfoSizeStop")],$S);const rct=$S;var PZ;const mR=new Bt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),yR=new Bt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Ede={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Tde=["high-to-low","above-and-below","centered-on","extremes"],$de=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Mde=["seconds","minutes","hours","days","months","years"],nct=["circle","diamond","hexagon-flat","hexagon-pointy","square"],sct=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Es=PZ=class extends ve{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new PZ({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:le(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};d([g({types:Ede,json:{write:!0}})],Es.prototype,"endTime",void 0),d([Ai("endTime")],Es.prototype,"castEndTime",null),d([g({type:String,json:{write:!0}})],Es.prototype,"field",void 0),d([g({type:Number,json:{write:!0}})],Es.prototype,"maxSliderValue",void 0),d([g({type:Number,json:{write:!0}})],Es.prototype,"minSliderValue",void 0),d([g({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Es.prototype,"normalizationField",null),d([g({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Es.prototype,"referenceSizeScale",null),d([g({type:nct,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Es.prototype,"referenceSizeSymbolStyle",null),d([g({type:sct,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Es.prototype,"spikeSymbolStyle",null),d([g({types:Ede,json:{write:!0}})],Es.prototype,"startTime",void 0),d([Ai("startTime")],Es.prototype,"castStartTime",null),d([g({type:[rct],json:{origins:{"web-scene":{write:!1}},write:!0}})],Es.prototype,"sizeStops",null),d([g({type:mR.apiValues,value:null,json:{type:mR.jsonValues,read:mR.read,write:mR.write}})],Es.prototype,"style",null),d([g({type:$de,value:null,json:{type:$de,origins:{"web-scene":{type:Tde,write:{writer:(t,e)=>{Tde.includes(t)&&(e.theme=t)}}}},write:!0}})],Es.prototype,"theme",null),d([g({type:yR.apiValues,json:{type:yR.jsonValues,read:yR.read,write:yR.write}})],Es.prototype,"type",void 0),d([g({type:Mde,json:{type:Mde,write:!0}})],Es.prototype,"units",void 0),Es=PZ=d([G("esri.renderers.support.AuthoringInfoVisualVariable")],Es);const oct=Es;let O2=class extends ve{constructor(e){super(e),this.type=null}};d([g({readOnly:!0,json:{read:!1,write:!0}})],O2.prototype,"type",void 0),O2=d([G("esri.rest.support.ColorRamp")],O2);var kZ;let Em=kZ=class extends O2{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new kZ({fromColor:le(this.fromColor),toColor:le(this.toColor),algorithm:this.algorithm})}};d([dt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Em.prototype,"algorithm",void 0),d([g({type:Ze,json:{type:[ri],write:!0}})],Em.prototype,"fromColor",void 0),d([g({type:Ze,json:{type:[ri],write:!0}})],Em.prototype,"toColor",void 0),d([g({type:["algorithmic"]})],Em.prototype,"type",void 0),Em=kZ=d([G("esri.rest.support.AlgorithmicColorRamp")],Em);var OZ;let l2=OZ=class extends O2{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new OZ({colorRamps:le(this.colorRamps)})}};d([g({type:[Em],json:{write:!0}})],l2.prototype,"colorRamps",void 0),d([g({type:["multipart"]})],l2.prototype,"type",void 0),l2=OZ=d([G("esri.rest.support.MultipartColorRamp")],l2);const act={key:"type",base:O2,typeMap:{algorithmic:Em,multipart:l2}};function lct(t){return t!=null&&t.type?t.type==="algorithmic"?Em.fromJSON(t):t.type==="multipart"?l2.fromJSON(t):null:null}var LZ;const wb=new Bt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),gR=new Bt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Cde=new Bt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Ide=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],cct=["high-to-low","above-and-below","above","below"],uct=["flow-line","wave-front"],hct=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Ur=LZ=class extends ve{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?lct(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new LZ({classificationMethod:this.classificationMethod,colorRamp:le(this.colorRamp),fadeRatio:le(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:le(this.field1),field2:le(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};d([g({type:wb.apiValues,value:null,json:{type:wb.jsonValues,read:wb.read,write:wb.write,origins:{"web-document":{default:"manual",type:wb.jsonValues,read:wb.read,write:wb.write}}}})],Ur.prototype,"classificationMethod",null),d([g({types:act,json:{write:!0}})],Ur.prototype,"colorRamp",void 0),d([je("colorRamp")],Ur.prototype,"readColorRamp",null),d([g({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ur.prototype,"fadeRatio",void 0),d([g({type:[String],value:null,json:{write:!0}})],Ur.prototype,"fields",null),d([g({type:lv,value:null,json:{write:!0}})],Ur.prototype,"field1",null),d([g({type:lv,value:null,json:{write:!0}})],Ur.prototype,"field2",null),d([g({type:uct,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ur.prototype,"flowTheme",null),d([g({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Ur.prototype,"focus",null),d([g({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Ur.prototype,"isAutoGenerated",void 0),d([g({type:Number,value:null,json:{type:ri,write:!0}})],Ur.prototype,"numClasses",null),d([g({type:Ide,json:{type:Ide,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ur.prototype,"lengthUnit",void 0),d([g({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ur.prototype,"maxSliderValue",void 0),d([g({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ur.prototype,"minSliderValue",void 0),d([g({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ur.prototype,"statistics",null),d([g({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Ur.prototype,"standardDeviationInterval",null),d([g({type:gR.apiValues,value:null,json:{type:gR.jsonValues,read:gR.read,write:gR.write,origins:{"web-scene":{type:Cde.jsonValues,write:{writer:Cde.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],Ur.prototype,"type",null),d([g({type:[oct],json:{write:!0}})],Ur.prototype,"visualVariables",void 0),d([g({type:hct,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ur.prototype,"univariateSymbolStyle",null),d([g({type:cct,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ur.prototype,"univariateTheme",null),Ur=LZ=d([G("esri.renderers.support.AuthoringInfo")],Ur);const vV=new Bt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let hc=class extends ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};d([g({type:Ur,json:{write:!0}})],hc.prototype,"authoringInfo",void 0),d([g({type:vV.apiValues,readOnly:!0,json:{type:vV.jsonValues,read:!1,write:{writer:vV.write,ignoreOrigin:!0,isRequired:!0}}})],hc.prototype,"type",void 0),hc=d([G("esri.renderers.Renderer")],hc);let pI=class extends Et.ClonableMixin(ve){constructor(){super(...arguments),this.showLegend=null,this.title=null}};d([g({type:Boolean,json:{write:!0}})],pI.prototype,"showLegend",void 0),d([g({type:String,json:{write:!0}})],pI.prototype,"title",void 0),pI=d([G("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],pI);const HCe=pI,bV=new Bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ho=class extends ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):pk(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};d([g()],Ho.prototype,"index",void 0),d([g({type:bV.apiValues,readOnly:!0,json:{read:bV.read,write:{writer:bV.write,isRequired:!0}}})],Ho.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Ho.prototype,"field",void 0),d([Ai("field")],Ho.prototype,"castField",null),d([g({type:String,json:{write:!0}})],Ho.prototype,"valueExpression",void 0),d([g({type:String,json:{write:!0}})],Ho.prototype,"valueExpressionTitle",void 0),d([g({readOnly:!0})],Ho.prototype,"arcadeRequired",null),d([g({type:HCe,json:{write:!0}})],Ho.prototype,"legendOptions",void 0),Ho=d([G("esri.renderers.visualVariables.VisualVariable")],Ho);var RZ;let iw=RZ=class extends ve{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new RZ({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};d([g({type:Ze,json:{type:[ri],write:{isRequired:!0}}})],iw.prototype,"color",void 0),d([g({type:String,json:{write:!0}})],iw.prototype,"label",void 0),d([g({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],iw.prototype,"value",void 0),d([Ge("value")],iw.prototype,"writeValue",null),iw=RZ=d([G("esri.renderers.visualVariables.support.ColorStop")],iw);const dct=iw;var NZ;let cv=NZ=class extends Ho{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new NZ({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};d([g({readOnly:!0})],cv.prototype,"cache",null),d([g({type:["color"],json:{type:["colorInfo"]}})],cv.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],cv.prototype,"normalizationField",void 0),d([g({type:[dct],json:{write:!0}})],cv.prototype,"stops",null),cv=NZ=d([G("esri.renderers.visualVariables.ColorVariable")],cv);var DZ;let Wg=DZ=class extends ve{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return JA(e.transparency)}writeOpacity(t,e,i){e[i]=Qj(t)}clone(){return new DZ({label:this.label,opacity:this.opacity,value:this.value})}};d([g({type:String,json:{write:!0}})],Wg.prototype,"label",void 0),d([g({type:Number,json:{type:ri,write:{target:"transparency",isRequired:!0}}})],Wg.prototype,"opacity",void 0),d([je("opacity",["transparency"])],Wg.prototype,"readOpacity",null),d([Ge("opacity")],Wg.prototype,"writeOpacity",null),d([g({type:Number,json:{write:{isRequired:!0}}})],Wg.prototype,"value",void 0),Wg=DZ=d([G("esri.renderers.visualVariables.support.OpacityStop")],Wg);const pct=Wg;var FZ;let Tm=FZ=class extends Ho{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)),this._set("stops",t)}clone(){var t;return new FZ({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};d([g({readOnly:!0})],Tm.prototype,"cache",null),d([g({type:["opacity"],json:{type:["transparencyInfo"]}})],Tm.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Tm.prototype,"normalizationField",void 0),d([g({type:[pct],json:{write:!0}})],Tm.prototype,"stops",null),Tm=FZ=d([G("esri.renderers.visualVariables.OpacityVariable")],Tm);var zZ;let uv=zZ=class extends Ho{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new zZ({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};d([g({readOnly:!0})],uv.prototype,"cache",null),d([g({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],uv.prototype,"axis",void 0),d([g({type:["rotation"],json:{type:["rotationInfo"]}})],uv.prototype,"type",void 0),d([g({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],uv.prototype,"rotationType",void 0),uv=zZ=d([G("esri.renderers.visualVariables.RotationVariable")],uv);function fct(t){return Ti(t)}var jZ;let gh=jZ=class extends ve{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new jZ({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};d([g({type:String,json:{write:!0}})],gh.prototype,"label",void 0),d([g({type:Number,cast:Ti,json:{write:{isRequired:!0}}})],gh.prototype,"size",void 0),d([g({type:Number,json:{write:{isRequired:!0}}})],gh.prototype,"value",void 0),d([g({type:Boolean,json:{write:!1}})],gh.prototype,"useMinValue",void 0),d([g({type:Boolean,json:{write:!1}})],gh.prototype,"useMaxValue",void 0),gh=jZ=d([G("esri.renderers.visualVariables.support.SizeStop")],gh);let VN=class extends HCe{constructor(){super(...arguments),this.customValues=null}};d([g({type:[Number],json:{write:!0}})],VN.prototype,"customValues",void 0),VN=d([G("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],VN);const WCe=VN;var Qm,As;function c2(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function W_(t){return t!=null&&!isNaN(t)&&isFinite(t)}function ZCe(t){return t.valueExpression?Qm.Expression:t.field&&typeof t.field=="string"?Qm.Field:Qm.Unknown}function mct(t,e){const i=e||ZCe(t),r=t.valueUnit||"unknown";return i===Qm.Unknown?As.Constant:t.stops?As.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?As.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?As.Proportional:As.Additive:As.Identity:As.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Qm||(Qm={})),(function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"})(As||(As={}));const YCe=()=>Ce.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),P4=t=>YCe().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),k4=()=>YCe().error("Use of arcade expressions requires an arcade context"),Ade=new sr,GN=Math.PI,KCe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function JCe(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((w=>w.type==="color")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void P4("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let p=r.cache.compiledFunc;if(!l&&!u){const w=r.stops;return w&&w[0]&&w[0].color}if(typeof a!="number")if(u){if((i==null?void 0:i.arcade)==null)return void k4();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,T=_.getViewInfo(w),$=_.createExecContext(s,T,i.timeZone);if(!p){const I=_.createSyntaxTree(r.valueExpression);p=_.createFunction(I),r.cache.compiledFunc=p}a=_.executeFunction(p,$)}else o&&(a=o[l]);const m=r.normalizationField,v=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(v)&&v!==0)){W_(v)&&!n&&(a/=v);const w=XQ(a,c);if(w){const _=w[0],T=w[1],$=_===T?r.stops[_].color:Ze.blendColors(r.stops[_].color,r.stops[T].color,w[2],i!=null?i.color:void 0);return new Ze($)}}}function XCe(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((w=>w.type==="opacity")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void P4("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let p=r.cache.compiledFunc;if(!l&&!u){const w=r.stops;return w&&w[0]&&w[0].opacity}if(typeof a!="number")if(u){if((i==null?void 0:i.arcade)==null)return void k4();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,T=_.getViewInfo(w),$=_.createExecContext(s,T,i.timeZone);if(!p){const I=_.createSyntaxTree(r.valueExpression);p=_.createFunction(I),r.cache.compiledFunc=p}a=_.executeFunction(p,$)}else o&&(a=o[l]);const m=r.normalizationField,v=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(v)&&v!==0)){W_(v)&&!n&&(a/=v);const w=XQ(a,c);if(w){const _=w[0],T=w[1];if(_===T)return r.stops[_].opacity;{const $=r.stops[_].opacity;return $+(r.stops[T].opacity-$)*w[2]}}}}function QCe(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((v=>v.type==="rotation")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void P4("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,c=r.field,{hasExpression:u}=r.cache;let p=r.cache.compiledFunc,m=null;if(!c&&!u)return m;if(u){if((i==null?void 0:i.arcade)==null)return void k4();const v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},w=i.arcade.arcadeUtils,_=w.getViewInfo(v),T=w.createExecContext(a,_,i.timeZone);if(!p){const $=w.createSyntaxTree(r.valueExpression);p=w.createFunction($),r.cache.compiledFunc=p}m=w.executeFunction(p,T)}else l&&(m=l[c]);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function yct(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const u=i!=null?i.scale:void 0,p=i!=null?i.view:void 0;o=u==null||p==="3d"?gct(t):u}else if(!r)switch(t.inputValueType){case Qm.Expression:{if((i==null?void 0:i.arcade)==null)return void k4();const u={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,m=p.getViewInfo(u),v=p.createExecContext(n,m,i.timeZone);if(!l){const w=p.createSyntaxTree(t.valueExpression);l=p.createFunction(w),t.cache.compiledFunc=l}o=p.executeFunction(l,v);break}case Qm.Field:s&&(o=s[t.field]);break;case Qm.Unknown:o=null}if(!W_(o))return null;if(r||!t.normalizationField)return o;const c=s?parseFloat(s[t.normalizationField]):null;return W_(c)&&c!==0?o/c:null}function gct(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function O4(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find((s=>s.type==="size")):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void P4("SizeVariable");const n=tIe(yct(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function yl(t,e,i){return t==null?null:c2(t)?O4(t,e,i):W_(t)?t:null}function eIe(t,e,i){return W_(i)&&t>i?i:W_(e)&&t<e?e:t}function vct(t,e,i,r){const n=yl(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function bct(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),yl(n,e,i)}function wct(t,e,i,r){const n=yl(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:o}=e;if(s==null||o==null)return null;const a=(t-s)/(o-s),l=yl(e.maxSize,i,r),c=r!=null?r.shape:void 0;if(t<=s)return n;if(t>=o)return l;if(n==null||l==null)return null;if(e.scaleBy==="area"&&c){const u=c==="circle",p=u?GN*(n/2)**2:n*n,m=p+a*((u?GN*(l/2)**2:l*l)-p);return u?2*Math.sqrt(m/GN):Math.sqrt(m)}return n+a*(l-n)}function _ct(t,e,i,r){const n=yl(e.minSize,i,r);if(t==null||n==null)return n;const s=r!=null?r.shape:void 0,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=yl(e.maxSize,i,r);let c=null;return c=s==="circle"?2*Math.sqrt(a*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(a*n**2):a*n,eIe(c,n,l)}function xct(t,e,i,r,n){var l,c,u;if(t==null)return null;const[s,o,a]=XQ(t,n);if(s===o)return yl((l=e.stops)==null?void 0:l[s].size,i,r);{const p=yl((c=e.stops)==null?void 0:c[s].size,i,r),m=yl((u=e.stops)==null?void 0:u[o].size,i,r);return p==null||m==null?null:p+(m-p)*a}}function Sct(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*C4[e.valueUnit],s=yl(e.minSize,i,r),o=yl(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return s;let l=null;return l=a==="area"?2*Math.sqrt(t/GN)/n:a==="radius"||a==="distance"?2*t/n:t/n,eIe(l,s,o)}function tIe(t,e,i,r,n){switch(e.transformationType){case As.Additive:return vct(t,e,i,r);case As.Constant:return bct(e,i,r);case As.ClampedLinear:return wct(t,e,i,r);case As.Proportional:return _ct(t,e,i,r);case As.Stops:return xct(t,e,i,r,n);case As.RealWorldSize:return Sct(t,e,i,r);case As.Identity:return t;case As.Unknown:return null}}function Ect(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=yl(t.minSize,Ade,n),o=yl(t.maxSize,Ade,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Tct(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach((l=>{const c=JCe(l,e,i);r.push({variable:l,value:c})})),s.forEach((l=>{const c=XCe(l,e,i);r.push({variable:l,value:c})})),a.forEach((l=>{const c=QCe(l,e,i);r.push({variable:l,value:c})})),o.forEach((l=>{const c=O4(l,e,i);r.push({variable:l,value:c})})),r}function XQ(t,e){if(!e)return;let i=0,r=e.length-1;return e.some(((n,s)=>t<n?(r=s,!0):(i=s,!1))),[i,r,(t-e[i])/(e[r]-e[i])]}function $ct(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":O4(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const c1=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:$ct,getColor:JCe,getOpacity:XCe,getRotationAngle:QCe,getSize:O4,getSizeForValue:tIe,getSizeFromNumberOrVariable:yl,getSizeRangeAtScale:Ect,getVisualVariableValues:Tct,viewScaleRE:KCe},Symbol.toStringTag,{value:"Module"}));var UZ;const vR=new Bt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),BZ=new Bt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Pde(t){if(t!=null)return typeof t=="string"||typeof t=="number"?fct(t):t.type==="size"?c2(t)?t:(delete(t={...t}).type,new Si(t)):void 0}function kde(t,e,i){if(typeof t!="object")return t;const r=new Si;return r.read(t,i),r}let Si=UZ=class extends Ho{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&KCe.test(this.valueExpression)}}set index(t){c2(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),c2(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return ZCe(this)}set maxDataValue(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return Pde(t)}readMaxSize(t,e,i){return kde(t,e,i)}set minDataValue(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return Pde(t)}readMinSize(t,e,i){return kde(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter((e=>!!e))).sort(((e,i)=>e.value-i.value)):t&&(Ce.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return mct(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new ae("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?BZ.read(t):null}clone(){var t,e;return new UZ({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:c2(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:c2(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map((i=>i.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===As.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===As.Stops){const t=this.stops;if(!t)return this;const e=t.map((r=>r.size)).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map((e=>e.value||0))}};d([g({readOnly:!0})],Si.prototype,"cache",null),d([g({type:vR.apiValues,json:{type:vR.jsonValues,origins:{"web-map":{read:!1}},read:vR.read,write:vR.write}})],Si.prototype,"axis",void 0),d([g()],Si.prototype,"index",null),d([g({type:String,readOnly:!0})],Si.prototype,"inputValueType",null),d([g({type:WCe,json:{write:!0}})],Si.prototype,"legendOptions",void 0),d([g({type:Number,value:null,json:{write:!0}})],Si.prototype,"maxDataValue",null),d([g({type:Number,value:null,json:{write:!0}})],Si.prototype,"maxSize",null),d([Ai("maxSize")],Si.prototype,"castMaxSize",null),d([je("maxSize")],Si.prototype,"readMaxSize",null),d([g({type:Number,value:null,json:{write:!0}})],Si.prototype,"minDataValue",null),d([g({type:Number,value:null,json:{write:!0}})],Si.prototype,"minSize",null),d([Ai("minSize")],Si.prototype,"castMinSize",null),d([je("minSize")],Si.prototype,"readMinSize",null),d([g({type:String,json:{write:!0}})],Si.prototype,"normalizationField",void 0),d([g({readOnly:!0})],Si.prototype,"arcadeRequired",null),d([g({type:String})],Si.prototype,"scaleBy",void 0),d([g({type:[gh],value:null,json:{write:!0}})],Si.prototype,"stops",null),d([g({type:["outline"],json:{write:!0}})],Si.prototype,"target",void 0),d([g({type:String,readOnly:!0})],Si.prototype,"transformationType",null),d([g({type:["size"],json:{type:["sizeInfo"]}})],Si.prototype,"type",void 0),d([g({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Si.prototype,"useSymbolValue",void 0),d([g({type:String,json:{write:!0}})],Si.prototype,"valueExpression",void 0),d([je("valueExpression",["valueExpression","expression"])],Si.prototype,"readValueExpression",null),d([Ge("web-scene","valueExpression")],Si.prototype,"writeValueExpressionWebScene",null),d([g({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Si.prototype,"valueRepresentation",void 0),d([g({type:BZ.apiValues,json:{write:BZ.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Si.prototype,"valueUnit",void 0),d([je("valueUnit")],Si.prototype,"readValueUnit",null),Si=UZ=d([G("esri.renderers.visualVariables.SizeVariable")],Si);const Mct={color:cv,size:Si,opacity:Tm,rotation:uv},Cct=new Bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ict=/^\[([^\]]+)\]$/i;let qN=class extends ut{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter((i=>!!i)),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some((i=>!!i.target))&&e.sort(((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n}));for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(Ict),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map((l=>{const c=Cct.read(l.type),u=Mct[c];u||(Ce.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new vc("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const p=new u;return p.read(l,r),p}))}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};d([g()],qN.prototype,"visualVariables",null),qN=d([G("esri.renderers.visualVariables.VisualVariableFactory")],qN);const Act={base:Ho,key:"type",typeMap:{opacity:Tm,color:cv,rotation:uv,size:Si}},XT=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new qN}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some((({arcadeRequired:r})=>r)))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var n;return((n=this.visualVariables)==null?void 0:n.filter((s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target))))??[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&La(i,r,s.field),s.normalizationField&&La(i,r,s.normalizationField),s.valueExpression&&(Pct(s.valueExpression,i,r)||await Mo(i,r,s.valueExpression)))}};return d([g({types:[Act],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),d([je("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),d([Ge("visualVariables")],e.prototype,"writeVisualVariables",null),e=d([G("esri.renderers.mixins.VisualVariablesMixin")],e),e};function Pct(t,e,i){const r=rKe(t);return r!=null&&(La(e,i,r),!0)}const QQ=[252,146,31,255],kct=[153,153,153,255],Oct={type:"esriSMS",style:"esriSMSCircle",size:6,color:QQ,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Lct={type:"esriSLS",style:"esriSLSSolid",width:.75,color:QQ},Rct={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Nct={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Dct={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Fct={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},zct={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},J5=Or.fromJSON(Oct),L4=Hr.fromJSON(Lct),iIe=Jo.fromJSON(Rct),jct=Hi.fromJSON(Nct);function BGt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return J5;case"polyline":return L4;case"polygon":case"extent":return iIe}return null}const VGt=Or.fromJSON(Dct),GGt=Hr.fromJSON(Fct),qGt=Jo.fromJSON(zct),Uct=Ma.fromSimpleMarkerSymbol(J5),Bct=Ph.fromSimpleLineSymbol(L4),Vct=gu.fromSimpleFillSymbol(iIe),Gct=new Dm({symbolLayers:new et([new xa({material:{color:QQ},edges:new sTe({size:Bi(1),color:new Ze(kct)})})])}),qct=new Ph({symbolLayers:new et([new _a({material:{color:new Ze([0,0,0])},size:Bi(1)})])}),Hct=new gu({symbolLayers:new et([new xa({outline:{color:new Ze([0,0,0]),size:Bi(1)}})])});function HGt(t){if(t==null)return null;switch(t.type){case"mesh":return Gct;case"point":case"multipoint":return Uct;case"polyline":return Bct;case"polygon":case"extent":return Vct}return null}const Ode="#useCIMFallbackSymbology()",$m={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function rT(t,e=$m){var l,c,u,p;if(!t)return{symbol:null};const{retainId:i=$m.retainId,ignoreDrivers:r=$m.ignoreDrivers,hasLabelingContext:n=$m.hasLabelingContext,retainCIM:s=$m.retainCIM,cimFallbackEnabled:o=$m.cimFallbackEnabled}=e;let a=null;if(tf(t)||t instanceof Ks)a=t.clone();else if(t.type==="cim"){const m=(c=(l=t.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(m){case"CIMPointSymbol":a=s?t.clone():Ma.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=qct.clone(),(u=e==null?void 0:e.logWarning)==null||u.call(e,Ode,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Hct.clone(),(p=e==null?void 0:e.logWarning)==null||p.call(e,Ode,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new ae("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Hr)a=Ph.fromSimpleLineSymbol(t);else if(t instanceof Or)a=Ma.fromSimpleMarkerSymbol(t);else if(t instanceof Go)a=Ma.fromPictureMarkerSymbol(t);else if(t instanceof Jo)a=e.geometryType&&e.geometryType==="mesh"?Dm.fromSimpleFillSymbol(t):gu.fromSimpleFillSymbol(t);else{if(!(t instanceof Hi))return{error:new ae("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=n?fh.fromTextSymbol(t):Ma.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof Ks||a.symbolLayers.forEach((m=>m.ignoreDrivers=!0)),{symbol:a}}function X5(t,e,i,r){const n=rIe(t,{},{context:r,isLabelSymbol:!1});n!=null&&Vn(i,n,e)}function Lde(t,e,i,r){const n=rIe(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function Rde(t){return tf(t)||t instanceof Ks}function Wct(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function rIe(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!Rde(t)){const l=rT(t,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(e,r):(o==null||o.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return Iq(r==null?void 0:r.layer)&&Wct(t)?(o==null||o.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!Iq(r==null?void 0:r.layer))&&Rde(t)?(o==null||o.push(new ae("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function nIe(t,e){return WJe(t,null,e)}const R4={types:TTe,json:{write:{writer:X5},origins:{"web-scene":{types:Sce,write:{writer:X5},read:{reader:LT({types:Sce})}}}}},eee=VJ({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},R4),tee={types:{base:Un,key:"type",typeMap:{"simple-fill":Ov.typeMap["simple-fill"],"picture-fill":Ov.typeMap["picture-fill"],"polygon-3d":Ov.typeMap["polygon-3d"],cim:Ov.typeMap.cim}},json:{write:{writer:X5},origins:{"web-scene":{type:gu,write:{writer:X5}}}}},HN={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var VZ;let Ca=VZ=class extends XT(hc){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map((i=>i.collectRequiredFields(t,e))))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((t,e)=>t+JSON.stringify(e)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new VZ({description:this.description,label:this.label,symbol:le(this.symbol),visualVariables:le(this.visualVariables),authoringInfo:le(this.authoringInfo)})}};d([g({type:String,json:{write:!0}})],Ca.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],Ca.prototype,"label",void 0),d([g(eee)],Ca.prototype,"symbol",void 0),d([dt({simple:"simple"})],Ca.prototype,"type",void 0),Ca=VZ=d([G("esri.renderers.SimpleRenderer")],Ca);const Zct=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function GZ(t){return t instanceof ut}function Nde(t){return t instanceof et?Object.keys(t.items):GZ(t)?Ra(t).keys():t?Object.keys(t):[]}function bR(t,e){return t instanceof et?t.items[e]:t[e]}function Yct(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function dA(t){return t?t.declaredClass:null}function sIe(t,e){var p;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=Nde(t),n=Nde(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||Yct(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter((m=>!r.includes(m))),o=r.filter((m=>!n.includes(m))),a=r.filter((m=>n.includes(m)&&bR(t,m)!==bR(e,m))).concat(s,o).sort(),l=dA(t);if(l&&Zct.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const u=GZ(t)&&GZ(e);for(const m of a){const v=bR(t,m),w=bR(e,m);let _;if((u||typeof v!="function"&&typeof w!="function")&&v!==w&&(v!=null||w!=null)){if(i&&i[m]&&typeof i[m]=="function")_=(p=i[m])==null?void 0:p.call(i,v,w);else if(v instanceof Date&&w instanceof Date){if(v.getTime()===w.getTime())continue;_={type:"complete",oldValue:v,newValue:w}}else _=typeof v=="object"&&typeof w=="object"&&dA(v)===dA(w)?sIe(v,w):{type:"complete",oldValue:v,newValue:w};_!=null&&(c!=null?c.diff[m]=_:c={type:"partial",diff:{[m]:_}})}}return c}function WGt(t,e){return Kct(t,e)}function Kct(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function ZGt(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Jct(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&dA(t)!==dA(e)?{type:"complete",oldValue:t,newValue:e}:sIe(t,e)}function wR(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!wR(i))return!1;for(const i of e.removed)if(!wR(i))return!1;for(const i of e.changed)if(!wR(i))return!1;return!0}case"partial":for(const e in t.diff)if(!wR(t.diff[e]))return!1;return!0}}var qZ;const Xct=bs()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let fI=qZ=class extends Et.ClonableMixin(ve){static from(t){return fk(qZ,t)}constructor(t){super(t),this.title=null,this.order=null}};d([g({type:String,json:{write:!0}})],fI.prototype,"title",void 0),d([dt(Xct)],fI.prototype,"order",void 0),fI=qZ=d([G("esri.renderers.support.RendererLegendOptions")],fI);const iee=fI;let $h=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};d([g(HN)],$h.prototype,"value",void 0),d([g(HN)],$h.prototype,"value2",void 0),d([g(HN)],$h.prototype,"value3",void 0),$h=d([G("esri.renderers.support.UniqueValue")],$h);let mm=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map((r=>new $h({value:r}))):i==="object"?e[0]instanceof $h?e:e.map((r=>new $h(r))):null}};d([g({type:String,json:{write:!0}})],mm.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],mm.prototype,"label",void 0),d([g(R4)],mm.prototype,"symbol",void 0),d([g({type:[$h],json:{type:[[String]],read:{reader:t=>t?t.map((e=>new $h({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(rs).map((s=>s.toString()));i.push(n)}e.values=i}}}})],mm.prototype,"values",void 0),d([Ai("values")],mm.prototype,"castValues",null),mm=d([G("esri.renderers.support.UniqueValueClass")],mm);let Gw=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.heading=null,this.classes=null}};d([g({type:String,json:{write:!0}})],Gw.prototype,"heading",void 0),d([g({type:[mm],json:{write:{isRequired:!0}}})],Gw.prototype,"classes",void 0),Gw=d([G("esri.renderers.support.UniqueValueGroup")],Gw);var HZ;let Sh=HZ=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new HZ({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};d([g({type:String,json:{write:!0}})],Sh.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],Sh.prototype,"label",void 0),d([g(eee)],Sh.prototype,"symbol",void 0),d([g(HN)],Sh.prototype,"value",void 0),Sh=HZ=d([G("esri.renderers.support.UniqueValueInfo")],Sh);const Dde=new Map;async function Qct(t,e){try{return{data:(await ree(t,e)).data,baseUrl:fX(t),styleUrl:t}}catch(i){return Hd(i),null}}function eut(t,e,i){var l;const r=e.portal!=null?e.portal:Ue.getDefault();let n;const s=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,o=Dde.get(s);if(o)return o;const a=tut(t,r,i).then((c=>(n=c,c.fetchData()))).then((c=>({data:c,baseUrl:n.itemUrl??"",styleName:t})));return Dde.set(s,a),a}function tut(t,e,i){return e.load(i).then((()=>{const r=new Rn({disableExtraQuery:!0,query:`owner:${Fde} AND type:${zde} AND typekeywords:"${t}"`});return e.queryItems(r,i)})).then((({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some((c=>c.toLowerCase()===s)))&&a.type===zde&&a.owner===Fde){n=a;break}}if(!n)throw new ae("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)}))}function oIe(t,e,i){return(t==null?void 0:t.styleUrl)!=null?Qct(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?eut(t.styleName,e,i):Promise.reject(new ae("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function aIe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function iut(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=wV(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=wV(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=wV(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function wV(t,e){var i,r;if(!ge("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find((n=>n.type===e)))==null?void 0:r.href}function ree(t,e){const i={responseType:"json",query:{f:"json"},...e};return ni(Lh(t),i)}const Fde="esri_en",zde="Style",rut="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var mI;const jde="uvInfos-watcher",Ude="uvGroups-watcher",nut=",",sut=Zr(Sh);function out(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map((l=>{var $;const{symbol:c,label:u,value:p,description:m}=l,[v,w,_]=a?(($=p==null?void 0:p.toString())==null?void 0:$.split(n||""))||[]:[p],T=[];return(e||o)&&T.push(v),i&&T.push(w),r&&T.push(_),{symbol:c,label:u,values:[T],description:m}}))}]}function $x(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let br=mI=class extends XT(hc){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find((a=>a.value===i[s].value));o?Jct(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find((o=>o.value===e[s].value))||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:pk(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new ae("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ce.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Ue.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=ny(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=L_(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?Ce.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Ce.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void Ce.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?sut(t):new Sh({value:t,symbol:$Te(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[$x(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Ce.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[$x(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await oy()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ce.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await oy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce(((n,s)=>n+s.getMeshHash()),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new mI({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:le(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:le(this.authoringInfo),backgroundFillSymbol:le(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=le(this.uniqueValueInfos),i=le(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(le(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),Mo(t,e,this.valueExpression)];La(t,e,this.field),La(t,e,this.field2),La(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return oIe(this.styleOrigin,{portal:this.portal}).then((t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((r=>{const n=new Ks({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Sh({value:r.name,symbol:n});e.push(s),this._valueInfoMap[$x(r.name)]=s})),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",nut)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[$x(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(jde);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Je((()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description})),((r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(e,jde)}}_watchUniqueValueGroups(){this.removeHandles(Ude);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Je((()=>({classes:i.classes})),((r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const r of i.classes??[])e.push(Je((()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description})),((n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(e,Ude)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:u,label:p,values:m,description:v}=c;for(const w of m??[]){const{value:_,value2:T,value3:$}=w,I=[_];i&&I.push(T),r&&I.push($);const A=a?I.join(n||""):I[0]??void 0;t.push(new Sh({symbol:u,label:p,value:A,description:v}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map((c=>{var $;const{symbol:u,label:p,value:m,description:v}=c,[w,_,T]=o?(($=m==null?void 0:m.toString())==null?void 0:$.split(n||""))||[]:[m];return new mm({symbol:u,label:p,description:v,values:[new $h({value:w,value2:_,value3:T})]})})),l=[new Gw({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const u=l.createSyntaxTree(this.valueExpression);a=l.createFunction(u),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[$x(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[$x(r)]}static fromPortalStyle(t,e){const i=new mI(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Ue.getDefault());const r=i.populateFromStyle();return r.catch((n=>{Ce.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)})),r}static fromStyleUrl(t,e){const i=new mI(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch((n=>{Ce.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)})),r}};d([g({readOnly:!0})],br.prototype,"_cache",null),d([dt({uniqueValue:"unique-value"})],br.prototype,"type",void 0),d([g(tee)],br.prototype,"backgroundFillSymbol",void 0),d([g({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],br.prototype,"field",null),d([Ai("field")],br.prototype,"castField",null),d([Ge("field")],br.prototype,"writeField",null),d([g({type:String,value:null,json:{write:!0}})],br.prototype,"field2",null),d([g({type:String,value:null,json:{write:!0}})],br.prototype,"field3",null),d([g({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"orderByClassesEnabled",void 0),d([g({type:String,value:null,json:{write:!0}})],br.prototype,"valueExpression",null),d([g({type:String,json:{write:!0}})],br.prototype,"valueExpressionTitle",void 0),d([g({type:iee,json:{write:!0}})],br.prototype,"legendOptions",void 0),d([g({type:String,json:{write:!0}})],br.prototype,"defaultLabel",void 0),d([g(VJ({...R4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],br.prototype,"defaultSymbol",null),d([g({type:String,value:null,json:{write:!0}})],br.prototype,"fieldDelimiter",null),d([g({type:Ue,readOnly:!0})],br.prototype,"portal",void 0),d([je("portal",["styleName"])],br.prototype,"readPortal",null),d([g({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],br.prototype,"styleOrigin",void 0),d([je("styleOrigin",["styleName","styleUrl"])],br.prototype,"readStyleOrigin",null),d([Ge("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],br.prototype,"writeStyleOrigin",null),d([g({type:[Gw],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||out(e)).map((r=>Gw.fromJSON(r,i)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],br.prototype,"uniqueValueGroups",null),d([g({type:[Sh],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],br.prototype,"uniqueValueInfos",null),br=mI=d([G("esri.renderers.UniqueValueRenderer")],br);var WZ,ME;let Ts=(ME=class extends ve{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new WZ(le({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},WZ=ME,ME);d([g({type:[String],json:{write:!0}})],Ts.prototype,"attachmentTypes",void 0),d([g({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ts.prototype,"attachmentsWhere",void 0),d([g({type:Boolean,json:{write:!0}})],Ts.prototype,"cacheHint",void 0),d([g({type:[String],json:{write:!0}})],Ts.prototype,"keywords",void 0),d([g({type:[String],json:{write:!0}})],Ts.prototype,"globalIds",void 0),d([g({json:{write:!0}})],Ts.prototype,"name",void 0),d([g({type:Number,json:{read:{source:"resultRecordCount"}}})],Ts.prototype,"num",void 0),d([g({type:[Number],json:{write:!0}})],Ts.prototype,"objectIds",void 0),d([g({type:[String],json:{write:!0}})],Ts.prototype,"orderByFields",void 0),d([g({type:Boolean,json:{default:!1,write:!0}})],Ts.prototype,"returnMetadata",void 0),d([g({type:[Number],json:{write:!0}})],Ts.prototype,"size",void 0),d([g({type:Number,json:{read:{source:"resultOffset"}}})],Ts.prototype,"start",void 0),d([Ge("start"),Ge("num")],Ts.prototype,"writeStart",null),d([g({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ts.prototype,"where",void 0),Ts=WZ=d([G("esri.rest.support.AttachmentQuery")],Ts),Ts.from=Zr(Ts);const lIe=bs()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),Bde="percent-of-total",Vde="field",XGt=t=>{let e=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,n=this.normalizationTotal!=null;return r||n?(i=r&&Vde||n&&Bde||null,r&&n&&Ce.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==Vde&&i!==Bde||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return d([g({type:String,json:{name:"parameters.normalizationField",write:!0}})],e.prototype,"normalizationField",void 0),d([g({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],e.prototype,"normalizationMaxValue",void 0),d([g({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],e.prototype,"normalizationMinValue",void 0),d([g({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],e.prototype,"normalizationTotal",void 0),d([dt(lIe,{name:"parameters.normalizationType"})],e.prototype,"normalizationType",null),e=d([G("esri.rest.support.NormalizationBinParametersMixin")],e),e};var ZZ,CE;let Cr=(CE=class extends ve{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new ZZ(le({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},ZZ=CE,CE);d([g({type:Boolean,json:{write:!0}})],Cr.prototype,"cacheHint",void 0),d([g({type:mh,json:{write:!0}})],Cr.prototype,"dynamicDataSource",void 0),d([g({type:String,json:{write:!0}})],Cr.prototype,"gdbVersion",void 0),d([g({type:Number,json:{write:!0}})],Cr.prototype,"geometryPrecision",void 0),d([g({type:Date})],Cr.prototype,"historicMoment",void 0),d([Ge("historicMoment")],Cr.prototype,"_writeHistoricMoment",null),d([g({type:Number,json:{write:!0}})],Cr.prototype,"maxAllowableOffset",void 0),d([g({json:{write:!0}})],Cr.prototype,"objectIds",void 0),d([g({type:[String],json:{write:!0}})],Cr.prototype,"orderByFields",void 0),d([g({type:[String],json:{write:!0}})],Cr.prototype,"outFields",void 0),d([g({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Cr.prototype,"outSpatialReference",void 0),d([g({json:{write:!0}})],Cr.prototype,"relationshipId",void 0),d([g({type:Number,json:{read:{source:"resultOffset"}}})],Cr.prototype,"start",void 0),d([Ge("start"),Ge("num")],Cr.prototype,"writeStart",null),d([g({type:Number,json:{read:{source:"resultRecordCount"}}})],Cr.prototype,"num",void 0),d([g({json:{write:!0}})],Cr.prototype,"returnGeometry",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Cr.prototype,"returnM",void 0),d([g({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Cr.prototype,"returnZ",void 0),d([g({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Cr.prototype,"where",void 0),Cr=ZZ=d([G("esri.rest.support.RelationshipQuery")],Cr),Cr.from=Zr(Cr);const QGt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Cr}},Symbol.toStringTag,{value:"Module"})),YZ=new Bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function aut(t,e,i,r){const n=await T0(t);if(await nee(t,e,r),!n.addAttachment)throw new ae(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function nee(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new ae(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new ae(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ae(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ae(i,"this layer doesn't support attachments"))}async function lut(t,e,i,r,n){const s=await T0(t);if(await nee(t,e,n),!s.updateAttachment)throw new ae(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function cut(t,e,i){const{applyEdits:r}=await Re(()=>import("./editingSupport-D1sg11d_.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await Put(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function uut(t,e,i){const{uploadAssets:r}=await Re(()=>import("./editingSupport-D1sg11d_.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function hut(t,e,i,r){const n=await T0(t);if(await nee(t,e,r),!n.deleteAttachments)throw new ae(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function dut(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ae(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function put(t,e,i,r){var v,w,_,T;e=Ts.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((v=s==null?void 0:s.data)!=null&&v.supportsAttachment))throw new ae(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:u,start:p,where:m}=e;if(!((w=s==null?void 0:s.operations)!=null&&w.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(u==null?void 0:u.length)>0||c||p||m))throw new ae(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||m))throw new ae(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new ae(r,"Layer source does not support queryAttachments capability",e);return!((_=s==null?void 0:s.attachment)!=null&&_.supportsOrderByFields)&&((T=e.orderByFields)!=null&&T.length)&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function fut(t,e,i,r){const n=await T0(t);if(!n.queryObjectIds)throw new ae(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(bt.from(e)??t.createQuery(),i)}async function mut(t,e,i,r){const n=await T0(t);if(!n.queryFeatureCount)throw new ae(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(bt.from(e)??t.createQuery(),i)}async function yut(t,e,i,r){const n=await T0(t);if(!n.queryExtent)throw new ae(r,"Layer source does not support queryExtent capability");return n.queryExtent(bt.from(e)??t.createQuery(),i)}async function gut(t,e,i,r){const n=await T0(t);if(!n.queryRelatedFeatures)throw new ae(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Cr.from(e),i)}async function vut(t,e,i,r){const n=await T0(t);if(!n.queryRelatedFeaturesCount)throw new ae(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Cr.from(e),i)}async function but(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await cQ(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function wut(t){var o,a;const e=new bt;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(o=t.capabilities)==null?void 0:o.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(a=t.capabilities)==null?void 0:a.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function cIe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function uIe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function _ut(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function xut(t,e,i,r){var l,c;const n=i==null?void 0:i.feature,s=!!((l=t.subtypes)!=null&&l.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const u=Eut(t,e);if(u)return u}const o=s&&Sut(t,n);if(o){const u=(c=o==null?void 0:o.domains)==null?void 0:c[e];return(u==null?void 0:u.type)==="inherited"?r:u}const a=pIe(t.types,t.typeIdField,n);if(a){const u=a.domains&&a.domains[e];if(u&&(u==null?void 0:u.type)!=="inherited")return u}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const u=Tut(t,e);if(u)return u}return null}function Sut(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find((s=>s.code===n))}function Eut(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===n&&((a=t.subtypes)!=null&&a.length)){const l=t.subtypes.map((c=>new Bw({code:hIe(c.code,s),name:c.name})));if(l!=null&&l.length)return new Rv({codedValues:l})}return null}function Tut(t,e){var s,o;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map((l=>new Bw({code:hIe(l.id,n),name:l.name})));return new Rv({codedValues:a})}return null}function hIe(t,e){return e?YEe({type:e})&&typeof t=="number"?`${t}`:PKe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function T0(t){return(await t.load()).source}async function eqt(t,e){if(!Rt)return;const i=Rt.findCredential(t);if(i)return i.userId;let r;try{const n=await iQ(t,e);n&&(r=await Rt.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function dIe(t,e){if(!Rt||Rt.findCredential(t))return;let i;try{const r=await iQ(t,e);r&&(i=await Rt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Rt.getCredential(t,{signal:r})}catch{}}async function $ut(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await dIe(r,i)}async function tqt(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&Mut(t)&&await dIe(e)}function Mut(t){return Cut(t)&&("serviceDefinitionExpression"in t&&Q5(t.serviceDefinitionExpression)||"definitionExpression"in t&&Q5(t.definitionExpression))}function Cut(t){var e;return!(!J2e(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function Q5(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function Iut(t){return!WN(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const _V=LT({types:TTe});function see(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new br({defaultSymbol:_V(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map((r=>({id:r.id,symbol:_V(r.symbol,r,e)})))}):new Ca({symbol:_V(t.defaultSymbol,t,e)})}function Aut(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function Put(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach((c=>{let u=null;if("attributes"in c){const{attributes:p}=c;u={globalId:p[i],objectId:p[n]!=null&&p[n]!==-1?p[n]:null}}else u={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};u.globalId!=null&&(u.objectId!=null&&u.objectId!==-1||r.push(u.globalId))})),r.length===0)return null;const s=t.createQuery();s.where=r.map((c=>`${i}='${c}'`)).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await sWe(GCe(t,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const u=c.attributes[i],p=c.attributes[n];u!=null&&p!=null&&p!==-1&&a.set(iZe(u),p)}return a}function pIe(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find((n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()}))??null}function WN(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||kut(t)}function kut(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map((r=>r.trim())).includes("map"))}function Out(t,e,i){var s;const r=e==null?void 0:e.queryAttributeBins;if(!((s=e==null?void 0:e.operations)!=null&&s.supportsQueryBins)||!r)throw new ae(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new ae(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!Gde(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ae(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new ae(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new ae(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new ae(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new ae(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new ae(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!Gde(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new ae(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new ae(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new ae(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new ae(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const l=o.get(a);if(l&&!n[l])throw new ae(i,`Layer source does not support ${a} statistic type`)}}}function Gde(t,e){return t!=null&&!!(e!=null&&e[lIe.toJSON(t)])}let MS=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};d([g({type:String,json:{read:{source:"shapeAreaFieldName"}}})],MS.prototype,"shapeAreaField",void 0),d([g({type:String,json:{read:{source:"shapeLengthFieldName"}}})],MS.prototype,"shapeLengthField",void 0),d([g({type:String,json:{read:t=>G8e.read(t)||q8e.read(t)}})],MS.prototype,"units",void 0),MS=d([G("esri.layers.support.GeometryFieldsInfo")],MS);var KZ;let CS=KZ=class extends ve{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new et}clone(){return new KZ({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};d([g({type:String,json:{write:{isRequired:!0}}})],CS.prototype,"floorField",void 0),d([g({json:{read:!1,write:!1}})],CS.prototype,"viewAllMode",void 0),d([g({json:{read:!1,write:!1}})],CS.prototype,"viewAllLevelIds",void 0),CS=KZ=d([G("esri.layers.support.LayerFloorInfo")],CS);const qde=new Bt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Hde=new Bt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Wl=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};d([g({json:{read:qde.read,write:qde.write}})],Wl.prototype,"cardinality",void 0),d([g({json:{name:"catalogID"}})],Wl.prototype,"catalogId",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"composite",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"id",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"keyField",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"keyFieldInRelationshipTable",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"name",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"relatedTableId",void 0),d([g({json:{read:!0,write:!0}})],Wl.prototype,"relationshipTableId",void 0),d([g({json:{read:Hde.read,write:Hde.write}})],Wl.prototype,"role",void 0),Wl=d([G("esri.layers.support.Relationship")],Wl);const Lut=[["binary","application/octet-stream","bin",""]];function nqt(t,e){return gIe(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function sqt(t,e){if(!t)return!1;const i=Rut(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function fIe(t,e){return aee(zut(t,e))}function mIe(t,e){return aee(gIe(t,e))}function oqt(t,e){return vIe(Fut(t,e))}function Rut(t,e){return mIe(t.name,e)??fIe(t.type,e)}function N4(t,e,i){return fIe(t,i)??mIe(e,i)}function yIe({supportedFormats:t}){return N4("model/gltf-binary","glb",t)}function aqt(t){const e=yIe(t);return e!=null&&t.editFormats.includes(e)}function Nut({supportedFormats:t}){return N4("model/gltf+json","gltf",t)}function Dut(t){if(!t)return null;const e=yIe(t),i=Nut(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function lqt({supportedFormats:t}){return N4("application/esri3do-SR_world","wld",t)}function cqt({supportedFormats:t}){return N4("application/esri3do-SR_prj","prj",t)}function oee(t){return[...Lut,...t]}function Fut(t,e){return oee(e).find((i=>aee(i)===t))}function zut(t,e){const i=t.toLowerCase();return oee(e).find((r=>vIe(r)===i))}function gIe(t,e){const i=t.toLowerCase();return oee(e).find((r=>jut(r).some((n=>i.endsWith(n)))))}function aee(t){return t==null?void 0:t[0]}function vIe(t){return t==null?void 0:t[1].toLowerCase()}function jut(t){return(t==null?void 0:t[2].split(",").map((e=>e.toLowerCase())))??[]}function uqt(t){var e;return(e=t.tables)==null?void 0:e.find((i=>i.role==="assetMaps"))}function st(t,e,i){return!!bIe(t,e,i)}function IS(t,e,i){return bIe(t,e,i)}function bIe(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const Uut={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function But(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map((r=>r.toLowerCase()));return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Rk(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map((n=>n.toLowerCase()));return!!(i!=null&&i.includes(e.toLowerCase()))}function Vut(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Gut(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map((r=>r.toLowerCase()));return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function wIe(t,e){return{analytics:qut(t),attachment:Hut(t),data:Wut(t),metadata:Zut(t),operations:Yut(t.capabilities,t,e),query:Kut(t,e),queryAttributeBins:Qut(t),queryRelated:Jut(t),queryTopFeatures:Xut(t),editing:eht(t)}}function qut(t){return{supportsCacheHint:Rk(t.advancedQueryCapabilities,"queryAnalytics")}}function Hut(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Rk(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:st(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:st(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach((r=>{const n=Uut[r.name];n&&(i[n]=!!r.isEnabled)})),i}function Wut(t){return{isVersioned:st(t,"isDataVersioned",!1),isBranchVersioned:st(t,"isDataBranchVersioned",!1),supportsAttachment:st(t,"hasAttachments",!1),supportsM:st(t,"hasM",!1),supportsZ:st(t,"hasZ",!1)}}function Zut(t){return{supportsAdvancedFieldProperties:st(t,"supportsFieldDescriptionProperty",!1)}}function Yut(t,e,i){var m;const r=(t==null?void 0:t.toLowerCase().split(",").map((v=>v.trim())))??[],n=i?Gp(i):null,s=r.includes((n==null?void 0:n.serverType)==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&((m=e.uniqueIdInfo)==null?void 0:m.OIDFieldContainsHashValue)!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const u=r.includes("changetracking"),p=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:st(e,"supportsCalculate",!1),supportsTruncate:st(e,"supportsTruncate",!1),supportsValidateSql:st(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:u,supportsQuery:s,supportsQueryAnalytics:st(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:st(p,"supportsQueryAttachments",!1),supportsQueryBins:st(p,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryTopFeatures:st(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:st(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:st(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:st(e,"supportsAsyncConvert3D",!1)}}function Kut(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=ge("mapserver-pbf-version-support"),l=HD(e),c=new Set((t.supportedQueryFormats??"").split(",").map((u=>u.toLowerCase().trim())));return{maxRecordCount:IS(t,"maxRecordCount",void 0),maxRecordCountFactor:IS(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:IS(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:IS(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:But(i),supportsCacheHint:st(i,"supportsQueryWithCacheHint",!1)||Rk(i,"query"),supportsCentroid:st(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:st(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:st(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:st(i,"supportsDisjointSpatialRel",!1),supportsDistance:st(i,"supportsQueryWithDistance",!1),supportsDistinct:st(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:st(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:st(i,"supportsFullTextSearch",!1),supportsGeometryProperties:st(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:st(i,"supportsHavingClause",!1),supportsHistoricMoment:st(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:st(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:st(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:st(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:st(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:st(i,"supportsPercentileStatistics",!1),supportsQuantization:st(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:st(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:st(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:st(r,"allowOthersToQuery",!0),supportsQueryGeometry:st(t,"supportsReturningQueryGeometry",!1),supportsResultType:st(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Dut(t.infoFor3D),supportsSpatialAggregationStatistics:st(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:st(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:st(t,"useStandardizedQueries",!1),supportsStatistics:st(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:st(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:st(i,"supportsTrueCurve",!1),tileMaxRecordCount:IS(t,"tileMaxRecordCount",void 0)}}function Jut(t){const e=t.advancedQueryCapabilities,i=st(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:st(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Rk(e,"queryRelated")}}function Xut(t){return{supportsCacheHint:Rk(t.advancedQueryCapabilities,"queryTopFilter")}}function Qut(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:st(e,"supportsDateBin",!1),supportsFixedInterval:st(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:st(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:st(e,"supportsFixedBoundariesBin",!1),supportsStackBy:st(e,"supportsStackBy",!1),supportsSplitBy:st(e,"supportsSplitBy",!1),supportsSnapToData:st(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:st(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:st(e,"supportsFirstDayOfWeek",!1),supportsNormalization:st(e,"supportsNormalization",!1),supportedStatistics:Vut(e),supportedNormalizationTypes:Gut(e)}}function eht(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:st(t,"allowGeometryUpdates",!0),supportsGlobalId:st(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:st(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:st(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:st(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:st(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:st(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:st(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:st(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:st(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:st(i,"supportsAsyncApplyEdits",!1),zDefault:IS(t,"zDefault",void 0)}}function hqt(t){var e;return{operations:{supportsAppend:st(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:st(t,"supportsExportClip",!1),supportsExportFrameset:st(t,"supportsExportFrameset",!1),supportsMensuration:st(t,"supportsMensuration",!1),supportsPreviews:st(t,"supportsPreviews",!1),supportsUpdate:st(t,"supportsUpdate",!1)}}}let rm=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=c4(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};d([g({type:Number,json:{write:!0}})],rm.prototype,"code",void 0),d([g({type:Object,json:{write:!0}})],rm.prototype,"defaultValues",void 0),d([g({json:{write:!0}})],rm.prototype,"domains",void 0),d([je("domains")],rm.prototype,"readDomains",null),d([Ge("domains")],rm.prototype,"writeDomains",null),d([g({type:String,json:{write:!0}})],rm.prototype,"name",void 0),rm=d([G("esri.layers.support.Subtype")],rm);const tht=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(et.ofType(Ld)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=tt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:n,operations:s,editing:o}=i;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(Q5(this.serviceDefinitionExpression)||Q5(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Aut(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return wIe(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=le(i),{operations:n,editing:s}=r;return WN(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return cIe(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||WN(this))return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return WN(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return uIe(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}readUniqueIdFields(i,r){var n;return(n=r.uniqueIdInfo)!=null&&n.OIDFieldContainsHashValue?r.uniqueIdInfo.fields:null}set url(i){if(i==null)return void this._set("url",i);const r=WBe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Ce.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){ZBe(this,i,null,r,s)}readVersion(i,r){return _ut(r)}get isUrlHostModified(){var o;const{loaded:i,url:r,_isUrlHostModified:n}=this;if(n)return!0;if(!i||!r||this.originIdOf("url")<Dt.USER)return!1;const s=(o=this.sourceJSON)==null?void 0:o.preferredHost;if(!s||!Op(r,`https://${s}`,!0))return!1;for(let a=Dt.USER-1;a>=Dt.PORTAL_ITEM;a--){const l=this.getAtOrigin("url",jA(a));if(l)return!Op(r,l,!0)}return!1}applyPreferredHost(i){const{url:r,portalItem:n}=this;!r||Aq(n)}applyHostFromPortalItem(){const{url:i,portalItem:r}=this;if(!i||this.originIdOf("url")===Dt.USER||!(r!=null&&r.url)||!Aq(r)||!BQ(r,VQ.HOSTED_SERVICE)||Op(i,r.url,!0)||!this._isUrlHostModificationEnabled)return;const n=DBe(r.url);this._set("url",E1e(i,n)),this._isUrlHostModified=!0}};return d([g({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),d([g({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),d([g({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),d([je("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),d([g(c5("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),d([g({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),d([g({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),d([g({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),d([g({readOnly:!0,type:im})],e.prototype,"editFieldsInfo",void 0),d([g({readOnly:!0})],e.prototype,"editingInfo",void 0),d([je("editingInfo")],e.prototype,"readEditingInfo",null),d([g({readOnly:!0})],e.prototype,"effectiveCapabilities",null),d([g()],e.prototype,"effectiveEditingEnabled",null),d([g((()=>{const i=le(Ylt),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),d([g()],e.prototype,"fieldsIndex",void 0),d([g({type:CS,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:mr}}})],e.prototype,"floorInfo",void 0),d([g({type:Ut,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),d([g()],e.prototype,"gdbVersion",void 0),d([g({readOnly:!0,type:MS,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),d([g({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:YZ.read}}}})],e.prototype,"geometryType",void 0),d([g({type:String})],e.prototype,"globalIdField",void 0),d([je("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),d([g({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),d([g({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),d([g({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),d([g({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),d([g({readOnly:!0,type:wa})],e.prototype,"heightModelInfo",void 0),d([g({type:Date})],e.prototype,"historicMoment",void 0),d([g({type:et.ofType(Ld),readOnly:!0})],e.prototype,"indexes",void 0),d([g({readOnly:!0})],e.prototype,"isTable",void 0),d([je("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),d([g({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),d([g(Qlt)],e.prototype,"maxScale",void 0),d([je("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),d([g(Xlt)],e.prototype,"minScale",void 0),d([je("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),d([g({type:String})],e.prototype,"objectIdField",void 0),d([je("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),d([g(c5("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),d([g({type:[Wl],readOnly:!0})],e.prototype,"relationships",void 0),d([g({type:Boolean})],e.prototype,"returnM",void 0),d([g({type:Boolean})],e.prototype,"returnZ",void 0),d([g({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),d([g({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),d([je("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),d([g({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),d([g()],e.prototype,"sourceJSON",void 0),d([g({type:tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),d([g({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),d([g({type:[rm],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),d([g({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),d([g({type:[String],readOnly:!0})],e.prototype,"uniqueIdFields",void 0),d([je("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],e.prototype,"readUniqueIdFields",null),d([g(Wlt)],e.prototype,"url",null),d([Ge("url")],e.prototype,"writeUrl",null),d([g({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),d([je("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),d([g({readOnly:!0})],e.prototype,"isUrlHostModified",null),e=d([G("esri.layers.mixins.FeatureLayerBase")],e),e};let vv=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};d([g({type:String,json:{write:!0}})],vv.prototype,"expression",void 0),d([g({type:String,json:{write:!0}})],vv.prototype,"title",void 0),d([g({type:String,json:{write:!0}})],vv.prototype,"returnType",void 0),vv=d([G("esri.layers.support.ExpressionInfo")],vv);var JZ,IE;let Yo=(IE=class extends ve{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new JZ({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:le(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},JZ=IE,IE);d([g({type:Boolean,json:{write:!0}})],Yo.prototype,"isAutoGenerated",void 0),d([g({type:String,json:{write:!0}})],Yo.prototype,"name",void 0),d([g({type:String,json:{write:!0}})],Yo.prototype,"alias",void 0),d([g({type:String,json:{write:!0}})],Yo.prototype,"onStatisticField",void 0),d([g({type:vv,json:{write:!0}})],Yo.prototype,"onStatisticExpression",void 0),d([g({type:String,json:{write:!0}})],Yo.prototype,"statisticType",void 0),Yo=JZ=d([G("esri.layers.support.AggregateField")],Yo);let Hv=class extends ve{constructor(){super(...arguments),this.type=null}};d([g({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Hv.prototype,"type",void 0),Hv=d([G("esri.layers.support.FeatureReduction")],Hv);const lee="__begin__",cee="__end__",iht=new RegExp(lee,"ig"),rht=new RegExp(cee,"ig"),Wde=new RegExp("^"+lee,"i"),Zde=new RegExp(cee+"$","i"),eF='"',nht=eF+" + ",sht=" + "+eF;function oht(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function aht(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function uee(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=oht(t.labelExpression),e.type="conventional"),e}function lht(t){const e=uee(t);if(!e)return null;switch(e.type){case"conventional":return XZ(e.expression);case"arcade":return e.expression}return null}function cht(t){const e=uee(t);if(!e)return null;switch(e.type){case"conventional":return hht(e.expression);case"arcade":return _Ie(e.expression)}return null}function XZ(t){let e;return t?(e=v0(t,(i=>lee+'$feature["'+i+'"]'+cee)),e=Wde.test(e)?e.replace(Wde,""):eF+e,e=Zde.test(e)?e.replace(Zde,""):e+eF,e=e.replaceAll(iht,nht).replaceAll(rht,sht)):e='""',e}const uht=/^\s*\{([^}]+)\}\s*$/i;function hht(t){const e=t==null?void 0:t.match(uht);return(e==null?void 0:e[1].trim())||null}const dht=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,pht=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,fht=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function _Ie(t){if(!t)return null;let e=dht.exec(t)||pht.exec(t);return e?e[1]||e[3]:(e=fht.exec(t),e?e[2]:null)}var QZ,AE;let ym=(AE=class extends ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?XZ(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=XZ(this.value)),e!=null&&(i[r]=e)}clone(){return new QZ({expression:this.expression,title:this.title,value:this.value})}},QZ=AE,AE);d([g({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ym.prototype,"expression",void 0),d([je("expression",["expression","value"])],ym.prototype,"readExpression",null),d([Ge("expression")],ym.prototype,"writeExpression",null),d([g({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ym.prototype,"title",void 0),d([g({json:{read:!1,write:!1}})],ym.prototype,"value",void 0),ym=QZ=d([G("esri.layers.support.LabelExpressionInfo")],ym);var eY;const _R=new Bt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function xR(t,e,i){return{enabled:!Iq(i==null?void 0:i.layer)}}function xIe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function mht(t){return(t==null?void 0:t.type)==="map-image"}function SIe(t){var e,i;return!!mht(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function yht(t){return xIe(t)||SIe(t==null?void 0:t.layer)}var PE;let Ir=(PE=class extends ve{static evaluateWhere(e,i){const r=(n,s,o)=>{switch(s){case"=":return n==o;case"<>":return n!=o;case">":return n>o;case">=":return n>=o;case"<":return n<o;case"<=":return n<=o}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),o=n[3],a=r(i[n[4]],n[5],n[6]);switch(o){case"AND":return s&&a;case"OR":return s||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=jct,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=aht(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=_Ie(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&xIe(n))e=new ym({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return uee(this)}getLabelExpressionArcade(){return lht(this)}getLabelExpressionSingleField(){return cht(this)}hash(){return JSON.stringify(this)}clone(){return new eY({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:le(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:le(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},eY=PE,PE);d([g({type:String,json:{write:!0}})],Ir.prototype,"name",void 0),d([g({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:xR}}}}})],Ir.prototype,"allowOverrun",void 0),d([g({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:xR}}}}})],Ir.prototype,"deconflictionStrategy",void 0),d([g({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&SIe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ir.prototype,"labelExpression",void 0),d([je("labelExpression")],Ir.prototype,"readLabelExpression",null),d([Ge("labelExpression")],Ir.prototype,"writeLabelExpression",null),d([g({type:ym,json:{write:{overridePolicy:(t,e,i)=>yht(i)?{allowNull:!0}:{enabled:!1}}}})],Ir.prototype,"labelExpressionInfo",void 0),d([Ge("labelExpressionInfo")],Ir.prototype,"writeLabelExpressionInfo",null),d([g({type:_R.apiValues,json:{type:_R.jsonValues,read:_R.read,write:_R.write}})],Ir.prototype,"labelPlacement",void 0),d([g({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ir.prototype,"labelPosition",void 0),d([g({type:Number})],Ir.prototype,"maxScale",void 0),d([Ge("maxScale")],Ir.prototype,"writeMaxScale",null),d([g({type:Number})],Ir.prototype,"minScale",void 0),d([Ge("minScale")],Ir.prototype,"writeMinScale",null),d([g({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:xR}}}}})],Ir.prototype,"repeatLabel",void 0),d([g({type:Number,cast:Ti,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:xR}}}}})],Ir.prototype,"repeatLabelDistance",void 0),d([g({types:ZJe,json:{origins:{"web-scene":{types:YJe,write:Lde,default:null}},write:Lde,default:null}})],Ir.prototype,"symbol",void 0),d([g({type:Boolean,json:{write:!0}})],Ir.prototype,"useCodedValues",void 0),d([g({type:String,json:{write:!0}})],Ir.prototype,"where",void 0),Ir=eY=d([G("esri.layers.support.LabelClass")],Ir);var tY;let vh=tY=class extends ve{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new tY({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};d([g({type:String,json:{write:!0}})],vh.prototype,"description",void 0),d([g({type:String,json:{write:!0}})],vh.prototype,"label",void 0),d([g({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],vh.prototype,"minValue",void 0),d([g({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],vh.prototype,"maxValue",void 0),d([g(eee)],vh.prototype,"symbol",void 0),vh=tY=d([G("esri.renderers.support.ClassBreakInfo")],vh);var iY;const EIe="log",ZN="percent-of-total",YN="field",SR=new Bt({esriNormalizeByLog:EIe,esriNormalizeByPercentOfTotal:ZN,esriNormalizeByField:YN}),ght=Zr(vh);let Qn=iY=class extends XT(hc){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map((n=>{const s=new vh;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s}))}writeClassBreakInfos(t,e,i,r){const n=t.map((s=>s.write({},r)));this._areClassBreaksConsecutive()&&n.forEach((s=>delete s.classMinValue)),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):pk(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&YN||i&&ZN||null,e&&i&&Ce.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==YN&&t!==ZN||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new vh({minValue:t,maxValue:e,symbol:$Te(i)}):ght(le(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&Ce.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await oy()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ce.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await oy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach((e=>{e.symbol&&t.push(e.symbol)})),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce(((r,n)=>r+n.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new iY({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:le(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:le(this.visualVariables),legendOptions:le(this.legendOptions),authoringInfo:le(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map((r=>r.collectRequiredFields(t,e))),Mo(t,e,this.valueExpression)];La(t,e,this.field),La(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const p=c.createSyntaxTree(a);l=c.createFunction(p),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const u=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===EIe)n=Math.log(n)*Math.LOG10E;else if(r!==ZN||s==null||isNaN(s)){if(r===YN&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};d([g(tee)],Qn.prototype,"backgroundFillSymbol",void 0),d([g({type:[vh],json:{write:{isRequired:!0}}})],Qn.prototype,"classBreakInfos",void 0),d([je("classBreakInfos")],Qn.prototype,"readClassBreakInfos",null),d([Ge("classBreakInfos")],Qn.prototype,"writeClassBreakInfos",null),d([g({type:String,json:{write:!0}})],Qn.prototype,"defaultLabel",void 0),d([g(R4)],Qn.prototype,"defaultSymbol",void 0),d([g({type:String,json:{write:!0}})],Qn.prototype,"field",void 0),d([Ai("field")],Qn.prototype,"castField",null),d([g({type:Boolean})],Qn.prototype,"isMaxInclusive",void 0),d([g({type:iee,json:{write:!0}})],Qn.prototype,"legendOptions",void 0),d([g({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Qn.prototype,"minValue",null),d([g({type:String,json:{write:!0}})],Qn.prototype,"normalizationField",void 0),d([g({type:Number,json:{write:!0}})],Qn.prototype,"normalizationTotal",void 0),d([g({type:SR.apiValues,value:null,json:{type:SR.jsonValues,read:SR.read,write:SR.write}})],Qn.prototype,"normalizationType",null),d([dt({classBreaks:"class-breaks"})],Qn.prototype,"type",void 0),d([g({type:String,json:{write:!0}})],Qn.prototype,"valueExpression",void 0),d([g({type:String,json:{write:!0}})],Qn.prototype,"valueExpressionTitle",void 0),Qn=iY=d([G("esri.renderers.ClassBreaksRenderer")],Qn);const rY=-3,vht=rY-1;var gm;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(gm||(gm={}));let bht=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,gm.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,gm.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,gm.ALL);const a=1+Math.max(s,vht)-rY;this._db.set(i,new wht(r,n,a)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,n,gm.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach(((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach((c=>{const{id:u,name:p}=c;if(a.startsWith(u)){const m=i[p]||0;i[p]=m+o.size}}))}));const n={};this._users.forEach((o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"}));const s=Object.keys(i);s.sort(((o,a)=>i[a]-i[o])),s.forEach((o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]));for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+rY-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach((e=>e.resetHitRate()))}clear(e){const i=e.id;this._db.forEach(((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,gm.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,i)=>this._notifyRemove(i,e.entry,e.size,gm.ALL))),this._users.forEach((e=>e.size=0)),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){var a;const s=(a=this._users.get(e.split(xV)[0]))==null?void 0:a.removeFunc,o=s==null?void 0:s(i,n,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach(((e,i)=>this._checkSizeLimits(e,i))),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i==null?void 0:i.id;let s=!0;for(;s;){s=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!n||o.startsWith(n))){const l=i??this._users.get(o.split(xV)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;s||(s=this._db.has(o))}}for(const[o,a]of this._db)if(!n||o.startsWith(n)){const l=i??this._users.get(o.split(xV)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,gm.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},wht=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const xV=":";let TIe=class{constructor(e,i){this.removeFunc=i,this._storage=new bht,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},Yde=class $Ie{static parse(e,i,r){const n=[],s=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[u,p,m]=c,v=xht(u,p,m);v&&s.push(v)}}else if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){n.push(c);break}}else if(i.has(l))n.push(l);else if(a===0){n.length=0,n.push(Sht(r));break}}}return new $Ie(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function _ht(t,e){if(t==="DashTemplate")return e.split(" ").map((i=>Number(i)));if(t==="Color"){const i=new Ze(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function xht(t,e,i){return{primitiveName:t,propertyName:e,value:_ht(e,i),defaultValue:null}}function Sht(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var kE;let Zd=(kE=class{},kE.instance=new gl("Etc/UTC"),kE);function Eht(t){return t instanceof o1?t===Zd.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function vqt(t){return Eht(t)?Zd.instance:t}function Tht(t){return"timeZone"in t}function $ht(t){return"timeZone"in t}function Mht(t){return"dateFieldsTimeZone"in t}const Cht=new Map;let uP=class KN{static fromJSON(e){return new KN(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new KN(e.fields??[],Jde(e))}static fromLayerJSON(e){return new KN(e.fields??[],Jde(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=Kde(o);if(o&&a){const l=Cw(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),hQ(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):ZEe(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),mce(s)||yce(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)mce(e)||yce(e)||e.nullable||_Ke(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Cw(e))??this._normalizedFieldsMap.get(Kde(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(Ce.getLogger("esri.layers.support.FieldsIndex").errorOnce(new ae("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Wp):MIe.has(i.type)?o0:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===o0?Zd.instance:i===Wp?fs.utcInstance:r1(Cht,i,(()=>gl.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return KEe(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map((e=>UA(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Cw(t){return t.trim().toLowerCase()}function Kde(t){var e;return((e=aKe(t))==null?void 0:e.toLowerCase())??""}const MIe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function Jde(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=Mht(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?Y3(t.dateFieldsTimeReference):null,l=n?Tht(n)?n.timeZone??a:n.dateFieldsTimeReference?Y3(n.dateFieldsTimeReference):a??Wp:null,c=r?$ht(r)?r.timeZone??a:r.timeReference?Y3(r.timeReference):a:null,u=new Map([[Cw((n==null?void 0:n.creationDateField)??""),l],[Cw((n==null?void 0:n.editDateField)??""),l],[Cw(s),c],[Cw(o),c]]);for(const{name:p,type:m}of t.fields)if(MIe.has(m))e.set(p,o0);else if(m!=="date"&&m!=="esriFieldTypeDate")e.set(p,null);else if(i)e.set(p,o0);else{const v=u.get(Cw(p??""))??a;e.set(p,v)}return e}var Qt;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.CannotCompareDateAndTime="CannotCompareDateAndTime",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",t.UnexpectedToken="UnexpectedToken",t.Unrecognized="Unrecognized",t.UnrecognizedType="UnrecognizedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference",t.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",t.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(Qt||(Qt={}));const CIe={[Qt.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[Qt.LogicError]:"Logic error - {reason}",[Qt.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[Qt.NeverReach]:"Encountered unreachable logic",[Qt.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[Qt.ModuleAccessorMustBeString]:"Module accessor must be a string",[Qt.ModuleExportNotFound]:"Module has no export with provided identifier",[Qt.ModulesNotSupported]:"Current profile does not support modules",[Qt.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[Qt.FunctionNotFound]:"Function not found",[Qt.FieldNotFound]:"Key not found - {key}",[Qt.CircularModules]:"Circular module dependencies are not allowed",[Qt.Cancelled]:"Execution cancelled",[Qt.UnsupportedHashType]:"Type not supported in hash function",[Qt.IllegalResult]:"Value is not a supported return type",[Qt.PortalRequired]:"Portal is required",[Qt.InvalidParameter]:"Invalid parameter",[Qt.WrongNumberOfParameters]:"Call with wrong number of parameters",[Qt.Unrecognized]:"Unrecognized code structure",[Qt.UnrecognizedType]:"Unrecognized type",[Qt.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[Qt.BooleanConditionRequired]:"Conditions must use booleans",[Qt.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[Qt.NoFunctionInArray]:"Arrays cannot contain functions.",[Qt.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[Qt.KeyAccessorMustBeString]:"Accessor must be a string",[Qt.KeyMustBeString]:"Object keys must be a string",[Qt.Immutable]:"Object is immutable",[Qt.UnexpectedToken]:"Unexpected token",[Qt.MemberOfNull]:"Cannot access property of null object",[Qt.MaximumCallDepth]:"Exceeded maximum function depth",[Qt.OutOfBounds]:"Out of bounds",[Qt.InvalidIdentifier]:"Identifier not recognized",[Qt.CallNonFunction]:"Expression is not a function",[Qt.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[Qt.AssignModuleFunction]:"Cannot assign function to module variable",[Qt.UnsupportedUnaryOperator]:"Unsupported unary operator",[Qt.UnsupportedOperator]:"Unsupported operator",[Qt.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[Qt.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[Qt.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[Qt.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[Qt.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let Iht=class extends Error{constructor(...e){super(...e)}},Xde=class IIe extends Iht{constructor(e,i){super(hee(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,IIe),i!=null&&i.loc&&(this.loc=i.loc)}},Aht=class AIe extends Error{constructor(e,i,r,n){super("Execution error - "+hee(r)+v0(CIe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,AIe),r!=null&&r.loc&&(this.loc=r.loc)}};function hee(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let wqt=class PIe extends Error{constructor(e,i,r,n){super("Compilation error - "+hee(r)+v0(CIe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,PIe),r!=null&&r.loc&&(this.loc=r.loc)}},_qt=class kIe extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,kIe)}};function xqt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new Xde(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new Xde(i,{cause:i}):i)}var tF;(function(t){t.UnrecognizedUri="UnrecognizedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(tF||(tF={}));const Pht={[tF.UnrecognizedUri]:"Unrecognized uri - {uri}",[tF.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let Sqt=class OIe extends Error{constructor(e,i){super(v0(Pht[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,OIe)}};function JN(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let Eqt=class{constructor(e,i){const r=new Map;for(const n of e){const s=JN(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const o=JN(n);if(r.has(o))throw new Error(`${n} already associated with ${r.get(o)}`);r.set(o,s)}this._enumMap=r}lookup(e){return this._enumMap.get(JN(e))}get(e){const i=this.lookup(e);if(i==null)throw new Aht(null,Qt.InvalidParameter,null);return i}};var iF;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(iF||(iF={}));const kht={[iF.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let Oht=class LIe extends Error{constructor(e,i){super(v0(kht[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,LIe)}};function Mx(t,e,i){return t<e?t-e:t>i?t-i:0}function Cx(t,e,i){return t<e?e:t>i?i:t}let Fm=class Yn{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const c=ht.local(e,i).daysInMonth;let u=ht.fromObject({day:Cx(r,1,c),year:e,month:Cx(i,1,12),hour:Cx(n,0,23),minute:Cx(s,0,59),second:Cx(o,0,59),millisecond:Cx(a,0,999)},{zone:Fd(l)});return u=u.plus({months:Mx(i,1,12),days:Mx(r,1,c),hours:Mx(n,0,23),minutes:Mx(s,0,59),seconds:Mx(o,0,59),milliseconds:Mx(a,0,999)}),new Yn(u)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Fd(i);return e.isUnknownTimeZone||r===Zd.instance?Yn.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Yn(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Yn(ht.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Fd(i);return new Yn(ht.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Yn(ht.fromMillis(e,{zone:Zd.instance}))}static unknownDateJSToArcadeDate(e){return new Yn(ht.fromMillis(e.getTime(),{zone:Zd.instance}))}static epochToArcadeDate(e,i="system"){const r=Fd(i);return new Yn(ht.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Yn(e)}clone(){return new Yn(this._date)}changeTimeZone(e){const i=Fd(e);return Yn.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Fd(i);return e.zone===Zd.instance||r===Zd.instance?Yn.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Yn(e.setZone(r))}static nowToArcadeDate(e){const i=Fd(e);return new Yn(ht.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Yn(ht.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Yn.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Zd.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Yn(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Yn(this._date.toUTC())}toLocal(){return new Yn(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=ht.fromISO(e,{setZone:!0});return new Yn(i)}};function Fd(t,e=!0){if(t instanceof o1)return t;switch(JN(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Zd.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=fs.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=gl.create(t);if(!i.isValid){if(e)throw new Oht(iF.TimeZoneNotRecognized);return null}return i}function Qde(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const epe="esri.core.sql.dateonly";let Lht=class Zl{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=epe}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===epe}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return Zl.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new Zl(this._year,this._month,this._day)}toDateTime(e){return ht.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fd(e)})}toDateTimeLuxon(e){return ht.fromObject({day:this.day,month:this.month,year:this.year},{zone:Fd(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=Qde(e)),!e)return"";const r=this.toDateTime("unknown");return Fm.dateTimeToArcadeDate(r).toFormat(e,{locale:fl(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Fm.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return Zl.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return ht.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=ht.fromMillis(e,{zone:fs.utcInstance});return i.isValid?Zl.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=ht.fromSeconds(e,{zone:fs.utcInstance});return i.isValid?Zl.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new Zl(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new Zl(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return Zl.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return Zl.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=Qde(i))&&r.push(i);else if(i===null||i===""){const n=ht.fromISO(e,{setZone:!0});return n.isValid?Zl.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=ht.fromFormat(e,i??n);if(s.isValid)return new Zl(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=ht.fromJSDate(new Date).setZone(Fd(e));return new Zl(i.year,i.month,i.day)}};function $qt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Ut({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function Mqt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function ER(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function tpe(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const ipe="esri.core.sql.timeonly";let Rht=class $d{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=ipe}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===ipe}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return $d.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new $d(this.hour,this.minute,this.second,this.millisecond)}isValid(){return ER(this.hour)&&ER(this.minute)&&ER(this.second)&&ER(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=tpe(e))?ht.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:fl(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new $d(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new $d(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new $d(n,r,i,s)}static fromDateJS(e){return new $d(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new $d(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=tpe(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=ht.fromFormat(e,n);if(s.isValid)return new $d(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return $d.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return ht.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const Nht=["geometry","scale","timeProperties"];function Cqt(t,e){if(e!=null)for(const i of Nht)e.hasArcadeDependency(i)&&t.add(i);return t}function Dht(t,e){return RIe.create(t,e,null,["$feature","$view"])}function Fht(t,e,i){return RIe.create(t,e,i,["$feature","$view","$config"])}let RIe=class NIe{static async create(e,i,r,n){const{arcade:s,Dictionary:o}=await oy();let a;try{a=s.parseScript(e)}catch(v){throw new ae("arcade-bad-expression","Failed to parse arcade script",{script:e,error:v})}const l=s.scriptUsesGeometryEngine(a);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,a,null,!1,l);const c={vars:n.reduce(((v,w)=>({...v,[w]:null})),{}),spatialReference:i,useAsync:!1},u=s.compileScript(a,c);let p=null;r!=null&&(p=new o(r),p.immutable=!0);const m=new o;return m.immutable=!1,m.setField("scale",0),new NIe(e,s,a,u,i,m,p,o)}constructor(e,i,r,n,s,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new DIe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var n;const r=(n=i.$view)==null?void 0:n.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:o,currentEnd:a}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:o!=null?r!=null?Fm.epochToArcadeDate(o,r):Fm.unknownEpochToArcadeDate(o):void 0,currentEnd:a!=null?r!=null?Fm.epochToArcadeDate(a,r):Fm.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},DIe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new uP(FIe(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Hp(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===o0}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return Lht.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return Rht.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Fm.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Fm.unknownEpochToArcadeDate(n):Fm.epochToArcadeDate(n,this.contextTimeZone??xu);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((e=>e.name))}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function FIe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let zht=class zIe{static async from(e,i,r){const n=e.dictionary_version?rCe.parse(e.dictionary_version):null,s=new Set(e.itemsNames),o={};if(i)for(const p in i)o[p]=i[p];if(e.authoringInfo.configuration)for(const p of e.authoringInfo.configuration)o.hasOwnProperty(p.name)||(o[p.name]=p.value);const a=new Set(e.authoringInfo.symbol);for(const p of Object.keys(r))a.delete(p);a.size&&Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await Fht(e.expression,null,o);if(!l)throw new ae("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!n||!n.greaterEqual(4,0);c&&Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const u=new jht(r,c);return new zIe(c,s,l,u)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new uP(e);const i=e.map((r=>({...r,type:"esriFieldTypeString"})));return new uP(i)}},jht=class extends DIe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};var rpe,npe,spe,ope,Ip,ape,nY,sY,oY,lpe,aY,lY,cpe,upe,hpe,dpe,cY,uY,ppe,fpe,L2,Wt,Iw,rF,mpe,zm,ype,gpe,u2,hY,vpe,bpe,wpe,_pe,xpe,Spe,Epe,ul,_o,Tpe,$pe,vu,Mpe,Cpe,Ipe,Ape,uh,pA,Aw,h2,Ppe,kpe,Ope,dY,Lpe,nF,Rpe,sF,d2,Npe,pY,Dpe,Fpe;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(rpe||(rpe={})),(function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"})(npe||(npe={})),(function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"})(spe||(spe={})),(function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"})(ope||(ope={})),(function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"})(Ip||(Ip={})),(function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"})(ape||(ape={})),(function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"})(nY||(nY={})),(function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"})(sY||(sY={})),(function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"})(oY||(oY={})),(function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"})(lpe||(lpe={})),(function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"})(aY||(aY={})),(function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"})(lY||(lY={})),(function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"})(cpe||(cpe={})),(function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"})(upe||(upe={})),(function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"})(hpe||(hpe={})),(function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"})(dpe||(dpe={})),(function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"})(cY||(cY={})),(function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"})(uY||(uY={})),(function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"})(ppe||(ppe={})),(function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"})(fpe||(fpe={})),(function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"})(L2||(L2={})),(function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(Wt||(Wt={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"})(Iw||(Iw={})),(function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"})(rF||(rF={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(mpe||(mpe={})),(function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"})(zm||(zm={})),(function(t){t.Fast="Fast",t.Accurate="Accurate"})(ype||(ype={})),(function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"})(gpe||(gpe={})),(function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"})(u2||(u2={})),(function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"})(hY||(hY={})),(function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"})(vpe||(vpe={})),(function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"})(bpe||(bpe={})),(function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"})(wpe||(wpe={})),(function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"})(_pe||(_pe={})),(function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"})(xpe||(xpe={})),(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"})(Spe||(Spe={})),(function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"})(Epe||(Epe={})),(function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"})(ul||(ul={})),(function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"})(_o||(_o={})),(function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"})(Tpe||(Tpe={})),(function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"})($pe||($pe={})),(function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"})(vu||(vu={})),(function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"})(Mpe||(Mpe={})),(function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(Cpe||(Cpe={})),(function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"})(Ipe||(Ipe={})),(function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"})(Ape||(Ape={})),(function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"})(uh||(uh={})),(function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"})(pA||(pA={})),(function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"})(Aw||(Aw={})),(function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"})(h2||(h2={})),(function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"})(Ppe||(Ppe={})),(function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"})(kpe||(kpe={})),(function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"})(Ope||(Ope={})),(function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"})(dY||(dY={})),(function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(Lpe||(Lpe={})),(function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"})(nF||(nF={})),(function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"})(Rpe||(Rpe={})),(function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"})(sF||(sF={})),(function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"})(d2||(d2={})),(function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"})(Npe||(Npe={})),(function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"})(pY||(pY={})),(function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"})(Dpe||(Dpe={})),(function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"})(Fpe||(Fpe={}));const Uht={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Gn={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:nF.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:nF.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:aY.Loop,repeatdelay:0,easing:lY.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function Bht(t){return typeof t=="function"}function Pqt(t,e,i,r){return Bht(t)?t(e,i,r):t}function kqt(t){return[t.r,t.g,t.b,t.a]}const Vht=` /-,
`;function zpe(t){let e=t.length;for(;e--;)if(!Vht.includes(t.charAt(e)))return!1;return!0}function Ght(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,zpe(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,zpe(s)])}return i}function Oqt(t,e,i){let r="",n=null;for(const s of e){const[o,a,l]=s;if(o!=null&&o!=="")l?n=o:(n!=null&&(r+=n,n=null),r+=o);else{const c=t.readAttribute(a);c!=null&&c!==""&&(n!==null&&(r+=n,n=null),r+=c)}}return jIe(r,i)}function qht(t,e,i,r){let n="",s=null;for(const o of e){const[a,l,c]=o;if(a!=null&&a!=="")c?s=a:(s!=null&&(n+=s,s=null),n+=a);else{let u=l;i!=null&&(u=sdt(l,i));const p=t.attributes[u];p!=null&&p!==""&&(s!=null&&(n+=s,s=null),n+=p)}}return jIe(n,r)}function jIe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function Lqt(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let p=0;p<s;p++)for(let m=0;m<n;m++){const v=4*(m+(o?s-p-1:p)*n);let w=0,_=0,T=0,$=0,I=0,A=0,k=0;const R=(p+.5)*l;for(let F=Math.floor(p*l);F<(p+1)*l;F++){const B=Math.abs(R-(F+.5))/u,q=(m+.5)*a,Y=B*B;for(let J=Math.floor(m*a);J<(m+1)*a;J++){let Q=Math.abs(q-(J+.5))/c;const te=Math.sqrt(Y+Q*Q);te>=-1&&te<=1&&(w=2*te*te*te-3*te*te+1,w>0&&(Q=4*(J+F*e),k+=w*t[Q+3],T+=w,t[Q+3]<255&&(w=w*t[Q+3]/250),$+=w*t[Q],I+=w*t[Q+1],A+=w*t[Q+2],_+=w))}}r[v]=$/_,r[v+1]=I/_,r[v+2]=A/_,r[v+3]=k/T}}function UIe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function dee(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function pee(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function BIe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function Hht(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function D4(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const zt=(t,e=0)=>t==null||isNaN(t)?e:t,Rqt=(t,e)=>t??e,Nqt=(t,e)=>t??e,Dqt=t=>t.tintColor?UIe(t.tintColor):[255,255,255,1],Wht=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function Zht(){return Re(()=>import("./geometryEngineJSON-Dr6Udo8L.js").then(t=>t.g),__vite__mapDeps([5,6,7,8]))}function Yht(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Kht(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function VIe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function GIe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function fA(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=fA(e);if(i!=null)return i}break;case"CIMTextSymbol":return fA(t.symbol);case"CIMSolidFill":return t.color}return null}function oF(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=oF(i);if(r!=null)return r}break}case"CIMTextSymbol":return oF(t.symbol);case"CIMSolidStroke":return t.color}}function Fqt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function aF(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=aF(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return aF(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Jht(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Xht(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Qht(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}const Ix=t=>t.includes("data:image/svg+xml");function lF(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Nk(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function zqt(t,e,i,r,n,s,o=!0){const{infos:a}=s;let l=1,c=0,u=0,p=0,m=1;for(const{absoluteAnchorPoint:_,offsetX:T,offsetY:$,rotation:I,size:A,frameHeight:k,rotateClockWise:R,scaleSymbolsProportionally:F}of a)m=_?1:l,u=Bpe(T,$,c,m,u),p=Upe(T,$,c,m,p),k&&(F||o)&&(l*=A/k),c=Vpe(I,R,c);const v=Bpe(r,n,c,m,u),w=Upe(r,n,c,m,p);return{size:t*l,rotation:Vpe(e,i,c),offsetX:v,offsetY:w}}function edt(t){if(t==null)return!1;if(Array.isArray(t))return t.every((e=>edt(e)));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function tdt(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...Uht[e]];const i=Gn[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function idt(t){return t.split(" ").map((e=>Number(e)))}function rdt(t){return typeof t=="string"?idt(t):t}function qIe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=rdt(t.dashTemplate)),t}function fY(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return fY(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return fY(i.symbol)}}return"Normal"}function ndt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Gn.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&D4(i.markerPlacement)){const r=i.size??Gn.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function sdt(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function odt(t){return t.map((e=>({...e,propertyName:Nk(e.propertyName)})))}function jpe(t){const e={};for(const i in t){const r=t[i];e[Nk(i)]=r}return e}function Upe(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function Bpe(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function Vpe(t,e,i){return e?i-t:i+t}function jqt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[Nk(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=tdt(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function Uqt(t,e,i){if(e[Nk(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function qM(t,e){return Math.max(Math.min((t??e)/100,1),0)}const adt={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let HIe=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new TIe(100);const s=async()=>zht.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){var p;const n=await this._evaluator,s=(i==null?void 0:i.fields)??FIe(e.attributes),o=n.createDictionaryFieldsIndex(s),a=n.evaluate(e,(i==null?void 0:i.scale)??0,o,i==null?void 0:i.spatialReference);if(a==null)return null;const l=jT(e.geometry),c=Yde.parse(a,n.itemNames,l),u=l==="esriGeometryPoint"&&!((p=e.geometry)!=null&&p.hasZ);return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,u,i,r,o)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=Yde.parse(e,n.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=Gpe(await Promise.all(s.partNames.map((l=>this._getSymbolPart(l)))),s.overrides,o);return new Ko({data:a})}async _cimPartsToCIMSymbol(e,i,r,n,s,o,a){const l=i.map((p=>this._getSymbolPart(p,s)));let c=await Promise.all(l);if(o&&this.fieldMap&&c.length>0){const{OverrideHelper:p}=await Re(()=>Promise.resolve().then(()=>J_t),void 0);c=le(c);for(const m of c)p.applyDictionaryTextOverrides(m,e,this.fieldMap,a,fY(m))}const u=Gpe(c,r,n);return new Ko({data:u})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await ni(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function Gpe(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=adt),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var mY;let sh=mY=class extends XT(hc){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new HIe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new mY({config:le(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:le(this.fieldMap),url:le(this.url),visualVariables:le(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Mo(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await ni(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};d([g({type:HIe})],sh.prototype,"_loader",null),d([g({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],sh.prototype,"config",void 0),d([g({type:Object,json:{write:!0}})],sh.prototype,"fieldMap",void 0),d([g({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],sh.prototype,"scaleExpression",void 0),d([Ge("scaleExpression")],sh.prototype,"writeData",null),d([g({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],sh.prototype,"scaleExpressionTitle",void 0),d([g({type:String,json:{write:!0}})],sh.prototype,"url",void 0),d([Ge("visualVariables")],sh.prototype,"writeVisualVariables",null),sh=mY=d([G("esri.renderers.DictionaryRenderer")],sh);var yY;let nm=yY=class extends ve{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):pk(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new yY({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([g({type:Ze,json:{type:[Number],write:!0}})],nm.prototype,"color",void 0),d([g({type:String,json:{write:!0}})],nm.prototype,"field",void 0),d([Ai("field")],nm.prototype,"castField",null),d([g({type:String,json:{write:!0}})],nm.prototype,"label",void 0),d([g({type:String,json:{write:!0}})],nm.prototype,"valueExpression",void 0),d([g({type:String,json:{write:!0}})],nm.prototype,"valueExpressionTitle",void 0),nm=yY=d([G("esri.renderers.support.AttributeColorInfo")],nm);const WIe=nm;var gY;let XN=gY=class extends ve{constructor(){super(...arguments),this.unit=null}clone(){return new gY({unit:this.unit})}};d([g({type:String,json:{write:!0}})],XN.prototype,"unit",void 0),XN=gY=d([G("esri.renderers.support.DotDensityLegendOptions")],XN);const ldt=XN;var vY;let Wa=vY=class extends XT(hc){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ze([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Hr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Jo({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce(((e,i)=>e+i.getAttributeHash()),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new vY({attributes:le(this.attributes),backgroundColor:le(this.backgroundColor),dotBlendingEnabled:le(this.dotBlendingEnabled),dotShape:le(this.dotShape),dotSize:le(this.dotSize),dotValue:le(this.dotValue),legendOptions:le(this.legendOptions),outline:le(this.outline),referenceScale:le(this.referenceScale),seed:le(this.seed),visualVariables:le(this.visualVariables),authoringInfo:le(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map((i=>i.field||i.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Mo(t,e,i.valueExpression),i.field&&t.add(i.field)}};d([g({type:[WIe],json:{write:!0}})],Wa.prototype,"attributes",void 0),d([g({type:Ze,json:{write:!0}})],Wa.prototype,"backgroundColor",void 0),d([g({type:Boolean,json:{write:!0}})],Wa.prototype,"dotBlendingEnabled",void 0),d([g({type:String,json:{write:!1}})],Wa.prototype,"dotShape",void 0),d([g({type:Number,json:{write:!0}})],Wa.prototype,"dotSize",void 0),d([g({type:ldt,json:{write:!0}})],Wa.prototype,"legendOptions",void 0),d([g({type:Hr,json:{default:null,write:!0}})],Wa.prototype,"outline",void 0),d([g({type:Number,json:{write:!0}})],Wa.prototype,"dotValue",void 0),d([g({type:Number,json:{write:!0}})],Wa.prototype,"referenceScale",void 0),d([g({type:Number,json:{write:!0}})],Wa.prototype,"seed",void 0),d([dt({dotDensity:"dot-density"})],Wa.prototype,"type",void 0),Wa=vY=d([G("esri.renderers.DotDensityRenderer")],Wa);var bY;let jm=bY=class extends ve{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new bY({color:this.color&&this.color.clone(),ratio:this.ratio})}};d([g({type:Ze,json:{type:[ri],default:null,write:{isRequired:!0}}})],jm.prototype,"color",void 0),d([g({type:Number,json:{write:{isRequired:!0}}})],jm.prototype,"ratio",void 0),jm=bY=d([G("esri.renderers.support.HeatmapColorStop")],jm);let AS=class extends Et.ClonableMixin(ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};d([g({type:String,json:{write:!0}})],AS.prototype,"minLabel",void 0),d([g({type:String,json:{write:!0}})],AS.prototype,"maxLabel",void 0),d([g({type:String,json:{write:!0}})],AS.prototype,"title",void 0),AS=d([G("esri.renderers.support.HeatmapLegendOptions")],AS);function cdt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function udt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function hdt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function ddt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function ZIe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function YIe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function KIe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function pdt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function fdt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function mdt(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function ydt(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function gdt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function vdt(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function bdt(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function JIe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function XIe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function QIe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function eAe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function wdt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function _dt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function xdt(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function Sdt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function tAe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function Edt(t,e=1){const i=i4;let r,n,s,o,a,l;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*o*c,t}function Tdt(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function $dt(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=i[3],u=c*r+a*s-l*n,p=c*n+l*r-o*s,m=c*s+o*n-a*r,v=-o*r-a*n-l*s;return t[0]=u*c+v*-o+p*-l-m*-a,t[1]=p*c+v*-a+m*-o-u*-l,t[2]=m*c+v*-l+u*-a-p*-o,t[3]=e[3],t}function Mdt(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Cdt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Idt(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3],u=Oa();return Math.abs(i-o)<=u*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=u*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=u*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=u*Math.max(1,Math.abs(s),Math.abs(c))}const Adt=ZIe,Pdt=YIe,kdt=KIe,Odt=JIe,Ldt=XIe,Rdt=QIe,Ndt=eAe;Object.freeze(Object.defineProperty({__proto__:null,add:ddt,ceil:pdt,copy:cdt,copyVec3:udt,dist:Odt,distance:JIe,div:kdt,divide:KIe,dot:Sdt,equals:Idt,exactEquals:Cdt,floor:fdt,inverse:_dt,len:Rdt,length:QIe,lerp:tAe,max:ydt,min:mdt,mul:Pdt,multiply:YIe,negate:wdt,normalize:xdt,random:Edt,round:gdt,scale:vdt,scaleAndAdd:bdt,set:hdt,sqrDist:Ldt,sqrLen:Ndt,squaredDistance:XIe,squaredLength:eAe,str:Mdt,sub:Adt,subtract:ZIe,transformMat4:Tdt,transformQuat:$dt},Symbol.toStringTag,{value:"Module"}));function F4(){return[0,0,0,0]}function Ddt(t){return[t[0],t[1],t[2],t[3]]}function u1(t,e,i,r){return[t,e,i,r]}function Fdt(t,e,i,r){return[t,e,i,r]}function zdt(t,e=F4()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function iAe(){return F4()}function rAe(){return u1(1,1,1,1)}function nAe(){return u1(1,0,0,0)}function sAe(){return u1(0,1,0,0)}function oAe(){return u1(0,0,1,0)}function aAe(){return u1(0,0,0,1)}const jdt=iAe(),Udt=rAe(),Bdt=nAe(),Vdt=sAe(),Gdt=oAe(),qdt=aAe();Object.freeze(Object.defineProperty({__proto__:null,ONES:Udt,UNIT_W:qdt,UNIT_X:Bdt,UNIT_Y:Vdt,UNIT_Z:Gdt,ZEROS:jdt,clone:Ddt,create:F4,freeze:Fdt,fromArray:zdt,fromValues:u1,ones:rAe,unitW:aAe,unitX:nAe,unitY:sAe,unitZ:oAe,zeros:iAe},Symbol.toStringTag,{value:"Module"}));const fee=2.4;function Hdt(t){return Bi(t*fee)}function Wdt(t){return li(t)/fee}function Zdt(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=sa((r-s)/(a-s),0,1);tAe(t,n.toArray(),o.toArray(),l)}function Gqt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter((({ratio:a})=>a>=0&&a<=1)).sort(((a,l)=>a.ratio-l.ratio)).map((({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)}))),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=F4();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];Zdt(o,r,n,l),i.set(o,4*a)}return i}function qqt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Hqt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var wY;function qpe(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let Cs=wY=class extends hc{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new jm({ratio:0,color:new Ze("rgba(255, 140, 0, 0)")}),new jm({ratio:.75,color:new Ze("rgba(255, 140, 0, 1)")}),new jm({ratio:.9,color:new Ze("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return qpe(t)}get blurRadius(){return Wdt(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Hdt(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(fee**2*this.blurRadius**4)}read(t,e){t=qpe(t),super.read(t,e)}getSymbol(){return new Or}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&La(t,e,i),r&&typeof r=="string"&&await Mo(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new wY({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:le(this.colorStops),field:this.field,legendOptions:le(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};d([g({type:Ur,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Cs.prototype,"authoringInfo",void 0),d([g({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Cs.prototype,"blurRadius",null),d([g({type:[jm],json:{write:{isRequired:!0}}})],Cs.prototype,"colorStops",void 0),d([g({type:String,json:{write:!0}})],Cs.prototype,"field",void 0),d([g({type:AS,json:{write:!0}})],Cs.prototype,"legendOptions",void 0),d([g({type:Number,json:{write:!0}})],Cs.prototype,"maxDensity",void 0),d([g({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Cs.prototype,"maxPixelIntensity",null),d([g({type:Number,json:{write:!0}})],Cs.prototype,"minDensity",void 0),d([g({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Cs.prototype,"minPixelIntensity",null),d([g({type:Number,cast:Ti,json:{write:!0}})],Cs.prototype,"radius",void 0),d([g({type:Number,range:{min:0},json:{default:0,write:!0}})],Cs.prototype,"referenceScale",void 0),d([dt({heatmap:"heatmap"})],Cs.prototype,"type",void 0),d([g({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Cs.prototype,"valueExpression",void 0),d([g({type:String})],Cs.prototype,"valueExpressionTitle",void 0),d([g({readOnly:!0})],Cs.prototype,"_pixelIntensityToDensity",null),Cs=wY=d([G("esri.renderers.HeatmapRenderer")],Cs);let Pw=class extends Et.ClonableMixin(ve){constructor(){super(...arguments),this.color=new Ze([0,0,0,0]),this.label=null,this.threshold=0}};d([g({type:Ze,json:{write:!0}})],Pw.prototype,"color",void 0),d([g({type:String,json:{write:!0}})],Pw.prototype,"label",void 0),d([g({type:Number,range:{min:0,max:1},json:{write:!0}})],Pw.prototype,"threshold",void 0),Pw=d([G("esri.renderers.support.OthersCategory")],Pw);const Ydt={base:Ho,key:"type",typeMap:{size:Si,opacity:Tm}};let Za=class extends XT(Et.ClonableMixin(hc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ze([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Pw,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new Or({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(rs)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce(((i,r)=>i+r.getAttributeHash()),""))??""}getMeshHash(){return this.symbols.reduce(((e,i)=>e+JSON.stringify(i)),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Mo(e,i,r.valueExpression),r.field&&e.add(r.field)}};d([g({type:[WIe],json:{write:!0}})],Za.prototype,"attributes",void 0),d([g(tee)],Za.prototype,"backgroundFillSymbol",void 0),d([g({type:Ze,json:{write:!0}})],Za.prototype,"defaultColor",void 0),d([g({type:String,json:{write:!0}})],Za.prototype,"defaultLabel",void 0),d([g({type:Number,range:{min:0,max:1},json:{write:!0}})],Za.prototype,"holePercentage",void 0),d([g({type:Pw,json:{write:!0}})],Za.prototype,"othersCategory",void 0),d([g({type:iee,json:{write:!0}})],Za.prototype,"legendOptions",void 0),d([g({type:Hr,json:{default:null,write:!0}})],Za.prototype,"outline",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],Za.prototype,"size",void 0),d([dt({pieChart:"pie-chart"})],Za.prototype,"type",void 0),d([g({types:[Ydt]})],Za.prototype,"visualVariables",void 0),Za=d([G("esri.renderers.PieChartRenderer")],Za);const Dk={key:"type",base:hc,typeMap:{heatmap:Cs,simple:Ca,"unique-value":br,"class-breaks":Qn,"dot-density":Wa,dictionary:sh,"pie-chart":Za},errorContext:"renderer"},Kdt={key:"type",base:hc,typeMap:{simple:Ca,"unique-value":br,"class-breaks":Qn,heatmap:Cs},errorContext:"renderer",validate:Jdt};function Jdt(t){switch(t.type){case"simple":return Xdt(t);case"unique-value":return Qdt(t);case"class-breaks":return ept(t);case"heatmap":return t}}function Xdt(t){if(t.symbol)return t;Ce.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Qdt(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter((({symbol:r,label:n},s)=>(r||Ce.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function ept(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter((({symbol:r,label:n},s)=>(r||Ce.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r)));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function tpt(t,e){return hP(t,null,e)}const ipt=LT({types:Dk});function hP(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new vc("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):ipt(t,e,i):null}var _Y;let go=_Y=class extends Hv{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Ti("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));Vn(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?hP(r,e,i)??void 0:see(e,i)}clone(){return new _Y({fields:le(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:le(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:le(this.popupTemplate),renderer:le(this.renderer),binType:le(this.binType),size:this.size})}};d([dt({binning:"binning"})],go.prototype,"type",void 0),d([dt({geohash:"geohash",square:"square"}),g({type:["geohash","square"]})],go.prototype,"binType",void 0),d([g({type:Number,json:{write:!0}})],go.prototype,"fixedBinLevel",void 0),d([g({type:[Ir],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],go.prototype,"labelingInfo",void 0),d([g(A4)],go.prototype,"labelsVisible",void 0),d([g({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],go.prototype,"maxScale",void 0),d([g(I4)],go.prototype,"popupEnabled",void 0),d([g({type:Zp,json:{name:"popupInfo",write:!0}})],go.prototype,"popupTemplate",void 0),d([g({cast:t=>t==="auto"?t:$a(Ti(t))})],go.prototype,"size",void 0),d([g({type:[Yo],json:{write:!0}})],go.prototype,"fields",void 0),d([Ge("fields")],go.prototype,"writeFields",null),d([g({types:Dk,json:{write:{target:"drawingInfo.renderer"}}})],go.prototype,"renderer",void 0),d([je("renderer",["drawingInfo.renderer"])],go.prototype,"readRenderer",null),go=_Y=d([G("esri.layers.support.FeatureReductionBinning")],go);var xY;function Hpe(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let es=xY=class extends ve{constructor(t){super(t),this.type="cluster",this.clusterRadius=Ti("80px"),this.clusterMinSize=Ti("12px"),this.clusterMaxSize=Ti("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?Hpe(r)?null:hP(r,e,i)??void 0:see(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&Hpe(r)){const o=hP(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new Ca({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));Vn(i,r,e)}readFields(t,e,i){return t.filter((r=>!r.isAutoGenerated)).map((r=>Yo.fromJSON(r)))}clone(){return new xY({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:le(this.labelingInfo),labelsVisible:this.labelsVisible,fields:le(this.fields),maxScale:this.maxScale,renderer:le(this.renderer),symbol:le(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:le(this.popupTemplate)})}};d([g({type:["cluster"],readOnly:!0,json:{write:!0}})],es.prototype,"type",void 0),d([g({cast:t=>t==="auto"?t:$a(Ti(t)),json:{write:!0}})],es.prototype,"clusterRadius",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],es.prototype,"clusterMinSize",void 0),d([g({type:Number,cast:Ti,json:{write:!0}})],es.prototype,"clusterMaxSize",void 0),d([g({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],es.prototype,"maxScale",void 0),d([g(I4)],es.prototype,"popupEnabled",void 0),d([g({type:Zp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],es.prototype,"popupTemplate",void 0),d([g({types:Dk,json:{write:{target:"drawingInfo.renderer"}}})],es.prototype,"renderer",void 0),d([je("renderer",["drawingInfo.renderer"])],es.prototype,"readRenderer",null),d([g({types:HJe})],es.prototype,"symbol",void 0),d([je("symbol",["drawingInfo.renderer"])],es.prototype,"readSymbol",null),d([Ge("symbol")],es.prototype,"writeSymbol",null),d([g({type:[Ir],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],es.prototype,"labelingInfo",void 0),d([g(A4)],es.prototype,"labelsVisible",void 0),d([g({type:[Yo],json:{write:!0}})],es.prototype,"fields",void 0),d([Ge("fields")],es.prototype,"writeFields",null),d([je("fields")],es.prototype,"readFields",null),es=xY=d([G("esri.layers.support.FeatureReductionCluster")],es);var SY;let mA=SY=class extends Hv{constructor(t){super(t),this.type="selection"}clone(){return new SY}};d([g({type:["selection"]})],mA.prototype,"type",void 0),mA=SY=d([G("esri.layers.support.FeatureReductionSelection")],mA);const Wpe={key:"type",base:Hv,typeMap:{cluster:es,binning:go}},rpt={types:{key:"type",base:Hv,typeMap:{selection:mA,cluster:es,binning:go}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Wpe},"portal-item":{types:Wpe},"web-scene":{types:{key:"type",base:Hv,typeMap:{selection:mA}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:mr}}}}},npt=()=>Ce.getLogger("esri.views.2d.layers.support.clusterUtils");ge.add("esri-cluster-arcade-enabled",!0);const spt=ge("esri-cluster-arcade-enabled"),opt=new Set(["simple-line","simple-fill","picture-fill"]);function Zpe(t,e){let i=e.clone();if(!apt(i))return i;if(e.symbols.some((r=>opt.has(r.type)))&&(i=new Ca({symbol:new Or})),i.authoringInfo||(i.authoringInfo=new Ur),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter((n=>n.valueExpression!=="$view.scale"));r.forEach((n=>{n.type==="rotation"?n.field?n.field=_b(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=HM(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=_b(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=_b(t,n.field,"avg","number"):n.valueExpression&&(n.field=HM(t,n.valueExpression,"avg","number"),n.valueExpression=null)})),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=_b(t,r.field,"sum","number"):r.valueExpression&&(r.field=HM(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=_b(t,i.field,"mode","string"):i.valueExpression&&(i.field=HM(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=_b(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=_b(t,i.field,"avg","number"):i.valueExpression&&(i.field=HM(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const apt=t=>{const e=i=>npt().error(new ae("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!spt){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some((i=>!(!("valueExpression"in i)||!i.valueExpression))))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function lpt(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+nQ(s)}}}function HM(t,e,i,r){const n=nQ(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some((o=>o.name===s))||t.push(new Yo({name:s,isAutoGenerated:!0,onStatisticExpression:new vv({expression:e,returnType:r}),statisticType:i})),s}function _b(t,e,i,r,n){if(e==="cluster_count"||t.some((o=>o.name===e)))return e;const s=lpt(i,e,n);return t.some((o=>o.name===s))||(i==="avg_norm"?t.push(new Yo({name:s,isAutoGenerated:!0,onStatisticExpression:new vv({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new Yo({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const cpt=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(Je((()=>this.renderer),(()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}}),Up))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,n){const s=i.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some((o=>o.type==="size"))||s.visualVariables.push(new Si({field:"cluster_count",stops:[new gh({value:1}),new gh({useMinValue:!0,size:r}),new gh({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(i){var p;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new Yo({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter((m=>!m.isAutoGenerated)),o=i.renderer&&!((p=i.renderer.authoringInfo)!=null&&p.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...n,...s];const m=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=m,r.effectiveClusterRenderer=m,r}if(i.symbol){if(r.fields=[...n,...s],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const m=Zpe(n,this.renderer),v=this._withClusterVariable(m,a,l),w="visualVariables"in v&&v.visualVariables?v.visualVariables:[],_=new Ca({symbol:i.symbol,visualVariables:w});return r.fields=[...n,...s],r.effectiveFeatureRenderer=v,r.effectiveClusterRenderer=_,r}if(!this.renderer)return i;const c=Zpe(n,this.renderer);r.fields=[...n,...s],r.renderer=c;const u=this._withClusterVariable(c,a,l);return r.effectiveFeatureRenderer=u,r.effectiveClusterRenderer=u,r}};return d([g(rpt)],e.prototype,"featureReduction",null),e=d([G("esri.layers.mixins.FeatureReductionLayer")],e),e},Ype={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Kpe={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},Jpe={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},upt={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Ype,"web-map/basemap":Kpe,"web-map/tables":Jpe,"link-chart/operational-layers":{...Ype,LinkChartLayer:!0},"link-chart/basemap":Kpe,"link-chart/tables":Jpe,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},hpt=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&cBe(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n){i&&(r[n]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Wi.fromArray(i):null}writeVisibilityTimeExtent(i,r,n,s){i&&s.layerContainerType!=="tables"&&(i.isEmpty?s!=null&&s.messages&&s.messages.push(new ae("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[n]=i.toArray())}read(i,r){r&&(r.layer=this),l1e(this,i,(n=>super.read(i,n)),r)}write(i,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=upt[l];let u=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(u=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(u=!1),!u)return(o=r.messages)==null||o.push(new ae("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter((l=>l instanceof ae&&l.name==="web-document-write:property-required")).length;return FT(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new ae("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return d([g({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),d([je("id",["id"])],e.prototype,"readId",null),d([g(VCe)],e.prototype,"listMode",void 0),d([Ge("listMode")],e.prototype,"writeListMode",null),d([g({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:mr,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),d([Ge("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),d([g(MZ)],e.prototype,"opacity",void 0),d([g({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),d([g({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),d([Ge("title"),Ge(["web-scene"],"title")],e.prototype,"writeTitle",null),d([g({type:Wi,json:{origins:{"web-scene":{write:{layerContainerTypes:mr}}}}})],e.prototype,"visibilityTimeExtent",void 0),d([je("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),d([Ge(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ri,OT]]}})],e.prototype,"writeVisibilityTimeExtent",null),d([g({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:mr}}})],e.prototype,"visible",void 0),e=d([G("esri.layers.mixins.OperationalLayer")],e),e};var EY;const TR=new Bt({asc:"ascending",desc:"descending"});var OE;let kw=(OE=class extends ve{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new EY({field:this.field,valueExpression:this.valueExpression,order:this.order})}},EY=OE,OE);d([g({type:String,json:{write:!0}})],kw.prototype,"field",void 0),d([g({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],kw.prototype,"valueExpression",void 0),d([g({type:TR.apiValues,json:{type:TR.jsonValues,read:TR.read,write:TR.write}})],kw.prototype,"order",void 0),kw=EY=d([G("esri.layers.support.OrderByInfo")],kw);function dpt(t,e,i){if(!t)return null;const r=t.find((s=>!!s.field));if(!r)return null;const n=new kw;return n.read(r,i),[n]}function ppt(t,e,i,r){const n=t.find((s=>!!s.field));n&&Vn(i,[n.toJSON()],e)}const fpt={type:[kw],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:dpt},write:{writer:ppt}}},mpt=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return d([g(fpt)],e.prototype,"orderBy",void 0),e=d([G("esri.layers.mixins.OrderedLayer")],e),e},ypt=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Lr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Lt({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await Re(()=>import("./layersLoader-BQn_Xigk.js"),__vite__mapDeps([249,156,155,157]));return Rr(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(s){throw io(s)||Ce.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch((r=>(Hd(r),!0))))}async setUserPrivileges(i,r){if(!fi.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){Hd(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=!(Rt!=null&&Rt.findCredential(this.url)),o=i===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,s);let a,l;if(o)a=n.portal.url;else try{a=await iQ(this.url,r)}catch(m){Hd(m)}if(!a||!EBe(a,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const m=r!=null?r.signal:null;l=await(Rt==null?void 0:Rt.getCredential(`${a}/sharing`,{prompt:!1,signal:m}))}catch(m){Hd(m)}const c=!0,u=!1,p=!1;if(!l)return{features:{edit:c,fullEdit:u},content:{updateItem:p}};try{if(o?await n.reload():(n=new Lt({id:i,portal:{url:a}}),await n.load(r)),n.portal.user)return this._getUserPrivileges(n,s)}catch(m){Hd(m)}return{features:{edit:c,fullEdit:u},content:{updateItem:p}}}_getUserPrivileges(i,r){const n=Vot(i);return r&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){Hd(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Rt==null?void 0:Rt.findCredential(this.url):null;if(!r)return!0;const n=$R.credential===r?$R.user:await this._fetchEditingUser(i);return $R.credential=r,$R.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var u,p;const r=(p=(u=this.portalItem)==null?void 0:u.portal)==null?void 0:p.user;if(r)return r;const n=Rt==null?void 0:Rt.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Ue.getDefault();if(o&&o.loaded&&Lh(o.restUrl)===Lh(s))return o.user;const a=`${s}/community/self`,l=i!=null?i.signal:null,c=await Yj(ni(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?Ki.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const n=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Ue.getDefault());return n&&s&&!w1e(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new ae("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return d([g({type:Lt})],e.prototype,"portalItem",null),d([je("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),d([Ge("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),d([g({clonable:!1})],e.prototype,"resourceReferences",void 0),d([g({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),d([g({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),d([g({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=d([G("esri.layers.mixins.PortalLayer")],e),e},$R={credential:null,user:null};let yI=class extends ut{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};d([g()],yI.prototype,"updating",void 0),d([g()],yI.prototype,"status",void 0),yI=d([G("esri.layers.support.PublishingInfo")],yI);const gpt=Symbol(),vpt=t=>{var r;var e;let i=(r=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const s=new yI;return this._checkPublishingStatus(s),s}_checkPublishingStatus(n){let a=0;const l=async u=>{let p;n.updating=!0;try{p=await this.fetchPublishingStatus()}catch{p="unavailable"}p!=="published"&&p!=="unavailable"||(n.status==="publishing"&&this.refresh(),c.remove()),n.status=p,n.updating=!1,c.removed||(a=setTimeout(l,u,u+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(a)}};this.when().catch((()=>c.remove())),l(250),this.addHandles(c)}},e=gpt,r);return d([g({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=d([G("esri.layers.mixins.PublishableLayer")],i),i},Dv=new et,yA=new WeakMap;function bpt(t){_pt(t)&&Dv.push(new WeakRef(t))}function wpt(t){const e=Dv.find((i=>i.deref()===t));e&&Dv.remove(e)}function _pt(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function lAe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:lAe(e,t%e):0}let SV=0,MR=0;function xpt(){const t=Date.now();let e=!1;for(const i of Dv){const r=i.deref();r?r.refreshInterval&&t-(yA.get(r)??0)+5>=6e4*r.refreshInterval&&(yA.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Dv.length-1;i>=0;i--)Dv.at(i).deref()||Dv.removeAt(i)}C_e((()=>{const t=Date.now();let e=0;for(const i of Dv){const r=i.deref();r&&(e=lAe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?yA.get(r)||yA.set(r,t):yA.delete(r))}if(e!==MR){if(MR=e,clearInterval(SV),MR===0)return void(SV=0);SV=setInterval(xpt,MR)}}),Up);const Xpe=.1,Spt=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=ck((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||bpt(this)}),(()=>{}))}destroy(){wpt(this)}castRefreshInterval(i){return i>=Xpe?i:i<=0?0:Xpe}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){DA(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})}),(r=>{Ce.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})}))}async hasDataChanged(){return!0}get test(){}};return d([g({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:mr}}}}})],e.prototype,"refreshInterval",void 0),d([Ai("refreshInterval")],e.prototype,"castRefreshInterval",null),d([g({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),d([g({readOnly:!0})],e.prototype,"refreshParameters",null),e=d([G("esri.layers.mixins.RefreshableLayer")],e),e},cAe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&Ept(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return d([g({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),d([g({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),d([g({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=d([G("esri.layers.mixins.ScaleRangeLayer")],e),e};function Ept(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function Qpe(t,e){return kh.fromJSON({value:t,unit:e})}let qs=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Wi.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?Qpe(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?Qpe(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};d([g({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],qs.prototype,"cumulative",void 0),d([g({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],qs.prototype,"endField",void 0),d([g({type:Wi,json:{write:{enabled:!0,allowNull:!0}}})],qs.prototype,"fullTimeExtent",void 0),d([je("fullTimeExtent",["timeExtent"])],qs.prototype,"readFullTimeExtent",null),d([Ge("fullTimeExtent")],qs.prototype,"writeFullTimeExtent",null),d([g({type:Boolean,json:{write:!0}})],qs.prototype,"hasLiveData",void 0),d([g({type:kh,json:{write:{enabled:!0,allowNull:!0}}})],qs.prototype,"interval",void 0),d([je("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],qs.prototype,"readInterval",null),d([Ge("interval")],qs.prototype,"writeInterval",null),d([g({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],qs.prototype,"startField",void 0),d([g(c5("timeReference",!0))],qs.prototype,"timeZone",void 0),d([g({type:String,json:{write:{enabled:!0,allowNull:!0}}})],qs.prototype,"trackIdField",void 0),d([g({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],qs.prototype,"useTime",void 0),d([g({type:[Date],json:{read:!1}})],qs.prototype,"stops",void 0),qs=d([G("esri.layers.support.TimeInfo")],qs);const Tpt={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:mr}}},$pt=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=qQ.fromJSON(n.timeOffsetUnits);return s&&o?new kh({value:s,unit:o}):null}set timeInfo(i){jEe(i,this.fieldsIndex),this._set("timeInfo",i)}};return d([g({type:Wi,json:{write:!1}})],e.prototype,"timeExtent",void 0),d([g({type:kh})],e.prototype,"timeOffset",void 0),d([je("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),d([g({value:null,type:qs,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),d([g(Tpt)],e.prototype,"useViewTime",void 0),e=d([G("esri.layers.mixins.TemporalLayer")],e),e};let lu=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};d([g({type:[Ir],json:{write:!0}})],lu.prototype,"labelingInfo",void 0),d([g(A4)],lu.prototype,"labelsVisible",void 0),d([g({types:Dk,json:{write:!0}})],lu.prototype,"renderer",void 0),d([g({type:Boolean,json:{write:!0}})],lu.prototype,"visible",void 0),lu=d([G("esri.layers.support.TrackPartInfo")],lu);let Ya=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new lu({renderer:new Ca({symbol:J5.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new lu({renderer:new Ca({symbol:J5.clone()})}),this.trackLines=new lu({renderer:new Ca({symbol:L4.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));Vn(r,n,i)}};d([g({type:Boolean,json:{write:!0}})],Ya.prototype,"enabled",void 0),d([g({type:[Yo],json:{write:!0}})],Ya.prototype,"fields",void 0),d([Ge("fields")],Ya.prototype,"writeFields",null),d([g({type:lu,json:{write:!0}})],Ya.prototype,"latestObservations",void 0),d([g({type:kh,json:{write:!0}})],Ya.prototype,"maxDisplayDuration",void 0),d([g({type:Number,json:{write:!0}})],Ya.prototype,"maxDisplayObservationsPerTrack",void 0),d([g(I4)],Ya.prototype,"popupEnabled",void 0),d([g({type:Zp,json:{name:"popupInfo",write:!0}})],Ya.prototype,"popupTemplate",void 0),d([g({type:lu,json:{write:!0}})],Ya.prototype,"previousObservations",void 0),d([g({type:lu,json:{write:!0}})],Ya.prototype,"trackLines",void 0),d([g({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Ya.prototype,"timeField",void 0),Ya=d([G("esri.layers.support.TrackInfo")],Ya);const Mpt=t=>{let e=class extends t{constructor(){super(...arguments),this.trackInfo=null}};return d([g({type:Ya})],e.prototype,"trackInfo",void 0),e=d([G("esri.layers.mixins.TrackableLayer")],e),e},efe=new Bt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let zd=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};d([g({json:{write:!0}})],zd.prototype,"name",void 0),d([g({json:{write:!0}})],zd.prototype,"description",void 0),d([g({json:{read:efe.read,write:efe.write}})],zd.prototype,"drawingTool",void 0),d([g({json:{write:!0}})],zd.prototype,"prototype",void 0),d([g({json:{write:!0}})],zd.prototype,"thumbnail",void 0),zd=d([G("esri.layers.support.FeatureTemplate")],zd);let Rd=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=c4(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};d([g({json:{write:!0}})],Rd.prototype,"id",void 0),d([g({json:{write:!0}})],Rd.prototype,"name",void 0),d([g({json:{write:!0}})],Rd.prototype,"domains",void 0),d([je("domains")],Rd.prototype,"readDomains",null),d([Ge("domains")],Rd.prototype,"writeDomains",null),d([g({type:[zd],json:{write:!0}})],Rd.prototype,"templates",void 0),Rd=d([G("esri.layers.support.FeatureType")],Rd);function Cpt(){return{fields:{type:[Zs],value:null,set:function(t){if(t&&ge("big-integer-warning-enabled")){const e=t.filter((i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8));if(e.length){const i=e.map((r=>`'${r.name}'`)).join(", ");Ce.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return uP.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||Ce.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return n4(this.fieldsIndex,t)}}}}const EV=()=>Ce.getLogger("esri.layers.support.labelingInfo"),Ipt=/\[([^[\]]+)\]/gi;function tfe(t,e,i){return t?t.map((r=>{var s;const n=new Ir;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(Ipt,((a,l)=>`[${Apt(l,o)}]`))}return n})):null}function Apt(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const ife=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],Ppt={esriGeometryPoint:ife,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:ife,esriGeometryEnvelope:null};function tHt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=Ppt[e];if(!r.symbol)return EV().warn("No ILabelClass symbol specified."),[];if(!s)return EV().error(new ae("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&EV().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const kpt="relationships/",Opt="expression/";let ga=class extends ut{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Kj((()=>oy())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Re(()=>import("./featureUtils-BZiWvzTY.js"),[]).then((e=>this._featureUtils=e))}get calculatedExpressions(){var i;const e=new et;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter((s=>e.includes(`{expression/${s.name.toLowerCase()}}`))))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>e.invalid===!0))}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const l=a.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&e.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){var o;const n=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:l,workingTitle:c}=this,u=c&&l;i.forEach((p=>{const m=p.getObjectId()??p.attributes[e.objectIdField],v=u?a({attributes:p.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,p,s).global,layer:e,text:c}):"";n.set(m,v)}))}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map((n=>n.getObjectId()??n.attributes[e.objectIdField])).filter(rs);if(r.length!==i.length)return i;if(i.some((n=>!UKe(n,this.requiredFields)))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,l;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const u of this.calculatedExpressions)try{s[`expression/${u.name}`]=u.func({vars:{$feature:c}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return dQ(e).filter((i=>!(i.indexOf(kpt)===0||i.indexOf(Opt)===0)))}};d([g({readOnly:!0})],ga.prototype,"_arcadeTask",null),d([g()],ga.prototype,"_featureUtils",void 0),d([g({readOnly:!0})],ga.prototype,"featureUtilsPromise",null),d([g({readOnly:!0})],ga.prototype,"calculatedExpressions",null),d([g()],ga.prototype,"displayField",void 0),d([g()],ga.prototype,"effectivePopupTemplate",void 0),d([g()],ga.prototype,"expressionsUsedInTitle",null),d([g()],ga.prototype,"fieldsIndex",void 0),d([g()],ga.prototype,"fieldInfoMap",null),d([g()],ga.prototype,"fields",void 0),d([g()],ga.prototype,"objectIdField",void 0),d([g()],ga.prototype,"requiredFields",null),ga=d([G("esri.layers.support.TitleCreator")],ga);const PS=[];function Lpt(t,e){if(HD(t.url??""))return!0;const{wkid:i}=e;for(const r of PS){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}PS.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),PS.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),PS.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),PS.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),PS.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function Rpt(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await Yj(r.populateFromStyle());if(Rr(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new vc("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function Npt({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=jpt({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=Vpt({titleBase:n,fields:i,displayField:t}),l=Bpt();return new Zp({title:a,content:l,fieldInfos:o})}const Dpt=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):wKe(t,e);function Fpt({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter((n=>!e.includes(n.type)))),t===r&&(t=t.slice()),i!==!0&&t.sort(zpt),t}function zpt(t,e){return t.type==="oid"?-1:e.type==="oid"?1:rfe(t)?-1:rfe(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function jpt(t,e){const i=e==null?void 0:e.visibleFieldNames;return Fpt({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||Gpt,sortDisabled:e==null?void 0:e.sortDisabled}).map((r=>new pQ({fieldName:r.name,isEditable:bKe(r,t),label:r.alias,format:Upt(r),visible:Dpt(r,{...t,visibleFieldNames:i})})))}function Upt(t){switch(t.type){case"small-integer":case"integer":case"single":return new lN({digitSeparator:!0,places:0});case"double":return new lN({digitSeparator:!0,places:2});case"string":return VKe(t.name)?new lN({digitSeparator:!0,places:0}):void 0;default:return}}function Bpt(){return[new tT,new eT]}function Vpt(t){const e=uKe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function rfe(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const Gpt=["geometry","blob","raster","guid","xml"],ho="FeatureLayer";function CR(t,e){return new ae("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function nfe(t){return t&&t instanceof et}const TV=Cpt();function $V(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let mt=class extends tht(cpt(Flt(vpt(Rlt(klt(ICe(mpt($pt(Mpt(cAe(Spt(Yat(hpt(ypt(T4(wlt(Zat(Et.ClonableMixin(Br))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=tt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=ck((async(i,r,n)=>{const{save:s,saveAs:o}=await Re(()=>import("./featureLayerUtils-uuWOo9gl.js"),__vite__mapDeps([250,244,251,248,156]));switch(i){case Cp.SAVE:return s(this,r);case Cp.SAVE_AS:return o(this,n,r)}}))}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then((s=>this.initLayerProperties(s)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Hd).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new ae("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))})).then((()=>$ut(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return Lr(e),new ga({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,wIe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return Iut(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&Vn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return cIe(i.layerDefinition||i)}readObjectIdField(e,i){return uIe(i.layerDefinition||i)}get parsedUrl(){const e=qn(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=k_(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=k_(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){pce(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=hP(n,i,r)??void 0;return o||Ce.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return see(i,r)}set source(e){const i=this._get("source");i!==e&&(nfe(i)&&this._resetMemorySource(i),nfe(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof et?new pm({layer:this,items:e}):e:null}readSource(e,i){const r=Ms.fromJSON(i.featureSet);return new pm({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map((o=>zd.fromJSON(o))),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,o,a;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?qBe(this.url,r):r;let c=r;if(!c&&this.url){const u=Gp(this.url);u!=null&&(c=u.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),gX(c)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find((s=>s.name.toLowerCase()===r));n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map((o=>(o=Rd.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o)))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await aut(this,e,i,ho);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await lut(this,e,i,r,ho);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return cut(this,e,i)}async uploadAssets(e,i){return uut(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return Npt(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await v_e(Re(()=>import("./FeatureLayerSource-B-9ixRaK.js"),__vite__mapDeps([252,42,49,253,254,255,45,86,44,87,256,257,28,20,258,259,56,54,55,11,16,146,15])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=wut(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=eA(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await hut(this,e,i,ho);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return dut(this,e,ho)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return pIe(this.types,this.typeIdField,e)}getFieldDomain(e,i){var r;return xut(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return put(this,e,i,ho)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(bt.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return await fut(this,e,i,ho)}async queryFeatureCount(e,i){return mut(this,e,i,ho)}async queryExtent(e,i){return yut(this,e,i,ho)}async queryRelatedFeatures(e,i){return gut(this,e,i,ho)}async queryRelatedFeaturesCount(e,i){return vut(this,e,i,ho)}async queryTopFeatures(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new ae(ho,"Layer source does not support queryTopFeatures capability");const s=await Re(()=>import("./TopFeaturesQuery-CREEfpmy.js"),[]),o=await r.queryTopFeatures(s.default.from(e),i);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new ae(ho,"Layer source does not support queryAttributeBins capability");Out(e,n,ho);const s=await Re(()=>import("./AttributeBinsQuery-BB1Il91z.js"),__vite__mapDeps([205,13,8,22])),o=await r.queryAttributeBins(s.default.from(e),i);if(o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new ae(ho,"Layer source does not support queryTopObjectIds capability");const s=await Re(()=>import("./TopFeaturesQuery-CREEfpmy.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(G_)}async queryTopFeaturesExtent(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new ae(ho,"Layer source does not support queryTopExtents capability");const s=await Re(()=>import("./TopFeaturesQuery-CREEfpmy.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new ae(ho,"Layer source does not support queryFeatureCount capability");const s=await Re(()=>import("./TopFeaturesQuery-CREEfpmy.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;(n==null?void 0:n.length)===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(CR(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(CR(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(CR(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(CR(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new ae(ho,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||Lpt(this,e))}async save(e){return this._debouncedSaveOperations(Cp.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Cp.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((i=>i.trim())).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Vn("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_fetchFirstValidLayerId(e){return ni(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),pce(this.renderer,this.fieldsIndex),jEe(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),Rpt(this,{origin:"service"})}async hasDataChanged(){return but(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some((n=>n.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach((r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ae("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ae("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((i=>{i.layer=this,i.sourceLayer=this})),this.addHandles([e.on("after-add",(i=>{i.item.layer=this,i.item.sourceLayer=this})),e.on("after-remove",(i=>{i.item.layer=null,i.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((i=>{i.layer=null,i.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};d([g({clonable:!1,readOnly:!0})],mt.prototype,"_titleCreator",null),d([g(ect)],mt.prototype,"attributeTableTemplate",void 0),d([je("service","capabilities")],mt.prototype,"readCapabilities",null),d([g({json:{origins:{"web-scene":{write:!1}},write:!0}})],mt.prototype,"charts",void 0),d([g({readOnly:!0})],mt.prototype,"createQueryVersion",null),d([g({json:{read:{source:"layerDefinition.copyrightText"}}})],mt.prototype,"copyright",void 0),d([g({json:{read:{source:"layerDefinition.displayField"}}})],mt.prototype,"displayField",void 0),d([g({types:Ov,readOnly:!0})],mt.prototype,"defaultSymbol",void 0),d([g({type:mh})],mt.prototype,"dynamicDataSource",void 0),d([g({type:Boolean})],mt.prototype,"editingEnabled",null),d([je(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],mt.prototype,"readEditingEnabled",null),d([je("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],mt.prototype,"readEditingEnabledFromWebMap",null),d([Ge(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],mt.prototype,"writeEditingEnabled",null),d([Ge("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],mt.prototype,"writeEditingEnabledToWebMap",null),d([g({readOnly:!0})],mt.prototype,"effectiveEditingEnabled",null),d([g({clonable:!1,readOnly:!0})],mt.prototype,"featureTitleFields",null),d([g({...TV.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:$V}}}}})],mt.prototype,"fields",void 0),d([g(TV.fieldsIndex)],mt.prototype,"fieldsIndex",void 0),d([g({type:Vat,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],mt.prototype,"formTemplate",void 0),d([g({json:{read:{source:"layerDefinition.extent"}}})],mt.prototype,"fullExtent",void 0),d([g({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:$V,writer(t,e,i){const r=t?YZ.toJSON(t):null;r&&Vn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:YZ.read}}})],mt.prototype,"geometryType",void 0),d([g({json:{read:{source:"layerDefinition.hasM"}}})],mt.prototype,"hasM",void 0),d([g({json:{read:{source:"layerDefinition.hasZ"}}})],mt.prototype,"hasZ",void 0),d([g(Jlt)],mt.prototype,"id",void 0),d([g({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],mt.prototype,"infoFor3D",void 0),d([g({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],mt.prototype,"isTable",void 0),d([je("service","isTable",["type","geometryType"]),je("isTable",["layerDefinition.type","layerDefinition.geometryType"])],mt.prototype,"readIsTable",null),d([Ge("web-map","isTable")],mt.prototype,"writeIsTable",null),d([g(A4)],mt.prototype,"labelsVisible",void 0),d([g({type:[Ir],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:tfe,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:tfe,write:{layerContainerTypes:mr}}})],mt.prototype,"labelingInfo",void 0),d([g((()=>{const t=le(Klt);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Vn(r,Qj(e),i)}}},t})())],mt.prototype,"opacity",void 0),d([g(Zlt)],mt.prototype,"legendEnabled",void 0),d([g({type:["show","hide"],json:(()=>{const t=le(VCe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],mt.prototype,"listMode",void 0),d([je("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],mt.prototype,"readGlobalIdField",null),d([g({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:$V}}}}})],mt.prototype,"objectIdField",void 0),d([je("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],mt.prototype,"readObjectIdField",null),d([g({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:mr}}})],mt.prototype,"operationalLayerType",void 0),d([g(TV.outFields)],mt.prototype,"outFields",void 0),d([g({readOnly:!0})],mt.prototype,"parsedUrl",null),d([g({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],mt.prototype,"path",void 0),d([g(I4)],mt.prototype,"popupEnabled",void 0),d([g({type:Zp,json:{name:"popupInfo",write:!0}})],mt.prototype,"popupTemplate",void 0),d([g({readOnly:!0})],mt.prototype,"defaultPopupTemplate",null),d([g({types:Dk,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Kdt,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:mr,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:mr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:mr})}}})],mt.prototype,"renderer",null),d([je("service","renderer",["drawingInfo.renderer","defaultSymbol"]),je("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],mt.prototype,"readRenderer",null),d([g()],mt.prototype,"resourceInfo",void 0),d([g((()=>{const t=le(Hlt);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],mt.prototype,"screenSizePerspectiveEnabled",void 0),d([g({clonable:!1})],mt.prototype,"source",null),d([Ai("source")],mt.prototype,"castSource",null),d([je("portal-item","source",["featureSet"]),je("web-map","source",["featureSet"])],mt.prototype,"readSource",null),d([g({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],mt.prototype,"spatialReference",void 0),d([g({type:Number})],mt.prototype,"subtypeCode",void 0),d([g({type:[zd]})],mt.prototype,"templates",void 0),d([je("templates",["editFieldsInfo","creatorField","editorField","templates"])],mt.prototype,"readTemplates",null),d([g({type:qs})],mt.prototype,"timeInfo",void 0),d([g()],mt.prototype,"title",void 0),d([je("service","title",["name"]),je("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],mt.prototype,"readTitle",null),d([je("web-map","title",["layerDefinition.name","title"])],mt.prototype,"readTitleFromWebMap",null),d([g({type:String})],mt.prototype,"sublayerTitleMode",void 0),d([g({json:{read:!1}})],mt.prototype,"type",void 0),d([g({type:String})],mt.prototype,"typeIdField",void 0),d([je("service","typeIdField"),je("typeIdField",["layerDefinition.typeIdField"])],mt.prototype,"readTypeIdField",null),d([g({type:[Rd]})],mt.prototype,"types",void 0),d([je("service","types",["types"]),je("types",["layerDefinition.types"])],mt.prototype,"readTypes",null),d([g({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:mr}}}}})],mt.prototype,"visible",void 0),d([je("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],mt.prototype,"readVisible",null),mt=d([G("esri.layers.FeatureLayer")],mt);const nHt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return mt}},Symbol.toStringTag,{value:"Module"}));let sm=class extends ve{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};d([g({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],sm.prototype,"moment",void 0),d([g({type:Boolean,json:{write:!0}})],sm.prototype,"fullUpdate",void 0),d([g({type:Boolean,json:{write:!0}})],sm.prototype,"validateErrorsCreated",void 0),d([g({type:Boolean,json:{write:!0}})],sm.prototype,"exceededTransferLimit",void 0),d([g({type:[Object],json:{write:!0}})],sm.prototype,"serviceEdits",void 0),d([g({type:[Object],json:{write:!0}})],sm.prototype,"discoveredSubnetworks",void 0),sm=d([G("esri.rest.networks.support.ValidateNetworkTopologyResult")],sm);const qpt=sm,Hpt=bs()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Zg=class extends qpt{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await ni(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((n,s)=>{this._clearTimer();const o=setInterval((()=>{this._timer||s(gr()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),s(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([g()],Zg.prototype,"editsResolver",void 0),d([g({type:String,json:{write:!0}})],Zg.prototype,"statusUrl",void 0),d([dt(Hpt)],Zg.prototype,"status",void 0),d([g({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Zg.prototype,"submissionTime",void 0),d([g({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Zg.prototype,"lastUpdatedTime",void 0),Zg=d([G("esri.networks.support.TopologyValidationJobInfo")],Zg);const Wpt=Zg;var Fn;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Fn||(Fn={}));const IR=new Bt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),aHt=new Bt({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),Zpt={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},lHt=new Bt({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function Ypt(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=uAe(t),o=[];switch(t.ruleType){case Fn.RTContainment:case Fn.RTAttachment:i==="from"&&bh(e,r,!1)?o.push(s):i==="to"&&bh(e,s,!1)&&o.push(r);break;case Fn.RTJunctionEdgeConnectivity:case Fn.RTJunctionJunctionConnectivity:bh(e,r,!0)?o.push(s):bh(e,s,!0)&&o.push(r);break;case Fn.RTEdgeJunctionEdgeConnectivity:n&&(bh(e,n,!0)?(o.push(r),o.push(s)):(bh(e,r,!0)||bh(e,s,!0))&&o.push(n));break;default:return[]}return o}function gI(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=uAe(t);switch(t.ruleType){case Fn.RTContainment:case Fn.RTAttachment:return AR(e,i,r,s,!1,!1);case Fn.RTJunctionEdgeConnectivity:case Fn.RTJunctionJunctionConnectivity:return AR(e,i,r,s,!0,!0);case Fn.RTEdgeJunctionEdgeConnectivity:return AR(e,i,r,n,!0,!0)||AR(e,i,s,n,!0,!0);default:return!1}}function AR(t,e,i,r,n,s){if(!i||!r)return!1;const o=bh(t,i,s),a=bh(e,r,s);if(n){const l=bh(t,r,s),c=bh(e,i,s);return o&&a||l&&c}return o&&a}function Kpt(t,e){var n;const i=(n=t.terminal)==null?void 0:n.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function bh(t,e,i){var s,o,a,l;const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===((s=e.networkSource)==null?void 0:s.layerId):t.networkSourceId===((o=e.networkSource)==null?void 0:o.sourceId))&&(r==null||r===((a=e.assetGroup)==null?void 0:a.assetGroupCode))&&(n==null||n===((l=e.assetType)==null?void 0:l.assetTypeCode))&&(!i||!("terminalId"in t)||Kpt(e,t))}function uAe(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function Ax(t){var n;let e=null,i=null,r=null;if(REe(t))e=TY(t),[i,r]=Jpt(t);else if(yv(t)){e=((n=t.parent)==null?void 0:n.layerId)??null;const[s]=cF(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function TY(t){var r;const{sourceLayer:e}=t;let i;return K2e(e)?i=e.layerId:yv(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function Jpt(t){const[e,i]=cF(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function cF(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function sfe(t,e){if(t==="Utility Network Layer"){const{default:i}=await Re(()=>Promise.resolve().then(()=>uft),void 0);return new i({layerUrl:e})}return null}async function Xpt(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Lt||(e={...e,portalItem:new Lt(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new ae("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await ni(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return sfe(n.data.type,r);if(n.data.layers){const a=n.data.layers.find((l=>l.type.includes(s)));if(a){const l=`${r}/${a.id}`;return sfe(a.type,l)}}return null}let Kn=class extends T4(ra){static fromPortalItem(e){return Xpt(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,a=hA(r,n,this.gdbVersion);o&&a&&s.then((l=>{BN(r,n)&&(this.historicMoment=l.historicMoment)}))},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,a=hA(r,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then((()=>{this.addHandles([RCe(this._applyEditsHandler),NCe(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{io(e)||Ce.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return qn(this.layerUrl)}get featureServiceUrl(){return Gp(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Gp(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(s.objectId),r.set(o,a)}const n=this.featureServiceUrl;return r.forEach(((s,o)=>i.push({layerUrl:`${n}/${o}`,objectIds:s}))),i}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([Re(()=>import("./queryNamedTraceConfigurations-xPOk2yIF.js"),[]),Re(()=>import("./QueryNamedTraceConfigurationsParameters-COQGx2to.js"),[])]),s=this.networkServiceUrl,o=n.from(e);return(a=await r(s,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var u,p,m;if(!e.validateArea)throw new ae("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([Re(()=>import("./validateNetworkTopology-C21tIrX-.js"),[]),Re(()=>import("./ValidateNetworkTopologyParameters-BqAbIgZ2.js"),[])]),s=n.from(e);BN(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=_Z,await yde(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=gde(a,null,this.gdbVersion,!0),c=await r(o,s,{...i});if(c!=null&&c.serviceEdits){const v=[];for(const w of c.serviceEdits){const{editedFeatures:_}=w,T=_!=null&&_.spatialReference?new tt(_.spatialReference):null;v.push({layerId:w.layerId,editedFeatures:{adds:((u=_==null?void 0:_.adds)==null?void 0:u.map(($=>PR($,T))))||[],updates:((p=_==null?void 0:_.updates)==null?void 0:p.map(($=>({original:PR($[0],T),current:PR($[1],T)}))))||[],deletes:((m=_==null?void 0:_.deletes)==null?void 0:m.map(($=>PR($,T))))||[],spatialReference:T}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:v,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new ae("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const u=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await ni(u,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([Re(()=>import("./validateNetworkTopology-C21tIrX-.js"),[]),Re(()=>import("./ValidateNetworkTopologyParameters-BqAbIgZ2.js"),[])]),o=s.from(e);BN(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=_Z,await yde(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?gde(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(a,o,{...i});return new Wpt({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await ni(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await ni(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then((s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]}));n&&this.read(n,{origin:"service"})}};function PR(t,e){return new sr({attributes:t.attributes,geometry:Hp({...t.geometry,spatialReference:e})})}d([g({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Kn.prototype,"id",void 0),d([g({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Kn.prototype,"title",void 0),d([g({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Kn.prototype,"layerUrl",void 0),d([g({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Kn.prototype,"dataElement",void 0),d([g({type:Ut,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Kn.prototype,"fullExtent",void 0),d([g({type:tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Kn.prototype,"spatialReference",void 0),d([g({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Kn.prototype,"type",void 0),d([g({readOnly:!0})],Kn.prototype,"datasetName",null),d([g({readOnly:!0})],Kn.prototype,"owner",null),d([g({readOnly:!0})],Kn.prototype,"schemaGeneration",null),d([g({readOnly:!0})],Kn.prototype,"parsedUrl",null),d([g({readOnly:!0})],Kn.prototype,"featureServiceUrl",null),d([g({readOnly:!0})],Kn.prototype,"networkServiceUrl",null),d([g({readOnly:!0})],Kn.prototype,"layerId",null),d([g()],Kn.prototype,"sourceJSON",void 0),d([g({readOnly:!0})],Kn.prototype,"networkSystemLayers",null),d([g()],Kn.prototype,"gdbVersion",void 0),d([g({type:Date})],Kn.prototype,"historicMoment",void 0),Kn=d([G("esri.networks.Network")],Kn);const Qpt=Kn;let Yg=class extends ve.JSONSupportMixin(ra){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=ni}initialize(){}async load(e){const i=this.rulesLayer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,o]=cF(e.sourceLayer);if(!s||!o)return"";const a=Ax(e),l=Ax(i);r.forEach((u=>{const{type:p,direction:m}=u;this._getRulesForAssociationType(p).forEach((v=>{Ypt(v,a,m).filter((w=>{var _;return((_=w.networkSource)==null?void 0:_.layerId)===l.layerId})).forEach((w=>{var $,I;const _=($=w.assetGroup)==null?void 0:$.assetGroupCode,T=(I=w.assetType)==null?void 0:I.assetTypeCode;if(_!=null&&T!=null){const A=n.get(_)??new Set;A.add(T),n.set(_,A)}}))}))}));let c=[];return this._mergeAssetCodes(n).forEach(((u,p)=>{const m=`${s} IN (${p})`,v=VYe(o,[...u]);m&&v&&c.push(eA(m,v))})),c.length>1&&(c=c.map((u=>`(${u})`))),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return TY(e)==null?[]:i.filter((n=>this.canAssociateFeatures(e,n,r)))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=Ax(e),s=Ax(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?gI(c,s,n):gI(c,n,s)))}))}getLayersCanAssociateWith(e,i,r){return TY(e)==null?[]:i.filter((n=>this.canAssociateFeatureToLayer(e,n,r)))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=Ax(e),s=Ax(i);return r.some((o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some((c=>l==="to"?gI(c,s,n):gI(c,n,s)))}))}getFeatureSQL(e,i){var c,u;const r=e.layerId.toString(),n=(c=e.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),s=(u=e.fieldsIndex)==null?void 0:u.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const p=l.assetGroupHash[o];if(p)return p.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,l,c,u,p,m,v,w;const e={};let i;(function(_){_[_.from=0]="from",_[_.to=1]="to",_[_.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const _ of this.rules){if(_.ruleType===Fn.RTAttachment){this.rulesCategorized.attachment.push(_);continue}if(_.ruleType===Fn.RTContainment){this.rulesCategorized.containment.push(_);continue}if(_.ruleType===Fn.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(_);continue}this.rulesCategorized.connectivity.push(_);let T=[[i.from,i.to],[i.to,i.from]];_.ruleType===Fn.RTEdgeJunctionEdgeConnectivity&&(T=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const $ of T){const I=$.shift(),A=$.shift();let k=!1;switch(_.ruleType){case Fn.RTEdgeJunctionEdgeConnectivity:k=I===i.from||I===i.to;break;case Fn.RTJunctionEdgeConnectivity:k=I===i.to}const R=r[I],F=((n=_[R.networkSourceId])==null?void 0:n.layerId.toString())??"",B=(o=(s=_[R.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),q=_[R.assetTypeId],Y=(a=q==null?void 0:q.assetTypeCode)==null?void 0:a.toString(),J=r[A],Q=((l=_[J.networkSourceId])==null?void 0:l.layerId.toString())??"",te=(u=(c=_[J.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:u.toString(),re=_[J.assetTypeId],ee=(p=re==null?void 0:re.assetTypeCode)==null?void 0:p.toString(),ye=e[F]??{assetGroupHash:{}};if(!(B&&Y&&te&&ee))continue;const ne=ye.assetGroupHash[B]??{assetTypeHash:{}},ue=ne.assetTypeHash[Y]??{};if(ue[Q]=ue[Q]??{},k){ue[F]=ue[F]??{};const Ne=eA(`assetgroup = ${B}`,`assettype = ${Y}`);(re==null?void 0:re.connectivityPolicy)==="esriNECPEndVertex"?ue[F].endVertex=(m=ue[F])!=null&&m.endVertex?`${ue[F].endVertex}`:`(${Ne})`:ue[F].anyVertex=ue[F].anyVertex?`${ue[F].anyVertex}`:`(${Ne})`}const he=eA(`assetgroup = ${te}`,`assettype = ${ee}`);(re==null?void 0:re.connectivityPolicy)==="esriNECPEndVertex"?ue[Q].endVertex=(v=ue[Q])!=null&&v.endVertex?Vq(ue[Q].endVertex,he):`(${he})`:ue[Q].anyVertex=(w=ue[Q])!=null&&w.anyVertex?Vq(ue[Q].anyVertex,he):`(${he})`,ne.assetTypeHash[Y]=ue,ye.assetGroupHash[B]=ne,e[F]=ye}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter((r=>r.ruleType===Fn.RTJunctionJunctionConnectivity));case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter((r=>r.ruleType===Fn.RTJunctionEdgeConnectivity||r.ruleType===Fn.RTEdgeJunctionEdgeConnectivity));default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[l,c]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,c)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,s)}return i}_canSupportAssociations(e){return e.every((i=>{const r=REe(i)?i.sourceLayer:i,[n,s]=cF(r);return n!=null&&s!=null}))}};d([g({constructOnly:!0})],Yg.prototype,"rulesLayer",void 0),d([g({constructOnly:!0})],Yg.prototype,"rules",void 0),d([g({readOnly:!0})],Yg.prototype,"rulesHash",void 0),d([g()],Yg.prototype,"rulesCategorized",void 0),d([g({constructOnly:!0})],Yg.prototype,"request",void 0),Yg=d([G("esri.networks.RulesTable")],Yg);let Yc=class extends ve{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};d([g({type:[Object],json:{write:!0}})],Yc.prototype,"conditionBarriers",void 0),d([g({type:[Object],json:{write:!0}})],Yc.prototype,"outputConditions",void 0),d([g({type:[Object],json:{write:!0}})],Yc.prototype,"functions",void 0),d([g({type:[Object],json:{write:!0}})],Yc.prototype,"functionBarriers",void 0),d([g({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Yc.prototype,"traversabilityScope",void 0),d([g({type:String,json:{write:!0}})],Yc.prototype,"shortestPathNetworkAttributeName",void 0),d([g({type:Boolean,json:{write:!0}})],Yc.prototype,"includeBarriers",void 0),d([g({type:Boolean,json:{write:!0}})],Yc.prototype,"validateConsistency",void 0),d([g({type:Boolean,json:{write:!0}})],Yc.prototype,"ignoreBarriersAtStartingPoints",void 0),Yc=d([G("esri.networks.support.TraceConfiguration")],Yc);const mee=Yc;let pr=class extends mee{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};d([g({type:[Object],json:{write:!0}})],pr.prototype,"filterBarriers",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"arcadeExpressionBarrier",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"circuitName",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"domainNetworkName",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"filterBitsetNetworkAttributeName",void 0),d([g({type:[Object],json:{write:!0}})],pr.prototype,"filterFunctionBarriers",void 0),d([g({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],pr.prototype,"filterScope",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"includeContainers",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"includeContent",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"includeIsolated",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"includeStructures",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"allowIndeterminateFlow",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"includeUpToFirstSpatialContainer",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"inferConnectivity",void 0),d([g({type:Number,json:{write:!0}})],pr.prototype,"maxHops",void 0),d([g({type:Object,json:{write:!0}})],pr.prototype,"nearestNeighbor",void 0),d([g({type:Number,json:{write:!0}})],pr.prototype,"numPaths",void 0),d([g({type:[Object],json:{write:!0}})],pr.prototype,"outputFilterCategories",void 0),d([g({type:[Object],json:{write:!0}})],pr.prototype,"outputFilters",void 0),d([g({type:[Object],json:{write:!0}})],pr.prototype,"propagators",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"subnetworkName",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"targetTierName",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"diagramTemplateName",void 0),d([g({type:String,json:{write:!0}})],pr.prototype,"tierName",void 0),d([g({type:Boolean,json:{write:!0}})],pr.prototype,"validateLocatability",void 0),pr=d([G("esri.networks.support.UNTraceConfiguration")],pr);const eft=pr;let Ka=class extends UW{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?eft.fromJSON(e):mee.fromJSON(e)}};d([g({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Ka.prototype,"globalId",void 0),d([g({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Ka.prototype,"title",void 0),d([g({type:mee,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"traceConfiguration",void 0),d([je("service","traceConfiguration")],Ka.prototype,"readTraceConfiguration",null),d([g({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"creationDate",void 0),d([g({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"creator",void 0),d([g({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"description",void 0),d([g({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Ka.prototype,"minStartingPoints",void 0),d([g({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"resultTypes",void 0),d([g({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ka.prototype,"tags",void 0),d([g({type:IR.apiValues,json:{type:IR.jsonValues,origins:{service:{read:IR.read,write:IR.write}},read:!1}})],Ka.prototype,"traceType",void 0),Ka=d([G("esri.networks.support.NamedTraceConfiguration")],Ka);const tft=Ka;function ift(t){var v,w,_,T,$,I,A,k,R,F,B;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",c="associationtype",u="iscontentvisible",p="percentalong",m="globalid";return{fromNetworkSourceId:((v=e==null?void 0:e.get(i))==null?void 0:v.name)??i,fromGlobalId:((w=e==null?void 0:e.get(r))==null?void 0:w.name)??r,fromTerminalId:((_=e==null?void 0:e.get(n))==null?void 0:_.name)??n,toNetworkSourceId:((T=e==null?void 0:e.get(s))==null?void 0:T.name)??s,toGlobalId:(($=e==null?void 0:e.get(o))==null?void 0:$.name)??o,toTerminalId:((I=e==null?void 0:e.get(a))==null?void 0:I.name)??a,status:((A=e==null?void 0:e.get(l))==null?void 0:A.name)??l,associationType:((k=e==null?void 0:e.get(c))==null?void 0:k.name)??c,isContentVisible:((R=e==null?void 0:e.get(u))==null?void 0:R.name)??u,percentAlong:((F=e==null?void 0:e.get(p))==null?void 0:F.name)??p,globalId:((B=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??m))==null?void 0:B.name)??m}}function fHt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter((o=>o!=null))}return[]}let Kc=class extends ut{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new ae("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new mt({url:e})}return await this.associationsTable.load(),this.associationsTable}};d([g({constructOnly:!0})],Kc.prototype,"rulesTableId",void 0),d([g({constructOnly:!0})],Kc.prototype,"rulesTableUrl",void 0),d([g({constructOnly:!0})],Kc.prototype,"subnetworksTableId",void 0),d([g({constructOnly:!0})],Kc.prototype,"subnetworksTableUrl",void 0),d([g({constructOnly:!0})],Kc.prototype,"dirtyAreasLayerId",void 0),d([g({constructOnly:!0})],Kc.prototype,"dirtyAreasLayerUrl",void 0),d([g()],Kc.prototype,"associationsTable",void 0),d([g({constructOnly:!0})],Kc.prototype,"associationsTableId",void 0),d([g({constructOnly:!0})],Kc.prototype,"associationsTableUrl",void 0),Kc=d([G("esri.networks.support.NetworkSystemLayers")],Kc);let kS=class extends ve{constructor(e){super(e),this.id=null,this.name=null}};d([g({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],kS.prototype,"id",void 0),d([g({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],kS.prototype,"name",void 0),d([g({type:Boolean,json:{write:!0}})],kS.prototype,"isUpstreamTerminal",void 0),kS=d([G("esri.networks.support.Terminal")],kS);const rft=kS,kR=new Bt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let vm=class extends ve{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};d([g({type:String,json:{write:!0}})],vm.prototype,"defaultConfiguration",void 0),d([g({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],vm.prototype,"id",void 0),d([g({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],vm.prototype,"name",void 0),d([g({type:[rft],json:{write:!0}})],vm.prototype,"terminals",void 0),d([g({type:kR.apiValues,json:{type:kR.jsonValues,read:kR.read,write:kR.write}})],vm.prototype,"traversabilityModel",void 0),vm=d([G("esri.networks.support.TerminalConfiguration")],vm);let OS=class extends ve{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};d([g({type:en,json:{write:!0},readOnly:!0})],OS.prototype,"line",void 0),d([g({type:ou,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],OS.prototype,"multipoint",void 0),d([g({type:or,json:{write:!0},readOnly:!0})],OS.prototype,"polygon",void 0),OS=d([G("esri.rest.networks.support.AggregatedGeometry")],OS);const nft=OS;let Xa=class extends ve{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};d([g({json:{write:!1}})],Xa.prototype,"type",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"assetGroupCode",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"assetTypeCode",void 0),d([g({type:String,json:{write:!0}})],Xa.prototype,"globalId",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"networkSourceId",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"objectId",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"positionFrom",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"positionTo",void 0),d([g({type:Number,json:{write:!0}})],Xa.prototype,"terminalId",void 0),Xa=d([G("esri.rest.networks.support.NetworkElement")],Xa);let Xd=class extends Xa{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};d([g({json:{write:!1}})],Xd.prototype,"type",void 0),d([g({json:{write:!0}})],Xd.prototype,"firstUnit",void 0),d([g({json:{write:!0}})],Xd.prototype,"numUnits",void 0),Xd=d([G("esri.rest.networks.support.TelecomNetworkElement")],Xd);let om=class extends ve{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new Xd({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new Xd({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};d([g({type:Xd,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],om.prototype,"edgeElement",void 0),d([je("edgeElement")],om.prototype,"readEdgeElement",null),d([Ge("edgeElement")],om.prototype,"writeEdgeElement",null),d([g({type:Xd,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],om.prototype,"junctionElement",void 0),d([je("junctionElement")],om.prototype,"readJunctionElement",null),d([Ge("junctionElement")],om.prototype,"writeJunctionElement",null),om=d([G("esri.rest.networks.support.CircuitPathConnectivityElement")],om);const sft=om,OR=new Bt({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let Md=class extends ve{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};d([g({type:String,json:{write:!0}})],Md.prototype,"globalId",void 0),d([g({type:Boolean,json:{write:!0}})],Md.prototype,"isFilterBarrier",void 0),d([g({type:Number,json:{write:!0}})],Md.prototype,"percentAlong",void 0),d([g({type:Number,json:{write:!0}})],Md.prototype,"terminalId",void 0),d([g({type:OR.apiValues,json:{type:OR.jsonValues,read:{reader:OR.read,source:"traceLocationType"},write:{writer:OR.write,target:"traceLocationType"}}})],Md.prototype,"type",void 0),d([g({type:Number,json:{write:!0}})],Md.prototype,"firstUnit",void 0),d([g({type:Number,json:{write:!0}})],Md.prototype,"numUnits",void 0),Md=d([G("esri.rest.networks.support.TraceLocation")],Md);const ofe=Md;let am=class extends ve{constructor(e){super(e),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};d([g({type:Number,json:{write:!0}})],am.prototype,"pathId",void 0),d([g({type:Number,json:{write:!0}})],am.prototype,"orderId",void 0),d([g({type:ofe,json:{write:!0}})],am.prototype,"startingPoint",void 0),d([g({type:ofe,json:{write:!0}})],am.prototype,"stoppingPoint",void 0),d([g({type:[sft],json:{write:!0}})],am.prototype,"pathConnectivity",void 0),d([g({type:en,json:{write:!0}})],am.prototype,"geometry",void 0),am=d([G("esri.rest.networks.support.CircuitPath")],am);const yee=am;let rw=class extends ve{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){var n;const r=(n=i.sections)==null?void 0:n.map((s=>({...s,path:yee.fromJSON(s.path)})));return{name:i.name,globalId:i.globalId,isSectioned:i.isSectioned,sectionOrder:i.sectionOrder,startLocation:i.startLocation,stopLocation:i.stopLocation,sections:r,subcircuits:i.subcircuits,lastVerifiedTime:i.lastVerifiedTime?new Date(i.lastVerifiedTime):null,lastExportedTime:i.lastExportedTime?new Date(i.lastExportedTime):null,circuitType:i.circuitType,status:i.status}}};d([g({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],rw.prototype,"circuit",void 0),d([je("circuit")],rw.prototype,"readCircuit",null),d([g({type:en,json:{write:!0}})],rw.prototype,"geometry",void 0),d([g({type:yee,json:{write:!0}})],rw.prototype,"path",void 0),rw=d([G("esri.rest.networks.support.CircuitTraceResult")],rw);const oft=rw;let LS=class extends ve{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};d([g({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],LS.prototype,"functionType",void 0),d([g({type:String,json:{write:!0},readOnly:!0})],LS.prototype,"networkAttributeName",void 0),d([g({type:Number,json:{write:!0},readOnly:!0})],LS.prototype,"result",void 0),LS=d([G("esri.rest.networks.support.FunctionResult")],LS);const aft=LS;let Yl=class extends ve{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null?i.elements.map((r=>"firstUnit"in r&&"numUnits"in r?new Xd({...r}):new Xa({...r}))):[]}writeNetworkElements(e,i){i.elements=e.map((r=>r.toJSON()))}};d([g({type:nft,json:{write:!0},readOnly:!0})],Yl.prototype,"aggregatedGeometry",void 0),d([g({type:[oft],json:{write:!0},readOnly:!0})],Yl.prototype,"circuits",void 0),d([g({type:[Xa],json:{write:!0},readOnly:!0})],Yl.prototype,"elements",void 0),d([je("elements")],Yl.prototype,"readNetworkElements",null),d([Ge("elements")],Yl.prototype,"writeNetworkElements",null),d([g({type:[aft],json:{write:!0},readOnly:!0})],Yl.prototype,"globalFunctionResults",void 0),d([g({type:Boolean,json:{write:!0},readOnly:!0})],Yl.prototype,"kFeaturesForKNNFound",void 0),d([g({type:[yee],json:{write:!0},readOnly:!0})],Yl.prototype,"paths",void 0),d([g({type:Boolean,json:{write:!0},readOnly:!0})],Yl.prototype,"startingPointsIgnored",void 0),d([g({type:[String],json:{write:!0},readOnly:!0})],Yl.prototype,"warnings",void 0),Yl=d([G("esri.rest.networks.support.TraceResult")],Yl);const lft=bs()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let nw=class extends Yl{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await ni(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise(((n,s)=>{this._clearTimer();const o=setInterval((()=>{this._timer||s(gr()),this.checkJobStatus().then((a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}}),(a=>{this._clearTimer(),s(a)}))}),i);this._timer=o}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};d([g({type:String,json:{write:!0}})],nw.prototype,"statusUrl",void 0),d([dt(lft)],nw.prototype,"status",void 0),d([g({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],nw.prototype,"submissionTime",void 0),d([g({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],nw.prototype,"lastUpdatedTime",void 0),nw=d([G("esri.networks.support.TraceJobInfo")],nw);let Cd=class extends Qpt{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map,this._circuitManagerMap=new Map,this._unitIdentifierManager=null}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o,a,l;return new Kc({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map((i=>vm.fromJSON(i))))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map((i=>i.domainNetworkName)))||[]}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map((n=>{var s,o;(s=n==null?void 0:n.edgeSources)==null||s.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)})),(o=n==null?void 0:n.junctionSources)==null||o.map((({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)}))})),e}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some((i=>i.isTelecomNetwork)))??!1}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var c,u,p,m;let i=null,r=null;const n=e.sourceLayer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((c=n==null?void 0:n.parent)==null?void 0:c.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const v of Object.keys(o))v.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(v)),v.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(v));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const v of l){const w=(u=v.junctionSources)==null?void 0:u.find((_=>_.layerId===s));if(w){const _=(p=w.assetGroups)==null?void 0:p.find((T=>T.assetGroupCode===i));if(_){const T=(m=_.assetTypes)==null?void 0:m.find(($=>$.assetTypeCode===r));if(T!=null&&T.isTerminalConfigurationSupported){a=T.terminalConfigurationId;break}}}}if(a!=null){const v=this.dataElement.terminalConfigurations,w=v==null?void 0:v.find((_=>_.terminalConfigurationId===a));return w?vm.fromJSON(w):null}return null}getTierNames(e){var r,n;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find((s=>s.domainNetworkName===e));return((n=i==null?void 0:i.tiers)==null?void 0:n.map((s=>s.name)))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}async getCircuitManager(e){var n;if(!this.hasTelecomNetwork)return null;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find((s=>s.domainNetworkName===e&&s.isTelecomNetwork));if(!i)return null;const{default:r}=await Re(()=>import("./CircuitManager-DwgwQV23.js"),[]);return r1(this._circuitManagerMap,e,(()=>new r({utilityNetwork:this,telecomDomainNetwork:i})))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await Re(()=>import("./UnitIdentifierManager-DztdqzVX.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach((r=>{r.terminals.forEach((n=>{this._terminalById.set(n.id,n)}))})),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([Re(()=>import("./queryAssociations-Cmii3SjZ.js"),__vite__mapDeps([260,261])),Re(()=>import("./QueryAssociationsParameters-CId6rQRM.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([Re(()=>import("./synthesizeAssociationGeometries-BgDHAf8j.js"),__vite__mapDeps([262,261])),Re(()=>import("./SynthesizeAssociationGeometriesParameters-DvWmzR6P.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([Re(()=>import("./trace-rAvVQ7lo.js"),[]),Re(()=>import("./TraceParameters-BtizYB7i.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([Re(()=>import("./trace-rAvVQ7lo.js"),[]),Re(()=>import("./TraceParameters-BtizYB7i.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new nw({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some((o=>gI(o,r,n)))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:c,isContentVisible:u,percentAlong:p,globalId:m}=ift(i);return{addFeatures:e.map((v=>{var w,_,T,$,I,A;return new sr({attributes:{[r]:(w=v.fromNetworkElement)==null?void 0:w.networkSourceId,[n]:(_=v.fromNetworkElement)==null?void 0:_.globalId,[s]:(T=v.fromNetworkElement)==null?void 0:T.terminalId,[o]:($=v.toNetworkElement)==null?void 0:$.networkSourceId,[a]:(I=v.toNetworkElement)==null?void 0:I.globalId,[l]:(A=v.toNetworkElement)==null?void 0:A.terminalId,[c]:Zpt[v.associationType],[u]:v.isContentVisible==null?void 0:v.isContentVisible?1:0,[p]:v.percentAlong,[m]:v.globalId}})})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map((n=>({globalId:n.globalId}))),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map((s=>s.globalId)),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find((a=>a.globalId===s.globalId));if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const e=this.networkSystemLayers.rulesTableUrl,i=new mt({url:e});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const n=r.flatMap((a=>[...a.edgeSources||[],...a.junctionSources||[]])),s=(await cft(i)).map((a=>this._hydrateRuleInfo(i,n,a)));return new Yg({rulesLayer:i,rules:s})}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),c=n.get("FROMASSETTYPE"),u=n.get("FROMTERMINALID"),p=n.get("TONETWORKSOURCEID"),m=n.get("TOASSETGROUP"),v=n.get("TOASSETTYPE"),w=n.get("TOTERMINALID"),_=n.get("VIANETWORKSOURCEID"),T=n.get("VIAASSETGROUP"),$=n.get("VIAASSETTYPE"),I=n.get("VIATERMINALID"),A=r.attributes[s.name],k=new Date(r.attributes[o.name]),R=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[u.name]},{networkSourceId:r.attributes[p.name],assetGroupId:r.attributes[m.name],assetTypeId:r.attributes[v.name],terminalId:r.attributes[w.name]},{networkSourceId:r.attributes[_.name],assetGroupId:r.attributes[T.name],assetTypeId:r.attributes[$.name],terminalId:r.attributes[I.name]}];let F;(function(q){q[q.from=0]="from",q[q.to=1]="to",q[q.via=2]="via"})(F||(F={}));const B={ruleType:A,creationDate:k};for(const q of[F.from,F.to,F.via]){if(A!==Fn.RTEdgeJunctionEdgeConnectivity&&q===F.via)continue;const Y=R[q],J=i.find((ye=>ye.sourceId===Y.networkSourceId)),Q=J==null?void 0:J.assetGroups.find((ye=>ye.assetGroupCode===Y.assetGroupId)),te=Q==null?void 0:Q.assetTypes.find((ye=>ye.assetTypeCode===Y.assetTypeId)),re=this._getTerminal(te,Y);let ee="";switch(q){case F.from:ee="from";break;case F.to:ee="to";break;case F.via:ee="via"}B[`${ee}NetworkSource`]=J,B[`${ee}AssetGroup`]=Q,B[`${ee}AssetType`]=te,B[`${ee}Terminal`]=re==null?void 0:re.toJSON()}return B}_getTerminal(e,i){var s,o;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find((a=>a.id===r));return((o=n==null?void 0:n.terminals)==null?void 0:o.find((a=>a.id===i.terminalId)))??null}};async function cft(t){const e=new bt({where:"1=1",outFields:["*"]});return(await GCe(t,e)).features}d([g({type:[tft],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Cd.prototype,"sharedNamedTraceConfigurations",void 0),d([g({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Cd.prototype,"type",void 0),d([g({readOnly:!0})],Cd.prototype,"serviceTerritoryFeatureLayerId",null),d([g({readOnly:!0})],Cd.prototype,"networkSystemLayers",null),d([g({readOnly:!0})],Cd.prototype,"terminalConfigurations",null),d([g({readOnly:!0})],Cd.prototype,"domainNetworkNames",null),d([g({readOnly:!0})],Cd.prototype,"hasTelecomNetwork",null),Cd=d([G("esri.networks.UtilityNetwork")],Cd);const hAe=Cd,uft=Object.freeze(Object.defineProperty({__proto__:null,default:hAe},Symbol.toStringTag,{value:"Module"}));let RS=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};d([g({type:String,json:{write:{isRequired:!0}}})],RS.prototype,"expression",void 0),d([g({type:["number","string"],json:{write:!0}})],RS.prototype,"returnType",void 0),d([g({type:String,json:{write:!0}})],RS.prototype,"title",void 0),RS=d([G("esri.webdoc.geotriggersInfo.ExpressionInfo")],RS);const dAe=RS,LR=new Bt({deviceLocation:"device-location"});let vI=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};d([g({type:dAe,json:{write:!0}})],vI.prototype,"filterExpression",void 0),d([g({type:LR.apiValues,readOnly:!0,json:{type:LR.jsonValues,read:LR.read,write:LR.write}})],vI.prototype,"type",void 0),vI=d([G("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],vI);const hft=vI;let bI=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.geometry=null,this.where=null}};d([g({types:UT,json:{read:Hp,write:!0}})],bI.prototype,"geometry",void 0),d([g({type:String,json:{write:!0}})],bI.prototype,"where",void 0),bI=d([G("esri.webdoc.geotriggersInfo.FeatureFilter")],bI);const dft=bI;let NS=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};d([g({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],NS.prototype,"layerId",void 0),d([g({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],NS.prototype,"layerUrl",void 0),d([dt({featureLayer:"feature-layer"},{readOnly:!0})],NS.prototype,"type",void 0),NS=d([G("esri.webdoc.geotriggersInfo.FeatureLayerSource")],NS);const pft=NS;let sw=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};d([g({type:pft,json:{write:{isRequired:!0}}})],sw.prototype,"fenceSource",void 0),d([g({type:dft,json:{write:!0}})],sw.prototype,"filter",void 0),d([g({type:Number,json:{write:!0}})],sw.prototype,"bufferDistance",void 0),d([dt({features:"features"},{readOnly:!0})],sw.prototype,"type",void 0),sw=d([G("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],sw);const fft=sw;let QN=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.type="fence"}};d([dt({fence:"fence"},{readOnly:!0})],QN.prototype,"type",void 0),QN=d([G("esri.webdoc.geotriggersInfo.Geotrigger")],QN);const pAe=QN;let wI=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};d([g({type:dAe,json:{write:!0}})],wI.prototype,"expressionInfo",void 0),d([g({type:[String],json:{write:!0}})],wI.prototype,"requestedActions",void 0),wI=d([G("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],wI);const mft=wI,yft=new Bt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),gft=new Bt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),RR=new Bt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let oh=class extends pAe{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};d([dt(yft)],oh.prototype,"enterExitRule",void 0),d([g({type:hft,json:{write:{isRequired:!0}}})],oh.prototype,"feed",void 0),d([dt(gft)],oh.prototype,"feedAccuracyMode",void 0),d([g({type:RR.apiValues,json:{type:RR.jsonValues,read:RR.read,write:{writer:RR.write,isRequired:!0}}})],oh.prototype,"fenceNotificationRule",void 0),d([g({type:fft,json:{write:{isRequired:!0}}})],oh.prototype,"fenceParameters",void 0),d([g({type:String,json:{write:!0}})],oh.prototype,"name",void 0),d([g({type:mft,json:{write:!0}})],oh.prototype,"notificationOptions",void 0),d([dt({fence:"fence"},{readOnly:!0})],oh.prototype,"type",void 0),oh=d([G("esri.webdoc.geotriggersInfo.FenceGeotrigger")],oh);const vft=oh,bft={base:pAe,key:"type",typeMap:{fence:vft}};let eD=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.geotriggers=null}};d([g({types:[bft],json:{write:{isRequired:!0}}})],eD.prototype,"geotriggers",void 0),eD=d([G("esri.webdoc.GeotriggersInfo")],eD);const wft=eD;let tD=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};d([g({type:Boolean,nonNullable:!0,json:{write:!0}})],tD.prototype,"enabled",void 0),tD=d([G("esri.webdoc.ips.AppleIPSProperties")],tD);const _ft=tD;let iD=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};d([g({type:Boolean,nonNullable:!0,json:{write:!0}})],iD.prototype,"enabled",void 0),iD=d([G("esri.webdoc.ips.GNSSProperties")],iD);const xft=iD;let DS=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};d([g({type:Boolean,nonNullable:!0,json:{write:!0}})],DS.prototype,"enabled",void 0),d([g({type:Number,nonNullable:!0,json:{write:!0}})],DS.prototype,"distance",void 0),d([g({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],DS.prototype,"units",void 0),DS=d([G("esri.webdoc.ips.PathSnappingProperties")],DS);const Sft=DS;let rD=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.enabled=!0}};d([g({type:Boolean,nonNullable:!0,json:{write:!0}})],rD.prototype,"enabled",void 0),rD=d([G("esri.webdoc.ips.SmoothingProperties")],rD);const Eft=rD;let ow=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};d([g({type:_ft,json:{name:"AppleIPS",write:!0}})],ow.prototype,"appleIPS",void 0),d([g({type:xft,json:{name:"GNSS",write:!0}})],ow.prototype,"gnss",void 0),d([g({type:Eft,json:{write:!0}})],ow.prototype,"smoothing",void 0),d([g({type:Sft,json:{write:!0}})],ow.prototype,"pathSnapping",void 0),ow=d([G("esri.webdoc.ips.Configuration")],ow);const Tft=ow;let FS=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Lt({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};d([g({type:Lt,json:{write:{isRequired:!0}}})],FS.prototype,"portalItem",void 0),d([je("portalItem",["itemId"])],FS.prototype,"readPortalItem",null),d([Ge("portalItem",{itemId:{type:String}})],FS.prototype,"writePortalItem",null),FS=d([G("esri.webdoc.ips.PositioningService")],FS);const $ft=FS;let _I=class extends Et.ClonableMixin(ve){constructor(e){super(e),this.positioningService=null,this.configuration=null}};d([g({type:$ft,json:{write:{isRequired:!0}}})],_I.prototype,"positioningService",void 0),d([g({type:Tft,json:{write:!0}})],_I.prototype,"configuration",void 0),_I=d([G("esri.webdoc.IPSInfo")],_I);const Mft=_I,Cft={currentVersion:nCe,createInitialViewProperties:()=>new Z5,parseVersion:k2.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},Ift=et.ofType(hAe);var LE;let aw=(LE=class extends wat{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return Cft}loadAll(){return Jj(this,(e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)}))}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new ae("webmap:empty-resource","Expected a JSON resource but got nothing")}},LE.VERSION=nCe,LE);d([g({type:wft,json:{write:!0}})],aw.prototype,"geotriggersInfo",void 0),d([g({type:Mft,json:{write:!0,name:"mapIPSInfo"}})],aw.prototype,"ipsInfo",void 0),d([g({json:{write:!0}})],aw.prototype,"presentation",void 0),d([g({type:Ift,json:{read:!0,write:!0}})],aw.prototype,"utilityNetworks",void 0),aw=d([G("esri.WebMap")],aw);const Aft=aw;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */function NR(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=Pft(t);if(!e){const i=Fft(t);if(!i){mAe(t);return}return lfe(i,t,!0),i}return kft(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?Oft(e,t):e.localName==="arcgis-placement"?Lft(e,t):lfe(e,t,!1)),e}function Pft({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(afe.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&afe.has(e.ownedBy.localName))return e.ownedBy}}const afe=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function kft(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function z4(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(z4(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const Oft=(t,e)=>z4(t,i=>{var r;e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||((r=e.widget)==null?void 0:r.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),Lft=(t,e)=>z4(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),lfe=(t,e,i)=>z4(t,r=>{i?mAe(e):e.el.childElem&&Rft(t,e),e.el.view=r},"arcgisViewReadyChange");function Rft(t,e){var l;const i=e.el.childElem??e.el,r=t==null?void 0:t.childElem,n=[...t.children],s={};for(const c of n){if(c===r)continue;const u=c.position??"manual";s[u]??(s[u]=[]),s[u].push({child:c,position:u,index:n.indexOf(c)})}const o=(l=s[e.position??"manual"])==null?void 0:l.findIndex(({child:c})=>c===e.el),a=t.view.ui;a.remove(i),a.add(i,{position:e.position,index:o})}function Nft(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function Dft(t,e){return fAe(e==null?void 0:e.center,t)}function fAe(t,e){if(typeof e=="string")return fAe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}function mAe(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function Fft(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const zft=Xi`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,jft=K_e(Aft),Uft=K_e(dCe);var Xv;let Bft=(Xv=class extends ik{constructor(){super(),this._map=jft(this),this.view=Uft(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=jE(),this.arcgisViewClick=yn(()=>this.view,"click"),this.arcgisViewDoubleClick=yn(()=>this.view,"double-click"),this.arcgisViewDrag=yn(()=>this.view,"drag"),this.arcgisViewHold=yn(()=>this.view,"hold"),this.arcgisViewImmediateClick=yn(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=yn(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=yn(()=>this.view,"key-down"),this.arcgisViewKeyUp=yn(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=yn(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=yn(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=yn(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=yn(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=yn(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=yn(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=yn(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=yn(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=yn(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=jE(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(e){const i=Dft(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){q6e(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){Nft(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){await this.view.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(e){return await this.view.whenLayerView(e)}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}load(){const e=this;e.el.childElem=document.createElement("div"),e.el.append(e.el.childElem),this.view.container=e.el.childElem}loaded(){this.map||(this.map=this._map),this.manager.onLifecycle(()=>[Je(()=>this.map,e=>{e&&(this._map=e)},{initial:!0,sync:!0}),Je(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),Je(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}},Xv.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},Xv.shadowRootOptions=C_,Xv.styles=zft,Xv);ok("arcgis-map",Bft);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function Vft(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const $0=()=>Vft([2,1,1,1,3]),Gft=t=>(...e)=>{const i=PMe(),r=new t(...e),n=r.exports;AMe(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),_st(r);const o=[r.component,...i].reverse();return kMe(o,a=>a===void 0?void 0:qft(r,a,n),n)},qft=(t,{host:e,key:i,isReactive:r},n)=>{var p;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const m=t.component.manager;a&&m.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&m.W(t,w)}})}t.O=r?void 0:i}const u=(p=t.component.constructor.elementProperties.get(i))==null?void 0:p.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(u?Tst(()=>{s[i]=t.exports}):s[i]=t.exports)})},Hft=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Wft=(t,e,i)=>{const r=Zft(e).subscribe;return r(n=>{n.some(o=>Hft(t,o.target))&&i()})},MV={},Zft=t=>{const e=t.join(","),i=MV[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),MV[e]=void 0)})};return MV[e]=s,s},Yft=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return;i=o.host}},Kft=(t,e,i)=>{const r=Yft(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},Jft="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),Xft=new Set(Jft),uF="en",Qft={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},emt=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return CV[n]??(CV[n]=yAe(t,r)),await CV[n]},CV={},yAe=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===uF?{}:await yAe(uF,e)},gAe=t=>{var i;const e=Kft(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||uF);return{lang:e,t9nLocale:vAe(e)}},vAe=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=Qft[n]??n,Xft.has(n)?n:i?vAe(r):uF},tmt=(t,e,i,r)=>{let n;const s=()=>imt(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),Wft(t,["lang"],s)},imt=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=gAe(t),s=`${e}/${i}/t9n`,a=i===null?{}:await emt(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},rmt=t=>bAe(void 0,t),gee=t=>e=>bAe(e,t);let nmt=class extends jQ{constructor(e,i){super(e);const r=this.exports;try{o2(this.component);const n=i(this.component,this),s=this.exports!==r;if(wst(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}};const bAe=Gft(nmt),vee=(t,e)=>new smt(t,e);var RE,NE,WP;class smt extends jQ{constructor(i,r){super();pt(this,RE);pt(this,NE);pt(this,WP);nt(this,NE,i),nt(this,WP,r),nt(this,RE,new MutationObserver(n=>{n.forEach(s=>{i.includes(s.attributeName)&&r.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})}))}hostConnected(){me(this,NE).forEach(i=>{this.component.el.hasAttribute(i)&&me(this,WP).call(this.component,null,this.component.el.getAttribute(i),i)}),me(this,RE).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:me(this,NE)})}hostDisconnected(){me(this,RE).disconnect()}}RE=new WeakMap,NE=new WeakMap,WP=new WeakMap;const omt=t=>(e={})=>rmt((i,r)=>{const n=gAe(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>tmt(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:u})=>{const p={...c,_lang:u,_t9nLocale:l,_loading:!1};r.exports=p;const m=c.componentLabel;typeof m=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=m)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,u=c._original??c,p=wAe(u,l);l&&(p._original=u),r.exports=p};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),wAe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=wAe(t[r],n):i[r]=n??t[r]}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const xc=omt(UMe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Px={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},amt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,Hz=class Hz extends Nr{constructor(){super(...arguments),this.messages=xc({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:o}=this,a=e.id||$0(),l=s!=="indeterminate",c=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,x4(this.el,"id",a),this.el.role="progressbar",Pe`<div class=${Oe(Px.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&Pe`<div class=${Oe(Px.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&Pe`<div class=${Oe(Px.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),a=s*.45;let l;if(e==="progress"){const c=2*a*Math.PI,u=(this.type.startsWith("determinate")?n:24)/100*c,p=c-u;l={"stroke-dasharray":`${u} ${p}`}}return Pe`<svg aria-hidden=true class=${Oe({[Px.ring]:!0,[Px.trackRing]:e==="track",[Px.progressRing]:e==="progress"})} style=${zMe(l)} viewBox=${`0 0 ${s} ${s}`}>${NA`<circle cx=${s/2} cy=${s/2} r=${a??Ye} />`}</svg>`}};Hz.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},Hz.styles=amt;let hF=Hz;an("calcite-loader",hF);const HHt=Object.freeze(Object.defineProperty({__proto__:null,Loader:hF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var lmt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$Y=lmt.join(","),_Ae=typeof Element>"u",dP=_Ae?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,dF=!_Ae&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},pF=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},cmt=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},xAe=function(e,i,r){if(pF(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll($Y));return i&&dP.call(e,$Y)&&n.unshift(e),n=n.filter(r),n},SAe=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!pF(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var u=dP.call(o,$Y);u&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var p=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!pF(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(p&&m){var v=t(p===!0?o.children:p.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},EAe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},TAe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||cmt(e))&&!EAe(e)?0:e.tabIndex},umt=function(e,i){var r=TAe(e);return r<0&&i&&!EAe(e)?0:r},hmt=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},$Ae=function(e){return e.tagName==="INPUT"},dmt=function(e){return $Ae(e)&&e.type==="hidden"},pmt=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},fmt=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},mmt=function(e){if(!e.name)return!0;var i=e.form||dF(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=fmt(n,e.form);return!s||s===e},ymt=function(e){return $Ae(e)&&e.type==="radio"},gmt=function(e){return ymt(e)&&!mmt(e)},vmt=function(e){var i,r=e&&dF(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,u,p;r=dF(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=n)!==null&&u!==void 0&&(p=u.ownerDocument)!==null&&p!==void 0&&p.contains(n))}}return s},cfe=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},bmt=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=dP.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(dP.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=dF(e);if(l&&!l.shadowRoot&&n(l)===!0)return cfe(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(vmt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return cfe(e);return!1},wmt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return dP.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},MY=function(e,i){return!(i.disabled||pF(i)||dmt(i)||bmt(i,e)||pmt(i)||wmt(i))},ufe=function(e,i){return!(gmt(i)||TAe(i)<0||!MY(e,i))},_mt=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},xmt=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=umt(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(hmt).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Smt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=SAe([e],i.includeContainer,{filter:ufe.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:_mt}):r=xAe(e,i.includeContainer,ufe.bind(null,i)),xmt(r)},Emt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=SAe([e],i.includeContainer,{filter:MY.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=xAe(e,i.includeContainer,MY.bind(null,i)),r};const bee={getShadowRoot:!0};function Fk(t){const r=QT(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function zk(t){return t.getRootNode()}function WHt(t){const e=zk(t);return"host"in e?e:null}function MAe(t){return t.host||null}function j4(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=zk(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||j4(MAe(r),{selector:e,id:i})}function QT(t,e){return t?t.closest(e)||QT(MAe(zk(t)),e):null}function Tmt(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function pP(t,e=!1,i="tabbable",r,n){return t?Tmt(t)&&r!==t?t.setFocus(n):(i==="tabbable"?$mt:Cmt)(t,e,n):void 0}function CAe(t,e){if(t)return Smt(t,{...bee,includeContainer:e})[0]??t}function $mt(t,e,i){var r;(r=CAe(t,e))==null||r.focus(i)}function Mmt(t,e){if(t)return Emt(t,{...bee,includeContainer:e})[0]??t}function Cmt(t,e,i){var r;(r=Mmt(t,e))==null||r.focus(i)}function Imt(t,e){return t.filter(i=>i.matches(e))}function nT(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function U4(t){return(!!t).toString()}function Amt(t){return jn(t)||Omt(t)}function Pmt(t){return Lmt(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function kmt(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function Omt(t){return!!Pmt(t)}function Lmt(t){return t.currentTarget.assignedNodes({flatten:!0})}function jn(t){return!!IAe(t).length}function IAe(t,e){return Rmt(t.currentTarget,e)}function Rmt(t,e){const i=t.assignedElements({flatten:!0});return e?Imt(i,e):i}function AAe(t){return!!(t.isPrimary&&t.button===0)}function Nmt(t){return t.detail===0}const DR=(t,e,i,r=!0,n=!0,s=!1)=>{const o=t.indexOf(e),a=o===0,l=o===t.length-1;r&&(i=i==="previous"&&a?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[o-1]||t[r?t.length-1:o]:i==="next"?c=t[o+1]||t[r?0:o]:i==="last"?c=t[t.length-1]:c=t[0],pP(c,n,"tabbable",s?c:void 0),c};function Dmt(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function ZHt(t,e){return PAe(t,e,"animation")}async function Fmt(t,e){return PAe(t,e,"transition")}function hfe(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function PAe(t,e,i){let r=hfe(t,i,e);if(r||(await zmt(),r=hfe(t,i,e)),!!r)try{await r.finished}catch{}}function zmt(){return new Promise(t=>requestAnimationFrame(()=>t()))}function YHt(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?dfe(parseFloat(t),window.innerWidth):t.endsWith("vh")?dfe(parseFloat(t),window.innerHeight):0}function dfe(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function Su(t,e,i){const r=jmt(t);return new r(e,i)}function jmt(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function fF(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const pfe=new Set,ffe={trace:0,debug:1,info:2,warn:4,error:8,off:10};function Umt(t){return ffe[t]>=ffe[tot]}function zS(t,...e){if(!Umt(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let IV;const mF={debug:t=>zS("debug",t),info:t=>zS("info",t),warn:t=>zS("warn",t),error:t=>zS("error",t),trace:t=>zS("trace",t),deprecated:Bmt};function Bmt(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(pfe.has(s))return;pfe.add(s);const o=Array.isArray(r);o&&!IV&&(IV=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?IV.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;zS("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const mfe={flipRtl:"flip-rtl",svg:"svg"},kAe={},AV={},OAe={s:16,m:24,l:32};function LAe({icon:t,scale:e}){const i=OAe[e],r=qmt(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function Vmt(t){const e=LAe(t),i=RAe(e);if(i)return i;AV[e]||(AV[e]=fetch(UMe(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(mF.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await AV[e];return kAe[e]=r,r}function Gmt(t){return RAe(LAe(t))}function RAe(t){return kAe[t]}function qmt(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(l,c){return o===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const Hmt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,Wz=class Wz extends Nr{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=Gmt(n)||await Vmt(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=Su("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=Fk(e),a=OAe[n],l=!!s,c=[].concat(r||"");return this.el.ariaHidden=U4(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,Pe`<svg aria-hidden=true class=${Oe({[mfe.flipRtl]:o==="rtl"&&i,[mfe.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(u=>typeof u=="string"?NA`<path d=${u??Ye} />`:NA`<path d=${u.d??Ye} opacity=${("opacity"in u?u.opacity:1)??Ye} />`)}</svg>`}};Wz.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},Wz.styles=Hmt;let yF=Wz;an("calcite-icon",yF);const Wmt=Object.freeze(Object.defineProperty({__proto__:null,Icon:yF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wee=Symbol.for(""),Zmt=t=>{if((t==null?void 0:t.r)===wee)return t==null?void 0:t._$litStatic$},Ymt=t=>({_$litStatic$:t,r:wee}),fP=(t,...e)=>({_$litStatic$:e.reduce(((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1]),t[0]),r:wee}),yfe=new Map,Kmt=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],a=[];let l,c=0,u=!1;for(;c<r;){for(l=e[c];c<r&&(s=i[c],(n=Zmt(s))!==void 0);)l+=n+e[++c],u=!0;c!==r&&a.push(s),o.push(l),c++}if(c===r&&o.push(e[r]),u){const p=o.join("$$lit$$");(e=yfe.get(p))===void 0&&(o.raw=o,yfe.set(p,e=o)),i=a}return t(e,...i)},_ee=Kmt(Pe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Jmt=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function Xmt(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${Jmt.includes(t)?"Input":"Change"}`}const CY="hidden-form-input";function xee(t){return"checked"in t}const IY=new WeakMap,See=new WeakSet;function Qmt(t,e){if(QT(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(o=>See.has(o)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function eyt(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function NAe(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?QT(t,"calcite-radio-button-group"):t}const tyt=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function gfe(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=NAe(e==null?void 0:e.parentElement);if(!r)return;const n=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(tyt),eyt(r,{message:i,icon:!0,status:"invalid"});const o=Xmt(n);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function B4(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",gfe,!0),e.requestSubmit(),e.removeEventListener("invalid",gfe,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function DAe(t){var e;(e=t.formEl)==null||e.reset()}function FAe(t){const{el:e,value:i}=t,r=Eee(t);if(!r||Qmt(r,e))return;t.formEl=r,t.defaultValue=i,xee(t)&&(t.defaultChecked=t.checked);const n=iyt.bind(t);r.addEventListener("reset",n),IY.set(t.el,n),See.add(e)}function Eee(t){const{el:e,form:i}=t;return i?j4(e,{id:i}):QT(e,"form")}function iyt(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),xee(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function zAe(t){const{el:e,formEl:i}=t;if(!i)return;const r=IY.get(e);i.removeEventListener("reset",r),IY.delete(e),t.formEl=null,See.delete(e)}function ryt(t,e){t.defaultValue=e}const AY="calciteInternalHiddenInputInput",jAe=t=>{t.target.dispatchEvent(new CustomEvent(AY,{bubbles:!0}))},vfe=t=>t.removeEventListener("input",jAe);function nyt(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${CY}"]`);if(!i||!r){o.forEach(p=>{vfe(p),p.remove()});return}const a=Array.isArray(n)?n:[n],l=[],c=new Set;o.forEach(p=>{const m=a.find(v=>v==p.value);m!=null?(c.add(m),bfe(t,p,m)):l.push(p)});let u;a.forEach(p=>{if(c.has(p))return;let m=l.pop();m||(m=s.createElement("input"),m.ariaHidden="true",m.slot=CY),u||(u=s.createDocumentFragment()),u.append(m),m.addEventListener("input",jAe),bfe(t,m,p)}),u&&e.append(u),l.forEach(p=>{vfe(p),p.remove()})}function bfe(t,e,i){var c;const{defaultValue:r,disabled:n,form:s,name:o,required:a}=t;e.defaultValue=r,e.disabled=n,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),xee(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(c=t.syncHiddenFormInput)==null||c.call(t,e);const l=NAe(t.el);if(l&&"validity"in l)for(const u in{...e==null?void 0:e.validity})l.validity[u]=e.validity[u]}const UAe=({component:t})=>(nyt(t),Pe`<slot name=${CY}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function syt(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function BAe(t){t.target.disabled&&t.preventDefault()}const VAe=["mousedown","mouseup","click"];function GAe(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const gF={capture:!0};function Sc(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),oyt(t);return}lyt(t),t.el.removeAttribute("aria-disabled")}function oyt(t){t.el.click=syt,ayt(t.el)}function ayt(t){t.addEventListener("pointerdown",BAe,gF),VAe.forEach(e=>t.addEventListener(e,GAe,gF))}function lyt(t){delete t.el.click,cyt(t.el)}function cyt(t){t.removeEventListener("pointerdown",BAe,gF),VAe.forEach(e=>t.removeEventListener(e,GAe,gF))}const uyt={container:"interaction-container"},Ec=({children:t,disabled:e})=>Pe`<div class=${Oe(uyt.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const qAe="calciteInternalLabelClick",Tee="calciteInternalLabelConnected",PY="calciteInternalLabelDisconnected",wfe="calcite-label",sT=new WeakMap,gA=new WeakMap,mP=new WeakMap,vF=new WeakMap,f_=new Set,hyt=t=>{const{id:e}=t,i=e&&j4(t,{selector:`${wfe}[for="${e}"]`});if(i)return i;const r=QT(t,wfe);return!r||dyt(r,t)?null:r};function dyt(t,e){let i;const r="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function jk(t){if(!t)return;const e=hyt(t.el);if(gA.has(e)&&e===t.labelEl||!e&&f_.has(t))return;const i=fyt.bind(t);if(e){t.labelEl=e;const r=sT.get(e)||[];r.push(t),sT.set(e,r.sort(HAe)),gA.has(t.labelEl)||(gA.set(t.labelEl,_fe),t.labelEl.addEventListener(qAe,_fe)),f_.delete(t),document.removeEventListener(Tee,mP.get(t)),vF.set(t,i),document.addEventListener(PY,i)}else f_.has(t)||(i(),document.removeEventListener(PY,vF.get(t)))}function $ee(t){if(!t||(f_.delete(t),document.removeEventListener(Tee,mP.get(t)),document.removeEventListener(PY,vF.get(t)),mP.delete(t),vF.delete(t),!t.labelEl))return;const e=sT.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(qAe,gA.get(t.labelEl)),gA.delete(t.labelEl)),sT.set(t.labelEl,e.filter(i=>i!==t).sort(HAe)),t.labelEl=null}function HAe(t,e){return Dmt(t.el,e.el)?-1:1}function bF(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function _fe(t){const e=t.detail.sourceEvent.target,i=sT.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function pyt(){f_.has(this)&&jk(this)}function fyt(){f_.add(this);const t=mP.get(this)||pyt.bind(this);mP.set(this,t),document.addEventListener(Tee,t)}async function KHt(t){var r;if(await t.componentOnReady(),sT.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of f_)if(n.el===i){jk(n);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function ns(t){return t==="l"?"m":"s"}async function myt(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const vl=()=>gee((t,e)=>{let i;function r(){i==null||i.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const o=gyt(n());if(!o)return;const{target:a,includeContainer:l,strategy:c}=o,u=zk(t.el),p=u.activeElement;if(await myt(t),!(p!==u.activeElement||i&&!(i!=null&&i.signal.aborted)))return t.el.removeEventListener("focus",r),pP(a,l,c,t.el,s)}});function yyt(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function gyt(t){if(t)return yyt(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Fl={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},vyt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,Zz=class Zz extends Nr{constructor(){super(...arguments),this.attributeWatch=vee(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=Qo(),this.mutationObserver=Su("mutation",()=>this.updateHasContent()),this.resizeObserver=Su("resize",()=>this.setTooltipText()),this.focusSetter=vl()(this),this.messages=xc(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),jk(this),this.formEl=Eee(this)}async load(){this.updateHasContent()}updated(){Sc(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),$ee(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=kmt(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?B4(this):e==="reset"&&DAe(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){fF(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?fP`a`:fP`button`,r=this.loading?Pe`<div class=${Oe(Fl.buttonLoader)}><calcite-loader class=${Oe(this.loading?Fl.loadingIn:Fl.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=Pe`<calcite-icon class=${Oe({[Fl.icon]:!0,[Fl.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${ns(this.scale)}></calcite-icon>`,o=Pe`<calcite-icon class=${Oe({[Fl.icon]:!0,[Fl.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${ns(this.scale)}></calcite-icon>`,a=Pe`<span class=${Oe(Fl.content)} ${wi(this.contentRef)}><slot></slot></span>`;return Ec({disabled:this.disabled,children:_ee`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:bF(this)} aria-live=polite class=${Oe({[Fl.buttonPadding]:n,[Fl.buttonPaddingShrunk]:!n,[Fl.contentSlotted]:this.hasContent,[Fl.iconStartEmpty]:!this.iconStart,[Fl.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Ye} href=${(e==="a"&&this.href)??Ye} name=${(e==="button"&&this.name)??Ye} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Ye} tabindex=${(this.disabled?-1:null)??Ye} target=${(e==="a"&&this.target)??Ye} title=${this.tooltipText??Ye} type=${(e==="button"?this.type:null)??Ye} ${wi(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};Zz.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:H_},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},Zz.styles=vyt;let wF=Zz;an("calcite-button",wF);const Mee=Object.freeze(Object.defineProperty({__proto__:null,Button:wF},Symbol.toStringTag,{value:"Module"})),byt=t=>_yt(void 0,t);class wyt extends Lwe{constructor(e,i){super(e);const r=this.exports;try{HS(this.component);const n=i(this.component,this),s=this.exports!==r;if(Xje(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const _yt=dk(wyt),xyt=t=>(e={})=>byt((i,r)=>{const n=wwe(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>Mje(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:u})=>{const p={...c,_lang:u,_t9nLocale:l,_loading:!1};r.exports=p;const m=c.componentLabel;typeof m=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=m)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,u=c._original??c,p=WAe(u,l);l&&(p._original=u),r.exports=p};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),WAe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=WAe(t[r],n):i[r]=n??t[r]}),i},Cee=t=>Eyt,Syt="arcgisPropertyChange",Eyt=(...t)=>{const e=MT(),i=OJ(Syt,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const ZAe=xyt(X4e);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const Tyt=t=>$yt(t);var Tv,ZP,DE,YP,kY,Kbe;let Iee=(Kbe=class extends LJ{constructor(i){super(i);pt(this,YP);pt(this,Tv,Y4e(void 0));pt(this,ZP);pt(this,DE,!1);const{el:r}=i,n=r.view;this.setProvisionalExports(void 0),Object.defineProperty(r,"view",{get:()=>me(this,Tv).value,set:s=>{if(this.exports===s)return;const o=r.view;me(this,Tv).value=s,this.exports=s,this.component.requestUpdate("view",o),si(this,YP,kY).call(this)},configurable:!0,enumerable:!0}),i!==r&&Object.defineProperty(i,"view",{get:()=>r.view,set:s=>{r.view=s}}),queueMicrotask(()=>n?r.view=n:0)}hostConnected(){this.component.manager.hasDestroy&&(me(this,ZP)??nt(this,ZP,$o(()=>{var i;return(i=me(this,Tv).value)==null?void 0:i.destroyed},()=>{var i,r;return void((r=(i=this.component).destroy)==null?void 0:r.call(i).catch(console.error))},{sync:!0})),this.onDestroy(()=>{var i;return(i=me(this,ZP))==null?void 0:i.remove()})),this.component.manager.loadedCalled&&NR(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var n;const{el:i}=this.component,r=((n=i.shadowRoot)==null?void 0:n.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),nt(this,DE,!0),si(this,YP,kY).call(this),i.isConnected&&NR(this.component)}hostDisconnected(){var i,r;typeof this.component.el.childElem=="object"&&((r=(i=me(this,Tv).value)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem))}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&NR(this.component),i.has("referenceElement")&&NR(this.component)}},Tv=new WeakMap,ZP=new WeakMap,DE=new WeakMap,YP=new WeakSet,kY=function(){!me(this,DE)||me(this,Tv).value==null||(nt(this,DE,!1),this.component.arcgisReady.emit())},Kbe);const $yt=dk(Iee);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const kx={base:"arcgis-zoom",horizontalLayout:"arcgis-zoom--horizontal",button:"esri-widget--button",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function Myt(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=YAe(t),i=(r=t.constraints)==null?void 0:r.effectiveMaxScale;return i===0||e>i}function Cyt(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=YAe(t),i=(r=t.constraints)==null?void 0:r.effectiveMinScale;return i===0||e<i}function YAe(t){var i;const e=(i=t==null?void 0:t.animation)==null?void 0:i.target;return(e&&"then"in e||e==null?void 0:e.scale)??(t==null?void 0:t.scale)??0}const Iyt=Xi`@layer{arcgis-zoom,.arcgis-zoom{display:flex;flex-flow:column nowrap;box-shadow:0 1px 2px #0000004d}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}}`;var Qv;let Ayt=(Qv=class extends ik{constructor(){super(...arguments),this.messages=ZAe({}),this.view=Tyt(this),this.canZoomIn=!1,this.canZoomOut=!1,this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=Cee()("state"),this.arcgisReady=jE()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!this.canZoomIn||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():DA(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!this.canZoomOut||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():DA(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[$o(()=>{var e;return(e=this.view)==null?void 0:e.stationary},()=>{this.canZoomIn=Myt(this.view),this.canZoomOut=Cyt(this.view)},{initial:!0}),$o(()=>{var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"},e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[kx.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this,{zoomIn:n,zoomOut:s}=this.messages;return Pe`<div class=${Yd(RI(kx.base,e))}><calcite-button class=${Yd(RI(kx.button,kx.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${n} @click=${this.zoomIn} title=${n??hG}></calcite-button><calcite-button class=${Yd(RI(kx.button,kx.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${s} @click=${this.zoomOut} title=${s??hG}></calcite-button></div>`}},Qv.properties={canZoomIn:16,canZoomOut:16,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},Qv.shadowRootOptions=C_,Qv.styles=Iyt,Qv);ok("arcgis-zoom",Ayt);function xfe(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const yP=-1;let ah=class extends ut{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ge("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(Sfe(e))}catch(i){this._transitionTo([]),Ce.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&Efe(this._current,Sfe(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&Efe(this._current,e,this.scale)?(this._final=e,this._to=le(e),Pyt(this._current,this._to,this.scale),this._from=le(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?le(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],o=this._to[r];n.scale=kyt(s.scale,o.scale,i);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],c=s.effects[a],u=o.effects[a];l.interpolate(c,u,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?le(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,o=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],c=i[a+1];if(l.scale>=e&&c.scale<=e){o=(e-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function Sfe(t){const e=WQ(t)||[];return Oyt(e)?[{scale:yP,effects:e}]:e}function Efe(t,e,i){var r,n,s,o;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===yP||((o=e[0])==null?void 0:o.scale)===yP)&&(t.length>1||e.length>1)&&i<=0)&&CEe(t[0].effects,e[0].effects)}function Pyt(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],o=(s==null?void 0:s.scale)??i,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===yP?i:n[l].scale,r[l].scale=r[l].scale===yP?i:r[l].scale,IEe(n[l].effects,r[l].effects)}function kyt(t,e,i){return t+(e-t)*i}function Oyt(t){const e=t[0];return!!e&&"type"in e}d([g()],ah.prototype,"_to",void 0),d([g()],ah.prototype,"duration",void 0),d([g({value:""})],ah.prototype,"effect",null),d([g({readOnly:!0})],ah.prototype,"effects",void 0),d([g({readOnly:!0})],ah.prototype,"final",null),d([g({readOnly:!0})],ah.prototype,"hasEffects",null),d([g({value:0})],ah.prototype,"scale",null),d([g({readOnly:!0})],ah.prototype,"transitioning",null),ah=d([G("esri.layers.effects.EffectView")],ah);function QHt(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?KAe(t.view.floors,e.floorInfo.floorField):null}function Tfe(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?KAe(t,e.floorInfo.floorField):null}function KAe(t,e){if(!(t!=null&&t.length))return null;const i=t.filter((r=>r!=="")).map((r=>`'${r}'`));return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function eWt(t,e,i){return e.flatten((({sublayers:n})=>n)).length!==t.length?!0:!!t.some((n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i))||!JAe(t,e)}function Lyt(t,e,i){return!!t.some((r=>{var a,l,c;const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((c=(l=(a=r.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!s||r.originIdOf("renderer")>Dt.SERVICE||r.originIdOf("labelingInfo")>Dt.SERVICE||r.originIdOf("opacity")>Dt.SERVICE||r.originIdOf("labelsVisible")>Dt.SERVICE||o&&r.originIdOf("orderBy")>Dt.SERVICE}))||!JAe(t,e)}function JAe(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten((({sublayers:s})=>s&&s.toArray().reverse())).map((s=>s.id)).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function tWt(t){return!!t&&t.some((e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null}))}const Ryt={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Jc=class extends ut{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((i=>{const r=Tfe(this.floors,i);return i.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Lyt(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(i=>this.notifyChange(Ryt[i.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((i=>i.id)).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter((n=>n.definitionExpression!=null||e&&n.floorInfo!=null));return i.length?JSON.stringify(i.reduce(((n,s)=>{const o=Tfe(this.floors,s),a=eA(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=o=>{o.visible&&(r===0||Slt(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):e.unshift(o))};i&&i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some(((o,a)=>e[a]!==o))?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};d([g({readOnly:!0})],Jc.prototype,"dynamicLayers",null),d([g()],Jc.prototype,"floors",void 0),d([g({readOnly:!0})],Jc.prototype,"hasDynamicLayers",null),d([g()],Jc.prototype,"layer",null),d([g({readOnly:!0})],Jc.prototype,"layers",null),d([g({readOnly:!0})],Jc.prototype,"layerDefs",null),d([g({type:Number})],Jc.prototype,"scale",void 0),d([g({readOnly:!0})],Jc.prototype,"version",null),d([g({readOnly:!0})],Jc.prototype,"visibleSublayers",null),Jc=d([G("esri.layers.support.ExportImageParameters")],Jc);const Nyt=9999999e31,Dyt=2e-7,Fyt={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function _F(t){return Fyt[t]??[-34028234663852886e22,34028234663852886e22]}const zyt={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function jyt(t){return zyt[t]}function rWt(t){return jyt(t.pixelType)*t.bandCount}function nWt(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function Uyt(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function sWt(t,e,i,r){let[n,s]=_F(i);const o=Uyt(i);return o&&(n-=1e-5,s+=1e-5),o?i.startsWith("u")?Byt(t,e,r,[n,s]):Vyt(t,e,r,[n,s]):Gyt(t,e,r,[n,s])}function oWt(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function Byt(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+.5|0}}function Vyt(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function Gyt(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a}}function aWt(t,e,i){var v,w;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),c=s==="f32"||s==="f64",u=_F(s);let p=!1;for(let _=0;_<r.length;_++){const T=typeof e=="number"?e:e[_];if(T==null)continue;const $=((v=n==null?void 0:n[_])==null?void 0:v.minValue)??u[0],I=((w=n==null?void 0:n[_])==null?void 0:w.maxValue)??u[1];if($>T+Number.EPSILON||I<T-Number.EPSILON)continue;const A=a[_]||l.slice(),k=r[_],R=i==null?void 0:i.customFloatTolerance;if(c&&R!==0){let F=R;F||(F=Math.abs(T)>=Nyt?Dyt*Math.abs(T):s==="f32"?2**-23:Number.EPSILON);for(let B=0;B<k.length;B++)A[B]&&Math.abs(k[B]-T)<F&&(k[B]=0,A[B]=0,l[B]=0,p=!0)}else for(let F=0;F<k.length;F++)A[F]&&k[F]===T&&(k[F]=0,A[F]=0,l[F]=0,p=!0);a[_]=A}if(p){const _=t.bandMasks||t.pixels.length>1?a:null;i!=null&&i.matchAllNoData?t.mask=_&&_.length>1?m(_):l:(t.bandMasks=_,t.mask=l)}function m(_){if(_.length<2)return _[0];const T=_[0].length,$=new Uint8Array(T).fill(0);for(let I=0;I<_.length;I++){const A=_[I];for(let k=0;k<T;k++)A[k]&&($[k]=255)}return $}p&&"updateStatistics"in t&&t.updateStatistics()}function XAe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function lWt(t,e){if(t==null)return null;if(!XAe(t))return new ae("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return qyt(t,e);case"unique-value":return Hyt(t,e);case"class-breaks":return Wyt(t,e);case"dictionary":case"heatmap":return null}return null}function Aee(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map((n=>n.details.symbol.type||n.details.symbol.declaredClass)).filter((n=>!!n));i.sort();const r=new Array;return i.forEach(((n,s)=>{s!==0&&n===i[s-1]||r.push(n)})),new ae("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function qyt(t,e){const i={...$m,...e,cimFallbackEnabled:!0};return Aee(t,rT(t.symbol,i).error)}function Hyt(t,e){var s;const i={...$m,...e,cimFallbackEnabled:!0},r=(s=t.uniqueValueInfos)==null?void 0:s.map((o=>rT(o.symbol,i).error)).filter(rs),n=rT(t.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),Aee(t,r)}function Wyt(t,e){const i={...$m,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map((s=>rT(s.symbol,i).error)).filter(rs),n=rT(t.defaultSymbol,i);return n.error&&r.unshift(n.error),Aee(t,r)}var OY;function Zyt(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function Pee(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function QAe(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function Yyt(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function Kyt(t,e){const i=Pee(t);i&&e!=null&&(i.geometry=Zyt(e))}function Jyt(t,e){const i=QAe(Pee(t));i&&e!=null&&(i.color=e.toArray())}function Xyt(t,e,i){const r=QAe(Pee(t));r&&e!=null&&i&&(r.colorLocked=e)}function kee(t,e){var c;const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:o,primitiveOverrides:a}=e,l=((c=t.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const u of l){const p=u.primitiveName===OY.OuterRing;Yyt(u,p?i:r),Kyt(u,n),Jyt(u,s),Xyt(u,o,p)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=le(a)),t}(function(t){t.OuterRing="reference-size-outer-ring",t.InnerDot="reference-size-inner-dot"})(OY||(OY={}));function ePe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)$fe(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":Qyt(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":ePe(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)$fe(s,e)}}else t.height!=null&&(t.height*=e)}function Qyt(t,e,i){if(t&&(t.markerPlacement&&egt(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||ePe(r.symbol,e,!0,i)}function egt(t,e){switch(D4(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map((r=>r*e));t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function $fe(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map((r=>r*e));t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function tPe(t){const e=[];return LY(dee(t),e),e.length?new Ze(UIe(e[0])):null}function LY(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(BIe(s)||pee(s)&&s.markerPlacement&&D4(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&xF(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach((o=>{LY(o.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":xF(e,s.color);break;case"CIMGradientFill":tgt(e,s);break;case"CIMHatchFill":LY(s.lineSymbol,e)}}}function xF(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function tgt(t,e){var r,n;switch((r=e.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=e.colorRamp.colorRamps)==null||n.forEach((s=>{s.type==="CIMLinearContinuousColorRamp"&&Mfe(t,s)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Mfe(t,e.colorRamp)}}function Mfe(t,e){e&&(e.fromColor&&xF(t,e.fromColor),e.toColor&&xF(t,e.toColor))}function iPe(t,e,i){e instanceof Ze||(e=new Ze(e));const r=dee(t);r&&RY(r,e)}function RY(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||n&&(BIe(o)||pee(o)&&o.markerPlacement&&D4(o.markerPlacement)))continue;const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach((l=>{RY(l.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMGradientFill":igt(o,e);break;case"CIMHatchFill":RY(o.lineSymbol,e)}}}function igt(t,e){var r,n;switch((r=t.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=t.colorRamp.colorRamps)==null||n.forEach((s=>{s.type==="CIMLinearContinuousColorRamp"&&Cfe(s,e)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Cfe(t.colorRamp,e)}}function Cfe(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function cWt(t,e,i=!1){const r=dee(t);if(i&&(e=360-e),(r==null?void 0:r.type)!=="CIMTextSymbol"){if((r==null?void 0:r.type)==="CIMPointSymbol"&&r.symbolLayers){const n=e-(r.angle||0);for(const s of r.symbolLayers)if(pee(s)){let o=s.rotation||0;s.rotateClockwise?o-=n:o+=n,s.rotation=o}r.angle=e}}else r.angle=e}var _n;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(_n||(_n={}));const vA={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function rgt(t,e,i){const r=_n.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,c=r;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[i?n-.5*l:a,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function ngt(t){const e=_n.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function sgt(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function ogt(t,e){let i=e?_n.tallSymbolWidth:t;const r=t,n=e?4:6;i<=_n.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function agt(t,e){let i=e?_n.tallSymbolWidth:t;const r=t,n=e?4:6;i<=_n.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function lgt(t,e){let i=e?_n.tallSymbolWidth:t;const r=t,n=e?4:6;i<=_n.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function cgt(t){let e=t;const i=t,r=6;e<_n.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function ugt(t){let e=t;const i=t,r=4;e<_n.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function hgt(t){const e=t,i=2;let r=t;r<_n.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Wv(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function uWt(t,e){if(t==null)return new Ze;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Ze(t);return new Ze([Wv(i.r,e),Wv(i.g,e),Wv(i.b,e),i.a])}function rPe(t){return"r"in t&&"g"in t&&"b"in t}function nPe(t){return"h"in t&&"s"in t&&"v"in t}function sPe(t){return"l"in t&&"a"in t&&"b"in t}function oPe(t){return"l"in t&&"c"in t&&"h"in t}function dgt(t){return"x"in t&&"y"in t&&"z"in t}const pgt=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],fgt=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function aPe(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function lPe(t){const e=[t.r/255,t.g/255,t.b/255].map((r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4)),i=aPe(pgt,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function Oee(t){const e=aPe(fgt,[t.x/100,t.y/100,t.z/100]).map((i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function cPe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function uPe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((r=>r>6/29?r**3:3*(6/29)**2*(r-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function mgt(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function ygt(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function ggt(t){return cPe(lPe(t))}function vgt(t){return Oee(uPe(t))}function bgt(t){return mgt(cPe(lPe(t)))}function wgt(t){return Oee(uPe(ygt(t)))}function _gt(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function xgt(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function h1(t){return rPe(t)?t:oPe(t)?wgt(t):sPe(t)?vgt(t):dgt(t)?Oee(t):nPe(t)?xgt(t):t}function V4(t){return nPe(t)?t:_gt(h1(t))}function Sgt(t){return sPe(t)?t:ggt(h1(t))}function hWt(t){return oPe(t)?t:bgt(h1(t))}function Egt(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new Ze({r:e,g:i,b:r})}function hPe(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:Egt(t);return .2126*i+.7152*r+.0722*n}var NY;function dWt(t,e=NY.High){return hPe(t,{ignoreAlpha:!0})>e?new Ze([0,0,0,t.a]):new Ze([255,255,255,t.a])}function pWt(t,e){const i=Sgt(t);i.l*=1-e;const r=h1(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function fWt(t,e){const i=t.clone();return i.a*=e,i}function mWt(t,e){const i=V4(t);i.s*=e;const r=h1(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function yWt(t){return Ze.toUnitRGBA(t)}function gWt(t){return u1(t[0],t[1],t[2],t.length>3?t[3]:1)}function vWt(t,e){const i=Ze.toUnitRGBA(t);return i[3]*=e,i}function bWt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map((r=>typeof r=="string"?new Ze(r):r))).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=Gwe(le(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const o=Math.round(s*n);r.push(t[o].clone())}return r}return Tgt(t,e,i)}function Tgt(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const a=t[o],l=t[o+1];for(let c=1;c<=s;c++){const u=c/(s+1);if(r.push($gt(a,l,u,i)),r.length+t.length===e)break e}}return[...t.map((o=>o.clone())),...Gwe(r,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(NY||(NY={}));const PV=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function $gt(t,e,i,r={}){const n=t.r,s=t.g,o=t.b,a=e.r,l=e.g,c=e.b,u=Math.round(n+(a-n)*i),p=Math.round(s+(l-s)*i),m=Math.round(o+(c-o)*i);if(!r.offset)return new Ze([u,p,m]);const v=DJ(r.seed);return new Ze([PV(u,v),PV(p,v),PV(m,v)])}const dPe="picture-fill",pPe="simple-fill",Mgt="simple-line",fPe="simple-marker",Cgt="text",Igt="cim",Ife=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),kV=new TIe(1e3);function Agt(t){const e=t.style;let i=null;if(t)switch(t.type){case fPe:e!=="cross"&&e!=="x"&&(i=t.color);break;case pPe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Pr(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case dPe:i={type:"pattern",src:t.url,width:li(t.width)*t.xscale,height:li(t.height)*t.yscale,x:li(t.xoffset),y:li(t.yoffset)};break;case Cgt:i=t.color;break;case Igt:i=tPe(t)}return i}function Pgt(t,e){const i=t+"-"+e;return kV.get(i)!==void 0?Promise.resolve(kV.get(i)):ni(t,{responseType:"image"}).then((r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return kV.put(i,c),c}))}function gP(t){if(!t)return null;let e=null;switch(t.type){case pPe:case dPe:case fPe:e=gP(t.outline);break;case Mgt:{const i=li(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:Lee(t.style),width:i,cap:t.cap,join:t.join==="miter"?li(t.miterLimit):t.join},e.dashArray=mPe(e).join(",")||"none");break}default:e=null}return e}function mPe(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map((o=>Number(o)));const n=r??0,s=Ife.has(i)?Ife.get(i).map((o=>o*n)):[];if(t.cap!=="butt")for(const[o,a]of s.entries())s[o]=o%2==1?a+n:Math.max(a-n,1);return s}const Lee=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),kgt=new Ze([128,128,128]);let Ogt=0;function Lgt(){return Ogt++}let Rgt=0;function Ngt(){return Rgt++}let Dgt=0;function Fgt(){return Dgt++}const zgt="http://www.w3.org/2000/svg",Afe=ge("android"),jgt=ge("chrome")||Afe&&Afe>=4?"auto":"optimizeLegibility",Ugt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Bgt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Qr={},ji={};const Vgt=Math.PI;function Fv(t,e){const i=t*(Vgt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function yPe(t){return t.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim()}function Ree(t,e,i,r,n){if(t){if(t.type==="circle")return ce("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return ce("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return ce("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return ce("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?yPe(t.path):t.path;return ce("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return ak(r),ce("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":jgt,x:t.x,y:t.y},t.text)}return null}function Nee(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Ze(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Lgt()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${Ngt()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map((i=>({offset:i.offset,color:i.color&&new Ze(i.color).toString()})))}}}function Dee(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ze(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=mPe(t).join(",")||"none")),e}function gPe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",ak(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function vPe(t){const{pattern:e,linearGradient:i}=t;if(e)return ce("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},ce("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map(((n,s)=>ce("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color})));return ce("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function Ggt(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=Nee(s),c=Dee(o),u=n.type==="text"?gPe(n,a):null,p=Ree(n,l.fill,c,u);p&&i.push(p)}return ce("mask",{id:e,maskUnits:"userSpaceOnUse"},ce("g",null,i))}function Pfe(t,e,i){return Lp(t,Pk(t),[e,i])}function kfe(t,e,i,r,n){return kk(t,Pk(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function qgt(t,e,i,r){const n=e%360*Math.PI/180;u0(t,Pk(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function fa(t,e){Qr&&"left"in Qr?(Qr.left!=null&&Qr.left>t&&(Qr.left=t),(Qr.right==null||Qr.right<t)&&(Qr.right=t),(Qr.top==null||Qr.top>e)&&(Qr.top=e),(Qr.bottom==null||Qr.bottom<e)&&(Qr.bottom=e)):Qr={left:t,bottom:e,right:t,top:e}}function Ofe(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)fa(e[r],e[r+1]);ji.x=e[i-2],ji.y=e[i-1];break;case"H":for(r=0;r<i;++r)fa(e[r],ji.y);ji.x=e[i-1];break;case"V":for(r=0;r<i;++r)fa(ji.x,e[r]);ji.y=e[i-1];break;case"m":{let n=0;for(("x"in ji)||(fa(ji.x=e[0],ji.y=e[1]),n=2),r=n;r<i;r+=2)fa(ji.x+=e[r],ji.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)fa(ji.x+=e[r],ji.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)fa(ji.x+=e[r],ji.y);break;case"v":for(r=0;r<i;++r)fa(ji.x,ji.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)fa(ji.x+e[r],ji.y+e[r+1]),fa(ji.x+e[r+2],ji.y+e[r+3]),fa(ji.x+=e[r+4],ji.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)fa(ji.x+e[r],ji.y+e[r+1]),fa(ji.x+=e[r+2],ji.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)fa(e[r+5],e[r+6]);ji.x=e[i-2],ji.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)fa(ji.x+=e[r+5],ji.y+=e[r+6])}}function Lfe(t,e,i){const r=Ugt[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Ofe(n)):(n={action:t,args:[]},i.push(n),Ofe(n)))}function Hgt(t){const e=(typeof t.path!="string"?yPe(t.path):t.path).match(Bgt),i=[];if(Qr={},ji={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&Lfe(r,n,i),n=[],r=l):n.push(c)}Lfe(r,n,i);const o={x:0,y:0,width:0,height:0};return Qr&&"left"in Qr&&(o.x=Qr.left,o.y=Qr.top,o.width=Qr.right-Qr.left,o.height=Qr.bottom-Qr.top),o}function bPe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Hgt(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function wPe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function DY(t,e,i,r,n,s,o,a,l){let c=(o&&s?Fv(s,e):e)/2,u=(o&&s?Fv(s,i):i)/2;if(l){const I=l[0],A=l[1];c=(o&&s?Fv(s,I):I)/2,u=(o&&s?Fv(s,A):A)/2}const p=t.width+r,m=t.height+r,v=Jm(),w=Jm();let _=!1;if(n&&p!==0&&m!==0){const I=e!==i?e/i:p/m,A=e>i?e:i;let k=1,R=1;isNaN(A)||(I>1?(k=A/p,R=A/I/m):(R=A/m,k=A*I/p)),Jd(w,w,kfe(v,k,R,c,u)),_=!0}const T=t.x+(p-r)/2,$=t.y+(m-r)/2;if(Jd(w,w,Pfe(v,c-T,u-$)),!_&&(p>e||m>i)){const I=p/e>m/i,A=(I?e:i)/(I?p:m);Jd(w,w,kfe(v,A,A,T,$))}return a&&Jd(w,w,Pfe(v,a[0],a[1])),s&&Jd(w,w,qgt(v,s,T,$)),`matrix(${w[0]},${w[1]},${w[2]},${w[3]},${w[4]},${w[5]})`}function Wgt(t,e,i){const r=t==null?void 0:t.effects.find((c=>c.type==="bloom"));if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return ce("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},ce("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),ce("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),ce("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),ce("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},ce("feFuncR",{slope:l,type:"linear"}),ce("feFuncG",{slope:l,type:"linear"}),ce("feFuncB",{slope:l,type:"linear"})),ce("feMerge",null,ce("feMergeNode",{in:"intensityBlur"}),ce("feMergeNode",{in:"intensityBrightness"}),ce("feGaussianBlur",{stdDeviation:n/10})))}function _Pe(t,e,i,r={}){var m,v,w;const n=[],s=[],o=Fgt(),a=Wgt(r.effectView,e,o);let l=null;if(a){const _=(m=r.effectView)==null?void 0:m.effects.find((A=>A.type==="bloom")),T=r.clipBloomEffect||!_.strength?0:(_.strength+_.radius/2)/3,$=e+e*T,I=i+i*T;l=[Math.max($,10),Math.max(I,10)]}let c=e,u=i;if(r.useRotationSize)for(let _=0;_<t.length;_++){const T=((v=r.rotations)==null?void 0:v[_])??0;c=Math.max(Fv(T,e),c),u=Math.max(Fv(T,i),u)}for(let _=0;_<t.length;_++){const T=t[_],$=[],I=[];let A=0,k=0,R=0;for(const Y of T){const{shape:J,fill:Q,stroke:te,font:re,offset:ee}=Y;r.ignoreStrokeWidth||J.type==="text"||(A+=(te==null?void 0:te.width)||0);const ye=Nee(Q),ne=Dee(te),ue=J.type==="text"?gPe(J,re):null;n.push(vPe(ye)),$.push(Ree(J,ye.fill,ne,ue,r.ariaLabel)),I.push(bPe(J)),ee&&(k+=ee[0],R+=ee[1])}const F=((w=r.rotations)==null?void 0:w[_])??0;r.useRotationSize&&(k+=(c-Fv(F,e))/2,R+=(u-Fv(F,i))/2);const B=DY(wPe(I),e,i,A,r.scale??!1,F,r.useRotationSize??!1,[k,R],l);let q=null;if(r.masking){const Y=`mask-${_}`,J=r.masking[_];n.push(Ggt(J,Y)),q=`url(#${Y})`}s.push(q?ce("g",{mask:q},ce("g",{transform:B},$)):ce("g",{transform:B},$))}return a&&(ak(l),c=l[0],u=l[1]),ce("svg",{"aria-label":r.ariaLabel,focusable:!1,height:u,role:"img",style:"display: block;",width:c,xmlns:zgt},a,ce("defs",null,n),a?ce("g",{filter:`url(#bloom${o})`},s):s)}const Zgt=new Ze("white");function Ygt(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function Kgt(t){var e;if(!t)return 0;if(tf(t)){const i=Ygt(t);return i??0}return Bi((e=gP(t))==null?void 0:e.width)}function G4(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some((e=>e.type==="object"));case"line-3d":return t.symbolLayers.some((e=>e.type==="path"));case"polygon-3d":return t.symbolLayers.some((e=>e.type==="object"||e.type==="extrude"));default:return!1}}function Jgt(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function wWt(t,e){if(!t)return null;let i=null;return tf(t)?i=Xgt(t):l4(t)&&(i=t.type==="cim"?tPe(t):t.color?new Ze(t.color):null),i?vP(i,e):null}function Xgt(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach((r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)})),i?new Ze(i):null}function vP(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Ze(i)}function Qgt(t,e,i){const r=t.symbolLayers;if(!r)return;const n=s=>vP(e??s??(i!=null?Zgt:null),i);r.forEach((s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||e)if(s.type==="water")s.color=n(s.color);else{const l=s.material!=null?s.material.color:null,c=n(l);if(s.material==null?s.material=new cl({color:c}):s.material.color=c,i!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=vP(s.outline.color,i)),"marker"in s&&s.marker!=null){const u=n(s.marker.color);s.marker.color=u}}}))}function evt(t,e,i){var r;(e=e??t.color)&&(t.color=vP(e,i)),i!=null&&"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=vP(t.outline.color,i))}function OV(t,e,i){t&&(e||i!=null)&&(e&&(e=new Ze(e)),tf(t)?Qgt(t,e,i):l4(t)&&evt(t,e,i))}async function tvt(t,e){const i=t.symbolLayers;i&&await tWe(i,(async r=>ivt(r,e)))}async function ivt(t,e){switch(t.type){case"extrude":nvt(t,e);break;case"icon":case"line":case"text":rvt(t,e);break;case"path":ovt(t,e);break;case"object":await svt(t,e)}}function rvt(t,e){const i=xPe(e);i!=null&&(t.size=i)}function xPe(t){for(const e of t)if(typeof e=="number")return e;return null}function nvt(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function svt(t,e){const{resourceSize:i,symbolSize:r}=await avt(t),n=SPe(e,i,r);n!=null&&(t.width=bA(e[0],r[0],i[0],n),t.depth=bA(e[1],r[1],i[1],n),t.height=bA(e[2],r[2],i[2],n))}function ovt(t,e){const i=SPe(e,l2e,[t.width,void 0,t.height]);i!=null&&(t.width=bA(e[0],t.width,1,i),t.height=bA(e[2],t.height,1,i))}function SPe(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return null}async function avt(t){const{computeObjectLayerResourceSize:e}=await Re(()=>import("./symbolLayerUtils-CSdpITXK.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function bA(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function lvt(t,e){const i=xPe(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function cvt(t,e){if(t&&e)return tf(t)?tvt(t,e):void(l4(t)&&lvt(t,e))}function uvt(t,e,i){if(t&&e!=null)if(tf(t)){const r=t.symbolLayers;r&&r.forEach((n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)}))}else l4(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle+=e))}function Uk(t){if(!t)return null;const e=t.effects.filter((i=>i.type!=="bloom")).map((i=>i.toJSON()));return Y5(e)}function _Wt(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some((e=>e.type==="extrude"))}const Rfe=f5();function hvt(t,e){Rfe.append(t,e),Rfe.detach(e)}function e$(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some((o=>!!o.length)))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=Uk(i.effectView)),hvt(s,(()=>_Pe(t,r,n,i))),s}function dvt(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function pvt(t,e,i){return t?ni(t,{responseType:"image"}).then((r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}})):Promise.reject(new ae("renderUtils: imageDataSize","href not provided."))}function fvt(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function mvt(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=V4({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=h1(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function yvt(t,e,i,r,n){return pvt(t,e,n).then((s=>{const o=s.width??e,a=s.height??e;if(s.image&&fvt(i,r)){let l=s.image.width,c=s.image.height;ge("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const u=dvt(o,a);u.drawImage(s.image,0,0,l,c,0,0,o,a);const p=u.getImageData(0,0,o,a),m=[i.r/255,i.g/255,i.b/255,i.a],v=V4(i);for(let w=0;w<p.data.length;w+=4)mvt(p.data,w,m,v,r);u.putImageData(p,0,0),t=u.canvas.toDataURL("image/png")}else{const l=Rt==null?void 0:Rt.findCredential(t);if(l!=null&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}})).catch((()=>({url:t,width:e,height:e})))}const EPe="esri-relationship-ramp",Ox=`${EPe}--diamond`,Ig=`${EPe}--square`,gvt="http://www.w3.org/2000/svg",fr={diamondContainer:`${Ox}__container`,diamondLeftCol:`${Ox}__left-column`,diamondRightCol:`${Ox}__right-column`,diamondMidCol:`${Ox}__middle-column`,diamondMidColLabel:`${Ox}__middle-column--label`,diamondMidColRamp:`${Ox}__middle-column--ramp`,squareTable:`${Ig}__table`,squareTableRow:`${Ig}__table-row`,squareTableCell:`${Ig}__table-cell`,squareTableLabel:`${Ig}__table-label`,squareTableLabelLeftBottom:`${Ig}__table-label--left-bottom`,squareTableLabelRightBottom:`${Ig}__table-label--right-bottom`,squareTableLabelLeftTop:`${Ig}__table-label--left-top`,squareTableLabelRightTop:`${Ig}__table-label--right-top`};function TPe(t,e,i={}){const{focus:r,labels:n}=t,s=!!r,o=vvt(t,e,i),a={justifyContent:"center"},l=b4(),c=i.key??e;return s?ce("div",{class:fr.diamondContainer,key:`${c}-container`,styles:a},ce("div",{class:fr.diamondLeftCol},l?n.right:n.left),ce("div",{class:fr.diamondMidCol},ce("div",{class:fr.diamondMidColLabel},n.top),o,ce("div",{class:fr.diamondMidColLabel},n.bottom)),ce("div",{class:fr.diamondRightCol},l?n.left:n.right)):ce("div",{class:fr.squareTable,key:`${c}-container`},ce("div",{class:fr.squareTableRow},ce("div",{class:s2(fr.squareTableCell,fr.squareTableLabel,fr.squareTableLabelRightBottom)},l?n.top:n.left),ce("div",{class:fr.squareTableCell}),ce("div",{class:s2(fr.squareTableCell,fr.squareTableLabel,fr.squareTableLabelLeftBottom)},l?n.left:n.top)),ce("div",{class:fr.squareTableRow},ce("div",{class:fr.squareTableCell}),o,ce("div",{class:fr.squareTableCell})),ce("div",{class:fr.squareTableRow},ce("div",{class:s2(fr.squareTableCell,fr.squareTableLabel,fr.squareTableLabelRightTop)},l?n.right:n.bottom),ce("div",{class:fr.squareTableCell}),ce("div",{class:s2(fr.squareTableCell,fr.squareTableLabel,fr.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function Nfe(t,e,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}function vvt(t,e,i={}){const{focus:r,numClasses:n,colors:s,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:c}=i,u=i.size??60,p=!!r,m=Math.sqrt(u**2+u**2)+(p?0:5),v=[],w=[],_=[],T=(u||75)/n;for(let Q=0;Q<n;Q++){const te=Q*T;for(let re=0;re<n;re++){const ee=re*T,ye=Nee(s[Q][re]),ne=Dee(null),ue={type:"rect",x:ee,y:te,width:T,height:T},he=vPe(ye);he&&v.push(he);const Ne=Ree(ue,ye.fill,ne,null);Ne&&w.push(Ne),_.push(bPe(ue))}}const $=15,I=15,A=10;let k=null;p||(k="margin: -15px -15px -18px -15px");const R=Nfe("left",r,e),F=Nfe("right",r,e),B=wPe(_),q=DY(B,m,m,0,!1,o,!1),Y=DY(B,m,m,0,!1,p?-45:null,!1),J={filter:Uk(l)??void 0,opacity:a==null?"":`${a}`};return ce("div",{class:p?fr.diamondMidColRamp:fr.squareTableCell,styles:J},ce("svg",{"aria-label":c,focusable:!1,height:m,role:"image",style:k,width:m,xmlns:gvt},ce("defs",null,ce("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},ce("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),ce("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},ce("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),v),ce("g",{transform:q},w),ce("g",{transform:Y},ce("line",{fill:"none","marker-end":R.markerEnd,"marker-start":R.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:u-$,y2:$}),ce("line",{fill:"none","marker-end":F.markerEnd,"marker-start":F.markerStart,stroke:"#555555","stroke-width":"1",x1:I,x2:u-I,y1:u+A,y2:u+A}))))}function bvt(t){return t=t||globalThis.location.hostname,wvt.some((e=>(t==null?void 0:t.match(e))!=null))}function Dfe(t,e){return t?(e=e||globalThis.location.hostname)?e.match($Pe)!=null||e.match(CPe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(MPe)!=null||e.match(IPe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const $Pe=/^devext\.arcgis\.com$/,MPe=/^qaext\.arcgis\.com$/,CPe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,IPe=/^[\w-]*\.mapsqa\.arcgis\.com$/,wvt=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,$Pe,MPe,/^jsapps\.esri\.com$/,CPe,IPe],_vt=["web-gltf","web","cim"];function APe(t,e,i){const r=t.name;return r==null?Promise.reject(new ae("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?xvt(r,e,i):oIe(t,e,i).then((n=>kPe(n,r,e,iut,i)))}function PPe(t,e){return e.items.find((i=>i.name===t))}async function kPe(t,e,i,r,n){var T,$;const s=(i==null?void 0:i.portal)!=null?i.portal:Ue.getDefault(),o={portal:s,url:qn(t.baseUrl)},a=PPe(e,t.data);if(!a)throw new ae("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(n==null?void 0:n.acceptedFormats)??_vt,c=r(a,l);if(!c)throw new ae("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:u,format:p}=c;let m=ny(u,o),v=((T=a.thumbnail)==null?void 0:T.href)??null;const w=($=a.thumbnail)==null?void 0:$.imageData;bvt()&&(m=Dfe(m)??"",v=Dfe(v));const _={portal:s,url:qn(fX(m)),origin:"portal-item"};return ree(m,n).then((I=>{const A=p==="cim"?aIe(I.data):I.data,k=nIe(A,_);if(k&&tf(k)){if(v){const R=ny(v,o);k.thumbnail=new u_({url:R})}else w&&(k.thumbnail=new u_({url:`data:image/png;base64,${w}`}));t.styleUrl?k.styleOrigin=new xh({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(k.styleOrigin=new xh({portal:i.portal,styleName:t.styleName,name:e}))}return k}))}function xvt(t,e,i){const r=rut.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:Ue.getDefault();return ree(r,i).then((s=>{const o=aIe(s.data);return nIe(o,{portal:n,url:qn(fX(r)),origin:"portal-item"})}))}const Svt=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:kPe,getStyleItemFromStyle:PPe,resolveWebStyleSymbol:APe},Symbol.toStringTag,{value:"Module"})),Ow=_n.size,nD=_n.maxSize,Fee=_n.maxOutlineSize,Ffe=_n.lineWidth,FY=_n.tallSymbolWidth;function p2(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=li(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,Fee),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?Lee(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function Evt(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return Jgt(e);const i=Pr("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await APe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch((()=>null));if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function LV(t,e=1){const i=t.a,r=V4(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=h1({h:n,s,v:o});return[a,l,c,i]}function SF(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function Oi(t,e=0){const i=SF(t);if(!i){if(t.type==="fill")return null;const n=kgt.r,s=Wv(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Wv(r[n],e);return r}async function OPe(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await Pgt(Pr(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function zfe(t){return t.outline?p2(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function zee(t,e){const i=SF(t);if(!i)return null;let r="rgba(";return r+=Wv(i.r,e)+",",r+=Wv(i.g,e)+",",r+=Wv(i.b,e)+",",r+i.a+");"}function zY(t,e){const i=zee(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?li(t.size):.75,Fee),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?Lee(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?li(2):t.join:null}:{}}function FR(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function Tvt(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function $vt(t,e,i){var n,s;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,c=e;switch(((n=t.resource)==null?void 0:n.primitive)??$Je){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Oi(t,0),stroke:p2(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Oi(t,0),stroke:p2(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Oi(t,0),stroke:p2(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:zfe(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:zfe(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:Oi(t,0),stroke:p2(t)})}break}case"object":switch(((s=t.resource)==null?void 0:s.primitive)??PJe){case"cone":{const o=FR(Oi(t,0),Oi(t,-.6),i?FY:e),a=lgt(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=Oi(t,0),a=FR(o,Oi(t,-.6),e),l=cgt(e);r.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=ogt(e,i);r.push({shape:o[0],fill:Oi(t,0)},{shape:o[1],fill:Oi(t,-.3)},{shape:o[2],fill:Oi(t,-.5)});break}case"cylinder":{const o=FR(Oi(t,0),Oi(t,-.6),i?FY:e),a=agt(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:Oi(t,0)});break}case"diamond":{const o=ugt(e);r.push({shape:o[0],fill:Oi(t,-.3)},{shape:o[1],fill:Oi(t,0)},{shape:o[2],fill:Oi(t,-.3)},{shape:o[3],fill:Oi(t,-.7)});break}case"sphere":{const o=FR(Oi(t,0),Oi(t,-.6));o.x1=0,o.y1=0,o.x2=.25*e,o.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:o});break}case"tetrahedron":{const o=hgt(e);r.push({shape:o[0],fill:Oi(t,-.3)},{shape:o[1],fill:Oi(t,0)},{shape:o[2],fill:Oi(t,-.6)});break}}break}return r}function q4(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?li(e):null}function Mvt(t){return t.type==="icon"?"multiply":"tint"}async function Cvt(t,e){const i=q4(e),r=e!=null&&e.maxSize?li(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[],a=[];let l=!1,c=0,u=0,p=0;s.forEach((w=>{var I,A,k,R;if(w.type!=="icon"&&w.type!=="object")return;w&&w.type==="icon"&&(p=Math.max(w.size&&li(w.size),p));const _=w.type==="icon"?w.size&&li(w.size):0,T=i||_?Math.ceil(Math.min(i||_,r||nD)):Ow;let $=w.type==="icon"?w.angle:null;if((e==null?void 0:e.rotation)!=null&&($=($??0)+e.rotation),a.push($),(I=w==null?void 0:w.resource)==null?void 0:I.href){const F=Evt(t,w).then((B=>{var J;const q=(J=w==null?void 0:w.material)==null?void 0:J.color,Y=Mvt(w);return yvt(B,T,q,Y,n)})).then((B=>{const q=B.width,Y=B.height;return c=Math.max(c,q),u=Math.max(u,Y),$&&(l=!0),[{shape:{type:"image",x:0,y:0,width:q,height:Y,src:B.url},fill:null,stroke:null}]}));o.push(F)}else{let F=T;w.type==="icon"&&i&&(F=T*(_/p));const B=(e==null?void 0:e.symbolConfig)==="tall"||((A=e==null?void 0:e.symbolConfig)==null?void 0:A.isTall)||w.type==="object"&&Tvt(w);c=Math.max(c,B?FY:F),u=Math.max(u,F),$&&((k=w.resource)!=null&&k.primitive)&&["square","triangle","x"].includes((R=w.resource)==null?void 0:R.primitive)&&(l=!0),o.push(Promise.resolve($vt(w,F,B)))}}));const m=await Promise.allSettled(o),v=[];return m.forEach((w=>{w.status==="fulfilled"?v.push(w.value):w.reason&&Ce.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",w.reason)})),e$(v,[c,u],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:a,useRotationSize:l})}function Ivt(t,e){const i=t.symbolLayers,r=[],n=G4(t),s=q4(e),o=(e!=null&&e.maxSize?li(e.maxSize):null)||Fee;let a,l=0,c=0;return i.forEach(((u,p)=>{if(!u||u.type!=="line"&&u.type!=="path")return;const m=[];switch(u.type){case"line":{const v=zY(u,0);if(v==null)break;const w=(v==null?void 0:v.width)||0;p===0&&(a=w);const _=Math.min(s||w,o),T=p===0?_:s?_*(w/a):_,$=T>Ffe/2?2*T:Ffe;c=Math.max(c,T),l=Math.max(l,$),v.width=T,m.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:v});break}case"path":{const v=Math.min(s||Ow,o),w=Oi(u,0),_=Oi(u,-.2),T=zee(u,-.4),$=T?{color:T,width:1}:{};if(u.profile==="quad"){const I=u.width,A=u.height,k=rgt(I&&A?I/A:1,A===0,I===0),R={...$,join:"bevel"};m.push({shape:k[0],fill:_,stroke:R},{shape:k[1],fill:_,stroke:R},{shape:k[2],fill:w,stroke:R})}else m.push({shape:vA.pathSymbol3DLayer[0],fill:_,stroke:$},{shape:vA.pathSymbol3DLayer[1],fill:w,stroke:$});c=Math.max(c,v),l=c}}r.push(m)})),Promise.resolve(e$(r,[l,c],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function Avt(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=q4(e),s=e!=null&&e.maxSize?li(e.maxSize):null,o=n||Ow,a=[];let l=0,c=0,u=!1;for(let p=0;p<r.length;p++){const m=r.at(p),v=[];if(!i||m.type==="fill"){switch(m.type){case"fill":{const w=Math.min(o,s||nD);if(l=Math.max(l,w),c=Math.max(c,w),u=!0,i){const _=vA.meshSymbol3DFill,T=zee(m,-.4),$=T?{color:T,width:1,join:"round"}:{};v.push({shape:_[0],fill:Oi(m,0),stroke:$},{shape:_[1],fill:Oi(m,-.2),stroke:$},{shape:_[2],fill:Oi(m,-.6),stroke:$})}else{let _=Oi(m,0);const T="pattern"in m?m.pattern:null,$=p2(m),I=SF(m);T!=null&&T.type==="style"&&T.style!=="solid"&&I&&(_=await OPe(T,I)),v.push({shape:vA.fill[0],fill:_,stroke:$})}break}case"line":{const w=zY(m,0);if(w==null)break;const _={stroke:w,shape:vA.fill[0]};l=Math.max(l,Ow),c=Math.max(c,Ow),v.push(_);break}case"extrude":{const w={join:"round",width:1,...zY(m,-.4)},_=Oi(m,0),T=Oi(m,-.2),$=Math.min(o,s||nD),I=ngt($);w.width=1,v.push({shape:I[0],fill:T,stroke:w},{shape:I[1],fill:T,stroke:w},{shape:I[2],fill:_,stroke:w});const A=Ow,k=.7*Ow+.5*$;l=Math.max(l,A),c=Math.max(c,k);break}case"water":{const w=SF(m),_=LV(w),T=LV(w,2),$=LV(w,3),I=sgt();u=!0,v.push({shape:I[0],fill:_},{shape:I[1],fill:T},{shape:I[2],fill:$});const A=Math.min(o,s||nD);l=Math.max(l,A),c=Math.max(c,A);break}}a.push(v)}}return e$(a,[l,c],{node:e==null?void 0:e.node,scale:u,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function Pvt(t,e){if(t.symbolLayers.length===0)return Promise.reject(new ae("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return Cvt(t,e);case"line-3d":return Ivt(t,e);case"polygon-3d":case"mesh-3d":return Avt(t,e)}return Promise.reject(new ae("symbolPreview: swatchInfo3D","symbol not supported."))}const kvt=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:OPe,getSizeFromOptions:q4,getSymbolLayerFill:Oi,previewSymbol3D:Pvt},Symbol.toStringTag,{value:"Module"})),jfe={HH:315,HL:45,LL:135,LH:225},Ovt={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Lvt(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Oi(t.symbolLayers.at(0));if(e==="simple-line"){const i=gP(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=gP(t);return i&&i.color}return Agt(t)}function Rvt(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function Nvt(t){const{focus:e,infos:i,numClasses:r}=t,n=Ovt[r],s={};i.forEach((a=>{s[a.value]={label:a.label,fill:Lvt(a.symbol)}}));const o=[];for(let a=0;a<r;a++){const l=[];for(let c=0;c<r;c++){const u=s[n[a][c]];l.push(u.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:Rvt(e,s),rotation:LPe(e)}}function LPe(t){let e=jfe[t];return t&&e==null&&(e=jfe.HH),e||0}let Lx=null;const Ufe=[255,255,255];function Bfe(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Dvt(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=(i==null?void 0:i.swatchSize)||_n.size,a=.8,l=Math.round(o*o/Math.max(s,.5)**2*a),c=window.devicePixelRatio,u=document.createElement("canvas"),p=o*c;u.width=p,u.height=p,u.style.width=u.width/c+"px",u.style.height=u.height/c+"px";const m=u.getContext("2d");if(r&&(m.fillStyle=r.toCss(!0),m.fillRect(0,0,p,p),m.fill()),m.fillStyle=(e==null?void 0:e.toCss(!0))??"",Lx&&Lx.length/2===l)for(let w=0;w<2*l;w+=2){const _=Lx[w],T=Lx[w+1];m.fillRect(_,T,s*c,s*c),m.fill()}else{Lx=[];for(let w=0;w<2*l;w+=2){const _=Bfe(0,p),T=Bfe(0,p);Lx.push(_,T),m.fillRect(_,T,s*c,s*c),m.fill()}}n&&(n.color&&(m.strokeStyle=n.color.toCss(!0)),m.lineWidth=n.width,m.strokeRect(0,0,p,p));const v=new Image(o,o);return v.src=u.toDataURL(),v.ariaLabel=(i==null?void 0:i.ariaLabel)??null,v.alt=(i==null?void 0:i.ariaLabel)??"",v}function Fvt(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=gP(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce(((w,_)=>w+_),0)===100,u=[0];for(let w=0;w<n;w++){let _=null;c&&(_=l[w]*r/100,u.push(_+u[w])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(_??s)/2} ${r}`,dashoffset:"-"+(c?u[w]/2:w*(s/2)),color:t[w]},offset:[0,0]})}let p=null;const m=2*i+((a==null?void 0:a.width)||0),v=e.holePercentage;if(v){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*v},fill:null,stroke:a,offset:[0,0]});const w=m/2;p=[[{shape:{type:"circle",cx:w,cy:w,r:w},fill:Ufe,stroke:a?{...a,color:Ufe}:null,offset:[0,0]},{shape:{type:"circle",cx:w,cy:w,r:i*v},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return e$([o],[m,m],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:p,rotations:[-90],ariaLabel:e.ariaLabel})}function lw(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,c=e.gradient??!0,u=window.devicePixelRatio,p=a*u,m=l*u,v=document.createElement("canvas");v.width=p,v.height=m,v.ariaLabel=e.ariaLabel??null,v.style.width=`${a}px`,v.style.height=`${l}px`;const w=v.getContext("2d"),_=n?p:0,T=n?0:m;if(c){const I=w.createLinearGradient(0,0,_,T),A=t.length,k=A===1?0:1/(A-1);t.forEach(((R,F)=>I.addColorStop(F*k,R.toString()))),w.fillStyle=I,w.fillRect(0,0,p,m)}else{const I=n?p/t.length:p,A=n?m:m/t.length;let k=0,R=0;for(const F of t)w.fillStyle=F.toString(),w.fillRect(k,R,I,A),k=n?k+I:0,R=n?0:R+A}const $=document.createElement("div");return $.style.width=`${a}px`,$.style.height=`${l}px`,zvt($,e==null?void 0:e.effectList),$.appendChild(v),$}function zvt(t,e){if(!e)return;t.style.filter=Uk(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function RPe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await Re(()=>import("./previewWebStyleSymbol-Cv9VzpIS.js"),[]);return i(t,RPe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await Re(()=>Promise.resolve().then(()=>kvt),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await Re(()=>import("./previewSymbol2D-D7UsrIEP.js"),[]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await Re(()=>Promise.resolve().then(()=>r1t),void 0);return i(t,e)}default:return}}function NPe(t){return t&&"opacity"in t?t.opacity*NPe(t.parent):1}async function xWt(t,e){var A;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e!=null&&e.ignoreOpacity?1:NPe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const k=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return OV(k,null,n),k}const s=(e==null?void 0:e.renderer)??jvt(r);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):o.clone(),!s||!("visualVariables"in s)||!((A=s.visualVariables)!=null&&A.length))return OV(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const k={...e};k.arcade=await oy(),e=k}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:u}=await Re(()=>Promise.resolve().then(()=>c1),void 0),p=[],m=[],v=[],w=[];for(const k of s.visualVariables)switch(k.type){case"color":p.push(k);break;case"opacity":m.push(k);break;case"rotation":w.push(k);break;case"size":k.target||v.push(k)}const _=!!p.length&&p[p.length-1],T=_?a(_,t,e):null,$=!!m.length&&m[m.length-1];let I=$?l($,t,e):null;if(n!=null&&(I=I!=null?I*n:n),e!=null&&e.ignoreOpacity&&(I=1),T!=null&&$&&I!=null&&(T.a=1),OV(o,T,I),v.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const k=c(v,t,e);await cvt(o,k)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const k of w)uvt(o,u(k,t,e),k.axis);return o}function jvt(t){if(t)return"renderer"in t?t.renderer:void 0}function Uvt(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find((u=>u.type==="size"));if(!("stops"in n)||!n.stops)return null;const s=n.stops.find((u=>u.useMinValue)),o=n.stops.find((u=>u.useMaxValue));if(s==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=e.getDisplayStatistics(a,l);return c?new Si({field:n.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const Bvt=/^-?(\d+)(\.(\d+))?$/i;function Vvt(t,e){return t-e}function Gvt(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function qvt(t,e,i,r,n){const s=sD(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function EF(t){const e=String(t),i=e.match(Bvt);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=EF(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function sD(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function TF(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map(((o,a)=>a))}=e;s.sort(Vvt);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],c=a===0?null:i[a-1],u=a===i.length-1?null:i[a+1],p=EF(l).fractional;if(p){let m,v=0,w=!1;for(;v<=p&&!w;){const _=Gvt(l,v);m=n&&o===0?_[1]:_[0],w=qvt(l,m,c,u,r),v++}w&&(i[a]=m)}}return i}const Hvt={maximumFractionDigits:20};function Wvt(t){return B_(t,Hvt)}const SWt=",",Zvt={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},Yvt=new Set(["integer","small-integer"]);let RV=null;function Kvt(t){return hQ(t)||kKe(t)||OKe(t)}async function EWt(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!RV){const{arcadeUtils:a}=await oy();RV=a}o=RV.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),o}function WM(t){return String(t).padStart(2,"0")}function Vfe(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${WM((i?t.getMonth():t.getUTCMonth())+1)}-${WM(i?t.getDate():t.getUTCDate())} ${WM(i?t.getHours():t.getUTCHours())}:${WM(i?t.getMinutes():t.getUTCMinutes())}:${WM(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function TWt(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${Vfe(i,Gfe(t,i),n)} - ${Vfe(e,Gfe(t,e),n)})`;let o=Zvt[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?s:`(${s} ${a} ${o})`,sqlWhere:null}}function Gfe(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(hQ(i))return"field"}}function $Wt(t,e){const i=e&&t.getField(e);return!!i&&Yvt.has(i.type)}function MWt(t){return`cast(${t} as float)`}function Jvt(t,e){const{format:i,timeZoneOptions:r,fieldType:n}=e??{};let s,o;if(r&&({timeZone:s,timeZoneName:o}=xGe(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,CM(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const a=CM(i||"short-date");return typeof t=="string"?AGe(t,{...a}):yu(t,{...a,timeZone:Wp})}case"time-only":{const a=CM(i||"short-time");return typeof t=="string"?PGe(t,a):yu(t,{...a,timeZone:Wp})}case"timestamp-offset":{if(!s&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?CM(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof t=="string"?kGe(t,l):yu(t,l)}default:{const a=i||r?CM(i||"short-date-short-time"):void 0;return yu(typeof t=="string"?new Date(t):t,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}const DPe="<",FPe=">";function zPe(t,e,i,r){let n="";return e===0?n=`${DPe} `:e===i&&(n=`${FPe} `),n+(r?Jvt(t,r):Wvt(t))}const Xvt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function jY(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((o=>o.type==="color"));if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await Re(async()=>{const{getColor:o}=await Promise.resolve().then(()=>c1);return{getColor:o}},void 0);return s(e,n)??null}async function jPe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await jY(t)||t.color;return new Hr({cap:i,color:n,width:r})}function Qvt(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find((({name:s})=>s.toLowerCase()===e.field.toLowerCase()));return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}function e0t(t,e){var r,n,s;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(s=(n=i.find((o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()})))==null?void 0:n.format)==null?void 0:s.dateFormat}function t0t(t,e,i){var s,o,a,l;const r=Qvt(t,e);if(!r||!Kvt(r)&&!KEe(r))return null;let n=e0t(t,r.name);if(!n&&r.type==="date"){let c=0,u=0;e.stops?(c=((o=(s=e.stops)==null?void 0:s.at(0))==null?void 0:o.value)??c,u=((l=(a=e.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??u):"minDataValue"in e&&"maxDataValue"in e&&(c=e.minDataValue??c,u=e.maxDataValue??u),n=u-c>2*zq.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function Ap(t,e){var i,r;if("authoringInfo"in t)return(r=(i=t.authoringInfo)==null?void 0:i.visualVariables)==null?void 0:r.find((({theme:n})=>n===e))}const i0t=new Ze([64,64,64]);function UPe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map(((n,s)=>i.includes(s)?zPe(n,s,r,e):null))}async function qfe(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map((u=>u.value)),r=c.some((u=>!!u.label)),r&&(s=c.map((u=>u.label)))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:UPe(n,i);return(await Promise.all(n.map((async(c,u)=>{const p=t.type==="opacity"?await r0t(c,t,e):(await Re(async()=>{const{getColor:v}=await Promise.resolve().then(()=>c1);return{getColor:v}},void 0)).getColor(t,c),m=r?s[u]:(l==null?void 0:l[u])??"";return p==null?null:{value:c,color:p,label:m}})))).filter(rs).reverse()}async function r0t(t,e,i){const r=new Ze(i??i0t),n=(await Re(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>c1);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function n0t(t){let e=!1,i=[],r=[];i=t.map((a=>a.value)),e=t.some((a=>!!a.label)),e&&(r=t.map((a=>a.label??"")));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:UPe(i);return i.map(((a,l)=>({value:a,color:BPe(a,t),label:e?r[l]:(o==null?void 0:o[l])??""}))).reverse()}function BPe(t,e){const{startIndex:i,endIndex:r,weight:n}=s0t(t,e);if(i===r)return e[i].color;const s=Ze.blendColors(e[i].color,e[r].color,n);return new Ze(s)}function s0t(t,e){let i=0,r=e.length-1;return e.some(((n,s)=>t<n.value?(r=s,!0):(i=s,!1))),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function o0t(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach(((r,n)=>{n===0?i.push({value:e.max,color:new Ze(r.toColor),label:"high"}):i.push({value:null,color:new Ze(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Ze(r.fromColor),label:"low"}):i.push({value:null,color:new Ze(r.fromColor),label:""})}));else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Ze(n),label:"high"},{value:e.min,color:new Ze(r),label:"low"}]}return i}function a0t(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter((r=>{var n;return((n=r.color)==null?void 0:n.a)>0}));let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new jm({ratio:1,color:r.color})),i++)}return e.map(((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}})).reverse()}const l0t="spike-height-override";function c0t(t){var a;const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,n=(r==null?void 0:r.includes("solid-fill"))||(r==null?void 0:r.includes("gradient-fill"));let s=e==null?void 0:e.toArray(),o=!1;return r!=null&&r.includes("outline")&&n?o=!0:s=(a=t.color)==null?void 0:a.toArray(),{type:"CIMSolidStroke",effects:u0t(r),enable:!0,colorLocked:o,capStyle:ul.Round,joinStyle:vu.Round,lineStyle3D:dY.Strip,miterLimit:4,width:i??Bi(1),color:s}}function u0t(t){if(!(t!=null&&t.includes("closed")))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function Hfe(t){const{color:e,symbolStyle:i}=t,r=i==null?void 0:i.includes("solid-fill"),n=i==null?void 0:i.includes("gradient-fill");if(!r&&!n||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e==null?void 0:e.toArray()};const s=e.clone();return s.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:s.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function VPe(t,e){var I,A,k;const{defaultHeight:i,baseWidth:r,color:n,strokeColor:s,primitiveOverrides:o,symbolStyle:a,strokeWidth:l}=e,c=((I=t.data.symbol)==null?void 0:I.type)==="CIMPointSymbol"?t.data.symbol:null,u=c==null?void 0:c.symbolLayers;if(!u)return t;const p=c.effects,m=p==null?void 0:p.find((R=>R.type==="CIMGeometricEffectTaperedPolygon")),v=p==null?void 0:p.find((R=>R.type==="CIMGeometricEffectRadial"&&R.primitiveName===l0t));r!=null&&m&&(m.fromWidth=r),i!=null&&v&&(v.length=i);const w=u==null?void 0:u.find((R=>R.type==="CIMSolidStroke")),_=u==null?void 0:u.find((R=>R.type==="CIMSolidFill")),T=u==null?void 0:u.find((R=>R.type==="CIMGradientFill")),$=((A=T==null?void 0:T.colorRamp)==null?void 0:A.type)==="CIMMultipartColorRamp"&&((k=T.colorRamp.colorRamps[0])==null?void 0:k.type)==="CIMLinearContinuousColorRamp"?T.colorRamp.colorRamps[0]:null;if(a){const R=(_==null?void 0:_.color)??($==null?void 0:$.fromColor)??(w==null?void 0:w.color),F=n??(R?new Ze(R):void 0),B=(w==null?void 0:w.color)??R,q=s??(B?new Ze(B):void 0),Y=a.includes("solid-fill"),J=a.includes("gradient-fill");if(Y||J||NV(u,_??T),F){if(Y)NV(u,T),_?_.color=F==null?void 0:F.toArray():u.push(Hfe({...e,color:F}));else if(J)if(NV(u,_),T){if($&&n){const Q=F.clone();Q.a=0,$.fromColor=F.toArray(),$.toColor=Q.toArray()}}else u.push(Hfe({...e,color:F}))}if(w){const Q=c0t({...e,strokeColor:q,color:F});w.effects=Q.effects,w.color=Q.color,w.width=Q.width,w.colorLocked=Q.colorLocked}}else if(w&&(s&&(w.color=s.toArray()),l!=null&&(w.width=l)),_&&n&&(_.color=n.toArray()),$&&n){const R=n.clone();R.a=0,$.fromColor=n.toArray(),$.toColor=R.toArray()}return o!==void 0&&(t.data.primitiveOverrides=le(o)),t}function NV(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const zR=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],oT=["","","",""],h0t=["","","",""],d0t=["","","",""],$F=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p0t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],f0t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],m0t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y0t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Wfe=["","","","","","","","","","","","",""],g0t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Zfe=["",""],v0t=["",""],b0t=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w0t=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j=0,De=1,Ct=2,On=3,N=4,jd=5,oD=6,D=7,Bo=8,ma=9,Zu=10,Ft=11,de=12,_0t=13,x0t=14,S0t=15,E0t=16,T0t=17,ft=18,$0t=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],Nd=100,M0t=[Nd+0,j,j,j,j,Nd+1,Nd+2,Nd+3,De,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,Nd+4,N,N,N,j,N,j,N,j,N,N,N,j,j,N,N,j,j,j,j,j,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,j,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,j,N,N,j,j,N,N,j,j,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,j,j,Nd+5,D,D,Nd+6,Nd+7],C0t=[[ft,ft,ft,ft,ft,ft,ft,ft,ft,oD,jd,oD,Bo,jd,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,jd,jd,jd,oD,Bo,N,N,Ft,Ft,Ft,N,N,N,N,N,Zu,ma,Zu,ma,ma,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,ma,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,ft,ft,ft,ft,ft,ft,jd,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ft,ma,N,Ft,Ft,Ft,Ft,N,N,N,N,j,N,N,ft,N,N,Ft,Ft,Ct,Ct,N,j,N,N,N,Ct,j,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,j,j,j,j,j,j,j,j],[j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,j,j,j,j,j,j,j,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,j,N,N,N,N,N,N,N,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,De,de,De,de,de,De,de,de,De,de,N,N,N,N,N,N,N,N,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,N,N,N,N,N,De,De,De,De,De,N,N,N,N,N,N,N,N,N,N,N],[On,On,On,On,N,N,N,N,D,Ft,Ft,D,ma,D,N,N,de,de,de,de,de,de,de,de,de,de,de,D,N,N,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,On,On,On,On,On,On,On,On,On,On,Ft,On,On,D,D,D,de,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,de,de,de,de,de,de,de,On,N,de,de,de,de,de,de,D,D,de,de,N,de,de,de,de,D,D,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,D,D,D,D,D,D],[D,D,D,D,D,D,D,D,D,D,D,D,D,D,N,D,D,de,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,N,N,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,de,de,de,de,de,de,de,de,de,de,de,D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,de,de,de,de,de,de,de,de,de,De,De,N,N,N,N,De,N,N,N,N,N],[Bo,Bo,Bo,Bo,Bo,Bo,Bo,Bo,Bo,Bo,Bo,ft,ft,ft,j,De,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Bo,jd,_0t,x0t,S0t,E0t,T0t,ma,Ft,Ft,Ft,Ft,Ft,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,ma,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Bo,ft,ft,ft,ft,ft,N,N,N,N,N,ft,ft,ft,ft,ft,ft,Ct,j,N,N,Ct,Ct,Ct,Ct,Ct,Ct,Zu,Zu,N,N,N,j,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Zu,Zu,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,Ft,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[j,j,j,j,j,j,j,N,N,N,N,N,N,N,N,N,N,N,N,j,j,j,j,j,N,N,N,N,N,De,de,De,De,De,De,De,De,De,De,De,De,Zu,De,De,De,De,De,De,De,De,De,De,De,De,De,N,De,De,De,De,De,N,De,N,De,De,N,De,De,N,De,De,De,De,De,De,De,De,De,De,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D],[de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,de,de,de,de,de,de,de,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,ma,N,ma,N,N,ma,N,N,N,N,N,N,N,N,N,Ft,N,N,Zu,Zu,N,N,N,N,N,Ft,Ft,N,N,N,N,N,D,D,D,D,D,N,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,N,N,ft],[N,N,N,Ft,Ft,Ft,N,N,N,N,N,Zu,ma,Zu,ma,ma,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,Ct,ma,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,N,N,N,N,N,N,N,N,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,N,N,N,j,j,j,j,j,j,N,N,j,j,j,j,j,j,N,N,j,j,j,j,j,j,N,N,j,j,j,N,N,N,Ft,Ft,N,N,N,Ft,Ft,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N]];let I0t=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(H0t(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let n=e;const s=Z0t,o=Jfe(i.charAt(1)),a=Jfe(r.charAt(1)),l=(i.charAt(0)==="I"?"L":i.charAt(0))+o,c=(r.charAt(0)==="I"?"L":r.charAt(0))+a,u=i.charAt(2)+r.charAt(2);s.defInFormat=l,s.defOutFormat=c,s.defSwap=u;const p=xI(e,l,c,u,s);let m=!1;return r.charAt(1)==="R"?m=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(m=this.checkContextual(p)==="rtl"),this.sourceToTarget=ac,this.targetToSource=W0t(this.sourceToTarget),CF=this.targetToSource,n=i.charAt(3)===r.charAt(3)?p:r.charAt(3)==="S"?P0t(m,p):L0t(p,m,!0),this.sourceToTarget=ac,this.targetToSource=CF,this.levels=H4,n}_inputFormatSetter(e){if(!Xfe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!Xfe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=MF(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return J0t.test(e)}};function xI(t,e,i,r,n){const s=A0t(t,{inFormat:e,outFormat:i,swap:r},n);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,r=s.swap;const o=e.slice(0,1),a=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,o==="L"&&i==="VLTR"){if(a==="LTR")return n.dir=Rx,Ag(t,n);if(a==="RTL")return n.dir=SI,Ag(t,n)}if(o==="V"&&l==="V")return n.dir=a==="RTL"?SI:Rx,DV(t,n);if(o==="L"&&i==="VRTL")return a==="LTR"?(n.dir=Rx,t=Ag(t,n)):(n.dir=SI,t=Ag(t,n)),DV(t);if(e==="VLTR"&&i==="LLTR")return n.dir=Rx,Ag(t,n);if(o==="V"&&l==="L"&&a!==c)return t=DV(t),a==="RTL"?xI(t,"LLTR","VLTR",r,n):xI(t,"LRTL","VRTL",r,n);if(e==="VRTL"&&i==="LRTL")return xI(t,"LRTL","VRTL",r,n);if(o==="L"&&l==="L"){const u=n.swap;return n.swap=u.slice(0,1)+"N",a==="RTL"?(n.dir=SI,t=Ag(t,n),n.swap="N"+u.slice(1,3),n.dir=Rx,t=Ag(t,n)):(n.dir=Rx,t=Ag(t,n),n.swap="N"+u.slice(1,3),t=xI(t,"VLTR","LRTL",n.swap,n)),t}return t}function A0t(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),n=e.outFormat.slice(0,1);let s,o=e.inFormat.slice(1,4),a=e.outFormat.slice(1,4);return o.charAt(0)==="C"&&(s=MF(t),o=s==="ltr"||s==="rtl"?s.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+o),a.charAt(0)==="C"&&(s=MF(t),s==="rtl"?a="RTL":s==="ltr"?(s=O0t(t),a=s.toUpperCase()):a=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=n+a),e}function P0t(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let n=0,s=1,o=r.length;t||(n=r.length-1,s=-1,o=1);const a=k0t(r,n,s,o);let l="";for(let c=0;c<r.length;c++)F0t(a,a.length,c)>-1?(HPe(CF,c,!t,-1),ac.splice(c,1)):l+=r[c];return l}function k0t(t,e,i,r,n){let s=0;const o=[];let a=0;for(let l=e;l*i<r;l+=i)if(qPe(t[l])||bP(t[l])){if(t[l]===""&&z0t(t,l+i,i,r)){t[l]=q0t(t[l+i],s===0?h0t:d0t),l+=i,G0t(t,l,i,r),o[a]=l,a++,s=0;continue}const c=t[l];s===1?t[l]=Yfe(t,l+i,i,r)?V0t(t[l]):FV(t[l],f0t):Yfe(t,l+i,i,r)===!0?t[l]=FV(t[l],y0t):t[l]=FV(t[l],p0t),bP(c)||(s=1),B0t(c)===!0&&(s=0)}else s=0;return o}function MF(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function O0t(t){const e=t.split("");return e.reverse(),MF(e.join(""))}function L0t(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const n=(t=String(t)).split("");for(let s=0;s<t.length;s++){let o=!1;if(n[s]>=""&&n[s]<"\uFEFF"){const a=t.charCodeAt(s);n[s]>=""&&n[s]<=""?(e?(s>0&&i&&n[s-1]===" "?r=r.slice(0,-1)+"":(r+="",o=!0),r+=oT[(a-65269)/2]):(r+=oT[(a-65269)/2],r+="",s+1<t.length&&i&&n[s+1]===" "?s++:o=!0),o&&(HPe(CF,s,!0,1),ac.splice(s,0,ac[s]))):r+=g0t[a-65136]}else r+=n[s]}return r}function Ag(t,e){const i=t.split(""),r=[];return GPe(i,r,e),N0t(i,r,e),Kfe(2,i,r,e),Kfe(1,i,r,e),H4=r,i.join("")}function GPe(t,e,i){const r=t.length,n=i.dir?w0t:b0t;let s=0,o=-1;const a=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)a[c]=D0t(t[c]);for(let c=0;c<r;c++){const u=s,p=j0t(t,a,l,c,i);l[c]=p,s=n[u][p];const m=240&s;s&=15;const v=n[s][Y0t];if(e[c]=v,m>0)if(m===16){for(let w=o;w<c;w++)e[w]=1;o=-1}else o=-1;if(n[s][K0t])o===-1&&(o=c);else if(o>-1){for(let w=o;w<c;w++)e[w]=v;o=-1}a[c]===jd&&(e[c]=0),i.hiLevel|=v}i.hasUbatS&&R0t(a,e,r,i)}function R0t(t,e,i,r){for(let n=0;n<i;n++)if(t[n]===oD){e[n]=r.dir;for(let s=n-1;s>=0&&t[s]===Bo;s--)e[s]=r.dir}}function N0t(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=U0t(t[r]))}function D0t(t){const e=t.charCodeAt(0),i=M0t[e>>8];return i<Nd?i:C0t[i-Nd][255&e]}function DV(t,e){const i=t.split("");if(e){const r=[];GPe(i,r,e),H4=r}return i.reverse(),ac.reverse(),i.join("")}function F0t(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function qPe(t){for(let e=0;e<Zfe.length;e++)if(t>=Zfe[e]&&t<=v0t[e])return!0;return!1}function Yfe(t,e,i,r){for(;e*i<r&&bP(t[e]);)e+=i;return!!(e*i<r&&qPe(t[e]))}function z0t(t,e,i,r){for(;e*i<r&&bP(t[e]);)e+=i;let n=" ";if(!(e*i<r))return!1;n=t[e];for(let s=0;s<oT.length;s++)if(oT[s]===n)return!0;return!1}function Kfe(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===SI&&!r.hasUbatB)return e.reverse(),void ac.reverse();const n=e.length;let s,o,a,l,c,u=0;for(;u<n;){if(i[u]>=t){for(s=u+1;s<n&&i[s]>=t;)s++;for(o=u,a=s-1;o<a;o++,a--)l=e[o],e[o]=e[a],e[a]=l,c=ac[o],ac[o]=ac[a],ac[a]=c;u=s}u++}}function j0t(t,e,i,r,n){const s=e[r];return{UBAT_L:()=>(n.lastArabic=!1,j),UBAT_R:()=>(n.lastArabic=!1,De),UBAT_ON:()=>N,UBAT_AN:()=>On,UBAT_EN:()=>n.lastArabic?On:Ct,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,De),UBAT_WS:()=>N,UBAT_CS:()=>{let o,a;return r<1||r+1>=e.length||(o=i[r-1])!==Ct&&o!==On||(a=e[r+1])!==Ct&&a!==On?N:(n.lastArabic&&(a=On),a===o?a:N)},UBAT_ES:()=>(r>0?i[r-1]:jd)===Ct&&r+1<e.length&&e[r+1]===Ct?Ct:N,UBAT_ET:()=>{if(r>0&&i[r-1]===Ct)return Ct;if(n.lastArabic)return N;let o=r+1;const a=e.length;for(;o<a&&e[o]===Ft;)o++;return o<a&&e[o]===Ct?Ct:N},UBAT_NSM:()=>{if(n.inFormat==="VLTR"){const o=e.length;let a=r+1;for(;a<o&&e[a]===de;)a++;if(a<o){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,u=e[a];if(c&&(u===De||u===D))return De}}return r<1||e[r-1]===jd?N:i[r-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,N),UBAT_LRE:()=>(n.lastArabic=!1,N),UBAT_RLE:()=>(n.lastArabic=!1,N),UBAT_LRO:()=>(n.lastArabic=!1,N),UBAT_RLO:()=>(n.lastArabic=!1,N),UBAT_PDF:()=>(n.lastArabic=!1,N),UBAT_BN:()=>N}[$0t[s]]()}function U0t(t){let e,i=0,r=zR.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<zR[e][0])r=e-1;else{if(!(t>zR[e][0]))return zR[e][1];i=e+1}return t}function B0t(t){for(let e=0;e<Wfe.length;e++)if(Wfe[e]===t)return!0;return!1}function V0t(t){for(let e=0;e<$F.length;e++)if(t===$F[e])return m0t[e];return t}function FV(t,e){for(let i=0;i<$F.length;i++)if(t===$F[i])return e[i];return t}function bP(t){return t>=""&&t<=""}function Jfe(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function G0t(t,e,i,r){for(;e*i<r&&bP(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function q0t(t,e){for(let i=0;i<oT.length;i++)if(t===oT[i])return e[i];return t}function H0t(t,e,i){ac=[],H4=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,ac[r]=r}function W0t(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function HPe(t,e,i,r){for(let n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}let ac=[],CF=[],H4=[];const Z0t={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Y0t=5,K0t=6,Rx=0,SI=1,Xfe=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,J0t=/[\u0591-\u06ff\ufb1d-\ufefc]/,zV=new I0t;function X0t(t){if(t==null)return["",!1];if(!zV.hasBidiChar(t))return[t,!1];let e;return e=zV.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[zV.bidiTransform(t,e,"VLYSN"),!0]}let t$=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const jee="arial-unicode-ms",Qfe="woff2",eme=new Map,WPe=new Set;let Q0t=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function ebt(t){const e=rbt(t),i=ibt(t),r=eme.get(e);if(r)return r.promise;const n=new FontFace(t.family,`url('${fi.fontsUrl}/woff2/${i}.${Qfe}') format('${Qfe}')`,{style:t.style,weight:t.weight}),s=document.fonts;if(s.has(n)&&n.status==="loading")return n.loaded;const o=n.load().then((()=>(s.add(n),n)));return eme.set(e,new Q0t(n,o)),WPe.add(n),o}function PWt(t){return WPe.has(t)}function tbt(t){if(!t)return jee;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function ibt(t){const e=ZPe(t)+YPe(t);return tbt(t.family)+(e.length>0?e:"-regular")}function rbt(t){const e=ZPe(t)+YPe(t);return(t.family||jee)+(e.length>0?e:"-regular")}function ZPe(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function YPe(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}function nbt(t){return 32+t.length}const KPe=16;function kWt(t){if(!t)return 0;let e=Bee;for(const i in t)t.hasOwnProperty(i)&&(e+=Uee(t[i],!1));return e}function sbt(t){if(!t)return 0;if(typeof t[0]=="number")return JPe(t);if(Array.isArray(t))return obt(t);let e=Bee;for(const i in t)t.hasOwnProperty(i)&&(e+=Uee(t[i]));return e}function obt(t){const e=t.length;if(e===0||typeof t[0]=="number")return XPe(t,8);let i=QPe;for(let r=0;r<e;r++)i+=Uee(t[r]);return i}function Uee(t,e=!0){switch(typeof t){case"object":return e?sbt(t):Bee;case"string":return nbt(t);case"number":return KPe;case"boolean":return 4;default:return 8}}function JPe(...t){return t.reduce(((e,i)=>e+(i?Ywe(i)?i.byteLength+abt:Array.isArray(i)?XPe(i,KPe):0:0)),0)}function XPe(t,e){return QPe+t.length*e}const Bee=32,QPe=16,abt=145,xb=2;let IF=class jS{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new jS(e.lengths,e.coords)}static fromRect(e){const[i,r,n,s]=e,o=n-i,a=s-r;return new jS([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,i)=>e+i))}get usedMemory(){return 64+JPe(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let s=this.coords[xb*i],o=this.coords[xb*i+1];for(let a=1;a<n;a+=1){const l=this.coords[xb*(a+i)],c=this.coords[xb*(a+i)+1];e+=-.5*(l-s)*(c+o),s=l,o=c}i+=n}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[xb*(s+i)],this.coords[xb*(s+i)+1]);i+=n}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let n=0;for(const s of r){for(let o=1;o<s;o++)i[2*(n+o)]+=i[2*(n+o)-2],i[2*(n+o)+1]+=i[2*(n+o)-1];n+=s}return e}clone(e){if(this.lengths.length===0)return new jS([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce(((n,s)=>n+s)))*xb,r=this.coords.slice(0,i);return e?(e.set(r),new jS(this.lengths,e)):new jS(Array.from(this.lengths),Array.from(r))}},Vi=class{static fromOptimized(e,i,r=!1,n=!1,s=1){return new UY().initialize(e,i,r,n,s)}static fromJSON(e,i=!1,r=!1){const[n,s]=tme(e);return new VY().initialize(n,s,i,r,1)}static fromOptimizedCIM(e,i,r=!1,n=!1,s=1){return new ime().initialize(e,i,r,n,s)}static fromJSONCIM(e,i=!1,r=!1,n=1){const[s,o]=tme(e);return new rme().initialize(s,o,i,r,n)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,n=1){return new UY().initialize(new IF,e,i,r,n)}static createEmptyJSON(e,i=!1,r=!1){return new VY().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,n=1){return new ime().initialize(new IF,e,i,r,n)}static createEmptyJSONCIM(e,i=!1,r=!1,n=1){return new rme().initialize([],e,i,r,n)}asJSON(){const e=Lj(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const n=e,s=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-n)*(i+s),-.5*r}invertY(){this.yFactor*=-1}},UY=class BY extends Vi{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,n,s){return this.hasZ=r,this.hasM=n,this.geometryType=i,this._stride=2+Number(r)+Number(n),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=s,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new BY().initialize(new IF([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let n=0;for(let s=this._pathOffset+i;s<e;s+=i){const o=r[s-i],a=r[s-i+1],l=r[s]-o,c=r[s+1]-a;n+=Math.sqrt(l*l+c*c)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let n=0;n<this._stride;n++)if(e[i+n]!==e[r+n])return!1;return!0}clone(){return new BY().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce(((e,i)=>e+i))}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function lbt(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function tme(t){return zn(t)?[t.rings,"esriGeometryPolygon"]:To(t)?[t.paths,"esriGeometryPolyline"]:b2(t)?[[t.points],"esriGeometryMultipoint"]:Ea(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:qA(t)?[[[lbt(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let VY=class GY extends Vi{initialize(e,i,r,n,s){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=s,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let n=1;n<e;n++){const s=i[n-1],o=i[n],a=s[0],l=s[1],c=o[0]-a,u=o[1]-l;r+=Math.sqrt(c*c+u*u)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new GY().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=Lj(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new IF;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new GY().initialize(le(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map((e=>e.length)).reduce(((e,i)=>e+i))}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const jR=4,UR=1;let ime=class eke extends UY{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((o=>new Set))),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new eke().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},rme=class tke extends VY{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s)}clone(){return new tke().initialize(le(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][jR]=UR}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][jR]===UR}setControlPointAt(e){this._paths[this.pathIndex][e][jR]=UR}getControlPointAt(e){return this._paths[this.pathIndex][e][jR]===UR}};const cbt=512;var wh,Hs;(function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon"})(wh||(wh={}));let ai=class EI{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new EI(e[0],e[1])}clone(){return new EI(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,n=this.y;return this.x=r*e-n*i,this.y=r*i+n*e,this}rotateReverse(e,i){const r=this.x,n=this.y;return this.x=r*e+n*i,this.y=-r*i+n*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static add(e,i){return new EI(e.x+i.x,e.y+i.y)}static sub(e,i){return new EI(e.x-i.x,e.y-i.y)}},BR=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},ubt=class{constructor(e,i,r,n=8,s=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=s,this._tileSize=cbt*n,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new ai(e,i),this._firstPt=new ai(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),n=new ai(e,i),s=ai.distance(this._prevPt,n);let o,a,l,c,u,p,m,v;if(r)this._prevIsIn?this._lineTo(e,i,!0):(o=this._prevPt,a=n,l=this._intersect(a,o),this._start=this._dist+s*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!0));else if(this._prevIsIn)a=this._prevPt,o=n,l=this._intersect(a,o),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!1);else{const w=this._prevPt,_=n;if(w.x<=this._xmin&&_.x<=this._xmin||w.x>=this._xmax&&_.x>=this._xmax||w.y<=this._ymin&&_.y<=this._ymin||w.y>=this._ymax&&_.y>=this._ymax)this._lineTo(_.x,_.y,!1);else{const T=[];if((w.x<this._xmin&&_.x>this._xmin||w.x>this._xmin&&_.x<this._xmin)&&(c=(this._xmin-w.x)/(_.x-w.x),v=w.y+c*(_.y-w.y),v<=this._ymin?p=!1:v>=this._ymax?p=!0:T.push(new BR(c,this._xmin,v))),(w.x<this._xmax&&_.x>this._xmax||w.x>this._xmax&&_.x<this._xmax)&&(c=(this._xmax-w.x)/(_.x-w.x),v=w.y+c*(_.y-w.y),v<=this._ymin?p=!1:v>=this._ymax?p=!0:T.push(new BR(c,this._xmax,v))),(w.y<this._ymin&&_.y>this._ymin||w.y>this._ymin&&_.y<this._ymin)&&(c=(this._ymin-w.y)/(_.y-w.y),m=w.x+c*(_.x-w.x),m<=this._xmin?u=!1:m>=this._xmax?u=!0:T.push(new BR(c,m,this._ymin))),(w.y<this._ymax&&_.y>this._ymax||w.y>this._ymax&&_.y<this._ymax)&&(c=(this._ymax-w.y)/(_.y-w.y),m=w.x+c*(_.x-w.x),m<=this._xmin?u=!1:m>=this._xmax?u=!0:T.push(new BR(c,m,this._ymax))),T.length===0)u?p?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):p?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(T.length>1&&T[0].ratio>T[1].ratio)this._start=this._dist+s*T[1].ratio,this._lineTo(T[1].x,T[1].y,!0),this._lineTo(T[0].x,T[0].y,!0);else{this._start=this._dist+s*T[0].ratio;for(let $=0;$<T.length;$++)this._lineTo(T[$].x,T[$].y,!0)}this._lineTo(_.x,_.y,!1)}}this._dist+=s,this._prevIsIn=r,this._prevPt=n}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let n=r.length;for(;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===wh.Polygon&&e&&hbt.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==wh.LineString)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let n=0;n<i;n++)r.push({line:e[n],start:this._starts[n]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,n,s;if(i.x>=this._xmin&&i.x<=this._xmax)n=i.y<=this._ymin?this._ymin:this._ymax,s=(n-e.y)/(i.y-e.y),r=e.x+s*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,s=(r-e.x)/(i.x-e.x),n=e.y+s*(i.y-e.y);else{n=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const o=(r-e.x)/(i.x-e.x),a=(n-e.y)/(i.y-e.y);o<a?(s=o,n=e.y+o*(i.y-e.y)):(s=a,r=e.x+a*(i.x-e.x))}return this._r=s,new ai(r,n)}_pushLine(){this._line&&(this._type===wh.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===wh.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===wh.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==wh.Polygon?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ai(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new ai(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let n,s;if(this._type!==wh.Polygon)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(e,i)))return;this._line.push(new ai(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const o=n.x===e,a=n.y===i;if(o&&a)return;this._isH&&o||this._isV&&a?(n.x=e,n.y=i,s=this._line[this._line.length-2],s.x===e&&s.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===e,this._isV=s.y===i)):(this._isH=s.x===e,this._isV=s.y===i)):(this._line.push(new ai(e,i)),this._isH=o,this._isV=a)}else this._line.push(new ai(e,i))}},NWt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new ai(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new ai(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}};(function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"})(Hs||(Hs={}));let hbt=class Kg{static simplify(e,i,r){if(!r)return;const n=-i,s=e+i,o=-i,a=e+i,l=[],c=[],u=r.length;for(let m=0;m<u;++m){const v=r[m];if(!v||v.length<2)continue;let w,_=v[0];const T=v.length;for(let $=1;$<T;++$)w=v[$],_.x===w.x&&(_.x<=n&&(_.y>w.y?(l.push(m),l.push($),l.push(Hs.sideLeft),l.push(-1)):(c.push(m),c.push($),c.push(Hs.sideLeft),c.push(-1))),_.x>=s&&(_.y<w.y?(l.push(m),l.push($),l.push(Hs.sideRight),l.push(-1)):(c.push(m),c.push($),c.push(Hs.sideRight),c.push(-1)))),_.y===w.y&&(_.y<=o&&(_.x<w.x?(l.push(m),l.push($),l.push(Hs.sideTop),l.push(-1)):(c.push(m),c.push($),c.push(Hs.sideTop),c.push(-1))),_.y>=a&&(_.x>w.x?(l.push(m),l.push($),l.push(Hs.sideBottom),l.push(-1)):(c.push(m),c.push($),c.push(Hs.sideBottom),c.push(-1)))),_=w}if(l.length===0||c.length===0)return;Kg.fillParent(r,c,l),Kg.fillParent(r,l,c);const p=[];Kg.calcDeltas(p,c,l),Kg.calcDeltas(p,l,c),Kg.addDeltas(p,r)}static fillParent(e,i,r){const n=r.length,s=i.length;for(let o=0;o<s;o+=4){const a=i[o],l=i[o+1],c=i[o+2],u=e[a][l-1],p=e[a][l];let m=8092,v=-1;for(let w=0;w<n;w+=4){if(r[w+2]!==c)continue;const _=r[w],T=r[w+1],$=e[_][T-1],I=e[_][T];switch(c){case Hs.sideLeft:case Hs.sideRight:if(VR(u.y,$.y,I.y)&&VR(p.y,$.y,I.y)){const A=Math.abs(I.y-$.y);A<m&&(m=A,v=w)}break;case Hs.sideTop:case Hs.sideBottom:if(VR(u.x,$.x,I.x)&&VR(p.x,$.x,I.x)){const A=Math.abs(I.x-$.x);A<m&&(m=A,v=w)}}}i[o+3]=v}}static calcDeltas(e,i,r){const n=i.length;for(let s=0;s<n;s+=4){const o=[],a=Kg.calcDelta(s,i,r,o);e.push(i[s]),e.push(i[s+1]),e.push(i[s+2]),e.push(a)}}static calcDelta(e,i,r,n){const s=i[e+3];if(s===-1)return 0;const o=n.length;return o>1&&n[o-2]===s?0:(n.push(s),Kg.calcDelta(s,r,i,n)+1)}static addDeltas(e,i){const r=e.length;let n=0;for(let s=0;s<r;s+=4){const o=e[s+3];o>n&&(n=o)}for(let s=0;s<r;s+=4){const o=i[e[s]],a=e[s+1],l=n-e[s+3];switch(e[s+2]){case Hs.sideLeft:o[a-1].x-=l,o[a].x-=l,a===1&&(o[o.length-1].x-=l),a===o.length-1&&(o[0].x-=l);break;case Hs.sideRight:o[a-1].x+=l,o[a].x+=l,a===1&&(o[o.length-1].x+=l),a===o.length-1&&(o[0].x+=l);break;case Hs.sideTop:o[a-1].y-=l,o[a].y-=l,a===1&&(o[o.length-1].y-=l),a===o.length-1&&(o[0].y-=l);break;case Hs.sideBottom:o[a-1].y+=l,o[a].y+=l,a===1&&(o[o.length-1].y+=l),a===o.length-1&&(o[0].y+=l)}}}};const VR=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,dbt=512;let Lf,pbt=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function Vee(t,e,i){if(!t)return null;Lf||(Lf=new ubt(0,0,0,1));const r=i?-1:1,n=t.geometryType==="esriGeometryPolygon",s=n?wh.Polygon:wh.LineString,o=n?3:2;let a,l;for(Lf.reset(s),Lf.setPixelMargin(e+1),Lf.setExtent(dbt);t.nextPath();)if(!(t.pathSize<o)){for(t.nextPoint(),a=t.x,l=r*t.y,Lf.moveTo(a,l);t.nextPoint();)a=t.x,l=r*t.y,Lf.lineTo(a,l);n&&Lf.close()}const c=Lf.result(!1);if(c){const u=Vi.createEmptyOptimizedCIM(t.geometryType);for(const p of c){u.startPath();for(const m of p)u.pushXY(m.x,r*m.y)}return u.reset(),u}return null}let fbt=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[u,p,m,v]=c.oldColor,[w,_,T,$]=c.newColor;if(u===w&&p===_&&m===T&&v===$)continue;for(let I=0;I<a.length;I+=4)u===a[I]&&p===a[I+1]&&m===a[I+2]&&v===a[I+3]&&(a[I]=w,a[I+1]=_,a[I+2]=T,a[I+3]=$)}}const l=new ImageData(a,r,n);return o.putImageData(l,0,0),s}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n),l=new Uint8Array(a.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let p=0;p<l.length;p+=4)l[p]*=c[0],l[p+1]*=c[1],l[p+2]*=c[2],l[p+3]*=c[3];const u=new ImageData(new Uint8ClampedArray(l.buffer),r,n);return o.putImageData(u,0,0),s}};var ip;let mbt=(ip=class{static local(){return ip.instance===null&&(ip.instance=new ip),ip.instance}execute(e,i,r,n){return new ybt(e,i)}},ip.instance=null,ip),ybt=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let n=i,s=r,o=e.pathSize,a=0,l=0,c=0,u=0,p=0,m=0;this._isClosed&&++o;for(let v=1;e.nextPoint()||v<o;++v){let w,_;this._isClosed&&v===o-1?(w=i,_=r):(w=e.x,_=e.y);const T=w-n,$=_-s,I=Math.sqrt(T*T+$*$);v>1&&I>0&&c>0&&(a*T+l*$)/I/c<=this._maxCosAngle&&e.setControlPointAt(v-1),v===1&&(u=T,p=$,m=I),I>0&&(n=w,s=_,a=T,l=$,c=I)}this._isClosed&&c>0&&m>0&&(a*u+l*p)/m/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function ZM(t,e){t[4]=e}let Bk=class{constructor(e,i=!0,r=!0,n=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=n,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new t$}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},i$=class{constructor(e,i,r,n=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=n,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const wP=.03;let _y=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,n,s;for(i=e.x,r=e.y;e.nextPoint();i=r,r=s)if(n=e.x,s=e.y,n!==i||s!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,n){const s=r-e,o=n-i;return Math.sqrt(s*s+o*o)}getSegLength(e){const[[i,r],[n,s]]=e;return this.getLength(i,r,n,s)}getCoord2D(e,i,r,n,s){return[e+(r-e)*s,i+(n-i)*s]}getSegCoord2D(e,i){const[[r,n],[s,o]]=e;return this.getCoord2D(r,n,s,o,i)}getAngle(e,i,r,n,s){const o=r-e,a=n-i;return Math.atan2(a,o)}getAngleCS(e,i,r,n,s,o){e==null&&(e=[0,0]);const a=n-i,l=s-r,c=Math.sqrt(a*a+l*l);return c!==0?(e[0]=a/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[n,s],[o,a]]=i;return this.getAngleCS(e,n,s,o,a,r)}cut(e,i,r,n,s,o){return[s<=0?[e,i]:this.getCoord2D(e,i,r,n,s),o>=1?[r,n]:this.getCoord2D(e,i,r,n,o)]}getSubCurve(e,i,r){const n=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(n,e,i,r)?n:null}appendSubCurve(e,i,r,n){e.startPath(),i.seekPathStart();let s=0,o=!0;if(!i.nextPoint())return!1;let a=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(a,l,i.x,i.y);if(c!==0){if(o){if(s+c>r){const u=(r-s)/c;let p=1,m=!1;s+c>=n&&(p=(n-s)/c,m=!0);const v=this.cut(a,l,i.x,i.y,u,p);if(v&&e.pushPoints(v),m)break;o=!1}}else{if(s+c>n){const u=this.cut(a,l,i.x,i.y,0,(n-s)/c);u&&e.pushPoint(u[1]);break}e.pushXY(i.x,i.y)}s+=c,a=i.x,l=i.y}else a=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,n,s,o,a=0;for(r=e.x,n=e.y;e.nextPoint();r=s,n=o){s=e.x,o=e.y;const l=this.getLength(r,n,s,o);if(l!==0){if(a+l>i){const c=(i-a)/l;return this.getCoord2D(r,n,s,o,c)}a+=l}}return null}offset(e,i,r,n,s){if(!e||e.length<2)return null;let o=0,a=e[o++],l=o;for(;o<e.length;){const m=e[o];m[0]===a[0]&&m[1]===a[1]||(o!==l&&(e[l]=e[o]),a=e[l++]),o++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const u=[];a=c?e[l-1]:null;let p=e[0];for(let m=0;m<l;m++){const v=m===l-1?c?e[0]:null:e[m+1];if(a)if(v){const w=[v[0]-p[0],v[1]-p[1]];this.normalize(w);const _=[p[0]-a[0],p[1]-a[1]];this.normalize(_);const T=_[0]*w[1]-_[1]*w[0],$=_[0]*w[0]+_[1]*w[1];if(T===0&&$===1){p=v;continue}if(T>=0==i<=0){if($<1){const I=[w[0]-_[0],w[1]-_[1]];this.normalize(I);const A=Math.sqrt((1+$)/2);if(A>1/n){const k=-Math.abs(i)/A;u.push([p[0]-I[0]*k,p[1]-I[1]*k])}}}else switch(r){case zm.Mitered:{const I=Math.sqrt((1+$)/2);if(I>0&&1/I<n){const A=[w[0]-_[0],w[1]-_[1]];this.normalize(A);const k=Math.abs(i)/I;u.push([p[0]-A[0]*k,p[1]-A[1]*k]);break}}case zm.Bevelled:u.push([p[0]+_[1]*i,p[1]-_[0]*i]),u.push([p[0]+w[1]*i,p[1]-w[0]*i]);break;case zm.Rounded:if($<1){u.push([p[0]+_[1]*i,p[1]-_[0]*i]);const I=Math.floor(2.5*(1-$));if(I>0){const A=1/I;let k=A;for(let R=1;R<I;R++,k+=A){const F=[_[1]*(1-k)+w[1]*k,-_[0]*(1-k)-w[0]*k];this.normalize(F),u.push([p[0]+F[0]*i,p[1]+F[1]*i])}}u.push([p[0]+w[1]*i,p[1]-w[0]*i])}break;case zm.Square:default:if(T<0)u.push([p[0]+(_[1]+_[0])*i,p[1]+(_[1]-_[0])*i]),u.push([p[0]+(w[1]-w[0])*i,p[1]-(w[0]+w[1])*i]);else{const I=Math.sqrt((1+Math.abs($))/2),A=[w[0]-_[0],w[1]-_[1]];this.normalize(A);const k=i/I;u.push([p[0]-A[0]*k,p[1]-A[1]*k])}}}else{const w=[p[0]-a[0],p[1]-a[1]];this.normalize(w),u.push([p[0]+w[1]*i,p[1]-w[0]*i])}else{const w=[v[0]-p[0],v[1]-p[1]];this.normalize(w),u.push([p[0]+w[1]*i,p[1]-w[0]*i])}a=p,p=v}return u.length<(c?3:2)?null:(c&&u.push([u[0][0],u[0][1]]),u)}};const jV=1.7320508075688772,gbt=5,vbt=L2.OpenEnded;var rp;let bbt=(rp=class{static local(){return rp.instance===null&&(rp.instance=new rp),rp.instance}execute(e,i,r,n,s){return new wbt(e,i,r)}},rp.instance=null,rp),wbt=class extends i${constructor(e,i,r){super(e,!1,!0),this._curveHelper=new _y,this._width=(i.width!==void 0?i.width:gbt)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:vbt,this._offsetFlattenError=wP*r}processPath(e){const i=Vi.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case L2.OpenEnded:default:this._constructSimpleArrow(i,e,!0);break;case L2.Block:this._constructSimpleArrow(i,e,!1);break;case L2.Crossed:this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const n=i.pathLength();let s=this._width;n<2*s&&(s=n/2);const o=this._curveHelper.getSubCurve(i,0,n-s);if(!o||!o.nextPath())return;o.seekPathStart();const a=s/2;if(this._curveHelper.isEmpty(o))return;const l=Vv(o),c=this._constructOffset(l,-a);if(!c)return;const u=this._constructOffset(l,a);if(!u)return;const p=this._constructArrowBasePoint(c,-a/2);if(!p)return;const m=this._constructArrowBasePoint(u,a/2);if(!m)return;i.seekInPath(i.pathSize-1);const v=[i.x,i.y];e.pushPath(u),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(m),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(p),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(u[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let n=this._width;r<n*(1+jV+1)&&(n=r/(1+jV+1)),i.seekPathStart();const s=this._curveHelper.getSubCurve(i,0,r-n*(1+jV));if(!s)return;s.nextPath();const o=n/2;if(this._curveHelper.isEmpty(s))return;const a=Vv(s),l=this._constructOffset(a,o);if(!l)return;const c=this._constructOffset(a,-o);if(!c)return;const u=this._curveHelper.getSubCurve(i,0,r-n);if(!u||(u.nextPath(),this._curveHelper.isEmpty(u)))return;const p=Vv(u),m=this._constructOffset(p,o);if(!m)return;const v=this._constructOffset(p,-o);if(!v)return;const w=m[m.length-1],_=this._constructArrowBasePoint(m,o/2);if(!_)return;const T=v[v.length-1],$=this._constructArrowBasePoint(v,-o/2);if(!$)return;i.seekInPath(i.pathSize-1);const I=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(T),e.nextPoint(),e.setControlPoint(),e.pushPoint($),e.nextPoint(),e.setControlPoint(),e.pushPoint(I),e.nextPoint(),e.setControlPoint(),e.pushPoint(_),e.nextPoint(),e.setControlPoint(),e.pushPoint(w),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,zm.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],n=e[e.length-1],s=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(s),[n[0]+s[1]*i,n[1]-s[0]*i]}};var np;let _bt=(np=class{static local(){return np.instance===null&&(np.instance=new np),np.instance}execute(e,i,r,n,s,o,a){return new xbt(e,i,r,n,s,o,a)}},np.instance=null,np),xbt=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new _y,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=o*r,this._offsetFlattenError=wP*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const s=Vi.createEmptyOptimizedCIM(e.geometryType),o=Lj(e)[0],a=this._curveHelper.offset(o,this._size,zm.Rounded,4,this._offsetFlattenError);if(a)return s.pushPath(a),s}else if(this._size<0){const s=e.asJSON();if(Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._size>0)return Vi.fromJSONCIM({xmin:s.xmin-this._size,xmax:s.xmax+this._size,ymin:s.ymin-this._size,ymax:s.ymax+this._size})}}const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?Vee(e,this._maxInflateSize,!0):e;if(!r)continue;const n=i.buffer(tt.WebMercator,r.asJSON(),this._size,1);return n?Vi.fromJSONCIM(n):null}return null}};var sp;let Sbt=(sp=class{static local(){return sp.instance===null&&(sp.instance=new sp),sp.instance}execute(e,i,r,n,s){return new Ebt(e,i,r)}},sp.instance=null,sp),Ebt=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??Wt.FullGeometry,this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(Lj(e));if(i!=null&&i.length)return Vi.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,n){return[e[0]*i+r[0]*n,e[1]*i+r[1]*n]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const n=e[0]*i-e[1]*r,s=e[0]*r+e[1]*i;e[0]=n,e[1]=s}_makeCtrlPt(e){const i=[e[0],e[1]];return ZM(i,1),i}_addAngledTicks(e,i,r,n){const s=this._sub(r,i);this._normalize(s);const o=this._crossProduct(s,this._sub(n,i));let a;a=o>0?this._rightPerp(s):this._leftPerp(s);const l=Math.abs(o)/2,c=[];c.push([i[0]+(a[0]-s[0])*l,i[1]+(a[1]-s[1])*l]),c.push(i),c.push(r),c.push([r[0]+(a[0]+s[0])*l,r[1]+(a[1]+s[1])*l]),e.push(c)}_addBezier2(e,i,r,n,s){if(s--===0)return void e.push(n);const o=this._mid(i,r),a=this._mid(r,n),l=this._mid(o,a);this._addBezier2(e,i,o,l,s),this._addBezier2(e,l,a,n,s)}_addBezier3(e,i,r,n,s,o){if(o--===0)return void e.push(s);const a=this._mid(i,r),l=this._mid(r,n),c=this._mid(n,s),u=this._mid(a,l),p=this._mid(l,c),m=this._mid(u,p);this._addBezier3(e,i,a,u,m,o),this._addBezier3(e,m,p,c,s,o)}_add90DegArc(e,i,r,n,s){const o=s??this._crossProduct(this._sub(r,i),this._sub(n,i))>0,a=this._mid(i,r),l=this._sub(a,i);o?this._leftPerpendicular(l):this._rightPerpendicular(l),a[0]+=l[0],a[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,a,.66667),this._mix(r,.33333,a,.66667),r,4)}_addArrow(e,i,r){const n=i[0],s=i[1],o=i[i.length-1],a=this._sub(n,s),l=this._norm(a);this._normalize(a);const c=Math.abs(this._crossProduct(a,this._sub(o,s)));let u=this._dotProduct(a,this._sub(o,s));u<.05*l?u=.05*l:u>.95*l&&(u=.95*l);const p=.5*c,m=this._leftPerp(a),v=[s[0]+a[0]*u,s[1]+a[1]*u],w=i.length-1,_=[];_.push(r?[-m[0],-m[1]]:m);let T=[-a[0],-a[1]];for(let $=1;$<w-1;$++){const I=this._sub(i[$+1],i[$]);this._normalize(I);const A=this._dotProduct(I,T),k=this._crossProduct(I,T),R=Math.sqrt((1+A)/2),F=this._sub(I,T);this._normalize(F),F[0]/=R,F[1]/=R,_.push(k<0?[-F[0],-F[1]]:F),T=I}_.push(this._rightPerp(T));for(let $=_.length-1;$>0;$--)e.push([i[$][0]+_[$][0]*p,i[$][1]+_[$][1]*p]);e.push([v[0]+_[0][0]*p,v[1]+_[0][1]*p]),e.push([v[0]+_[0][0]*c,v[1]+_[0][1]*c]),e.push(n),e.push([v[0]-_[0][0]*c,v[1]-_[0][1]*c]),e.push([v[0]-_[0][0]*p,v[1]-_[0][1]*p]);for(let $=1;$<_.length;$++)e.push([i[$][0]-_[$][0]*p,i[$][1]-_[$][1]*p])}_addDash(e,i,r){const n=this._norm(r)/7;this._normalize(r);let s=[];for(let o=0;o<=7;o++)s.push([i[0]+r[0]*o*n,i[1]+r[1]*o*n]),1&o&&(e.push(s),s=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,n){if(e.length>=3)return e[2];const s=this._mix(e[0],1-r,i,r),o=this._sub(i,e[0]);return this._normalize(o),this._rightPerpendicular(o),[s[0]+o[0]*n*this._defaultSize,s[1]+o[1]*n*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),n=this._sub(i,r);this._normalize(n);const s=this._rightPerp(n);return[i,r,[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let n;if(e.length>=3)n=e[e.length-1];else{const s=this._sub(i,r);this._normalize(s);const o=this._rightPerp(s);n=[i[0]+(o[0]-s[0])*this._defaultSize,i[1]+(o[1]-s[1])*this._defaultSize]}return[r,n]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const n=r.length>1&&mVe(r)<this._defaultSize;if(!r||r.length===0||n)continue;const s=r.length;let o=r[0];switch(this._rule){case Wt.PerpendicularFromFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=[];c.push(l),c.push(this._mid(o,a)),i.push(c);break}case Wt.ReversedFirstSegment:{const a=this._cp2(r,0,-1);i.push([a,o]);break}case Wt.PerpendicularToSecondSegment:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=[];c.push(this._mid(a,l)),c.push(o),i.push(c);break}case Wt.SecondSegmentWithTicks:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);let u;u=this._crossProduct(c,this._sub(o,a))>0?this._rightPerp(c):this._leftPerp(c);const p=[];p.push([a[0]+(u[0]-c[0])/3,a[1]+(u[1]-c[1])/3]),p.push(a),p.push(l),p.push([l[0]+(u[0]+c[0])/3,l[1]+(u[1]+c[1])/3]),i.push(p);break}case Wt.DoublePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),u=this._sub(c,l);this._normalize(u);const p=this._crossProduct(u,this._sub(o,l));this._leftPerpendicular(u);const m=[];m.push(o),m.push([l[0]+u[0]*p,l[1]+u[1]*p]),i.push(m);const v=[];v.push([l[0]-u[0]*p,l[1]-u[1]*p]),v.push(a),i.push(v);break}case Wt.OppositeToFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),u=this._sub(c,l);this._normalize(u);const p=this._crossProduct(u,this._sub(o,l));this._leftPerpendicular(u);const m=[];m.push([l[0]+u[0]*p,l[1]+u[1]*p]),m.push([l[0]-u[0]*p,l[1]-u[1]*p]),i.push(m);break}case Wt.TriplePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a),u=this._sub(c,l);this._normalize(u);const p=this._crossProduct(u,this._sub(o,l));this._leftPerpendicular(u);const m=[];m.push([l[0]+u[0]*p*.8,l[1]+u[1]*p*.8]),m.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(m),i.push([l,c]);const v=[];v.push([l[0]-u[0]*p*.8,l[1]-u[1]*p*.8]),v.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(v);break}case Wt.HalfCircleFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a);let u=this._sub(a,o);const p=Math.cos(Math.PI/18),m=Math.sin(Math.PI/18),v=Math.sqrt((1+p)/2),w=Math.sqrt((1-p)/2),_=[];let T;this._crossProduct(u,this._sub(l,o))>0?(_.push(o),u=this._sub(o,c),T=a):(_.push(a),u=this._sub(a,c),T=o),this._rotateDirect(u,v,w),u[0]/=v,u[1]/=v;for(let $=1;$<=18;$++)_.push(this._add(c,u)),this._rotateDirect(u,p,m);_.push(T),i.push(_);break}case Wt.HalfCircleSecondSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,1,-1);let c=this._sub(o,a);this._normalize(c);const u=this._crossProduct(c,this._sub(l,a))/2;this._leftPerpendicular(c);const p=[a[0]+c[0]*u,a[1]+c[1]*u];c=this._sub(a,p);const m=Math.cos(Math.PI/18);let v=Math.sin(Math.PI/18);u>0&&(v=-v);const w=[a];for(let _=1;_<=18;_++)this._rotateDirect(c,m,v),w.push(this._add(p,c));i.push(w);break}case Wt.HalfCircleExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-1);let c;if(s>=4)c=r[3];else{const _=this._sub(o,a);c=this._add(l,_)}const u=this._dist(a,l)/2/.75,p=this._sub(a,o);this._normalize(p,u);const m=this._sub(l,c);this._normalize(m,u);const v=[c,l];i.push(v);const w=[this._clone(l)];this._addBezier3(w,l,this._add(l,m),this._add(a,p),a,4),w.push(o),i.push(w);break}case Wt.OpenCircle:{const a=this._cp2(r,-2,0),l=this._sub(a,o),c=Math.cos(Math.PI/18),u=-Math.sin(Math.PI/18),p=[a];for(let m=1;m<=33;m++)this._rotateDirect(l,c,u),p.push(this._add(o,l));i.push(p);break}case Wt.CoverageEdgesWithTicks:{const a=this._cp2(r,0,-1);let l,c;if(s>=3)l=r[2];else{const v=this._sub(a,o),w=this._leftPerp(v);l=[o[0]+w[0]-.25*v[0],o[1]+w[1]-.25*v[1]]}if(s>=4)c=r[3];else{const v=this._mid(o,a),w=this._sub(o,a);this._normalize(w),this._leftPerpendicular(w);const _=this._crossProduct(w,this._sub(l,v));this._rightPerpendicular(w),c=[l[0]+w[0]*_*2,l[1]+w[1]*_*2]}const u=this._sub(a,o);let p,m;p=this._crossProduct(u,this._sub(l,o))>0?this._rightPerp(u):this._leftPerp(u),m=[],m.push(l),m.push(o),m.push([o[0]+(p[0]-u[0])/3,o[1]+(p[1]-u[1])/3]),i.push(m),p=this._crossProduct(u,this._sub(c,a))>0?this._rightPerp(u):this._leftPerp(u),m=[],m.push([a[0]+(p[0]+u[0])/3,a[1]+(p[1]+u[1])/3]),m.push(a),m.push(c),i.push(m);break}case Wt.GapExtentWithDoubleTicks:{const a=this._cp2(r,0,2),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const u=this._sub(a,o);c=this._add(l,u)}this._addAngledTicks(i,o,a,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(o,a));break}case Wt.GapExtentMidline:{const a=this._cp2(r,2,0),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const p=this._sub(a,o);c=this._add(l,p)}const u=[];u.push(this._mid(o,l)),u.push(this._mid(a,c)),i.push(u);break}case Wt.Chevron:{const a=this._cp2(r,-1,-1);let l;if(s>=3)l=r[2];else{const c=this._sub(a,o);this._leftPerpendicular(c),l=this._add(o,c)}i.push([a,this._makeCtrlPt(o),l]);break}case Wt.PerpendicularWithArc:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,.5,-1),c=this._sub(a,o),u=this._norm(c);c[0]/=u,c[1]/=u;const p=this._crossProduct(c,this._sub(l,o));let m=this._dotProduct(c,this._sub(l,o));m<.05*u?m=.05*u:m>.95*u&&(m=.95*u);const v=[o[0]+c[0]*m,o[1]+c[1]*m];let w=this._leftPerp(c),_=[];if(_.push([v[0]-w[0]*p,v[1]-w[1]*p]),_.push([v[0]+w[0]*p,v[1]+w[1]*p]),i.push(_),s>=4){const A=r[3];let k=this._dotProduct(c,this._sub(A,o));k<.1*u?k=.1*u:k>.9*u&&(k=.9*u);const R=[o[0]+c[0]*k,o[1]+c[1]*k],F=this._crossProduct(c,this._sub(A,o)),B=[];B.push([R[0]-w[0]*F,R[1]-w[1]*F]),B.push([R[0]+w[0]*F,R[1]+w[1]*F]),i.push(B)}const T=[a[0]+w[0]*p,a[1]+w[1]*p];w=this._sub(a,T);const $=Math.cos(Math.PI/18);let I=Math.sin(Math.PI/18);p<0&&(I=-I),_=[o,a];for(let A=1;A<=9;A++)this._rotateDirect(w,$,I),_.push(this._add(T,w));i.push(_);break}case Wt.ClosedHalfCircle:{const a=this._cp2(r,2,0),l=this._mid(o,a),c=this._sub(a,l),u=Math.cos(Math.PI/18),p=Math.sin(Math.PI/18),m=[o,a];for(let v=1;v<=18;v++)this._rotateDirect(c,u,p),m.push(this._add(l,c));i.push(m);break}case Wt.TripleParallelExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-2),c=this._mid(o,a),u=this._sub(l,a);this._normalize(u);const p=Math.abs(this._crossProduct(u,this._sub(c,a)))/2,m=this._dist(a,l),v=[a,o];v.push([o[0]+u[0]*m*.5,o[1]+u[1]*m*.5]),i.push(v);const w=[];w.push([c[0]-u[0]*p,c[1]-u[1]*p]),w.push([c[0]+u[0]*m*.375,c[1]+u[1]*m*.375]),ZM(w[w.length-1],1),w.push([c[0]+u[0]*m*.75,c[1]+u[1]*m*.75]),i.push(w);const _=[a,l];i.push(_);break}case Wt.ParallelWithTicks:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(l,a);this._normalize(c);const u=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),this._addAngledTicks(i,o,a,l),this._addAngledTicks(i,this._mix(o,1,c,u),this._mix(a,1,c,u),this._mid(o,a));break}case Wt.Parallel:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const u=this._leftPerp(c),p=this._crossProduct(c,this._sub(l,o));let m=[o,a];i.push(m),m=[],m.push([o[0]+u[0]*p,o[1]+u[1]*p]),m.push([a[0]+u[0]*p,a[1]+u[1]*p]),i.push(m);break}case Wt.PerpendicularToFirstSegment:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._mid(o,a),u=this._sub(a,o);this._normalize(u);const p=this._crossProduct(u,this._sub(l,o));this._leftPerpendicular(u);const m=[];m.push([c[0]-u[0]*p*.25,c[1]-u[1]*p*.25]),m.push([c[0]+u[0]*p*1.25,c[1]+u[1]*p*1.25]),i.push(m);break}case Wt.ParallelOffset:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const u=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const p=[];p.push([o[0]-c[0]*u,o[1]-c[1]*u]),p.push([a[0]-c[0]*u,a[1]-c[1]*u]),i.push(p);const m=[];m.push([o[0]+c[0]*u,o[1]+c[1]*u]),m.push([a[0]+c[0]*u,a[1]+c[1]*u]),i.push(m);break}case Wt.OffsetOpposite:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const u=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const p=[];p.push([o[0]-c[0]*u,o[1]-c[1]*u]),p.push([a[0]-c[0]*u,a[1]-c[1]*u]),i.push(p);break}case Wt.OffsetSame:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const u=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const p=[];p.push([o[0]+c[0]*u,o[1]+c[1]*u]),p.push([a[0]+c[0]*u,a[1]+c[1]*u]),i.push(p);break}case Wt.CircleWithArc:{let a=this._cp2(r,3,0);const l=this._cp3(r,a,.5,-1);let c,u;if(s>=4)c=r[3],u=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;else{c=a,u=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;const _=24*this._geomUnitsPerPoint,T=this._sub(c,o);this._normalize(T,_);const $=Math.sqrt(2)/2;this._rotateDirect(T,$,u?$:-$),a=this._add(o,T)}const p=this._sub(a,o),m=Math.cos(Math.PI/18),v=Math.sin(Math.PI/18),w=[a];for(let _=1;_<=36;_++)this._rotateDirect(p,m,v),w.push(this._add(o,p));this._add90DegArc(w,a,c,l,u),ZM(w[w.length-8],1),i.push(w);break}case Wt.DoubleJog:{let a,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(s>=4)a=r[3];else{const I=o;o=l,a=c;const A=this._dist(o,I),k=this._dist(a,I);let R=30*this._geomUnitsPerPoint;.5*A<R&&(R=.5*A),.5*k<R&&(R=.5*k),l=this._mix(o,R/A,I,(A-R)/A),c=this._mix(a,R/k,I,(k-R)/k)}const u=this._mid(o,l),p=this._mid(a,c),m=this._dist(o,l),v=this._dist(c,a);let w=Math.min(m,v)/8;w=Math.min(w,24*this._geomUnitsPerPoint);const _=Math.cos(Math.PI/4);let T=this._sub(o,l);this._normalize(T,w),this._crossProduct(T,this._sub(a,l))>0?this._rotateDirect(T,_,-_):this._rotateDirect(T,_,_);let $=[];$.push(l),$.push(this._add(u,T)),$.push(this._sub(u,T)),$.push(o),i.push($),T=this._sub(a,c),this._normalize(T,w),this._crossProduct(T,this._sub(o,c))<0?this._rotateDirect(T,_,_):this._rotateDirect(T,_,-_),$=[],$.push(c),$.push(this._add(p,T)),$.push(this._sub(p,T)),$.push(a),i.push($);break}case Wt.PerpendicularOffset:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const u=[c[0]/8,c[1]/8],p=this._sub(this._mid(a,l),u);i.push([p,o]);break}case Wt.LineExcludingLastSegment:{const a=this._arrowPath(r),l=[];let c=a.length-2;for(;c--;)l.push(a[c]);i.push(l);break}case Wt.MultivertexArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!1),i.push(l);break}case Wt.CrossedArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!0),i.push(l);break}case Wt.ChevronArrow:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,u=this._sub(o,a),p=this._norm(u);this._normalize(u);const m=this._crossProduct(u,this._sub(l,a));let v=this._dotProduct(u,this._sub(l,a));v<.05*p?v=.05*p:v>.95*p-c&&(v=.95*p-c);const w=[a[0]+u[0]*v,a[1]+u[1]*v],_=this._leftPerp(u),T=[];T.push([w[0]+_[0]*m+u[0]*c,w[1]+_[1]*m+u[1]*c]),T.push(o),T.push([w[0]-_[0]*m+u[0]*c,w[1]-_[1]*m+u[1]*c]),i.push(T);break}case Wt.ChevronArrowOffset:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),u=this._norm(c);this._normalize(c);const p=this._crossProduct(c,this._sub(l,a));let m=this._dotProduct(c,this._sub(l,a));m<.05*u?m=.05*u:m>.95*u&&(m=.95*u);const v=[a[0]+c[0]*m,a[1]+c[1]*m];this._leftPerpendicular(c);const w=[];w.push([v[0]+c[0]*p*.5,v[1]+c[1]*p*.5]),w.push(this._mid(v,o)),w.push([v[0]-c[0]*p*.5,v[1]-c[1]*p*.5]),i.push(w);break}case Wt.PartialFirstSegment:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),u=this._norm(c);this._normalize(c);let p=this._dotProduct(c,this._sub(l,a));p<.05*u?p=.05*u:p>.95*u&&(p=.95*u);const m=[a[0]+c[0]*p,a[1]+c[1]*p];i.push([a,m]);break}case Wt.Arch:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=this._sub(o,a),u=this._mix(l,1,c,.55),p=this._mix(l,1,c,-.55),m=[o];this._addBezier2(m,o,u,l,4),this._addBezier2(m,l,p,a,4),i.push(m);break}case Wt.CurvedParallelTicks:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const u=[c[0]/8,c[1]/8],p=this._sub(this._mid(a,l),u),m=this._sub(this._mix(a,.75,l,.25),u),v=this._sub(this._mix(a,.25,l,.75),u),w=[a];this._addBezier2(w,a,m,p,3),this._addBezier2(w,p,v,l,3),i.push(w);for(let _=0;_<8;_++){const T=w[2*_+1],$=[this._clone(T)];$.push(this._add(T,[c[0]/4,c[1]/4])),i.push($)}break}case Wt.Arc90Degrees:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=[a];this._add90DegArc(c,a,o,l),i.push(c);break}case Wt.TipWithPerpendicularAndTicks:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,u=this._sub(o,a),p=this._norm(u);this._normalize(u);let m=this._crossProduct(u,this._sub(l,a)),v=this._dotProduct(u,this._sub(l,a));v<.05*p?v=.05*p:v>.95*p-c&&(v=.95*p-c);const w=this._leftPerp(u),_=[o[0]-u[0]*c,o[1]-u[1]*c],T=.5*Math.max(p-v-c,c);m=Math.abs(m);const $=[];$.push([_[0]+w[0]*(m+T)-u[0]*T,_[1]+w[1]*(m+T)-u[1]*T]),$.push([_[0]+w[0]*m,_[1]+w[1]*m]),$.push([_[0]-w[0]*m,_[1]-w[1]*m]),$.push([_[0]-w[0]*(m+T)-u[0]*T,_[1]-w[1]*(m+T)-u[1]*T]),i.push($),i.push([_,o]);break}case Wt.ConcentricCircles:{const a=this._cp2(r,1,0),l=this._cp3(r,a,2,0),c=Math.cos(Math.PI/18),u=Math.sin(Math.PI/18);let p=this._dist(a,o),m=[p,0],v=[];for(let w=0;w<=36;w++)v.push(this._add(o,m)),this._rotateDirect(m,c,u);if(i.push(v),s>=4){v=[];const w=r[3];p=this._dist(w,o),m=[p,0];for(let _=0;_<=36;_++)v.push(this._add(o,m)),_===0&&(v.push(this._add(o,m)),ZM(v[1],1)),this._rotateDirect(m,c,u);i.push(v)}v=[],p=this._dist(l,o),m=[p,0];for(let w=0;w<=36;w++)v.push(this._add(o,m)),this._rotateDirect(m,c,u);i.push(v);break}case Wt.DoubleJogArrow:{o=this._arrowPath(r)[0];const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),u=this._norm(c);this._normalize(c);const p=Math.abs(this._crossProduct(c,this._sub(l,o)));let m=Math.abs(this._dotProduct(c,this._sub(l,o)));m<.05*u?m=.05*u:m>.95*u&&(m=.95*u);const v=Math.max(p,m),w=this._leftPerp(c);let _=[];const T=[o[0]-c[0]*m*.5+w[0]*p*.5,o[1]-c[1]*m*.5+w[1]*p*.5];_.push([T[0],T[1]]),T[0]+=c[0]*v*.5+w[0]*v*.4,T[1]+=c[1]*v*.5+w[1]*v*.4,_.push([T[0],T[1]]),T[0]-=w[0]*v*.25,T[1]-=w[1]*v*.25,_.push([T[0],T[1]]),T[0]+=c[0]*v*.5+w[0]*v*.4,T[1]+=c[1]*v*.5+w[1]*v*.4,_.push([T[0],T[1]]),i.push(_),_=[],T[0]=o[0]-c[0]*m*.5-w[0]*p*.5,T[1]=o[1]-c[1]*m*.5-w[1]*p*.5,_.push([T[0],T[1]]),T[0]+=c[0]*v*.5-w[0]*v*.4,T[1]+=c[1]*v*.5-w[1]*v*.4,_.push([T[0],T[1]]),T[0]+=w[0]*v*.25,T[1]+=w[1]*v*.25,_.push([T[0],T[1]]),T[0]+=c[0]*v*.5-w[0]*v*.4,T[1]+=c[1]*v*.5-w[1]*v*.4,_.push([T[0],T[1]]),i.push(_);break}case Wt.LinkedChevrons:{const a=this._cp2(r,-5,0),l=this._cp3(r,a,-.2,1),c=this._sub(o,a);this._normalize(c);const u=this._leftPerp(c),p=Math.abs(this._crossProduct(c,this._sub(l,a)));i.push([a,o]);const m=[];m.push([o[0]-c[0]*p+u[0]*p,o[1]-c[1]*p+u[1]*p]),m.push(o),m.push([o[0]-c[0]*p-u[0]*p,o[1]-c[1]*p-u[1]*p]),i.push(m),this._addDash(i,a,[-c[0]*p+u[0]*p,-c[1]*p+u[1]*p]),this._addDash(i,a,[-c[0]*p-u[0]*p,-c[1]*p-u[1]*p]);break}case Wt.SegmentThenHalfCircle:{const a=this._cp2(r,2,0),l=this._cp3(r,a,1.5,0);let c;c=s>=4?r[3]:this._cp3(r,a,1.25,-.5);const u=this._sub(a,o);this._normalize(u);const p=.5*this._dist(a,l),m=this._crossProduct(u,this._sub(c,o))>0,v=Math.cos(Math.PI/18);let w=Math.sin(Math.PI/18);m&&(w=-w);const _=[o,a];u[0]*=p,u[1]*=p;const T=this._add(a,u);u[0]=-u[0],u[1]=-u[1];for(let $=1;$<=18;$++)this._rotateDirect(u,v,w),_.push(this._add(T,u));i.push(_);break}case Wt.LineWithStraightTicks:{const a=this._cp2(r,-2,1),l=this._cp3(r,a,-1,-.5),c=this._sub(l,a);this._normalize(c);const u=this._dotProduct(c,this._sub(a,o)),p=this._dotProduct(c,this._sub(l,o));let m=[o];m.push([o[0]+c[0]*u,o[1]+c[1]*u]),m.push(a),i.push(m),m=[o],m.push([o[0]+c[0]*p,o[1]+c[1]*p]),m.push(l),i.push(m);break}case Wt.DoubleCurve:{const a=this._cp2(r,-5,-1),l=this._cp3(r,a,2,0),c=Math.atan2(1,5),u=Math.cos(c),p=Math.sin(c),m=this._sub(a,o),v=this._dist(o,a);this._normalize(m),this._rotateDirect(m,u,-p);const w=[o];w.push([o[0]+m[0]*v*.5,o[1]+m[1]*v*.5]),ZM(w[1],1),w.push([o[0]+m[0]*v*.8,o[1]+m[1]*v*.8]),this._addBezier2(w,w[2],[o[0]+m[0]*v,o[1]+m[1]*v],a,3);const _=this._sub(l,a),T=this._dist(a,l);this._normalize(_),this._rotateDirect(_,u,-p),this._addBezier2(w,a,[l[0]-_[0]*T,l[1]-_[1]*T],[l[0]-_[0]*T*.8,l[1]-_[1]*T*.8],3),w.push(l),i.push(w);break}case Wt.ParallelWithTicksByWidth:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._sub(a,o);this._normalize(c);const u=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),u>0?(this._addAngledTicks(i,o,[o[0]+c[0]*u,o[1]+c[1]*u],a),this._addAngledTicks(i,a,[a[0]+c[0]*u,a[1]+c[1]*u],o)):(this._addAngledTicks(i,[o[0]+c[0]*u,o[1]+c[1]*u],o,a),this._addAngledTicks(i,[a[0]+c[0]*u,a[1]+c[1]*u],o,a));break}case Wt.EnclosingRoundedRectangle:{const a=this._cp2(r,3,-2),l=[Math.min(o[0],a[0]),Math.max(o[1],a[1])],c=[Math.max(o[0],a[0]),Math.min(o[1],a[1])],u=c[0]-l[0],p=l[1]-c[1],m=Math.min(u,p)/10,v=[];v.push([l[0]+m+.75*(u-2*m),l[1]]),v.push([c[0]-m,l[1]]),this._add90DegArc(v,[c[0]-m,l[1]],[c[0],l[1]-m],[c[0],l[1]]),v.push([c[0],c[1]+m]),this._add90DegArc(v,[c[0],c[1]+m],[c[0]-m,c[1]],c),v.push([l[0]+m,c[1]]),this._add90DegArc(v,[l[0]+m,c[1]],[l[0],c[1]+m],[l[0],c[1]]),v.push([l[0],l[1]-m]),this._add90DegArc(v,[l[0],l[1]-m],[l[0]+m,l[1]],l),v.push([l[0]+m+.75*(u-2*m),l[1]]);break}case Wt.FullGeometry:default:i.push(r)}}return i}};var op;let Tbt=(op=class{static local(){return op.instance===null&&(op.instance=new op),op.instance}execute(e,i,r,n,s){return new $bt(e,i,r)}},op.instance=null,op),$bt=class extends i${constructor(e,i,r){super(e,!0,!0),this._curveHelper=new _y,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:n}=this,s=e.pathLength(),o=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||n!==0)if(i+r+n>=s)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(o,e,0,i),this._curveHelper.appendSubCurve(o,e,.5*(s-n),.5*(s+n)),this._curveHelper.appendSubCurve(o,e,s-r,r)}else if(i===0&&r===0&&n===0)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else i+r+n<s&&(n===0?this._curveHelper.appendSubCurve(o,e,i,s-r):(this._curveHelper.appendSubCurve(o,e,i,.5*(s-n)),this._curveHelper.appendSubCurve(o,e,.5*(s+n),s-r)));return o.totalSize===0?null:o}};const nme=1e-7;let W4=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let n=0;n<e.length;n++){let s=Math.abs(e[n]);r&&s<nme&&(s=nme),this._values.push(s),this._length+=s}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},bm=class{constructor(){this.pt=null,this.ca=0,this.sa=0}};var bv;(function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"})(bv||(bv={}));let GR=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},Z4=class extends _y{constructor(e=0,i=!1){super(e,i),this._tempPos=new GR,this._tempPt=[0,0],this._tolerance=wP,this._currentPosition=new GR}updateTolerance(e){this._tolerance=wP*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=bv.FAIL){const r=new GR;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=bv.FAIL){const n=this._tempPos;if(!this._nextPosition(e,n,null,r))return!1;n.copyTo(this._currentPosition),i.pt=this._getPoint(n);const[s,o]=this._getAngleCS(this._tempPt,n);return i.ca=s,i.sa=o,!0}nextCurve(e){if(e===0)return null;const i=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new GR;return this._nextPosition(e,r,i,bv.END)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,n){if(this._currentPosition.isPathEnd)return!1;let s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(s===0){const a=i.segment[0];r.pushXY(a[0],a[1])}else r.pushPoint(this.getSegCoord2D(i.segment,s));const o=i.segment[1];r.pushXY(o[0],o[1])}if(s=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==bv.FAIL&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,n===bv.END?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(s===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,s)));const o=i.abscissa/i.segmentLength;o===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,o))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let o=Math.round((this._partLength-(n+s))/this._patternLength);o<=0&&(o=n+s>0?0:1),this._partLengthRatio=this._partLength/(n+s+o*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var ap;let Mbt=(ap=class{static local(){return ap.instance===null&&(ap.instance=new ap),ap.instance}execute(e,i,r,n,s){return new Cbt(e,i,r)}},ap.instance=null,ap),Cbt=class extends i${constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new Z4,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let n=qIe(i).dashTemplate;n==null&&(n=[]),n.length%2&&(n=[...n,...n]),this._pattern=new W4,this._pattern.init(n,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const n=Vv(e);return Vi.fromJSONCIM({paths:[n]})}if(!this.iteratePath){let n=!0;switch(this._endings){case _o.HalfPattern:case _o.HalfGap:default:this._pattern.extPtGap=0;break;case _o.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case _o.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case _o.NoConstraint:this.isClosed||(n=!1);break;case _o.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=e.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const o=Vv(e);return Vi.fromJSONCIM({paths:[o]})}if(!this._walker.init(e,this._pattern,n)){const o=Vv(e);return Vi.fromJSONCIM({paths:[o]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let n;switch(this._endings){case _o.HalfPattern:default:n=.5*this._pattern.firstValue();break;case _o.HalfGap:n=.5*-this._pattern.lastValue();break;case _o.FullGap:n=-this._pattern.lastValue();break;case _o.FullPattern:n=0;break;case _o.NoConstraint:case _o.Custom:n=-this._customDashPos}let s=n/this._pattern.length();s-=Math.floor(s),n=s*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let o=!1;for(;n>=i;)n-=i,i=this._pattern.nextValue(),o=!o;i-=n,o?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r==null||r.reset(),r}};var lp;let Ibt=(lp=class{static local(){return lp.instance===null&&(lp.instance=new lp),lp.instance}execute(e,i,r,n,s,o,a){return new Abt(e,i,r,n,s,o,a)}},lp.instance=null,lp),Abt=class{constructor(e,i,r,n,s,o,a){switch(this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._maxInflateSize=o*r,this._width=(i.width!==void 0?i.width:2)*r,i.method){case Iw.Mitered:case Iw.Bevelled:case Iw.Rounded:case Iw.TrueBuffer:case Iw.Square:}this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Vi.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?Vee(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.buffer(tt.WebMercator,r.asJSON(),-this._width,1);if(n){for(const s of n.rings)if(s){r.startPath();for(const o of s.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var cp;let Pbt=(cp=class{static local(){return cp.instance===null&&(cp.instance=new cp),cp.instance}execute(e,i,r,n,s){return new kbt(e,i,r,s)}},cp.instance=null,cp),kbt=class{constructor(e,i,r,n){this._inputGeometries=e,this._medhod=i.method,this._geometryEngine=n}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case rF.RectangularBox:return Obt(e);case rF.ConvexHull:return this._constructConvexHull(e);default:return Lbt(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=this._geometryEngine;if(i==null)return null;const r=i.convexHull(tt.WebMercator,e.asJSON());return r?Vi.fromJSONCIM(r):null}case"esriGeometryEnvelope":return e;default:return null}}};function Obt(t){const e=vk(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Vi.fromJSONCIM(i)}function Lbt(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)Rbt(t,e);return Vi.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function Rbt(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,n=[[i,r]];for(e.push(n);t.nextPoint();)n.push([t.x,t.y]);n.push([i,r])}var up;let Nbt=(up=class{static local(){return up.instance===null&&(up.instance=new up),up.instance}execute(e,i,r,n,s){return new Dbt(e,i,r)}},up.instance=null,up),Dbt=class extends i${constructor(e,i,r){super(e,!1,!0),this._curveHelper=new _y,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,n=e.y;e.seekInPath(e.pathSize-1);const s=e.x,o=e.y,a=[s-r,o-n];this._curveHelper.normalize(a);const l=r+(s-r)*this._position/100,c=n+(o-n)*this._position/100,u=Math.cos((90-this._angle)/180*Math.PI);let p=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(p=-p),this._mirror=!this._mirror;const m=[l-this._length/2*u,c-this._length/2*p],v=[l+this._length/2*u,c+this._length/2*p];return i.pushPath([[r,n],m,v,[s,o]]),i}};var hp;let Fbt=(hp=class{static local(){return hp.instance===null&&(hp.instance=new hp),hp.instance}execute(e,i,r,n,s){return new zbt(e,i,r)}},hp.instance=null,hp),zbt=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const jbt=10;var dp;let Ubt=(dp=class{static local(){return dp.instance===null&&(dp.instance=new dp),dp.instance}execute(e,i,r,n,s,o,a){return new Bbt(e,i,r,n,s,o,a)}},dp.instance=null,dp),Bbt=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new _y,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(o*r),jbt),this._option=i.option,this._offsetFlattenError=wP*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method===zm.Rounded&&this._offset>0){const o=Vv(e),a=this._curveHelper.offset(o,-this._offset,this._method,4,this._offsetFlattenError);if(a){const l=Vi.createEmptyOptimizedCIM(e.geometryType);return l.pushPath(a),l}return null}const s=e.asJSON();if(Ea(s)&&Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._offset>0)return Vi.fromJSONCIM({xmin:s.xmin-this._offset,xmax:s.xmax+this._offset,ymin:s.ymin-this._offset,ymax:s.ymax+this._offset})}const i=this._geometryEngine;if(i==null)continue;const r=!this._preventClipping&&this._tileKey?Vee(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.offset(tt.WebMercator,r.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return n?Vi.fromJSONCIM(n):null}return null}};var pp;let Vbt=(pp=class{static local(){return pp.instance===null&&(pp.instance=new pp),pp.instance}execute(e,i,r,n,s){return new Gbt(e,i,r)}},pp.instance=null,pp),Gbt=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Gn.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Gn.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=wxe(e);if(!i)return null;const r=Vi.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var fp;let qbt=(fp=class{static local(){return fp.instance===null&&(fp.instance=new fp),fp.instance}execute(e,i,r,n,s){return new Hbt(e,i,r)}},fp.instance=null,fp),Hbt=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return Wbt(e.clone());e=this._inputGeometries.next()}return null}};function Wbt(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}var mp;let Zbt=(mp=class{static local(){return mp.instance===null&&(mp.instance=new mp),mp.instance}execute(e,i,r,n,s){return new Ybt(e,i,r)}},mp.instance=null,mp),Ybt=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=vk(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,n)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const n=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const o=e.x-i,a=e.y-r;e.x=i+o*n-a*s,e.y=r+o*s+a*n}return e.reset(),e}};var yp;let Kbt=(yp=class{static local(){return yp.instance===null&&(yp.instance=new yp),yp.instance}execute(e,i,r,n,s){return new Jbt(e,i,r)}},yp.instance=null,yp),Jbt=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=vk(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,n)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},qY=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce(((e,i)=>e+i.length),0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var gp;let Xbt=(gp=class{static local(){return gp.instance===null&&(gp.instance=new gp),gp.instance}execute(e,i,r,n,s){return new Qbt(e,i,r)}},gp.instance=null,gp),Qbt=class extends i${constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const v=Vi.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)v.pushXY(e.x,e.y);return v}const i=[],r=new Array(e.pathSize);let n=0;for(e.seekPathStart();e.nextPoint();)r[n++]=e.getControlPoint(),i.push([e.x,e.y]);let s=!0,o=!0,a=!1,l=!this._invert;n=0;const c=new qY;let u=i[0];for(;n<i.length;){const v=i[n+1],w=r[n],_=r[n+1];n++,o&&(l=w||_?this._invert:!this._invert,o=!1),l?(c.addSegment(u,v,s),s=!1):a=!0,u=v,_&&(l?(l=!1,s=!0):l=!0)}const p=c.getGeometry();if(p.length===0)return null;if(!a&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const v=p[p.length-1];return v[0][0]===v[v.length-1][0]&&v[0][1]===v[v.length-1][1]||v.push([v[0][0],v[0][1]]),Vi.fromJSONCIM({paths:p})}const m=p[p.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]&&p.length>1&&(p[p.length-1].push(...p[0]),p.splice(0,1)),Vi.fromJSONCIM({paths:p})}};function sme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function ike(t,e){return Math.sqrt(t*t+e*e)}function ome(t){const e=ike(t[0],t[1]);t[0]/=e,t[1]/=e}function ewt(t,e){return ike(t[0]-e[0],t[1]-e[1])}function twt(t,e){return t[e+1]}function rke(t){return t.length-1}function iwt(t){let e=0;for(let i=0;i<rke(t);i++)e+=rwt(t,i);return e}function rwt(t,e,i=1){let[r,n]=twt(t,e);return[r,n]=[Math.round(r),Math.round(n)],Math.sqrt(r*r+n*n)*i}let HY=class WY{constructor(e,i,r,n,s){this._segments=e,this._index=i,this._distance=r,this._xStart=n,this._yStart=s,this._done=!1}static create(e){return new WY(e,0,0,e[0][0],e[0][1])}clone(){return new WY(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(e){return this._index===e._index||e._index===this._index-1&&(this._distance===0||e._distance===1)||e._index===this._index+1&&(this._distance===1||e._distance===0)}leq(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}geq(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}get _segment(){return this._segments[this._index+1]}get angle(){const e=this.dy,i=(0*e+-1*-this.dx)/(1*this.length);let r=Math.acos(i);return e>0&&(r=2*Math.PI-r),r}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:e,dy:i}=this;return Math.sqrt(e*e+i*i)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<rke(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(e,i){const r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;let n=this.backwardLength;for(;this.prev();){if(n+this.length>e)return this._seekBackwards(e-n);n+=this.length}return this._distance=0,i?this:null}seek(e,i=!1){if(e<0)return this._seekBackwards(Math.abs(e),i);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;let r=this.remainingLength;for(;this.next();){if(r+this.length>e)return this.seek(e-r,i);r+=this.length}return this._distance=1,i?this:null}};function uZt(t,e,i,r=!0){const n=iwt(t),s=HY.create(t),o=n/2;if(!r)return s.seek(o),void(s.x<n2&&s.y<n2&&s.x>=0&&s.y>=0&&i(s.clone(),0,o+0*e,n));const a=Math.max((n-e)/2,0),l=Math.floor(a/e),c=o-l*e;s.seek(c);for(let u=-l;u<=l;u++)s.x<n2&&s.y<n2&&s.x>=0&&s.y>=0&&i(s.clone(),u,o+u*e,n),s.seek(e)}function hZt(t,e){const i=e;for(let r=0;r<t.length;r++){let n=t[r];nwt(n,i);const s=[];s.push(n[0]);for(let o=1;o<n.length;o++){const[a,l]=n[o-1],[c,u]=n[o],p=c-a,m=u-l;s.push([p,m])}t[r]=s,n=s}return t}function nwt(t,e){if(e<=0)return;const r=t.length;if(r<3)return;const n=[];let s=0;n.push(0);for(let p=1;p<r;p++)s+=ewt(t[p],t[p-1]),n.push(s);e=Math.min(e,.2*s);const o=[];o.push(t[0][0]),o.push(t[0][1]);const a=t[r-1][0],l=t[r-1][1],c=sme([0,0],t[0],t[1]);ome(c),t[0][0]+=e*c[0],t[0][1]+=e*c[1],sme(c,t[r-1],t[r-2]),ome(c),t[r-1][0]+=e*c[0],t[r-1][1]+=e*c[1];for(let p=1;p<r;p++)n[p]+=e;n[r-1]+=e;const u=.5*e;for(let p=1;p<r-1;p++){let m=0,v=0,w=0;for(let _=p-1;_>=0&&!(n[_+1]<n[p]-u);_--){const T=u+n[_+1]-n[p],$=n[_+1]-n[_],I=n[p]-n[_]<u?1:T/$;if(Math.abs(I)<1e-6)break;const A=I*I,k=I*T-.5*A*$,R=I*$/e,F=t[_+1],B=t[_][0]-F[0],q=t[_][1]-F[1];m+=R/k*(F[0]*I*T+.5*A*(T*B-$*F[0])-A*I*$*B/3),v+=R/k*(F[1]*I*T+.5*A*(T*q-$*F[1])-A*I*$*q/3),w+=R}for(let _=p+1;_<r&&!(n[_-1]>n[p]+u);_++){const T=u-n[_-1]+n[p],$=n[_]-n[_-1],I=n[_]-n[p]<u?1:T/$;if(Math.abs(I)<1e-6)break;const A=I*I,k=I*T-.5*A*$,R=I*$/e,F=t[_-1],B=t[_][0]-F[0],q=t[_][1]-F[1];m+=R/k*(F[0]*I*T+.5*A*(T*B-$*F[0])-A*I*$*B/3),v+=R/k*(F[1]*I*T+.5*A*(T*q-$*F[1])-A*I*$*q/3),w+=R}o.push(m/w),o.push(v/w)}o.push(a),o.push(l);for(let p=0,m=0;p<r;p++)t[p][0]=o[m++],t[p][1]=o[m++]}const YM=()=>Ce.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var vp;let swt=(vp=class{static local(){return vp.instance===null&&(vp.instance=new vp),vp.instance}execute(e,i,r,n,s){return new owt(e,i,r,n,s)}},vp.instance=null,vp),owt=class extends i${constructor(e,i,r,n,s){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new ai(NaN,NaN),this._lastWidth=0,this._tileKey=null,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0,this._tileKey=n,this._geometryEngine=s}processPath(e){var w,_;if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const T=Vi.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)T.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)T.pushXY(e.x,e.y);return T}const i=[];e.seekPathStart();let r=0,n=0;for(;e.nextPoint();)i.push([e.x-r,e.y-n]),r=e.x,n=e.y;let s=(w=this._geometryEngine)==null?void 0:w.simplify(tt.WebMercator,{paths:[i]});s||this._tileKey!=null||(s={paths:[i]});const o=zn(s)?s.rings:To(s)?s.paths:null;if(!o)return YM().error(new ae("mapview-bad-resource","Unable to process geometry")),null;const a=new qY,l=new qY;let c=0;for(const T of o){r=T[0][0],n=T[0][1];for(let $=1;$<T.length;$++){const I=r+T[$][0],A=n+T[$][1];c+=Math.sqrt((I-r)*(I-r)+(A-n)*(A-n)),r=I,n=A}}if(this._originalLength===0||this._originalLength>c){this._length=c;const T=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(T)<1){const $=T*T;this._slopeC=Math.sqrt(1/(1+$)),this._slopeS=Math.sqrt($/(1+$)),T<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;let u=0;const p=[];for(const T of o){const $=HY.create(T),I=HY.create(T);this._setFromOffset(I,a,l);let A=I.next(),k=$;for(;A&&k;)u=this._setOffset(k,A,u,a,l),k=$.next(),A=I.next();k=$,k&&this._setToOffset(k,u,a,l);const R=a.getGeometry(),F=l.getGeometry(),B=[];for(const q of R)B.push(...q);for(let q=F.length-1;q>=0;q--){const Y=F[q];for(let J=Y.length-1;J>=0;J--)B.push(Y[J])}p.push(B)}const m={rings:p};yVe(m);let v=(_=this._geometryEngine)==null?void 0:_.simplify(tt.WebMercator,m);if(!v){if(this._tileKey!=null)return null;v=m}return Vi.fromJSONCIM(v)}_setFromOffset(e,i,r){const n=this._halfFromWidth,s=new ai(e.xEnd-e.xStart,e.yEnd-e.yStart);s.normalize(),s.scale(n),i.beginPath([e.xStart-s.y,e.yStart+s.x]),r.beginPath([e.xStart+s.y,e.yStart-s.x])}_setToOffset(e,i,r,n){let s;s=(i+=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart)))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*i/this._length;const o=new ai(e.xEnd-e.xStart,e.yEnd-e.yStart);o.normalize(),o.scale(s),r.lineTo([e.xEnd-o.y,e.yEnd+o.x]),n.lineTo([e.xEnd+o.y,e.yEnd-o.x])}_setOffset(e,i,r,n,s){const o=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart));let a;a=r+o>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(r+o)/this._length,r+=o;const l=new ai(e.xEnd,e.yEnd),c=new ai(e.xEnd-e.xStart,e.yEnd-e.yStart);c.normalize();const u=new ai(i.xEnd-i.xStart,i.yEnd-i.yStart);u.normalize();const p=c.x*u.y-c.y*u.x;let m;m=Math.abs(p)===0?new ai(u.x,u.y):new ai((u.x-c.x)/p,(u.y-c.y)/p);const v=n.getPointCount(),w=s.getPointCount();c.leftPerpendicular(),u.leftPerpendicular();const _=c.x*u.x+c.y*u.y;if(_>.99){const T=new ai((c.x+u.x)*a/2,(c.y+u.y)*a/2),$=T.clone();$.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+$.x,l.y+$.y]);const I=T.clone();I.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x-I.x,l.y-I.y])}else{if(p<0){const R=m.clone().scale(-a);R.rotateReverse(this._slopeC,this._slopeS);const F=s.getXY(w-1);F||YM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=ai.add(l,R),q=ai.sub(B,ai.fromArray(F));if(c.x*q.y-c.y*q.x>0){const Y=new ai(-c.x*a,-c.y*a);Y.rotateReverse(this._slopeC,this._slopeS);const J=new ai(-u.x*a,-u.y*a);J.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x+Y.x,l.y+Y.y]),s.lineTo([l.x,l.y]),s.lineTo([l.x+J.x,l.y+J.y])}else s.lineTo([l.x+R.x,l.y+R.y])}else{const R=m.clone().scale(a);R.rotate(this._slopeC,this._slopeS);const F=n.getXY(v-1);F||YM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=ai.add(l,R),q=ai.sub(B,ai.fromArray(F));if(c.x*q.y-c.y*q.x>0){const Y=c.clone().scale(a);Y.rotate(this._slopeC,this._slopeS);const J=u.clone().scale(a);J.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+Y.x,l.y+Y.y]),n.lineTo([l.x,l.y]),n.lineTo([l.x+J.x,l.y+J.y])}else n.lineTo([l.x+R.x,l.y+R.y])}const T=Math.acos(_);let $=1;if(a>.25){const R=2*Math.acos(1-.25/a);R<T&&($=Math.round(T/R))}const I=Math.cos(T/$),A=Math.sin(T/$),k=c.clone();if(p<0){k.rotate(this._slopeC,this._slopeS);const R=n.getXY(v-1);R||YM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=ai.add(l,k.clone().scale(this._lastWidth)),B=ai.sub(F,ai.fromArray(R)),q=c.x*B.y-c.y*B.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&q>0){const Y=new ai(e.xStart,e.yStart),J=this._lastTangent1.clone().scale(this._lastWidth);J.rotate(this._slopeC,this._slopeS);const Q=c.clone().scale(this._lastWidth);Q.rotate(this._slopeC,this._slopeS),n.lineTo([Y.x+J.x,Y.y+J.y]),n.lineTo([Y.x,Y.y]),n.lineTo([Y.x+Q.x,Y.y+Q.y])}}else{k.scale(-1).rotateReverse(this._slopeC,this._slopeS);const R=s.getXY(w-1);R||YM().error(new ae("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=ai.add(l,k.clone().scale(this._lastWidth)),B=ai.sub(F,ai.fromArray(R)),q=c.x*B.y-c.y*B.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&q>0){const Y=new ai(e.xStart,e.yStart),J=this._lastTangent1.clone().scale(-this._lastWidth);J.rotateReverse(this._slopeC,this._slopeS);const Q=c.clone().scale(-this._lastWidth);Q.rotateReverse(this._slopeC,this._slopeS),s.lineTo([Y.x+J.x,Y.y+J.y]),s.lineTo([Y.x,Y.y]),s.lineTo([Y.x+Q.x,Y.y+Q.y])}}k.scale(a);for(let R=0;R<=$;R++)p<0?(n.lineTo([l.x+k.x,l.y+k.y]),k.rotateReverse(I,A)):(s.lineTo([l.x+k.x,l.y+k.y]),k.rotate(I,A))}return this._lastTangent1.setCoords(c.x,c.y),this._lastWidth=a,r}};var bp;let awt=(bp=class{static local(){return bp.instance===null&&(bp.instance=new bp),bp.instance}execute(e,i,r,n,s){return new lwt(e,i,r)}},bp.instance=null,bp),lwt=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new W4,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new Z4,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Vi.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case u2.Sinus:default:this._constructCurve(i,r,!1);break;case u2.Square:this._constructSquare(i,r);break;case u2.Triangle:this._constructTriangle(i,r);break;case u2.Random:this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let n=Math.round(i/this._period);n===0&&(n=1);const s=n*16+1,o=i/n,a=this._period/16,l=1/s,c=2*Math.PI*i/o,u=2*Math.PI*Math.random(),p=2*Math.PI*Math.random(),m=2*Math.PI*Math.random(),v=.75-Math.random()/2,w=.75-Math.random()/2,_=new bm;this._walker.curPointAndAngle(_),e.pushPoint(_.pt);let T=0;for(;;){if(!this._walker.nextPointAndAngle(a,_)){e.pushPoint(this._walker.getPathEnd());break}{const $=T;let I;if(T+=l,r){const A=this._height/2*(1+.3*Math.sin(v*c*$+u));I=A*Math.sin(c*$+p),I+=A*Math.sin(w*c*$+m),I/=2}else I=.5*this._height*Math.sin(.5*c*$);e.pushXY(_.pt[0]-I*_.sa,_.pt[1]+I*_.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new bm;this._walker.curPointAndAngle(s);const o=new bm;if(this._walker.nextPointAndAngle(this._period,o)){const a=new bm;this._walker.nextPointAndAngle(this._period,a)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new bm;this._walker.curPointAndAngle(s);const o=new bm;if(this._walker.nextPointAndAngle(this._period/2,o)){const a=new bm;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}};var wp;let cwt=(wp=class{static local(){return wp.instance===null&&(wp.instance=new wp),wp.instance}execute(e,i,r,n,s){return new uwt(e,i,r)}},wp.instance=null,wp),uwt=class extends Bk{constructor(e,i,r){super(e),this._geometryWalker=new Z4,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new W4,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings===uh.WithFullGap&&this.isClosed?this._endings=uh.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let n,s=!0;switch(this._endings){case uh.NoConstraint:n=-this._position,n=this._adjustPosition(n),s=!1;break;case uh.WithHalfGap:default:n=-this._pattern.lastValue()/2;break;case uh.WithFullGap:n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case uh.WithMarkers:n=0;break;case uh.Custom:n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,s))return null;this._pattern.reset();let o=0;for(;n>o;)n-=o,o=this._pattern.nextValue();o-=n,i=o,this.iteratePath=!0}const r=new bm;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings===uh.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===uh.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var _p;let hwt=(_p=class{static local(){return _p.instance===null&&(_p.instance=new _p),_p.instance}execute(e,i,r,n,s){return new dwt(e,i,r)}},_p.instance=null,_p),dwt=class extends Bk{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new _y,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case Ip.Both:default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case Ip.JustBegin:i=this._atExtremities(e,this._position,!0);break;case Ip.JustEnd:i=this._atExtremities(e,this._position,!1);case Ip.None:}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let n=0,[s,o]=[0,0],[a,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){s=a,o=l,a=e.x,l=e.y;const u=this._curveHelper.getLength(s,o,a,l);if(n+u>i){const p=(i-n)/u,[m,v]=this._curveHelper.getAngleCS(c,s,o,a,l,p),w=this._curveHelper.getCoord2D(s,o,a,l,p);return this.internalPlacement.setTranslate(w[0]-this._offset*v,w[1]+this._offset*m),this._angleToLine&&this.internalPlacement.setRotateCS(-m,-v),this.internalPlacement}n+=u}}return null}};var xp;let pwt=(xp=class{static local(){return xp.instance===null&&(xp.instance=new xp),xp.instance}execute(e,i,r,n,s){return new fwt(e,i,r)}},xp.instance=null,xp),fwt=class extends Bk{constructor(e,i,r){super(e),this._walker=new Z4,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new W4,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new bm;if(!this._walker.nextPointAndAngle(i,r,bv.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const n=this._isFirst&&this._flipFirst;let s,o;return this._angleToLine?(s=r.ca,o=r.sa):(s=1,o=0),n&&(s=-s,o=-o),this.internalPlacement.setRotateCS(s,o),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const KM=512,mwt=10,dd=24,AF=1e-6;var Sp;let ywt=(Sp=class{static local(){return Sp.instance===null&&(Sp.instance=new Sp),Sp.instance}execute(e,i,r,n,s){return new gwt(e,i,r,n,s)}},Sp.instance=null,Sp),gwt=class cw{constructor(e,i,r,n,s){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??pA.Fixed,this._gridType===pA.Random){const o=i.seed??13,a=1;this._randomLCG=new NJ(o*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,n!=null){const[o,a,l,c]=n.split("/"),u=parseFloat(o),p=parseFloat(a),m=parseFloat(l),v=parseFloat(c);this._graphicOriginX=-(v*2**u+m)*KM,this._graphicOriginY=p*KM,this._testInsidePolygon=!0}this._internalPlacement=new t$,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!cw._randValues){cw._randValues=[];for(let e=0;e<dd;e++)for(let i=0;i<dd;i++)cw._randValues.push(this._randomLCG.getFloat()),cw._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,n,s,o,a,l,c,u,p,m,v,w,_;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=w=m=Number.MAX_VALUE,u=p=_=v=-Number.MAX_VALUE;const T=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)a=e.x,o=e.y,i=a-this._graphicOriginX-this._offsetX,r=o-this._graphicOriginY-this._offsetY,T?(n=this._cosAngle*i-this._sinAngle*r,s=this._sinAngle*i+this._cosAngle*r):(n=i,s=r),l=Math.min(l,n),u=Math.max(u,n),c=Math.min(c,s),p=Math.max(p,s),m=Math.min(m,o),v=Math.max(v,o),w=Math.min(w,a),_=Math.max(_,a);m=m!==Number.MAX_VALUE?m:-512-this._stepY,v=v!==-Number.MAX_VALUE?v:this._stepY,w=w!==Number.MAX_VALUE?w:-this._stepX,_=_!==-Number.MAX_VALUE?_:KM+this._stepX;const $=v-m,I=_-w;if(this._verticalSubdivision=$>=I,this._polygonMin=this._verticalSubdivision?m:w,this._testInsidePolygon){let A=0-this._graphicOriginX-this._offsetX-this._stepX,k=KM-this._graphicOriginX-this._offsetX+this._stepX,R=-512-this._graphicOriginY-this._offsetY-this._stepY,F=0-this._graphicOriginY-this._offsetY+this._stepY;if(T){const B=[[A,R],[A,F],[k,R],[k,F]];A=R=Number.MAX_VALUE,k=F=-Number.MAX_VALUE;for(const q of B){const Y=this._cosAngle*q[0]-this._sinAngle*q[1],J=this._sinAngle*q[0]+this._cosAngle*q[1];A=Math.min(A,Y),k=Math.max(k,Y),R=Math.min(R,J),F=Math.max(F,J)}}l=l!==Number.MAX_VALUE?Math.max(l,A):A,c=c!==Number.MAX_VALUE?Math.max(c,R):R,u=u!==-Number.MAX_VALUE?Math.min(u,k):k,p=p!==-Number.MAX_VALUE?Math.min(p,F):F}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(u/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(p/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,w,_,m,v)}_buildAccelerationMap(e,i,r,n,s){e.reset();const o=new Map,a=this._verticalSubdivision,l=a?s-n:r-i;let c=Math.ceil(l/mwt);if(c<=1)return;const u=Math.floor(l/c);let p,m,v,w,_,T,$,I,A,k,R;for(c++,this._delta=u,a?(A=-512-2*this._stepY,k=2*this._stepY,R=n):(A=-2*this._stepX,k=KM+2*this._stepX,R=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(p=e.x,m=e.y;e.nextPoint();p=v,m=w){if(v=e.x,w=e.y,a){if(m===w||m<A&&w<A||m>k&&w>k)continue;_=Math.min(m,w),T=Math.max(m,w)}else{if(p===v||p<A&&v<A||p>k&&v>k)continue;_=Math.min(p,v),T=Math.max(p,v)}for(;_<T;)$=Math.floor((_-R)/u),ame($,p,m,v,w,o),_+=u;I=Math.floor((T-R)/u),I>$&&ame(I,p,m,v,w,o)}this._accelerationMap=o}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,n;if(this._currentX++,this._gridType===pA.Random){const s=(this._currentX%dd+dd)%dd,o=(this._currentY%dd+dd)%dd;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-cw._randValues[o*dd+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-cw._randValues[o*dd+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return vwt(e,i,r);e+=AF,i+=AF;const n=this._verticalSubdivision,s=n?i:e,o=Math.floor((s-this._polygonMin)/this._delta),a=this._accelerationMap.get(o);if(!a)return!1;let l,c,u,p=0;for(const m of a){if(l=m[0],c=m[1],n){if(l[1]>i==c[1]>i)continue;u=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;u=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}u>0?p++:p--}return p!==0}};function vwt(t,e,i){let r,n,s,o,a=0;for(t+=AF,e+=AF,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=o)s=i.x,o=i.y,n>e!=o>e&&((s-r)*(e-n)-(o-n)*(t-r)>0?a++:a--);return a!==0}function ame(t,e,i,r,n,s){let o=s.get(t);o||(o=[],s.set(t,o)),o.push([[e,i],[r,n]])}const bwt=.001;var Ep;let wwt=(Ep=class{static local(){return Ep.instance===null&&(Ep.instance=new Ep),Ep.instance}execute(e,i,r,n,s){return new _wt(e,i,r)}},Ep.instance=null,Ep),_wt=class extends Bk{constructor(e,i,r){super(e),this._curveHelper=new _y,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=bwt*r}processPath(e){const i=this._position;if(this._relativeTo===Aw.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[n,s]=[e.x,e.y],[o,a]=[0,0];const l=[0,0];for(;e.nextPoint();){o=e.x,a=e.y;const c=this._curveHelper.getLength(n,s,o,a);if(c<this._epsilon){n=o,s=a;continue}const u=.5+this._position/c,[p,m]=this._curveHelper.getAngleCS(l,n,s,o,a,u),v=this._curveHelper.getCoord2D(n,s,o,a,u);return this.internalPlacement.setTranslate(v[0]-this._offset*m,v[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(p,m),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo===Aw.LineEnd;return this.onLine(e,i,r)}onLine(e,i,r){let n,s=!1;switch(this._relativeTo){case Aw.LineMiddle:default:e.seekPathStart(),n=e.pathLength()/2+i;break;case Aw.LineBeginning:n=i;break;case Aw.LineEnd:n=i,s=!0}r?e.seekPathEnd():e.seekPathStart();let o=0;if(r?e.prevPoint():e.nextPoint()){let[a,l]=[e.x,e.y],[c,u]=[0,0];const p=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,u=e.y;const m=this._curveHelper.getLength(a,l,c,u);if(o+m>n){const v=(n-o)/m,[w,_]=this._curveHelper.getAngleCS(p,a,l,c,u,v),T=this._curveHelper.getCoord2D(a,l,c,u,v),$=s?-this._offset:this._offset;return this.internalPlacement.setTranslate(T[0]-$*_,T[1]+$*w),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-w,-_):this.internalPlacement.setRotateCS(w,_)),this.internalPlacement}a=c,l=u,o+=m}}return null}};const xwt=1e-15;var Tp;let Swt=(Tp=class{static local(){return Tp.instance===null&&(Tp.instance=new Tp),Tp.instance}execute(e,i,r,n,s){return new Ewt(e,i,r)}},Tp.instance=null,Tp),Ewt=class extends Bk{constructor(e,i,r){super(e),this._curveHelper=new _y,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],n=i[1];if(this._offset!==0){const s=Math.cos(i[2]),o=Math.sin(i[2]);r-=this._offset*o,n+=this._offset*s}return this.internalPlacement.setTranslate(r,n),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,n=!1,s=0,o=0;if(e.seekPathStart(),e.nextPoint()){let a=e.x,l=e.y,c=e.getControlPoint(),u=!0,p=e.nextPoint();for(;p;){const m=e.x,v=e.y,w=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(s=this._curveHelper.getAngle(a,l,m,v,0)),u?(u=!1,i?(r=s,n=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([a,l,s])):c?this._controlPoints&&this._tags.push([a,l,qR(o,s)]):this._regularVertices&&this._tags.push([a,l,qR(o,s)]),(this._angleToLine||this._offset!==0)&&(o=this._curveHelper.getAngle(a,l,m,v,1)),p=e.nextPoint(),p||(i?w||n?this._controlPoints&&this._tags.push([m,v,qR(o,r)]):this._regularVertices&&this._tags.push([m,v,qR(o,r)]):(this._endPoints||this._controlPoints&&w)&&this._tags.push([m,v,o])),a=m,l=v,c=w}}this._tagIterator=0}};function qR(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*xwt;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const Twt=100*222045e-21;function $wt(t){if(t.totalSize===0)return null;const e=vk(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*Twt;let r=0,n=0;t.reset();for(let Y=0;t.nextPath();Y++){const J=t.getCurrentRingArea();J>n&&(n=J,r=Y)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const s=Cxe(t);if(Math.abs(n)<=2*i*i)return[(s[0]+s[2])/2,(s[1]+s[3])/2];t.seekPathStart();const o=xVe(t,Bn());if(o===null)return null;if(t.totalPoints<4)return o;const a=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let u=!1,p=JM(o,t,!0);p.distance===0&&(u=!0,a[0][0]=o[0],a[0][1]=o[1],p=JM(o,t,!1)),l[0]=p.distance,c[0]=0;const m=[NaN,NaN];let v=!1,w=.25,_=-1,T=NaN;do if(T=NaN,a[1]=UV(t,BV(s[0],s[2],w),i,e),isNaN(a[1][0])||isNaN(a[1][1])||(p=JM(a[1],t,!1),T=p.distance),!isNaN(T)&&T>i&&aD(a[1],t))v=!0,l[1]=T,c[1]=uw(a[1],o);else if(!isNaN(T)&&T>_&&(_=T,m[0]=a[1][0],m[1]=a[1][1]),w-=.01,w<.1){if(!(_>=0))break;v=!0,l[1]=_,a[1][0]=m[0],a[1][1]=m[1],c[1]=uw(a[1],o)}while(!v);v=!1,w=.5,_=-1;let $=.01,I=1;do if(T=NaN,a[2]=UV(t,BV(s[0],s[2],w),i,e),isNaN(a[2][0])||isNaN(a[2][1])||(p=JM(a[2],t,!1),T=p.distance),!isNaN(T)&&T>i&&aD(a[2],t))v=!0,l[2]=T,c[2]=uw(a[2],o);else if(!isNaN(T)&&T>_)_=T,m[0]=a[2][0],m[1]=a[2][1];else if(T>_&&(_=T,m[0]=a[2][0],m[1]=a[2][1]),w=.5+$*I,$+=.01,I*=-1,w<.3||w>.7){if(!(_>=0))break;v=!0,l[2]=_,a[2][0]=m[0],a[2][1]=m[1],c[2]=uw(a[2],o)}while(!v);v=!1,w=.75,_=-1;do if(T=NaN,a[3]=UV(t,BV(s[0],s[2],w),i,e),isNaN(a[3][0])||isNaN(a[3][1])||(p=JM(a[3],t,!1),T=p.distance),!isNaN(T)&&T>i&&aD(a[3],t))v=!0,l[3]=T,c[3]=uw(a[3],o);else if(T>_&&(_=T,m[0]=a[3][0],m[1]=a[3][1]),w+=.01,w>.9){if(!(_>=0))break;v=!0,l[3]=_,a[3][0]=m[0],a[3][1]=m[1],c[3]=uw(a[3],o)}while(!v);const A=[0,1,2,3],k=u?0:1;let R;for(let Y=k;Y<4;Y++)for(let J=k;J<3;J++){const Q=c[J],te=c[J+1];Iwt(Q,te)>0&&(R=A[J],A[J]=A[J+1],A[J+1]=R,c[J]=te,c[J+1]=Q)}let F=k,B=0,q=0;for(let Y=k;Y<4;Y++){switch(Y){case 0:q=2*l[A[Y]];break;case 1:q=1.66666666*l[A[Y]];break;case 2:q=1.33333333*l[A[Y]];break;case 3:q=l[A[Y]]}q>B&&(B=q,F=A[Y])}return a[F]}function aD(t,e){let i,r,n,s,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?o++:o--);return o!==0}function JM(t,e,i){if(i&&aD(t,e))return{coord:t,distance:0};let r=1/0,n=0,s=0,o=[0,0],a=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(o[0]=e.x,o[1]=e.y;e.nextPoint();o=a){a=[e.x,e.y],fxe(l,t,o,a);const c=uw(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function UV(t,e,i,r){const n=[e,0];let s=1/0,o=1/0,a=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],u=[0,0],p=[0,0],m=[0,0],v=[[0,0],[0,0]],w=Bn();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(v[0][0]=t.x,v[0][1]=t.y;t.nextPoint();v[0][0]=v[1][0],v[0][1]=v[1][1]){if(v[1][0]=t.x,v[1][1]=t.y,Mwt(w,v)===null||(p[0]=c[0][0],p[1]=c[0][1],m[0]=c[1][0],m[1]=c[1][1],Cwt(w,p,m)===0)||!r5(c[0],c[1],v[0],v[1],u))continue;const _=u[1];s>o?_<s&&(s=_,a=!0):_<o&&(o=_,l=!0)}return a&&l?n[1]=(s+o)/2:n[0]=n[1]=NaN,n}function Mwt(t,e){if(e.length<2)return null;t||(t=Bn());const[i,r]=e[0],[n,s]=e[1];return t[0]=Math.min(i,n),t[1]=Math.min(r,s),t[2]=Math.max(i,n),t[3]=Math.max(r,s),t}const HR=1,WR=4,lme=3,cme=12;function Cwt(t,e,i){let r=pd(e,t),n=pd(i,t);const s=t[0],o=t[1],a=t[2],l=t[3];if(r&n)return 0;if(!(r|n))return 4;const c=(r?1:0)|(n?2:0);do{const u=i[0]-e[0],p=i[1]-e[1];if(u>p)r&lme?(r&HR?(e[1]+=p*(s-e[0])/u,e[0]=s):(e[1]+=p*(a-e[0])/u,e[0]=a),r=pd(e,t)):n&lme?(n&HR?(i[1]+=p*(s-i[0])/u,i[0]=s):(i[1]+=p*(a-i[0])/u,i[0]=a),n=pd(i,t)):r?(r&WR?(e[0]+=u*(o-e[1])/p,e[1]=o):(e[0]+=u*(l-e[1])/p,e[1]=l),r=pd(e,t)):(n&WR?(i[0]+=u*(o-i[1])/p,i[1]=o):(i[0]+=u*(l-i[1])/p,i[1]=l),n=pd(i,t));else if(r&cme?(r&WR?(e[0]+=u*(o-e[1])/p,e[1]=o):(e[0]+=u*(l-e[1])/p,e[1]=l),r=pd(e,t)):n&cme?(n&WR?(i[0]+=u*(o-i[1])/p,i[1]=o):(i[0]+=u*(l-i[1])/p,i[1]=l),n=pd(i,t)):r?(r&HR?(e[1]+=p*(s-e[0])/u,e[0]=s):(e[1]+=p*(a-e[0])/u,e[0]=a),r=pd(e,t)):(n&HR?(i[1]+=p*(s-i[0])/u,i[0]=s):(i[1]+=p*(a-i[0])/u,i[0]=a),n=pd(i,t)),r&n)return 0}while(r|n);return c}function pd(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function BV(t,e,i){return t+(e-t)*i}function uw(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Iwt(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var $p;let Awt=($p=class{static local(){return $p.instance===null&&($p.instance=new $p),$p.instance}execute(e,i,r,n,s){return new Pwt(e,i,r)}},$p.instance=null,$p),Pwt=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:h2.OnPolygon,this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new t$}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case h2.CenterOfMass:{const r=$Ve(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case h2.BoundingBoxCenter:{const r=vk(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;case h2.OnPolygon:default:{const r=$wt(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function kwt(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return mbt.local();case"CIMGeometricEffectArrow":return bbt.local();case"CIMGeometricEffectBuffer":return _bt.local();case"CIMGeometricEffectControlMeasureLine":return Sbt.local();case"CIMGeometricEffectCut":return Tbt.local();case"CIMGeometricEffectDashes":return Mbt.local();case"CIMGeometricEffectDonut":return Ibt.local();case"CIMGeometricEffectJog":return Nbt.local();case"CIMGeometricEffectMove":return Fbt.local();case"CIMGeometricEffectOffset":return Ubt.local();case"CIMGeometricEffectRadial":return Vbt.local();case"CIMGeometricEffectReverse":return qbt.local();case"CIMGeometricEffectRotate":return Zbt.local();case"CIMGeometricEffectScale":return Kbt.local();case"CIMGeometricEffectSuppress":return Xbt.local();case"CIMGeometricEffectTaperedPolygon":return swt.local();case"CIMGeometricEffectWave":return awt.local();case"CIMGeometricEffectEnclosingPolygon":return Pbt.local()}return null}function Owt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return cwt.local();case"CIMMarkerPlacementAtExtremities":return hwt.local();case"CIMMarkerPlacementAtRatioPositions":return pwt.local();case"CIMMarkerPlacementInsidePolygon":return ywt.local();case"CIMMarkerPlacementOnLine":return wwt.local();case"CIMMarkerPlacementOnVertices":return Swt.local();case"CIMMarkerPlacementPolygonCenter":return Awt.local()}return null}function VV(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Rf(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[n,s]=t;return[n*i+s*-r,n*r+s*i]}function nke(t,e,i=0){const r=sa(t,0,Dwt);for(let n=0;n<4;n++)e[i+n]=Math.floor(256*Fwt(r*Rwt[n]))}function Lwt(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*Nwt[r];return i}const Rwt=[1,256,65536,16777216],Nwt=[1/256,1/65536,1/16777216,1/4294967296],Dwt=Lwt(new Uint8ClampedArray([255,255,255,255]));function Fwt(t){return t-Math.floor(t)}const zwt=15.5,GV=4,jwt=64,wZt=1024,_Zt={outlineWidth:.75,referenceWidth:.75,cap:Gn.CIMSolidStroke.capstyle,join:Gn.CIMSolidStroke.joinstyle,miterLimit:Gn.CIMSolidStroke.miterlimit},ume=()=>Ce.getLogger("esri.symbols.cim.rasterizingUtils"),Uwt=32,Bwt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function xZt(t,e,i){const r=e.style,n=Y6e(Math.ceil(i)),s=Bwt(r)?8*n:16*n,o=2*n;t.width=s,t.height=s;const a=t.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=n,a.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(a.moveTo(s/2,-o),a.lineTo(s/2,s+o)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(a.moveTo(-o,s/2),a.lineTo(s+o,s/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(s+o,s+o),a.moveTo(s-o,-o),a.lineTo(s+o,o),a.moveTo(-o,s-o),a.lineTo(o,s+o)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(a.moveTo(s+o,-o),a.lineTo(-o,s+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(s+o,s-o),a.lineTo(s-o,s+o)),a.stroke();const l=a.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let u;for(let p=0;p<c.length;p+=4)u=c[p+3]/255,c[p]=c[p]*u,c[p+1]=c[p+1]*u,c[p+2]=c[p+2]*u;return[c,t.width,t.height,n]}function SZt(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((p,m)=>p+m),0),i=Math.round(e*GV),r=1,n=new Float32Array(i*r);let s=0,o=0,a=.5,l=!0;for(const p of t){for(s=o,o+=p*GV;a<=o;){const m=a-.5,v=Math.min(Math.abs(a-s),Math.abs(a-o));n[m]=l?-v:v,a++}l=!l}const c=n.length,u=new Uint8Array(4*c);for(let p=0;p<c;++p){const m=n[p]/GV;nke(m/jwt*.5+.5,u,4*p)}return[u,i,r]}function EZt(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",n=!i&&!r;t.length%2==1&&(t=[...t,...t]);const s=zwt,o=2*s;let a=0;for(const $ of t)a+=$;const l=Math.round(a*s),c=new Float32Array(l*o),u=.5*s;let p=0,m=0,v=.5,w=!0;for(const $ of t){for(p=m,m+=$*s;v<=m;){let I=.5;for(;I<o;){const A=(I-.5)*l+v-.5,k=n?(I-s)*(I-s):Math.abs(I-s);c[A]=w?i?Math.max(Math.max(p+u-v,k),Math.max(v-m+u,k)):k:n?Math.min((v-p)*(v-p)+k,(v-m)*(v-m)+k):r?Math.min(Math.max(v-p,k),Math.max(m-v,k)):Math.min(Math.max(v-p+u,k),Math.max(m+u-v,k)),I++}v++}w=!w}const _=c.length,T=new Uint8Array(4*_);for(let $=0;$<_;++$){const I=(n?Math.sqrt(c[$]):c[$])/s;nke(I,T,4*$)}return[T,l,o]}function TZt(t,e){const{colorRamp:i,gradientType:r}=e,n=i.type==="CIMFixedColorRamp",s=e.interval||Gn.CIMGradientFill.interval;let o=Gee(i);return n&&(o=ske(o,s)),r==="Discrete"||n?Gwt(t,o,s):Vwt(t,o)}let qV;function ZR(t,e){const{colorRamp:i,gradientType:r}=e,n=Gee(i),s=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!s)return lD(t,n);const o=e.interval??Gn.CIMGradientFill.interval;if(s)return lD(t,ske(n,o));const a=[];qV??(qV=document.createElement("canvas")),qee(qV,n,o,1,0);const l=qV.getContext("2d").getImageData(0,0,o,1).data;for(let c=0,u=0;c<o;c++,u=4*c){const p=[l[u+0],l[u+1],l[u+2],l[u+3]];a.push({offset:c/o,color:p}),a.push({offset:(c+1)/o,color:p})}return lD(t,a)}function Gee(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&ume().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let n=0;for(const s of i.colors)e.push({offset:n,color:[s[0],s[1],s[2],s[3]/255]}),n+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce(((s,o)=>s+o),0);let n=0;for(let s=0;s<i.colorRamps.length;s++){const o=i.colorRamps[s],a=i.weights[s],l=Gee(o);for(const c of l)e.push({offset:(n+c.offset*a)/r,color:c.color});n+=a}break}default:ume().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function ske(t,e){const i=[],r=(t.length-1)/(e-1);for(let n=0;n<e;n++){const s=t[Math.round(n*r)].color;i.push({offset:n/e,color:s}),i.push({offset:(n+1)/e,color:s})}return i}function Vwt(t,e){return qee(t,e,Uwt,1,tMe),oke(t)}function Gwt(t,e,i){return qee(t,e,i,1,tMe),oke(t)}function lD(t,e,i=0){for(const{offset:r,color:n}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`)}function qee(t,e,i,r,n){const s=i+2*n;t.width=s,t.height=r;const o=(n+1)/s,a=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=a.createLinearGradient(0,0,s,r);lD(l,e,o),a.fillStyle=l}else a.fillStyle="rgba(128, 128, 128, 1)";a.fillRect(0,0,s,r)}function oke(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),n=new Uint8Array(r.data);for(let s=0;s<n.length;s+=4){const o=n[s+3]/255;n[s]*=o,n[s+1]*=o,n[s+2]*=o}return[n,e,i]}function qwt(t){var n,s,o,a;const e=((s=(n=t[0])==null?void 0:n[0])==null?void 0:s[0])??0,i=((a=(o=t[0])==null?void 0:o[0])==null?void 0:a[1])??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let l=0;l<t.length;l++){const c=t[l];for(let u=0;u<c.length;u++){const p=c[u][0],m=c[u][1];p<r.xmin&&(r.xmin=p),p>r.xmax&&(r.xmax=p),m<r.ymin&&(r.ymin=m),m>r.ymax&&(r.ymax=m)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function PF(t,e){const i=qwt(t),r=i.width===0?1:i.width,n=i.height===0?1:i.height,s=[];for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){let u=Math.round(a[c][0]-i.xmin),p=Math.round(a[c][1]-i.ymin);if(u=e.xmin+u*e.width/r,p=e.ymin+p*e.height/n,isNaN(u)||isNaN(p))throw new Error("Scaled shape has NaN values");l.push([u,p])}s.push(l)}return s}function hme(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],o=[];for(let a=0;a<s.length;a++){const l=s[a][0]+e,c=s[a][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");o.push([l,c])}r.push(o)}return r}let Hwt=class ake{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}static fromExtent(e){return new ake(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function Wwt(t){return`rgb(${t.slice(0,3).toString()})`}function YR(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let lke=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){var re,ee;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});XM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:s,weight:o}=i.font;this._lineThroughWidthOffset=s&&s==="line-through"?.1*this._lineHeight:0;const a=i.backgroundColor!=null||i.borderLine!=null,l=a?DJe:0,c=this._computeTextWidth(n,i)+2*l,u=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=u,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=u,this._lineThroughWidthOffset*=i.pixelRatio;const p=(i.outline&&i.outline.color)??[0,0,0,0],m=i.color??[0,0,0,0],v=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=YR(m),this._outlineStyle=YR(p),this._haloStyle=Wwt(v);const w=this._renderedLineHeight,_=this._renderedOutlineSize,T=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),XM(n,i);const $=l*i.pixelRatio,I=Zwt(n.textAlign,this._renderedWidth-2*$,this._renderedHaloSize+this._renderedOutlineSize)+$,A=T+_+$,k=T>0;let R=this._lineThroughWidthOffset,F=0;if(a){n.save();const ye=i.backgroundColor??[0,0,0,0],ne=((re=i.borderLine)==null?void 0:re.color)??[0,0,0,0],ue=2*(((ee=i.borderLine)==null?void 0:ee.size)??0);n.fillStyle=YR(ye),n.strokeStyle=YR(ne),n.lineWidth=ue,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}k&&this._renderHalo(n,I,A,R,F,i),_>0&&this._renderOutline(n,I,A,R,F,i),F+=A,R+=I;for(const ye of this._textLines)k?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(ye,R,F),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(ye,R,F)):(n.fillStyle=this._fillStyle,n.fillText(ye,R,F)),s&&s!=="none"&&this._renderDecoration(n,R,F,s,o),F+=w;n.restore();const B=this._renderedWidth+2*this._lineThroughWidthOffset,q=this._renderedHeight,Y=n.getImageData(0,0,B,q),J=new Uint8Array(Y.data);if(i.premultiplyColors){let ye;for(let ne=0;ne<J.length;ne+=4)ye=J[ne+3]/255,J[ne]=J[ne]*ye,J[ne+1]=J[ne+1]*ye,J[ne+2]=J[ne+2]*ye}let Q,te;switch(i.horizontalAlignment){case"left":Q=-.5;break;case"right":Q=.5;break;default:Q=0}switch(i.verticalAlignment){case"bottom":te=-.5;break;case"top":te=.5;break;case"baseline":te=-1/6;break;default:te=0}return{size:[B,q],image:new Uint32Array(J.buffer),sdf:!1,simplePattern:!1,anchorX:Q,anchorY:te,canvas:r}}_renderHalo(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,u=c.getContext("2d");u.clearRect(0,0,a,l),XM(u,o);const{decoration:p,weight:m}=o.font;u.fillStyle=this._haloStyle,u.strokeStyle=this._haloStyle,u.lineJoin="round",this._renderOutlineNative(u,i,r,p,m,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutline(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,u=c.getContext("2d");u.clearRect(0,0,a,l),XM(u,o);const{decoration:p,weight:m}=o.font;u.fillStyle=this._outlineStyle,u.strokeStyle=this._outlineStyle,u.lineJoin="round",this._renderOutlineNative(u,i,r,p,m,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,n,s,o){const a=this._renderedLineHeight;for(const l of this._textLines){const c=2*o,u=5,p=.1;for(let m=0;m<u;m++){const v=(1-(u-1)*p+m*p)*c;e.lineWidth=v,e.strokeText(l,i,r),n&&n!=="none"&&this._renderDecoration(e,i,r,n,s,v)}r+=a}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d");XM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const s=this._computeTextWidth(n,i),o=this._lineHeight*this._textLines.length;return r.width=s,r.height=o,[s*i.pixelRatio,o*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const s of this._textLines)r=Math.max(r,e.measureText(s).width);const n=i.font;return(n.style==="italic"||n.style==="oblique"||typeof n.weight=="string"&&(n.weight==="bold"||n.weight==="bolder")||typeof n.weight=="number"&&n.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*li(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*li(this._parameters.halo.size))}_renderDecoration(e,i,r,n,s,o){let a=.9*this._lineHeight;const l=s==="bold"?.06:s==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(n==="underline")switch(a=.9*this._computeLineHeightBase(),c){case"top":r+=a;break;case"middle":r+=a/2}else if(n==="line-through")switch(c){case"top":r+=a/1.5;break;case"middle":r+=a/3}const u=o?1.5*o:Math.ceil(a*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=u,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function XM(t,e){const i=Math.max(e.size,.5),r=e.font,n=`${r.style} ${r.weight} ${li(i).toFixed(1)}px ${r.family}, sans-serif`;let s;switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:s="left";break;case"right":s="right";break;case"center":s="center"}t.textAlign=s}function Zwt(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function cke(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ywt(){const t=cke("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function Kwt(t){return t!=null&&document.body.removeChild(t),null}const Jwt=()=>Ce.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var Qd,du;function Xwt(t){if(!t)return Qd.Center;switch(t){case"Left":case"left":return Qd.Left;case"Right":case"right":return Qd.Right;case"Justify":return Jwt().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),Qd.Center;case"Center":case"center":return Qd.Center}}function Qwt(t){if(!t)return du.Center;switch(t){case"Top":case"top":return du.Top;case"Center":case"middle":return du.Center;case"Baseline":case"baseline":return du.Baseline;case"Bottom":case"bottom":return du.Bottom}}function MZt(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function CZt(t){switch(t){case Qd.Right:case"right":return-1;case Qd.Center:case"center":return 0;case Qd.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function IZt(t){switch(t){case du.Top:case"top":return 1;case du.Center:case"middle":return 0;case du.Bottom:case du.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}(function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"})(Qd||(Qd={})),(function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"})(du||(du={}));let e_t=class{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},TI=class ZY{constructor(e,i,r,n){this.transformedX=0,this.transformedY=0,this.center=q_(e,i),this.centerT=rP(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new ZY(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+i)/r,o=(e.halfHeight+this.halfHeight+i)/n,a=Math.min(s,o);return Math.log2(a)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-i,s=Math.max(this.ymax,e.ymax)-r,o=i+n/2,a=r+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=o,this.y=a}static deserialize(e){const i=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new ZY(i,r,n,s)}};const uke=22,hke=4,t_t=uke+hke,i_t=uke-6,dme=3,r_t=Math.PI/180,Pg=8,n_t=1.5;let dke=class{constructor(e,i,r,n){this._rotationT=Jm(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const s=r.rect,o=new Float32Array(8);e*=n,i*=n;const a=r.code?s.width*n:r.metrics.width,l=r.code?s.height*n:r.metrics.height;this.width=a,this.height=l,o[0]=e,o[1]=i,o[2]=e+a,o[3]=i,o[4]=e,o[5]=i+l,o[6]=e+a,o[7]=i+l,this._data=o,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+a,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,d4(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,n=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+n,s[6]=this.x+r,s[7]=this.y+n;const o=Jd(Jm(),this._rotationT,this._transform);w$e(s,s,o);let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let _=0;_<4;_++){const T=s[2*_],$=s[2*_+1];a=Math.min(a,T),l=Math.min(l,$),c=Math.max(c,T),u=Math.max(u,$)}const p=c-a,m=u-l,v=a+p/2,w=l+m/2;this._bounds=new TI(v,w,p,m)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=Jd(Jm(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],Xo(this._offsets.topLeft,this._offsets.topLeft,e),Xo(this._offsets.topRight,this._offsets.topRight,e),Xo(this._offsets.bottomLeft,this._offsets.bottomLeft,e),Xo(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:n}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}};const s_t=(t,e)=>({code:0,page:0,sdf:!0,rect:new e_t(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function QM(t,e){return t.forEach((i=>Xo(i,i,e))),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let o_t=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const n of e)n.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=d4(Jm(),e);Jd(i,r,i);for(const n of this.glyphs)n.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const n=r.scale,s=r.decoration==="underline"?t_t:i_t,o=e[0].textureBinding;for(const a of i){const l=a.startX*n,c=a.startY*n,u=(a.width+a.glyphWidthEnd)*n;e.push(new dke(l,c+s*n,s_t(u,o),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(n_t+i)/2,n=this._borderLineSizePx?r:0,{xmin:s,ymin:o,xmax:a,ymax:l,x:c,y:u,width:p,height:m}=this.bounds,v=[s-Pg,o-Pg],w=[a+Pg,o-Pg],_=[s-Pg,l+Pg],T=[a+Pg,l+Pg],$=QM([[v[0]-r,v[1]-r],[w[0]+r,w[1]-r],[v[0]+n,v[1]+n],[w[0]-n,w[1]+n]],e),I=QM([[_[0]+n,_[1]-n],[T[0]-n,T[1]-n],[_[0]-r,_[1]+r],[T[0]+r,T[1]+r]],e),A=QM([[v[0]-r,v[1]-r],[v[0]+n,v[1]+n],[_[0]-r,_[1]+r],[_[0]+n,_[1]-n]],e),k=QM([[w[0]-n,w[1]+n],[w[0]+r,w[1]-r],[T[0]-n,T[1]-n],[T[0]+r,T[1]+r]],e),R={main:QM([v,w,_,T],e),top:$,bot:I,left:A,right:k};return[new TI(c,u,p+2*r,m+2*r),R]}get boundsT(){const e=this.bounds,i=Dn(rP(),e.x,e.y);if(Xo(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new TI(i[0],i[1],r,r)}return new TI(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,n=0,s=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),n=Math.max(n,l.xBottomRight),s=Math.max(s,l.yBottomRight);const o=n-i,a=s-r;return new TI(i+o/2,r+a/2,o,a)}_createGlyphTransform(e,i){const r=r_t*i.angle,n=Jm(),s=rP();return Lp(n,n,Dn(s,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?u0(n,n,r):(Lp(n,n,Dn(s,e.x,e.y)),u0(n,n,r),Lp(n,n,Dn(s,-e.x,-e.y))),n}},KR=class{constructor(e,i,r,n,s,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=o}};const YY=t=>t===10,pme=t=>t===32;function a_t(t,e,i){const r=new Array,n=1/i.scale,s=i.maxLineWidth*n,o=e?t.length-1:0,a=e?-1:t.length,l=e?-1:1;let c=o,u=0,p=0,m=c,v=m,w=0,_=1/0,T=0;for(;c!==a;){const{code:I,metrics:A}=t[c],k=Math.abs(A.top);if(YY(I)||pme(I)||(_=Math.min(_,k),T=Math.max(T,k+A.height)),YY(I))c!==o&&(r.push(new KR(t,m,c-l,u,_===1/0?0:_,T)),_=1/0,T=0),u=0,m=c+l,v=c+l,p=0;else if(pme(I))v=c+l,p=0,w=A.advance,u+=A.advance;else if(u>s){if(v!==m){const R=v-2*l;u-=w,r.push(new KR(t,m,R,u-p,_,T)),_=1/0,T=0,m=v,u=p}else r.push(new KR(t,m,c-l,u,_,T)),_=1/0,T=0,m=c,v=c,u=0;u+=A.advance,p+=A.advance}else u+=A.advance,p+=A.advance;c+=l}const $=new KR(t,m,c-l,u,_,T);return $.start>=0&&$.end<t.length&&r.push($),r}function l_t(t,e){let i=0;for(let s=0;s<t.length;s++){const{width:o}=t[s];i=Math.max(o,i)}const r=e.decoration==="underline"?hke:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-n,width:i}}function pke(t,e){const i=e.scale,r=new Array,{glyphs:n,isRightToLeft:s}=t,o=a_t(n,s,e),a=o.length?l_t(o,e):{y:0,height:0},l=Xwt(e.horizontalAlignment),c=Qwt(e.verticalAlignment),u=c===du.Baseline?1:0,p=u?0:c-1,m=(1-u)*-a.y+p*(a.height/2)+-22*(u?1:0);for(let v=0;v<o.length;v++){const{start:w,end:_,width:T}=o[v];let $=-1*(l+1)*(T/2)-dme;const I=(t.isRightToLeft?o.length-1-v:v)*e.lineHeight+m-dme;o[v].startX=$,o[v].startY=I;for(let A=w;A<=_;A++){const k=n[A];if(YY(k.code))continue;const R=new dke($+k.metrics.left,I-k.metrics.top,k,i);$+=k.metrics.advance,r.push(R)}}return new o_t(r,o,e)}const LZt=50;function RZt(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:n,spatialReference:s}=t;return new or({rings:[[[e,i],[e,n],[r,n],[r,i],[e,i]]],spatialReference:s})}function fke(t){return Bi(Math.round(li(t)))}function mke(t){const e=Bi(Yrt),i=Bi(Krt);return Math.max(e,Math.min(t||i,i))}const Lw=Math.PI/180,yke=.5,$I=()=>Ce.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class Xs{constructor(e){this._t=e}static createIdentity(){return new Xs([1,0,0,0,1,0])}clone(){const e=this._t;return new Xs(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Xs([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Xs([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Xs([i,-r,0,r,i,0])}rotate(e){return Xs.multiply(this,Xs.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const n=e._t,s=i._t,o=n[0]*s[0]+n[3]*s[1],a=n[1]*s[0]+n[4]*s[1],l=n[2]*s[0]+n[5]*s[1]+s[2],c=n[0]*s[3]+n[3]*s[4],u=n[1]*s[3]+n[4]*s[4],p=n[2]*s[3]+n[5]*s[4]+s[5],m=r._t;return m[0]=o,m[1]=a,m[2]=l,m[3]=c,m[4]=u,m[5]=p,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Xs([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i,s=e[4]*i,o=-e[1]*i,a=-e[3]*i,l=e[0]*i;return new Xs([s,o,r,a,l,n])}}class Hee{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new i1(t$,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Xs.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Xs.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Xs.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const n=e.effects;if(n&&n.length>0){const s=this.executeEffects(n,i);if(s){let o=s.next();for(;o;)this.drawSymbolLayers(r,o.asJSON()),o=s.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){const r=this._resourceManager.geometryEngine;let n=new pbt(Vi.fromJSONCIM(i));for(const s of e){const o=kwt(s);o&&(n=o.execute(n,s,this.geomUnitsPerPoint(),null,r))}return n}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const n=e[r];if(!n||n.enable===!1)continue;const s=n.effects;if(s&&s.length>0){const o=this.executeEffects(s,i);if(o){let a=null;for(;(a=o.next())&&(this.drawSymbolLayer(n,a.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(n,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=u_t(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const n=Owt(r);if(n){const s=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;s&&this.pushClipPath(i);const o=n.execute(Vi.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let a=null;for(;(a=o.next())&&(this.drawMarker(e,a),!this._earlyReturn););}s&&this.popClipPath()}}else{const n=this._placementPool.acquire();if(qA(i))n.tx=i.x,n.ty=i.y,this.drawMarker(e,n);else if(zn(i)){const s=vxe(i);s&&([n.tx,n.ty]=s,this.drawMarker(e,n))}else if(To(i)){for(const s of i.paths)for(const o of s)if(n.tx=o[0],n.ty=o[1],this.drawMarker(e,n),this._earlyReturn)break}else for(const s of i.points)if(n.tx=s[0],n.ty=s[1],this.drawMarker(e,n),this._earlyReturn)break;this._placementPool.release(n)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),n=zt(e.size,Gn.CIMPictureMarker.size);if(r==null||n<=0)return;const s=r.width,o=r.height;if(!s||!o)return;const a=s/o,l=zt(e.scaleX,1),c=Xs.createIdentity(),u=e.anchorPoint;if(u){let T=u.x,$=u.y;e.anchorPointUnits!=="Absolute"&&(T*=n*a*l,$*=n),c.translate(-T,-$)}let p=zt(e.rotation);e.rotateClockwise&&(p=-p),this._mapRotation&&(p+=this._mapRotation),p&&c.rotate(p*Lw);let m=zt(e.offsetX),v=zt(e.offsetY);if(m||v){if(this._mapRotation){const T=Lw*this._mapRotation,$=Math.cos(T),I=Math.sin(T),A=m*I+v*$;m=m*$-v*I,v=A}c.translate(m,v)}const w=this.geomUnitsPerPoint();w!==1&&c.scale(w,w);const _=i.getAngle();_&&c.rotate(_),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,n),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const n=zt(e.size,Gn.CIMVectorMarker.size),s=e.frame,o=s?s.ymax-s.ymin:0,a=n&&o?n/o:1,l=Xs.createIdentity();s&&l.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const c=e.anchorPoint;if(c){let _=c.x,T=c.y;e.anchorPointUnits!=="Absolute"?s&&(_*=s.xmax-s.xmin,T*=s.ymax-s.ymin):(_/=a,T/=a),l.translate(-_,-T)}a!==1&&l.scale(a,a);let u=zt(e.rotation);e.rotateClockwise&&(u=-u),this._mapRotation&&(u+=this._mapRotation),u&&l.rotate(u*Lw);let p=zt(e.offsetX),m=zt(e.offsetY);if(p||m){if(this._mapRotation){const _=Lw*this._mapRotation,T=Math.cos(_),$=Math.sin(_),I=p*$+m*T;p=p*T-m*$,m=I}l.translate(p,m)}const v=this.geomUnitsPerPoint();v!==1&&l.scale(v,v);const w=i.getAngle();w&&l.rotate(w),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const _ of r){_!=null&&_.symbol&&_.geometry||$I().error("Invalid marker graphic",_);let T=_.textString;if(typeof T=="number"&&(T=T.toString()),this.drawSymbol(_.symbol,_.geometry,T),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!qA(i)||zt(e.height,Gn.CIMTextSymbol.height)<=0)return;const n=Xs.createIdentity();let s=zt(e.angle);s=-s,s&&n.rotate(s*Lw);const o=zt(e.offsetX),a=zt(e.offsetY);(o||a)&&n.translate(o,a);const l=this.geomUnitsPerPoint();l!==1&&n.scale(l,l),n.translate(i.x,i.y),this.push(n,!1),this.drawText(e,r),this.pop()}}class c_t extends Hee{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new Hwt(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return IVe(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(zn(e))this._processPath(e.rings,0);else if(To(e))this._processPath(e.paths,0);else if(Ea(e)){const i=wm(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const n=Math.max(.5*this.transformSize(zt(r,Gn.CIMSolidStroke.width)),.5*yke);if(zn(e))this._processPath(e.rings,n);else if(To(e))this._processPath(e.paths,n);else if(Ea(e)){const s=wm(e);s&&this._processPath(s.rings,n)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){zn(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,n=zt(e.scaleX,1);let s=n*i,o=i;const a=this._resourceManager.getResource(r);if(a!=null){const l=a.height/a.width;s=n*(i?l>1?i:i/l:a.width),o=i?l>1?i*l:i:a.height}this._merge(this.transformPt([-s/2,-o/2]),0),this._merge(this.transformPt([-s/2,o/2]),0),this._merge(this.transformPt([s/2,-o/2]),0),this._merge(this.transformPt([s/2,o/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new lke);const r=bke(e);let[n,s]=this._textRasterizer.computeTextSize(i,r);n=Bi(n),s=Bi(s);const o=this.transformSize(1)*this.reverseTransformScalar(1);n*=o,s*=o;let a=0;switch(e.horizontalAlignment){case"Left":a=n/2;break;case"Right":a=-n/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=s/2;break;case"Top":l=-s/2;break;case"Baseline":l=s/6}this._merge(this.transformPt([-n/2+a,-s/2+l]),0),this._merge(this.transformPt([-n/2+a,s/2+l]),0),this._merge(this.transformPt([n/2+a,-s/2+l]),0),this._merge(this.transformPt([n/2+a,s/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const n=r?r.length:0;if(n>1){this._merge(this.transformPt(r[0]),i);for(let s=1;s<n;s++)this._merge(this.transformPt(r[s]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class NZt extends Hee{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=Kwt(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,n,s,o){var c;const a=o*li(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/a,this._textInfo=n;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?s:0,!ge("esri-mobile")){const u=Bi(Grt*window.devicePixelRatio),p=Bi(qrt);!(((i==null?void 0:i.type)==="CIMLineSymbol"||(i==null?void 0:i.type)==="CIMPolygonSymbol")&&((c=i.symbolLayers)!=null&&c.some(Hht)))&&(i==null?void 0:i.type)!=="CIMMeshSymbol"&&(ndt(i)??0)<p&&(this._searchDistPoint=u)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){var r;return((r=e.at(-1))==null?void 0:r.type)==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,n,s,o,a){a!=null?this._hittestSvgPath(e,a,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,n=zt(e.scaleX,1),s=this._resourceManager.getResource(r);if(s==null||s.height===0||i===0)return;const o=i*this.geomUnitsPerPoint(),a=o*n*(s.width/s.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<a/2+c&&Math.abs(l[1])<o/2+c&&(this._earlyReturn=!0)}drawText(e,i){var w;const r=this._textInfo;if(!r)return;const n=r.get(e);if(!n||!n.glyphMosaicItems.glyphs.length)return;const s=fke(zt(e.height,Gn.CIMTextSymbol.height)),{lineGapType:o,lineGap:a}=e,l=o?vke(o,zt(a),s):0,c=((w=e.callout)==null?void 0:w.type)==="CIMBackgroundCallout",u=pke(n.glyphMosaicItems,{scale:s/Q$e,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:mke(e.lineWidth),lineHeight:X$e*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),p=this.reverseTransformPt(this._searchPoint),m=p[0],v=p[1];for(const _ of u.glyphs)if(m>_.xTopLeft&&m<_.xBottomRight&&v>-_.yBottomRight&&v<-_.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(Ea(e)){const n=e;i=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(zn(e))i=e.rings;else{if(!To(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);h_t(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&fme(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=Ywt()),this._path??(this._path=cke("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,n=0){const s=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),o=this.reverseTransformPt(this._searchPoint),a=Bn();MX(a,e);const l={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]},c=this._getSvgPath();c.setAttribute("d",i);const u=c.getBBox();let p=Math.max(u.width/l.width,u.height/l.height),m=1;const v=2*s*p;v<1&&(m=2/v,p*=m,u.x*=m,u.y*=m,u.width*=m,u.height*=m);const w=1+n*p/2,_=this._getCanvasContext(u.width+2*w,u.height+2*w);_.setTransform(m,0,0,m,-u.x+w,-u.y+w);const T=new Path2D(i);r?_.fill(T):(_.lineWidth=n*(p/m),_.stroke(T));const $=(l.width*p-u.width)/2,I=(l.height*p-u.height)/2,A=Math.floor((o[0]-l.x-s)*p-$+w),k=Math.floor((l.height-(o[1]-l.y)-s)*p+I+w),R=Math.ceil(2*s*p),F=Math.ceil(2*s*p),B=_.getImageData(A,k,R,F).data;for(let q=3;q<B.length;q+=4)if(B[q]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(Ea(e)){const n=e;r=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(zn(e))r=e.rings;else{if(!To(e))return;r=e.paths}fme(this.reverseTransformPt(this._searchPoint),r,zt(i,Gn.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class gke extends Hee{constructor(e,i,r,n){super(i,r),this._applyAdditionalRenderProps=n,this._colorSubstitutionHelper=new fbt,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(zn(e))this._buildPath(e.rings,!0);else if(To(e))this._buildPath(e.paths,!0);else if(Ea(e))this._buildPath(wm(e).rings,!0);else{if(!b2(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,n,s,o){if(!e||!i||r===0)return;if(zn(e))this._buildPath(e.rings,!0);else if(To(e))this._buildPath(e.paths,!1);else{if(!Ea(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(wm(e).rings,!0)}const a=this._ctx;a.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",a.lineWidth=Math.max(this.transformSize(r),yke),this._setCapStyle(n),this._setJoinStyle(s),a.miterLimit=o,a.stroke()}pushClipPath(e){if(this._ctx.save(),zn(e))this._buildPath(e.rings,!0);else if(To(e))this._buildPath(e.paths,!0);else{if(!Ea(e))return;this._buildPath(wm(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:n,tintColor:s}=e,o=zt(e.scaleX,1),a=this._resourceManager.getResource(n);if(a==null)return;let l=i*(a.width/a.height),c=i;i||(l=a.width,c=a.height);const u=Ix(n)||"src"in a&&Ix(a.src);let p="getFrame"in a?VV(a):a;r&&(p=this._colorSubstitutionHelper.applyColorSubstitution(p,r)),this._applyAdditionalRenderProps&&!u&&s&&(p=this._colorSubstitutionHelper.tintImageData(p,s));const m=this.transformPt([0,0]),[v,w]=this.getTransformAngle(),_=this.transformSize(1),T=this._ctx;T.save(),T.setTransform({m11:o*_*v,m12:o*_*w,m21:-_*w,m22:_*v,m41:m[0],m42:m[1]}),T.drawImage(p,-l/2,-c/2,l,c),T.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new lke);const r=bke(e,this.transformSize(Bi(1))),n=this._textRasterizer.rasterizeText(i,r);if(!n)return;const{size:s,anchorX:o,anchorY:a,canvas:l}=n,c=s[0]*(o+.5),u=s[1]*(a-.5),p=this._ctx,m=this.transformPt([0,0]),[v,w]=this.getTransformAngle(),_=1;p.save(),p.setTransform({m11:_*v,m12:_*w,m21:-1*w,m22:_*v,m41:m[0]-_*c,m42:m[1]+_*u}),p.drawImage(l,0,0),p.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:n,offsetX:s,offsetY:o,rotation:a,scaleX:l,tintColor:c,url:u}=i;const p=this._resourceManager.getResource(u);if(p==null)return;if(zn(e))this._buildPath(e.rings,!0);else if(To(e))this._buildPath(e.paths,!0);else if(Ea(e))this._buildPath(wm(e).rings,!0);else{if(!b2(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const m=this._ctx,v=Ix(u)||"src"in p&&Ix(p.src);let w,_="getFrame"in p?VV(p):p;if(r&&(_=this._colorSubstitutionHelper.applyColorSubstitution(_,r)),this._applyAdditionalRenderProps){v||c&&(_=this._colorSubstitutionHelper.tintImageData(_,c)),w=m.createPattern(_,"repeat");const T=this.transformSize(1);a||(a=0),s?s*=T:s=0,o?o*=T:o=0,n&&(n*=T);const $=n?n/p.height:1,I=l&&n?l*n/p.width:1;if(a!==0||$!==1||I!==1||s!==0||o!==0){const A=new DOMMatrix;A.rotateSelf(0,0,-a).translateSelf(s,o).scaleSelf(I,$,1),w.setTransform(A)}}else w=m.createPattern(_,"repeat");m.save(),m.fillStyle=w,m.fill("evenodd"),m.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:n,joinStyle:s,miterLimit:o,tintColor:a,url:l,width:c}=i;const u=this._resourceManager.getResource(l);if(u==null)return;let p;if(zn(e))p=e.rings;else if(To(e))p=e.paths;else{if(!Ea(e))return b2(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;p=wm(e).rings}c||(c=u.width);const m=Ix(l)||"src"in u&&Ix(u.src);let v="getFrame"in u?VV(u):u;r&&(v=this._colorSubstitutionHelper.applyColorSubstitution(v,r)),this._applyAdditionalRenderProps&&(m||a&&(v=this._colorSubstitutionHelper.tintImageData(v,a)));const w=Math.max(this.transformSize(li(c)),.5),_=w/v.width,T=this._ctx,$=T.createPattern(v,"repeat-y");let I,A;T.save(),this._setCapStyle(n),this._setJoinStyle(s),o!==void 0&&(T.miterLimit=o),T.lineWidth=w;for(let k of p)if(k=le(k),mme(k),k&&!(k.length<=1)){I=this.transformPt(k[0]);for(let R=1;R<k.length;R++){A=this.transformPt(k[R]);const F=d_t(I,A),B=new DOMMatrix;B.translateSelf(0,I[1]-w/2).scaleSelf(_,_,1).rotateSelf(0,0,90-F),$.setTransform(B),T.strokeStyle=$,T.beginPath(),T.moveTo(I[0],I[1]),T.lineTo(A[0],A[1]),T.stroke(),I=A}}T.restore()}drawGradientFill(e,i){if(!e)return;let r;if(zn(e))r=e.rings;else if(To(e))r=e.paths;else{if(!Ea(e))return void $I().error("Unable to draw gradient fill");r=wm(e).rings}this._buildPath(r,!0);const{angle:n,gradientMethod:s,gradientSize:o,gradientSizeUnits:a}=i,l=Gn.CIMGradientFill,c=i.gradientType??l.gradientType,u=-NT(n??0),p=LVe();for(const $ of r){const I=$?$.length:0;if(I>1)for(let A=0;A<I;A++){let k=this.transformPt($[A]);s!=="Linear"&&s!=="Rectangular"||(k=Rf(k,-u)),xC(p,k)}}const[m,v,w,_]=p,T=this._ctx;switch(T.save(),s){case"Buffered":$I().error(`Gradient method "${s}" currently unsupported.`);break;case"Linear":{const $=(v+_)/2,I=a==="Absolute"?this.transformSize(li(o)):qM(o,l.gradientSize)*(w-m),[A,k]=c==="Discrete"?[w,w-I]:[m+I,m],R=Rf([A,$],u),F=Rf([k,$],u),B=T.createLinearGradient(R[0],R[1],F[0],F[1]);ZR(B,i),T.fillStyle=B,T.fill("evenodd");break}case"Circular":{const $=kae(p),I=PVe(p)/2,A=a==="Absolute"?this.transformSize(li(o)):qM(o,l.gradientSize)*I,[k,R]=c==="Discrete"?[I,I-A]:[A,0],F=T.createRadialGradient($[0],$[1],k,$[0],$[1],R);ZR(F,i),T.fillStyle=F,T.fill("evenodd");break}case"Rectangular":{const $=kae(p),I=$[0],A=$[1],k=Rf($,u),R=(Q,te,re,ee,ye,ne,ue,he)=>{T.save(),this.pushClipPath(e);const Ne=Rf([ye,ne],u),X=Rf([ue,he],u);T.beginPath(),T.moveTo(k[0],k[1]),T.lineTo(Ne[0],Ne[1]),T.lineTo(X[0],X[1]),T.lineTo(k[0],k[1]),T.clip();const _e=Rf([Q,te],u),ke=Rf([re,ee],u),qe=T.createLinearGradient(_e[0],_e[1],ke[0],ke[1]);ZR(qe,i),T.fillStyle=qe,T.fill("evenodd"),T.restore()};let F=a==="Absolute"?this.transformSize(li(o)):qM(o,l.gradientSize)*(Nj(p)/2),[B,q]=c==="Discrete"?[w,w-F]:[I+F,I];R(B,A,q,A,w,v,w,_),[B,q]=c==="Discrete"?[m,m+F]:[I-F,I],R(B,A,q,A,m,_,m,v),F=a==="Absolute"?this.transformSize(li(o)):qM(o,l.gradientSize)*(Dj(p)/2);let[Y,J]=c==="Discrete"?[_,_-F]:[A+F,A];R(I,Y,I,J,w,_,m,_),[Y,J]=c==="Discrete"?[v,v+F]:[A-F,A],R(I,Y,I,J,m,v,w,v);break}}T.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:n,gradientSize:s,gradientSizeUnits:o,joinStyle:a,miterLimit:l,width:c}=i;if(!e||c===0)return;let u;if(zn(e))u=e.rings;else if(To(e))u=e.paths;else{if(!Ea(e))return void $I().error("Unable to draw gradient stroke");u=wm(e).rings}const p=i.gradientType??Gn.CIMGradientStroke.gradientType,m=Math.max(this.transformSize(li(c)),.5),v=this._ctx;let w,_;v.save(),this._setCapStyle(r),this._setJoinStyle(a),l!==void 0&&(v.miterLimit=l),v.lineWidth=m;for(let T of u){if(T=le(T),mme(T),!T||T.length<=1)continue;let $=0;w=this.transformPt(T[0]);for(let k=1;k<T.length;k++){_=this.transformPt(T[k]);const R=_[0]-w[0],F=_[1]-w[1];$+=Math.sqrt(R*R+F*F),w=_}const I=o==="Absolute"?this.transformSize(li(s)):qM(s,Gn.CIMGradientStroke.gradientSize)*(n==="AcrossLine"?m:$);let A=0;w=this.transformPt(T[0]);for(let k=1;k<T.length;k++){_=this.transformPt(T[k]);const R=_[0]-w[0],F=_[1]-w[1],B=Math.sqrt(R*R+F*F);let q,Y,J,Q;switch(n){case"AcrossLine":{const[re,ee]=Rf([R/B,F/B],-Math.PI/2),ye=m/2,ne=p==="Discrete"?ye:I-ye;q=(w[0]+_[0])/2+re*ne,Y=(w[1]+_[1])/2+ee*ne,J=q-re*I,Q=Y-ee*I;break}case"AlongLine":{const re=R/B,ee=F/B;p==="Discrete"?(q=w[0]-re*A,Y=w[1]-ee*A,J=q+re*I,Q=Y+ee*I):(J=w[0]+re*($-A),Q=w[1]+ee*($-A),q=J-re*I,Y=Q-ee*I);break}default:return $I().error("Unrecognized gradient method:",n),void v.restore()}const te=v.createLinearGradient(q,Y,J,Q);ZR(te,i),v.strokeStyle=te,v.beginPath(),v.moveTo(w[0],w[1]),v.lineTo(_[0],_[1]),v.stroke(),A+=B,w=_}}v.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const n of e){const s=n?n.length:0;if(s>1){let o=this.transformPt(n[0]);r.moveTo(o[0],o[1]);for(let a=1;a<s;a++)o=this.transformPt(n[a]),r.lineTo(o[0],o[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case ul.Butt:this._ctx.lineCap="butt";break;case ul.Round:this._ctx.lineCap="round";break;case ul.Square:this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case vu.Bevel:this._ctx.lineJoin="bevel";break;case vu.Round:this._ctx.lineJoin="round";break;case vu.Miter:this._ctx.lineJoin="miter"}}}function u_t(t,e,i){let r=zt(t.separation,Gn.CIMHatchFill.separation)*i,n=zt(t.rotation);if(r===0)return null;r<0&&(r=-r);let s=0;const o=.5*r;for(;s>o;)s-=r;for(;s<-o;)s+=r;const a=Bn();MX(a,e),a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;n>180;)n-=180;for(;n<0;)n+=180;const c=Math.cos(n*Lw),u=Math.sin(n*Lw),p=-r*u,m=r*c;let v,w,_,T;s=zt(t.offsetX)*i*u-zt(t.offsetY)*i*c,v=_=Number.MAX_VALUE,w=T=-Number.MAX_VALUE;for(const B of l){const q=B[0],Y=B[1],J=c*q+u*Y,Q=-u*q+c*Y;v=Math.min(v,J),_=Math.min(_,Q),w=Math.max(w,J),T=Math.max(T,Q)}_=Math.floor(_/r)*r;let $=c*v-u*_-p*s/r,I=u*v+c*_-m*s/r,A=c*w-u*_-p*s/r,k=u*w+c*_-m*s/r;const R=1+Math.round((T-_)/r),F=[];for(let B=0;B<R;B++)$+=p,I+=m,A+=p,k+=m,F.push([[$,I],[A,k]]);return{paths:F}}function h_t(t,e){let i=0;for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];o[1]>t[1]!=a[1]>t[1]&&((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0])>0?i++:i--)}}return i!==0}function fme(t,e,i){for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];let l=(a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]);if(l===0)continue;l=Math.sqrt(l);const c=((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0]))/l;if(Math.abs(c)<i){const u=((a[0]-o[0])*(t[0]-o[0])+(a[1]-o[1])*(t[1]-o[1]))/l;if(u>-i&&u<l+i)return!0}}}return!1}function d_t(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const wm=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,vke=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function bke(t,e=1){var A;const i=GIe(t),r=VIe(t.fontStyleName),n=t.fontFamilyName??jee,{weight:s,style:o}=r,a=e*(t.height||5),l=Jht(t.horizontalAlignment),c=Xht(t.verticalAlignment),u=fA(t),p=fA(t.haloSymbol),m=p!=null?e*(t.haloSize??0):0,v=oF(t.symbol),w=e*(aF(t.symbol)||0),_=((A=t.callout)==null?void 0:A.type)==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,T=fA(_),$=aF(_),I=oF(_);return{color:u,size:a,horizontalAlignment:l,verticalAlignment:c,font:{family:n,style:Yht(o),weight:Kht(s),decoration:i},outline:{size:w||0,color:v},halo:{size:m||0,color:p,style:o},backgroundColor:T,borderLine:$!=null&&I!=null?{size:$,color:I}:null,pixelRatio:1,premultiplyColors:!0}}const p_t=1e-4;function mme(t){let e,i,r,n,s,o=t[0],a=1;for(;a<t.length;)e=t[a][0]-o[0],i=t[a][1]-o[1],n=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(n-r)<=p_t?(t.splice(a-1,1),o=s):(s=o,o=t[a],a++),r=n}const JR=Number.POSITIVE_INFINITY,Wee=Math.PI,DZt=2*Wee,f_t=128/Wee,m_t=256/360,FZt=Wee/180,y_t=1/Math.LN2;function wke(t,e){return(t%=e)>=0?t:t+e}function zZt(t){return wke(t*f_t,256)}function jZt(t){return wke(t*m_t,256)}function UZt(t){return Math.log(t)*y_t}function BZt(t,e,i){return t*(1-i)+e*i}const g_t=8,v_t=14,b_t=16;function VZt(t){return g_t+Math.max((t-v_t)*b_t,0)}function GZt(t,e,i){let r,n,s,o=0;for(const a of i){r=a.length;for(let l=1;l<r;++l)n=a[l-1],s=a[l],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?o++:o--)}return o!==0}function qZt(t,e,i,r){let n,s,o,a;const l=r*r;for(const c of i){const u=c.length;if(!(u<2)){n=c[0].x,s=c[0].y;for(let p=1;p<u;++p){if(o=c[p].x,a=c[p].y,fVe(t,e,n,s,o,a)<l)return!0;n=o,s=a}}}return!1}function HZt(t,e,i,r,n,s,o){const a=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,o))-i;return a*a+l*l<=t*t}function WZt(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new ai(0,0),n=new ai(0,0),s=new ai(0,0);for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){const u=a[c-1],p=a[c],m=a[c+1];c===0?r.setCoords(0,0):r.assignSub(p,u).normalize().rightPerpendicular(),c===a.length-1?n.setCoords(0,0):n.assignSub(m,p).normalize().rightPerpendicular(),s.assignAdd(r,n).normalize();const v=s.x*n.x+s.y*n.y;v!==0&&s.scale(1/v),l.push(ai.add(p,s.scale(e)))}i.push(l)}return i}function ZZt(t,e,i,r){const n=new ai(t[0],t[1]);if(n.scale(r),e==="viewport"){const s=-i*(Math.PI/180),o=Math.cos(s),a=Math.sin(s);n.rotate(o,a)}return n}const _ke=Math.PI,w_t=_ke/2,yme=Math.PI/180,HV=96/72,__t=1.4142135623730951,gme=2,vme=4,kF=()=>Ce.getLogger("esri.symbols.cim.CIMSymbolHelper");function YZt(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=ea.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=ea.fromPictureMarker(t);break;case"simple-line":e=ea.fromSimpleLineSymbol(t);break;case"simple-fill":e=ea.fromSimpleFillSymbol(t);break;case"picture-fill":e=ea.fromPictureFillSymbol(t);break;case"text":e=ea.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function cD(t,e,i){switch(e.type){case"CIMSymbolReference":return cD(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new t$;t.drawMarker(e,r);break}}return t.envelope()}function x_t(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function S_t(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(zt(t.offsetX)),Math.abs(zt(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function bme(t){if(!t)return 0;let e=0;for(const i of t)e+=S_t(i);return e}class KZt{static getSymbolInflateSize(e,i,r,n,s){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,n,s):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,n){let s=!0;const o=Bn();if(i!=null&&i.markerGraphics)for(const a of i.markerGraphics){const l=[0,0,0,0];a.geometry&&(MX(o,a.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,a.symbol,r,0,n),o[0]+=l[0],o[1]+=l[1],o[2]+=l[2],o[3]+=l[3],s?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],s=!1):(e[0]=Math.min(e[0],o[0]),e[1]=Math.min(e[1],o[1]),e[2]=Math.max(e[2],o[2]),e[3]=Math.max(e[3],o[3])))}return e}static _getInflateSize(e,i,r,n,s){if(I_t(i)){const o=this._getLayersInflateSize(e,i.symbolLayers,r,n,s),a=bme(i.effects);return a>0&&(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a),o}return this._getTextInflatedSize(e,i,s)}static _getLayersInflateSize(e,i,r,n,s){let o=!0;if(!i)return e;for(const a of i){if(!a)continue;let l=[0,0,0,0];switch(a.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const u=a;let p=u.width;p!=null&&(u.capStyle===ul.Square||u.joinStyle===vu.Miter?p/=__t:p/=2,l[0]=-p,l[1]=-p,l[2]=p,l[3]=p);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const u=a;if(a.type==="CIMVectorMarker"){const _=a;if(l=this._vectorMarkerBounds(l,_,r,s),_.frame){const T=(_.frame.xmin+_.frame.xmax)/2,$=(_.frame.ymin+_.frame.ymax)/2;if(l[0]-=T,l[1]-=$,l[2]-=T,l[3]-=$,_.size!=null){const I=_.size/(_.frame.ymax-_.frame.ymin);l[0]*=I,l[1]*=I,l[2]*=I,l[3]*=I}}}else if(a.type==="CIMPictureMarker"){const _=a,T=r.getResource(_.url);let $=1;if(T!=null&&T.height&&($=T.width/T.height),u.size!=null){const I=u.size/2,A=u.size*$*_.scaleX/2;l=[-A,-I,A,I]}}else if(u.size!=null){const _=u.size/2;l=[-_,-_,_,_]}if(u.anchorPoint){let _,T;u.anchorPointUnits==="Absolute"?(_=u.anchorPoint.x,T=u.anchorPoint.y):(_=u.anchorPoint.x*(l[2]-l[0]),T=u.anchorPoint.y*(l[3]-l[1]));const $=1.25*Math.sqrt(_*_+T*T);l[0]-=$,l[1]-=$,l[2]+=$,l[3]+=$}let p=zt(u.rotation);if(u.rotateClockwise&&(p=-p),n&&(p-=n),p){const _=yme*p,T=Math.cos(_),$=Math.sin(_),I=Bn([JR,JR,-JR,-JR]);xC(I,[l[0]*T-l[1]*$,l[0]*$+l[1]*T]),xC(I,[l[0]*T-l[3]*$,l[0]*$+l[3]*T]),xC(I,[l[2]*T-l[1]*$,l[2]*$+l[1]*T]),xC(I,[l[2]*T-l[3]*$,l[2]*$+l[3]*T]),l=I}let m=zt(u.offsetX),v=zt(u.offsetY);if(n){const _=yme*n,T=Math.cos(_),$=Math.sin(_),I=m*$+v*T;m=m*T-v*$,v=I}l[0]+=m,l[1]+=v,l[2]+=m,l[3]+=v;const w=x_t(u.markerPlacement);w>0&&(l[0]-=w,l[1]-=w,l[2]+=w,l[3]+=w);break}}const c=bme(a.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),o?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],o=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){var m;const n=fke(i.height??Gn.CIMTextSymbol.height);if(e[0]=-n/2,e[1]=-n/2,e[2]=n/2,e[3]=n/2,!r)return e;const s=r.get(i);if(!s||!s.glyphMosaicItems.glyphs.length)return e;const{lineGapType:o,lineGap:a}=i,l=o?vke(o,a??0,n):0,c=((m=i.callout)==null?void 0:m.type)==="CIMBackgroundCallout",u=pke(s.glyphMosaicItems,{scale:n/Q$e,angle:zt(i.angle),xOffset:zt(i.offsetX),yOffset:zt(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:mke(i.lineWidth),lineHeight:X$e*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,p=Math.sqrt(u.width*u.width+u.height*u.height);return e[0]-=u.x+p,e[1]-=u.y-p,e[2]+=u.x+p,e[3]+=-u.y+p,e}}class ea{static getEnvelope(e,i,r){if(!e)return null;const n=new c_t(r);if(Array.isArray(e)){let s;for(const o of e)s?s.union(cD(n,o,i)):s=cD(n,o,i);return s}return cD(n,e,i)}static getTextureInfo(e,i,r,n,s){const o=n??this.getEnvelope(e,null,i);if(!o)return[0,0,0,0,1];const a=Math.max(o.width,o.height)*HV;let l=s!=null?Math.max(s/a,1):1;l*=HV,o.x*=l,o.y*=l,o.width*=l,o.height*=l,o.width=Math.max(Math.ceil(o.x+o.width)-Math.floor(o.x),1)-1,o.height=Math.max(Math.ceil(o.y+o.height)-Math.floor(o.y),1)-1;let c=o.x+.5*o.width,u=o.y+.5*o.height;return c+=o.x-Math.floor(o.x),u+=o.y-Math.floor(o.y),n||(o.width+=r,o.height+=r,c+=r/2,u+=r/2),[o.width,o.height,c,u,l]}static getTextureAnchor(e,i,r){const[n,s,o,a,l]=this.getTextureInfo(e,i,gme,null,r);return[-o/n,-a/s,s/l*HV]}static rasterize(e,i,r,n,s=!0,o){const[a,l,c,u,p]=this.getTextureInfo(i,n,gme,r,o);e.width=a,e.height=l;const m=e.getContext("2d",{willReadFrequently:!0}),v=Xs.createScale(p,-p);v.translate(.5*a-c,.5*l+u);const w=new gke(m,n,v);switch(i.type){case"CIMPointSymbol":{const $={type:"point",x:0,y:0};w.drawSymbol(i,$);break}case"CIMVectorMarker":{const $=new t$;w.drawMarker(i,$);break}}const _=m.getImageData(0,0,e.width,e.height),T=new Uint8Array(_.data);if(s){let $;for(let I=0;I<T.length;I+=4)$=T[I+3]/255,T[I]=T[I]*$,T[I+1]=T[I+1]*$,T[I+2]=T[I+2]*$}return[T,e.width,e.height,-c/a,-u/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:ea.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:n,xoffset:s,xscale:o,yoffset:a,yscale:l}=e,c=[],u={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const _=wme(r);_&&c.push(_)}let p=e.url;e.type==="esriPFS"&&e.imageData&&(p=e.imageData);const m="angle"in e?e.angle??0:0,v=(n??0)*(o||1),w=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:d2.Picture,tintColor:null,url:p,height:w,width:v,offsetX:zt(s),offsetY:zt(a),rotation:zt(-m),colorSubstitutions:null}),u}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:n}=e,s=[],o={type:"CIMPolygonSymbol",symbolLayers:s};if(n){const a=wme(n);a&&s.push(a)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const a={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:Kl(i),capStyle:ul.Butt,joinStyle:vu.Miter,width:.75}]};let l=0;const c=Bi(A_t(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}s.push({type:"CIMHatchFill",lineSymbol:a,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?s.push({type:"CIMHatchFill",lineSymbol:le(a),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||s.push({type:"CIMHatchFill",lineSymbol:le(a),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||s.push({type:"CIMSolidFill",enable:!0,color:Kl(i)});return o}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:n,marker:s,miterLimit:o,style:a,width:l}=e;let c=null;a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:KY(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const u=[];if(s){let p;switch(s.placement){case"begin-end":p=Ip.Both;break;case"begin":p=Ip.JustBegin;break;case"end":p=Ip.JustEnd;break;default:p=Ip.None}const m=ea.fromSimpleMarker(s,l,r).symbolLayers[0];m.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:p,offsetAlongLine:0},u.push(m)}return u.push({type:"CIMSolidStroke",color:a!=="none"&&a!=="esriSLSNull"?Kl(r):[0,0,0,0],capStyle:Ske(i),joinStyle:Eke(n),miterLimit:o,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:u}}static fromPictureMarker(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e;let a=e.url;return e.type==="esriPMS"&&e.imageData&&(a=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:d2.Picture,tintColor:null,url:a,size:r,width:n,offsetX:zt(s),offsetY:zt(o),rotation:zt(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:n,haloColor:s,haloSize:o,horizontalAlignment:a,kerning:l,lineWidth:c,text:u,verticalAlignment:p,xoffset:m,yoffset:v,backgroundColor:w,borderLineColor:_,borderLineSize:T}=e;let $,I,A,k,R,F;n&&($=n.family,I=n.style,A=n.weight,k=n.size,R=n.decoration);let B=!1;return u&&(B=X0t(u)[1]),(w||T)&&(F={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:Kl(w)},{type:"CIMSolidStroke",color:Kl(_),width:T}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:cY.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:nY.Normal,fontEncoding:sY.Unicode,fontFamilyName:$||"Arial",fontStyleName:$_t(I,A),fontType:oY.Unspecified,haloSize:o,height:k,hinting:hY.Default,horizontalAlignment:E_t(a??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:zt(m),offsetY:zt(v),strikethrough:R==="line-through",underline:R==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Kl(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Kl(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:B?sF.RTL:sF.LTR,verticalAlignment:T_t(p??"baseline"),verticalGlyphOrientation:pY.Right,wordSpacing:100,billboardMode3D:uY.FaceNearPlane,callout:F}}static createPictureMarkerRasterizationParam(e){var l,c;const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e,a=e.url??((l=e.source)==null?void 0:l.url)??((c=e.source)==null?void 0:c.imageData);return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:d2.Picture,tintColor:null,url:a,size:r,width:n,offsetX:zt(s),offsetY:zt(o),rotation:zt(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:n,yoffset:s,url:o}=e;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:d2.Picture,tintColor:null,url:o,width:i,height:r,offsetX:zt(n),offsetY:zt(s),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:n}=e,s=e.color??r;if(n==="path"||n==="esriSMSPath"){const p=[];if("outline"in e&&e.outline){const w=e.outline;p.push({type:"CIMSolidStroke",enable:!0,width:w.width,color:Kl(w.color),path:e.path})}p.push({type:"CIMSolidFill",enable:!0,color:Kl(s),path:e.path});const[m,v]=eC("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-zt(e.angle),size:zt(e.size||6),offsetX:zt(e.xoffset),offsetY:zt(e.yoffset),scaleSymbolsProportionally:!1,frame:m,markerGraphics:[{type:"CIMMarkerGraphic",geometry:v,symbol:{type:"CIMPolygonSymbol",symbolLayers:p}}]}]}}const o=[];let a,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const p=e.outline,m=p.style!=="solid"&&p.style!=="esriSLSSolid";[a,l]=m?eC(n,e.size):eC(n);const v=p.width??L4.width;if(m){const T=v/e.size,$=(a.xmax-a.xmin)*T/2,I=(a.ymax-a.ymin)*T/2;a.xmin-=$,a.xmax+=$,a.ymin-=I,a.ymax+=I,c&&(c+=v)}const w=e.style!=="cross"&&e.style!=="x"||(e==null?void 0:e.outline.style)==="dot"||(e==null?void 0:e.outline.style)==="short-dot"?_o.HalfGap:_o.FullPattern,_=m?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:KY(p.style,null).map((T=>p.width&&p.width>0?T*p.width:T)),lineDashEnding:w,controlPointEnding:_o.FullPattern}]:void 0;o.push({type:"CIMSolidStroke",capStyle:m?ul.Round:ul.Butt,enable:!0,width:v,color:Kl(p.color),effects:_})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[a,l]=eC(n):([a,l]=eC(n),o.push({type:"CIMSolidStroke",enable:!0,width:i,color:Kl(s)}));o.push({type:"CIMSolidFill",enable:!0,color:Kl(s)});const u={type:"CIMPolygonSymbol",symbolLayers:o};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:zt(-e.angle),size:zt(c||6*i),offsetX:zt(e.xoffset),offsetY:zt(e.yoffset),scaleSymbolsProportionally:!1,frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:u}]}]}}static fromCIMHatchFill(e,i){var l;const r=i*(e.separation??Gn.CIMHatchFill.separation),n=r/2,s=le(e.lineSymbol);(l=s.symbolLayers)==null||l.forEach((c=>{var u;switch(c.type){case"CIMSolidStroke":c.width!=null&&(c.width*=i),(u=c.effects)==null||u.forEach((p=>{if(p.type==="CIMGeometricEffectDashes"){const m=p.dashTemplate;p.dashTemplate=m==null?void 0:m.map((v=>v*i))}}));break;case"CIMVectorMarker":{c.size!=null&&(c.size*=i);const p=c.markerPlacement;p!=null&&"placementTemplate"in p&&(p.placementTemplate=p.placementTemplate.map((m=>m*i)));break}}}));let o=this._getLineSymbolPeriod(s)||vme;for(;o<vme;)o*=2;const a=o/2;return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-a,0],[a,0]]]},symbol:s}],size:r}}static fetchResources(e,i,r,n=null){return e&&i&&xke(e,(s=>{P_t(s,i,r),"url"in s&&s.url&&r.push(i.fetchResource(s.url,{signal:n}))})),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const n of e.symbolLayers)if(n.type==="CIMVectorMarker"&&n.markerGraphics)for(const s of n.markerGraphics)s!=null&&s.symbol&&ea.fetchFonts(s.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:n,fontStyleName:s}=e;if(!n||n.toLowerCase()==="calcitewebcoreicons")return;const{style:o,weight:a}=VIe(s),l=GIe(e),c=new tc({family:n,style:o,weight:a,decoration:l});r.push(i.loadFont(c).catch((()=>{kF().error(`Unsupported font ${n} in CIM symbol`)})))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const n=this._getEffectsRepeat(r.effects);if(n)return n;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=this._getPlacementRepeat(r.markerPlacement);if(s)return s}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let n=0;for(const s of r)n+=s;return 1&r.length&&(n*=2),n}break}case"CIMGeometricEffectWave":return i.period;default:kF().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const n of i)r+=+n;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const n=Math.abs(i.stepX),s=Math.abs(i.stepY),o=(i.randomness??100)/100;let a,l,c,u;if(i.gridType==="Random"){const p=Bi(Zrt),m=Math.max(Math.floor(p/n),1),v=Math.max(Math.floor(p/s),1);a=m*n/2,l=v*s/2,c=2*l;const w=new NJ(i.seed),_=o*n/1.5,T=o*s/1.5;u=[];for(let $=0;$<m;$++)for(let I=0;I<v;I++){const A=$*n-a+_*(.5-w.getFloat()),k=I*s-l+T*(.5-w.getFloat());u.push({x:A,y:k}),$===0&&u.push({x:A+2*a,y:k}),I===0&&u.push({x:A,y:k+2*l})}}else i.shiftOddRows===!0?(a=n/2,l=s,c=2*s,u=[{x:-a,y:0},{x:a,y:0},{x:0,y:l},{x:0,y:-l}]):(a=n/2,l=s/2,c=s,u=[{x:-n,y:0},{x:0,y:-s},{x:-n,y:-s},{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:-n,y:s},{x:n,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-l,ymax:l},markerGraphics:u.map((p=>({type:"CIMMarkerGraphic",geometry:p,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}))),size:c}}}function xke(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const n=r.markerGraphics;if(!n)continue;for(const s of n)if(s){const o=s.symbol;o&&xke(o,e)}}break}}}const Ske=t=>{if(!t)return ul.Butt;switch(t){case"butt":return ul.Butt;case"square":return ul.Square;case"round":return ul.Round}},Eke=t=>{if(!t)return vu.Miter;switch(t){case"miter":return vu.Miter;case"round":return vu.Round;case"bevel":return vu.Bevel}},E_t=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},T_t=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},Kl=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]},$_t=(t,e)=>{const i=M_t(e),r=C_t(t);return i&&r?`${i}-${r}`:`${i}${r}`},M_t=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},C_t=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},KY=(t,e)=>{const i=ge("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return kF().error("Unexpected: style does not require rasterization"),[0,0];default:return kF().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function I_t(t){return t.symbolLayers!==void 0}const eC=(t,e=100)=>{const i=e/2;let r,n;const s=t;if(s==="circle"||s==="esriSMSCircle"){let a=Math.acos(1-.25/i),l=Math.ceil(_ke/a/4);l===0&&(l=1),a=w_t/l,l*=4;const c=[];c.push([i,0]);for(let u=1;u<l;u++)c.push([i*Math.cos(u*a),-i*Math.sin(u*a)]);c.push([i,0]),r={rings:[c]},n={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(s==="cross"||s==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="diamond"||s==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="square"||s==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="x"||s==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="triangle"||s==="esriSMSTriangle"){const o=e*.5773502691896257,a=-o,l=2/3*e,c=l-e;r={rings:[[[a,c],[0,l],[o,c],[a,c]]]},n={xmin:a,ymin:c,xmax:o,ymax:l}}else s==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i});return[n,r]},A_t=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function P_t(t,e,i){if(!(!t.effects||e.geometryEngine!=null)){if(e.geometryEnginePromise)return void i.push(e.geometryEnginePromise);Wht(t.effects)&&(e.geometryEnginePromise=Zht(),i.push(e.geometryEnginePromise),e.geometryEnginePromise.then((r=>e.geometryEngine=r)))}}function wme(t){if(!t)return null;let e=null;const{cap:i,color:r,join:n,miterLimit:s,style:o,width:a}=t;return o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:KY(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:o!=="esriSLSNull"&&o!=="none"?Kl(r):[0,0,0,0],capStyle:Ske(i),joinStyle:Eke(n),miterLimit:s,width:a,effects:e}}let k_t=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then((s=>({width:s.width,height:s.height}))):(n=Int(e,i),this._inFlightResourceMap.set(e,n),n.then((s=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,s),{width:s.width,height:s.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return ebt(e)}};function XZt(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function O_t(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function d1(t){if(O_t(t))return t;const{originPosition:e,scale:i,translate:r}=t,n=i[0]??1,s=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?s:-s,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function ay({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function ly({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function _P({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function xP({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function Tke(t,e){return t&&e?D_t:t&&!e?R_t:!t&&e?N_t:L_t}const L_t=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=ay(t,r[0]),s=ly(t,r[1]);i.push([n,s]);for(let o=1;o<e.length;o++){const[a,l]=e[o],c=ay(t,a),u=ly(t,l);c===n&&u===s||i.push([c-n,u-s]),n=c,s=u}return i},R_t=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=ay(t,r[0]),s=ly(t,r[1]),o=_P(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,u]=e[a],p=ay(t,l),m=ly(t,c),v=_P(t,u);p===n&&m===s&&v===o||i.push([p-n,m-s,v]),n=p,s=m,o=v}return i},N_t=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=ay(t,r[0]),s=ly(t,r[1]),o=xP(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,u]=e[a],p=ay(t,l),m=ly(t,c),v=xP(t,u);p===n&&m===s&&v===o||i.push([p-n,m-s,v]),n=p,s=m,o=v}return i},D_t=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=ay(t,r[0]),s=ly(t,r[1]),o=_P(t,r[2]),a=xP(t,r[3]);i.push([n,s,o,a]);for(let l=1;l<e.length;l++){const[c,u,p,m]=e[l],v=ay(t,c),w=ly(t,u),_=_P(t,p),T=xP(t,m);v===n&&w===s&&_===o&&T===a||i.push([v-n,w-s,_,T]),n=v,s=w,o=_,a=T}return i};function F_t(t,e,i,r){const n=[],s=Tke(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=3&&n.push(a)}return n.length?n:null}function z_t(t,e,i,r){const n=[],s=Tke(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=2&&n.push(a)}return n.length?n:null}function Vk({scale:t,translate:e},i){return i*t[0]+e[0]}function Gk({scale:t,translate:e},i){return i*t[1]+e[1]}function SP({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function EP({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function Zee(t,e){return t&&e?V_t:t&&!e?U_t:!t&&e?B_t:j_t}const j_t=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=Vk(t,r[0]),s=Gk(t,r[1]);i[0]=[n,s];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let u=1;u<e.length;u++){const[p,m]=e[u];n+=l*p,s+=c*m,i[u]=[n,s]}return i},U_t=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=Vk(t,r[0]),s=Gk(t,r[1]);i[0]=[n,s,SP(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let u=1;u<e.length;u++){const[p,m,v]=e[u];n+=l*p,s+=c*m,i[u]=[n,s,SP(t,v)]}return i},B_t=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=Vk(t,r[0]),s=Gk(t,r[1]);i[0]=[n,s,EP(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let u=1;u<e.length;u++){const[p,m,v]=e[u];n+=l*p,s+=c*m,i[u]=[n,s,EP(t,v)]}return i},V_t=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=Vk(t,r[0]),s=Gk(t,r[1]);i[0]=[n,s,SP(t,r[2]),EP(t,r[3])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let u=1;u<e.length;u++){const[p,m,v,w]=e[u];n+=l*p,s+=c*m,i[u]=[n,s,SP(t,v),EP(t,w)]}return i};function $ke(t,e,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=e(t,i[n]);return r}function QZt(t,e,i){const r=d1(t);return e.x=ay(r,i.x),e.y=ly(r,i.y),i.z!=null&&(e.z=_P(r,i.z)),i.m!=null&&(e.m=xP(r,i.m)),e}function eYt(t,e,i){const r=F_t(d1(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function tYt(t,e,i){const r=z_t(d1(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function G_t(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=d1(t);e.points=Zee(r,n)(s,i.points),e.hasZ=r,e.hasM=n}return e}function q_t(t,e,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const s=d1(t);return e.x=Vk(s,i.x),e.y=Gk(s,i.y),r&&(e.z=SP(s,i.z)),n&&(e.m=EP(s,i.m)),e}function H_t(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=d1(t);e.rings=$ke(s,Zee(r,n),i.rings),e.hasZ=r,e.hasM=n}return e}function W_t(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=d1(t);e.paths=$ke(s,Zee(r,n),i.paths),e.hasZ=r,e.hasM=n}return e}function Mke(t,e,i,r,n,s){if(t==null)return null;const o=t.references("geometry")&&s?Z_t(e,r,s):e,a=t.repurposeFeature(o,n);try{return t.evaluate(a,i)}catch(l){return Ce.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const WV=new Map;function Z_t(t,e,i){const{transform:r,hasZ:n,hasM:s}=i;WV.has(e)||WV.set(e,Y_t(e));const o=WV.get(e)(t.geometry,r,n,s);return{...t,geometry:o}}function Y_t(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,n,s)=>q_t(r,e,i,n,s);case"esriGeometryPolygon":return(i,r,n,s)=>H_t(r,e,i,n,s);case"esriGeometryPolyline":return(i,r,n,s)=>W_t(r,e,i,n,s);case"esriGeometryMultipoint":return(i,r,n,s)=>G_t(r,e,i,n,s);default:return Ce.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ae("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const iYt=Object.freeze(Object.defineProperty({__proto__:null,default:Mke},Symbol.toStringTag,{value:"Module"})),K_t=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]};var nr;let Yee=(nr=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let n=!1;for(const s of r)if(s.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const s of i)s.primitiveName===e.primitiveName&&r.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)nr.findApplicableOverrides(n,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)nr.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)nr.findApplicableOverrides(n,i,r);if(e.markerPlacement&&nr.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)nr.findApplicableOverrides(n,i,r),nr.findApplicableOverrides(n.symbol,i,r)}else e.type==="CIMCharacterMarker"?nr.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?nr.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&nr.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&qIe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=jpe(e),n=e.primitiveName,s=[];for(const o of i)o.primitiveName===n&&s.push(jpe(o));return{type:"cim-effect-param",effect:r,overrides:odt(s)}}static async resolveSymbolOverrides(e,i,r,n,s,o,a){if(!(e!=null&&e.symbol))return null;let{symbol:l,primitiveOverrides:c}=e;const u=!!c;if(!u&&!n)return l;l=le(l),c=le(c);let p=!0;if(i||(i={attributes:{}},p=!1),u){if(p||(c=c.filter((m=>{var v;return!((v=m.valueExpressionInfo)!=null&&v.expression.includes("$feature"))}))),a||(c=c.filter((m=>{var v;return!((v=m.valueExpressionInfo)!=null&&v.expression.includes("$view"))}))),c.length>0){const m=Qht(i.attributes),v={spatialReference:r,fields:m,geometryType:s};await nr.createRenderExpressions(c,v),nr.evaluateOverrides(c,i,s??"esriGeometryPoint",o,a,new uP(m))}nr.applyOverrides(l,c)}return n&&nr.applyDictionaryTextOverrides(l,i,n,null),l}static async createRenderExpressions(e,i){const r=[];for(const n of e){const s=n.valueExpressionInfo;if(!s||nr._expressionToRenderExpression.has(s.expression))continue;const o=Dht(s.expression,i.spatialReference);r.push(o),o.then((a=>nr._expressionToRenderExpression.set(s.expression,a)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,n,s,o){const a={$view:{scale:s==null?void 0:s.scale}};for(const l of e){l.value&&typeof l.value=="object"&&rPe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=K_t(l.value));const c=l.valueExpressionInfo;if(!c)continue;const u=nr._expressionToRenderExpression.get(c.expression);u&&(l.value=Mke(u,i,a,r,o,n))}}static applyDictionaryTextOverrides(e,i,r,n,s="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&nr.applyDictionaryTextOverrides(a,i,r,n,e.type==="CIMTextSymbol"?e.textCase:s)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const a of o)a&&nr.applyDictionaryTextOverrides(a,i,r,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=Ght(o,r);e.textString=qht(i,a,n,s)}}}}static applyOverrides(e,i,r,n){if(e.primitiveName){for(const s of i)if(s.primitiveName===e.primitiveName){const o=Nk(s.propertyName);if(n&&n.push({cim:e,nocapPropertyName:o,value:e[o]}),r){let a=!1;for(const l of r)l.primitiveName===e.primitiveName&&(a=!0);a||r.push(s)}s.value!=null&&(e[o]=s.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)nr.applyOverrides(s,i,r,n);if(e.symbolLayers)for(const s of e.symbolLayers)nr.applyOverrides(s,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)nr.applyOverrides(s,i,r,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const s of e.markerGraphics)nr.applyOverrides(s,i,r,n),nr.applyOverrides(s.symbol,i,r,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new Ze(i).toRgba();return r[3]*=255,r}return i}},nr._expressionToRenderExpression=new Map,nr);const J_t=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:Yee},Symbol.toStringTag,{value:"Module"})),X_t=96/72;let Cke=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new k_t}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,n,s,o,a,l,c,u){if(!e)return null;const{data:p}=e;if(!p||p.type!=="CIMSymbolReference"||!p.symbol)return null;const{symbol:m}=p;o||(o=lF(m));const v=await Yee.resolveSymbolOverrides(p,i,this._spatialReference,s,o,a,l),w=this._cimResourceManager,_=[];ea.fetchResources(v,w,_),ea.fetchFonts(v,w,_),_.length>0&&await Promise.all(_);const{width:T,height:$}=r;let I=_me(o,T,$,n,u);const A=ea.getEnvelope(v,I,w);if(!A)return null;A.x===1/0&&(A.x=T+2),A.y===1/0&&(A.y=-$/2),A.width===-1/0&&(A.width=T),A.height===-1/0&&(A.height=$);let k=1,R=0,F=0;switch(m.type){case"CIMPointSymbol":case"CIMTextSymbol":{let q=1;A.width>T&&(q=T/A.width);let Y=1;A.height>$&&(Y=$/A.height),n==="preview"&&(A.width<T&&(q=T/A.width),A.height<$&&(Y=$/A.height)),k=Math.min(q,Y),R=A.x+A.width/2,F=A.y+A.height/2}break;case"CIMLineSymbol":if(u){F=A.y+A.height/2,R=A.x+A.width/2;const q=A.width-T,Y=A.height-$;I={paths:PF(I.paths,{xmin:-1*A.width/2+q,xmax:A.width/2-q,ymin:-1*A.height/2+Y,ymax:A.height/2-Y,width:A.width-2*q,height:A.height-2*Y})}}else{(c||A.height>$)&&(k=$/A.height),F=A.y+A.height/2;const q=A.x*k+T/2,Y=(A.x+A.width)*k+T/2,J=To(I)?I.paths:zn(I)?I.rings:null;if(J===null)throw new Error("Bad geometry, can't rasterise symbol!");J[0][0][0]-=q/k,J[0][2][0]-=(Y-T)/k}break;case"CIMPolygonSymbol":if(u){F=A.y+A.height/2,R=A.x+A.width/2;const q=A.width-T,Y=A.height-$;I={paths:PF(I.rings,{xmin:-1*A.width/2+q,xmax:A.width/2-q,ymin:-1*A.height/2+Y,ymax:A.height/2-Y,width:A.width-2*q,height:A.height-2*Y})}}else{R=A.x+A.width/2,F=A.y+A.height/2;const q=A.x*k+T/2,Y=(A.x+A.width)*k+T/2,J=A.y*k+$/2,Q=(A.y+A.height)*k+$/2,{rings:te}=I;q<0&&(te[0][0][0]-=q,te[0][3][0]-=q,te[0][4][0]-=q),J<0&&(te[0][0][1]+=J,te[0][1][1]+=J,te[0][4][1]+=J),Y>T&&(te[0][1][0]-=Y-T,te[0][2][0]-=Y-T),Q>$&&(te[0][2][1]+=Q-$,te[0][3][1]+=Q-$)}}const B={type:"cim",data:{type:"CIMSymbolReference",symbol:v}};return this.rasterize(B,T,$,R,F,k,o,1,I)}rasterize(e,i,r,n,s,o,a,l=0,c=null,u=window.devicePixelRatio||1){const{data:p}=e;if(!p||p.type!=="CIMSymbolReference"||!p.symbol)return null;const{symbol:m}=p,v=this._canvas,w=u*X_t;v.width=i*w,v.height=r*w,a||(a=lF(m)),c||(c=_me(a,i,r,"legend")),v.width+=2*l,v.height+=2*l;const _=v.getContext("2d",{willReadFrequently:!0}),T=Xs.createIdentity();return T.translate(-n,-s),T.scale(o*w,-o*w),T.translate(i*w/2+l,r*w/2+l),_.clearRect(0,0,v.width,v.height),new gke(_,this._cimResourceManager,T,!0).drawSymbol(m,c),_.getImageData(0,0,v.width,v.height)}};function Q_t(t,e,i,r){return e==="esriGeometryPolygon"?{rings:hme(PF(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:hme(PF(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function _me(t,e,i,r,n){const o=-e/2+1,a=e/2-1,l=i/2-1,c=-i/2+1;if(n&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const u=Q_t(n,t,e,i);if(u)return u}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return r==="legend"?{rings:[[[o,l],[a,0],[a,c],[o,c],[o,l]]]}:{rings:[[[o,l],[a,l],[a,c],[o,c],[o,l]]]}}}const nYt=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:Cke},Symbol.toStringTag,{value:"Module"})),uD=new Cke(null),XR=Bi(_n.size),xme=Bi(_n.maxSize),ZV=Bi(_n.lineWidth),e1t=1;async function t1t(t,e,i){const r=e==null?void 0:e.size;let n=r!=null&&typeof r=="object"&&"width"in r?r.width:r,s=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!n||!s)if(i==="esriGeometryPolygon")n=s=e.maxSize?Math.min(e.maxSize,XR):XR;else{const o=await Kee(t,e,i);o&&(n=o.width,s=o.height),i==="esriGeometryPolyline"&&(n=e.maxSize?Math.min(e.maxSize,ZV):ZV),n=n!=null&&isFinite(n)?Math.min(n,xme):XR,s=s!=null&&isFinite(s)?Math.max(Math.min(s,xme),e1t):XR}return e.style==="legend"&&i==="esriGeometryPolyline"&&(n=ZV),{width:n,height:s}}async function Kee(t,e={},i){var c;const r=e.cimOptions||e;i??(i=r.geometryType||lF((c=t==null?void 0:t.data)==null?void 0:c.symbol));const{feature:n,fieldMap:s,viewParams:o}=r,a=await Yee.resolveSymbolOverrides(t.data,n,null,s,i,null,o);if(!a)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:a},t.data.primitiveOverrides=void 0;const l=[];return ea.fetchResources(a,uD.resourceManager,l),ea.fetchFonts(a,uD.resourceManager,l),l.length>0&&await Promise.all(l),ea.getEnvelope(a,null,uD.resourceManager)}async function i1t(t,e={}){var F,B;const{node:i,opacity:r,symbolConfig:n}=e,s=n!=null&&typeof n=="object"&&"isSquareFill"in n&&n.isSquareFill,o=e.cimOptions||e,a=o.geometryType||lF((F=t==null?void 0:t.data)==null?void 0:F.symbol),l=await t1t(t,e,a),{feature:c,fieldMap:u}=o,p=e!=null&&e.geometry||s||a!=="esriGeometryPolygon"?"preview":"legend";let m=l;const v=l;if(e!=null&&e.geometry&&(a==="esriGeometryPolygon"||a==="esriGeometryPolyline")&&(li(l.width)<200||li(l.height)<200)){const Y=l.width>l.height?Bi(200)*l.height/l.width:Bi(200);m={width:l.width>l.height?Bi(200):Bi(200)*l.width/l.height,height:Y}}const w=await uD.rasterizeCIMSymbolAsync(t,c,m,p,u,a,null,o.viewParams,o.allowScalingUp,(B=e==null?void 0:e.geometry)==null?void 0:B.toJSON());if(!w)return null;const{width:_,height:T}=w,$=document.createElement("canvas");$.width=_,$.height=T,$.getContext("2d").putImageData(w,0,0);const I=li(v.width),A=li(v.height),k=new Image(I,A);k.src=$.toDataURL(),k.ariaLabel=e.ariaLabel??null,k.alt=e.ariaLabel??"",r!=null&&(k.style.opacity=`${r}`);let R=k;if(e.effectView!=null){const q={shape:{type:"image",x:0,y:0,width:I,height:A,src:k.src},fill:null,stroke:null,offset:[0,0]};R=e$([[q]],[I,A],e)}return i&&R&&i.appendChild(R),R}const r1t=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:Kee,previewCIMSymbol:i1t},Symbol.toStringTag,{value:"Module"})),JY=30,XY=12,QY=24,Ike=[255,255,255],OF=[200,200,200],qw=[128,128,128],n1t=20,s1t=5;function o1t(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function a1t(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function l1t(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function c1t(t){return t.declaredClass==="esri.symbols.TextSymbol"}function u1t(t,e){const i=t.length-1;return t.map(((r,n)=>zPe(r,n,i,e)))}async function h1t(t,e,i,r,n,s,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,c=o||await f1t(t,i),u=e.stops,p=!!c,m=!!l,v=e.minSize!=null&&e.maxSize!=null,w=u&&u.length>1,_=!!e.target;if(!p||!m&&!(v||w&&!_))return;const T=G4(c);let $=!1,I=null,A=null;I=T&&!w?TF([e.minDataValue,e.maxDataValue]):l??await y1t(e,c,r,n==null?void 0:n.type);const k=t==null?void 0:t.authoringInfo,R=(k==null?void 0:k.type)==="univariate-color-size",F=R&&(k==null?void 0:k.univariateTheme)==="above-and-below",B=!!Ap(t,"reference-size"),q=!!Ap(t,"spike");if(!I&&w&&(I=u.map((re=>re.value)),$=u.some((re=>!!re.label)),t.type==="flow"&&(I=TF(I)),$&&(A=u.map((re=>re.label)))),T&&I!=null&&(I==null?void 0:I.length)>2&&!F&&(I=[I[0],I[I.length-1]]),!I)return null;R&&(I==null?void 0:I.length)!==5&&(I=kke({minSize:I[0],maxSize:I[I.length-1]}));const Y=T?d1t(t,I):null,J=Kgt(c),Q=$?null:u1t(I,s);return(await Promise.all(I.map((async(re,ee)=>{let ye=T?Y[ee]:await US(e,c,re,r,n==null?void 0:n.type),ne=ye;B&&(ye*=QY/e.maxSize||1,ne=QY);const ue=b1t(c,ye,t,ee);return q&&ue.type==="cim"&&(ne=await Kee(ue)),{value:re,symbol:ue,label:$?A[ee]:Q[ee],size:ne,outlineSize:J}})))).reverse()}function d1t(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[XY,JY];if(r){const s=e[0],o=e[e.length-1],a=XY,l=JY;n=e.map((c=>a+(c-s)/(o-s)*(l-a)))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function p1t(t,e){var o;const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=t.visualVariables)==null?void 0:o.some((a=>a.type==="color")))&&(n.type.includes("3d")?Ake(n):Pke(n)),n}async function f1t(t,e){var n,s,o,a,l;if(t.type==="flow")return jPe(t,e);if(t.type==="pie-chart")return new Or({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new Hr});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const c=t.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(t.type==="unique-value"){const c=t.uniqueValueInfos;i=(s=c==null?void 0:c[0])==null?void 0:s.symbol,r=c!=null&&c.length>1}if(!i||m1t(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))Ake(i);else if(Ap(t,"reference-size")&&i.type==="cim")kee(i,{color:e??(t.type!=="class-breaks"?new Ze(OF):null)});else if(Ap(t,"spike")&&i.type==="cim"){const c=new Ze(OF),u=new Ze(qw),p=((o=i.data.symbol)==null?void 0:o.type)==="CIMPointSymbol"?i.data.symbol:null,m=!!((l=(a=p==null?void 0:p.symbolLayers)==null?void 0:a.find((({type:_})=>_==="CIMSolidStroke")))!=null&&l.colorLocked);let v,w=e??void 0;if(w){const _=hPe(w),T=MMe();(!T&&_>225||T&&_<25)&&(w=c,v=m?u:c)}else w=c,v=m?u:c;VPe(i,{color:w,strokeColor:v})}else Pke(i);return i}function m1t(t){var e;return tf(t)?((e=t.symbolLayers)==null?void 0:e.some((i=>(i==null?void 0:i.type)==="fill")))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function Ake(t){t.type==="line-3d"?t.symbolLayers.forEach((e=>{e.material={color:qw}})):t.symbolLayers.forEach((e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:OF}:(e.material={color:Ike},e.outline={color:qw,size:1.5})}))}function Pke(t){var i,r;const e=MMe();t.type==="cim"?iPe(t,new Ze(OF)):t.type.includes("line")?t.color=qw:(t.color=e?qw:Ike,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=qw):t.outline={color:qw,width:1.5}))}async function y1t(t,e,i,r){const n=(await Re(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>c1);return{getSizeRangeAtScale:a}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&kke(n);if(!n||!s)return;let o=s.map((a=>g1t(a,t,n)));o=TF(o);for(let a=1;a<o.length-1;a++){const l=await v1t(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],s[a]=l[1])}return o}function kke(t){const e=t.minSize,i=t.maxSize,r=s1t,n=(i-e)/(r-1),s=[];for(let o=0;o<r;o++)s.push(e+n*o);return s}function g1t(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=s:t>=n?a=o:a=(t-r)/(n-r)*(o-s)+s,a}async function v1t(t,e,i,r,n,s){const o=await US(t,e,i,n,s),a=await US(t,e,r,n,s),l=EF(i),c=l.fractional,u=n1t;let p=l.integer,m=null,v=null;i>0&&i<1&&(m=10**c,p=EF(i*=m).integer);for(let w=p-1;w>=0;w--){const _=10**w;let T=Math.floor(i/_)*_,$=Math.ceil(i/_)*_;m!=null&&(T/=m,$/=m);let I=(T+$)/2;[,I]=TF([T,I,$],{indexes:[1]});const A=await US(t,e,T,n,s),k=await US(t,e,$,n,s),R=await US(t,e,I,n,s),F=sD(o,A,a,null),B=sD(o,k,a,null),q=sD(o,R,a,null);let Y=F.previous<=u,J=B.previous<=u;if(Y&&J&&(F.previous<=B.previous?(Y=!0,J=!1):(J=!0,Y=!1)),Y?v=[T,A]:J?v=[$,k]:q.previous<=u&&(v=[I,R]),v)break}return v}async function US(t,e,i,r,n){const{getSize:s}=await Re(()=>Promise.resolve().then(()=>c1),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function b1t(t,e,i,r){var s,o;((s=i==null?void 0:i.authoringInfo)==null?void 0:s.type)==="univariate-color-size"&&((o=i==null?void 0:i.authoringInfo)==null?void 0:o.univariateTheme)==="above-and-below"&&i.type==="class-breaks"&&(t=p1t(i,r));const n=t.clone();if(tf(n))G4(n)||n.symbolLayers.forEach((a=>{a.type!=="fill"&&(a.size=e)}));else if(o1t(n))n.size=e;else if(a1t(n)){const a=n.width,l=n.height;n.height=e,n.width=e*(a/l)}else l1t(n)?n.width=e:c1t(n)?n.font&&(n.font.size=e):n.type==="cim"&&Ap(i,"reference-size")?kee(n,{innerDotSize:e,outerRingSize:QY}):n.type==="cim"&&Ap(i,"spike")&&VPe(n,{defaultHeight:e,primitiveOverrides:null});return n}function w1t(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return B_(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Sme=16,_1t="https://utility.arcgis.com/sharing/tools/legend",x1t="esri.layers.ImageryLayer",S1t="esri.layers.ImageryTileLayer",E1t="esri.layers.WCSLayer",QR=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,T1t=new Bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),e3=new Or({size:6,outline:{color:[128,128,128,.5],width:.5}}),$1t=new Jo({style:"solid"});function eK(t){return t.type==="flow"}function Oke(t){return t.type==="vector-field"}function Lke(t){return t.type==="raster-colormap"}function Rke(t){return t.type==="raster-stretch"}function Nke(t){return t.type==="raster-shaded-relief"}function BS(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function hw(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function dw(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function Dke(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function M1t(t){return Jee(t)||Xee(t)||Qee(t)||C1t(t)}function C1t(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function Jee(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function Xee(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function Qee(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Fke(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function zke(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function I1t(t,e){return BS(t)||hw(t)||dw(t)||Dke(t)||Fke(t)||zke(t)?e.type==="2d"||XAe(t):Rke(t)||Lke(t)||Nke(t)||Jee(t)||Xee(t)||Qee(t)||Oke(t)||eK(t)}function A1t(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function YV(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function P1t(t){return t.declaredClass==="esri.layers.VoxelLayer"}function k1t(t){return t.declaredClass==="esri.layers.WMSLayer"}function O1t(t){return t.declaredClass==="esri.layers.WMTSLayer"}function KV(t){return t.declaredClass==="esri.layers.MapImageLayer"}function Eme(t){return t.declaredClass==="esri.layers.TileLayer"}function Nx(t){return t.declaredClass===x1t}function t3(t){return t.declaredClass===S1t}function L1t(t){return t.declaredClass===E1t}function R1t(t){return t.type==="stretch-ramp"}function N1t(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function D1t(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function Tme(t){return"sublayers"in t}function $me(t){return t&&"symbol"in t}async function Nf(t,e){const i=await qj("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),V_(i[t],{label:e})}function F1t(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!n?[e]:e==null?void 0:e.toString().split(s||""),l=i?{[i]:a==null?void 0:a[0]}:null;return l&&(r&&(l[r]=a==null?void 0:a[1]),n&&(l[n]=a==null?void 0:a[2])),l}const z1t=new Or({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Dx={},An=class extends ut{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new et,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([wu((()=>this.children),"change",(e=>{const{added:i,removed:r}=e;i.forEach((n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(Je((()=>n.ready),t,rn),s)})),r.forEach((n=>this.removeHandles(n.layer.uid))),t()}))]),this.keepCacheOnDestroy||(Dx={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Dx=null),this._layerDefinitionExpressionClause=null}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new ah,e.effect=t.effect,e.endTransition(),e.scale=this.scale),e}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&dw(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,(i=>{var r;if(K2e(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&tpt(s.renderer),a=T1t.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(Ce.getLogger(this).warn("drawingInfo not available!"),null)}return null}));try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i,this.notifyChange("ready")}catch(i){Ce.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(P1t(t))this._constructLegendElementsForVoxelLayer();else if(O1t(t))this._constructLegendElementsForWMTSlayer();else if(k1t(t))await this._constructLegendElementsForWMSSublayers();else if(A1t(t))await this._constructLegendElementsForBuildingSceneLayer();else if(KV(t)||Eme(t)||YV(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Nx(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(t3(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then((async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map((async o=>{if(Nx(t)){const l=Je((()=>[t.rasterFunction,t.bandIds]),(()=>ck((async()=>{Dx.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(Nx(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")}));await Promise.allSettled(s)})).catch((n=>{Ce.getLogger(this).warn("Request to server for legend has failed!",n)}))}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await P_((()=>!e.updating));const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some((t=>t.ready))}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(QR.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some((r=>this._isScaleDrivenSizeVariable(r))))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some((i=>this._isScaleDrivenSymbol(i.symbol)));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some((i=>this._isScaleDrivenSymbol(i.symbol))))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some((s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")})))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||QR.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some((i=>this._isLayerScaleDriven(i)));const e=t.parent;if(t.loaded===!1&&e&&KV(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var r;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(Je((()=>t.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-current-variable"),this.addHandles(Je((()=>t.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const n=[];e.uniqueValues.forEach((s=>{s.enabled&&n.push({label:s.label||`${s.value}`,value:s.value,symbol:new Jo({color:s.color,outline:null})})})),n.length&&i.push({type:"symbol-table",title:e.label,infos:n})}else if(e.transferFunction){const{colorStops:n,stretchRange:s}=e.transferFunction,o=n.toArray().reverse(),a=s.map(((c,u)=>`${u===0?DPe:FPe} ${w1t(c)}`)).reverse(),l=o.map((c=>({color:c.color,value:null,label:null})));l[0].label=a[0],l[l.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:l,preview:lw(o.map((c=>c.color)),{ariaLabel:await Nf("previewColorRampAriaLabel")})})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(Je((()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find((({id:n})=>n===t.styleId)))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(Je((()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var o,a;const i=this.layer,r=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const n=((a=(o=this.sublayerIds)==null?void 0:o.map((l=>i.findSublayerById(l))))==null?void 0:a.filter(rs))??[],s=n.length?n:t.toArray();for(const l of s){const c=Je((()=>[l.title,l.visible,l.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const u=await this._generateSymbolTableElementForWMSSublayer(l,e);u!=null&&u.infos.length&&r.unshift(u)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter((r=>r));return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=U3(i,e));let n=null;const s=(o=t.layer)==null?void 0:o.opacity;try{n=(await ni(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=Dx&&Dx[t];return i?Promise.resolve(i):this._legendRequest(e).then((r=>{const n=r.layers;return Dx[t]=n,n}))}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(Nx(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),o=s===-1?r:r.slice(0,s)+r.slice(s+5);r=_1t+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return ni(r,{query:i}).then((s=>s.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(Je((()=>t.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=Je((()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...c),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...i])}}return i.filter((n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(KV(t)||Eme(t)||YV(t)){this.addHandles(Je((()=>t.sublayers),(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=YV(r)?this.sublayerIds.map((o=>r.findSublayerForSubtypeCode(o))).filter(rs):this.sublayerIds.map((o=>r.findSublayerById(o))).filter(rs));for(const o of s){const a=Je((()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,c=l!=null?l*e:e,u=!Tme(o)||o.originIdOf("renderer")>Dt.SERVICE&&!o.sublayers;if(o.renderer&&u)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...n];else if(Tme(o)){const p=await this._generateSymbolTableElementForSublayer(o,c,i);p&&n.unshift(p)}}}return n.filter((o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0)))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>Dt.SERVICE||t.originIdOf("labelingInfo")>Dt.SERVICE||t.originIdOf("labelsVisible")>Dt.SERVICE){const l=new Jc({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach((l=>i.set(l.layerId,l)))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>Dt.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach((a=>{var c;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter((u=>u.groupId===a.id)),t.layerId,i)};((c=l.infos)==null?void 0:c.length)>0&&s.infos.push(l)})):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map((r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=zBe(`${this.layer.url}/${e}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}})).filter(rs)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){var o;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some((a=>a.values));let n=0,s=null;return r&&t.some(((a,l)=>(a.values||(n=l,s=a,s.label||(s.label="others")),s!=null))),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),(o=i.legendOptions)!=null&&o.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!I1t(t,this.view))return Ce.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(M1t(t))return this._constructPointCloudRendererLegendElements(t,e);if(Fke(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return zke(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var o;const i=e.title,r=[];let n=null,s=null;if(Jee(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach((a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(e3,a.color)})}));else if(Xee(t)){const a=t.stops;let l=null;if(a!=null&&a.length&&(a.length===1&&(l=a[0].color),!l)){const u=a[0].value,p=a[a.length-1].value;u!=null&&p!=null&&(l=BPe(u+(p-u)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(e3,l||e3.color)}]};const c=n0t(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:c,preview:lw(c.map((u=>u.color)),{ariaLabel:await Nf("previewColorRampAriaLabel")})}}else Qee(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(o=t.colorUniqueValueInfos)==null||o.forEach((a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(e3,a.color)})})));return n!=null&&n.infos.length&&r.push(n),s!=null&&s.infos.length&&r.push(s),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,c=l==null?void 0:l.effects.map(($=>$.toJSON())),u=Y5(c),p=await Nf("previewTemplateAriaLabel",r||n),m=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+u,v=this._dotDensityUrlCache,w=v.has(m)?v.get(m):Dvt(t,i,{ariaLabel:p});v.set(m,w);const _={shape:{type:"image",x:0,y:0,width:w.width,height:w.height,src:w.src},fill:null,stroke:null,offset:[0,0]},T=e$([[_]],[w.width,w.height],{effectView:this.effectList,ariaLabel:p});return{opacity:1,src:w.src,preview:T,width:w.width,height:w.height}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const o=await this._getElementInfoForDotDensity(t,s);o.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var o,a,l,c;const e=[];let i=null;const r=t.outline;t.attributes.forEach((u=>{const p=new Or({color:u.color,outline:r}),m=u.label||u.valueExpressionTitle||u.field;e.push({label:m,symbol:p})}));const n=e.length?[...e]:[];if((o=t.othersCategory)!=null&&o.color&&((a=t.othersCategory)==null?void 0:a.threshold)!==0){const u=new Or({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:u})}if((l=t.defaultColor)!=null&&l.a){const u=new Or({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:u})}const s=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){s.unshift({type:"symbol-table",title:null,infos:e});const u=n.filter((m=>m.label!==i)).map((m=>m.symbol.color)).filter(Boolean),p=Fvt(u,{holePercentage:t.holePercentage,backgroundColor:(c=t.backgroundFillSymbol)==null?void 0:c.color,effectList:this.effectList,outline:r,ariaLabel:await Nf("previewPieChartAriaLabel")});s.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:p})}return await this._generatePreviewsForLegendElements(s,{opacity:this.layer.opacity,effectView:this.effectList}),s}async _getWhereClause(t,e,i){const r=await cQ(t,i),n=new Set,{field:s,field2:o,field3:a}=e;c0(n,i,[s,o,a]),Mo(n,i,e.valueExpression);const l=new Set(Array.from(n,(u=>u.toLowerCase()))),c=r==null?void 0:r.fieldNames.map((u=>u.toLowerCase()));return c!=null&&c.some((u=>!l.has(u)))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?Clt(t.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(t,e={}){var $,I,A,k,R,F,B;const{title:i,sublayer:r}=e,n=r||this.layer,s=Ap(t,"reference-size"),o=Ap(t,"spike");let a=null;dw(t)&&(await this._processDefinitionExpression(n,t),a=await this._processDisplayFilter(n,t)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const l=await this._getVisualVariableLegendElements(t,n)||[],c={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let u=null,p=!1;const m=new Set;if(eK(t)&&!this._hasSizeRamp){const q=await jPe(t);c.infos.push({label:null,symbol:q})}else if(N1t(t)){let q=i;const Y=D1t(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",J=l.findIndex((ye=>ye.type==="color-ramp")),Q=J!==-1?l.splice(J,1)[0]:null,te=l.findIndex((ye=>ye.type==="size-ramp")),re=te!==-1?l.splice(te,1)[0]:null,ee=[];Q&&(q=Q.title,ee.push(Q)),re&&(q=re.title,ee.push(re)),ee.length>0&&l.push({type:Y,title:q,infos:ee})}else if(Dke(t)){const q=a0t(t);l.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:q,preview:lw(q.map((Y=>Y.color)),{effectList:this.effectList,ariaLabel:await Nf("previewColorRampAriaLabel")})})}else if(dw(t)){const q=t.authoringInfo;if(q&&q.type==="relationship"){const{numClasses:Y,field1:J,field2:Q}=q,te=q.focus;if(Y&&J&&Q){const re=[J,Q];let ee=LPe(te)||0;for(const ne of re){const{field:ue,normalizationField:he,label:Ne}=ne,X=Ne||{field:this._getFieldAlias(ue,n),normField:he&&this._getFieldAlias(he,n)},_e=z1t.clone();_e.angle=ee,c.infos.push({label:X,symbol:_e}),m.add(_e),ee+=90}const ye=Nvt({focus:te,numClasses:Y,infos:t.uniqueValueInfos??[]});l.unshift(ye)}}else if(Nx(this.layer)||t3(this.layer))($=t.uniqueValueInfos)==null||$.forEach((Y=>{Y.symbol&&this._checkClausesForUVR(t,Y.value)&&c.infos.push({label:Y.label||Y.value,value:Y.value,symbol:Y.symbol})}));else{const{field:Y,field2:J,field3:Q,fieldDelimiter:te,valueExpression:re,defaultSymbol:ee}=t,ye=!(!Y&&!re||!J&&!Q),ne=this._layerDisplayFilterClause?a==null?void 0:a.title:null,ue=[];if((I=t.uniqueValueGroups)==null||I.forEach((he=>{var X;const Ne={type:"symbol-table",title:ne||he.heading,infos:[]};(X=he.classes)==null||X.forEach((_e=>{const{symbol:ke,values:qe}=_e;if(ke){const Ke=[],Qe=[];for(const it of qe??[]){const{value:Vt,value2:Pt,value3:He}=it,Ri=[],ci=[];(Y||re)&&(Ri.push(Vt),ci.push(this._getDomainName(Y,Vt,n))),J&&(Ri.push(Pt),ci.push(this._getDomainName(J,Pt,n))),Q&&(Ri.push(He),ci.push(this._getDomainName(Q,He,n))),Ke.push(ye?Ri.join(te||""):Ri[0]),Qe.push(ci.join(" - "))}const Xe=Ke.join(", ");let di=_e.label;if(!di){const it=Qe.filter(Boolean);di=it.length?it.join(", "):Xe}const qt=ke.clone();qt.type==="cim"&&s&&kee(qt,{innerDotSize:.5*Sme,outerRingSize:Sme}),Ke.some((it=>this._checkClausesForUVR(t,it)))&&Ne.infos.push({label:di,value:Xe,symbol:qt})}})),Ne.infos.length&&ue.push(Ne)})),ue.length){const he=ue[0];if(ue.length===1&&"title"in he&&!he.title){const Ne=((A=he.infos)==null?void 0:A.filter($me))??[];c.infos.push(...Ne)}else ee&&(ue.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:ee}]}),p=!0),c.infos.push(...ue);i||(k=t.legendOptions)!=null&&k.title||t.valueExpressionTitle||(c.title=null)}}t.defaultSymbol&&!p&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),p=!0)}else if(hw(t)){if(!s&&!o){if(u=this._isUnclassedRenderer(t),!u||!this._hasSizeRamp){const q=t.classBreakInfos.filter((({symbol:J})=>J)),Y=((R=t.legendOptions)==null?void 0:R.order)==="ascending-values";for(const{label:J,minValue:Q,maxValue:te,symbol:re}of q){const ee={label:J||(u?null:`${Q} - ${te}`),value:[Q,te],symbol:re};Y?c.infos.push(ee):c.infos.unshift(ee)}u&&(c.title=null),this._updateInfosForClassedSizeRenderer(t,c.infos)}t.defaultSymbol&&!u&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),p=!0)}}else if(Rke(t))if(t3(this.layer)||L1t(this.layer)){const q=await this._constructTileImageryStretchRendererElements(t);R1t(q)?l.push(q):c.infos=q}else{const q=this.layer;let Y,J;(F=t.customStatistics)!=null&&F.length&&({min:Y,max:J}=t.customStatistics[0]);let Q=[],te=q.serviceRasterInfo;if(q.rasterFunction)try{te=await q.generateRasterInfo(q.rasterFunction)}catch{}const re=_F(te.pixelType);if(te.bandCount===1){const ee=((B=q.bandIds)==null?void 0:B[0])||0;Y=Y??(te.statistics?te.statistics[ee].min:re[0]),J=J??(te.statistics?te.statistics[ee].max:re[1]),Y||J?l.push(await this._getStretchLegendElements(t,{min:Y,max:J})):this._getServerSideLegend()}else if(q.bandIds&&q.bandIds.length===1)Y=Y??(te.statistics?te.statistics[q.bandIds[0]].min:re[0]),J=J??(te.statistics?te.statistics[q.bandIds[0]].max:re[1]),Y||J?l.push(await this._getStretchLegendElements(t,{min:Y,max:J})):this._getServerSideLegend();else if(te.bandCount>=3){const{bandInfos:ee}=te,{bandIds:ye}=q;ee.length>=te.bandCount?(ye==null?void 0:ye.length)===3?(Q=ye.map((ne=>ee[ne].name)),c.infos=this._createSymbolTableElementMultiBand(Q)):q.format==="lerc"?(Q=[0,1,2].map((ne=>ee[ne].name)),c.infos=this._createSymbolTableElementMultiBand(Q)):this._getServerSideLegend():q.format==="lerc"?(Q=["band1","band2","band3"],c.infos=this._createSymbolTableElementMultiBand(Q)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Lke(t))t.colormapInfos.forEach((q=>{c.infos.push({label:q.label,value:q.value,symbol:this._getAppliedCloneSymbol($1t,q.color)})}));else if(BS(t)){let q=t.symbol;switch(e.geometryType){case"point":q="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":q="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":q="polygonSymbol"in n?n.polygonSymbol:null}const Y=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&Y&&c.infos.push({label:t.label,symbol:q})}else if(Oke(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),c.title=t.attributeField;const q=t.getClassBreakInfos();q!=null&&q.length?q.forEach((Y=>{c.infos.push({label:Y.minValue+" - "+Y.maxValue,symbol:Y.symbol})})):c.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else Nke(t)&&l.push(await this._getStretchLegendElements(t,{min:0,max:255}));const v=t.defaultSymbol;!v||p||BS(t)||u&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:v}]}),c.infos.length&&l.unshift(c);const w=e.opacity==null?this.opacity:e.opacity,_=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),T=Nx(this.layer)||t3(this.layer);return await this._generatePreviewsForLegendElements(l,{opacity:w,symbolConfig:{isTall:_,isSquareFill:T},effectView:this.effectList},{defaultSymbol:v,arrowMarkerSymbols:m}),t=null,l}_checkClausesForUVR(t,e){const i=F1t(t,e);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce(((i,r)=>i.concat(this._getAllInfos(r))),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,c;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(a=t==null?void 0:t.customStatistics)!=null&&a.length?t.customStatistics:i==null?void 0:i.statistics;if(s)({min:r,max:n}=s[0]);else{const u=_F(i.pixelType);r=u[0],n=u[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const o=((c=e==null?void 0:e.bandIds)!=null&&c.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map((u=>i.bandInfos[u].name));return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=o0t(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:lw(r.map((n=>n.color)),{ariaLabel:await Nf("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await h1t(i,e,await jY(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach(((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:Xvt[n],opacity:this.opacity??1})})),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some((n=>G4(n.symbol)));if(i&&r){const n=JY,s=XY,o=t.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);e.forEach(((l,c)=>{l.size=n-a*c}))}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){var n,s;const r=[];for(const o of t)for(const a of o.infos??[])if("infos"in a&&a.infos&&r.push(this._generatePreviewsForLegendElements([a],e,i)),$me(a)&&a.symbol&&!a.preview){let l=!0;if(a.symbol.type==="cim"){const{minScale:c,maxScale:u}=a.symbol.data;(c&&c<this.scale||u&&u>this.scale)&&(l=!1)}l&&r.push(this._generateSymbolPreviewForInfo(a,{...e,clipBloomEffect:"theme"in o&&o.theme==="spike",effectView:(n=i==null?void 0:i.arrowMarkerSymbols)!=null&&n.has(a.symbol)?null:e.effectView},i?{isDefault:a.symbol===i.defaultSymbol,applyScaleDrivenSize:!((s=i.arrowMarkerSymbols)!=null&&s.has(a.symbol))}:void 0))}await Promise.all(r)}async _generateSymbolPreviewForInfo(t,e,i){var r,n,s,o;try{let a=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?Bi(_n.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:u}=await Re(()=>Promise.resolve().then(()=>c1),void 0);a=u(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const l=t.symbol.type==="cim"?{style:"legend",cimOptions:{allowScalingUp:!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize)),viewParams:this.isScaleDriven?{viewingMode:((r=this.view)==null?void 0:r.type)==="2d"?"map":(n=this.view)==null?void 0:n.viewingMode,scale:(s=this.view)==null?void 0:s.scale}:null}}:{},c=t.label&&typeof t.label!="string"?null:await Nf("previewTemplateAriaLabel",t.label);t.preview=await RPe(t.symbol,{size:a,scale:!1,ariaLabel:c,...e,...l})}catch{t.preview=null,Ce.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${(o=t.symbol)==null?void 0:o.type}`)}}_getClusterRenderer(t){var n,s;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=Uvt(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some((a=>a.type==="size"&&a.target!=="outline"&&!QR.test(a.valueExpression))))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;r.legendOptions=new WCe({showLegend:l!==c})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await jY(i);if(hw(i)||dw(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map((s=>this._fetchSymbol(s.symbol,r).then((o=>{s.symbol=o})).catch((()=>{s.symbol=null}))));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then((n=>{this._applySymbolToRenderer(i,n,BS(i))})).catch((()=>{this._applySymbolToRenderer(i,null,BS(i))}))),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw Ce.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?iPe(i,e):i.color&&(i.color=new Ze(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach((i=>{i&&(i.material||(i.material={}),i.material.color=new Ze(e))}))}async _getVisualVariableLegendElements(t,e){var m,v;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],o=Ap(t,"reference-size")??Ap(t,"spike");let a;if(((m=o==null?void 0:o.sizeStops)==null?void 0:m.length)===2&&(hw(t)||dw(t))){const[w,_]=o.sizeStops;a=new Si({field:o.field??void 0,normalizationField:o.normalizationField,minSize:sa(w.size,10,100),maxSize:sa(_.size,50,150),minDataValue:w.value,maxDataValue:_.value}),n.push(a)}for(const w of i)w.type==="color"?r.push(w):w.type==="size"?n.push(w):w.type==="opacity"&&s.push(w);const l=[...r,...n,...s];let c,u;if(r.length===0&&hw(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const w=t.classBreakInfos[0];c=w&&w.symbol}if(r.length===0&&BS(t)&&(c=t.symbol),c)if(c.type.includes("3d")){const w=c.symbolLayers.at(0);w.type==="water"?w.color!=null&&(u=w.color):((v=w.material)==null?void 0:v.color)!=null&&(u=w.material.color)}else c.url||(u=c.color);const p=this.effectList;return(await Promise.all(l.map((async w=>{if(!w.legendOptions||w.legendOptions.showLegend!==!1){const _=eK(t)?w.field:this._getRampTitle(w,e);let T=null;const $=t0t(e,w,this.view.timeZone);if(w.type==="color"){const I=await qfe(w,null,$)??[];T={type:"color-ramp",title:_,infos:I,preview:lw(I.map((A=>A.color)),{effectList:p,ariaLabel:await Nf("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=I.length>0)}else if(w.type==="size"&&w.target!=="outline")QR.test(w.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=w):(T=await this._getSizeLegendElement(_,w,t,$),a===w&&(o==null?void 0:o.theme)==="spike"&&(T.theme=o.theme),this._hasSizeRamp||(this._hasSizeRamp=!(T.infos==null||!T.infos.length)));else if(w.type==="opacity"){const I=await qfe(w,u,$)??[];T={type:"opacity-ramp",title:_,infos:I,preview:lw(I.map((A=>A.color)),{effectList:p,ariaLabel:await Nf("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=I.length>0)}return T!=null&&T.infos?T:null}})))).filter(rs)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:ge("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var c,u;let i=t.field,r=t.normalizationField,n=!1,s=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(c=t.legendOptions)==null?void 0:c.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((u=e.renderer.authoringInfo)!=null&&u.visualVariables)){const p=e.renderer.authoringInfo.visualVariables;for(let m=0;m<p.length;m++){const v=p[m];if(v.type==="color"){if(v.style==="ratio"){n=!0;break}if(v.style==="percent"){s=!0;break}if(v.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(hw(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,dw(i)){const{field2:l,field3:c,fieldDelimiter:u}=i;let p=r&&this._getFieldAlias(r,e);return l&&(p=`<${p}>${u}<${this._getFieldAlias(l,e)}>`,c&&(p=`${p}${u}<${this._getFieldAlias(c,e)}>`)),p}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),o}_getFieldAlias(t,e){var u,p;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find((m=>t===m.fieldName)),s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(n??(n="popupTemplate"in a?(p=(u=a.popupTemplate)==null?void 0:u.fieldInfos)==null?void 0:p.find((m=>{var v;return(t==null?void 0:t.toLowerCase())===((v=m.fieldName)==null?void 0:v.toLowerCase())})):void 0),"fields"in a&&a.fields&&(o=a.fields.find((m=>{var v;return((v=m.name)==null?void 0:v.toLowerCase())===(t==null?void 0:t.toLowerCase())}))));const l=n||s||o;let c=null;return l&&(c=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return hw(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some((r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField))):!!e.length),i}};d([g()],An.prototype,"children",void 0),d([g({readOnly:!0})],An.prototype,"effectList",null),d([g()],An.prototype,"layerView",void 0),d([g()],An.prototype,"layer",void 0),d([g()],An.prototype,"legendElements",void 0),d([g({readOnly:!0})],An.prototype,"opacity",null),d([g()],An.prototype,"parent",void 0),d([g({readOnly:!0,dependsOn:[]})],An.prototype,"ready",null),d([g()],An.prototype,"hideLayersNotInCurrentView",void 0),d([g()],An.prototype,"keepCacheOnDestroy",void 0),d([g()],An.prototype,"respectLayerDefinitionExpression",void 0),d([g()],An.prototype,"respectLayerVisibility",void 0),d([g({readOnly:!0})],An.prototype,"scale",null),d([g()],An.prototype,"sublayerIds",void 0),d([g({readOnly:!0})],An.prototype,"isScaleDriven",null),d([g()],An.prototype,"title",void 0),d([g({readOnly:!0,dependsOn:["ready"],value:0})],An.prototype,"version",null),d([g()],An.prototype,"view",void 0),An=d([G("esri.widgets.Legend.support.ActiveLayerInfo")],An);const Sb={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},jke=et.ofType(An),j1t=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),Uke="view.basemapView.baseLayerViews",Bke="view.groundView.layerViews",Vke="view.basemapView.referenceLayerViews",U1t=[Uke,Bke,"view.layerViews",Vke];let Jl=class extends ut{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new et,this.activeLayerInfos=new jke,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(Je((()=>this.view),(()=>this._viewHandles()),rn),Sb.view),this.addHandles(Fj((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Sb.state),this.view&&this.addHandles(Je((()=>this.state),(()=>this._stateHandles()),rn),Sb.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Sb.allLayerViews,Sb.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",(r=>this._allLayerViewsChangeHandle(r))),Sb.allLayerViews),this.addHandles(Je((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),Sb.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((i=>this._destroyViewActiveLayerInfo(i.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}})),e.removeMany(r);const n={};i.allLayerViews.forEach(((s,o)=>n[s.layer.uid]=o)),e.sort(((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a}))}_generateLayerViews(){const e=[];return U1t.filter(this._filterLayerViews,this).map((i=>pu(this,i))).filter((i=>i!=null)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===Uke||e===Vke),r=!this.groundLegendVisible&&e===Bke;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach((s=>{i.push(s),r(s[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((r=>this._hasLayerInfo(r,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((r=>this._isLayerUIDMatching(r,i)))}_isLayerViewSupported(e){return!!j1t.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(Je((()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]}),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s=new An({layer:i,layerView:e,title:l?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=s}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[Je((()=>i.title),(c=>this._titleHandle(c,s))),Je((()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(s))),$o((()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0}),(()=>this._scaleHandle(s)),rn),Je((()=>e.layer?xfe(e.layer,e.view):null),(()=>this._constructLegendElements(s))),Je((()=>e.updating),(()=>{e.layer!=null&&xfe(e.layer,e.view)!=null&&this._constructLegendElements(s)})),Je((()=>"effect"in i&&i.effect),(()=>this._constructLegendElements(s))),$o((()=>{var c;return(c=this.view)==null?void 0:c.timeZone}),(()=>this._constructLegendElements(s)),rn)];if(this.respectLayerVisibility){const c=Je((()=>e.legendEnabled),(p=>this._legendEnabledHandle(p,s))),u=Je((()=>i.legendEnabled),(p=>this._legendEnabledHandle(p,s)));l.push(c,u)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const c=Je((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(s)}));l.push(c)}this.addHandles(l,r)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some((l=>l.layer.uid===r.uid)),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach((a=>{const l=a.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,u=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];u&&(o.push(a),a.parent=u)})),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach((a=>this._addActiveLayerInfo(a))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?e.buildLegendElementsForTools():e.children.forEach((r=>this._constructLegendElements(r)))}};d([g({type:jke})],Jl.prototype,"activeLayerInfos",void 0),d([g()],Jl.prototype,"basemapLegendVisible",void 0),d([g()],Jl.prototype,"groundLegendVisible",void 0),d([g()],Jl.prototype,"hideLayersNotInCurrentView",void 0),d([g()],Jl.prototype,"keepCacheOnDestroy",void 0),d([g()],Jl.prototype,"respectLayerDefinitionExpression",void 0),d([g()],Jl.prototype,"respectLayerVisibility",void 0),d([g()],Jl.prototype,"layerInfos",void 0),d([g({readOnly:!0})],Jl.prototype,"state",null),d([g()],Jl.prototype,"view",void 0),Jl=d([G("esri.widgets.Legend.LegendViewModel")],Jl);const zi="esri-legend--card",tC="esri-legend",At={base:zi,stacked:`${tC}--stacked`,carouselTitle:`${zi}__carousel-title`,intervalSeparator:`${zi}__interval-separator`,imageryLayerStretchedImage:`${zi}__imagery-layer-image--stretched`,imageLabel:`${zi}__image-label`,layerCaption:`${zi}__layer-caption`,labelElement:`${zi}__label-element`,layerRow:`${zi}__layer-row`,labelCell:`${zi}__label-cell`,message:`${zi}__message`,rampLabel:`${zi}__ramp-label`,section:`${zi}__section`,serviceCaptionText:`${zi}__service-caption-text`,serviceContent:`${zi}__service-content`,service:`${zi}__service`,groupLayer:`${zi}__group-layer`,groupLayerChild:`${zi}__group-layer-child`,symbol:`${zi}__symbol`,sizeRampRow:`${zi}__size-ramp-row`,symbolRow:`${zi}__symbol-row`,symbolCell:`${zi}__symbol-cell`,carousel:`${zi}__carousel`,carouselItem:`${zi}__carousel-item`,intervalSeparatorsContainer:`${zi}__interval-separators-container`,relationshipLabelContainer:`${zi}__relationship-label-container`,labelContainer:`${zi}__label-container`,serviceCaptionContainer:`${zi}__service-caption-container`,symbolContainer:`${zi}__symbol-container`,colorRampContainer:`${zi}__color-ramp-container`,sizeRampContainer:`${zi}__size-ramp-container`,sizeRampPreview:`${zi}__size-ramp-preview`,pieChartRampPreview:`${zi}__pie-chart-ramp-preview`,sizeRampHorizontal:`${tC}__size-ramp--horizontal`,rampLabelsContainer:`${tC}__ramp-labels`,layerInfo:`${tC}__layer-cell ${tC}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function B1t(t,e){return e}function on(t){const e=this;t.appendChild(e)}function aT(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return R4e(e);if("value"in e||"unit"in e)return V_(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return B1t(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:Gke(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?V_(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function Gke(t,e){return!e}function qke(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function V1t(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:B_(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function Hke(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return V1t(t,i);default:return t.label}}function Wke(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=aT(e,r,i);return Gke(r,i)&&r.title?`${r.title} (${n})`:n}function Zke(t){return!(!t||typeof t!="object")}const G1t=25,q1t=25,H1t=100;let pw=class extends Co{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return ce("div",{class:this.classes(At.layerRow,At.colorRampContainer)},this._renderRampLabel(e[0]),ce("div",{class:At.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=q1t,o=n>2&&!r?G1t*n:H1t,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:s},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map(((m,v)=>({color:m.color,offset:r&&"ratio"in m?m.ratio:v/n})))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${s/2} L${o+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],u=_Pe(c,a,s),p={filter:Uk(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return ce("div",{styles:p},u)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?ce("div",{class:At.intervalSeparatorsContainer},ce("div",{class:At.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return ce("div",{class:At.rampLabel},Hke(e,this.legendElement.type,this.messages))}};d([g()],pw.prototype,"effectList",void 0),d([g()],pw.prototype,"legendElement",void 0),d([g()],pw.prototype,"messages",void 0),d([g()],pw.prototype,"opacity",void 0),pw=d([G("esri.widgets.Legend.styles.card.ColorRamp")],pw);const W1t="#ddd",po=window.devicePixelRatio,Eb="esri-spike-ramp",Um={spikeRampContainer:`${Eb}__container`,spikeRampPreviewContainer:`${Eb}__preview-container`,spikeRampPreview:`${Eb}__preview`,spikeRampSymbolPreview:`${Eb}__symbol-preview`,spikeRampLines:`${Eb}__lines`,spikeRampLabelsContainer:`${Eb}__labels-container`,spikeRampLabel:`${Eb}__label`};function Yke(t){return t.infos.length!==5?null:ce("div",{class:Um.spikeRampContainer},ce("div",{class:Um.spikeRampPreviewContainer},Z1t(t),Y1t(t)),K1t(t))}function Z1t(t){const[e,i,r]=ete(t).map((({preview:n})=>{if(!n)return null;const s=n.cloneNode(!0);return s.classList.add(Um.spikeRampSymbolPreview),s}));return e&&i&&r?ce("div",{class:Um.spikeRampPreview},ce("div",{afterCreate:on,bind:r}),ce("div",{afterCreate:on,bind:i}),ce("div",{afterCreate:on,bind:e})):null}function Y1t(t){const[{width:e,height:i},{width:r},{width:n,height:s}]=ete(t).map((({size:q})=>Zke(q)?{width:li(q.width),height:li(q.height)}:{width:0,height:0})),o=10,a=8,l=e+r+n+3*o,c=i,u=document.createElement("canvas");u.width=(l+o)*po,u.height=c*po,u.style.width=u.width/po+"px",u.style.height=u.height/po+"px";const p=u.getContext("2d");p.beginPath();const m=l-(e/2+o),v=0,w=l+a;p.moveTo(m*po,v*po),p.lineTo(w*po,0*po);const T=(l-a)/2,$=(i-s)/2,I=l+a,A=(i-s)/2;p.moveTo(T*po,$*po),p.lineTo(I*po,A*po);const k=n/2,R=c-s,F=l+a,B=c-s;return p.moveTo(k*po,R*po),p.lineTo(F*po,B*po),p.strokeStyle=W1t,p.lineWidth=.5*po,p.stroke(),ce("div",{afterCreate:on,bind:u,class:Um.spikeRampLines})}function K1t(t){const[{label:e,height:i},{label:r},{label:n,height:s}]=ete(t).map((({label:u,size:p})=>({label:u,height:Zke(p)?li(p.height):0}))),o=i-s,a={position:"absolute",top:"0"},l={position:"absolute",top:o/2+"px"},c={position:"absolute",top:`${o}px`};return ce("div",{class:Um.spikeRampLabelsContainer},ce("div",{class:Um.spikeRampLabel,styles:a},e),ce("div",{class:Um.spikeRampLabel,styles:l},r),ce("div",{class:Um.spikeRampLabel,styles:c},n))}function ete(t){return t.infos.filter(((e,i)=>i%2==0))}const J1t="#ddd",Fx=window.devicePixelRatio;function X1t(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!((i=t.symbolLayers)!=null&&i.length))return;const n=t.symbolLayers.at(-1),s=(r=n.resource)==null?void 0:r.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function Q1t(t){var e,i;if(t){if(t.type.includes("3d")){if(!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),n=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}let fw=class extends Co{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return ce("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},Yke(this.legendElement));const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,s=n.at(0),o=n.at(-1);if(!s||!o)return null;const{label:a,...l}=s,{label:c,...u}=o;let p=l.preview,m=u.preview;const v={"flex-direction":i?"column":"row-reverse"};if(!p||!m)return null;p=p.cloneNode(!0),p.style.display="flex",m=m.cloneNode(!0),m.style.display="flex";const w={opacity:`${r??""}`};return ce("div",{class:this.classes(At.layerRow,{[At.sizeRampRow]:i})},ce("div",{class:At.rampLabel},i?a:c),ce("div",{class:At.sizeRampContainer,styles:v},ce("div",{afterCreate:on,bind:p,class:At.sizeRampPreview,styles:w}),this._renderSizeRampLines(e),ce("div",{afterCreate:on,bind:m,class:At.sizeRampPreview,styles:w})),ce("div",{class:At.rampLabel},i?c:a))}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),n=i.at(-1);if(!r||!n)return null;const s=r.symbol,o=this.hasIndicators,a=r.size&&typeof r.size=="number"?r.size:0,l=n.size&&typeof n.size=="number"?n.size:0,c=r.outlineSize||0,u=n.outlineSize||0,p=li(a+c)*Fx,m=li(l+u)*Fx,v=o?p:p+50*Fx,w=o?p/2+50*Fx:p,_=Q1t(s),T=X1t(s),$=document.createElement("canvas");$.width=v,$.height=w,$.style.width=$.width/Fx+"px",$.style.height=$.height/Fx+"px";const I=$.getContext("2d");if(o){I.beginPath();const A=0,k=0,R=v/2-m/2,F=w;I.moveTo(A,k),I.lineTo(R,F);const B=v,q=0,Y=v/2+m/2,J=w;I.moveTo(B,q),I.lineTo(Y,J)}else{I.beginPath();const A=0,k=w/2-m/2,R=v;I.moveTo(A,k),I.lineTo(R,0);const B=0,q=w/2+m/2,Y=v,J=w;I.moveTo(B,q),I.lineTo(Y,J)}return I.strokeStyle=J1t,I.stroke(),ce("div",{afterCreate:on,bind:$,styles:o?{display:"flex",marginTop:`-${_?0:T?p/2:0}px`,marginBottom:`-${_?m:T?m/2:0}px`}:{display:"flex",marginRight:`-${_?0:T?p/2:0}px`,marginLeft:`-${_?0:T?m/2:0}px`}})}};d([g()],fw.prototype,"hasIndicators",void 0),d([g()],fw.prototype,"legendElement",void 0),d([g()],fw.prototype,"messages",void 0),d([g()],fw.prototype,"opacity",void 0),fw=d([G("esri.widgets.Legend.styles.card.SizeRamp")],fw);const ext=f5(),Kke=10,tte=20,Y4=10,ite=20,rte={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function txt(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?ce("svg",{height:"4",width:"10"},ce("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):ce("svg",{height:"10",width:"10"},ce("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function ixt(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${tte}px`,i.className=rte.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),ext.append(i,txt.bind(null,e)),i}function Jke(t,e,i="vertical",r){t.infos.forEach(((n,s)=>{if(r&&s===2)n.preview=ixt(e,i);else{const o=(G_(n.size)?li(n.size):0)+(i==="horizontal"?ite:Y4),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",c=l?a:document.createElement("div");c.className=rte.univariateAboveAndBelowSymbol,i==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,!l&&a&&c.appendChild(a),n.preview=c}}))}function K4(t,e="classic"){const i=t.infos,r=i.at(0),n=i.at(-1),s=G_(r.size)?li(r.size):0,o=G_(n.size)?li(n.size):0;return e==="classic"?(s+Y4)/2:(s-o)/2}function lT(t,e){if(!t)return null;const i=t.infos.map((n=>n.color)),r=lw(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=rte.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function nte(t,e,i,r="vertical"){let n=0;const s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let c=a;c<=l;c++)if(i&&c===o)n+=r==="horizontal"?Kke:tte;else{const u=s[c].size;n+=(G_(u)?li(u):0)+(r==="horizontal"?ite:Y4)}return Math.round(n)}function cT(t,e,i,r="vertical"){const n=nte(t,e,i,r),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,c=G_(s[a].size)?s[a].size:0,u=G_(s[l].size)?s[l].size:0,p=e==="full"?c+u:e==="above"?c:u,m=i?r==="vertical"?tte:Kke:0,v=r==="vertical"?Y4*(e==="full"?2:1):ite*(e==="full"?2:1);return Math.round(n-(li(p)/2+m/2+v/2))}function Xke(t,e,i="vertical"){const r=t.infos;let n=r.find((({type:o})=>o==="size-ramp")),s=r.find((({type:o})=>o==="color-ramp"));return n&&(n={...n},n.infos=[...n.infos],Jke(n,e,i,!0)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function Qke(t,e="vertical"){const i=t.infos;let r=i.find((({type:s})=>s==="size-ramp")),n=i.find((({type:s})=>s==="color-ramp"));return r&&(r={...r},r.infos=[...r.infos],Jke(r,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}const tK={marginLeft:"3px"},f2={display:"table-cell",verticalAlign:"middle"},eOe={display:"flex",alignItems:"flex-start"};let mw=class extends Co{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var F;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=Xke(e,i,"horizontal");if(!s)return null;const a=nte(s,"full",!0,"horizontal"),l=cT(s,"above",!0,"horizontal"),c=cT(s,"below",!0,"horizontal"),u=12,p=(F=this.messages)==null?void 0:F.previewColorRampAriaLabel,m=lT(o,{width:l,height:u,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:p}),v=lT(o,{width:c,height:u,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:p}),w=K4(s,"card"),_=s.infos.map((B=>B.label)),T=_.length-1,$=_.map(((B,q)=>q===0||q===T?ce("div",{key:q},B):null)),I={display:"flex",flexDirection:"column"},A={display:"flex",flexDirection:"row"},k={marginTop:"3px",display:"flex"};b4(this.container)?k.marginRight=`${w}px`:k.marginLeft=`${w}px`;const R={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return ce("div",{class:At.layerRow,key:`${n}-container`,styles:I},ce("div",{class:this.classes(At.symbolContainer,At.sizeRampHorizontal),styles:A},s.infos.map(((B,q)=>ce("div",{afterCreate:on,bind:B.preview,class:At.symbol,key:q})))),m?ce("div",{class:At.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:k},ce("div",{afterCreate:on,bind:m}),ce("div",{afterCreate:on,bind:v})):null,ce("div",{class:At.layerInfo},ce("div",{class:At.rampLabelsContainer,styles:R},$)))}};d([g()],mw.prototype,"effectList",void 0),d([g()],mw.prototype,"legendElement",void 0),d([g()],mw.prototype,"messages",void 0),d([g()],mw.prototype,"opacity",void 0),mw=d([G("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],mw);let yw=class extends Co{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var $;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=Qke(e,"horizontal");if(!s)return null;const a=nte(s,"full",!1,"horizontal"),l=cT(s,"full",!1,"horizontal"),c=lT(o,{width:l,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:($=this.messages)==null?void 0:$.previewColorRampAriaLabel}),u=K4(s,"card"),p=s.infos.length-1,m=s.infos.map(((I,A)=>A===0||A===p?ce("div",{key:A},I.label):null)),v={display:"flex",flexDirection:"column"},w={display:"flex",flexDirection:"row"},_={marginTop:"3px",display:"flex"};b4(this.container)?_.marginRight=`${u}px`:_.marginLeft=`${u}px`;const T={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return ce("div",{class:At.layerRow,key:`${n}-container`,styles:v},ce("div",{class:this.classes(At.symbolContainer,At.sizeRampHorizontal),styles:w},s.infos.map(((I,A)=>ce("div",{afterCreate:on,bind:I.preview,class:At.symbol,key:A})))),ce("div",{class:At.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:_},ce("div",{afterCreate:on,bind:c})),ce("div",{class:At.layerInfo},ce("div",{class:At.rampLabelsContainer,styles:T},m)))}};d([g()],yw.prototype,"effectList",void 0),d([g()],yw.prototype,"legendElement",void 0),d([g()],yw.prototype,"messages",void 0),d([g()],yw.prototype,"opacity",void 0),yw=d([G("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],yw);function hD({level:t,class:e,...i},r){const n=tOe(t);return ce(`h${n}`,{...i,"aria-level":String(n),class:s2(ml.heading,e),role:"heading"},r)}function tOe(t){return sa(Math.ceil(t),1,6)}function rxt(t,e=1){return tOe(t+e)}var iK;let Qc=iK=class extends Co{constructor(t,e){super(t,e),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=Wke(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?ce("div",null,ce(hD,{class:At.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),ce(hD,{class:At.layerCaption,level:rxt(this.headingLevel)},e)):e?ce(hD,{class:At.layerCaption,level:this.headingLevel},e):null;return ce("section",{"aria-labelledby":this.key,class:At.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return ce(fw,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return ce(pw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return TPe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return ce("div",{afterCreate:on,bind:this.legendElement.preview,class:At.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return ce(mw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return ce(yw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){var s,o,a;const e=t.infos.map((l=>this._renderElementInfo(l,t.legendType))).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some((({type:l})=>l==="relationship-ramp")),r=(a=(o=(s=e[0])==null?void 0:s.properties)==null?void 0:o.classes)==null?void 0:a[At.symbolRow],n={[At.labelContainer]:!r&&!i,[At.relationshipLabelContainer]:i};return ce("div",{class:this.classes(n)},e)}_renderElementInfo(t,e){var a;const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return ce(iK,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=qke(i,e),o=aT(this.messages,r,!1)||"";if("src"in t&&t.src)return ce("div",{class:At.layerRow,key:`${n}-row`},this._renderImage(t,i,s),ce("div",{class:At.imageLabel},o));if("symbol"in t&&t.preview){if(!((a=t.symbol)!=null&&a.type.includes("simple-fill"))){if(!t.label)return ce("div",{afterCreate:on,bind:t.preview,key:`${n}-row`});const l={[At.symbolCell]:this.hasIndicators};return ce("div",{class:this.classes(At.layerRow,{[At.symbolRow]:this.hasIndicators}),key:`${n}-row`},ce("div",{afterCreate:on,bind:t.preview,class:this.classes(l)}),ce("div",{class:this.classes(At.imageLabel,{[At.labelCell]:this.hasIndicators})},o))}return ce("div",{class:At.layerRow,key:`${n}-row`},ce("div",{class:At.labelElement,styles:this._getBackgroundStyles(t)},o))}return null}_getBackgroundStyles(t){var p,m;const e=t.symbol,i=e.color,r=!!(i!=null&&i.a),n="outline"in e?e.outline:null,s=!!((p=n==null?void 0:n.color)!=null&&p.a),o=new Ze(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),a=s&&n.color?new Ze([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new Ze([255,255,255,0]),l=((m=t.symbol.color)==null?void 0:m.isBright)??!0,c=l?"black":"white",u=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${u},
                  1px -1px 0 ${u},
                  -1px 1px 0 ${u},
                  1px 1px 0 ${u}`,border:s?`1px solid ${a.toCss(!0)}`:"none",filter:Uk(this.effectList)??void 0}}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[At.imageryLayerStretchedImage]:i,[At.symbol]:!i},a={opacity:`${s??e.opacity}`},l=aT(this.messages,r,!1);return ce("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};d([g()],Qc.prototype,"activeLayerInfo",void 0),d([g()],Qc.prototype,"effectList",void 0),d([g()],Qc.prototype,"hasIndicators",void 0),d([g()],Qc.prototype,"headingLevel",void 0),d([g()],Qc.prototype,"isChild",void 0),d([g()],Qc.prototype,"layer",void 0),d([g()],Qc.prototype,"legendElement",void 0),d([g()],Qc.prototype,"messages",void 0),Qc=iK=d([G("esri.widgets.Legend.styles.card.LegendElement")],Qc);const nxt=768;let iu=class extends Co{constructor(e,i){super(e,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return S4({carousel:()=>Re(()=>import("./index-CWnPX-iC.js"),[]),"carousel-item":()=>Re(()=>import("./index-B3MZh8Fd.js"),[])})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=nxt||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[At.stacked]:this._hasIndicators};return ce("div",{class:this.classes(At.base,i)},e||ce("div",{class:At.message},this.messages.noLegend))}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e!=null&&e.length?ce("calcite-carousel",{class:At.carousel,label:this.messages.carousel},e.map(((r,n)=>ce("calcite-carousel-item",{class:At.carouselItem,key:n,label:V_(this.messagesCommon.pagination.pageText,{index:n+1,total:e.length})},r)))):null}_renderLayers(){var r;const e=this.activeLayerInfos,i=(r=e==null?void 0:e.toArray())==null?void 0:r.map((n=>this._renderLegendForLayer(n))).filter(Boolean);return i!=null&&i.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return ce("section",{class:this.classes(At.service,At.groupLayer),key:e.layer.uid},ce("div",{class:At.serviceCaptionContainer},e.title),i)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var s;const i=(s=e.legendElements)==null?void 0:s.filter(Boolean);if(!(i!=null&&i.length))return null;const r=i.map((o=>ce(Qc,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages}))),n={[At.groupLayerChild]:!!e.parent};return ce("section",{class:this.classes(At.service,n),key:e.layer.uid},ce("div",{class:At.serviceCaptionContainer},ce("div",{class:At.serviceCaptionText},e.title)),ce("div",{class:At.serviceContent},r))}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const n of e.children)this._renderSections(n,i);const r=e.legendElements;if(r!=null&&r.length)for(const n of r){const s=ce(Qc,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${n.type}`,layer:e.layer,legendElement:n,messages:this.messages});s&&i.push(s)}}};d([g()],iu.prototype,"activeLayerInfos",void 0),d([g()],iu.prototype,"headingLevel",void 0),d([g()],iu.prototype,"layout",void 0),d([g(),h0("esri/widgets/Legend/t9n/Legend")],iu.prototype,"messages",void 0),d([g(),h0("esri/t9n/common")],iu.prototype,"messagesCommon",void 0),d([g({readOnly:!0})],iu.prototype,"type",void 0),d([g()],iu.prototype,"view",void 0),iu=d([G("esri.widgets.Legend.styles.card.CardView")],iu);const $r="esri-legend",Nt={service:`${$r}__service`,label:`${$r}__service-label`,layer:`${$r}__layer`,groupLayer:`${$r}__group-layer`,groupLayerChild:`${$r}__group-layer-child`,layerTable:`${$r}__layer-table`,layerTableSizeRamp:`${$r}__layer-table--size-ramp`,layerChildTable:`${$r}__layer-child-table`,layerCaption:`${$r}__layer-caption`,layerBody:`${$r}__layer-body`,layerRow:`${$r}__layer-row`,layerInfo:`${$r}__layer-cell ${$r}__layer-cell--info`,imageryLayerStretchedImage:`${$r}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${$r}__imagery-layer-info--stretched`,symbolContainer:`${$r}__layer-cell ${$r}__layer-cell--symbols`,symbol:`${$r}__symbol`,rampContainer:`${$r}__ramps`,sizeRamp:`${$r}__size-ramp`,colorRamp:`${$r}__color-ramp`,opacityRamp:`${$r}__opacity-ramp`,rampLabelsContainer:`${$r}__ramp-labels`,rampLabel:`${$r}__ramp-label`,message:`${$r}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},sxt=24;let gw=class extends Co{constructor(e,i){super(e,i),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp"?Nt.opacityRamp:"";return e.className=`${Nt.colorRamp} ${i}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={width:`${sxt}px`},n={height:i.style.height};return ce("div",{class:Nt.layerRow,key:`${this.key}-row`},ce("div",{class:Nt.symbolContainer,styles:r},ce("div",{afterCreate:on,bind:i,class:Nt.rampContainer})),ce("div",{class:Nt.layerInfo},ce("div",{class:Nt.rampLabelsContainer,styles:n},e.infos.map(((s,o)=>this._renderRampLabel(s,o,e.type))))))}_renderRampLabel(e,i,r){return ce("div",{class:e.label?Nt.rampLabel:void 0,key:`${this.key}-stop-${e.label??i}-label`},Hke(e,r,this.messages))}};d([g()],gw.prototype,"_preview",null),d([g()],gw.prototype,"legendElement",void 0),d([g()],gw.prototype,"messages",void 0),d([g()],gw.prototype,"opacity",void 0),gw=d([G("esri.widgets.Legend.styles.classic.ColorRamp")],gw);let MI=class extends Co{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map((i=>this._renderRow(i))).filter(Boolean);return e.length?this.legendElement.theme==="spike"?Yke(this.legendElement):ce("div",{class:Nt.layerBody},e):null}_renderRow(e){return e.preview?ce("div",{class:Nt.layerRow,key:`${this.key}-${e.label}-row`},ce("div",{class:this.classes(Nt.symbolContainer,Nt.sizeRamp)},ce("div",{afterCreate:on,bind:e.preview,class:Nt.symbol})),ce("div",{class:Nt.layerInfo},aT(this.messages,e.label,!1)||"")):null}};d([g()],MI.prototype,"legendElement",void 0),d([g()],MI.prototype,"messages",void 0),MI=d([G("esri.widgets.Legend.styles.classic.SizeRamp")],MI);let vw=class extends Co{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=Xke(e,i);if(!s)return null;const a=this.messages.previewColorRampAriaLabel,l=cT(s,"above",!0),c=cT(s,"below",!0),u=12,p=lT(o,{width:u,height:l,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:a}),m=lT(o,{width:u,height:c,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:a}),v=K4(s),w=s.infos.map((B=>B.label)),_=w.map(((B,q)=>q===0?ce("div",{class:B?p?Nt.univariateAboveAndBelowLabel:Nt.rampLabel:void 0,key:`${n}-color-ramp-above-label-${B??q}`},B):q===2?ce("div",null):null)),T=w.length-1,$=Math.floor(w.length/2),I=w.map(((B,q)=>q===$||q===T?ce("div",{class:B?p?Nt.univariateAboveAndBelowLabel:Nt.rampLabel:void 0,key:`${n}-color-ramp-below-label-${B??q}`},B):null)),A={display:"table-cell",verticalAlign:"middle"},k={marginTop:`${v}px`},R={height:`${l}px`},F={height:`${c}px`};return ce("div",{key:`${n}-container`,styles:eOe},ce("div",{class:Nt.layerBody},s.infos.map(((B,q)=>ce("div",{class:this.classes(Nt.layerRow,Nt.sizeRamp),key:`${n}-row-${q}`},ce("div",{afterCreate:on,bind:B.preview,class:Nt.symbol,styles:A}),p||q%2!=0?null:ce("div",{class:Nt.layerInfo},w[q]))))),p?ce("div",{styles:k},ce("div",{styles:tK},ce("div",{styles:f2},ce("div",{afterCreate:on,bind:p,class:Nt.rampContainer})),ce("div",{styles:f2},ce("div",{class:Nt.rampLabelsContainer,styles:R},_))),ce("div",{styles:tK},ce("div",{styles:f2},ce("div",{afterCreate:on,bind:m,class:Nt.rampContainer})),ce("div",{styles:f2},ce("div",{class:Nt.rampLabelsContainer,styles:F},I)))):null)}};d([g()],vw.prototype,"effectList",void 0),d([g()],vw.prototype,"legendElement",void 0),d([g()],vw.prototype,"messages",void 0),d([g()],vw.prototype,"opacity",void 0),vw=d([G("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],vw);let bw=class extends Co{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var T;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=Qke(e);if(!s)return null;const a=K4(s),l=12,c=cT(s,"full",!1),u=lT(o,{width:l,height:c,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(T=this.messages)==null?void 0:T.previewColorRampAriaLabel}),p=s.infos.length-1,m=s.infos.map((($,I)=>I===0||I===p?ce("div",{class:$.label?o?Nt.univariateAboveAndBelowLabel:Nt.rampLabel:void 0,key:`${n}-color-ramp-label-${$.label??I}`},$.label):null)),v={display:"table-cell",verticalAlign:"middle"},w={marginTop:`${a}px`},_={height:`${c}px`};return ce("div",{key:`${n}-container`,styles:eOe},ce("div",{class:Nt.layerBody},s.infos.map((($,I)=>ce("div",{class:this.classes(Nt.layerRow,Nt.sizeRamp),key:`${n}-row-${I}`},ce("div",{afterCreate:on,bind:$.preview,class:Nt.symbol,styles:v}))))),ce("div",{styles:w},ce("div",{styles:tK},ce("div",{styles:f2},ce("div",{afterCreate:on,bind:u,class:Nt.rampContainer})),ce("div",{styles:f2},ce("div",{class:Nt.rampLabelsContainer,styles:_},m)))))}};d([g()],bw.prototype,"effectList",void 0),d([g()],bw.prototype,"legendElement",void 0),d([g()],bw.prototype,"messages",void 0),d([g()],bw.prototype,"opacity",void 0),bw=d([G("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],bw);var rK;let Jg=rK=class extends Co{constructor(t,e){super(t,e),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=Wke(this.legendElement,this.messages),i=this.isChild?Nt.layerChildTable:Nt.layerTable,r=e?ce("div",{class:Nt.layerCaption},e):null,n={[Nt.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return ce("section",{class:this.classes(i,n),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return ce(MI,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return ce(gw,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return TPe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return ce("div",{afterCreate:on,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return ce(vw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return ce(bw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map((i=>this._renderElementInfo(i,t.legendType))).filter(Boolean);return e.length?ce("div",{class:Nt.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return ce(rK,{effectList:this.effectList,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=qke(i,e),o={[Nt.imageryLayerInfoStretched]:s},a={[Nt.imageryLayerInfoStretched]:s};return ce("div",{class:Nt.layerRow,key:`${n}-row`},ce("div",{class:this.classes(Nt.symbolContainer,a)},this._renderPreview(t,s)),ce("div",{class:this.classes(Nt.layerInfo,o)},aT(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;return"preview"in t&&t.preview?ce("div",{afterCreate:on,bind:t.preview,class:Nt.symbol}):"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[Nt.imageryLayerStretchedImage]:i,[Nt.symbol]:!i},a={opacity:`${s??e.opacity}`},l=aT(this.messages,r,!1);return ce("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};d([g()],Jg.prototype,"effectList",void 0),d([g()],Jg.prototype,"isChild",void 0),d([g()],Jg.prototype,"layer",void 0),d([g()],Jg.prototype,"legendElement",void 0),d([g()],Jg.prototype,"messages",void 0),Jg=rK=d([G("esri.widgets.Legend.styles.classic.LegendElement")],Jg);const oxt=`${$r}__`;let cu=class extends Co{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e==null?void 0:e.toArray().map((r=>this._renderLegendForLayer(r))).filter(Boolean);return i!=null&&i.length?ce("section",null,i):ce("div",{class:Nt.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,i){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,n=`${oxt}${i?`${i}-`:""}${r}`,s=e.title?hD({level:this.headingLevel,class:this.classes(ml.heading,Nt.label)},e.title):null;if(e.children.length){const o=e.children.toArray().map((a=>this._renderLegendForLayer(a,r)));return ce("section",{class:this.classes(Nt.service,Nt.groupLayer),key:n},s,o)}return this._renderLegendElementsForLayer(e,s,n)}_renderLegendElementsForLayer(e,i,r){var a;const n=(a=e.legendElements)==null?void 0:a.filter(Boolean);if(!(n!=null&&n.length))return null;const s=n.map((l=>ce(Jg,{effectList:e.effectList,isChild:!1,key:`${r}-${l.type}`,layer:e.layer,legendElement:l,messages:this.messages}))),o={[Nt.groupLayerChild]:!!e.parent};return ce("section",{class:this.classes(Nt.service,o),key:r},i,ce("div",{class:Nt.layer},s))}};d([g()],cu.prototype,"activeLayerInfos",void 0),d([g()],cu.prototype,"headingLevel",void 0),d([g(),h0("esri/widgets/Legend/t9n/Legend")],cu.prototype,"messages",void 0),d([g({readOnly:!0})],cu.prototype,"type",void 0),cu=d([G("esri.widgets.Legend.styles.classic.ClassicView")],cu);const axt={base:"esri-legend"};let $s=class extends Co{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new Jl,this.style=new cu}initialize(){this.addHandles([wu((()=>this.view),"resize",(()=>this.scheduleRender())),wu((()=>this.activeLayerInfos),"change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),Je((()=>this.headingLevel),(e=>{const{style:i}=this;i&&(i.headingLevel=e)})),Je((()=>this.style),((e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)}),rn)])}destroy(){var e;(e=this.style)==null||e.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const i=this._get("style");e!==i&&(i==null||i.destroy()),this._set("style",e)}castStyle(e){if(e instanceof iu||e instanceof cu)return e;if(typeof e=="string")return e==="card"?new iu:new cu;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,e.type==="card"?new iu(i):new cu(i)}return new cu}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return ce("div",{class:this.classes(axt.base,ml.widget,this.style instanceof cu?ml.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=Je((()=>e.version),(()=>this.scheduleRender()));this.addHandles(i,`version_${e.layer.uid}`);const r=wu((()=>e.children),"change",(()=>e.children.forEach((n=>this._renderOnActiveLayerInfoChange(n)))),rn);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach((n=>this._renderOnActiveLayerInfoChange(n)))}};d([g()],$s.prototype,"activeLayerInfos",null),d([g()],$s.prototype,"basemapLegendVisible",null),d([g()],$s.prototype,"groundLegendVisible",null),d([g()],$s.prototype,"headingLevel",void 0),d([g()],$s.prototype,"hideLayersNotInCurrentView",null),d([g()],$s.prototype,"keepCacheOnDestroy",null),d([g()],$s.prototype,"respectLayerDefinitionExpression",null),d([g()],$s.prototype,"respectLayerVisibility",null),d([g()],$s.prototype,"icon",null),d([g()],$s.prototype,"label",null),d([g()],$s.prototype,"layerInfos",null),d([g(),h0("esri/widgets/Legend/t9n/Legend")],$s.prototype,"messages",void 0),d([g()],$s.prototype,"style",null),d([Ai("style")],$s.prototype,"castStyle",null),d([g()],$s.prototype,"view",null),d([g()],$s.prototype,"viewModel",void 0),$s=d([G("esri.widgets.Legend")],$s);const lxt=$s;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const cxt=(t,e)=>i=>hxt(i,t);var Yz,KP,JP,g0,iOe,rOe,nOe,Jbe;let uxt=(Jbe=class extends rX{constructor(i,r){var c;super(i,r);pt(this,g0);pt(this,Yz,new Map);pt(this,KP);pt(this,JP);new Iee(i);const n=this,s=n.instance;let o=s.viewModel,a=s.visibleElements;const l=new Proxy(this.exports,{get(u,p,m){return p==="viewModel"?o:p==="visibleElements"?a:Reflect.get(u,p,m)}});if(nt(n,JP,s),n.instance=l,n.exports=l,o){const u={component:i,get exports(){return n.instance.viewModel}};G6e(n).set("viewModel","viewModel"),i.addController(u),o=J_e(i,new WeakRef(u),Qje(i)-1,o,me(n,Yz))}n.instance.visibleElements&&(a=si(c=n,g0,iOe).call(c,s))}hostConnected(){this.instance=me(this,JP),super.hostConnected()}hostLoad(){nt(this,KP,Je(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,this.component.closed!==void 0&&this.onLifecycle(()=>Je(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=me(this,KP))==null||i.remove(),super.hostDestroy()}},Yz=new WeakMap,KP=new WeakMap,JP=new WeakMap,g0=new WeakSet,iOe=function(i){return new Proxy(i.visibleElements,{get:(r,n)=>{if(typeof n=="symbol"||n in Promise.prototype)return r[n];const s=[n],o=si(this,g0,rOe).call(this,s);return PJ(this.component,a=>{const l=a;this.component[l]=!1;let c=i.visibleElements??{},u;for(const m of s.slice(0,-1))if(typeof c[m]=="object"&&c[m]!==null)c=c[m];else{u=!!c[m];break}u===void 0&&(u=!!(c[s.slice(-1)[0]]??!0));const p=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):u;this.onUpdate(m=>{if(m.has(l)){const v=this.component[l];si(this,g0,nOe).call(this,s,v,p)}})},o)}})},rOe=function(i){const r=new Proxy({},{get:(n,s)=>{const o=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?o:(i.push(s),r)}});return r},nOe=function(i,r,n){let s=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof s[a]!="object"||s[a]===null)&&(s[a]={}),s=s[a];const o=!!(n?!r:r);s[i.at(-1)]=o},Jbe);const hxt=dk(uxt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const dxt=Xi`@layer{arcgis-legend{display:block}}`,pxt=cxt(lxt);var e0;let fxt=(e0=class extends ik{constructor(){super(...arguments),this.widget=pxt(this),this.viewModel=this.widget.viewModel,this.activeLayerInfos=this.widget.activeLayerInfos,this.autoDestroyDisabled=!1,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.headingLevel=this.widget.headingLevel,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.layerInfos=this.widget.layerInfos,this.legendStyle=this.widget.style,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.state=this.viewModel.state,this.arcgisPropertyChange=Cee()("state"),this.arcgisReady=jE()}async destroy(){await this.manager.destroy()}},e0.properties={activeLayerInfos:0,autoDestroyDisabled:5,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,icon:1,label:1,layerInfos:0,legendStyle:1,position:1,referenceElement:1,respectLayerDefinitionExpression:5,respectLayerVisibilityDisabled:5,state:3},e0.shadowRootOptions=C_,e0.styles=dxt,e0);ok("arcgis-legend",fxt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Mme={scrim:"scrim",content:"content"},Cme={s:72,l:480},mxt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,Kz=class Kz extends Nr{constructor(){super(...arguments),this.loaderRef=Qo(),this.resizeObserver=Su("resize",()=>this.handleResize()),this.messages=xc(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=Amt(e)}getScale(e){return e<Cme.s?"s":e>=Cme.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:n}=this;return Pe`<div class=${Oe(Mme.scrim)}>${i&&r?Pe`<calcite-loader .label=${n.loading} .scale=${r} ${wi(this.loaderRef)}></calcite-loader>`:null}<div class=${Oe(Mme.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};Kz.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},Kz.styles=mxt;let nK=Kz;an("calcite-scrim",nK);const sOe=["top","right","bottom","left"],Ime=["start","end"],Ame=sOe.reduce((t,e)=>t.concat(e,e+"-"+Ime[0],e+"-"+Ime[1]),[]),uT=Math.min,m_=Math.max,LF=Math.round,i3=Math.floor,Np=t=>({x:t,y:t}),yxt={left:"right",right:"left",bottom:"top",top:"bottom"},gxt={start:"end",end:"start"};function sK(t,e,i){return m_(t,uT(e,i))}function p1(t,e){return typeof t=="function"?t(e):t}function cy(t){return t.split("-")[0]}function Dp(t){return t.split("-")[1]}function oOe(t){return t==="x"?"y":"x"}function ste(t){return t==="y"?"height":"width"}const vxt=new Set(["top","bottom"]);function zv(t){return vxt.has(cy(t))?"y":"x"}function ote(t){return oOe(zv(t))}function aOe(t,e,i){i===void 0&&(i=!1);const r=Dp(t),n=ote(t),s=ste(n);let o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=NF(o)),[o,NF(o)]}function bxt(t){const e=NF(t);return[RF(t),e,RF(e)]}function RF(t){return t.replace(/start|end/g,e=>gxt[e])}const Pme=["left","right"],kme=["right","left"],wxt=["top","bottom"],_xt=["bottom","top"];function xxt(t,e,i){switch(t){case"top":case"bottom":return i?e?kme:Pme:e?Pme:kme;case"left":case"right":return e?wxt:_xt;default:return[]}}function Sxt(t,e,i,r){const n=Dp(t);let s=xxt(cy(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(RF)))),s}function NF(t){return t.replace(/left|right|bottom|top/g,e=>yxt[e])}function Ext(t){return{top:0,right:0,bottom:0,left:0,...t}}function lOe(t){return typeof t!="number"?Ext(t):{top:t,right:t,bottom:t,left:t}}function DF(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function Ome(t,e,i){let{reference:r,floating:n}=t;const s=zv(e),o=ote(e),a=ste(o),l=cy(e),c=s==="y",u=r.x+r.width/2-n.width/2,p=r.y+r.height/2-n.height/2,m=r[a]/2-n[a]/2;let v;switch(l){case"top":v={x:u,y:r.y-n.height};break;case"bottom":v={x:u,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:p};break;case"left":v={x:r.x-n.width,y:p};break;default:v={x:r.x,y:r.y}}switch(Dp(e)){case"start":v[o]-=m*(i&&c?-1:1);break;case"end":v[o]+=m*(i&&c?-1:1);break}return v}const Txt=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:u,y:p}=Ome(c,r,l),m=r,v={},w=0;for(let _=0;_<a.length;_++){const{name:T,fn:$}=a[_],{x:I,y:A,data:k,reset:R}=await $({x:u,y:p,initialPlacement:r,placement:m,strategy:n,middlewareData:v,rects:c,platform:o,elements:{reference:t,floating:e}});u=I??u,p=A??p,v={...v,[T]:{...v[T],...k}},R&&w<=50&&(w++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):R.rects),{x:u,y:p}=Ome(c,m,l)),_=-1)}return{x:u,y:p,placement:m,strategy:n,middlewareData:v}};async function TP(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:m=!1,padding:v=0}=p1(e,t),w=lOe(v),T=a[m?p==="floating"?"reference":"floating":p],$=DF(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(T)))==null||i?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),I=p==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},R=DF(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:I,offsetParent:A,strategy:l}):I);return{top:($.top-R.top+w.top)/k.y,bottom:(R.bottom-$.bottom+w.bottom)/k.y,left:($.left-R.left+w.left)/k.x,right:(R.right-$.right+w.right)/k.x}}const $xt=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=p1(t,e)||{};if(c==null)return{};const p=lOe(u),m={x:i,y:r},v=ote(n),w=ste(v),_=await o.getDimensions(c),T=v==="y",$=T?"top":"left",I=T?"bottom":"right",A=T?"clientHeight":"clientWidth",k=s.reference[w]+s.reference[v]-m[v]-s.floating[w],R=m[v]-s.reference[v],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let B=F?F[A]:0;(!B||!await(o.isElement==null?void 0:o.isElement(F)))&&(B=a.floating[A]||s.floating[w]);const q=k/2-R/2,Y=B/2-_[w]/2-1,J=uT(p[$],Y),Q=uT(p[I],Y),te=J,re=B-_[w]-Q,ee=B/2-_[w]/2+q,ye=sK(te,ee,re),ne=!l.arrow&&Dp(n)!=null&&ee!==ye&&s.reference[w]/2-(ee<te?J:Q)-_[w]/2<0,ue=ne?ee<te?ee-te:ee-re:0;return{[v]:m[v]+ue,data:{[v]:ye,centerOffset:ee-ye-ue,...ne&&{alignmentOffset:ue}},reset:ne}}});function Mxt(t,e,i){return(t?[...i.filter(n=>Dp(n)===t),...i.filter(n=>Dp(n)!==t)]:i.filter(n=>cy(n)===n)).filter(n=>t?Dp(n)===t||(e?RF(n)!==n:!1):!0)}const Cxt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:p,allowedPlacements:m=Ame,autoAlignment:v=!0,...w}=p1(t,e),_=p!==void 0||m===Ame?Mxt(p||null,v,m):m,T=await TP(e,w),$=((i=o.autoPlacement)==null?void 0:i.index)||0,I=_[$];if(I==null)return{};const A=aOe(I,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==I)return{reset:{placement:_[0]}};const k=[T[cy(I)],T[A[0]],T[A[1]]],R=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:I,overflows:k}],F=_[$+1];if(F)return{data:{index:$+1,overflows:R},reset:{placement:F}};const B=R.map(J=>{const Q=Dp(J.placement);return[J.placement,Q&&u?J.overflows.slice(0,2).reduce((te,re)=>te+re,0):J.overflows[0],J.overflows]}).sort((J,Q)=>J[1]-Q[1]),Y=((n=B.filter(J=>J[2].slice(0,Dp(J[0])?2:3).every(Q=>Q<=0))[0])==null?void 0:n[0])||B[0][0];return Y!==a?{data:{index:$+1,overflows:R},reset:{placement:Y}}:{}}}},Ixt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:_=!0,...T}=p1(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const $=cy(n),I=zv(a),A=cy(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=m||(A||!_?[NF(a)]:bxt(a)),F=w!=="none";!m&&F&&R.push(...Sxt(a,_,w,k));const B=[a,...R],q=await TP(e,T),Y=[];let J=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&Y.push(q[$]),p){const ee=aOe(n,o,k);Y.push(q[ee[0]],q[ee[1]])}if(J=[...J,{placement:n,overflows:Y}],!Y.every(ee=>ee<=0)){var Q,te;const ee=(((Q=s.flip)==null?void 0:Q.index)||0)+1,ye=B[ee];if(ye&&(!(p==="alignment"?I!==zv(ye):!1)||J.every(he=>zv(he.placement)===I?he.overflows[0]>0:!0)))return{data:{index:ee,overflows:J},reset:{placement:ye}};let ne=(te=J.filter(ue=>ue.overflows[0]<=0).sort((ue,he)=>ue.overflows[1]-he.overflows[1])[0])==null?void 0:te.placement;if(!ne)switch(v){case"bestFit":{var re;const ue=(re=J.filter(he=>{if(F){const Ne=zv(he.placement);return Ne===I||Ne==="y"}return!0}).map(he=>[he.placement,he.overflows.filter(Ne=>Ne>0).reduce((Ne,X)=>Ne+X,0)]).sort((he,Ne)=>he[1]-Ne[1])[0])==null?void 0:re[0];ue&&(ne=ue);break}case"initialPlacement":ne=a;break}if(n!==ne)return{reset:{placement:ne}}}return{}}}};function Lme(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rme(t){return sOe.some(e=>t[e]>=0)}const Axt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=p1(t,e);switch(r){case"referenceHidden":{const s=await TP(e,{...n,elementContext:"reference"}),o=Lme(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Rme(o)}}}case"escaped":{const s=await TP(e,{...n,altBoundary:!0}),o=Lme(s,i.floating);return{data:{escapedOffsets:o,escaped:Rme(o)}}}default:return{}}}}},Pxt=new Set(["left","top"]);async function kxt(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=cy(i),a=Dp(i),l=zv(i)==="y",c=Pxt.has(o)?-1:1,u=s&&l?-1:1,p=p1(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof w=="number"&&(v=a==="end"?w*-1:w),l?{x:v*u,y:m*c}:{x:m*c,y:v*u}}const Oxt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:o,middlewareData:a}=e,l=await kxt(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},Lxt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:$,y:I}=T;return{x:$,y:I}}},...l}=p1(t,e),c={x:i,y:r},u=await TP(e,l),p=zv(cy(n)),m=oOe(p);let v=c[m],w=c[p];if(s){const T=m==="y"?"top":"left",$=m==="y"?"bottom":"right",I=v+u[T],A=v-u[$];v=sK(I,v,A)}if(o){const T=p==="y"?"top":"left",$=p==="y"?"bottom":"right",I=w+u[T],A=w-u[$];w=sK(I,w,A)}const _=a.fn({...e,[m]:v,[p]:w});return{..._,data:{x:_.x-i,y:_.y-r,enabled:{[m]:s,[p]:o}}}}}};function J4(){return typeof window<"u"}function r$(t){return cOe(t)?(t.nodeName||"").toLowerCase():"#document"}function fc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rf(t){var e;return(e=(cOe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cOe(t){return J4()?t instanceof Node||t instanceof fc(t).Node:!1}function Uh(t){return J4()?t instanceof Element||t instanceof fc(t).Element:!1}function Kp(t){return J4()?t instanceof HTMLElement||t instanceof fc(t).HTMLElement:!1}function Nme(t){return!J4()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fc(t).ShadowRoot}const Rxt=new Set(["inline","contents"]);function qk(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=Bh(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!Rxt.has(n)}const Nxt=new Set(["table","td","th"]);function Dxt(t){return Nxt.has(r$(t))}const Fxt=[":popover-open",":modal"];function X4(t){return Fxt.some(e=>{try{return t.matches(e)}catch{return!1}})}const zxt=["transform","translate","scale","rotate","perspective"],jxt=["transform","translate","scale","rotate","perspective","filter"],Uxt=["paint","layout","strict","content"];function Q4(t){const e=ate(),i=Uh(t)?Bh(t):t;return zxt.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||jxt.some(r=>(i.willChange||"").includes(r))||Uxt.some(r=>(i.contain||"").includes(r))}function Bxt(t){let e=f0(t);for(;Kp(e)&&!hT(e);){if(Q4(e))return e;if(X4(e))return null;e=f0(e)}return null}function ate(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Vxt=new Set(["html","body","#document"]);function hT(t){return Vxt.has(r$(t))}function Bh(t){return fc(t).getComputedStyle(t)}function eU(t){return Uh(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function f0(t){if(r$(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Nme(t)&&t.host||rf(t);return Nme(e)?e.host:e}function uOe(t){const e=f0(t);return hT(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kp(e)&&qk(e)?e:uOe(e)}function $P(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=uOe(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=fc(n);if(s){const a=oK(o);return e.concat(o,o.visualViewport||[],qk(n)?n:[],a&&i?$P(a):[])}return e.concat(n,$P(n,[],i))}function oK(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hOe(t){const e=Bh(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Kp(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=LF(i)!==s||LF(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function lte(t){return Uh(t)?t:t.contextElement}function R2(t){const e=lte(t);if(!Kp(e))return Np(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=hOe(e);let o=(s?LF(i.width):i.width)/r,a=(s?LF(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Gxt=Np(0);function dOe(t){const e=fc(t);return!ate()||!e.visualViewport?Gxt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qxt(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==fc(t)?!1:e}function Z_(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=lte(t);let o=Np(1);e&&(r?Uh(r)&&(o=R2(r)):o=R2(t));const a=qxt(s,i,r)?dOe(s):Np(0);let l=(n.left+a.x)/o.x,c=(n.top+a.y)/o.y,u=n.width/o.x,p=n.height/o.y;if(s){const m=fc(s),v=r&&Uh(r)?fc(r):r;let w=m,_=oK(w);for(;_&&r&&v!==w;){const T=R2(_),$=_.getBoundingClientRect(),I=Bh(_),A=$.left+(_.clientLeft+parseFloat(I.paddingLeft))*T.x,k=$.top+(_.clientTop+parseFloat(I.paddingTop))*T.y;l*=T.x,c*=T.y,u*=T.x,p*=T.y,l+=A,c+=k,w=fc(_),_=oK(w)}}return DF({width:u,height:p,x:l,y:c})}function tU(t,e){const i=eU(t).scrollLeft;return e?e.left+i:Z_(rf(t)).left+i}function pOe(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-tU(t,i),n=i.top+e.scrollTop;return{x:r,y:n}}function Hxt(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",o=rf(r),a=e?X4(e.floating):!1;if(r===o||a&&s)return i;let l={scrollLeft:0,scrollTop:0},c=Np(1);const u=Np(0),p=Kp(r);if((p||!p&&!s)&&((r$(r)!=="body"||qk(o))&&(l=eU(r)),Kp(r))){const v=Z_(r);c=R2(r),u.x=v.x+r.clientLeft,u.y=v.y+r.clientTop}const m=o&&!p&&!s?pOe(o,l):Np(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:i.y*c.y-l.scrollTop*c.y+u.y+m.y}}function Wxt(t){return Array.from(t.getClientRects())}function Zxt(t){const e=rf(t),i=eU(t),r=t.ownerDocument.body,n=m_(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=m_(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+tU(t);const a=-i.scrollTop;return Bh(r).direction==="rtl"&&(o+=m_(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}const Dme=25;function Yxt(t,e){const i=fc(t),r=rf(t),n=i.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const u=ate();(!u||u&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}const c=tU(r);if(c<=0){const u=r.ownerDocument,p=u.body,m=getComputedStyle(p),v=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,w=Math.abs(r.clientWidth-p.clientWidth-v);w<=Dme&&(s-=w)}else c<=Dme&&(s+=c);return{width:s,height:o,x:a,y:l}}const Kxt=new Set(["absolute","fixed"]);function Jxt(t,e){const i=Z_(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=Kp(t)?R2(t):Np(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Fme(t,e,i){let r;if(e==="viewport")r=Yxt(t,i);else if(e==="document")r=Zxt(rf(t));else if(Uh(e))r=Jxt(e,i);else{const n=dOe(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return DF(r)}function fOe(t,e){const i=f0(t);return i===e||!Uh(i)||hT(i)?!1:Bh(i).position==="fixed"||fOe(i,e)}function Xxt(t,e){const i=e.get(t);if(i)return i;let r=$P(t,[],!1).filter(a=>Uh(a)&&r$(a)!=="body"),n=null;const s=Bh(t).position==="fixed";let o=s?f0(t):t;for(;Uh(o)&&!hT(o);){const a=Bh(o),l=Q4(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&Kxt.has(n.position)||qk(o)&&!l&&fOe(t,o))?r=r.filter(u=>u!==o):n=a,o=f0(o)}return e.set(t,r),r}function Qxt(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const o=[...i==="clippingAncestors"?X4(e)?[]:Xxt(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((c,u)=>{const p=Fme(e,u,n);return c.top=m_(p.top,c.top),c.right=uT(p.right,c.right),c.bottom=uT(p.bottom,c.bottom),c.left=m_(p.left,c.left),c},Fme(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eSt(t){const{width:e,height:i}=hOe(t);return{width:e,height:i}}function tSt(t,e,i){const r=Kp(e),n=rf(e),s=i==="fixed",o=Z_(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Np(0);function c(){l.x=tU(n)}if(r||!r&&!s)if((r$(e)!=="body"||qk(n))&&(a=eU(e)),r){const v=Z_(e,!0,s,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else n&&c();s&&!r&&n&&c();const u=n&&!r&&!s?pOe(n,a):Np(0),p=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:p,y:m,width:o.width,height:o.height}}function JV(t){return Bh(t).position==="static"}function zme(t,e){if(!Kp(t)||Bh(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return rf(t)===i&&(i=i.ownerDocument.body),i}function mOe(t,e){const i=fc(t);if(X4(t))return i;if(!Kp(t)){let n=f0(t);for(;n&&!hT(n);){if(Uh(n)&&!JV(n))return n;n=f0(n)}return i}let r=zme(t,e);for(;r&&Dxt(r)&&JV(r);)r=zme(r,e);return r&&hT(r)&&JV(r)&&!Q4(r)?i:r||Bxt(t)||i}const iSt=async function(t){const e=this.getOffsetParent||mOe,i=this.getDimensions,r=await i(t.floating);return{reference:tSt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rSt(t){return Bh(t).direction==="rtl"}const aK={convertOffsetParentRelativeRectToViewportRelativeRect:Hxt,getDocumentElement:rf,getClippingRect:Qxt,getOffsetParent:mOe,getElementRects:iSt,getClientRects:Wxt,getDimensions:eSt,getScale:R2,isElement:Uh,isRTL:rSt};function yOe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nSt(t,e){let i=null,r;const n=rf(t);function s(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:p,width:m,height:v}=c;if(a||e(),!m||!v)return;const w=i3(p),_=i3(n.clientWidth-(u+m)),T=i3(n.clientHeight-(p+v)),$=i3(u),A={rootMargin:-w+"px "+-_+"px "+-T+"px "+-$+"px",threshold:m_(0,uT(1,l))||1};let k=!0;function R(F){const B=F[0].intersectionRatio;if(B!==l){if(!k)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}B===1&&!yOe(c,t.getBoundingClientRect())&&o(),k=!1}try{i=new IntersectionObserver(R,{...A,root:n.ownerDocument})}catch{i=new IntersectionObserver(R,A)}i.observe(t)}return o(!0),s}function sSt(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=lte(t),u=n||s?[...c?$P(c):[],...$P(e)]:[];u.forEach($=>{n&&$.addEventListener("scroll",i,{passive:!0}),s&&$.addEventListener("resize",i)});const p=c&&a?nSt(c,i):null;let m=-1,v=null;o&&(v=new ResizeObserver($=>{let[I]=$;I&&I.target===c&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var A;(A=v)==null||A.observe(e)})),i()}),c&&!l&&v.observe(c),v.observe(e));let w,_=l?Z_(t):null;l&&T();function T(){const $=Z_(t);_&&!yOe(_,$)&&i(),_=$,w=requestAnimationFrame(T)}return i(),()=>{var $;u.forEach(I=>{n&&I.removeEventListener("scroll",i),s&&I.removeEventListener("resize",i)}),p==null||p(),($=v)==null||$.disconnect(),v=null,l&&cancelAnimationFrame(w)}}const oSt=Oxt,aSt=Cxt,lSt=Lxt,jme=Ixt,cSt=Axt,uSt=$xt,hSt=(t,e,i)=>{const r=new Map,n={platform:aK,...i},s={...n.platform,_c:r};return Txt(t,e,{...n,platform:s})};function iU(t,e,{signal:i,edges:r}={}){let n,s=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),l=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},c=()=>{a&&l(),v()};let u=null;const p=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,c()},e)},m=()=>{u!==null&&(clearTimeout(u),u=null)},v=()=>{m(),n=void 0,s=null},w=()=>{l()},_=function(...T){if(i!=null&&i.aborted)return;n=this,s=T;const $=u==null;p(),o&&$&&l()};return _.schedule=p,_.cancel=v,_.flush=w,i==null||i.addEventListener("abort",v,{once:!0}),_}function dSt(t){return t}function pSt(){}function fSt(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function mSt(t){return ySt(t)}function XV(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function ySt(t){for(let e=t;e;e=XV(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=XV(t);e;e=XV(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||Q4(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */(function(){{const e=aK.getOffsetParent;aK.getOffsetParent=i=>e(i,mSt)}})();function Ume(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const gOe=(async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:u})=>{var k;if(!e||!i)return;const p=Fk(i)==="rtl",{x:m,y:v,placement:w,strategy:_,middlewareData:T}=await hSt(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:Bme(n,p),middleware:bSt({placement:n,flipDisabled:s,flipPlacements:o==null?void 0:o.map(R=>Bme(R,p)),offsetDistance:a,offsetSkidding:l,arrowEl:c,type:u})});if(c&&T.arrow){const{x:R,y:F}=T.arrow,B=w.split("-")[0],q=R!=null?"left":"top",Y=xSt[B],J={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=B==="left"||B==="right"?"horizontal":"vertical"),Object.assign(c.style,{...J,[q]:`${q=="left"?R:F}px`,[B]:"100%",transform:Y})}const I=((k=T.hide)==null?void 0:k.referenceHidden)?"hidden":null,A=I?"none":null;i.setAttribute(gSt,w),Object.assign(i.style,{pointerEvents:A,position:_,transform:`translate(${Ume(m)}px,${Ume(v)}px)`,visibility:I})}),gSt="data-placement",vOe=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],MP="bottom-start",vSt="bottom-end",dT={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function bSt({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:o}){const a=[lSt(),cSt()];return o==="menu"&&a.push(jme({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(oSt({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(aSt({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push(jme(i?{fallbackPlacements:i}:{})),s&&a.push(uSt({element:s})),a}function wSt(t){return vOe.includes(t)}function bOe(t,e){const i=t.filter(wSt);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${vOe.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function Bme(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function cte(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!CP.get(t))return wOe(t);await(i?_St(t):gOe)(t,e)}function _St(t){let e=FF.get(t);return e||(e=iU(gOe,UQ.reposition,{edges:["leading","trailing"]}),FF.set(t,e),e)}const xSt={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},CP=new WeakMap,FF=new WeakMap;async function wOe(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=sSt;CP.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const o=t.reposition();n||(n=o)});return CP.set(t,{state:"active",cleanUp:s}),n}function ute(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function Bm(t){const{floatingEl:e,referenceEl:i}=t;if(ute(t),!(!e||!i)&&(rU(t),!!t.open))return wOe(t)}function rU(t){var i;const e=CP.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),CP.delete(t),(i=FF.get(t))==null||i.cancel(),FF.delete(t)}const Vme=4,Gme=Math.ceil(Math.hypot(Vme,Vme));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function hte(t){return t==="Enter"||t===" "}const nU=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function qme(t){return t[t.openProp||"open"]}async function Hk(t){await t.updateComplete,qme(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await Fmt(t.transitionEl,t.transitionProp),qme(t)?t.onOpen():t.onClose()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function SSt(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const ESt={trigger:"trigger"},QV={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},Hme="calcite-dropdown",r3={menuButton:t=>`${Hme}-${t}-menubutton`,menu:t=>`${Hme}-${t}-menu`},TSt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,IA=class IA extends Nr{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=$0(),this.items=[],this.mutationObserver=Su("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=Su("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=vl()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=MP,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=ot({cancelable:!1}),this.calciteDropdownBeforeOpen=ot({cancelable:!1}),this.calciteDropdownClose=ot({cancelable:!1}),this.calciteDropdownOpen=ot({cancelable:!1}),this.calciteDropdownSelect=ot({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,referenceEl:l}=this;return cte(this,{floatingEl:r,referenceEl:l,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),Bm(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==MP)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){Sc(this)}loaded(){this.updateSelectedItems(),Bm(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),rU(this)}openHandler(){Hk(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":DR(n,r,"next");break;case"ArrowUp":DR(n,r,"previous");break;case"Home":DR(n,r,"first");break;case"End":DR(n,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?bOe(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const n=i.length>=e&&e>0?this.getYDistance(r,i[e-1]):0;r.style.maxBlockSize=n>0?`${n}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){fF(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),ute(this)}setReferenceEl(e){fF(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,Bm(this)}setFloatingEl(e){this.floatingEl=e,Bm(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}hte(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistance(e,i){const r=e.getBoundingClientRect();return i.getBoundingClientRect().bottom-r.top}closeCalciteDropdown(e=!0){this.open=!1,e&&pP(this.triggers[0])}focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&pP(i)}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return Ec({disabled:this.disabled,children:Pe`<div class=${Oe(QV.triggerContainer)} id=${r3.menuButton(i)??Ye} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${wi(this.setReferenceEl)}><slot aria-controls=${r3.menu(i)??Ye} .ariaExpanded=${e} aria-haspopup=menu name=${ESt.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${Oe({[QV.wrapper]:!0,[SSt("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${wi(this.setFloatingEl)}><div aria-labelledby=${r3.menuButton(i)??Ye} class=${Oe({[QV.content]:!0,[dT.animation]:!0,[dT.animationActive]:e})} id=${r3.menu(i)??Ye} role=menu ${wi(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};IA.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},IA.shadowRootOptions={mode:"open",delegatesFocus:!0},IA.styles=TSt;let zF=IA;an("calcite-dropdown",zF);const vYt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:zF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const hi=CT(class extends IT{constructor(){super(...arguments),this.key=Ye}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(RJ(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Yu={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},Wme="calcite-action",Zme={button:t=>`${Wme}-${t}-button`,indicator:t=>`${Wme}-${t}-indicator`},$St={tooltip:"tooltip"},MSt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Jz=class Jz extends Nr{constructor(){super(...arguments),this.guid=$0(),this.buttonEl=Qo(),this.buttonId=Zme.button(this.guid),this.indicatorId=Zme.indicator(this.guid),this.mutationObserver=Su("mutation",()=>this.requestUpdate()),this.messages=xc({blocking:!0}),this.focusSetter=vl()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){var e;super.connectedCallback(),this.formEl=Eee(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){Sc(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.formEl=null,(e=this.mutationObserver)==null||e.disconnect()}handleClick(){const{type:e}=this;e==="submit"?B4(this):e==="reset"&&DAe(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[Yu.textContainer]:!0,[Yu.textContainerVisible]:i};return e?hi("text-container",Pe`<div class=${Oe(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:r,buttonId:n}=this;return Pe`<div aria-labelledby=${n??Wd} aria-live=polite class=${Oe(Yu.indicatorText)} id=${r??Wd} role=region>${e?i.indicator:null}</div>`}renderIconContainer(){var v;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",l=e?Pe`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,c=i?Pe`<calcite-icon class=${Oe({[Yu.indicatorWithIcon]:o})} .flipRtl=${s} .icon=${i} .scale=${ns(this.scale)}></calcite-icon>`:null,u=l||c,p=u||((v=n.children)==null?void 0:v.length),m=Pe`<div class=${Oe({[Yu.slotContainer]:!0,[Yu.slotContainerHidden]:e})}><slot></slot></div>`;return p?hi("icon-container",Pe`<div aria-hidden=true class=${Oe(Yu.iconContainer)}>${u}${m}</div>`):null}renderButton(){const{active:e,compact:i,disabled:r,icon:n,loading:s,textEnabled:o,label:a,text:l,indicator:c,indicatorId:u,buttonId:p,messages:m}=this,v=a||l||"",w=c?m.indicatorLabel.replace("{label}",v):v,_={[Yu.button]:!0,[Yu.buttonTextVisible]:o,[Yu.buttonCompact]:i},T=Pe`${this.renderIconContainer()}${this.renderTextContainer()}${!n&&c&&hi("indicator-no-icon",Pe`<div class=${Oe(Yu.indicatorWithoutIcon)}></div>`)||""}`;return this.dragHandle?Pe`<span aria-controls=${(c?u:null)??Wd} .ariaBusy=${s} .ariaDisabled=${this.disabled?this.disabled:null} .ariaLabel=${w} .ariaPressed=${e} class=${Oe(_)} id=${p??Wd} role=button tabindex=${this.disabled?null:0} ${wi(this.buttonEl)}>${T}</span>`:Pe`<button aria-controls=${(c?u:null)??Wd} .ariaBusy=${s} .ariaLabel=${w} .ariaPressed=${e} class=${Oe(_)} .disabled=${r} id=${p??Wd} @click=${this.handleClick} ${wi(this.buttonEl)}>${T}</button>`}render(){return Ec({disabled:this.disabled,children:Pe`${this.renderButton()}<slot name=${$St.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};Jz.properties={active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},Jz.styles=MSt;let jF=Jz;an("calcite-action",jF);const bYt=Object.freeze(Object.defineProperty({__proto__:null,Action:jF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Xg={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},Yme={check:"check",bulletPoint:"bullet-point"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const CSt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Xz=class Xz extends Nr{constructor(){super(),this.childLink=Qo(),this.focusSetter=vl()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=ot({cancelable:!1}),this.calciteInternalDropdownCloseRequest=ot({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=ot({cancelable:!1}),this.calciteInternalDropdownItemSelect=ot({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){Sc(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:n}=this,s=Pe`<calcite-icon class=${Oe(Xg.iconStart)} .flipRtl=${n==="start"||n==="both"} .icon=${this.iconStart} .scale=${ns(this.scale)}></calcite-icon>`,o=Pe`<span class=${Oe(Xg.itemContent)}><slot></slot></span>`,a=Pe`<calcite-icon class=${Oe(Xg.iconEnd)} .flipRtl=${n==="end"||n==="both"} .icon=${this.iconEnd} .scale=${ns(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[s,o,a]:this.iconStart?[s,o]:this.iconEnd?[o,a]:o,c=e?Pe`<a .ariaLabel=${r} class=${Oe(Xg.link)} href=${e??Wd} rel=${this.rel??Wd} tabindex=-1 target=${this.target??Wd} ${wi(this.childLink)}>${l}</a>`:l,u=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",p=i!=="none"?U4(this.selected):null,{disabled:m}=this;return this.el.ariaChecked=p,this.el.ariaLabel=e?"":r,this.el.role=u,x4(this.el,"tabIndex",m?-1:0),Ec({disabled:m,children:Pe`<div class=${Oe({[Xg.container]:!0,[Xg.containerNone]:i==="none"})}>${i!=="none"?Pe`<calcite-icon class=${Oe(Xg.icon)} .icon=${i==="multiple"?Yme.check:Yme.bulletPoint} .scale=${ns(this.scale)}></calcite-icon>`:null}${c}</div>`})}};Xz.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},Xz.styles=CSt;let UF=Xz;an("calcite-dropdown-item",UF);const wYt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:UF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Kme={title:"dropdown-title",separator:"dropdown-separator"},ISt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,AA=class AA extends Nr{constructor(){super(),this.mutationObserver=Su("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=ot({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){var e;super.connectedCallback(),this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?Pe`<span aria-hidden=true class=${Oe(Kme.title)}>${this.groupTitle}</span>`:null,i=this.position>0?Pe`<div class=${Oe(Kme.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",Pe`<div class=${Oe({[Xg.container]:!0})}>${i}${e}<slot></slot></div>`}};AA.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},AA.shadowRootOptions={mode:"open",delegatesFocus:!0},AA.styles=ISt;let BF=AA;an("calcite-dropdown-group",BF);const _Yt=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:BF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Jme={handle:"handle",dropdown:"dropdown"},Xme={drag:"drag",blank:"blank"},e9={label:"{label}",position:"{position}",total:"{total}"},Qme=["top","up","down","bottom"],ASt={trigger:"trigger"},t9={add:"add",move:"move",reorder:"reorder"},PSt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,Qz=class Qz extends Nr{constructor(){super(...arguments),this.focusSetter=vl()(this),this.disabled=!1,this.messages=xc({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=MP,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=ot({cancelable:!1}),this.calciteSortHandleBeforeOpen=ot({cancelable:!1}),this.calciteSortHandleClose=ot({cancelable:!1}),this.calciteSortHandleMove=ot({cancelable:!0}),this.calciteSortHandleAdd=ot({cancelable:!0}),this.calciteSortHandleOpen=ot({cancelable:!1}),this.calciteSortHandleReorder=ot({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){Sc(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:n,hasSetInfo:s}=this;if(!s)return e??"";let o=e?i.repositionLabel.replace(e9.label,e):i.reposition;return o=o.replace(e9.position,r?r.toString():""),o.replace(e9.total,n?n.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(n=>n.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(n=>n.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:n,placement:s,scale:o,widthScale:a,hasNoItems:l}=this,c=this.getLabel(),u=e||l;return Ec({disabled:e,children:Pe`<calcite-dropdown class=${Oe(Jme.dropdown)} .disabled=${u} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${n} .placement=${s} .scale=${o} .widthScale=${a} ${wi(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent class=${Oe(Jme.handle)} .dragHandle=${!0} .icon=${e?Xme.blank:Xme.drag} .label=${c} .scale=${o} slot=${ASt.trigger} .text=${c} title=${c??Ye}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return hi(e.id,Pe`<calcite-dropdown-item data-id=${e.id??Ye} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return hi(e.id,Pe`<calcite-dropdown-item data-id=${e.id??Ye} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?hi("reorder",Pe`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${t9.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?hi("add-to-items",Pe`<calcite-dropdown-group .groupTitle=${e.addTo} id=${t9.add} .scale=${r} selection-mode=none>${i.map(n=>this.renderAddToItem(n))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?hi("move-to-items",Pe`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${t9.move} .scale=${r} selection-mode=none>${i.map(n=>this.renderMoveToItem(n))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return hi(Qme[e],Pe`<calcite-dropdown-item data-value=${Qme[e]??Ye} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};Qz.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},Qz.styles=PSt;let lK=Qz;an("calcite-sort-handle",lK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const _Oe=({children:t,...e})=>{const i=e.level?Ymt(`h${e.level}`):fP`div`;return hi(e.key,_ee`<${i} class=${Oe(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const eye={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},kSt={width:12,height:6,strokeWidth:1},OSt=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=kSt,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${n} Q${o},${n} ${o},${n} Z`;return hi(e,Pe`<svg aria-hidden=true class=${Oe(eye.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:s)}`} width=${r+(a?s:0)} ${wi(i)}>${NA`${NA`<path class=${Oe(eye.arrowStroke)} d=${l??Ye} fill=none stroke-width=${s+1} />`||""}<path d=${l??Ye} stroke=none />`}</svg>`)};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var xOe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],VF=xOe.join(","),SOe=typeof Element>"u",Y_=SOe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,GF=!SOe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},qF=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},LSt=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},EOe=function(e,i,r){if(qF(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(VF));return i&&Y_.call(e,VF)&&n.unshift(e),n=n.filter(r),n},TOe=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!qF(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var u=Y_.call(o,VF);u&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var p=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!qF(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(p&&m){var v=t(p===!0?o.children:p.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},$Oe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Rw=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||LSt(e))&&!$Oe(e)?0:e.tabIndex},RSt=function(e,i){var r=Rw(e);return r<0&&i&&!$Oe(e)?0:r},NSt=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},MOe=function(e){return e.tagName==="INPUT"},DSt=function(e){return MOe(e)&&e.type==="hidden"},FSt=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},zSt=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},jSt=function(e){if(!e.name)return!0;var i=e.form||GF(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=zSt(n,e.form);return!s||s===e},USt=function(e){return MOe(e)&&e.type==="radio"},BSt=function(e){return USt(e)&&!jSt(e)},VSt=function(e){var i,r=e&&GF(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,u,p;r=GF(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=n)!==null&&u!==void 0&&(p=u.ownerDocument)!==null&&p!==void 0&&p.contains(n))}}return s},tye=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},GSt=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Y_.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Y_.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=GF(e);if(l&&!l.shadowRoot&&n(l)===!0)return tye(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(VSt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return tye(e);return!1},qSt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Y_.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},HF=function(e,i){return!(i.disabled||qF(i)||DSt(i)||GSt(i,e)||FSt(i)||qSt(i))},cK=function(e,i){return!(BSt(i)||Rw(i)<0||!HF(e,i))},HSt=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},WSt=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=RSt(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(NSt).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},ZSt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=TOe([e],i.includeContainer,{filter:cK.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:HSt}):r=EOe(e,i.includeContainer,cK.bind(null,i)),WSt(r)},YSt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=TOe([e],i.includeContainer,{filter:HF.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=EOe(e,i.includeContainer,HF.bind(null,i)),r},zx=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Y_.call(e,VF)===!1?!1:cK(i,e)},KSt=xOe.concat("iframe").join(","),i9=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Y_.call(e,KSt)===!1?!1:HF(i,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function uK(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function JSt(t){if(Array.isArray(t))return uK(t)}function XSt(t,e,i){return(e=r2t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function QSt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e2t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function rye(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?iye(Object(i),!0).forEach(function(r){XSt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):iye(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function t2t(t){return JSt(t)||QSt(t)||n2t(t)||e2t()}function i2t(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r2t(t){var e=i2t(t,"string");return typeof e=="symbol"?e:e+""}function n2t(t,e){if(t){if(typeof t=="string")return uK(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?uK(t,e):void 0}}var nye={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},s2t=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},o2t=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},wA=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},a2t=function(e){return wA(e)&&!e.shiftKey},l2t=function(e){return wA(e)&&e.shiftKey},sye=function(e){return setTimeout(e,0)},iC=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},n3=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},c2t=[],u2t=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||c2t,s=rye({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:a2t,isKeyBackward:l2t},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(re,ee,ye){return re&&re[ee]!==void 0?re[ee]:s[ye||ee]},c=function(re,ee){var ye=typeof(ee==null?void 0:ee.composedPath)=="function"?ee.composedPath():void 0;return o.containerGroups.findIndex(function(ne){var ue=ne.container,he=ne.tabbableNodes;return ue.contains(re)||(ye==null?void 0:ye.includes(ue))||he.find(function(Ne){return Ne===re})})},u=function(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=ee.hasFallback,ne=ye===void 0?!1:ye,ue=ee.params,he=ue===void 0?[]:ue,Ne=s[re];if(typeof Ne=="function"&&(Ne=Ne.apply(void 0,t2t(he))),Ne===!0&&(Ne=void 0),!Ne){if(Ne===void 0||Ne===!1)return Ne;throw new Error("`".concat(re,"` was specified but was not a node, or did not return a node"))}var X=Ne;if(typeof Ne=="string"){try{X=r.querySelector(Ne)}catch(_e){throw new Error("`".concat(re,'` appears to be an invalid selector; error="').concat(_e.message,'"'))}if(!X&&!ne)throw new Error("`".concat(re,"` as selector refers to no known node"))}return X},p=function(){var re=u("initialFocus",{hasFallback:!0});if(re===!1)return!1;if(re===void 0||re&&!i9(re,s.tabbableOptions))if(c(r.activeElement)>=0)re=r.activeElement;else{var ee=o.tabbableGroups[0],ye=ee&&ee.firstTabbableNode;re=ye||u("fallbackFocus")}else re===null&&(re=u("fallbackFocus"));if(!re)throw new Error("Your focus-trap needs to have at least one focusable element");return re},m=function(){if(o.containerGroups=o.containers.map(function(re){var ee=ZSt(re,s.tabbableOptions),ye=YSt(re,s.tabbableOptions),ne=ee.length>0?ee[0]:void 0,ue=ee.length>0?ee[ee.length-1]:void 0,he=ye.find(function(_e){return zx(_e)}),Ne=ye.slice().reverse().find(function(_e){return zx(_e)}),X=!!ee.find(function(_e){return Rw(_e)>0});return{container:re,tabbableNodes:ee,focusableNodes:ye,posTabIndexesFound:X,firstTabbableNode:ne,lastTabbableNode:ue,firstDomTabbableNode:he,lastDomTabbableNode:Ne,nextTabbableNode:function(ke){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ke=ee.indexOf(ke);return Ke<0?qe?ye.slice(ye.indexOf(ke)+1).find(function(Qe){return zx(Qe)}):ye.slice(0,ye.indexOf(ke)).reverse().find(function(Qe){return zx(Qe)}):ee[Ke+(qe?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(re){return re.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(re){return re.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(re){var ee=re.activeElement;if(ee)return ee.shadowRoot&&ee.shadowRoot.activeElement!==null?v(ee.shadowRoot):ee},w=function(re){if(re!==!1&&re!==v(document)){if(!re||!re.focus){w(p());return}re.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=re,s2t(re)&&re.select()}},_=function(re){var ee=u("setReturnFocus",{params:[re]});return ee||(ee===!1?!1:re)},T=function(re){var ee=re.target,ye=re.event,ne=re.isBackward,ue=ne===void 0?!1:ne;ee=ee||n3(ye),m();var he=null;if(o.tabbableGroups.length>0){var Ne=c(ee,ye),X=Ne>=0?o.containerGroups[Ne]:void 0;if(Ne<0)ue?he=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:he=o.tabbableGroups[0].firstTabbableNode;else if(ue){var _e=o.tabbableGroups.findIndex(function(di){var qt=di.firstTabbableNode;return ee===qt});if(_e<0&&(X.container===ee||i9(ee,s.tabbableOptions)&&!zx(ee,s.tabbableOptions)&&!X.nextTabbableNode(ee,!1))&&(_e=Ne),_e>=0){var ke=_e===0?o.tabbableGroups.length-1:_e-1,qe=o.tabbableGroups[ke];he=Rw(ee)>=0?qe.lastTabbableNode:qe.lastDomTabbableNode}else wA(ye)||(he=X.nextTabbableNode(ee,!1))}else{var Ke=o.tabbableGroups.findIndex(function(di){var qt=di.lastTabbableNode;return ee===qt});if(Ke<0&&(X.container===ee||i9(ee,s.tabbableOptions)&&!zx(ee,s.tabbableOptions)&&!X.nextTabbableNode(ee))&&(Ke=Ne),Ke>=0){var Qe=Ke===o.tabbableGroups.length-1?0:Ke+1,Xe=o.tabbableGroups[Qe];he=Rw(ee)>=0?Xe.firstTabbableNode:Xe.firstDomTabbableNode}else wA(ye)||(he=X.nextTabbableNode(ee))}}else he=u("fallbackFocus");return he},$=function(re){var ee=n3(re);if(!(c(ee,re)>=0)){if(iC(s.clickOutsideDeactivates,re)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}iC(s.allowOutsideClick,re)||re.preventDefault()}},I=function(re){var ee=n3(re),ye=c(ee,re)>=0;if(ye||ee instanceof Document)ye&&(o.mostRecentlyFocusedNode=ee);else{re.stopImmediatePropagation();var ne,ue=!0;if(o.mostRecentlyFocusedNode)if(Rw(o.mostRecentlyFocusedNode)>0){var he=c(o.mostRecentlyFocusedNode),Ne=o.containerGroups[he].tabbableNodes;if(Ne.length>0){var X=Ne.findIndex(function(_e){return _e===o.mostRecentlyFocusedNode});X>=0&&(s.isKeyForward(o.recentNavEvent)?X+1<Ne.length&&(ne=Ne[X+1],ue=!1):X-1>=0&&(ne=Ne[X-1],ue=!1))}}else o.containerGroups.some(function(_e){return _e.tabbableNodes.some(function(ke){return Rw(ke)>0})})||(ue=!1);else ue=!1;ue&&(ne=T({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),w(ne||o.mostRecentlyFocusedNode||p())}o.recentNavEvent=void 0},A=function(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=re;var ye=T({event:re,isBackward:ee});ye&&(wA(re)&&re.preventDefault(),w(ye))},k=function(re){(s.isKeyForward(re)||s.isKeyBackward(re))&&A(re,s.isKeyBackward(re))},R=function(re){o2t(re)&&iC(s.escapeDeactivates,re)!==!1&&(re.preventDefault(),a.deactivate())},F=function(re){var ee=n3(re);c(ee,re)>=0||iC(s.clickOutsideDeactivates,re)||iC(s.allowOutsideClick,re)||(re.preventDefault(),re.stopImmediatePropagation())},B=function(){if(o.active)return nye.activateTrap(n,a),o.delayInitialFocusTimer=s.delayInitialFocus?sye(function(){w(p())}):w(p()),r.addEventListener("focusin",I,!0),r.addEventListener("mousedown",$,{capture:!0,passive:!1}),r.addEventListener("touchstart",$,{capture:!0,passive:!1}),r.addEventListener("click",F,{capture:!0,passive:!1}),r.addEventListener("keydown",k,{capture:!0,passive:!1}),r.addEventListener("keydown",R),a},q=function(){if(o.active)return r.removeEventListener("focusin",I,!0),r.removeEventListener("mousedown",$,!0),r.removeEventListener("touchstart",$,!0),r.removeEventListener("click",F,!0),r.removeEventListener("keydown",k,!0),r.removeEventListener("keydown",R),a},Y=function(re){var ee=re.some(function(ye){var ne=Array.from(ye.removedNodes);return ne.some(function(ue){return ue===o.mostRecentlyFocusedNode})});ee&&w(p())},J=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Y):void 0,Q=function(){J&&(J.disconnect(),o.active&&!o.paused&&o.containers.map(function(re){J.observe(re,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(re){if(o.active)return this;var ee=l(re,"onActivate"),ye=l(re,"onPostActivate"),ne=l(re,"checkCanFocusTrap");ne||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=v(r),ee==null||ee();var ue=function(){ne&&m(),B(),Q(),ye==null||ye()};return ne?(ne(o.containers.concat()).then(ue,ue),this):(ue(),this)},deactivate:function(re){if(!o.active)return this;var ee=rye({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},re);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,q(),o.active=!1,o.paused=!1,Q(),nye.deactivateTrap(n,a);var ye=l(ee,"onDeactivate"),ne=l(ee,"onPostDeactivate"),ue=l(ee,"checkCanReturnFocus"),he=l(ee,"returnFocus","returnFocusOnDeactivate");ye==null||ye();var Ne=function(){sye(function(){he&&w(_(o.nodeFocusedBeforeActivation)),ne==null||ne()})};return he&&ue?(ue(_(o.nodeFocusedBeforeActivation)).then(Ne,Ne),this):(Ne(),this)},pause:function(re){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,re)):this},unpause:function(re){return o.active?(o.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,re)):this},updateContainerElements:function(re){var ee=[].concat(re).filter(Boolean);return o.containers=ee.map(function(ye){return typeof ye=="string"?r.querySelector(ye):ye}),o.active&&m(),Q(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(re,ee){if(o.paused===re)return this;if(o.paused=re,re){var ye=l(ee,"onPause"),ne=l(ee,"onPostPause");ye==null||ye(),q(),Q(),ne==null||ne()}else{var ue=l(ee,"onUnpause"),he=l(ee,"onPostUnpause");ue==null||ue(),m(),B(),Q(),he==null||he()}return this}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const dD=new WeakSet;function h2t(t,e){return dD.has(t)||pP(e),!1}function d2t(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:bee,trapStack:eot,clickOutsideDeactivates:n=>(dD.has(t)||dD.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{dD.delete(t)},setReturnFocus:n=>{const s=typeof(e==null?void 0:e.setReturnFocus)=="function"?e.setReturnFocus(n):e==null?void 0:e.setReturnFocus;return s===void 0?h2t(t,n):s}}}function oye(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...aye(e==null?void 0:e.extraContainers),...aye(i)]}function aye(t=[]){return Array.isArray(t)?t:[t]}const p2t=t=>gee((e,i)=>{let r,n,s;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const l=n||e.el;if(l.isConnected){if(!r){const c={...o,...e.focusTrapOptions};s||(s=oye(l,e)),r=u2t(s,d2t(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");n=l},setExtraContainers:l=>{const c=n||e.el;s=oye(c,e,l)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(s)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const f2t=5;function m2t({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>f2t}class y2t{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():hte(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!AAe(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{Nmt(e)||e.defaultPrevented||this.pointerDownPosition&&m2t({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const Ku={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},lye="auto",cye="aria-controls",uye="aria-expanded",g2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,hye=new y2t,ej=class ej extends Nr{constructor(){super(...arguments),this.focusTrap=p2t({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${$0()}`,this.hasLoaded=!1,this.mutationObserver=Su("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=xc(),this.focusSetter=vl()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=Gme,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=lye,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=ot({cancelable:!1}),this.calcitePopoverBeforeOpen=ot({cancelable:!1}),this.calcitePopoverClose=ot({cancelable:!1}),this.calcitePopoverOpen=ot({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,floatingEl:u}=this;return cte(this,{floatingEl:u,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==Gme)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==lye))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),rU(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){Hk(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?bOe(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),Bm(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(uye,U4(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(cye,i),hye.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(cye),e.removeAttribute(uye)),hye.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?j4(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),ute(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?hi(Ku.closeButtonContainer,Pe`<div class=${Oe(Ku.closeButtonContainer)}><calcite-action appearance=transparent class=${Oe(Ku.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${ns(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?_Oe({class:Ku.heading,level:i,children:e}):null;return r?hi(Ku.header,Pe`<div class=${Oe(Ku.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:o}=this,a=e&&n,l=!a,c=s?null:hi("floating-arrow",OSt({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",x4(this.el,"id",this.getId()),this.el.role="dialog",Pe`<div class=${Oe(Ku.positionContainer)} ${wi(this.setFloatingEl)}><div class=${Oe({[Ku.container]:!0,[dT.animation]:!0,[dT.animationActive]:a})} ${wi(this.setTransitionEl)}>${c}<div class=${Oe({[Ku.hasHeader]:!!i,[Ku.headerContainer]:!0})}>${this.renderHeader()}<div class=${Oe(Ku.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};ej.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},ej.styles=g2t;let hK=ej;an("calcite-popover",hK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */function dye(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const pye={menu:"menu",defaultTrigger:"default-trigger"},r9="calcite-action-menu",n9={button:t=>`${r9}-${t}-menu-button`,menu:t=>`${r9}-${t}-menu`,action:(t,e)=>`${r9}-${t}-action-${e}`},fye={tooltip:"tooltip",trigger:"trigger"},v2t={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const b2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,w2t=["ArrowUp","ArrowDown","End","Home"],tj=class tj extends Nr{constructor(){super(...arguments),this.guid=$0(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=n9.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(hte(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=r[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=n9.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=n9.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.activeDescendant=i===n},this.focusSetter=vl()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=ot({cancelable:!1}),this.calciteActionMenuExpand=ot({cancelable:!1}),this.calciteActionMenuOpen=ot({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",U4(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,w2t))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=dye(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=dye(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return Pe`<slot name=${fye.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} class=${Oe(pye.defaultTrigger)} .icon=${v2t.menu} .scale=${r} .text=${i} .textEnabled=${n} ${wi(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:o,overlayPositioning:a,flipPlacements:l}=this,c=e[i],u=(c==null?void 0:c.id)||null;return Pe`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${n} trigger-disabled ${wi(this.setPopoverEl)}><div aria-activedescendant=${u??Ye} aria-labelledby=${(n==null?void 0:n.id)??Ye} class=${Oe(pye.menu)} id=${r??Ye} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return Pe`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${fye.tooltip} @slotchange=${this.updateTooltip}></slot>`}};tj.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},tj.styles=b2t;let dK=tj;an("calcite-action-menu",dK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const COe=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Tb={content:"content",toggle:"toggle",header:"header"},fn={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasContent:"header--has-content",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},rC={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},s9={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},_2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .header{gap:var(--calcite-spacing-sm)}:host([scale=s]) .header--has-content{padding:var(--calcite-spacing-sm)}:host([scale=s]) .icon-end-container{gap:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm)}:host([scale=s]) .description{font-size:var(--calcite-font-size-xs)}:host([scale=s]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-xxs)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) )}:host([scale=m]) .header{gap:var(--calcite-spacing-md)}:host([scale=m]) .header--has-content{padding:var(--calcite-spacing-md)}:host([scale=m]) .icon-end-container{gap:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size)}:host([scale=m]) .description{font-size:var(--calcite-font-size-sm)}:host([scale=m]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-sm)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) )}:host([scale=l]) .header{gap:var(--calcite-spacing-lg)}:host([scale=l]) .header--has-content{padding:var(--calcite-spacing-lg)}:host([scale=l]) .icon-end-container{gap:var(--calcite-spacing-lg);padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md)}:host([scale=l]) .description{font-size:var(--calcite-font-size)}:host([scale=l]){--calcite-internal-block-padding-block: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-md)) );--calcite-internal-block-padding-inline: var( --calcite-block-content-space, var(--calcite-block-padding, var(--calcite-spacing-lg)) )}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto auto auto;grid-template-areas:"handle header icon-end control menu actions-end"}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{align-self:center}calcite-sort-handle{grid-area:handle}.title{display:flex;flex-direction:column}.header .title .heading{padding:0;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-font-line-height-relative-snug)}.description{padding:0;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3));font-weight:var(--calcite-font-weight-regular);line-height:var(--calcite-font-line-height-relative-snug)}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;grid-area:icon-end}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-internal-block-padding-block);padding-inline:var(--calcite-internal-block-padding-inline)}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color, var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1)))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([expanded][scale=s]){margin-block:var(--calcite-spacing-xxs)}:host([expanded][scale=l]){margin-block:var(--calcite-spacing-md)}:host([hidden]){display:none}[hidden]{display:none}`,ij=class ij extends Nr{constructor(){super(...arguments),this.transitionProp="margin-top",this.blockSectionChildren=[],this.messages=xc(),this.focusSetter=vl()(this),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=vSt,this.addToItems=[],this.moveToItems=[],this.sortDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteInternalBlockUpdateSortMenuItems=ot({cancelable:!1}),this.calciteBlockBeforeClose=ot({cancelable:!1}),this.calciteBlockBeforeOpen=ot({cancelable:!1}),this.calciteBlockClose=ot({cancelable:!1}),this.calciteBlockCollapse=ot({cancelable:!1}),this.calciteBlockExpand=ot({cancelable:!1}),this.calciteBlockOpen=ot({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=ot({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=ot({cancelable:!1}),this.calciteBlockSortHandleClose=ot({cancelable:!1}),this.calciteBlockSortHandleOpen=ot({cancelable:!1}),this.calciteBlockToggle=ot({cancelable:!1})}get open(){return this.expanded}set open(e){mF.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&mF.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&Hk(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteBlockExpand.emit():this.calciteBlockCollapse.emit()),e.has("scale")&&this.hasUpdated&&this.updateBlockSectionScale()}updated(){Sc(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=jn(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=jn(e)}iconSlotChangeHandler(e){this.hasIcon=jn(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=jn(e)}handleContentStartSlotChange(e){this.hasContentStart=jn(e)}handleDefaultSlotChange(e){this.blockSectionChildren=IAe(e,"calcite-block-section"),this.updateBlockSectionScale()}updateBlockSectionScale(){this.blockSectionChildren.forEach(e=>{e.scale=this.scale})}renderScrim(){const{loading:e}=this,i=Pe`<slot @slotchange=${this.handleDefaultSlotChange}></slot>`;return[e?Pe`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?hi("loader",Pe`<div class=${Oe(fn.icon)}><calcite-loader inline .label=${i.loading} .scale=${this.scale}></calcite-loader></div>`):r?hi("status-icon",Pe`<div class=${Oe(fn.icon)}><calcite-icon class=${Oe({[fn.statusIcon]:!0,[fn.valid]:r=="valid",[fn.invalid]:r=="invalid"})} .icon=${s9[r]} .scale=${ns(this.scale)}></calcite-icon></div>`):hi("icon-slot",Pe`<div class=${Oe(fn.icon)} .hidden=${!this.hasIcon}>${hi("icon-slot",Pe`<slot name=${rC.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return Pe`<div class=${Oe(fn.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${rC.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return Pe`<div class=${Oe(fn.contentStart)} .hidden=${!this.hasContentStart}><slot name=${rC.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?Pe`<div class=${Oe(fn.title)}>${_Oe({class:fn.heading,level:i,children:e})}${r?Pe`<div class=${Oe(fn.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",n=e==="start"?this.iconStart:this.iconEnd,s=e==="start"?fn.iconStart:fn.iconEnd;if(n)return hi(n,Pe`<calcite-icon class=${Oe(s)} .flipRtl=${r} .icon=${n} .scale=${ns(this.scale)}></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:n,heading:s,messages:o,description:a,menuFlipPlacements:l,menuPlacement:c,moveToItems:u,addToItems:p,setPosition:m,setSize:v,dragDisabled:w,sortDisabled:_,iconEnd:T,hasContentStart:$,iconStart:I}=this,A=r?o.collapse:o.expand,k=!!(s||a||$||I||i||status),R=Pe`<header class=${Oe({[fn.header]:!0,[fn.headerHasContent]:k})} id=${Tb.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,F=r?s9.expanded:s9.collapsed,B=Pe`<div class=${Oe(fn.headerContainer)}>${this.dragHandle?Pe`<calcite-sort-handle .addToItems=${p} .disabled=${w} .label=${s||n} .moveToItems=${u} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${m} .setSize=${v} .sortDisabled=${_} ${wi(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?Pe`<button aria-controls=${Tb.content} aria-describedby=${Tb.header} .ariaExpanded=${e?r:null} class=${Oe(fn.toggle)} id=${Tb.toggle} @click=${this.onHeaderClick} title=${A??Ye}>${R}<div class=${Oe(fn.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${Oe(fn.toggleIcon)} .icon=${F} .scale=${ns(this.scale)}></calcite-icon></div></button>`:R}${T&&!e?Pe`<div class=${Oe(fn.iconEndContainer)}>${this.renderIcon("end")}</div>`:null}<div aria-labelledby=${Tb.header} class=${Oe(fn.controlContainer)} .hidden=${!this.hasControl}><slot name=${rC.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${o.options} .overlayPositioning=${this.overlayPositioning} .placement=${c} .scale=${this.scale}><slot name=${rC.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return Ec({disabled:this.disabled,children:Pe`<article aria-label=${n??Ye} .ariaBusy=${i} class=${Oe({[fn.container]:!0})}>${B}<section aria-labelledby=${Tb.toggle} class=${Oe(fn.content)} .hidden=${!r} id=${Tb.content}>${this.renderScrim()}</section></article>`})}};ij.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],sortDisabled:[5,{},{type:Boolean}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},ij.styles=[_2t,COe];let pK=ij;an("calcite-block",pK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const jx={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},m2={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const x2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,rj=class rj extends Nr{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=jn(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=jn(e)}handleContentStartSlotChange(e){this.hasContentStart=jn(e)}handleContentEndSlotChange(e){this.hasContentEnd=jn(e)}renderActionsStart(){const{hasActionsStart:e}=this;return hi("actions-start-container",Pe`<div class=${Oe(jx.actionsStart)} .hidden=${!e}><slot name=${m2.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return hi("actions-end-container",Pe`<div class=${Oe(jx.actionsEnd)} .hidden=${!e}><slot name=${m2.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return Pe`<div class=${Oe(jx.contentStart)} .hidden=${!e}><slot name=${m2.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return Pe`<div class=${Oe(jx.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return Pe`<div class=${Oe(jx.contentEnd)} .hidden=${!e}><slot name=${m2.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return Pe`<div class=${Oe(jx.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};rj.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},rj.styles=x2t;let fK=rj;an("calcite-stack",fK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const mye={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},S2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,E2t={inputMessageIcon:"calcite-input-message-icon"},nj=class nj extends Nr{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=nT(mye,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=nT(mye,this.icon,this.status))}render(){const e=this.el.hidden;return x4(this.el,"calcite-hydrated-hidden",e),Pe`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return Pe`<calcite-icon class=${Oe(E2t.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};nj.properties={icon:[3,{converter:H_},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},nj.styles=S2t;let WF=nj;an("calcite-input-message",WF);const xYt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:WF},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const T2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,o9={track:"track",bar:"bar",text:"text"},sj=class sj extends Nr{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=Fk(this.el);return Pe`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${Oe(o9.track)}><div class=${Oe({[o9.bar]:!0,indeterminate:this.type==="indeterminate",[jMe.rtl]:r==="rtl",reversed:this.reversed})} style=${zMe(i)}></div></div>${this.text?Pe`<div class=${Oe(o9.text)}>${this.text}</div>`:null}</div>`}};sj.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},sj.styles=T2t;let mK=sj;an("calcite-progress",mK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const $2t=new RegExp("\\.(0+)?$"),M2t=new RegExp("0+$"),rr=class rr{constructor(e){if(e instanceof rr)return e;const[i,r]=N2t(e).split(".").concat("");this.value=BigInt(i+r.padEnd(rr.DECIMALS,"0").slice(0,rr.DECIMALS))+BigInt(rr.ROUNDED&&r[rr.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(rr.DECIMALS+1,"0"),i=e.slice(0,-rr.DECIMALS),r=e.slice(-rr.DECIMALS).replace(M2t,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return rr.fromBigInt(this.value+new rr(e).value)}subtract(e){return rr.fromBigInt(this.value-new rr(e).value)}multiply(e){return rr._divRound(this.value*new rr(e).value,rr.SHIFT)}divide(e){return rr._divRound(this.value*rr.SHIFT,new rr(e).value)}};rr.DECIMALS=100,rr.ROUNDED=!0,rr.SHIFT=BigInt("1"+"0".repeat(rr.DECIMALS)),rr._divRound=(e,i)=>rr.fromBigInt(e/i+(rr.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),rr.fromBigInt=e=>Object.assign(Object.create(rr.prototype),{value:e,isNegative:e<BigInt(0)});let pT=rr;function Mm(t){return!(!t||isNaN(Number(t)))}function C2t(t){return!t||!D2t(t)?"":ZF(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:nU.includes(n)).join("");return Mm(r)?new pT(r).toString():""})}const IOe=/^([-0])0+(?=\d)/,I2t=/(?!^\.)\.$/,A2t=/(?!^-)-/g,P2t=/^-\b0\b\.?0*$/,k2t=/0*$/,O2t=new Set(["e","E","-",",",".",...nU]),L2t=t=>{const e=Array.from(t).filter(i=>O2t.has(i)).join("");return ZF(e,i=>{const r=i.replace(A2t,"").replace(I2t,"").replace(IOe,"$1");return Mm(r)?P2t.test(r)?r:R2t(r):i})};function R2t(t){const e=t.split(".")[1],i=new pT(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function ZF(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function N2t(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",l=(p,m)=>{const v=Math.abs(m)-p.length,w=v>0?`${"0".repeat(v)}${p}`:p;return`${w.slice(0,m)}.${w.slice(m)}`},c=(p,m)=>{const v=m>p.length?`${p}${"0".repeat(m-p.length)}`:p;return`${v.slice(0,m)}.${v.slice(m)}`},u=n>0?`${o}${c(a,n)}`:`${l(o,n)}${a}`;return`${r?"-":""}${u.charAt(0)==="."?"0":""}${u.replace($2t,"").replace(IOe,"")}`}function D2t(t){return nU.some(e=>t.includes(e))}function F2t(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(k2t)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const YF="en",z2t=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",YF,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const j2t=["arab","arabext","latn"],a9=[...z2t],AOe=t=>j2t.includes(t),l9=new Intl.NumberFormat().resolvedOptions().numberingSystem,POe=l9==="arab"||!AOe(l9)?"latn":l9,U2t=t=>AOe(t)?t:POe;function B2t(t){return t?a9.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),a9.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":a9.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),YF)):YF}class V2t{constructor(){this.delocalize=e=>this._numberFormatOptions?ZF(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?ZF(e,i=>Mm(i.trim())?new pT(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=B2t(e==null?void 0:e.locale),e.numberingSystem=U2t(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===YF&&e.numberingSystem===POe&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const eu=new V2t;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const kg={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},kOe=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:n,spacingInlineEnd:s,spacingInlineStart:o,tooltipText:a})=>Pe`<div class=${Oe({[kg.alignmentCenter]:t,[kg.alignmentEnd]:!t,[kg.container]:!0,[kg.spacingBottom]:!e,[kg.spacingInlineEnd]:s,[kg.spacingInlineStart]:o})} @click=${r}><div class=${Oe(kg.text)}>${i}${n&&Pe`<span aria-hidden=true class=${Oe(kg.requiredIndicator)} title=${a??Ye}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const G2t={validationContainer:"validation-container"},q2t=()=>{},OOe=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>Pe`<div class=${Oe(G2t.validationContainer)} ${wi(s||q2t)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Ye} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const H2t=["date","datetime-local","month","number","range","time","week"],W2t=["email","password","search","tel","text","url"],Z2t=["email","password","search","tel","text","textarea","url"];function Ux(t,e,i,r){const n=i.toLowerCase(),s=t[i];r&&s!=null?e.setAttribute(n,`${s}`):e.removeAttribute(n)}function Y2t(t,e,i){i.type=t==="textarea"?"text":t;const r=H2t.includes(t),n=e;Ux(n,i,"min",r),Ux(n,i,"max",r),Ux(n,i,"step",r);const s=Z2t.includes(t),o=e;Ux(o,i,"minLength",s),Ux(o,i,"maxLength",s);const a=W2t.includes(t);Ux(o,i,"pattern",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const fo={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},c9={validationMessage:"inputValidationMessage"},yye={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},K2t={action:"action"},gye={up:"up",down:"down"},u9={chevronUp:"chevron-up",chevronDown:"chevron-down",close:"x"},J2t=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}:host([type=datetime-local]) .element-wrapper{inline-size:100%}:host([type=datetime-local]) .element-wrapper input{display:inline-block;min-inline-size:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,oj=class oj extends Nr{constructor(){super(),this.actionWrapperRef=Qo(),this.attributeWatch=vee(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childRef=Qo(),this.childElType="input",this.childNumberRef=Qo(),this.inputWrapperRef=Qo(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=xc(),this.focusSetter=vl()(this),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=ot({cancelable:!1}),this.calciteInputInput=ot(),this.calciteInternalInputBlur=ot({cancelable:!1}),this.calciteInternalInputFocus=ot({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){var i;(i=(this.type==="number"?this.childNumberRef:this.childRef).value)==null||i.select()}async setFocus(e){return this.focusSetter(()=>this.type==="number"?this.childNumberRef.value:this.childRef.value,e)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),jk(this),FAe(this),this.el.addEventListener(AY,this.onHiddenFormInputInput)}async load(){var e,i;this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=nT(yye,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:Mm(this.value)?this.value:""})))}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=nT(yye,this.icon,this.type))}updated(){Sc(this)}disconnectedCallback(){super.disconnectedCallback(),$ee(this),zAe(this),this.el.removeEventListener(AY,this.onHiddenFormInputInput)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?Mm(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&B4(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),c=new pT(s!==""?s:"0").add(`${a*o}`),u=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,p=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,m=u()?`${r}`:p()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:m})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperRef.value)||i.includes(this.actionWrapperRef.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childRef.value.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;eu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=eu.delocalize(i);e.inputType==="insertFromPaste"?(Mm(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:C2t(r)}),this.childNumberRef.value.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...nU,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}eu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===eu.decimal&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.indexOf(eu.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberRef.value.value||this.value&&!/[eE]/.test(this.childNumberRef.value.value))||e.key==="-"&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!AAe(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){Y2t(this.type,this,e)}setInputValue(e){const i=this.type==="number"?this.childNumberRef:this.childRef;i.value&&(i.value.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?Mm(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){var o,a;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){eu.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((o=this.previousValue)==null?void 0:o.length)>s.length||((a=this.value)==null?void 0:a.length)>s.length,c=s.charAt(s.length-1)===".",u=c&&l?s:L2t(s),p=s&&!u?Mm(this.previousValue)?this.previousValue:"":u;let m=eu.localize(p);r!=="connected"&&!c&&(m=F2t(m,p,eu)),this.displayedValue=c&&l?`${m}${eu.decimal}`:m,this.userChangedValue=r==="user"&&this.value!==p,this.value=["-","."].includes(p)?"":p}else this.userChangedValue=r==="user"&&this.value!==s,this.value=s;r==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?eu.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!Mm(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Fk(this.el),i=Pe`<div class=${Oe(fo.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=Pe`<button .ariaLabel=${this.messages.clear} class=${Oe(fo.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 title=${this.messages.clear??Ye} type=button><calcite-icon .icon=${u9.close} .scale=${ns(this.scale)}></calcite-icon></button>`,n=Pe`<calcite-icon class=${Oe(fo.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${ns(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",o=Pe`<button aria-hidden=true class=${Oe({[fo.numberButtonItem]:!0,[fo.buttonItemHorizontal]:s})} data-adjustment=${gye.up} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${u9.chevronUp} .scale=${ns(this.scale)}></calcite-icon></button>`,a=Pe`<button aria-hidden=true class=${Oe({[fo.numberButtonItem]:!0,[fo.buttonItemHorizontal]:s})} data-adjustment=${gye.down} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${u9.chevronDown} .scale=${ns(this.scale)}></calcite-icon></button>`,l=Pe`<div class=${Oe(fo.numberButtonWrapper)}>${o}${a}</div>`,c=Pe`<div class=${Oe(fo.prefix)}>${this.prefixText}</div>`,u=Pe`<div class=${Oe(fo.suffix)}>${this.suffixText}</div>`,p=this.el.autofocus,m=this.el.enterKeyHint,v=this.el.inputMode,w=this.type==="number"?hi("localized-input",Pe`<input accept=${this.accept??Ye} aria-errormessage=${c9.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${bF(this)} autocomplete=${this.autocomplete??Ye} .autofocus=${p} value=${this.defaultValue??Ye} .disabled=${this.disabled?!0:null} enterkeyhint=${m??Ye} inputmode=${v??Ye} maxlength=${this.maxLength??Ye} minlength=${this.minLength??Ye} .multiple=${this.multiple} name=${Ye} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ye} placeholder=${(this.placeholder||"")??Ye} .readOnly=${this.readOnly} .required=${this.required} type=text .value=${Aoe(this.displayedValue??"")} ${wi(this.childNumberRef)}>`):null,_=this.childElType==="input"?fP`input`:fP`textarea`,T=this.type!=="number"?_ee`<${_} accept=${this.accept??Ye} aria-errormessage=${c9.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${bF(this)} autocomplete=${this.autocomplete??Ye} .autofocus=${p} class=${Oe({[fo.editingEnabled]:this.editingEnabled,[fo.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${m??Ye} inputmode=${v??Ye} max=${this.maxString??Ye} maxlength=${this.maxLength??Ye} min=${this.minString??Ye} minlength=${this.minLength??Ye} .multiple=${this.multiple} name=${this.name??Ye} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ye} placeholder=${(this.placeholder||"")??Ye} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??Ye} step=${this.step??Ye} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??Ye} type=${this.type??Ye} .value=${Aoe(this.value??"")} ${wi(this.childRef)}></${_}>`:null;return Ec({disabled:this.disabled,children:Pe`${this.labelText&&kOe({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${Oe({[fo.inputWrapper]:!0,[jMe.rtl]:e==="rtl",[fo.hasSuffix]:this.suffixText,[fo.hasPrefix]:this.prefixText})} ${wi(this.inputWrapperRef)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?c:null}<div class=${Oe(fo.wrapper)}>${w}${T}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${Oe(fo.actionWrapper)} ${wi(this.actionWrapperRef)}><slot name=${K2t.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?u:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${UAe({component:this})}</div>${this.validationMessage&&this.status==="invalid"?OOe({icon:this.validationIcon,id:c9.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};oj.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:H_},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:H_},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},oj.styles=J2t;let KF=oj;an("calcite-input",KF);const SYt=Object.freeze(Object.defineProperty({__proto__:null,Input:KF},Symbol.toStringTag,{value:"Module"}));function LOe(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(LOe).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function X2t(t,e=dSt){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function ROe(t){return fSt(LOe(t))}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const h9=(t,e,i)=>{const r=ROe(e),n=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const s=(o,a,l)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let c=!1;return X2t(o,(u,p)=>{typeof u=="function"||u==null||l&&!l.includes(p)||(Array.isArray(u)||typeof u=="object"&&u!==null?s(u,a)&&(c=!0):a.test(u)&&(c=!0))}),c};return t.filter(o=>s(o,n,i))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const dte=()=>gee((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(n=>i.add(n))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Q2t={container:"container"},eEt={search:"search"},tEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,PA=class PA extends Nr{constructor(){super(...arguments),this.cancelable=dte()(this),this.filterDebounced=iU((e,i=!1,r)=>this.updateFiltered(h9(this.items??[],e,this.filterProps),i,r),UQ.filter),this.textInput=Qo(),this._value="",this.messages=xc(),this.focusSetter=vl()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=ot({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(h9(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(h9(this.items??[],this.value,this.filterProps))}willUpdate(e){var i;(e.has("items")&&(this.hasUpdated||((i=this.items)==null?void 0:i.length)>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Sc(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:e,scale:i}=this;return Ec({disabled:e,children:Pe`<div class=${Oe(Q2t.container)}><label><calcite-input clearable .disabled=${e} .icon=${eEt.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${wi(this.textInput)}></calcite-input></label></div>`})}};PA.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},PA.shadowRootOptions={mode:"open",delegatesFocus:!0},PA.styles=tEt;let yK=PA;an("calcite-filter",yK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const _A="calcite-list",JF="calcite-list-item-group",Vm="calcite-list-item";function gK(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(Vm);e&&(e.open=!0,gK(e))}function iEt(t){const e=t.assignedElements({flatten:!0}),i=e.filter(s=>s==null?void 0:s.matches(JF)).map(s=>Array.from(s.querySelectorAll(Vm))).flat(),r=e.filter(s=>s==null?void 0:s.matches(Vm));return{lists:e.filter(s=>s==null?void 0:s.matches(_A)),items:i.concat(r)}}function rEt(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(Vm)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const n=i.indexOf(r);r.setPosition=n===-1?void 0:n+1,r.setSize=n===-1?void 0:i.length})}function nEt(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function s3(t){return t.tagName==="CALCITE-LIST-ITEM"}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function vye(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Jp(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vye(Object(i),!0).forEach(function(r){sEt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vye(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function pD(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pD=function(e){return typeof e}:pD=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pD(t)}function sEt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function uy(){return uy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},uy.apply(this,arguments)}function oEt(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function aEt(t,e){if(t==null)return{};var i=oEt(t,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var lEt="1.15.6";function ey(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var xy=ey(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Wk=ey(/Edge/i),bye=ey(/firefox/i),xA=ey(/safari/i)&&!ey(/chrome/i)&&!ey(/android/i),pte=ey(/iP(ad|od|hone)/i),NOe=ey(/chrome/i)&&ey(/android/i),DOe={capture:!1,passive:!1};function Ii(t,e,i){t.addEventListener(e,i,!xy&&DOe)}function Mi(t,e,i){t.removeEventListener(e,i,!xy&&DOe)}function XF(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function FOe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function _h(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&XF(t,e):XF(t,e))||r&&t===i)return t;if(t===i)break}while(t=FOe(t))}return null}var wye=/\s+/g;function Xl(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(wye," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(wye," ")}}function Yt(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function N2(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Yt(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function zOe(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,s=r.length;if(i)for(;n<s;n++)i(r[n],n);return r}return[]}function Fp(){var t=document.scrollingElement;return t||document.documentElement}function ps(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,p;if(t!==window&&t.parentNode&&t!==Fp()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,p=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!xy))do if(n&&n.getBoundingClientRect&&(Yt(n,"transform")!=="none"||i&&Yt(n,"position")!=="static")){var m=n.getBoundingClientRect();o-=m.top+parseInt(Yt(n,"border-top-width")),a-=m.left+parseInt(Yt(n,"border-left-width")),l=o+s.height,c=a+s.width;break}while(n=n.parentNode);if(r&&t!==window){var v=N2(n||t),w=v&&v.a,_=v&&v.d;v&&(o/=_,a/=w,p/=w,u/=_,l=o+u,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:u}}}function _ye(t,e,i){for(var r=jv(t,!0),n=ps(t)[e];r;){var s=ps(r)[i],o=void 0;if(o=n>=s,!o)return r;if(r===Fp())break;r=jv(r,!1)}return!1}function fT(t,e,i,r){for(var n=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Kt.ghost&&(r||o[s]!==Kt.dragged)&&_h(o[s],i.draggable,t,!1)){if(n===e)return o[s];n++}s++}return null}function fte(t,e){for(var i=t.lastElementChild;i&&(i===Kt.ghost||Yt(i,"display")==="none"||e&&!XF(i,e));)i=i.previousElementSibling;return i||null}function ru(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Kt.clone&&(!e||XF(t,e))&&i++;return i}function xye(t){var e=0,i=0,r=Fp();if(t)do{var n=N2(t),s=n.a,o=n.d;e+=t.scrollLeft*s,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function cEt(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function jv(t,e){if(!t||!t.getBoundingClientRect)return Fp();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Yt(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Fp();if(r||e)return i;r=!0}}while(i=i.parentNode);return Fp()}function uEt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function d9(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var SA;function jOe(t,e){return function(){if(!SA){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),SA=setTimeout(function(){SA=void 0},e)}}}function hEt(){clearTimeout(SA),SA=void 0}function UOe(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function BOe(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function VOe(t,e,i){var r={};return Array.from(t.children).forEach(function(n){var s,o,a,l;if(!(!_h(n,e.draggable,t,!1)||n.animated||n===i)){var c=ps(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var ll="Sortable"+new Date().getTime();function dEt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Yt(n,"display")==="none"||n===Kt.ghost)){t.push({target:n,rect:ps(n)});var s=Jp({},t[t.length-1].rect);if(n.thisAnimationDuration){var o=N2(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(cEt(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,p=ps(c),m=c.prevFromRect,v=c.prevToRect,w=a.rect,_=N2(c,!0);_&&(p.top-=_.f,p.left-=_.e),c.toRect=p,c.thisAnimationDuration&&d9(m,p)&&!d9(u,p)&&(w.top-p.top)/(w.left-p.left)===(u.top-p.top)/(u.left-p.left)&&(l=fEt(w,m,v,n.options)),d9(p,u)||(c.prevFromRect=u,c.prevToRect=p,l||(l=n.options.animation),n.animate(c,w,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,n,s,o){if(o){Yt(r,"transition",""),Yt(r,"transform","");var a=N2(this.el),l=a&&a.a,c=a&&a.d,u=(n.left-s.left)/(l||1),p=(n.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!p,Yt(r,"transform","translate3d("+u+"px,"+p+"px,0)"),this.forRepaintDummy=pEt(r),Yt(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Yt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Yt(r,"transition",""),Yt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function pEt(t){return t.offsetWidth}function fEt(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var Bx=[],p9={initializeByDefault:!0},Zk={mount:function(e){for(var i in p9)p9.hasOwnProperty(i)&&!(i in e)&&(e[i]=p9[i]);Bx.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Bx.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";Bx.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][s]&&i[o.pluginName][s](Jp({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Jp({sortable:i},r)))})},initializePlugins:function(e,i,r,n){Bx.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,uy(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,i){var r={};return Bx.forEach(function(n){typeof n.eventProperties=="function"&&uy(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return Bx.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(n=s.optionListeners[i].call(e[s.pluginName],r))}),n}};function mEt(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,p=t.newDraggableIndex,m=t.originalEvent,v=t.putSortable,w=t.extraEventProperties;if(e=e||i&&i[ll],!!e){var _,T=e.options,$="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!xy&&!Wk?_=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(r,!0,!0)),_.to=o||i,_.from=a||i,_.item=n||i,_.clone=s,_.oldIndex=l,_.newIndex=c,_.oldDraggableIndex=u,_.newDraggableIndex=p,_.originalEvent=m,_.pullMode=v?v.lastPutMode:void 0;var I=Jp(Jp({},w),Zk.getEventProperties(r,e));for(var A in I)_[A]=I[A];i&&i.dispatchEvent(_),T[$]&&T[$].call(e,_)}}var yEt=["evt"],Va=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=aEt(r,yEt);Zk.pluginEvent.bind(Kt)(e,i,Jp({dragEl:rt,parentEl:In,ghostEl:ii,rootEl:Jr,nextEl:ww,lastDownEl:fD,cloneEl:mn,cloneHidden:wv,dragStarted:CI,putSortable:vo,activeSortable:Kt.active,originalEvent:n,oldIndex:y2,oldDraggableIndex:EA,newIndex:ec,newDraggableIndex:hv,hideGhostForTarget:WOe,unhideGhostForTarget:ZOe,cloneNowHidden:function(){wv=!0},cloneNowShown:function(){wv=!1},dispatchSortableEvent:function(a){va({sortable:i,name:a,originalEvent:n})}},s))};function va(t){mEt(Jp({putSortable:vo,cloneEl:mn,targetEl:rt,rootEl:Jr,oldIndex:y2,oldDraggableIndex:EA,newIndex:ec,newDraggableIndex:hv},t))}var rt,In,ii,Jr,ww,fD,mn,wv,y2,ec,EA,hv,o3,vo,VS=!1,QF=!1,ez=[],$b,Ju,f9,m9,Sye,Eye,CI,Vx,TA,$A=!1,a3=!1,mD,zo,y9=[],vK=!1,tz=[],sU=typeof document<"u",l3=pte,Tye=Wk||xy?"cssFloat":"float",gEt=sU&&!NOe&&!pte&&"draggable"in document.createElement("div"),GOe=(function(){if(sU){if(xy)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),qOe=function(e,i){var r=Yt(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=fT(e,0,i),o=fT(e,1,i),a=s&&Yt(s),l=o&&Yt(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ps(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ps(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=n&&r[Tye]==="none"||o&&r[Tye]==="none"&&c+u>n)?"vertical":"horizontal"},vEt=function(e,i,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return n===a||s===l||n+o/2===a+c/2},bEt=function(e,i){var r;return ez.some(function(n){var s=n[ll].options.emptyInsertThreshold;if(!(!s||fte(n))){var o=ps(n),a=e>=o.left-s&&e<=o.right+s,l=i>=o.top-s&&i<=o.bottom+s;if(a&&l)return r=n}}),r},HOe=function(e){function i(s,o){return function(a,l,c,u){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return i(s(a,l,c,u),o)(a,l,c,u);var m=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var r={},n=e.group;(!n||pD(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},WOe=function(){!GOe&&ii&&Yt(ii,"display","none")},ZOe=function(){!GOe&&ii&&Yt(ii,"display","")};sU&&!NOe&&document.addEventListener("click",function(t){if(QF)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),QF=!1,!1},!0);var Mb=function(e){if(rt){e=e.touches?e.touches[0]:e;var i=bEt(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[ll]._onDragOver(r)}}},wEt=function(e){rt&&rt.parentNode[ll]._isOutsideThisEl(e.target)};function Kt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=uy({},e),t[ll]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qOe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Kt.supportPointer!==!1&&"PointerEvent"in window&&(!xA||pte),emptyInsertThreshold:5};Zk.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);HOe(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:gEt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ii(t,"pointerdown",this._onTapStart):(Ii(t,"mousedown",this._onTapStart),Ii(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ii(t,"dragover",this),Ii(t,"dragenter",this)),ez.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),uy(this,dEt())}Kt.prototype={constructor:Kt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Vx=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,rt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=n.filter;if(CEt(r),!rt&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&xA&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=_h(l,n.draggable,r,!1),!(l&&l.animated)&&fD!==l)){if(y2=ru(l),EA=ru(l,n.draggable),typeof u=="function"){if(u.call(this,e,l,this)){va({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Va("filter",i,{evt:e}),s&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(p){if(p=_h(c,p.trim(),r,!1),p)return va({sortable:i,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Va("filter",i,{evt:e}),!0}),u)){s&&e.preventDefault();return}n.handle&&!_h(c,n.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!rt&&r.parentNode===s){var c=ps(r);if(Jr=s,rt=r,In=rt.parentNode,ww=rt.nextSibling,fD=r,o3=o.group,Kt.dragged=rt,$b={target:rt,clientX:(i||e).clientX,clientY:(i||e).clientY},Sye=$b.clientX-c.left,Eye=$b.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,rt.style["will-change"]="all",l=function(){if(Va("delayEnded",n,{evt:e}),Kt.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!bye&&n.nativeDraggable&&(rt.draggable=!0),n._triggerDragStart(e,i),va({sortable:n,name:"choose",originalEvent:e}),Xl(rt,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){zOe(rt,u.trim(),g9)}),Ii(a,"dragover",Mb),Ii(a,"mousemove",Mb),Ii(a,"touchmove",Mb),o.supportPointer?(Ii(a,"pointerup",n._onDrop),!this.nativeDraggable&&Ii(a,"pointercancel",n._onDrop)):(Ii(a,"mouseup",n._onDrop),Ii(a,"touchend",n._onDrop),Ii(a,"touchcancel",n._onDrop)),bye&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),Va("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Wk||xy))){if(Kt.eventCanceled){this._onDrop();return}o.supportPointer?(Ii(a,"pointerup",n._disableDelayedDrag),Ii(a,"pointercancel",n._disableDelayedDrag)):(Ii(a,"mouseup",n._disableDelayedDrag),Ii(a,"touchend",n._disableDelayedDrag),Ii(a,"touchcancel",n._disableDelayedDrag)),Ii(a,"mousemove",n._delayedDragTouchMoveHandler),Ii(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&Ii(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&g9(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Mi(e,"mouseup",this._disableDelayedDrag),Mi(e,"touchend",this._disableDelayedDrag),Mi(e,"touchcancel",this._disableDelayedDrag),Mi(e,"pointerup",this._disableDelayedDrag),Mi(e,"pointercancel",this._disableDelayedDrag),Mi(e,"mousemove",this._delayedDragTouchMoveHandler),Mi(e,"touchmove",this._delayedDragTouchMoveHandler),Mi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Ii(document,"pointermove",this._onTouchMove):i?Ii(document,"touchmove",this._onTouchMove):Ii(document,"mousemove",this._onTouchMove):(Ii(rt,"dragend",this),Ii(Jr,"dragstart",this._onDragStart));try{document.selection?yD(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(VS=!1,Jr&&rt){Va("dragStarted",this,{evt:i}),this.nativeDraggable&&Ii(document,"dragover",wEt);var r=this.options;!e&&Xl(rt,r.dragClass,!1),Xl(rt,r.ghostClass,!0),Kt.active=this,e&&this._appendGhost(),va({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Ju){this._lastX=Ju.clientX,this._lastY=Ju.clientY,WOe();for(var e=document.elementFromPoint(Ju.clientX,Ju.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ju.clientX,Ju.clientY),e!==i);)i=e;if(rt.parentNode[ll]._isOutsideThisEl(e),i)do{if(i[ll]){var r=void 0;if(r=i[ll]._onDragOver({clientX:Ju.clientX,clientY:Ju.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=FOe(i));ZOe()}},_onTouchMove:function(e){if($b){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,s=e.touches?e.touches[0]:e,o=ii&&N2(ii,!0),a=ii&&o&&o.a,l=ii&&o&&o.d,c=l3&&zo&&xye(zo),u=(s.clientX-$b.clientX+n.x)/(a||1)+(c?c[0]-y9[0]:0)/(a||1),p=(s.clientY-$b.clientY+n.y)/(l||1)+(c?c[1]-y9[1]:0)/(l||1);if(!Kt.active&&!VS){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ii){o?(o.e+=u-(f9||0),o.f+=p-(m9||0)):o={a:1,b:0,c:0,d:1,e:u,f:p};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Yt(ii,"webkitTransform",m),Yt(ii,"mozTransform",m),Yt(ii,"msTransform",m),Yt(ii,"transform",m),f9=u,m9=p,Ju=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ii){var e=this.options.fallbackOnBody?document.body:Jr,i=ps(rt,!0,l3,!0,e),r=this.options;if(l3){for(zo=e;Yt(zo,"position")==="static"&&Yt(zo,"transform")==="none"&&zo!==document;)zo=zo.parentNode;zo!==document.body&&zo!==document.documentElement?(zo===document&&(zo=Fp()),i.top+=zo.scrollTop,i.left+=zo.scrollLeft):zo=Fp(),y9=xye(zo)}ii=rt.cloneNode(!0),Xl(ii,r.ghostClass,!1),Xl(ii,r.fallbackClass,!0),Xl(ii,r.dragClass,!0),Yt(ii,"transition",""),Yt(ii,"transform",""),Yt(ii,"box-sizing","border-box"),Yt(ii,"margin",0),Yt(ii,"top",i.top),Yt(ii,"left",i.left),Yt(ii,"width",i.width),Yt(ii,"height",i.height),Yt(ii,"opacity","0.8"),Yt(ii,"position",l3?"absolute":"fixed"),Yt(ii,"zIndex","100000"),Yt(ii,"pointerEvents","none"),Kt.ghost=ii,e.appendChild(ii),Yt(ii,"transform-origin",Sye/parseInt(ii.style.width)*100+"% "+Eye/parseInt(ii.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,s=r.options;if(Va("dragStart",this,{evt:e}),Kt.eventCanceled){this._onDrop();return}Va("setupClone",this),Kt.eventCanceled||(mn=BOe(rt),mn.removeAttribute("id"),mn.draggable=!1,mn.style["will-change"]="",this._hideClone(),Xl(mn,this.options.chosenClass,!1),Kt.clone=mn),r.cloneId=yD(function(){Va("clone",r),!Kt.eventCanceled&&(r.options.removeCloneOnHide||Jr.insertBefore(mn,rt),r._hideClone(),va({sortable:r,name:"clone"}))}),!i&&Xl(rt,s.dragClass,!0),i?(QF=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Mi(document,"mouseup",r._onDrop),Mi(document,"touchend",r._onDrop),Mi(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,rt)),Ii(document,"drop",r),Yt(rt,"transform","translateZ(0)")),VS=!0,r._dragStartId=yD(r._dragStarted.bind(r,i,e)),Ii(document,"selectstart",r),CI=!0,window.getSelection().removeAllRanges(),xA&&Yt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,s,o,a=this.options,l=a.group,c=Kt.active,u=o3===l,p=a.sort,m=vo||c,v,w=this,_=!1;if(vK)return;function T(he,Ne){Va(he,w,Jp({evt:e,isOwner:u,axis:v?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:p,fromSortable:m,target:r,completed:I,onMove:function(_e,ke){return c3(Jr,i,rt,n,_e,ps(_e),e,ke)},changed:A},Ne))}function $(){T("dragOverAnimationCapture"),w.captureAnimationState(),w!==m&&m.captureAnimationState()}function I(he){return T("dragOverCompleted",{insertion:he}),he&&(u?c._hideClone():c._showClone(w),w!==m&&(Xl(rt,vo?vo.options.ghostClass:c.options.ghostClass,!1),Xl(rt,a.ghostClass,!0)),vo!==w&&w!==Kt.active?vo=w:w===Kt.active&&vo&&(vo=null),m===w&&(w._ignoreWhileAnimating=r),w.animateAll(function(){T("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===rt&&!rt.animated||r===i&&!r.animated)&&(Vx=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(rt.parentNode[ll]._isOutsideThisEl(e.target),!he&&Mb(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function A(){ec=ru(rt),hv=ru(rt,a.draggable),va({sortable:w,name:"change",toEl:i,newIndex:ec,newDraggableIndex:hv,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=_h(r,a.draggable,i,!0),T("dragOver"),Kt.eventCanceled)return _;if(rt.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||w._ignoreWhileAnimating===r)return I(!1);if(QF=!1,c&&!a.disabled&&(u?p||(o=In!==Jr):vo===this||(this.lastPutMode=o3.checkPull(this,c,rt,e))&&l.checkPut(this,c,rt,e))){if(v=this._getDirection(e,r)==="vertical",n=ps(rt),T("dragOverValid"),Kt.eventCanceled)return _;if(o)return In=Jr,$(),this._hideClone(),T("revert"),Kt.eventCanceled||(ww?Jr.insertBefore(rt,ww):Jr.appendChild(rt)),I(!0);var k=fte(i,a.draggable);if(!k||EEt(e,v,this)&&!k.animated){if(k===rt)return I(!1);if(k&&i===e.target&&(r=k),r&&(s=ps(r)),c3(Jr,i,rt,n,r,s,e,!!r)!==!1)return $(),k&&k.nextSibling?i.insertBefore(rt,k.nextSibling):i.appendChild(rt),In=i,A(),I(!0)}else if(k&&SEt(e,v,this)){var R=fT(i,0,a,!0);if(R===rt)return I(!1);if(r=R,s=ps(r),c3(Jr,i,rt,n,r,s,e,!1)!==!1)return $(),i.insertBefore(rt,R),In=i,A(),I(!0)}else if(r.parentNode===i){s=ps(r);var F=0,B,q=rt.parentNode!==i,Y=!vEt(rt.animated&&rt.toRect||n,r.animated&&r.toRect||s,v),J=v?"top":"left",Q=_ye(r,"top","top")||_ye(rt,"top","top"),te=Q?Q.scrollTop:void 0;Vx!==r&&(B=s[J],$A=!1,a3=!Y&&a.invertSwap||q),F=TEt(e,r,s,v,Y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,a3,Vx===r);var re;if(F!==0){var ee=ru(rt);do ee-=F,re=In.children[ee];while(re&&(Yt(re,"display")==="none"||re===ii))}if(F===0||re===r)return I(!1);Vx=r,TA=F;var ye=r.nextElementSibling,ne=!1;ne=F===1;var ue=c3(Jr,i,rt,n,r,s,e,ne);if(ue!==!1)return(ue===1||ue===-1)&&(ne=ue===1),vK=!0,setTimeout(xEt,30),$(),ne&&!ye?i.appendChild(rt):r.parentNode.insertBefore(rt,ne?ye:r),Q&&UOe(Q,0,te-Q.scrollTop),In=rt.parentNode,B!==void 0&&!a3&&(mD=Math.abs(B-ps(r)[J])),A(),I(!0)}if(i.contains(rt))return I(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Mi(document,"mousemove",this._onTouchMove),Mi(document,"touchmove",this._onTouchMove),Mi(document,"pointermove",this._onTouchMove),Mi(document,"dragover",Mb),Mi(document,"mousemove",Mb),Mi(document,"touchmove",Mb)},_offUpEvents:function(){var e=this.el.ownerDocument;Mi(e,"mouseup",this._onDrop),Mi(e,"touchend",this._onDrop),Mi(e,"pointerup",this._onDrop),Mi(e,"pointercancel",this._onDrop),Mi(e,"touchcancel",this._onDrop),Mi(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(ec=ru(rt),hv=ru(rt,r.draggable),Va("drop",this,{evt:e}),In=rt&&rt.parentNode,ec=ru(rt),hv=ru(rt,r.draggable),Kt.eventCanceled){this._nulling();return}VS=!1,a3=!1,$A=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),bK(this.cloneId),bK(this._dragStartId),this.nativeDraggable&&(Mi(document,"drop",this),Mi(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),xA&&Yt(document.body,"user-select",""),Yt(rt,"transform",""),e&&(CI&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ii&&ii.parentNode&&ii.parentNode.removeChild(ii),(Jr===In||vo&&vo.lastPutMode!=="clone")&&mn&&mn.parentNode&&mn.parentNode.removeChild(mn),rt&&(this.nativeDraggable&&Mi(rt,"dragend",this),g9(rt),rt.style["will-change"]="",CI&&!VS&&Xl(rt,vo?vo.options.ghostClass:this.options.ghostClass,!1),Xl(rt,this.options.chosenClass,!1),va({sortable:this,name:"unchoose",toEl:In,newIndex:null,newDraggableIndex:null,originalEvent:e}),Jr!==In?(ec>=0&&(va({rootEl:In,name:"add",toEl:In,fromEl:Jr,originalEvent:e}),va({sortable:this,name:"remove",toEl:In,originalEvent:e}),va({rootEl:In,name:"sort",toEl:In,fromEl:Jr,originalEvent:e}),va({sortable:this,name:"sort",toEl:In,originalEvent:e})),vo&&vo.save()):ec!==y2&&ec>=0&&(va({sortable:this,name:"update",toEl:In,originalEvent:e}),va({sortable:this,name:"sort",toEl:In,originalEvent:e})),Kt.active&&((ec==null||ec===-1)&&(ec=y2,hv=EA),va({sortable:this,name:"end",toEl:In,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Va("nulling",this),Jr=rt=In=ii=ww=mn=fD=wv=$b=Ju=CI=ec=hv=y2=EA=Vx=TA=vo=o3=Kt.dragged=Kt.ghost=Kt.clone=Kt.active=null,tz.forEach(function(e){e.checked=!0}),tz.length=f9=m9=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rt&&(this._onDragOver(e),_Et(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)i=r[n],_h(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||MEt(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];_h(a,this.options.draggable,n,!1)&&(r[s]=a)},this),i&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return _h(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=Zk.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&HOe(r)},destroy:function(){Va("destroy",this);var e=this.el;e[ll]=null,Mi(e,"mousedown",this._onTapStart),Mi(e,"touchstart",this._onTapStart),Mi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Mi(e,"dragover",this),Mi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ez.splice(ez.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!wv){if(Va("hideClone",this),Kt.eventCanceled)return;Yt(mn,"display","none"),this.options.removeCloneOnHide&&mn.parentNode&&mn.parentNode.removeChild(mn),wv=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(wv){if(Va("showClone",this),Kt.eventCanceled)return;rt.parentNode==Jr&&!this.options.group.revertClone?Jr.insertBefore(mn,rt):ww?Jr.insertBefore(mn,ww):Jr.appendChild(mn),this.options.group.revertClone&&this.animate(rt,mn),Yt(mn,"display",""),wv=!1}}};function _Et(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function c3(t,e,i,r,n,s,o,a){var l,c=t[ll],u=c.options.onMove,p;return window.CustomEvent&&!xy&&!Wk?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=n||e,l.relatedRect=s||ps(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(p=u.call(c,l,o)),p}function g9(t){t.draggable=!1}function xEt(){vK=!1}function SEt(t,e,i){var r=ps(fT(i.el,0,i.options,!0)),n=VOe(i.el,i.options,ii),s=10;return e?t.clientX<n.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<n.top-s||t.clientY<r.bottom&&t.clientX<r.left}function EEt(t,e,i){var r=ps(fte(i.el,i.options.draggable)),n=VOe(i.el,i.options,ii),s=10;return e?t.clientX>n.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>n.bottom+s||t.clientX>r.right&&t.clientY>r.top}function TEt(t,e,i,r,n,s,o,a){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,u=r?i.top:i.left,p=r?i.bottom:i.right,m=!1;if(!o){if(a&&mD<c*n){if(!$A&&(TA===1?l>u+c*s/2:l<p-c*s/2)&&($A=!0),$A)m=!0;else if(TA===1?l<u+mD:l>p-mD)return-TA}else if(l>u+c*(1-n)/2&&l<p-c*(1-n)/2)return $Et(e)}return m=m||o,m&&(l<u+c*s/2||l>p-c*s/2)?l>u+c/2?1:-1:0}function $Et(t){return ru(rt)<ru(t)?1:-1}function MEt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function CEt(t){tz.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&tz.push(r)}}function yD(t){return setTimeout(t,0)}function bK(t){return clearTimeout(t)}sU&&Ii(document,"touchmove",function(t){(Kt.active||VS)&&t.cancelable&&t.preventDefault()});Kt.utils={on:Ii,off:Mi,css:Yt,find:zOe,is:function(e,i){return!!_h(e,i,e,!1)},extend:uEt,throttle:jOe,closest:_h,toggleClass:Xl,clone:BOe,index:ru,nextTick:yD,cancelNextTick:bK,detectDirection:qOe,getChild:fT,expando:ll};Kt.get=function(t){return t[ll]};Kt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Kt.utils=Jp(Jp({},Kt.utils),r.utils)),Zk.mount(r)})};Kt.create=function(t,e){return new Kt(t,e)};Kt.version=lEt;var us=[],II,wK,_K=!1,v9,b9,iz,AI;function IEt(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?Ii(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ii(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ii(document,"touchmove",this._handleFallbackAutoScroll):Ii(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Mi(document,"dragover",this._handleAutoScroll):(Mi(document,"pointermove",this._handleFallbackAutoScroll),Mi(document,"touchmove",this._handleFallbackAutoScroll),Mi(document,"mousemove",this._handleFallbackAutoScroll)),$ye(),gD(),hEt()},nulling:function(){iz=wK=II=_K=AI=v9=b9=null,us.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,s=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(s,o);if(iz=i,r||this.options.forceAutoScrollFallback||Wk||xy||xA){w9(i,this.options,a,r);var l=jv(a,!0);_K&&(!AI||s!==v9||o!==b9)&&(AI&&$ye(),AI=setInterval(function(){var c=jv(document.elementFromPoint(s,o),!0);c!==l&&(l=c,gD()),w9(i,n.options,c,r)},10),v9=s,b9=o)}else{if(!this.options.bubbleScroll||jv(a,!0)===Fp()){gD();return}w9(i,this.options,jv(a,!1),!1)}}},uy(t,{pluginName:"scroll",initializeByDefault:!0})}function gD(){us.forEach(function(t){clearInterval(t.pid)}),us=[]}function $ye(){clearInterval(AI)}var w9=jOe(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Fp(),c=!1,u;wK!==i&&(wK=i,gD(),II=e.scroll,u=e.scrollFn,II===!0&&(II=jv(i,!0)));var p=0,m=II;do{var v=m,w=ps(v),_=w.top,T=w.bottom,$=w.left,I=w.right,A=w.width,k=w.height,R=void 0,F=void 0,B=v.scrollWidth,q=v.scrollHeight,Y=Yt(v),J=v.scrollLeft,Q=v.scrollTop;v===l?(R=A<B&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),F=k<q&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(R=A<B&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),F=k<q&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var te=R&&(Math.abs(I-n)<=o&&J+A<B)-(Math.abs($-n)<=o&&!!J),re=F&&(Math.abs(T-s)<=o&&Q+k<q)-(Math.abs(_-s)<=o&&!!Q);if(!us[p])for(var ee=0;ee<=p;ee++)us[ee]||(us[ee]={});(us[p].vx!=te||us[p].vy!=re||us[p].el!==v)&&(us[p].el=v,us[p].vx=te,us[p].vy=re,clearInterval(us[p].pid),(te!=0||re!=0)&&(c=!0,us[p].pid=setInterval((function(){r&&this.layer===0&&Kt.active._onTouchMove(iz);var ye=us[this.layer].vy?us[this.layer].vy*a:0,ne=us[this.layer].vx?us[this.layer].vx*a:0;typeof u=="function"&&u.call(Kt.dragged.parentNode[ll],ne,ye,t,iz,us[this.layer].el)!=="continue"||UOe(us[this.layer].el,ne,ye)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&m!==l&&(m=jv(m,!1)));_K=c}},30),YOe=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||s;a();var u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,p=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function mte(){}mte.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=fT(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:YOe};uy(mte,{pluginName:"revertOnSpill"});function yte(){}yte.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:YOe};uy(yte,{pluginName:"removeOnSpill"});Kt.mount(new IEt);Kt.mount(yte,mte);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const oU=new Set,AEt={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function PEt(t){if(JOe(t))return;KOe(t),oU.add(t);const e="id",{group:i,handleSelector:r,dragSelector:n,sortDisabled:s}=t;t.sortable=Kt.create(t.el,{dataIdAttr:e,swapThreshold:.5,...AEt,...!!n&&{draggable:n},...!!i&&{sort:!s,group:{name:i,...!!t.canPull&&{pull:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:u})=>t.canPull({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:u})},...!!t.canPut&&{put:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:u})=>t.canPut({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:u})}}},onMove:({from:o,dragged:a,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:o,dragEl:a,toEl:l,relatedEl:c})},handle:r,filter:`${r}[disabled]`,onStart:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{xK.active=!0,kEt(),t.onDragStart({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:u})},onEnd:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{xK.active=!1,OEt(),t.onDragEnd({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:u})},onSort:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{t.onDragSort({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:u})}})}function KOe(t){var e;JOe(t)||(oU.delete(t),(e=t.sortable)==null||e.destroy(),t.sortable=null)}const xK={active:!1};function JOe(t){return t.dragEnabled&&xK.active}function kEt(){Array.from(oU).forEach(t=>t.onGlobalDragStart())}function OEt(){Array.from(oU).forEach(t=>t.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Df={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},_9={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},LEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{min-block-size:100vh}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,REt=`${JF}, ${Vm}`,aj=class aj extends Nr{constructor(){super(),this.dragSelector=Vm,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=Su("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=dte()(this),this.updateListItemsDebounced=iU(this.updateListItems,UQ.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=xc({blocking:!0}),this.focusSetter=vl()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=ot({cancelable:!1}),this.calciteListChange=ot({cancelable:!1}),this.calciteListDragEnd=ot({cancelable:!1}),this.calciteListDragStart=ot({cancelable:!1}),this.calciteListFilter=ot({cancelable:!1}),this.calciteListMoveHalt=ot({cancelable:!1}),this.calciteListOrderChange=ot({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Sc(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),KOe(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:n,el:s,filterEl:o,displayMode:a,scale:l,sortDisabled:c,sortHandleMenuItems:u}=this,p=Array.from(this.el.querySelectorAll(Vm)),m=s,v=Array.from(m.children).filter(s3);if(p.forEach(w=>{w.scale=l,w.selectionAppearance=e,w.selectionMode=i,w.interactionMode=r,w.closest(_A)===s&&(w.moveToItems=u.filter(_=>this.validateSortMenuItem({type:"move",fromEl:m,toEl:_.element,dragEl:w,newIndex:0,oldIndex:v.indexOf(w)})),w.addToItems=this.sortHandleMenuItems.filter(_=>this.validateSortMenuItem({type:"add",fromEl:m,toEl:_.element,dragEl:w,newIndex:0,oldIndex:v.indexOf(w)})),w.dragHandle=n,w.displayMode=a,w.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=p,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(w=>!w.closed&&!w.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(w=>!w.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(s=>s.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(n=>{n.active=n===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:n}=this;i.selected&&(n==="single"||n==="single-persist")&&r.forEach(s=>s.selected=s===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:n,lastSelectedInfo:s}=this,o=i;if(r.selectMultiple&&s){const a=n.indexOf(o),l=n.indexOf(s.selectedItem),c=Math.min(l,a),u=Math.max(l,a);n.slice(c,u+1).forEach(p=>p.selected=s.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var e;(e=this.mutationObserver)==null||e.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&rEt(i),PEt(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){var e;this.parentListEl=(e=this.el.parentElement)==null?void 0:e.closest(_A)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(JF))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=jn(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=jn(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=jn(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const n=!r.has(e)&&!i.includes(e);e.filterHidden=n;const s=e.parentElement.closest(REt);s&&(n||r.add(s),this.filterElements({el:s,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(Vm);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:n}=this,s=e==null?void 0:e.filter(l=>e.every(c=>c===l||!l.contains(c))),o=n?e.filter(n):r?i.map(l=>l.el):e||[],a=new WeakSet;s.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:a})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){var e;await((e=this.filterEl)==null?void 0:e.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,n=zk(e),s=i?Array.from(n.querySelectorAll(`${_A}[group="${i}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.sortHandleMenuItems=s.map(a=>({element:a,label:a.label??a.id,id:$0()})),Array.from(this.el.querySelectorAll(JF)).forEach(a=>{a.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(Vm);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(s=>this.isNavigable(s)),n=r.findIndex(s=>s.active);if(i==="ArrowDown"){e.preventDefault();const s=e.target===this.filterEl?0:n+1;r[s]&&this.focusRow(r[s])}else if(i==="ArrowUp"){if(e.preventDefault(),n===0&&this.filterEnabled){this.filterEl.setFocus();return}const s=n-1;r[s]&&this.focusRow(r[s])}else if(i==="Home"){e.preventDefault();const s=r[0];s&&this.focusRow(s)}else if(i==="End"){e.preventDefault();const s=r[r.length-1];s&&this.focusRow(s)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:r,newIndex:n,oldIndex:s,type:o}){var c,u;if(!e||!i||i===e||r.contains(i))return!1;const a=((c=e.canPull)==null?void 0:c.call(e,{toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s}))??!0,l=((u=i.canPut)==null?void 0:u.call(i,{toEl:i,fromEl:e,dragEl:r,newIndex:n,oldIndex:s}))??!0;return(o==="add"?a==="clone":a===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement,s=i.element,a=Array.from(n.children).filter(s3).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver();const c=r.cloneNode();s.prepend(c),gK(r),this.updateListItemsDebounced(),this.connectObserver();const u={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(u),s.emitOrderChangeEvent(u)}handleMove(e){const{moveTo:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement,s=i.element,a=Array.from(n.children).filter(s3).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:n,toEl:s,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver(),s.prepend(r),gK(r),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(c),s.emitOrderChangeEvent(c)}handleReorder(e){const{reorder:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement;if(!n)return;r.sortHandleOpen=!1;const s=Array.from(n.children).filter(s3),o=s.length-1,a=s.indexOf(r);let l=a;switch(i){case"top":l=0;break;case"bottom":l=o;break;case"up":l=a===0?0:a-1;break;case"down":l=a===o?o:a+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?s[l]:s[l].nextSibling;n.insertBefore(r,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:n,toEl:n,newIndex:l,oldIndex:a})}render(){const{loading:e,label:i,disabled:r,dataForFilter:n,filterEnabled:s,filterPlaceholder:o,filterText:a,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:u,effectiveFilterProps:p}=this;return Ec({disabled:this.disabled,children:Pe`<div class=${Oe({[Df.container]:!0,[Df.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?Pe`<span aria-live=assertive class=${Oe(Df.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?Pe`<calcite-scrim class=${Oe(Df.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${Oe(Df.table)} @keydown=${this.handleListKeydown} role=treegrid>${s||c||u?Pe`<div class=${Oe(Df.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${Oe(Df.stack)}><slot name=${_9.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${m2.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${r} .filterProps=${p} .items=${n} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${a} ${wi(this.setFilterEl)}></calcite-filter><slot name=${_9.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${m2.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${Oe(Df.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${wi(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${_9.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:n},numberingSystem:s}=this;return eu.numberFormatOptions={locale:n,numberingSystem:s},r?null:Pe`<div aria-live=polite class=${Oe(Df.assistiveText)}>${this.hasActiveFilter?hi("aria-filter-enabled",Pe`<div>${e.filterEnabled}</div>`):null}${hi("aria-item-count",Pe`<div>${e.total.replace("{count}",eu.localize(i.length.toString()))}</div>`)}${i.length?hi("aria-item-list",Pe`<ol>${i.map(o=>Pe`<li>${o.label}</li>`)}</ol>`):null}</div>`}};aj.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},aj.styles=LEt;let rz=aj;an("calcite-list",rz);const EYt=Object.freeze(Object.defineProperty({__proto__:null,List:rz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const $i={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},Gx={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},NEt=0,Ff={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},Mye="data-test-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Cye={container:"container",heading:"heading"},DEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{margin:0;display:flex;flex:1 1 0%;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1));color:var(--calcite-list-color, var(--calcite-color-text-2))}.heading{font-weight:var(--calcite-font-weight-medium)}:host([scale=s]) .container{padding-inline:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-sm) var(--calcite-spacing-xxs)}:host([scale=s]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-inline:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-lg) var(--calcite-spacing-sm)}:host([scale=m]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-fixed-lg);padding-block:var(--calcite-spacing-xl) var(--calcite-spacing-sm-plus, .625rem)}:host([scale=l]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md-plus, .875rem)}.heading{padding:0}:host([hidden]){display:none}[hidden]{display:none}`,lj=class lj extends Nr{constructor(){super(...arguments),this.disabled=!1,this.filterHidden=!1,this.scale="m",this.calciteInternalListItemGroupDefaultSlotChange=ot({cancelable:!1})}updated(){Sc(this)}handleDefaultSlotChange(){this.calciteInternalListItemGroupDefaultSlotChange.emit()}render(){const{disabled:e,heading:i}=this;return Ec({disabled:e,children:Pe`<div class=${Oe(Cye.container)} role=row><div .ariaColSpan=${NEt} class=${Oe(Cye.heading)} role=cell>${i}</div></div><slot @slotchange=${this.handleDefaultSlotChange}></slot>`})}};lj.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},lj.styles=DEt;let nz=lj;an("calcite-list-item-group",nz);const TYt=Object.freeze(Object.defineProperty({__proto__:null,ListItemGroup:nz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const FEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,x9=new Map,cj=class cj extends Nr{constructor(){super(),this.actionsEndRef=Qo(),this.actionsStartRef=Qo(),this.containerRef=Qo(),this.contentRef=Qo(),this.defaultSlotRef=Qo(),this.handleGridRef=Qo(),this.messages=xc(),this.focusSetter=vl()(this),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.sortDisabled=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.addToItems=[],this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=ot({cancelable:!1}),this.calciteInternalListItemActive=ot({cancelable:!1}),this.calciteInternalListItemChange=ot({cancelable:!1}),this.calciteInternalListItemSelect=ot({cancelable:!1}),this.calciteInternalListItemSelectMultiple=ot({cancelable:!1}),this.calciteInternalListItemToggle=ot({cancelable:!1}),this.calciteListItemClose=ot({cancelable:!1}),this.calciteListItemCollapse=ot({cancelable:!1}),this.calciteListItemExpand=ot({cancelable:!1}),this.calciteListItemSelect=ot({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=ot({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=ot({cancelable:!1}),this.calciteListItemSortHandleClose=ot({cancelable:!1}),this.calciteListItemSortHandleOpen=ot({cancelable:!1}),this.calciteListItemToggle=ot({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){mF.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>{const{containerRef:i,parentListEl:r}=this,n=x9.get(r);if(typeof n=="number"){const s=this.getGridCells()[n];if(s){this.focusCell(s);return}}return{target:i.value,includeContainer:!0,strategy:"focusable"}},e)}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(_A),this.level=nEt(e)+1,this.setSelectionDefaults()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotRef.value),e.has("expanded")&&this.hasUpdated&&(this.expanded?(this.handleExpandedChange(),this.calciteListItemExpand.emit()):this.calciteListItemCollapse.emit())}updated(){Sc(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotRef.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=jn(e)}handleActionsStartSlotChange(e){this.hasActionsStart=jn(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=jn(e)}handleContentStartSlotChange(e){this.hasContentStart=jn(e)}handleContentEndSlotChange(e){this.hasContentEnd=jn(e)}handleContentBottomSlotChange(e){this.hasContentBottom=jn(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=iEt(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridRef.value,this.actionsStartRef.value,this.contentRef.value,this.actionsEndRef.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerRef:n,actionsStartRef:{value:s},actionsEndRef:{value:o},expanded:a,expandable:l}=this,c=this.getGridCells(),u=c.findIndex(p=>r.includes(p));if(i==="Enter"&&!r.includes(s)&&!r.includes(o))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const p=u+1;u===-1?!a&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[u]&&c[p]&&this.focusCell(c[p])}else if(i==="ArrowLeft"){e.preventDefault();const p=u-1;u===-1?(this.focusCell(null),a&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):u===0?(this.focusCell(null),n.value.focus()):c[u]&&c[p]&&this.focusCell(c[p])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:n}=this;r&&x9.set(n,null);const s=this.getGridCells();s.forEach(o=>{o.removeAttribute("tabindex"),o.removeAttribute(Mye)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(Mye,""),r&&x9.set(n,s.indexOf(e)))}focusCell(e,i=!0){const r=CAe(e);this.setFocusCell(e,r,i),r==null||r.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:hi("selection-container",Pe`<div class=${Oe({[$i.selectionContainer]:!0,[$i.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?Ff.selectedMultiple:Ff.selectedSingle:i==="multiple"?Ff.unselectedMultiple:Ff.unselectedSingle} .scale=${ns(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:n,setSize:s,moveToItems:o,sortDisabled:a,addToItems:l}=this;return i?hi("drag-handle-container",Pe`<div .ariaLabel=${e} class=${Oe({[$i.dragContainer]:!0,[$i.gridCell]:!0})} role=gridcell ${wi(this.handleGridRef)}><calcite-sort-handle .addToItems=${l} .disabled=${r} .label=${e} .moveToItems=${o} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${n} .setSize=${s} .sortDisabled=${a} ${wi(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:n,displayMode:s,scale:o}=this;if(s!=="nested")return null;const a=Fk(e),l=r?i?Ff.open:a==="rtl"?Ff.collapsedRTL:Ff.collapsedLTR:Ff.blank,c=ns(o),u=r?i?n.collapse:n.expand:void 0,p=r?this.handleToggleClick:void 0;return hi("expanded-container",Pe`<div class=${Oe($i.expandedContainer)} @click=${p} title=${u??Ye}>${hi(l,Pe`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return hi("actions-start-container",Pe`<div .ariaLabel=${e} class=${Oe({[$i.actionsStart]:!0,[$i.gridCell]:!0})} .hidden=${!i} role=gridcell ${wi(this.actionsStartRef)}><slot name=${Gx.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:n}=this;return hi("actions-end-container",Pe`<div .ariaLabel=${e} class=${Oe({[$i.actionsEnd]:!0,[$i.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${wi(this.actionsEndRef)}><slot name=${Gx.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?hi("close-action",Pe`<calcite-action appearance=transparent class=${Oe($i.close)} .icon=${Ff.close} .label=${n.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${n.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return Pe`<div class=${Oe($i.contentStart)} .hidden=${!e}><slot name=${Gx.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return Pe`<div class=${Oe($i.customContent)} .hidden=${!e}><slot name=${Gx.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?hi("icon-start",Pe`<calcite-icon class=${Oe($i.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${ns(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?hi("icon-end",Pe`<calcite-icon class=${Oe($i.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${ns(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return Pe`<div class=${Oe($i.contentEnd)} .hidden=${!e}><slot name=${Gx.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return Pe`<div class=${Oe($i.contentBottom)} .hidden=${!e}><slot name=${Gx.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return Pe`<div class=${Oe({[$i.nestedContainer]:!0,[$i.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${wi(this.defaultSlotRef)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?hi("content",Pe`<div class=${Oe($i.content)}>${e?hi("label",Pe`<div class=${Oe($i.label)}>${e}</div>`):null}${i?hi("description",Pe`<div class=${Oe($i.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:n,unavailable:s}=this,o=n||!!i||!!e,a=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return hi("content-container",Pe`<div .ariaLabel=${i} class=${Oe({[$i.gridCell]:!0,[$i.contentContainer]:!0,[$i.contentContainerUnavailable]:s,[$i.contentContainerSelectable]:r!=="none",[$i.contentContainerHasCenterContent]:o})} @click=${this.handleItemClick} role=gridcell ${wi(this.contentRef)}>${a}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:n,label:s,selected:o,selectionAppearance:a,selectionMode:l,interactionMode:c,closed:u,filterHidden:p,bordered:m,disabled:v,hasContentBottom:w}=this,_=m&&w,T=m&&!w,$=l!=="none"&&a==="border",I=$&&o,A=$&&!o,k=c==="interactive"||c==="static"&&l!=="none"&&a==="border";return Ec({disabled:v,children:Pe`<div class=${Oe({[$i.wrapper]:!0,[$i.wrapperBordered]:_})}><div .ariaExpanded=${e?i:null} .ariaLabel=${s} .ariaLevel=${r} .ariaSelected=${o} class=${Oe({[$i.row]:!0,[$i.container]:!0,[$i.containerHover]:k,[$i.containerBorder]:$,[$i.containerBorderSelected]:I,[$i.containerBorderUnselected]:A})} .hidden=${u||p} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${n?0:-1} ${wi(this.containerRef)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${Oe({[$i.contentContainerWrapper]:!0,[$i.contentContainerWrapperBordered]:T})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};cj.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],sortDisabled:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},cj.styles=[FEt,COe];let sz=cj;an("calcite-list-item",sz);const $Yt=Object.freeze(Object.defineProperty({__proto__:null,ListItem:sz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const XOe={widget:"esri-widget esri-component"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const Iye="arcgis-search-result-renderer",Aye={base:Iye,moreResults:`${Iye}__more-results`},zEt=Xi`@layer{.arcgis-search-result-renderer calcite-block,.arcgis-search-result-renderer calcite-block[expanded]{margin-block:0;margin-block-start:var(--calcite-spacing-md);border:0}}`;var t0;let jEt=(t0=class extends ik{constructor(){super(...arguments),this._resultCount=0,this._showMoreResultsOpen=!1,this.autoDestroyDisabled=!1,this.arcgisReady=jE()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[Je(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.results,(i=this.viewModel)==null?void 0:i.resultCount]},()=>{var e,i;this._results=(e=this.viewModel)==null?void 0:e.results,this._resultCount=((i=this.viewModel)==null?void 0:i.resultCount)??0,this._showMoreResultsOpen=!1},{initial:!0}),Je(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedResult},e=>this._selectedResult=e,{initial:!0})])}_selectResult(e){var i;this._showMoreResultsOpen=!1,(i=this.viewModel)==null||i.select(e)}_getSourceName(e,i){var r;return i===-1?((r=this.messages)==null?void 0:r.all)??"":e.name}_toggleShowMoreResults(e){var r,n;this._showMoreResultsOpen=e;const i=(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.popup;i&&"reposition"in i&&i.reposition()}render(){var e;return Pe`<div class=${Yd(RI(Aye.base,XOe.widget))}>${((e=this._selectedResult)==null?void 0:e.name)??""}${this._renderMoreResults()}</div>`}_renderMoreResults(){var r;const{_resultCount:e,_results:i}=this;return!e||e<2||!i?null:Pe`<calcite-block class=${Yd(Aye.moreResults)} collapsible .expanded=${this._showMoreResultsOpen} .heading=${V_(((r=this.messages)==null?void 0:r.showMoreResults)??"",{count:e-1})} @calciteBlockClose=${()=>this._toggleShowMoreResults(!1)} @calciteBlockOpen=${()=>this._toggleShowMoreResults(!0)}>${i.map(n=>this._renderMoreResultsList(n,(i==null?void 0:i.length)>1))}</calcite-block>`}_renderMoreResultsList(e,i){const{results:r}=e;if(!((r==null?void 0:r.length)??0)||!r)return null;const n=this._getSourceName(e.source,e.sourceIndex),s=r.filter(o=>o!==this._selectedResult).map(o=>this._renderListItem(o));return Pe`<calcite-list .label=${n}>${i?hi(`group-${e.sourceIndex}`,Pe`<calcite-list-item-group .heading=${n}>${s}</calcite-list-item-group>`):s}</calcite-list>`}_renderListItem(e){return hi(`result-${e.sourceIndex}-${e.key}`,Pe`<calcite-list-item .label=${e.name} @calciteListItemSelect=${()=>this._selectResult(e)}></calcite-list-item>`)}},t0.properties={_results:16,_resultCount:16,_selectedResult:16,_showMoreResultsOpen:16,messages:0,autoDestroyDisabled:5,viewModel:0},t0.styles=zEt,t0.shadowRootOptions=C_,t0);ok("arcgis-search-result-renderer",jEt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const UEt={textMatch:"text-match"};function Pye({text:t,pattern:e}){if(!e||!t)return t;const i=t.split(e);return i.length>1&&(i[1]=Pe`<mark class=${Oe(UEt.textMatch)}>${i[1]}</mark>`),i}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Og={container:"container",containerActive:"container--active",contentCenter:"content-center",description:"description",heading:"heading",iconEnd:"icon-end",iconStart:"icon-start",scale:t=>`scale--${t}`},kye={contentEnd:"content-end",contentStart:"content-start"},BEt="autocomplete-item",VEt={host:t=>`${BEt}-${t}`},GEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .5rem;--calcite-internal-autocomplete-item-spacing-unit-s: .25rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-xs)}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .75rem;--calcite-internal-autocomplete-item-spacing-unit-s: .375rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-sm)}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-spacing-unit-l: 1rem;--calcite-internal-autocomplete-item-spacing-unit-s: .625rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size)}:host{display:flex}.container{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;outline-color:transparent;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-3));gap:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-inline:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-block:var(--calcite-internal-autocomplete-item-spacing-unit-s);word-wrap:break-word;word-break:break-word;justify-content:space-around}.description{color:var(--calcite-autocomplete-description-text-color);font-size:var(--calcite-internal-autocomplete-item-description-font-size)}.heading{color:var(--calcite-autocomplete-heading-text-color, var(--calcite-color-text-1))}.heading,.description{line-height:var(--calcite-font-line-height-relative-snug)}:host(:hover:not([disabled])) .container{background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-2))}:host(:hover:not([disabled])) .container .description{color:var(--calcite-autocomplete-description-text-color, var(--calcite-color-text-2))}.container--active{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content-center{display:flex;flex-direction:column;flex-grow:1;padding-block:0}.text-match{background-color:transparent;color:inherit;font-weight:var(--calcite-font-weight-bold)}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,uj=class uj extends Nr{constructor(){super(...arguments),this.active=!1,this.disabled=!1,this.guid=VEt.host($0()),this.scale="m",this.calciteAutocompleteItemSelect=ot({cancelable:!1})}emitSelectEvent(){this.calciteAutocompleteItemSelect.emit()}updated(){Sc(this)}handleClick(e){e.preventDefault(),this.emitSelectEvent()}render(){const{active:e,description:i,heading:r,disabled:n,inputValueMatchPattern:s}=this;return Ec({disabled:n,children:Pe`<div class=${Oe({[Og.container]:!0,[Og.containerActive]:e&&!n,[Og.scale(this.scale)]:!0})} @click=${this.handleClick}>${this.renderIcon("start")}<slot name=${kye.contentStart}></slot><div class=${Oe(Og.contentCenter)}><div class=${Oe(Og.heading)}>${Pye({text:r,pattern:s})}</div><div class=${Oe(Og.description)}>${Pye({text:i,pattern:s})}</div></div><slot name=${kye.contentEnd}></slot>${this.renderIcon("end")}</div>`})}renderIcon(e){const{iconFlipRtl:i}=this,r=e==="start"?this.iconStart:this.iconEnd;return r?Pe`<calcite-icon class=${Oe(e==="start"?Og.iconStart:Og.iconEnd)} .flipRtl=${i===e||i==="both"} .icon=${r} .scale=${ns(this.scale)}></calcite-icon>`:null}};uj.properties={active:[5,{},{type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],guid:1,heading:1,iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],inputValueMatchPattern:[2,{},{reflect:!0,attribute:!1}],label:1,scale:1,value:1},uj.styles=GEt;let SK=uj;an("calcite-autocomplete-item",SK);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Oye=(t,e,i)=>{const r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},qEt=CT(class extends IT{constructor(t){if(super(t),t.type!==qd.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const n=[],s=[];let o=0;for(const a of t)n[o]=r?r(a,o):o,s[o]=i(a,o),o++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const n=w4e(t),{values:s,keys:o}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let c,u,p=0,m=n.length-1,v=0,w=s.length-1;for(;p<=m&&v<=w;)if(n[p]===null)p++;else if(n[m]===null)m--;else if(a[p]===o[v])l[v]=hb(n[p],s[v]),p++,v++;else if(a[m]===o[w])l[w]=hb(n[m],s[w]),m--,w--;else if(a[p]===o[w])l[w]=hb(n[p],s[w]),vM(t,l[w+1],n[p]),p++,w--;else if(a[m]===o[v])l[v]=hb(n[m],s[v]),vM(t,n[p],n[m]),m--,v++;else if(c===void 0&&(c=Oye(o,v,w),u=Oye(a,p,m)),c.has(a[p]))if(c.has(a[m])){const _=u.get(o[v]),T=_!==void 0?n[_]:null;if(T===null){const $=vM(t,n[p]);hb($,s[v]),l[v]=$}else l[v]=hb(T,s[v]),vM(t,n[p],T),n[_]=null;v++}else KB(n[m]),m--;else KB(n[p]),p++;for(;v<=w;){const _=vM(t,l[w+1]);hb(_,s[v]),l[v++]=_}for(;p<=m;){const _=n[p++];_!==null&&KB(_)}return this.ut=o,RJ(t,l),cc}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const HEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}.input-container{position:relative;display:flex;flex:1 1 auto;flex-wrap:nowrap}.input{width:100%;--calcite-input-prefix-size: var(--calcite-autocomplete-input-prefix-size);--calcite-input-suffix-size: var(--calcite-autocomplete-input-suffix-size);--calcite-input-background-color: var(--calcite-autocomplete-input-background-color);--calcite-input-border-color: var(--calcite-autocomplete-input-border-color);--calcite-input-corner-radius: var(--calcite-autocomplete-input-corner-radius);--calcite-input-shadow: var(--calcite-autocomplete-input-shadow);--calcite-input-icon-color: var(--calcite-autocomplete-input-icon-color);--calcite-input-text-color: var(--calcite-autocomplete-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-autocomplete-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-autocomplete-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-autocomplete-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-autocomplete-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-autocomplete-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-autocomplete-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-autocomplete-input-actions-icon-color-press);--calcite-input-loading-background-color: var(--calcite-autocomplete-input-loading-background-color);--calcite-input-loading-fill-color: var(--calcite-autocomplete-input-loading-fill-color);--calcite-input-prefix-background-color: var(--calcite-autocomplete-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-autocomplete-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-autocomplete-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-autocomplete-input-suffix-text-color)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.content-container{box-sizing:border-box;width:100%}.floating-ui-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.floating-ui-container{opacity:0;inset-block-start:0;left:0}}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content-container .calcite-floating-ui-anim{max-height:45vh;width:100%;overflow-y:auto;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-1));background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-autocomplete-corner-radius, var(--calcite-corner-radius-round))}.content--hidden{display:none}@media (forced-colors: active){.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,Lye={contentBottom:"content-bottom",contentTop:"content-top"},zf={inputContainer:"input-container",input:"input",contentContainer:"content-container",contentAnimation:"content-animation",content:"content",contentHidden:"content--hidden",floatingUIContainer:"floating-ui-container",floatingUIContainerActive:"floating-ui-container--active",screenReadersOnly:"screen-readers-only"},Rye="autocomplete",S9={validationMessage:"autocompleteValidationMessage",input:t=>`${Rye}-input-${t}`,list:t=>`${Rye}-list-${t}`},WEt="calcite-autocomplete-item-group",ZEt="calcite-autocomplete-item",hj=class hj extends Nr{constructor(){super(),this.guid=$0(),this.attributeWatch=vee(["autofocus","enterkeyhint","inputmode"],this.handleGlobalAttributesChanged),this.inputId=S9.input(this.guid),this.listId=S9.list(this.guid),this.messages=xc(),this.transitionProp="opacity",this.mutationObserver=Su("mutation",()=>this.getAllItemsDebounced()),this.focusSetter=vl()(this),this.resizeObserver=Su("resize",()=>{this.setFloatingElSize()}),this.cancelable=dte()(this),this.getAllItemsDebounced=iU(this.getAllItems,0),this.activeDescendant="",this.activeIndex=-1,this.hasContentBottom=!1,this.hasContentTop=!1,this.items=[],this.groups=[],this.alignment="start",this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.open=!1,this.overlayPositioning="absolute",this.placement=MP,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value="",this.calciteAutocompleteBeforeClose=ot({cancelable:!1}),this.calciteAutocompleteBeforeOpen=ot({cancelable:!1}),this.calciteAutocompleteChange=ot({cancelable:!1}),this.calciteAutocompleteClose=ot({cancelable:!1}),this.calciteAutocompleteOpen=ot({cancelable:!1}),this.calciteAutocompleteTextChange=ot({cancelable:!1}),this.calciteAutocompleteTextInput=ot({cancelable:!1}),this.listenOn(document,"click",this.documentClickHandler),this.listen("calciteAutocompleteItemSelect",this.handleAutocompleteItemSelect)}get isOpen(){return this.open&&(this.hasContentTop||this.hasContentBottom||this.items.length>0)}get enabledItems(){return this.items.filter(e=>!e.disabled)}async reposition(e=!1){const{floatingEl:i,referenceEl:r,placement:n,overlayPositioning:s,flipPlacements:o}=this;return cte(this,{floatingEl:i,referenceEl:r,overlayPositioning:s,placement:n,flipPlacements:o,type:"menu"},e)}async scrollContentTo(e){var i;(i=this.transitionEl)==null||i.scrollTo(e)}async selectText(){return this.referenceEl.selectText()}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),jk(this),FAe(this),this.defaultInputValue=this.inputValue||"",this.getAllItemsDebounced(),Bm(this),this.cancelable.add(this.getAllItemsDebounced)}async load(){this.getAllItemsDebounced()}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("flipPlacements")||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==MP))&&this.reposition(!0);let i=!1;e.has("inputValue")&&(this.hasUpdated||this.inputValue)&&(this.inputValueMatchPattern=this.inputValue&&new RegExp(`(${ROe(this.inputValue)})`,"i"),this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&(this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("activeIndex")&&(this.hasUpdated||this.activeIndex!==-1)&&this.updateItems()}updated(){Sc(this)}loaded(){ryt(this,this.value||""),this.defaultInputValue=this.inputValue||"",Bm(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),$ee(this),zAe(this),rU(this)}setFloatingElSize(){const{referenceEl:e,floatingEl:i}=this;!e||!i||(i.style.inlineSize=`${e.clientWidth}px`)}handleGlobalAttributesChanged(){this.requestUpdate()}handleDisabledChange(e){e||(this.open=!1)}openHandler(){if(Hk(this),this.open||(this.activeIndex=-1),this.disabled){this.open=!1;return}this.setFloatingElSize(),this.reposition(!0)}async documentClickHandler(e){this.disabled||e.composedPath().includes(this.el)||(this.open=!1)}async handleAutocompleteItemSelect(e){this.value=e.target.value,this.emitChange(),await this.setFocus(),this.open=!1}onLabelClick(){this.setFocus()}onFormReset(){this.inputValue=this.defaultInputValue}onBeforeOpen(){this.calciteAutocompleteBeforeOpen.emit()}onOpen(){this.calciteAutocompleteOpen.emit()}onBeforeClose(){this.calciteAutocompleteBeforeClose.emit()}onClose(){this.calciteAutocompleteClose.emit()}emitChange(){this.calciteAutocompleteChange.emit()}updateGroups(){this.groups.forEach((e,i,r)=>{e.scale=this.scale,i===0&&(e.disableSpacing=!0);const n=r[i+1];n&&(n.disableSpacing=e.children.length===0)})}updateItems(){let e=null;this.items.forEach(i=>{i.scale=this.scale,i.inputValueMatchPattern=this.inputValueMatchPattern}),this.enabledItems.forEach((i,r)=>{const n=r===this.activeIndex;n&&(e=i.guid),i.active=n}),this.activeDescendant=e}handleInputFocus(){this.open=!0}handleContentTopSlotChange(e){this.hasContentTop=jn(e)}handleContentBottomSlotChange(e){this.hasContentBottom=jn(e)}getAllItems(){const{el:e}=this;this.groups=Array.from(e.querySelectorAll(WEt)),this.items=Array.from(e.querySelectorAll(ZEt)),this.updateItems(),this.updateGroups()}setReferenceEl(e){fF(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,Bm(this)}keyDownHandler(e){const{defaultPrevented:i,key:r}=e;if(i)return;const{open:n,activeIndex:s,enabledItems:o}=this,a=o.length&&s>-1?o[s]:null;switch(r){case"Escape":n&&(this.open=!1,e.preventDefault());break;case"Tab":this.open=!1;break;case"Enter":n&&a?(this.value=a.value,a.emitSelectEvent(),this.open=!1,e.preventDefault()):e.defaultPrevented||B4(this)&&e.preventDefault();break;case"ArrowDown":o.length&&(this.open=!0,this.activeIndex=s!==-1?Math.min(s+1,o.length-1):0,this.scrollToActiveItem(),e.preventDefault());break;case"ArrowUp":o.length&&(this.open=!0,this.activeIndex=s!==-1?Math.max(s-1,0):o.length-1,this.scrollToActiveItem(),e.preventDefault());break;case"Home":o.length&&(this.open=!0,this.activeIndex=0,this.scrollToActiveItem(),e.preventDefault());break;case"End":o.length&&(this.open=!0,this.activeIndex=o.length-1,this.scrollToActiveItem(),e.preventDefault());break}}scrollToActiveItem(){var e;(e=this.enabledItems[this.activeIndex])==null||e.scrollIntoView({block:"nearest"})}changeHandler(e){e.stopPropagation(),this.inputValue=e.target.value,this.calciteAutocompleteTextChange.emit()}inputClickHandler(e){e.defaultPrevented||(this.open=!0)}inputHandler(e){var i;e.stopPropagation(),this.inputValue=e.target.value,this.open=((i=this.inputValue)==null?void 0:i.length)>0,this.calciteAutocompleteTextInput.emit()}setFloatingEl(e){this.floatingEl=e,Bm(this)}setTransitionEl(e){e&&(this.transitionEl=e)}render(){const{disabled:e,listId:i,inputId:r,isOpen:n}=this,s=this.el.autofocus,o=this.el.enterKeyHint,a=this.el.inputMode;return Ec({disabled:e,children:Pe`${this.labelText&&kOe({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${Oe(zf.inputContainer)}><calcite-input .alignment=${this.alignment} aria-activedescendant=${this.activeDescendant??Ye} aria-controls=${i??Ye} aria-label=${bF(this)??Ye} aria-owns=${i??Ye} aria-autocomplete=list .ariaExpanded=${n} aria-haspopup=listbox .autocomplete=${this.autocomplete} .autofocus=${s} class=${Oe(zf.input)} clearable .disabled=${e} enterkeyhint=${o??Ye} .form=${this.form} .icon=${this.icon??!0} .iconFlipRtl=${this.iconFlipRtl} id=${r??Ye} inputmode=${a??Ye} .label=${this.label} .loading=${this.loading} .maxLength=${this.maxLength} .messageOverrides=${this.messages} .minLength=${this.minLength} .name=${this.name} @click=${this.inputClickHandler} @keydown=${this.keyDownHandler} @calciteInputChange=${this.changeHandler} @calciteInputInput=${this.inputHandler} @calciteInternalInputFocus=${this.handleInputFocus} .pattern=${this.pattern} .placeholder=${this.placeholder} .prefixText=${this.prefixText} .readOnly=${this.readOnly} .required=${this.required} role=combobox .scale=${this.scale} .status=${this.status} .suffixText=${this.suffixText} type=search .value=${this.inputValue} ${wi(this.setReferenceEl)}></calcite-input>${this.renderListBox()}<div class=${Oe({[zf.contentContainer]:!0,[zf.floatingUIContainer]:!0,[zf.floatingUIContainerActive]:n})} ${wi(this.setFloatingEl)}><div class=${Oe({[zf.contentAnimation]:!0,[dT.animation]:!0,[dT.animationActive]:n})} ${wi(this.setTransitionEl)}><div class=${Oe({[zf.content]:!0,[zf.contentHidden]:!n})}><slot name=${Lye.contentTop} @slotchange=${this.handleContentTopSlotChange}></slot><slot aria-hidden=true></slot><slot name=${Lye.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div></div></div></div>${UAe({component:this})}${this.validationMessage&&this.status==="invalid"?OOe({icon:this.validationIcon,id:S9.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderListBox(){return Pe`<ul aria-labelledby=${this.inputId??Ye} aria-live=polite class=${Oe(zf.screenReadersOnly)} id=${this.listId??Ye} role=listbox tabindex=-1>${this.renderListBoxOptions()}</ul>`}renderListBoxOptions(){return qEt(this.items.filter(e=>!!(e.label||e.heading)),e=>e.guid,e=>Pe`<li .ariaDisabled=${e.disabled} .ariaLabel=${e.label} id=${e.guid??Ye} role=option tabindex=-1>${e.heading}${e.description}</li>`)}};hj.properties={activeDescendant:[16,{},{state:!0}],activeIndex:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],items:[16,{},{state:!0}],groups:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],icon:[3,{converter:H_},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],inputValue:1,label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],minLength:[11,{},{reflect:!0,type:Number}],name:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],pattern:1,placeholder:1,placement:[3,{},{reflect:!0}],prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],suffixText:1,validationIcon:[3,{converter:H_},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},hj.styles=HEt;let EK=hj;an("calcite-autocomplete",EK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const u3={container:"container",containerNoSpacing:"container--no-spacing",heading:"heading",scale:t=>`scale--${t}`},YEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .5rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .75rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-group-spacing-unit: 1rem}:host{margin:0;display:flex;flex-direction:column}.container{display:flex;flex-direction:column;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));padding-block-start:var(--calcite-internal-autocomplete-item-group-spacing-unit)}.container--no-spacing{padding-block-start:0}.heading{border:0 solid;box-sizing:border-box;inline-size:100%;min-inline-size:0px;max-inline-size:100%;border-block-end-width:1px;font-weight:var(--calcite-font-weight-bold);word-wrap:break-word;word-break:break-word;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-2));border-block-end-color:var(--calcite-autocomplete-border-color, var(--calcite-color-border-3));padding-block:var(--calcite-internal-autocomplete-item-group-spacing-unit);padding-inline:var(--calcite-internal-autocomplete-item-group-spacing-unit)}:host([hidden]){display:none}[hidden]{display:none}`,dj=class dj extends Nr{constructor(){super(...arguments),this.disableSpacing=!1,this.scale="m"}render(){const{scale:e}=this;return Pe`<div aria-label=${this.label??this.heading??Wd} class=${Oe({[u3.container]:!0,[u3.containerNoSpacing]:this.disableSpacing,[u3.scale(e)]:!0})} role=group><div class=${Oe(u3.heading)} role=presentation>${this.heading}</div><slot></slot></div>`}};dj.properties={disableSpacing:[5,{},{type:Boolean}],heading:1,label:1,scale:1},dj.styles=YEt;let TK=dj;an("calcite-autocomplete-item-group",TK);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const Nye={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.0 */const h3={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},nC={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},KEt=Xi`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([scale=s]){--calcite-notice-spacing-token-small: .5rem;--calcite-notice-spacing-token-large: .75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:.5rem}:host([scale=m]){--calcite-notice-spacing-token-small: .75rem;--calcite-notice-spacing-token-large: 1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small: 1rem;--calcite-notice-spacing-token-large: 1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width: auto}:host([width=half]){--calcite-notice-width: 50%}:host([width=full]){--calcite-notice-width: 100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity,max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent;background-color:var(--calcite-notice-background-color, var(--calcite-color-foreground-1))}.notice-close{outline-color:transparent}.notice-close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-notice-title-text-color, var(--calcite-color-text-1))}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0;display:inline;font-weight:var(--calcite-font-weight-normal);margin-inline-end:var(--calcite-notice-spacing-token-small);color:var(--calcite-notice-content-text-color, var(--calcite-color-text-2))}.notice-content{box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none;color:var(--calcite-notice-close-icon-color, var(--calcite-color-text-3))}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-notice-close-background-color-focus, var(--calcite-color-foreground-2));color:var(--calcite-notice-close-icon-color-hover, var(--calcite-color-text-1))}.notice-close:active{background-color:var(--calcite-notice-close-background-color-press, var(--calcite-color-foreground-3))}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,pj=class pj extends Nr{constructor(){super(...arguments),this.closeButton=Qo(),this.transitionProp="opacity",this.messages=xc(),this.focusSetter=vl()(this),this.hasActionEnd=!1,this.closable=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.scale="m",this.width="auto",this.calciteNoticeBeforeClose=ot({cancelable:!1}),this.calciteNoticeBeforeOpen=ot({cancelable:!1}),this.calciteNoticeClose=ot({cancelable:!1}),this.calciteNoticeOpen=ot({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el.querySelector("calcite-link")||this.closeButton.value,e)}async load(){this.requestedIcon=nT(Nye,this.icon,this.kind)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&Hk(this),(e.has("icon")||e.has("kind")&&(this.hasUpdated||this.kind!=="brand"))&&(this.requestedIcon=nT(Nye,this.icon,this.kind))}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}setTransitionEl(e){e&&(this.transitionEl=e)}close(){this.open=!1}handleActionsEndSlotChange(e){this.hasActionEnd=jn(e)}render(){const e=Pe`<button .ariaLabel=${this.messages.close} class=${Oe(nC.close)} @click=${this.close} ${wi(this.closeButton)}><calcite-icon icon=x .scale=${ns(this.scale)}></calcite-icon></button>`;return Pe`<div class=${Oe(nC.container)} ${wi(this.setTransitionEl)}>${this.requestedIcon?Pe`<div class=${Oe(nC.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${ns(this.scale)}></calcite-icon></div>`:null}<div class=${Oe(nC.content)}><slot name=${h3.title}></slot><slot name=${h3.message}></slot><slot name=${h3.link}></slot></div><div class=${Oe(nC.actionsEnd)} .hidden=${!this.hasActionEnd}><slot name=${h3.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>${this.closable?e:null}</div>`}};pj.properties={hasActionEnd:[16,{},{state:!0}],closable:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:H_},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},pj.styles=KEt;let oz=pj;an("calcite-notice",oz);const MYt=Object.freeze(Object.defineProperty({__proto__:null,Notice:oz},Symbol.toStringTag,{value:"Module"}));function Dye(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}async function JEt(t,e){var n,s;if(t.hasZ||e.type==="2d")return t;const i=(n=e.map)==null?void 0:n.ground;if(!(i!=null&&i.layers.length))return t;const{geometry:r}=await i.queryElevation(t,{cache:(s=e.basemapTerrain)==null?void 0:s.elevationQueryCache});return r}function $K(t,e,i){return QOe(t.center,e,i)}function gte(t,e,i){switch(t==null?void 0:t.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return QOe(t,e,i);default:return null}}function QOe(t,e,i){const r=t.hasZ?t.z:void 0;if(e!=null&&e.map)return(i!=null?xlt(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r});const{x:n,y:s,spatialReference:o}=t;return new Ut({xmin:n-.25,ymin:s-.25,xmax:n+.25,ymax:s+.25,spatialReference:o,zmin:r,zmax:r})}function XEt(t){return t&&typeof t.highlight=="function"}function QEt(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function CYt(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(eTt(i,r))return QEt(e,i,r)}return!0}function eTt(t,e){return t!=null&&t>0||e!=null&&e>0}function IYt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}const AYt=()=>!ge("disable-feature:layer-based-scale-visibility");let Jn=class extends l1.IdentifiableMixin(ve){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};d([g()],Jn.prototype,"autoNavigate",void 0),d([g()],Jn.prototype,"filter",void 0),d([g()],Jn.prototype,"getResults",void 0),d([g()],Jn.prototype,"getSuggestions",void 0),d([g()],Jn.prototype,"maxResults",void 0),d([g()],Jn.prototype,"maxSuggestions",void 0),d([g()],Jn.prototype,"minSuggestCharacters",void 0),d([g()],Jn.prototype,"outFields",void 0),d([g()],Jn.prototype,"placeholder",void 0),d([g()],Jn.prototype,"popupEnabled",void 0),d([g({type:Zp})],Jn.prototype,"popupTemplate",void 0),d([g()],Jn.prototype,"prefix",void 0),d([g()],Jn.prototype,"resultGraphicEnabled",void 0),d([g()],Jn.prototype,"resultSymbol",void 0),d([g()],Jn.prototype,"suggestionsEnabled",void 0),d([g()],Jn.prototype,"suffix",void 0),d([g()],Jn.prototype,"withinViewEnabled",void 0),d([g()],Jn.prototype,"zoomScale",void 0),Jn=d([G("esri.widgets.Search.SearchSource")],Jn);const vte=Jn,tTt=/https?:\/\/services.*\.arcgis\.com/i,iTt=/(?:\{([^}]+)\})/g,D2=()=>Ce.getLogger("esri.widgets.Search.support.layerSearchUtils");function rTt(t,e){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:c}=t,{layer:u,filter:p,zoomScale:m}=o,v=c==null?void 0:c.scale,w=eLe(o,c),_=e==null?void 0:e.signal;return iLe(u).then((()=>{const T=u.popupTemplate;return T?T.getRequiredFields(u.fieldsIndex):null})).then((T=>{var Q,te,re,ee;const{objectIdField:$,returnZ:I}=u,A=lLe(o);if(!bte(u,A))throw D2().error("invalid-field: displayField is invalid."),new ae("getResults():invalid-field","displayField is invalid.");const k=T!=null&&T.length?T:[A],R=o.outFields||k,F=tLe(R);if(R.includes($)||F||R.push($),(Q=u.floorInfo)!=null&&Q.floorField&&R.push(u.floorInfo.floorField),!(F||az(u,R)))throw D2().error("invalid-field: outField is invalid."),new ae("getResults():invalid-field","outField is invalid.");const B=u.createQuery(),{orderByFields:q}=o;if(q&&(B.orderByFields=q),s){B.outSpatialReference=s;const ye=1/_c(s);ye&&(B.maxAllowableOffset=ye)}const Y=u.geometryType==="mesh"||u.geometryType==="multipatch",J=((re=(te=u.capabilities)==null?void 0:te.data)==null?void 0:re.supportsZ)&&!Y;if(B.returnZ=J&&I!==!1,B.returnGeometry=!0,B.multipatchOption=Y?"xyFootprint":null,R&&(B.outFields=R),r)B.geometry=r;else if(l.key)B.objectIds=[l.key];else{const ye=o.searchFields||[A];if(!az(u,ye))throw D2().error("invalid-field: search field is invalid."),new ae("getResults():invalid-field","search field is invalid.");if(aLe(u)&&(B.num=n),w&&(B.geometry=w),!((ee=l.text)==null?void 0:ee.trim()))return[];const ue=l.text,{prefix:he="",suffix:Ne=""}=o,X=cLe(`${he}${ue}${Ne}`);oLe(u)&&nLe(u,ye)&&!i&&ue&&(B.fullText=sLe({text:ue,searchFields:ye}));const _e=uLe({searchTerm:X,layer:u,searchFields:ye,filter:p,exactMatch:i,query:B,type:"search"});if(B.where=_e,!rLe(B))return[]}return u.queryFeatures(B,{signal:_}).then((ye=>yTt(ye,c,o,a,A,v,m)))}))}function nTt(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:c,filter:u}=i,p=e==null?void 0:e.signal,m=eLe(i,n);return iLe(c).then((()=>{if(!aLe(c))return[];const v=lLe(i),w=i.searchFields||[v],_=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(iTt,((J,Q)=>(_.push(Q),J))):_.push(v);const T=tLe(_);_.includes(c.objectIdField)||T||_.push(c.objectIdField);const $=bte(c,v),I=T||az(c,_),A=az(c,w);if(!$)throw D2().error("invalid-field: displayField is invalid."),new ae("getSuggestions():invalid-field","displayField is invalid.");if(!I)throw D2().error("invalid-field: outField is invalid."),new ae("getSuggestions():invalid-field","outField is invalid.");if(!A)throw D2().error("invalid-field: search field is invalid."),new ae("getSuggestions():invalid-field","search field is invalid.");const k=c.createQuery(),{orderByFields:R}=i;if(R&&(k.orderByFields=R),k.outSpatialReference=r,k.returnGeometry=!1,k.num=o,k.outFields=_,m&&(k.geometry=m),!s.trim())return[];const{prefix:F="",suffix:B=""}=i,q=cLe(`${F}${s}${B}`);oLe(c)&&nLe(c,w)&&!l&&s&&(k.fullText=sLe({text:s,searchFields:w}));const Y=uLe({searchTerm:q,layer:c,searchFields:w,filter:u,exactMatch:l,query:k,type:"suggest"});return k.where=Y,rLe(k)?c.queryFeatures(k,{signal:p}).then((J=>pTt(J,i,a,v))):[]}))}function eLe(t,e){const{filter:i,withinViewEnabled:r}=t,n=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(r&&n?n:void 0)}function tLe(t){return t&&t.includes("*")}async function iLe(t){t&&await t.load()}function rLe(t){return!(!t.fullText&&!t.where)}function nLe(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter((r=>r.indexType==="FullText")).some((r=>{var s;const n=((s=r.fields)==null?void 0:s.split(",").map((o=>o.trim().toLowerCase())))||[];return e.every((o=>n.includes(o.toLowerCase())))}))}function sLe({text:t,searchFields:e}){return t.trim().split(" ").filter((i=>!!i.trim())).map((i=>new ITe({onFields:e,searchTerm:i,searchType:"prefix"})))}function oLe(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function aLe(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function sTt(t){var e,i,r;return((r=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find((n=>n.type==="string")))==null?void 0:r.name)??""}function lLe(t){return t.displayField||t.layer.displayField||sTt(t.layer)}function az(t,e){return!(!t||!(e!=null&&e.length))&&e.every((i=>bte(t,i)))}function bte(t,e){return!!t.getField(e)}function oTt(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function aTt({codedValues:t},e,i){return ID(t??[],(r=>{const n=r.name,s=i?n:n.toLowerCase();return(i?e:e.toLowerCase())===s?r.code.toString():null}))??null}function cLe(t){return t.replaceAll("'","''")}function sC(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function lTt({currentTerm:t,field:e,filter:i,exactMatch:r,url:n,type:s}){const o=e==null?void 0:e.type,a=e==null?void 0:e.name;if(o==="string"||o==="date"||o==="global-id"){const l=tTt.test(n??""),c=l&&oTt(t)?"N":"";return sC(r&&s==="search"?`${a} = ${c}'${t}'`:l?`${a} LIKE ${c}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${c}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:sC(`${a} = ${l}`,i)}return sC(`${a} = ${t}`,i)}function cTt(t,e){return t?` OR (${e})`:`(${e})`}function uLe({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:n,query:s,type:o}){const{definitionExpression:a,url:l}=e;let c="";return!s.fullText&&t&&i&&i.forEach((u=>{var w;const p=e.getField(u),m=(w=e.getFieldDomain)==null?void 0:w.call(e,u,{excludeImpliedDomains:ge("esri-widget-legacy-field-domain-calculation")}),v=(m&&m.type==="coded-value"?aTt(m,t,n):null)||t||null;if(v!==null){const _=lTt({currentTerm:v,field:p,filter:r,exactMatch:n,url:l,type:o});_&&(c+=cTt(c,_))}})),a&&c?`(${a}) AND (${c})`:a||c}function uTt(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some((n=>n.code===e&&(i=n.name,!0))),i}function hTt(t,e){return t[e]??t[Object.keys(t).find((i=>i.toLowerCase()===e.toLowerCase()))]}function hLe(t,e,i){var o;const r=t.sourceLayer,{attributes:n}=t,s=(o=r.getFieldDomain)==null?void 0:o.call(r,i,{feature:t,excludeImpliedDomains:ge("esri-widget-legacy-field-domain-calculation")});if(e)return V_(e,n);if(i&&n){const a=r.getField(i),l=hTt(n,i);return l==null?"":s&&s.type==="coded-value"?uTt(s,l)??"":(a==null?void 0:a.type)==="date"?yu(new Date(l)):typeof l=="number"?l.toString():typeof l!="string"?"":l.trim()}return""}function dTt(t,e,i,r){const n=t.sourceLayer,{attributes:s}=t,{objectIdField:o}=n,a=o?s[o]:null;return{text:hLe(t,e.suggestionTemplate,r),key:a,sourceIndex:i}}function pTt(t,e,i,r){return t.features.map((n=>dTt(n,e,i,r)))}function fTt(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function mTt(t,e,i,r,n,s,o){const a=t.clone();a.layer=t.layer;const l=t.sourceLayer,c=l==null?void 0:l.objectIdField,u=c?t.attributes[c]:null,p=hLe(t,i.searchTemplate,n);s!=null&&fTt(l)&&(l.minScale&&l.minScale<s?s=l.minScale:l.maxScale&&l.maxScale>s&&(s=l.maxScale));const m=a.geometry?gte(a.geometry,e??void 0,s??void 0):void 0,v=typeof o=="number"&&m?$K(le(m),e??void 0,o):m,w=t.clone();return w.layer=t.layer,v!=null&&(w.geometry=or.fromExtent(v)),{extent:v,target:w,feature:a,key:u,name:p,sourceIndex:r}}function yTt(t,e,i,r,n,s,o){return t.features.map((a=>mTt(a,e,i,r,n,s,o)))}var MK;let lh=MK=class extends vte{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>rTt({source:this,...e},i),this.getSuggestions=(e,i)=>nTt({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch((()=>{}))}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new MK({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?le(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?le(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find((i=>i.type==="string")))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map((i=>{const r=t.getField(i);return(r==null?void 0:r.alias)||i})).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};d([g({json:{read:{source:"field.name"},write:{target:"field.name"}}})],lh.prototype,"displayField",void 0),d([g({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],lh.prototype,"exactMatch",void 0),d([g({value:null})],lh.prototype,"layer",null),d([g()],lh.prototype,"name",null),d([g({type:[String],json:{write:!0}})],lh.prototype,"orderByFields",void 0),d([g()],lh.prototype,"searchFields",void 0),d([g()],lh.prototype,"searchTemplate",void 0),d([g()],lh.prototype,"suggestionTemplate",void 0),lh=MK=d([G("esri.widgets.Search.LayerSearchSource")],lh);const GS=lh;function gTt(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function vTt(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Qg=class extends ve{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};d([g({type:String,json:{write:!0}})],Qg.prototype,"address",void 0),d([g({type:Object,json:{write:!0}})],Qg.prototype,"attributes",void 0),d([g({type:Ut,json:{write:!0}})],Qg.prototype,"extent",void 0),d([g({type:gt,json:{write:!0}})],Qg.prototype,"location",void 0),d([g({type:Number,json:{write:!0}})],Qg.prototype,"score",void 0),Qg=d([G("esri.rest.support.AddressCandidate")],Qg);const dLe=Qg,wte={type:String,json:{read:{source:"token"},write:{target:"token"}}};let yo=class extends ve{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};d([g({type:Object,json:{write:!0}})],yo.prototype,"address",void 0),d([g(wte)],yo.prototype,"apiKey",void 0),d([g({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],yo.prototype,"categories",void 0),d([g({type:String,json:{write:!0}})],yo.prototype,"countryCode",void 0),d([g({type:Boolean,json:{write:!0}})],yo.prototype,"forStorage",void 0),d([g({type:gt,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],yo.prototype,"location",void 0),d([g({type:["rooftop","street"],json:{write:!0}})],yo.prototype,"locationType",void 0),d([g({type:String,json:{write:!0}})],yo.prototype,"magicKey",void 0),d([g({type:Number,json:{write:!0}})],yo.prototype,"maxLocations",void 0),d([g({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],yo.prototype,"outFields",void 0),d([g({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],yo.prototype,"outSpatialReference",void 0),d([g({type:Ut,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],yo.prototype,"searchExtent",void 0),yo=d([G("esri.rest.support.AddressToLocationsParameters")],yo),yo.from=Zr(yo);const pLe=yo;async function bTt(t,e,i){e=pLe.from(e);const r=Ok(t),{address:n,...s}=e.toJSON(),o={...n,...s,f:"json"},a=f4({...r.query,...o}),l=p4(a,i),c=`${r.path}/findAddressCandidates`;return ni(c,l).then(wTt)}function wTt({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map((r=>{if(!r)return;const{extent:n,location:s}=r,o=!n||vTt(n);return gTt(s)&&o?(n&&(n.spatialReference=i),s&&(s.spatialReference=i),dLe.fromJSON(r)):void 0})):[]}let lm=class extends ve{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};d([g(wte)],lm.prototype,"apiKey",void 0),d([g({type:gt,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,r=i!==void 0;e.location=r?i:null}}}})],lm.prototype,"location",void 0),d([g({type:["street","rooftop"],json:{write:!0}})],lm.prototype,"locationType",void 0),d([g({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],lm.prototype,"outSpatialReference",void 0),lm=d([G("esri.rest.support.LocationToAddressParameters")],lm),lm.from=Zr(lm);const fLe=lm;async function _Tt(t,e,i){e=fLe.from(e);const r=Ok(t),n={...e.toJSON(),f:"json"},s=f4({...r.query,...n}),o=p4(s,i),a=`${r.path}/reverseGeocode`;return ni(a,o).then(xTt)}function xTt({data:t}){if(!t)return;const{address:e,location:i}=t,r=(e==null?void 0:e.Match_addr)||"";return dLe.fromJSON({address:r,attributes:e||{},location:i,score:100})}let qS=class extends ve{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};d([g({type:Boolean,json:{write:!0}})],qS.prototype,"isCollection",void 0),d([g({type:String,json:{write:!0}})],qS.prototype,"magicKey",void 0),d([g({type:String,json:{write:!0}})],qS.prototype,"text",void 0),qS=d([G("esri.rest.support.SuggestionCandidate")],qS);const STt=qS;let Ql=class extends ve{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};d([g(wte)],Ql.prototype,"apiKey",void 0),d([g({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Ql.prototype,"categories",void 0),d([g({type:String,json:{write:!0}})],Ql.prototype,"countryCode",void 0),d([g({type:gt,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Ql.prototype,"location",void 0),d([g({type:Number,json:{write:!0}})],Ql.prototype,"maxSuggestions",void 0),d([g({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ql.prototype,"outSpatialReference",void 0),d([g({type:Ut,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],Ql.prototype,"searchExtent",void 0),d([g({type:String,json:{write:!0}})],Ql.prototype,"text",void 0),Ql=d([G("esri.rest.support.SuggestLocationsParameters")],Ql),Ql.from=Zr(Ql);const mLe=Ql;async function ETt(t,e,i){const r=Ok(t),n={...(e=mLe.from(e)).toJSON(),f:"json"},s=f4({...r.query,...n}),o=p4(s,i),a=`${r.path}/suggest`;return ni(a,o).then(TTt)}function TTt(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map((r=>new STt(r))):[]}const $Tt="Single Line Input",MTt=3e5;function CTt(t,e){return t.location?OTt(t,e):LTt(t,e)}function yLe(t,e){var r;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=MTt?(r=t==null?void 0:t.extent)==null?void 0:r.center:null}async function ITt(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=t,l=new mLe,{apiKey:c,url:u}=i,p=gLe(i,n),m=e==null?void 0:e.signal;if(!u)return null;c&&(l.apiKey=c),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const v=yLe(n,i);if(v&&(l.location=v),!s.trim())return null;const{prefix:w="",suffix:_=""}=i,T=`${w}${s}${_}`;return l.text=T,p&&(l.searchExtent=p),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),ETt(u,l,{signal:m}).then(($=>NTt($,a)))}function ATt(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function PTt(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function Fye(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const kTt="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function OTt(t,e){const{source:i,spatialReference:r,location:n,sourceIndex:s,view:o}=t,{apiKey:a,url:l,zoomScale:c,defaultZoomScale:u}=i;if(l==null)return[];const p=o==null?void 0:o.scale,m=e==null?void 0:e.signal,v=new fLe({location:n});a&&(v.apiKey=a),r&&(v.outSpatialReference=r);try{return vLe([await _Tt(l,v,{signal:m})],{sourceIndex:s,scale:p,view:o,zoomScale:c,defaultZoomScale:u})}catch{return[]}}function gLe(t,e){const{filter:i,withinViewEnabled:r}=t,n=e==null?void 0:e.scale,s=e==null?void 0:e.extent,o=i==null?void 0:i.geometry;return(o?gte(o,e??void 0,n):void 0)||(r&&s?s:void 0)}async function LTt(t,e){var B;const{source:i,suggestResult:r,spatialReference:n,view:s,maxResults:o,sourceIndex:a}=t,l=i==null?void 0:i.zoomScale,c=i==null?void 0:i.defaultZoomScale;if(!((B=r.text)==null?void 0:B.trim()))return null;const p=!r.key&&i.prefix?i.prefix:"",m=!r.key&&i.suffix?i.suffix:"",v=`${p}${r.text}${m}`,w=new pLe,{apiKey:_,url:T}=i,$=s==null?void 0:s.scale,I=gLe(i,s),A=e==null?void 0:e.signal;if(_&&(w.apiKey=_),!T)return null;i.categories&&(w.categories=i.categories),i.locationType&&(w.locationType=i.locationType),n&&(w.outSpatialReference=n);const k=yLe(s,i);k&&(w.location=k),w.maxLocations=o,I&&(w.searchExtent=I),i.countryCode&&(w.countryCode=i.countryCode);const{key:R}=r,F=`${R}`;return R&&(w.magicKey=F),w.address={},w.address[i.singleLineFieldName||$Tt]=v,i.outFields&&(w.outFields=i.outFields),bTt(T,w,{signal:A}).then((q=>vLe(q,{key:F,scale:$,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:c})))}function RTt(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function NTt(t,e){return t.map((i=>RTt(i,e)))}function DTt(t,e){const{key:i,scale:r,sourceIndex:n,view:s,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:c,location:u,address:p}=t,m=new sr({geometry:u,attributes:l}),v=c||u,w=v?gte(v,s??void 0,r??void 0):void 0,_=w?typeof o=="number"?$K(w,s??void 0,o):typeof a=="number"&&(v==null?void 0:v.type)==="point"?$K(w,s??void 0,a):w:null,T=u?`${u.x},${u.y}`:"",$=p||T,I=m.clone();return _!=null&&(I.geometry=or.fromExtent(_)),{extent:_,feature:m,target:I,key:i,name:$,sourceIndex:n}}function vLe(t,e){return t.filter(Boolean).map((i=>DTt(i,e)))}var CK;let Vo=CK=class extends vte{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>CTt({source:this,...e},i),this.getSuggestions=(e,i)=>ITt({source:this,...e},i)}clone(){return new CK({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?le(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?le(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};d([g()],Vo.prototype,"apiKey",void 0),d([g()],Vo.prototype,"categories",void 0),d([g()],Vo.prototype,"countryCode",void 0),d([g({json:{write:!0}})],Vo.prototype,"defaultZoomScale",void 0),d([g()],Vo.prototype,"localSearchDisabled",void 0),d([g()],Vo.prototype,"locationType",void 0),d([g({json:{write:!0}})],Vo.prototype,"name",void 0),d([g({json:{write:!0}})],Vo.prototype,"placeholder",void 0),d([g()],Vo.prototype,"searchTemplate",void 0),d([g({json:{write:!0}})],Vo.prototype,"singleLineFieldName",void 0),d([g({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Vo.prototype,"suggestionsEnabled",void 0),d([g({json:{write:!0}})],Vo.prototype,"url",void 0),d([g({json:{write:!0}})],Vo.prototype,"zoomScale",void 0),Vo=CK=d([G("esri.widgets.Search.LocatorSearchSource")],Vo);const bLe=Vo,wLe=()=>Ce.getLogger("esri.widgets.support.geolocationUtils"),FTt={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function zTt(){const t=!!ge("esri-geolocation");return t||wLe().warn("geolocation-unsupported","Geolocation unsupported."),t}function jTt(){const t=window.isSecureContext;return t||wLe().warnOnce("insecure-context","Geolocation requires a secure origin."),t}function zye(){return zTt()&&jTt()}function UTt(t){return t??(t=FTt),new Promise(((i,r)=>{setTimeout((()=>r(new ae("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)}))}function BTt(t,e){const{position:i,view:r}=t,n=VTt(i),s=n==null?void 0:n.coords;if(!s)throw new ae("geometry-service:no-coords","Geolocation has no coordinates");return qTt(GTt(s),r,e)}function VTt(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed,toJSON:()=>({})};return t&&{coords:i,timestamp:t.timestamp,toJSON:()=>({})}}function GTt({longitude:t,latitude:e,altitude:i}){return new gt({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function qTt(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(Ym(t)):HTt(i).then((n=>{if(!n)throw new ae("geometry-service:missing-url","Geometry service URL is missing");const s=new Sm({geometries:[t],outSpatialReference:r});return yCe(n,s,i).then((o=>o[0]))}))}function HTt(t){if(fi.geometryServiceUrl)return Promise.resolve(fi.geometryServiceUrl);const e=Ue.getDefault();return e.load(t).catch((()=>{})).then((()=>{var i,r;return(r=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:r.url}))}function jo(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const WTt=()=>qj("esri/widgets/Search/t9n/Search"),jye="highlight",vD=et.ofType({key:t=>t.layer?"layer":"locator",base:vte,typeMap:{layer:GS,locator:bLe}}),Uye=tt.WGS84,ZTt="esri/images/search/search-symbol-32.png",YTt=/<[\s\S]*?>/g,qx=-1;var FE;let oi=(FE=class extends JMe(Wh.EventedMixin(ut)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new vD,this.defaultSymbols={point:new Go({url:Pr(ZTt),size:24,width:24,height:24}),polyline:new Hr({color:[130,130,130,1],width:2}),polygon:new Jo({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Ue.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new vD,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await WTt();this.messages=i,this.defaultPopupTemplate=new Zp({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Je((()=>[this.includeDefaultSources,this.view,this.portal]),(()=>this._update()),rn),Fj(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:qx}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,s=this._get("allSources")||new vD;return s.removeAll(),s.addMany(n.filter(Boolean)),s}get locationEnabled(){return this._get("locationEnabled")||zye()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=zye();if(e&&!i){const r=new ae("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Ce.getLogger(this).error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;if(i===qx)return r??"";const n=e.at(i);return(n==null?void 0:n.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),n=(async()=>{var s;try{await this.when();const o=await this._getResultsFromSources(r,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,o,r);const l=this._getFirstResult(a.results),c=r.location&&l?l.name:r.text,u=c==null?void 0:c.replace(YTt,"");return this._set("searchTerm",u),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce(((p,m)=>{var v;return p+(((v=m.results)==null?void 0:v.length)??0)}),0)),this.emit("search-complete",a),await this._selectFirstResult(l),a}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(e){if(!this.locationEnabled){const r=new ae("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Ce.getLogger(this).error(r),r}const i=(async()=>{try{const r=await UTt(),n=await BTt({position:r,view:this.view},e);return await this.search(n,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const J=new ae("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Ce.getLogger(this).error(J),J}const{view:i}=this,r=jo(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),n=r!=null?this.allSources.at(r):null;if(!n){const J=new ae("select:missing-source","Cannot select without a source.",{source:n});throw Ce.getLogger(this).error(J),J}const s=n instanceof GS?this._getLayerSourcePopupTemplate(n):n.popupTemplate,o=n.resultSymbol||this._getDefaultSymbol(e),a=jo(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,l=jo(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,c=jo(n,"popupEnabled")?n.popupEnabled:this.popupEnabled,u=c?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:p}=e;if(!p){const J=new ae("select:missing-feature","Cannot select without a feature.",{feature:p});throw Ce.getLogger(this).error(J),J}const{attributes:m,geometry:v,layer:w,sourceLayer:_}=p,T=v?Dye(v):null,$={layerViewQuery:this._getLayerView(p),elevationQuery:i&&T!=null?JEt(T,i):Promise.resolve(T)},I=await Dw($),A=I.layerViewQuery.value,k=I.elevationQuery.value;o instanceof Hi&&(o.text=e.name);const R=i&&l?e.target||e.extent:null;await(R!=null?this._goToSearchResult(R):Promise.resolve());const B=A?p:new sr({geometry:v,symbol:o,attributes:m,layer:w,sourceLayer:_,popupTemplate:u}),q=i==null?void 0:i.popup,Y=q&&c&&B.getEffectivePopupTemplate(q.defaultPopupTemplateEnabled);return Y&&await i.openPopup({features:[B],location:k}),A&&XEt(A)&&!Y&&this._highlightFeature({graphic:B,layerView:A}),!A&&a&&i&&i.graphics.push(B),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",B),this.emit("select-result",{result:e,source:n,sourceIndex:r}),e}async suggest(e,i,r){const n=e||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const s=await this._suggestImmediate(n,r);return this._set("suggestions",s==null?void 0:s.results),this._set("suggestionCount",(s==null?void 0:s.results.reduce(((o,a)=>{var l;return o+(((l=a.results)==null?void 0:l.length)??0)}),0))??null),this.emit("suggest-complete",s),s}async when(){await P_((()=>!this.updating))}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Dw([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await P_((()=>this.messages)),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const e=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return e?e.map((n=>{var l;if(n.placefinding===!1)return;const s=Fye(n.url)&&z1e(n.url)?{url:kTt}:null,o=bLe.fromJSON({...n,...s}),a=o.url;if(Fye(a)||PTt(a)||ATt(a)){const c=o.outFields??["Addr_type","Match_addr","StAddr","City"],u=(o.placeholder||((l=this.messages)==null?void 0:l.placeholder))??"",p=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.singleLineFieldName="SingleLine",o.outFields=c,o.placeholder=u,o.defaultZoomScale=p}return o.singleLineFieldName?o:void 0})).filter(rs):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach((e=>e==null?void 0:e.destroy())),this._createdFeatureLayers=[]}_getLayerSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map((s=>{const o=r.findLayerById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=GS.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then((c=>{l.layer=c})),l})).filter(rs).toArray()}_getTableSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map((s=>{if(!s.id)return;const o=r.findTableById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=GS.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then((c=>{l.layer=c})),l})).filter(rs).toArray()}_convertApplicationProperties(){var a,l,c;const e=(a=this.view)==null?void 0:a.map,i=(c=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:c.search;if(!i)return[];const{enabled:r,hintText:n,layers:s,tables:o}=i;return r?[...this._getLayerSources(s,n),...this._getTableSources(o,n)]:[]}async _getSubLayer(e,i){var s;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find((o=>o.id===i.subLayer));if(!r)throw new Error;const n=await((s=r.createFeatureLayer)==null?void 0:s.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find((n=>n.id===i.subLayer));if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const n=new ae("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Ce.getLogger(this).error(n),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var s;const e=(s=this.view)==null?void 0:s.popup,{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,n=r?e.selectedFeature:null;r&&n&&n===i&&e.close()}_suggestTimer(e,i){const r=e??this.suggestionDelay;return HJ(r,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof sr&&e.geometry?Dye(e.geometry):e instanceof gt?e:Array.isArray(e)&&e.length===2?new gt({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&jo(e,"key")&&jo(e,"text")&&jo(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:n,selectedResult:s}=this,o=!e&&n&&s,a=o&&n.key===s.key&&n.sourceIndex===s.sourceIndex,l=o&&n.location;return a||l?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){return ID(e,(({results:i})=>i==null?void 0:i[0]))??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var s;await this.when();const r=await this._getSuggestionsFromSources(e,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(e,i,r){const n=(i==null?void 0:i.value)||[],s=i==null?void 0:i.error,o=this.allSources.at(r);if(s){const a={sourceIndex:r,source:o,error:s};e.errors.push(a),Ce.getLogger(this).error(s),e.numErrors++}else{const a={sourceIndex:r,source:o,results:n};e.results.push(a),e.numResults+=n.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===qx){const n=r&&jo(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach(((s,o)=>{const a=n!==void 0?n:o;this._formatSourceResponse(e,s,a)}))}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,n=!e.location&&jo(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!r.length){const o=new ae("search:no-sources-defined","At least one source is required.",{allSources:r});throw Ce.getLogger(this).error(o),o}return n===qx?r.forEach(((o,a)=>{s.push(this._getResultsFromSource(e,a,i))})):s.push(this._getResultsFromSource(e,n,i)),Dw(s)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:n}=this,s=[];if(!r.length){const o=new ae("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw Ce.getLogger(this).error(o),o}return n===qx?r.forEach(((o,a)=>{s.push(this._getSuggestionsFromSource(e,a,i))})):s.push(this._getSuggestionsFromSource(e,n,i)),Dw(s)}async _getResultsFromSource(e,i,r){var u,p;const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:s=null}=e,o=((u=this.view)==null?void 0:u.spatialReference)||Uye,a=jo(n,"maxResults")?n.maxResults:this.maxResults,l=!!(n instanceof GS&&jo(n,"exactMatch"))&&n.exactMatch,{view:c}=this;return(p=n.getResults)==null?void 0:p.call(n,{view:c,sourceIndex:i,location:s,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},r)}async _getSuggestionsFromSource(e,i,r){var l,c;const n=this.allSources.at(i);if(!n)return null;e??(e="");const s=jo(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,o=e==null?void 0:e.length,a=jo(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&o>=a){const u=((l=this.view)==null?void 0:l.spatialReference)||Uye,p=jo(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:m}=this,v=!!(n instanceof GS&&jo(n,"exactMatch"))&&n.exactMatch;return(c=n.getSuggestions)==null?void 0:c.call(n,{view:m,sourceIndex:i,suggestTerm:e,spatialReference:u,maxSuggestions:p,exactMatch:v},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return jo(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return ID(this.results??[],(({results:i,sourceIndex:r})=>(i==null?void 0:i.includes(e))?r:null))??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:i}=this,r=(n=e.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(jye)}async _getLayerView(e){const{view:i}=this;if(!e||!i)return null;const{layer:r,sourceLayer:n}=e,s=r??n;return s&&s.type!=="building-component"&&s.type!=="subtype-sublayer"?(await i.when(),i.whenLayerView(s)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:n,layer:s,sourceLayer:o}=i,a=s??o,{objectIdField:l}=a,c=(l&&(n==null?void 0:n[l]))??null,u=r.highlight(c??i);this.addHandles(u,jye)}_setResultFloor(e){var s,o,a;const{view:i}=this,r=(s=e.feature)==null?void 0:s.attributes,n=(o=e.feature)==null?void 0:o.sourceLayer;if(n&&"floorInfo"in n&&((a=n==null?void 0:n.floorInfo)!=null&&a.floorField)&&r){const l=r[n.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}},FE.ALL_INDEX=qx,FE);d([g()],oi.prototype,"_searching",void 0),d([g()],oi.prototype,"_updatingPromise",void 0),d([g({readOnly:!0,value:null})],oi.prototype,"activeSource",null),d([g()],oi.prototype,"activeSourceIndex",null),d([g()],oi.prototype,"allPlaceholder",null),d([g({readOnly:!0})],oi.prototype,"allSources",null),d([g()],oi.prototype,"autoNavigate",void 0),d([g()],oi.prototype,"autoSelect",void 0),d([g({type:Zp})],oi.prototype,"defaultPopupTemplate",void 0),d([g({readOnly:!0})],oi.prototype,"defaultSources",void 0),d([g()],oi.prototype,"defaultSymbols",void 0),d([g()],oi.prototype,"includeDefaultSources",void 0),d([g()],oi.prototype,"locationEnabled",null),d([g()],oi.prototype,"maxInputLength",void 0),d([g()],oi.prototype,"maxResults",void 0),d([g()],oi.prototype,"maxSuggestions",void 0),d([g()],oi.prototype,"messages",void 0),d([g()],oi.prototype,"minSuggestCharacters",void 0),d([g({readOnly:!0})],oi.prototype,"placeholder",null),d([g()],oi.prototype,"popupEnabled",void 0),d([g({type:Zp})],oi.prototype,"popupTemplate",void 0),d([g({type:Ue})],oi.prototype,"portal",void 0),d([g()],oi.prototype,"resultCount",void 0),d([g()],oi.prototype,"resultGraphicEnabled",void 0),d([g({readOnly:!0})],oi.prototype,"resultGraphic",void 0),d([g({readOnly:!0})],oi.prototype,"results",void 0),d([g({readOnly:!0})],oi.prototype,"selectedSuggestion",void 0),d([g()],oi.prototype,"searchAllEnabled",void 0),d([g({readOnly:!0})],oi.prototype,"selectedResult",void 0),d([g()],oi.prototype,"searchTerm",null),d([g({type:vD})],oi.prototype,"sources",void 0),d([g({readOnly:!0})],oi.prototype,"state",null),d([g()],oi.prototype,"suggestionDelay",void 0),d([g()],oi.prototype,"suggestionCount",void 0),d([g({readOnly:!0})],oi.prototype,"suggestions",void 0),d([g()],oi.prototype,"suggestionsEnabled",void 0),d([g({readOnly:!0})],oi.prototype,"updating",null),d([g()],oi.prototype,"view",void 0),d([g()],oi.prototype,"clear",null),oi=d([G("esri.widgets.Search.SearchViewModel")],oi);const KTt=oi;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */function Bye(t){t==null||t.abort()}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const JTt=(t,e)=>i=>QTt(i,t);var XP,Xbe;let XTt=(Xbe=class extends rX{constructor(i,r){super(i,r);pt(this,XP);new Iee(this.component)}hostLoad(){nt(this,XP,Je(()=>this.component.el.view,i=>{this.instance.view=i,this.instance.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostDestroy(){var i;(i=me(this,XP))==null||i.remove(),super.hostDestroy()}},XP=new WeakMap,Xbe);const QTt=dk(XTt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
v4.33.20 */const oC="arcgis-search",aC={base:oC,autocomplete:`${oC}__autocomplete`,dropdown:`${oC}__dropdown`,container:`${oC}__container`,form:`${oC}__form`},e$t=Xi`@layer{arcgis-search{display:block}.arcgis-search{--arcgis-internal-search-width: 240px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:var(--arcgis-internal-search-width)}.arcgis-search__dropdown{--calcite-color-border-1: var(--calcite-color-border-input);--calcite-dropdown-width: var(--arcgis-internal-search-width);width:31px}.arcgis-search__autocomplete{flex:1}.arcgis-search__container{display:flex;position:relative;flex:1 0 100%;flex-flow:row nowrap;align-items:stretch}.arcgis-search__form{display:flex;flex:1 0;flex-flow:row nowrap;align-items:stretch;margin:0;padding:0}}`,t$t=JTt(KTt);var i0;let i$t=(i0=class extends ik{constructor(){super(...arguments),this.viewModel=t$t(this),this._currentLocationValue="search-use-current-location",this._autocompleteEl=void 0,this._searchResultRendererContainerEl=document.createElement("div"),this._searchResultRendererEl=void 0,this._suggestController=void 0,this._searchController=void 0,this._lastSearchTerm="",this.messages=ZAe({}),this._setSearchResultRendererRef=e=>{this._searchResultRendererEl=e},this._locateFailed=!1,this._showNoResults=!1,this.position="top-left",this.goToOverride=this.viewModel.goToOverride,this.icon="search",this.activeMenu="none",this.activeSourceIndex=this.viewModel.activeSourceIndex,this.allPlaceholder=this.viewModel.allPlaceholder,this.allSources=this.viewModel.allSources,this.autoNavigateDisabled=this.viewModel.autoNavigate,this.autoSelectDisabled=this.viewModel.autoSelect,this.defaultSources=this.viewModel.defaultSources,this.disabled=!1,this.includeDefaultSourcesDisabled=this.viewModel.includeDefaultSources,this.locationDisabled=this.viewModel.locationEnabled,this.maxResults=this.viewModel.maxResults,this.maxSuggestions=this.viewModel.maxSuggestions,this.minSuggestCharacters=this.viewModel.minSuggestCharacters,this.popupDisabled=this.viewModel.popupEnabled,this.popupTemplate=this.viewModel.popupTemplate,this.portal=this.viewModel.portal,this.resultGraphic=this.viewModel.resultGraphic,this.resultGraphicDisabled=this.viewModel.resultGraphicEnabled,this.results=this.viewModel.results,this.searchAllDisabled=this.viewModel.searchAllEnabled,this.searchTerm=this.viewModel.searchTerm,this.selectedResult=this.viewModel.selectedResult,this.sources=this.viewModel.sources,this.suggestions=this.viewModel.suggestions,this.suggestionsDisabled=this.viewModel.suggestionsEnabled,this.autoDestroyDisabled=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=Cee()("state"),this.arcgisReady=jE(),this.arcgisSearchClear=yn(()=>this.viewModel,"search-clear"),this.arcgisSearchComplete=yn(()=>this.viewModel,"search-complete"),this.arcgisSearchStart=yn(()=>this.viewModel,"search-start"),this.arcgisSelectResult=yn(()=>this.viewModel,"select-result"),this.arcgisSuggestComplete=yn(()=>this.viewModel,"suggest-complete"),this.arcgisSuggestStart=yn(()=>this.viewModel,"suggest-start")}get _isDisabled(){const{state:e}=this.viewModel;return e==="disabled"||e==="loading"||this.disabled}get _showCurrentLocation(){var e;return!this.locationDisabled&&!((e=this.searchTerm)!=null&&e.trim())}get _effectiveActiveMenu(){return this._isDisabled?"none":this.activeMenu}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}clear(){this._locateFailed=!1,this.viewModel.clear()}async destroy(){var e;await this.manager.destroy(),await((e=this._searchResultRendererEl)==null?void 0:e.destroy()),this._cancelQueries()}async search(e){this._cancelQueries();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(n!=null&&n.numResults||(this._showNoResults=!0,this.activeMenu="suggestion"),this._searchController=void 0,n)}catch{if(this._searchController!==i)return;this._searchController=void 0;return}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=void 0,n!=null&&n.numResults&&(this.activeMenu="suggestion",this._scrollToTopSuggestion()),n)}catch{return this._suggestController!==i||(this._suggestController=void 0),null}}async setFocus(){var e;await((e=this._autocompleteEl)==null?void 0:e.setFocus())}loaded(){this._addSearchResultRenderer(),this.manager.onLifecycle(()=>Je(()=>{var e;return(e=this.viewModel)==null?void 0:e.defaultPopupTemplate},e=>{if(e){const i=document.createElement("div");i.appendChild(this._searchResultRendererContainerEl),e.content=i}},{initial:!0}))}_addSearchResultRenderer(){Awe(Pe`<arcgis-search-result-renderer auto-destroy-disabled .messages=${this.messages} .viewModel=${this.viewModel} ${wi(this._setSearchResultRendererRef)}></arcgis-search-result-renderer>`,this._searchResultRendererContainerEl)}_handleInputKeydown(e){e.key==="Tab"&&this._cancelSuggest()}_handleAutocompleteCreate(e){this._autocompleteEl=e}_handleCalciteAutocompleteTextInput(e){const i=e.target.inputValue;i!==this.viewModel.searchTerm&&(this.viewModel.searchTerm=i,i||this.clear(),this.suggest())}_handleAutocompleteOpen(){this.activeMenu="suggestion"}_handleAutocompleteClose(){this.activeMenu==="suggestion"&&(this.activeMenu="none")}_handleCalciteAutocompleteChange(e){var s,o,a;const i=e.target.value;if(i===this._currentLocationValue){this._useCurrentLocation();return}const r=JSON.parse(i),n=(a=(o=(s=this.viewModel.suggestions)==null?void 0:s.find(({sourceIndex:l})=>l===r.sourceIndex))==null?void 0:o.results)==null?void 0:a.find(({key:l})=>`${l}`==`${r.key}`);n&&this.search(n)}async _useCurrentLocation(){this._cancelQueries();const e=new AbortController,{signal:i}=e;this._searchController=e;try{await this.viewModel.searchNearby({signal:i})}catch(r){io(r)||(this._locateFailed=!0,this.activeMenu="suggestion")}finally{this._searchController=void 0}}_handleSourceOpen(){this.activeMenu="source"}_handleSourceClose(){this.activeMenu==="source"&&(this.activeMenu="none")}_handleSourceSelect(e){const i=e.target.selectedItems[0].getAttribute("data-source-index");i&&(this.viewModel.activeSourceIndex=Number.parseInt(i,10))}_cancelSuggest(){this.activeMenu="none",this._locateFailed=!1,this._showNoResults=!1,this._suggestController=Bye(this._suggestController)}_cancelQueries(){this._cancelSuggest(),this._searchController=Bye(this._searchController)}_scrollToTopSuggestion(){var e;(e=this._autocompleteEl)==null||e.scrollContentTo({top:0})}_formSubmit(e){e.preventDefault(),this.activeMenu="none",this._lastSearchTerm=this.searchTerm,this.searchTerm&&this.search()}_getSourceName(e){const{messages:i}=this,{allSources:r}=this.viewModel,n=r.at(e);return(e===-1?i.all:(n==null?void 0:n.name)||i.untitledSource)||""}render(){return this._addSearchResultRenderer(),Pe`<div class=${Yd(RI(aC.base,XOe.widget))}><div class=${Yd(aC.container)}>${this._renderSourcesMenu()}${this._renderForm()}</div></div>`}_renderSourcesMenu(){const{messages:e,_isDisabled:i,_effectiveActiveMenu:r}=this,{allSources:n,searchAllEnabled:s}=this.viewModel;return n.length>1?Pe`<calcite-dropdown class=${Yd(aC.dropdown)} .disabled=${i} .open=${r==="source"} overlay-positioning=fixed @calciteDropdownClose=${this._handleSourceClose} @calciteDropdownOpen=${this._handleSourceOpen} @calciteDropdownSelect=${this._handleSourceSelect}><calcite-button appearance=outline-fill icon-start=caret-down kind=neutral .label=${e.searchIn} slot=trigger></calcite-button><calcite-dropdown-group .groupTitle=${e.searchIn}>${s?this._renderSource(-1):null}${n.map((o,a)=>this._renderSource(a)).toArray()}</calcite-dropdown-group></calcite-dropdown>`:null}_renderUseCurrentLocation(){const{_currentLocationValue:e}=this;return Pe`<calcite-autocomplete-item .heading=${this.messages.useCurrentLocation??""} icon-start=gps-on .value=${e}></calcite-autocomplete-item>`}_renderAutocomplete(){const{_effectiveActiveMenu:e,messages:i,_isDisabled:r}=this,{maxInputLength:n,placeholder:s,searchTerm:o,state:a}=this.viewModel,l=this.label??i.searchButtonTitle??"";return Pe`<calcite-autocomplete .autocomplete=${"off"} class=${Yd(aC.autocomplete)} .disabled=${r} .icon=${this.icon} .inputValue=${o} .label=${l} .loading=${a==="searching"} .maxLength=${n} .name=${this.el.id} @keydown=${this._handleInputKeydown} .open=${e==="suggestion"} overlay-positioning=fixed .placeholder=${s} title=${(o?"":s)??hG} @calciteAutocompleteChange=${this._handleCalciteAutocompleteChange} @calciteAutocompleteClose=${this._handleAutocompleteClose} @calciteAutocompleteOpen=${this._handleAutocompleteOpen} @calciteAutocompleteTextChange=${this._handleCalciteAutocompleteTextInput} @calciteAutocompleteTextInput=${this._handleCalciteAutocompleteTextInput} ${wi(this._handleAutocompleteCreate)}>${this._renderSuggestions()}${this._renderNotices()}</calcite-autocomplete>`}_renderForm(){return Pe`<form class=${Yd(aC.form)} @submit=${this._formSubmit} role=search>${this._renderAutocomplete()}</form>`}_renderSuggestGroup(e){var i;return(i=e.results)==null?void 0:i.map(r=>this._renderSuggestion(r))}_renderSuggestions(){const{suggestions:e}=this.viewModel;return this._showNoResults?null:this._showCurrentLocation?this._renderUseCurrentLocation():e==null?void 0:e.map(i=>this._renderSuggestResults(i))}_renderSuggestResults(e){var l;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=e,s=(l=e.results)==null?void 0:l.length,o=i.length>1&&r===-1,a=this._getSourceName(n);return s&&o?Pe`<calcite-autocomplete-item-group .heading=${a}>${this._renderSuggestGroup(e)}</calcite-autocomplete-item-group>`:this._renderSuggestGroup(e)}_renderSuggestion({key:e,sourceIndex:i,text:r}){const n={key:e,sourceIndex:i};return Pe`<calcite-autocomplete-item .heading=${r??this.messages.untitledResult??""} .value=${JSON.stringify(n)}></calcite-autocomplete-item>`}_renderSource(e){const i=this._getSourceName(e);return Pe`<calcite-dropdown-item data-source-index=${`${e}`} .selected=${e===this.viewModel.activeSourceIndex}>${i}</calcite-dropdown-item>`}_renderNoResultsWarning(e){const{messages:i}=this,r=e?V_(i.noResultsFoundForValue??"",{value:`"${e}"`}):i.noResultsFound;return Pe`<calcite-notice icon=exclamation-mark-triangle kind=warning open slot=content-bottom><div slot=title>${i.noResults}</div><div slot=message>${r}</div></calcite-notice>`}_renderLocateError(){return Pe`<calcite-notice icon=exclamation-mark-circle kind=danger open slot=content-bottom><div slot=message>${this.messages.locateError}</div></calcite-notice>`}_renderNotices(){return this._locateFailed?this._renderLocateError():this._showNoResults?this._renderNoResultsWarning(this._lastSearchTerm??this.viewModel.searchTerm):null}},i0.properties={_locateFailed:16,_showNoResults:16,_isDisabled:16,_showCurrentLocation:16,_effectiveActiveMenu:16,referenceElement:1,position:3,goToOverride:0,icon:1,activeMenu:1,activeSource:32,activeSourceIndex:9,allPlaceholder:1,allSources:0,autoNavigateDisabled:5,autoSelectDisabled:5,defaultSources:0,disabled:5,includeDefaultSourcesDisabled:5,locationDisabled:5,maxResults:9,maxSuggestions:9,minSuggestCharacters:9,popupDisabled:5,popupTemplate:0,portal:0,resultGraphic:0,resultGraphicDisabled:5,results:0,searchAllDisabled:5,searchTerm:1,selectedResult:0,sources:0,suggestions:0,suggestionsDisabled:5,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},i0.styles=e$t,i0.shadowRootOptions=C_,i0);ok("arcgis-search",i$t);function r$t(){const t=e=>{const i=e.target,r={type:"point",longitude:13.54008,latitude:52.45714},n={type:"simple-marker",style:"path",size:8,color:"red",outline:{color:"white",width:1}},s=new sr({geometry:r,symbol:n});i.graphics.add(s)};return H.jsxs("arcgis-map",{class:"w-full h-full","item-id":"f56c2695190f4f4da032f79b2d51aaa9",onarcgisViewReadyChange:t,children:[H.jsx("arcgis-zoom",{position:"top-left"}),H.jsx("arcgis-search",{position:"top-right"}),H.jsx("arcgis-legend",{position:"bottom-left"})]})}function _Le(t,e){const i=U.useRef(e);U.useEffect(function(){e!==i.current&&t.attributionControl!=null&&(i.current!=null&&t.attributionControl.removeAttribution(i.current),e!=null&&t.attributionControl.addAttribution(e)),i.current=e},[t,e])}const n$t=1;function s$t(t){return Object.freeze({__version:n$t,map:t})}function xLe(t,e){return Object.freeze({...t,...e})}const _te=U.createContext(null);function aU(){const t=U.use(_te);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function SLe(t){function e(i,r){const{instance:n,context:s}=t(i).current;U.useImperativeHandle(r,()=>n);const{children:o}=i;return o==null?null:xD.createElement(_te,{value:s},o)}return U.forwardRef(e)}function o$t(t){function e(i,r){const[n,s]=U.useState(!1),{instance:o}=t(i,s).current;U.useImperativeHandle(r,()=>o),U.useEffect(function(){n&&o.update()},[o,n,i.children]);const a=o._contentNode;return a?ywe.createPortal(i.children,a):null}return U.forwardRef(e)}function a$t(t){function e(i,r){const{instance:n}=t(i).current;return U.useImperativeHandle(r,()=>n),null}return U.forwardRef(e)}function xte(t,e){const i=U.useRef(void 0);U.useEffect(function(){return e!=null&&t.instance.on(e),i.current=e,function(){i.current!=null&&t.instance.off(i.current),i.current=null}},[t,e])}function lU(t,e){const i=t.pane??e.pane;return i?{...t,pane:i}:t}function l$t(t,e){return function(r,n){const s=aU(),o=t(lU(r,s),s);return _Le(s.map,r.attribution),xte(o.current,r.eventHandlers),e(o.current,s,r,n),o}}var PI={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var c$t=PI.exports,Vye;function ELe(){return Vye||(Vye=1,(function(t,e){(function(i,r){r(e)})(c$t,(function(i){var r="1.9.4";function n(y){var S,M,O,z;for(M=1,O=arguments.length;M<O;M++){z=arguments[M];for(S in z)y[S]=z[S]}return y}var s=Object.create||(function(){function y(){}return function(S){return y.prototype=S,new y}})();function o(y,S){var M=Array.prototype.slice;if(y.bind)return y.bind.apply(y,M.call(arguments,1));var O=M.call(arguments,2);return function(){return y.apply(S,O.length?O.concat(M.call(arguments)):arguments)}}var a=0;function l(y){return"_leaflet_id"in y||(y._leaflet_id=++a),y._leaflet_id}function c(y,S,M){var O,z,Z,se;return se=function(){O=!1,z&&(Z.apply(M,z),z=!1)},Z=function(){O?z=arguments:(y.apply(M,arguments),setTimeout(se,S),O=!0)},Z}function u(y,S,M){var O=S[1],z=S[0],Z=O-z;return y===O&&M?y:((y-z)%Z+Z)%Z+z}function p(){return!1}function m(y,S){if(S===!1)return y;var M=Math.pow(10,S===void 0?6:S);return Math.round(y*M)/M}function v(y){return y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")}function w(y){return v(y).split(/\s+/)}function _(y,S){Object.prototype.hasOwnProperty.call(y,"options")||(y.options=y.options?s(y.options):{});for(var M in S)y.options[M]=S[M];return y.options}function T(y,S,M){var O=[];for(var z in y)O.push(encodeURIComponent(M?z.toUpperCase():z)+"="+encodeURIComponent(y[z]));return(!S||S.indexOf("?")===-1?"?":"&")+O.join("&")}var $=/\{ *([\w_ -]+) *\}/g;function I(y,S){return y.replace($,function(M,O){var z=S[O];if(z===void 0)throw new Error("No value provided for variable "+M);return typeof z=="function"&&(z=z(S)),z})}var A=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"};function k(y,S){for(var M=0;M<y.length;M++)if(y[M]===S)return M;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(y){return window["webkit"+y]||window["moz"+y]||window["ms"+y]}var B=0;function q(y){var S=+new Date,M=Math.max(0,16-(S-B));return B=S+M,window.setTimeout(y,M)}var Y=window.requestAnimationFrame||F("RequestAnimationFrame")||q,J=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(y){window.clearTimeout(y)};function Q(y,S,M){if(M&&Y===q)y.call(S);else return Y.call(window,o(y,S))}function te(y){y&&J.call(window,y)}var re={__proto__:null,extend:n,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:u,falseFn:p,formatNum:m,trim:v,splitWords:w,setOptions:_,getParamString:T,template:I,isArray:A,indexOf:k,emptyImageUrl:R,requestFn:Y,cancelFn:J,requestAnimFrame:Q,cancelAnimFrame:te};function ee(){}ee.extend=function(y){var S=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=S.__super__=this.prototype,O=s(M);O.constructor=S,S.prototype=O;for(var z in this)Object.prototype.hasOwnProperty.call(this,z)&&z!=="prototype"&&z!=="__super__"&&(S[z]=this[z]);return y.statics&&n(S,y.statics),y.includes&&(ye(y.includes),n.apply(null,[O].concat(y.includes))),n(O,y),delete O.statics,delete O.includes,O.options&&(O.options=M.options?s(M.options):{},n(O.options,y.options)),O._initHooks=[],O.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var Z=0,se=O._initHooks.length;Z<se;Z++)O._initHooks[Z].call(this)}},S},ee.include=function(y){var S=this.prototype.options;return n(this.prototype,y),y.options&&(this.prototype.options=S,this.mergeOptions(y.options)),this},ee.mergeOptions=function(y){return n(this.prototype.options,y),this},ee.addInitHook=function(y){var S=Array.prototype.slice.call(arguments,1),M=typeof y=="function"?y:function(){this[y].apply(this,S)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function ye(y){if(!(typeof L>"u"||!L||!L.Mixin)){y=A(y)?y:[y];for(var S=0;S<y.length;S++)y[S]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(y,S,M){if(typeof y=="object")for(var O in y)this._on(O,y[O],S);else{y=w(y);for(var z=0,Z=y.length;z<Z;z++)this._on(y[z],S,M)}return this},off:function(y,S,M){if(!arguments.length)delete this._events;else if(typeof y=="object")for(var O in y)this._off(O,y[O],S);else{y=w(y);for(var z=arguments.length===1,Z=0,se=y.length;Z<se;Z++)z?this._off(y[Z]):this._off(y[Z],S,M)}return this},_on:function(y,S,M,O){if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}if(this._listens(y,S,M)===!1){M===this&&(M=void 0);var z={fn:S,ctx:M};O&&(z.once=!0),this._events=this._events||{},this._events[y]=this._events[y]||[],this._events[y].push(z)}},_off:function(y,S,M){var O,z,Z;if(this._events&&(O=this._events[y],!!O)){if(arguments.length===1){if(this._firingCount)for(z=0,Z=O.length;z<Z;z++)O[z].fn=p;delete this._events[y];return}if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}var se=this._listens(y,S,M);if(se!==!1){var xe=O[se];this._firingCount&&(xe.fn=p,this._events[y]=O=O.slice()),O.splice(se,1)}}},fire:function(y,S,M){if(!this.listens(y,M))return this;var O=n({},S,{type:y,target:this,sourceTarget:S&&S.sourceTarget||this});if(this._events){var z=this._events[y];if(z){this._firingCount=this._firingCount+1||1;for(var Z=0,se=z.length;Z<se;Z++){var xe=z[Z],Ae=xe.fn;xe.once&&this.off(y,Ae,xe.ctx),Ae.call(xe.ctx||this,O)}this._firingCount--}}return M&&this._propagateEvent(O),this},listens:function(y,S,M,O){typeof y!="string"&&console.warn('"string" type argument expected');var z=S;typeof S!="function"&&(O=!!S,z=void 0,M=void 0);var Z=this._events&&this._events[y];if(Z&&Z.length&&this._listens(y,z,M)!==!1)return!0;if(O){for(var se in this._eventParents)if(this._eventParents[se].listens(y,S,M,O))return!0}return!1},_listens:function(y,S,M){if(!this._events)return!1;var O=this._events[y]||[];if(!S)return!!O.length;M===this&&(M=void 0);for(var z=0,Z=O.length;z<Z;z++)if(O[z].fn===S&&O[z].ctx===M)return z;return!1},once:function(y,S,M){if(typeof y=="object")for(var O in y)this._on(O,y[O],S,!0);else{y=w(y);for(var z=0,Z=y.length;z<Z;z++)this._on(y[z],S,M,!0)}return this},addEventParent:function(y){return this._eventParents=this._eventParents||{},this._eventParents[l(y)]=y,this},removeEventParent:function(y){return this._eventParents&&delete this._eventParents[l(y)],this},_propagateEvent:function(y){for(var S in this._eventParents)this._eventParents[S].fire(y.type,n({layer:y.target,propagatedFrom:y.target},y),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var ue=ee.extend(ne);function he(y,S,M){this.x=M?Math.round(y):y,this.y=M?Math.round(S):S}var Ne=Math.trunc||function(y){return y>0?Math.floor(y):Math.ceil(y)};he.prototype={clone:function(){return new he(this.x,this.y)},add:function(y){return this.clone()._add(X(y))},_add:function(y){return this.x+=y.x,this.y+=y.y,this},subtract:function(y){return this.clone()._subtract(X(y))},_subtract:function(y){return this.x-=y.x,this.y-=y.y,this},divideBy:function(y){return this.clone()._divideBy(y)},_divideBy:function(y){return this.x/=y,this.y/=y,this},multiplyBy:function(y){return this.clone()._multiplyBy(y)},_multiplyBy:function(y){return this.x*=y,this.y*=y,this},scaleBy:function(y){return new he(this.x*y.x,this.y*y.y)},unscaleBy:function(y){return new he(this.x/y.x,this.y/y.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ne(this.x),this.y=Ne(this.y),this},distanceTo:function(y){y=X(y);var S=y.x-this.x,M=y.y-this.y;return Math.sqrt(S*S+M*M)},equals:function(y){return y=X(y),y.x===this.x&&y.y===this.y},contains:function(y){return y=X(y),Math.abs(y.x)<=Math.abs(this.x)&&Math.abs(y.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function X(y,S,M){return y instanceof he?y:A(y)?new he(y[0],y[1]):y==null?y:typeof y=="object"&&"x"in y&&"y"in y?new he(y.x,y.y):new he(y,S,M)}function _e(y,S){if(y)for(var M=S?[y,S]:y,O=0,z=M.length;O<z;O++)this.extend(M[O])}_e.prototype={extend:function(y){var S,M;if(!y)return this;if(y instanceof he||typeof y[0]=="number"||"x"in y)S=M=X(y);else if(y=ke(y),S=y.min,M=y.max,!S||!M)return this;return!this.min&&!this.max?(this.min=S.clone(),this.max=M.clone()):(this.min.x=Math.min(S.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(S.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(y){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,y)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(y){var S,M;return typeof y[0]=="number"||y instanceof he?y=X(y):y=ke(y),y instanceof _e?(S=y.min,M=y.max):S=M=y,S.x>=this.min.x&&M.x<=this.max.x&&S.y>=this.min.y&&M.y<=this.max.y},intersects:function(y){y=ke(y);var S=this.min,M=this.max,O=y.min,z=y.max,Z=z.x>=S.x&&O.x<=M.x,se=z.y>=S.y&&O.y<=M.y;return Z&&se},overlaps:function(y){y=ke(y);var S=this.min,M=this.max,O=y.min,z=y.max,Z=z.x>S.x&&O.x<M.x,se=z.y>S.y&&O.y<M.y;return Z&&se},isValid:function(){return!!(this.min&&this.max)},pad:function(y){var S=this.min,M=this.max,O=Math.abs(S.x-M.x)*y,z=Math.abs(S.y-M.y)*y;return ke(X(S.x-O,S.y-z),X(M.x+O,M.y+z))},equals:function(y){return y?(y=ke(y),this.min.equals(y.getTopLeft())&&this.max.equals(y.getBottomRight())):!1}};function ke(y,S){return!y||y instanceof _e?y:new _e(y,S)}function qe(y,S){if(y)for(var M=S?[y,S]:y,O=0,z=M.length;O<z;O++)this.extend(M[O])}qe.prototype={extend:function(y){var S=this._southWest,M=this._northEast,O,z;if(y instanceof Qe)O=y,z=y;else if(y instanceof qe){if(O=y._southWest,z=y._northEast,!O||!z)return this}else return y?this.extend(Xe(y)||Ke(y)):this;return!S&&!M?(this._southWest=new Qe(O.lat,O.lng),this._northEast=new Qe(z.lat,z.lng)):(S.lat=Math.min(O.lat,S.lat),S.lng=Math.min(O.lng,S.lng),M.lat=Math.max(z.lat,M.lat),M.lng=Math.max(z.lng,M.lng)),this},pad:function(y){var S=this._southWest,M=this._northEast,O=Math.abs(S.lat-M.lat)*y,z=Math.abs(S.lng-M.lng)*y;return new qe(new Qe(S.lat-O,S.lng-z),new Qe(M.lat+O,M.lng+z))},getCenter:function(){return new Qe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Qe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Qe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(y){typeof y[0]=="number"||y instanceof Qe||"lat"in y?y=Xe(y):y=Ke(y);var S=this._southWest,M=this._northEast,O,z;return y instanceof qe?(O=y.getSouthWest(),z=y.getNorthEast()):O=z=y,O.lat>=S.lat&&z.lat<=M.lat&&O.lng>=S.lng&&z.lng<=M.lng},intersects:function(y){y=Ke(y);var S=this._southWest,M=this._northEast,O=y.getSouthWest(),z=y.getNorthEast(),Z=z.lat>=S.lat&&O.lat<=M.lat,se=z.lng>=S.lng&&O.lng<=M.lng;return Z&&se},overlaps:function(y){y=Ke(y);var S=this._southWest,M=this._northEast,O=y.getSouthWest(),z=y.getNorthEast(),Z=z.lat>S.lat&&O.lat<M.lat,se=z.lng>S.lng&&O.lng<M.lng;return Z&&se},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(y,S){return y?(y=Ke(y),this._southWest.equals(y.getSouthWest(),S)&&this._northEast.equals(y.getNorthEast(),S)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ke(y,S){return y instanceof qe?y:new qe(y,S)}function Qe(y,S,M){if(isNaN(y)||isNaN(S))throw new Error("Invalid LatLng object: ("+y+", "+S+")");this.lat=+y,this.lng=+S,M!==void 0&&(this.alt=+M)}Qe.prototype={equals:function(y,S){if(!y)return!1;y=Xe(y);var M=Math.max(Math.abs(this.lat-y.lat),Math.abs(this.lng-y.lng));return M<=(S===void 0?1e-9:S)},toString:function(y){return"LatLng("+m(this.lat,y)+", "+m(this.lng,y)+")"},distanceTo:function(y){return qt.distance(this,Xe(y))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(y){var S=180*y/40075017,M=S/Math.cos(Math.PI/180*this.lat);return Ke([this.lat-S,this.lng-M],[this.lat+S,this.lng+M])},clone:function(){return new Qe(this.lat,this.lng,this.alt)}};function Xe(y,S,M){return y instanceof Qe?y:A(y)&&typeof y[0]!="object"?y.length===3?new Qe(y[0],y[1],y[2]):y.length===2?new Qe(y[0],y[1]):null:y==null?y:typeof y=="object"&&"lat"in y?new Qe(y.lat,"lng"in y?y.lng:y.lon,y.alt):S===void 0?null:new Qe(y,S,M)}var di={latLngToPoint:function(y,S){var M=this.projection.project(y),O=this.scale(S);return this.transformation._transform(M,O)},pointToLatLng:function(y,S){var M=this.scale(S),O=this.transformation.untransform(y,M);return this.projection.unproject(O)},project:function(y){return this.projection.project(y)},unproject:function(y){return this.projection.unproject(y)},scale:function(y){return 256*Math.pow(2,y)},zoom:function(y){return Math.log(y/256)/Math.LN2},getProjectedBounds:function(y){if(this.infinite)return null;var S=this.projection.bounds,M=this.scale(y),O=this.transformation.transform(S.min,M),z=this.transformation.transform(S.max,M);return new _e(O,z)},infinite:!1,wrapLatLng:function(y){var S=this.wrapLng?u(y.lng,this.wrapLng,!0):y.lng,M=this.wrapLat?u(y.lat,this.wrapLat,!0):y.lat,O=y.alt;return new Qe(M,S,O)},wrapLatLngBounds:function(y){var S=y.getCenter(),M=this.wrapLatLng(S),O=S.lat-M.lat,z=S.lng-M.lng;if(O===0&&z===0)return y;var Z=y.getSouthWest(),se=y.getNorthEast(),xe=new Qe(Z.lat-O,Z.lng-z),Ae=new Qe(se.lat-O,se.lng-z);return new qe(xe,Ae)}},qt=n({},di,{wrapLng:[-180,180],R:6371e3,distance:function(y,S){var M=Math.PI/180,O=y.lat*M,z=S.lat*M,Z=Math.sin((S.lat-y.lat)*M/2),se=Math.sin((S.lng-y.lng)*M/2),xe=Z*Z+Math.cos(O)*Math.cos(z)*se*se,Ae=2*Math.atan2(Math.sqrt(xe),Math.sqrt(1-xe));return this.R*Ae}}),it=6378137,Vt={R:it,MAX_LATITUDE:85.0511287798,project:function(y){var S=Math.PI/180,M=this.MAX_LATITUDE,O=Math.max(Math.min(M,y.lat),-M),z=Math.sin(O*S);return new he(this.R*y.lng*S,this.R*Math.log((1+z)/(1-z))/2)},unproject:function(y){var S=180/Math.PI;return new Qe((2*Math.atan(Math.exp(y.y/this.R))-Math.PI/2)*S,y.x*S/this.R)},bounds:(function(){var y=it*Math.PI;return new _e([-y,-y],[y,y])})()};function Pt(y,S,M,O){if(A(y)){this._a=y[0],this._b=y[1],this._c=y[2],this._d=y[3];return}this._a=y,this._b=S,this._c=M,this._d=O}Pt.prototype={transform:function(y,S){return this._transform(y.clone(),S)},_transform:function(y,S){return S=S||1,y.x=S*(this._a*y.x+this._b),y.y=S*(this._c*y.y+this._d),y},untransform:function(y,S){return S=S||1,new he((y.x/S-this._b)/this._a,(y.y/S-this._d)/this._c)}};function He(y,S,M,O){return new Pt(y,S,M,O)}var Ri=n({},qt,{code:"EPSG:3857",projection:Vt,transformation:(function(){var y=.5/(Math.PI*Vt.R);return He(y,.5,-y,.5)})()}),ci=n({},Ri,{code:"EPSG:900913"});function Sn(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}function En(y,S){var M="",O,z,Z,se,xe,Ae;for(O=0,Z=y.length;O<Z;O++){for(xe=y[O],z=0,se=xe.length;z<se;z++)Ae=xe[z],M+=(z?"L":"M")+Ae.x+" "+Ae.y;M+=S?Mt.svg?"z":"x":""}return M||"M0 0"}var _r=document.documentElement.style,bl="ActiveXObject"in window,O0=bl&&!document.addEventListener,Cy="msLaunchUri"in navigator&&!("documentMode"in document),oo=ws("webkit"),b1=ws("android"),L0=ws("android 2")||ws("android 3"),f$=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),m$=b1&&ws("Google")&&f$<537&&!("AudioNode"in window),Iu=!!window.opera,Ns=!Cy&&ws("chrome"),wl=ws("gecko")&&!oo&&!Iu&&!bl,Io=!Ns&&ws("safari"),w1=ws("phantom"),_1="OTransition"in _r,y$=navigator.platform.indexOf("Win")===0,nf=bl&&"transition"in _r,Yh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!L0,$c="MozPerspective"in _r,Iy=!window.L_DISABLE_3D&&(nf||Yh||$c)&&!_1&&!w1,_l=typeof orientation<"u"||ws("mobile"),g$=_l&&oo,x1=_l&&Yh,R0=!window.PointerEvent&&window.MSPointerEvent,Ay=!!(window.PointerEvent||R0),Kh="ontouchstart"in window||!!window.TouchEvent,v$=!window.L_NO_TOUCH&&(Kh||Ay),S1=_l&&Iu,E1=_l&&wl,N0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Me=(function(){var y=!1;try{var S=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("testPassiveEventSupport",p,S),window.removeEventListener("testPassiveEventSupport",p,S)}catch{}return y})(),Qi=(function(){return!!document.createElement("canvas").getContext})(),Mc=!!(document.createElementNS&&Sn("svg").createSVGRect),Ao=!!Mc&&(function(){var y=document.createElement("div");return y.innerHTML="<svg/>",(y.firstChild&&y.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Yi=!Mc&&(function(){try{var y=document.createElement("div");y.innerHTML='<v:shape adj="1"/>';var S=y.firstChild;return S.style.behavior="url(#default#VML)",S&&typeof S.adj=="object"}catch{return!1}})(),Hn=navigator.platform.indexOf("Mac")===0,yt=navigator.platform.indexOf("Linux")===0;function ws(y){return navigator.userAgent.toLowerCase().indexOf(y)>=0}var Mt={ie:bl,ielt9:O0,edge:Cy,webkit:oo,android:b1,android23:L0,androidStock:m$,opera:Iu,chrome:Ns,gecko:wl,safari:Io,phantom:w1,opera12:_1,win:y$,ie3d:nf,webkit3d:Yh,gecko3d:$c,any3d:Iy,mobile:_l,mobileWebkit:g$,mobileWebkit3d:x1,msPointer:R0,pointer:Ay,touch:v$,touchNative:Kh,mobileOpera:S1,mobileGecko:E1,retina:N0,passiveEvents:Me,canvas:Qi,svg:Mc,vml:Yi,inlineSvg:Ao,mac:Hn,linux:yt},cn=Mt.msPointer?"MSPointerDown":"pointerdown",Au=Mt.msPointer?"MSPointerMove":"pointermove",Jh=Mt.msPointer?"MSPointerUp":"pointerup",aa=Mt.msPointer?"MSPointerCancel":"pointercancel",xl={touchstart:cn,touchmove:Au,touchend:Jh,touchcancel:aa},Cc={touchstart:M1,touchmove:xr,touchend:xr,touchcancel:xr},kt={},Pu=!1;function un(y,S,M){return S==="touchstart"&&D0(),Cc[S]?(M=Cc[S].bind(this,M),y.addEventListener(xl[S],M,!1),M):(console.warn("wrong event specified:",S),p)}function T1(y,S,M){if(!xl[S]){console.warn("wrong event specified:",S);return}y.removeEventListener(xl[S],M,!1)}function $1(y){kt[y.pointerId]=y}function Sl(y){kt[y.pointerId]&&(kt[y.pointerId]=y)}function ku(y){delete kt[y.pointerId]}function D0(){Pu||(document.addEventListener(cn,$1,!0),document.addEventListener(Au,Sl,!0),document.addEventListener(Jh,ku,!0),document.addEventListener(aa,ku,!0),Pu=!0)}function xr(y,S){if(S.pointerType!==(S.MSPOINTER_TYPE_MOUSE||"mouse")){S.touches=[];for(var M in kt)S.touches.push(kt[M]);S.changedTouches=[S],y(S)}}function M1(y,S){S.MSPOINTER_TYPE_TOUCH&&S.pointerType===S.MSPOINTER_TYPE_TOUCH&&$n(S),xr(y,S)}function C1(y){var S={},M,O;for(O in y)M=y[O],S[O]=M&&M.bind?M.bind(y):M;return y=S,S.type="dblclick",S.detail=2,S.isTrusted=!1,S._simulated=!0,S}var Py=200;function ky(y,S){y.addEventListener("dblclick",S);var M=0,O;function z(Z){if(Z.detail!==1){O=Z.detail;return}if(!(Z.pointerType==="mouse"||Z.sourceCapabilities&&!Z.sourceCapabilities.firesTouchEvents)){var se=w$(Z);if(!(se.some(function(Ae){return Ae instanceof HTMLLabelElement&&Ae.attributes.for})&&!se.some(function(Ae){return Ae instanceof HTMLInputElement||Ae instanceof HTMLSelectElement}))){var xe=Date.now();xe-M<=Py?(O++,O===2&&S(C1(Z))):O=1,M=xe}}}return y.addEventListener("click",z),{dblclick:S,simDblclick:z}}function El(y,S){y.removeEventListener("dblclick",S.dblclick),y.removeEventListener("click",S.simDblclick)}var sf=Ly(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xh=Ly(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Tn=Xh==="webkitTransition"||Xh==="OTransition"?Xh+"End":"transitionend";function Oy(y){return typeof y=="string"?document.getElementById(y):y}function Ou(y,S){var M=y.style[S]||y.currentStyle&&y.currentStyle[S];if((!M||M==="auto")&&document.defaultView){var O=document.defaultView.getComputedStyle(y,null);M=O?O[S]:null}return M==="auto"?null:M}function mi(y,S,M){var O=document.createElement(y);return O.className=S||"",M&&M.appendChild(O),O}function er(y){var S=y.parentNode;S&&S.removeChild(y)}function ie(y){for(;y.firstChild;)y.removeChild(y.firstChild)}function Te(y){var S=y.parentNode;S&&S.lastChild!==y&&S.appendChild(y)}function We(y){var S=y.parentNode;S&&S.firstChild!==y&&S.insertBefore(y,S.firstChild)}function Tt(y,S){if(y.classList!==void 0)return y.classList.contains(S);var M=Pi(y);return M.length>0&&new RegExp("(^|\\s)"+S+"(\\s|$)").test(M)}function lt(y,S){if(y.classList!==void 0)for(var M=w(S),O=0,z=M.length;O<z;O++)y.classList.add(M[O]);else if(!Tt(y,S)){var Z=Pi(y);Fr(y,(Z?Z+" ":"")+S)}}function Ht(y,S){y.classList!==void 0?y.classList.remove(S):Fr(y,v((" "+Pi(y)+" ").replace(" "+S+" "," ")))}function Fr(y,S){y.className.baseVal===void 0?y.className=S:y.className.baseVal=S}function Pi(y){return y.correspondingElement&&(y=y.correspondingElement),y.className.baseVal===void 0?y.className:y.className.baseVal}function Po(y,S){"opacity"in y.style?y.style.opacity=S:"filter"in y.style&&pO(y,S)}function pO(y,S){var M=!1,O="DXImageTransform.Microsoft.Alpha";try{M=y.filters.item(O)}catch{if(S===1)return}S=Math.round(S*100),M?(M.Enabled=S!==100,M.Opacity=S):y.style.filter+=" progid:"+O+"(opacity="+S+")"}function Ly(y){for(var S=document.documentElement.style,M=0;M<y.length;M++)if(y[M]in S)return y[M];return!1}function Da(y,S,M){var O=S||new he(0,0);y.style[sf]=(Mt.ie3d?"translate("+O.x+"px,"+O.y+"px)":"translate3d("+O.x+"px,"+O.y+"px,0)")+(M?" scale("+M+")":"")}function hn(y,S){y._leaflet_pos=S,Mt.any3d?Da(y,S):(y.style.left=S.x+"px",y.style.top=S.y+"px")}function Qh(y){return y._leaflet_pos||new he(0,0)}var Ic,F0,I1;if("onselectstart"in document)Ic=function(){Xt(window,"selectstart",$n)},F0=function(){Ni(window,"selectstart",$n)};else{var Ry=Ly(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ic=function(){if(Ry){var y=document.documentElement.style;I1=y[Ry],y[Ry]="none"}},F0=function(){Ry&&(document.documentElement.style[Ry]=I1,I1=void 0)}}function z0(){Xt(window,"dragstart",$n)}function b$(){Ni(window,"dragstart",$n)}var A1,Ny;function j0(y){for(;y.tabIndex===-1;)y=y.parentNode;y.style&&(Dy(),A1=y,Ny=y.style.outlineStyle,y.style.outlineStyle="none",Xt(window,"keydown",Dy))}function Dy(){A1&&(A1.style.outlineStyle=Ny,A1=void 0,Ny=void 0,Ni(window,"keydown",Dy))}function of(y){do y=y.parentNode;while((!y.offsetWidth||!y.offsetHeight)&&y!==document.body);return y}function ed(y){var S=y.getBoundingClientRect();return{x:S.width/y.offsetWidth||1,y:S.height/y.offsetHeight||1,boundingClientRect:S}}var fO={__proto__:null,TRANSFORM:sf,TRANSITION:Xh,TRANSITION_END:Tn,get:Oy,getStyle:Ou,create:mi,remove:er,empty:ie,toFront:Te,toBack:We,hasClass:Tt,addClass:lt,removeClass:Ht,setClass:Fr,getClass:Pi,setOpacity:Po,testProp:Ly,setTransform:Da,setPosition:hn,getPosition:Qh,get disableTextSelection(){return Ic},get enableTextSelection(){return F0},disableImageDrag:z0,enableImageDrag:b$,preventOutline:j0,restoreOutline:Dy,getSizedParentNode:of,getScale:ed};function Xt(y,S,M,O){if(S&&typeof S=="object")for(var z in S)af(y,z,S[z],M);else{S=w(S);for(var Z=0,se=S.length;Z<se;Z++)af(y,S[Z],M,O)}return this}var Tl="_leaflet_events";function Ni(y,S,M,O){if(arguments.length===1)Ac(y),delete y[Tl];else if(S&&typeof S=="object")for(var z in S)Pc(y,z,S[z],M);else if(S=w(S),arguments.length===2)Ac(y,function(xe){return k(S,xe)!==-1});else for(var Z=0,se=S.length;Z<se;Z++)Pc(y,S[Z],M,O);return this}function Ac(y,S){for(var M in y[Tl]){var O=M.split(/\d/)[0];(!S||S(O))&&Pc(y,O,null,null,M)}}var U0={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function af(y,S,M,O){var z=S+l(M)+(O?"_"+l(O):"");if(y[Tl]&&y[Tl][z])return this;var Z=function(xe){return M.call(O||y,xe||window.event)},se=Z;!Mt.touchNative&&Mt.pointer&&S.indexOf("touch")===0?Z=un(y,S,Z):Mt.touch&&S==="dblclick"?Z=ky(y,Z):"addEventListener"in y?S==="touchstart"||S==="touchmove"||S==="wheel"||S==="mousewheel"?y.addEventListener(U0[S]||S,Z,Mt.passiveEvents?{passive:!1}:!1):S==="mouseenter"||S==="mouseleave"?(Z=function(xe){xe=xe||window.event,cf(y,xe)&&se(xe)},y.addEventListener(U0[S],Z,!1)):y.addEventListener(S,se,!1):y.attachEvent("on"+S,Z),y[Tl]=y[Tl]||{},y[Tl][z]=Z}function Pc(y,S,M,O,z){z=z||S+l(M)+(O?"_"+l(O):"");var Z=y[Tl]&&y[Tl][z];if(!Z)return this;!Mt.touchNative&&Mt.pointer&&S.indexOf("touch")===0?T1(y,S,Z):Mt.touch&&S==="dblclick"?El(y,Z):"removeEventListener"in y?y.removeEventListener(U0[S]||S,Z,!1):y.detachEvent("on"+S,Z),y[Tl][z]=null}function Lu(y){return y.stopPropagation?y.stopPropagation():y.originalEvent?y.originalEvent._stopped=!0:y.cancelBubble=!0,this}function Fy(y){return af(y,"wheel",Lu),this}function zy(y){return Xt(y,"mousedown touchstart dblclick contextmenu",Lu),y._leaflet_disable_click=!0,this}function $n(y){return y.preventDefault?y.preventDefault():y.returnValue=!1,this}function kc(y){return $n(y),Lu(y),this}function w$(y){if(y.composedPath)return y.composedPath();for(var S=[],M=y.target;M;)S.push(M),M=M.parentNode;return S}function ao(y,S){if(!S)return new he(y.clientX,y.clientY);var M=ed(S),O=M.boundingClientRect;return new he((y.clientX-O.left)/M.x-S.clientLeft,(y.clientY-O.top)/M.y-S.clientTop)}var lf=Mt.linux&&Mt.chrome?window.devicePixelRatio:Mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function B0(y){return Mt.edge?y.wheelDeltaY/2:y.deltaY&&y.deltaMode===0?-y.deltaY/lf:y.deltaY&&y.deltaMode===1?-y.deltaY*20:y.deltaY&&y.deltaMode===2?-y.deltaY*60:y.deltaX||y.deltaZ?0:y.wheelDelta?(y.wheelDeltaY||y.wheelDelta)/2:y.detail&&Math.abs(y.detail)<32765?-y.detail*20:y.detail?y.detail/-32765*60:0}function cf(y,S){var M=S.relatedTarget;if(!M)return!0;try{for(;M&&M!==y;)M=M.parentNode}catch{return!1}return M!==y}var qU={__proto__:null,on:Xt,off:Ni,stopPropagation:Lu,disableScrollPropagation:Fy,disableClickPropagation:zy,preventDefault:$n,stop:kc,getPropagationPath:w$,getMousePosition:ao,getWheelDelta:B0,isExternalTarget:cf,addListener:Xt,removeListener:Ni},P1=ue.extend({run:function(y,S,M,O){this.stop(),this._el=y,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(O||.5,.2),this._startPos=Qh(y),this._offset=S.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(y){var S=+new Date-this._startTime,M=this._duration*1e3;S<M?this._runFrame(this._easeOut(S/M),y):(this._runFrame(1),this._complete())},_runFrame:function(y,S){var M=this._startPos.add(this._offset.multiplyBy(y));S&&M._round(),hn(this._el,M),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(y){return 1-Math.pow(1-y,this._easeOutPower)}}),yi=ue.extend({options:{crs:Ri,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(y,S){S=_(this,S),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(y),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),S.maxBounds&&this.setMaxBounds(S.maxBounds),S.zoom!==void 0&&(this._zoom=this._limitZoom(S.zoom)),S.center&&S.zoom!==void 0&&this.setView(Xe(S.center),S.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xh&&Mt.any3d&&!Mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,Tn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(y,S,M){if(S=S===void 0?this._zoom:this._limitZoom(S),y=this._limitCenter(Xe(y),S,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=n({animate:M.animate},M.zoom),M.pan=n({animate:M.animate,duration:M.duration},M.pan));var O=this._zoom!==S?this._tryAnimatedZoom&&this._tryAnimatedZoom(y,S,M.zoom):this._tryAnimatedPan(y,M.pan);if(O)return clearTimeout(this._sizeTimer),this}return this._resetView(y,S,M.pan&&M.pan.noMoveStart),this},setZoom:function(y,S){return this._loaded?this.setView(this.getCenter(),y,{zoom:S}):(this._zoom=y,this)},zoomIn:function(y,S){return y=y||(Mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+y,S)},zoomOut:function(y,S){return y=y||(Mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-y,S)},setZoomAround:function(y,S,M){var O=this.getZoomScale(S),z=this.getSize().divideBy(2),Z=y instanceof he?y:this.latLngToContainerPoint(y),se=Z.subtract(z).multiplyBy(1-1/O),xe=this.containerPointToLatLng(z.add(se));return this.setView(xe,S,{zoom:M})},_getBoundsCenterZoom:function(y,S){S=S||{},y=y.getBounds?y.getBounds():Ke(y);var M=X(S.paddingTopLeft||S.padding||[0,0]),O=X(S.paddingBottomRight||S.padding||[0,0]),z=this.getBoundsZoom(y,!1,M.add(O));if(z=typeof S.maxZoom=="number"?Math.min(S.maxZoom,z):z,z===1/0)return{center:y.getCenter(),zoom:z};var Z=O.subtract(M).divideBy(2),se=this.project(y.getSouthWest(),z),xe=this.project(y.getNorthEast(),z),Ae=this.unproject(se.add(xe).divideBy(2).add(Z),z);return{center:Ae,zoom:z}},fitBounds:function(y,S){if(y=Ke(y),!y.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(y,S);return this.setView(M.center,M.zoom,S)},fitWorld:function(y){return this.fitBounds([[-90,-180],[90,180]],y)},panTo:function(y,S){return this.setView(y,this._zoom,{pan:S})},panBy:function(y,S){if(y=X(y).round(),S=S||{},!y.x&&!y.y)return this.fire("moveend");if(S.animate!==!0&&!this.getSize().contains(y))return this._resetView(this.unproject(this.project(this.getCenter()).add(y)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new P1,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),S.noMoveStart||this.fire("movestart"),S.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(y).round();this._panAnim.run(this._mapPane,M,S.duration||.25,S.easeLinearity)}else this._rawPanBy(y),this.fire("move").fire("moveend");return this},flyTo:function(y,S,M){if(M=M||{},M.animate===!1||!Mt.any3d)return this.setView(y,S,M);this._stop();var O=this.project(this.getCenter()),z=this.project(y),Z=this.getSize(),se=this._zoom;y=Xe(y),S=S===void 0?se:S;var xe=Math.max(Z.x,Z.y),Ae=xe*this.getZoomScale(se,S),Ve=z.distanceTo(O)||1,ct=1.42,xt=ct*ct;function $t(Yr){var Rc=Yr?-1:1,Du=Yr?Ae:xe,sd=Ae*Ae-xe*xe+Rc*xt*xt*Ve*Ve,Fu=2*Du*xt*Ve,tb=sd/Fu,G1=Math.sqrt(tb*tb+1)-tb,ib=G1<1e-9?-18:Math.log(G1);return ib}function Jt(Yr){return(Math.exp(Yr)-Math.exp(-Yr))/2}function Sr(Yr){return(Math.exp(Yr)+Math.exp(-Yr))/2}function dn(Yr){return Jt(Yr)/Sr(Yr)}var Fs=$t(0);function Fa(Yr){return xe*(Sr(Fs)/Sr(Fs+ct*Yr))}function OO(Yr){return xe*(Sr(Fs)*dn(Fs+ct*Yr)-Jt(Fs))/xt}function LO(Yr){return 1-Math.pow(1-Yr,1.5)}var eb=Date.now(),Jy=($t(1)-Fs)/ct,RO=M.duration?1e3*M.duration:1e3*Jy*.8;function Xy(){var Yr=(Date.now()-eb)/RO,Rc=LO(Yr)*Jy;Yr<=1?(this._flyToFrame=Q(Xy,this),this._move(this.unproject(O.add(z.subtract(O).multiplyBy(OO(Rc)/Ve)),se),this.getScaleZoom(xe/Fa(Rc),se),{flyTo:!0})):this._move(y,S)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),Xy.call(this),this},flyToBounds:function(y,S){var M=this._getBoundsCenterZoom(y,S);return this.flyTo(M.center,M.zoom,S)},setMaxBounds:function(y){return y=Ke(y),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),y.isValid()?(this.options.maxBounds=y,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(y){var S=this.options.minZoom;return this.options.minZoom=y,this._loaded&&S!==y&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(y):this},setMaxZoom:function(y){var S=this.options.maxZoom;return this.options.maxZoom=y,this._loaded&&S!==y&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(y):this},panInsideBounds:function(y,S){this._enforcingBounds=!0;var M=this.getCenter(),O=this._limitCenter(M,this._zoom,Ke(y));return M.equals(O)||this.panTo(O,S),this._enforcingBounds=!1,this},panInside:function(y,S){S=S||{};var M=X(S.paddingTopLeft||S.padding||[0,0]),O=X(S.paddingBottomRight||S.padding||[0,0]),z=this.project(this.getCenter()),Z=this.project(y),se=this.getPixelBounds(),xe=ke([se.min.add(M),se.max.subtract(O)]),Ae=xe.getSize();if(!xe.contains(Z)){this._enforcingBounds=!0;var Ve=Z.subtract(xe.getCenter()),ct=xe.extend(Z).getSize().subtract(Ae);z.x+=Ve.x<0?-ct.x:ct.x,z.y+=Ve.y<0?-ct.y:ct.y,this.panTo(this.unproject(z),S),this._enforcingBounds=!1}return this},invalidateSize:function(y){if(!this._loaded)return this;y=n({animate:!1,pan:!0},y===!0?{animate:!0}:y);var S=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),O=S.divideBy(2).round(),z=M.divideBy(2).round(),Z=O.subtract(z);return!Z.x&&!Z.y?this:(y.animate&&y.pan?this.panBy(Z):(y.pan&&this._rawPanBy(Z),this.fire("move"),y.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:S,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(y){if(y=this._locateOptions=n({timeout:1e4,watch:!1},y),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var S=o(this._handleGeolocationResponse,this),M=o(this._handleGeolocationError,this);return y.watch?this._locationWatchId=navigator.geolocation.watchPosition(S,M,y):navigator.geolocation.getCurrentPosition(S,M,y),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(y){if(this._container._leaflet_id){var S=y.code,M=y.message||(S===1?"permission denied":S===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:S,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(y){if(this._container._leaflet_id){var S=y.coords.latitude,M=y.coords.longitude,O=new Qe(S,M),z=O.toBounds(y.coords.accuracy*2),Z=this._locateOptions;if(Z.setView){var se=this.getBoundsZoom(z);this.setView(O,Z.maxZoom?Math.min(se,Z.maxZoom):se)}var xe={latlng:O,bounds:z,timestamp:y.timestamp};for(var Ae in y.coords)typeof y.coords[Ae]=="number"&&(xe[Ae]=y.coords[Ae]);this.fire("locationfound",xe)}},addHandler:function(y,S){if(!S)return this;var M=this[y]=new S(this);return this._handlers.push(M),this.options[y]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),er(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var y;for(y in this._layers)this._layers[y].remove();for(y in this._panes)er(this._panes[y]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(y,S){var M="leaflet-pane"+(y?" leaflet-"+y.replace("Pane","")+"-pane":""),O=mi("div",M,S||this._mapPane);return y&&(this._panes[y]=O),O},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var y=this.getPixelBounds(),S=this.unproject(y.getBottomLeft()),M=this.unproject(y.getTopRight());return new qe(S,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(y,S,M){y=Ke(y),M=X(M||[0,0]);var O=this.getZoom()||0,z=this.getMinZoom(),Z=this.getMaxZoom(),se=y.getNorthWest(),xe=y.getSouthEast(),Ae=this.getSize().subtract(M),Ve=ke(this.project(xe,O),this.project(se,O)).getSize(),ct=Mt.any3d?this.options.zoomSnap:1,xt=Ae.x/Ve.x,$t=Ae.y/Ve.y,Jt=S?Math.max(xt,$t):Math.min(xt,$t);return O=this.getScaleZoom(Jt,O),ct&&(O=Math.round(O/(ct/100))*(ct/100),O=S?Math.ceil(O/ct)*ct:Math.floor(O/ct)*ct),Math.max(z,Math.min(Z,O))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new he(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(y,S){var M=this._getTopLeftPoint(y,S);return new _e(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(y){return this.options.crs.getProjectedBounds(y===void 0?this.getZoom():y)},getPane:function(y){return typeof y=="string"?this._panes[y]:y},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(y,S){var M=this.options.crs;return S=S===void 0?this._zoom:S,M.scale(y)/M.scale(S)},getScaleZoom:function(y,S){var M=this.options.crs;S=S===void 0?this._zoom:S;var O=M.zoom(y*M.scale(S));return isNaN(O)?1/0:O},project:function(y,S){return S=S===void 0?this._zoom:S,this.options.crs.latLngToPoint(Xe(y),S)},unproject:function(y,S){return S=S===void 0?this._zoom:S,this.options.crs.pointToLatLng(X(y),S)},layerPointToLatLng:function(y){var S=X(y).add(this.getPixelOrigin());return this.unproject(S)},latLngToLayerPoint:function(y){var S=this.project(Xe(y))._round();return S._subtract(this.getPixelOrigin())},wrapLatLng:function(y){return this.options.crs.wrapLatLng(Xe(y))},wrapLatLngBounds:function(y){return this.options.crs.wrapLatLngBounds(Ke(y))},distance:function(y,S){return this.options.crs.distance(Xe(y),Xe(S))},containerPointToLayerPoint:function(y){return X(y).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(y){return X(y).add(this._getMapPanePos())},containerPointToLatLng:function(y){var S=this.containerPointToLayerPoint(X(y));return this.layerPointToLatLng(S)},latLngToContainerPoint:function(y){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Xe(y)))},mouseEventToContainerPoint:function(y){return ao(y,this._container)},mouseEventToLayerPoint:function(y){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(y))},mouseEventToLatLng:function(y){return this.layerPointToLatLng(this.mouseEventToLayerPoint(y))},_initContainer:function(y){var S=this._container=Oy(y);if(S){if(S._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xt(S,"scroll",this._onScroll,this),this._containerId=l(S)},_initLayout:function(){var y=this._container;this._fadeAnimated=this.options.fadeAnimation&&Mt.any3d,lt(y,"leaflet-container"+(Mt.touch?" leaflet-touch":"")+(Mt.retina?" leaflet-retina":"")+(Mt.ielt9?" leaflet-oldie":"")+(Mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var S=Ou(y,"position");S!=="absolute"&&S!=="relative"&&S!=="fixed"&&S!=="sticky"&&(y.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var y=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),hn(this._mapPane,new he(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(y.markerPane,"leaflet-zoom-hide"),lt(y.shadowPane,"leaflet-zoom-hide"))},_resetView:function(y,S,M){hn(this._mapPane,new he(0,0));var O=!this._loaded;this._loaded=!0,S=this._limitZoom(S),this.fire("viewprereset");var z=this._zoom!==S;this._moveStart(z,M)._move(y,S)._moveEnd(z),this.fire("viewreset"),O&&this.fire("load")},_moveStart:function(y,S){return y&&this.fire("zoomstart"),S||this.fire("movestart"),this},_move:function(y,S,M,O){S===void 0&&(S=this._zoom);var z=this._zoom!==S;return this._zoom=S,this._lastCenter=y,this._pixelOrigin=this._getNewPixelOrigin(y),O?M&&M.pinch&&this.fire("zoom",M):((z||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(y){return y&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(y){hn(this._mapPane,this._getMapPanePos().subtract(y))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(y){this._targets={},this._targets[l(this._container)]=this;var S=y?Ni:Xt;S(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&S(window,"resize",this._onResize,this),Mt.any3d&&this.options.transform3DLimit&&(y?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var y=this._getMapPanePos();Math.max(Math.abs(y.x),Math.abs(y.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(y,S){for(var M=[],O,z=S==="mouseout"||S==="mouseover",Z=y.target||y.srcElement,se=!1;Z;){if(O=this._targets[l(Z)],O&&(S==="click"||S==="preclick")&&this._draggableMoved(O)){se=!0;break}if(O&&O.listens(S,!0)&&(z&&!cf(Z,y)||(M.push(O),z))||Z===this._container)break;Z=Z.parentNode}return!M.length&&!se&&!z&&this.listens(S,!0)&&(M=[this]),M},_isClickDisabled:function(y){for(;y&&y!==this._container;){if(y._leaflet_disable_click)return!0;y=y.parentNode}},_handleDOMEvent:function(y){var S=y.target||y.srcElement;if(!(!this._loaded||S._leaflet_disable_events||y.type==="click"&&this._isClickDisabled(S))){var M=y.type;M==="mousedown"&&j0(S),this._fireDOMEvent(y,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(y,S,M){if(y.type==="click"){var O=n({},y);O.type="preclick",this._fireDOMEvent(O,O.type,M)}var z=this._findEventTargets(y,S);if(M){for(var Z=[],se=0;se<M.length;se++)M[se].listens(S,!0)&&Z.push(M[se]);z=Z.concat(z)}if(z.length){S==="contextmenu"&&$n(y);var xe=z[0],Ae={originalEvent:y};if(y.type!=="keypress"&&y.type!=="keydown"&&y.type!=="keyup"){var Ve=xe.getLatLng&&(!xe._radius||xe._radius<=10);Ae.containerPoint=Ve?this.latLngToContainerPoint(xe.getLatLng()):this.mouseEventToContainerPoint(y),Ae.layerPoint=this.containerPointToLayerPoint(Ae.containerPoint),Ae.latlng=Ve?xe.getLatLng():this.layerPointToLatLng(Ae.layerPoint)}for(se=0;se<z.length;se++)if(z[se].fire(S,Ae,!0),Ae.originalEvent._stopped||z[se].options.bubblingMouseEvents===!1&&k(this._mouseEvents,S)!==-1)return}},_draggableMoved:function(y){return y=y.dragging&&y.dragging.enabled()?y:this,y.dragging&&y.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var y=0,S=this._handlers.length;y<S;y++)this._handlers[y].disable()},whenReady:function(y,S){return this._loaded?y.call(S||this,{target:this}):this.on("load",y,S),this},_getMapPanePos:function(){return Qh(this._mapPane)||new he(0,0)},_moved:function(){var y=this._getMapPanePos();return y&&!y.equals([0,0])},_getTopLeftPoint:function(y,S){var M=y&&S!==void 0?this._getNewPixelOrigin(y,S):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(y,S){var M=this.getSize()._divideBy(2);return this.project(y,S)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(y,S,M){var O=this._getNewPixelOrigin(M,S);return this.project(y,S)._subtract(O)},_latLngBoundsToNewLayerBounds:function(y,S,M){var O=this._getNewPixelOrigin(M,S);return ke([this.project(y.getSouthWest(),S)._subtract(O),this.project(y.getNorthWest(),S)._subtract(O),this.project(y.getSouthEast(),S)._subtract(O),this.project(y.getNorthEast(),S)._subtract(O)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(y){return this.latLngToLayerPoint(y).subtract(this._getCenterLayerPoint())},_limitCenter:function(y,S,M){if(!M)return y;var O=this.project(y,S),z=this.getSize().divideBy(2),Z=new _e(O.subtract(z),O.add(z)),se=this._getBoundsOffset(Z,M,S);return Math.abs(se.x)<=1&&Math.abs(se.y)<=1?y:this.unproject(O.add(se),S)},_limitOffset:function(y,S){if(!S)return y;var M=this.getPixelBounds(),O=new _e(M.min.add(y),M.max.add(y));return y.add(this._getBoundsOffset(O,S))},_getBoundsOffset:function(y,S,M){var O=ke(this.project(S.getNorthEast(),M),this.project(S.getSouthWest(),M)),z=O.min.subtract(y.min),Z=O.max.subtract(y.max),se=this._rebound(z.x,-Z.x),xe=this._rebound(z.y,-Z.y);return new he(se,xe)},_rebound:function(y,S){return y+S>0?Math.round(y-S)/2:Math.max(0,Math.ceil(y))-Math.max(0,Math.floor(S))},_limitZoom:function(y){var S=this.getMinZoom(),M=this.getMaxZoom(),O=Mt.any3d?this.options.zoomSnap:1;return O&&(y=Math.round(y/O)*O),Math.max(S,Math.min(M,y))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(y,S){var M=this._getCenterOffset(y)._trunc();return(S&&S.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,S),!0)},_createAnimProxy:function(){var y=this._proxy=mi("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(y),this.on("zoomanim",function(S){var M=sf,O=this._proxy.style[M];Da(this._proxy,this.project(S.center,S.zoom),this.getZoomScale(S.zoom,1)),O===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){er(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var y=this.getCenter(),S=this.getZoom();Da(this._proxy,this.project(y,S),this.getZoomScale(S,1))},_catchTransitionEnd:function(y){this._animatingZoom&&y.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(y,S,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(S-this._zoom)>this.options.zoomAnimationThreshold)return!1;var O=this.getZoomScale(S),z=this._getCenterOffset(y)._divideBy(1-1/O);return M.animate!==!0&&!this.getSize().contains(z)?!1:(Q(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(y,S,!0)},this),!0)},_animateZoom:function(y,S,M,O){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=y,this._animateToZoom=S,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:y,zoom:S,noUpdate:O}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function V0(y,S){return new yi(y,S)}var ko=ee.extend({options:{position:"topright"},initialize:function(y){_(this,y)},getPosition:function(){return this.options.position},setPosition:function(y){var S=this._map;return S&&S.removeControl(this),this.options.position=y,S&&S.addControl(this),this},getContainer:function(){return this._container},addTo:function(y){this.remove(),this._map=y;var S=this._container=this.onAdd(y),M=this.getPosition(),O=y._controlCorners[M];return lt(S,"leaflet-control"),M.indexOf("bottom")!==-1?O.insertBefore(S,O.firstChild):O.appendChild(S),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(er(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(y){this._map&&y&&y.screenX>0&&y.screenY>0&&this._map.getContainer().focus()}}),jy=function(y){return new ko(y)};yi.include({addControl:function(y){return y.addTo(this),this},removeControl:function(y){return y.remove(),this},_initControlPos:function(){var y=this._controlCorners={},S="leaflet-",M=this._controlContainer=mi("div",S+"control-container",this._container);function O(z,Z){var se=S+z+" "+S+Z;y[z+Z]=mi("div",se,M)}O("top","left"),O("top","right"),O("bottom","left"),O("bottom","right")},_clearControlPos:function(){for(var y in this._controlCorners)er(this._controlCorners[y]);er(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mO=ko.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(y,S,M,O){return M<O?-1:O<M?1:0}},initialize:function(y,S,M){_(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var O in y)this._addLayer(y[O],O);for(O in S)this._addLayer(S[O],O,!0)},onAdd:function(y){this._initLayout(),this._update(),this._map=y,y.on("zoomend",this._checkDisabledLayers,this);for(var S=0;S<this._layers.length;S++)this._layers[S].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(y){return ko.prototype.addTo.call(this,y),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(y,S){return this._addLayer(y,S),this._map?this._update():this},addOverlay:function(y,S){return this._addLayer(y,S,!0),this._map?this._update():this},removeLayer:function(y){y.off("add remove",this._onLayerChange,this);var S=this._getLayer(l(y));return S&&this._layers.splice(this._layers.indexOf(S),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var y=this._map.getSize().y-(this._container.offsetTop+50);return y<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=y+"px"):Ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var y="leaflet-control-layers",S=this._container=mi("div",y),M=this.options.collapsed;S.setAttribute("aria-haspopup",!0),zy(S),Fy(S);var O=this._section=mi("section",y+"-list");M&&(this._map.on("click",this.collapse,this),Xt(S,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var z=this._layersLink=mi("a",y+"-toggle",S);z.href="#",z.title="Layers",z.setAttribute("role","button"),Xt(z,{keydown:function(Z){Z.keyCode===13&&this._expandSafely()},click:function(Z){$n(Z),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=mi("div",y+"-base",O),this._separator=mi("div",y+"-separator",O),this._overlaysList=mi("div",y+"-overlays",O),S.appendChild(O)},_getLayer:function(y){for(var S=0;S<this._layers.length;S++)if(this._layers[S]&&l(this._layers[S].layer)===y)return this._layers[S]},_addLayer:function(y,S,M){this._map&&y.on("add remove",this._onLayerChange,this),this._layers.push({layer:y,name:S,overlay:M}),this.options.sortLayers&&this._layers.sort(o(function(O,z){return this.options.sortFunction(O.layer,z.layer,O.name,z.name)},this)),this.options.autoZIndex&&y.setZIndex&&(this._lastZIndex++,y.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ie(this._baseLayersList),ie(this._overlaysList),this._layerControlInputs=[];var y,S,M,O,z=0;for(M=0;M<this._layers.length;M++)O=this._layers[M],this._addItem(O),S=S||O.overlay,y=y||!O.overlay,z+=O.overlay?0:1;return this.options.hideSingleBase&&(y=y&&z>1,this._baseLayersList.style.display=y?"":"none"),this._separator.style.display=S&&y?"":"none",this},_onLayerChange:function(y){this._handlingClick||this._update();var S=this._getLayer(l(y.target)),M=S.overlay?y.type==="add"?"overlayadd":"overlayremove":y.type==="add"?"baselayerchange":null;M&&this._map.fire(M,S)},_createRadioElement:function(y,S){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+y+'"'+(S?' checked="checked"':"")+"/>",O=document.createElement("div");return O.innerHTML=M,O.firstChild},_addItem:function(y){var S=document.createElement("label"),M=this._map.hasLayer(y.layer),O;y.overlay?(O=document.createElement("input"),O.type="checkbox",O.className="leaflet-control-layers-selector",O.defaultChecked=M):O=this._createRadioElement("leaflet-base-layers_"+l(this),M),this._layerControlInputs.push(O),O.layerId=l(y.layer),Xt(O,"click",this._onInputClick,this);var z=document.createElement("span");z.innerHTML=" "+y.name;var Z=document.createElement("span");S.appendChild(Z),Z.appendChild(O),Z.appendChild(z);var se=y.overlay?this._overlaysList:this._baseLayersList;return se.appendChild(S),this._checkDisabledLayers(),S},_onInputClick:function(){if(!this._preventClick){var y=this._layerControlInputs,S,M,O=[],z=[];this._handlingClick=!0;for(var Z=y.length-1;Z>=0;Z--)S=y[Z],M=this._getLayer(S.layerId).layer,S.checked?O.push(M):S.checked||z.push(M);for(Z=0;Z<z.length;Z++)this._map.hasLayer(z[Z])&&this._map.removeLayer(z[Z]);for(Z=0;Z<O.length;Z++)this._map.hasLayer(O[Z])||this._map.addLayer(O[Z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var y=this._layerControlInputs,S,M,O=this._map.getZoom(),z=y.length-1;z>=0;z--)S=y[z],M=this._getLayer(S.layerId).layer,S.disabled=M.options.minZoom!==void 0&&O<M.options.minZoom||M.options.maxZoom!==void 0&&O>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var y=this._section;this._preventClick=!0,Xt(y,"click",$n),this.expand();var S=this;setTimeout(function(){Ni(y,"click",$n),S._preventClick=!1})}}),HU=function(y,S,M){return new mO(y,S,M)},_$=ko.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(y){var S="leaflet-control-zoom",M=mi("div",S+" leaflet-bar"),O=this.options;return this._zoomInButton=this._createButton(O.zoomInText,O.zoomInTitle,S+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(O.zoomOutText,O.zoomOutTitle,S+"-out",M,this._zoomOut),this._updateDisabled(),y.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(y){y.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(y){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(y.shiftKey?3:1))},_zoomOut:function(y){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(y.shiftKey?3:1))},_createButton:function(y,S,M,O,z){var Z=mi("a",M,O);return Z.innerHTML=y,Z.href="#",Z.title=S,Z.setAttribute("role","button"),Z.setAttribute("aria-label",S),zy(Z),Xt(Z,"click",kc),Xt(Z,"click",z,this),Xt(Z,"click",this._refocusOnMap,this),Z},_updateDisabled:function(){var y=this._map,S="leaflet-disabled";Ht(this._zoomInButton,S),Ht(this._zoomOutButton,S),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||y._zoom===y.getMinZoom())&&(lt(this._zoomOutButton,S),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||y._zoom===y.getMaxZoom())&&(lt(this._zoomInButton,S),this._zoomInButton.setAttribute("aria-disabled","true"))}});yi.mergeOptions({zoomControl:!0}),yi.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _$,this.addControl(this.zoomControl))});var x$=function(y){return new _$(y)},yO=ko.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(y){var S="leaflet-control-scale",M=mi("div",S),O=this.options;return this._addScales(O,S+"-line",M),y.on(O.updateWhenIdle?"moveend":"move",this._update,this),y.whenReady(this._update,this),M},onRemove:function(y){y.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(y,S,M){y.metric&&(this._mScale=mi("div",S,M)),y.imperial&&(this._iScale=mi("div",S,M))},_update:function(){var y=this._map,S=y.getSize().y/2,M=y.distance(y.containerPointToLatLng([0,S]),y.containerPointToLatLng([this.options.maxWidth,S]));this._updateScales(M)},_updateScales:function(y){this.options.metric&&y&&this._updateMetric(y),this.options.imperial&&y&&this._updateImperial(y)},_updateMetric:function(y){var S=this._getRoundNum(y),M=S<1e3?S+" m":S/1e3+" km";this._updateScale(this._mScale,M,S/y)},_updateImperial:function(y){var S=y*3.2808399,M,O,z;S>5280?(M=S/5280,O=this._getRoundNum(M),this._updateScale(this._iScale,O+" mi",O/M)):(z=this._getRoundNum(S),this._updateScale(this._iScale,z+" ft",z/S))},_updateScale:function(y,S,M){y.style.width=Math.round(this.options.maxWidth*M)+"px",y.innerHTML=S},_getRoundNum:function(y){var S=Math.pow(10,(Math.floor(y)+"").length-1),M=y/S;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,S*M}}),WU=function(y){return new yO(y)},ZU='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',S$=ko.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Mt.inlineSvg?ZU+" ":"")+"Leaflet</a>"},initialize:function(y){_(this,y),this._attributions={}},onAdd:function(y){y.attributionControl=this,this._container=mi("div","leaflet-control-attribution"),zy(this._container);for(var S in y._layers)y._layers[S].getAttribution&&this.addAttribution(y._layers[S].getAttribution());return this._update(),y.on("layeradd",this._addAttribution,this),this._container},onRemove:function(y){y.off("layeradd",this._addAttribution,this)},_addAttribution:function(y){y.layer.getAttribution&&(this.addAttribution(y.layer.getAttribution()),y.layer.once("remove",function(){this.removeAttribution(y.layer.getAttribution())},this))},setPrefix:function(y){return this.options.prefix=y,this._update(),this},addAttribution:function(y){return y?(this._attributions[y]||(this._attributions[y]=0),this._attributions[y]++,this._update(),this):this},removeAttribution:function(y){return y?(this._attributions[y]&&(this._attributions[y]--,this._update()),this):this},_update:function(){if(this._map){var y=[];for(var S in this._attributions)this._attributions[S]&&y.push(S);var M=[];this.options.prefix&&M.push(this.options.prefix),y.length&&M.push(y.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});yi.mergeOptions({attributionControl:!0}),yi.addInitHook(function(){this.options.attributionControl&&new S$().addTo(this)});var YU=function(y){return new S$(y)};ko.Layers=mO,ko.Zoom=_$,ko.Scale=yO,ko.Attribution=S$,jy.layers=HU,jy.zoom=x$,jy.scale=WU,jy.attribution=YU;var $l=ee.extend({initialize:function(y){this._map=y},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$l.addTo=function(y,S){return y.addHandler(S,this),this};var KU={Events:ne},gO=Mt.touch?"touchstart mousedown":"mousedown",td=ue.extend({options:{clickTolerance:3},initialize:function(y,S,M,O){_(this,O),this._element=y,this._dragStartTarget=S||y,this._preventOutline=M},enable:function(){this._enabled||(Xt(this._dragStartTarget,gO,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(td._dragging===this&&this.finishDrag(!0),Ni(this._dragStartTarget,gO,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(y){if(this._enabled&&(this._moved=!1,!Tt(this._element,"leaflet-zoom-anim"))){if(y.touches&&y.touches.length!==1){td._dragging===this&&this.finishDrag();return}if(!(td._dragging||y.shiftKey||y.which!==1&&y.button!==1&&!y.touches)&&(td._dragging=this,this._preventOutline&&j0(this._element),z0(),Ic(),!this._moving)){this.fire("down");var S=y.touches?y.touches[0]:y,M=of(this._element);this._startPoint=new he(S.clientX,S.clientY),this._startPos=Qh(this._element),this._parentScale=ed(M);var O=y.type==="mousedown";Xt(document,O?"mousemove":"touchmove",this._onMove,this),Xt(document,O?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(y){if(this._enabled){if(y.touches&&y.touches.length>1){this._moved=!0;return}var S=y.touches&&y.touches.length===1?y.touches[0]:y,M=new he(S.clientX,S.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,$n(y),this._moved||(this.fire("dragstart"),this._moved=!0,lt(document.body,"leaflet-dragging"),this._lastTarget=y.target||y.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=y,this._updatePosition())}},_updatePosition:function(){var y={originalEvent:this._lastEvent};this.fire("predrag",y),hn(this._element,this._newPos),this.fire("drag",y)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(y){Ht(document.body,"leaflet-dragging"),this._lastTarget&&(Ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ni(document,"mousemove touchmove",this._onMove,this),Ni(document,"mouseup touchend touchcancel",this._onUp,this),b$(),F0();var S=this._moved&&this._moving;this._moving=!1,td._dragging=!1,S&&this.fire("dragend",{noInertia:y,distance:this._newPos.distanceTo(this._startPos)})}});function vO(y,S,M){var O,z=[1,4,2,8],Z,se,xe,Ae,Ve,ct,xt,$t;for(Z=0,ct=y.length;Z<ct;Z++)y[Z]._code=uf(y[Z],S);for(xe=0;xe<4;xe++){for(xt=z[xe],O=[],Z=0,ct=y.length,se=ct-1;Z<ct;se=Z++)Ae=y[Z],Ve=y[se],Ae._code&xt?Ve._code&xt||($t=O1(Ve,Ae,xt,S,M),$t._code=uf($t,S),O.push($t)):(Ve._code&xt&&($t=O1(Ve,Ae,xt,S,M),$t._code=uf($t,S),O.push($t)),O.push(Ae));y=O}return y}function k1(y,S){var M,O,z,Z,se,xe,Ae,Ve,ct;if(!y||y.length===0)throw new Error("latlngs not passed");Ds(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var xt=Xe([0,0]),$t=Ke(y),Jt=$t.getNorthWest().distanceTo($t.getSouthWest())*$t.getNorthEast().distanceTo($t.getNorthWest());Jt<1700&&(xt=E$(y));var Sr=y.length,dn=[];for(M=0;M<Sr;M++){var Fs=Xe(y[M]);dn.push(S.project(Xe([Fs.lat-xt.lat,Fs.lng-xt.lng])))}for(xe=Ae=Ve=0,M=0,O=Sr-1;M<Sr;O=M++)z=dn[M],Z=dn[O],se=z.y*Z.x-Z.y*z.x,Ae+=(z.x+Z.x)*se,Ve+=(z.y+Z.y)*se,xe+=se*3;xe===0?ct=dn[0]:ct=[Ae/xe,Ve/xe];var Fa=S.unproject(X(ct));return Xe([Fa.lat+xt.lat,Fa.lng+xt.lng])}function E$(y){for(var S=0,M=0,O=0,z=0;z<y.length;z++){var Z=Xe(y[z]);S+=Z.lat,M+=Z.lng,O++}return Xe([S/O,M/O])}var JU={__proto__:null,clipPolygon:vO,polygonCenter:k1,centroid:E$};function bO(y,S){if(!S||!y.length)return y.slice();var M=S*S;return y=e6(y,M),y=QU(y,M),y}function T$(y,S,M){return Math.sqrt(hf(y,S,M,!0))}function XU(y,S,M){return hf(y,S,M)}function QU(y,S){var M=y.length,O=typeof Uint8Array<"u"?Uint8Array:Array,z=new O(M);z[0]=z[M-1]=1,$$(y,z,S,0,M-1);var Z,se=[];for(Z=0;Z<M;Z++)z[Z]&&se.push(y[Z]);return se}function $$(y,S,M,O,z){var Z=0,se,xe,Ae;for(xe=O+1;xe<=z-1;xe++)Ae=hf(y[xe],y[O],y[z],!0),Ae>Z&&(se=xe,Z=Ae);Z>M&&(S[se]=1,$$(y,S,M,O,se),$$(y,S,M,se,z))}function e6(y,S){for(var M=[y[0]],O=1,z=0,Z=y.length;O<Z;O++)t6(y[O],y[z])>S&&(M.push(y[O]),z=O);return z<Z-1&&M.push(y[Z-1]),M}var wO;function _O(y,S,M,O,z){var Z=O?wO:uf(y,M),se=uf(S,M),xe,Ae,Ve;for(wO=se;;){if(!(Z|se))return[y,S];if(Z&se)return!1;xe=Z||se,Ae=O1(y,S,xe,M,z),Ve=uf(Ae,M),xe===Z?(y=Ae,Z=Ve):(S=Ae,se=Ve)}}function O1(y,S,M,O,z){var Z=S.x-y.x,se=S.y-y.y,xe=O.min,Ae=O.max,Ve,ct;return M&8?(Ve=y.x+Z*(Ae.y-y.y)/se,ct=Ae.y):M&4?(Ve=y.x+Z*(xe.y-y.y)/se,ct=xe.y):M&2?(Ve=Ae.x,ct=y.y+se*(Ae.x-y.x)/Z):M&1&&(Ve=xe.x,ct=y.y+se*(xe.x-y.x)/Z),new he(Ve,ct,z)}function uf(y,S){var M=0;return y.x<S.min.x?M|=1:y.x>S.max.x&&(M|=2),y.y<S.min.y?M|=4:y.y>S.max.y&&(M|=8),M}function t6(y,S){var M=S.x-y.x,O=S.y-y.y;return M*M+O*O}function hf(y,S,M,O){var z=S.x,Z=S.y,se=M.x-z,xe=M.y-Z,Ae=se*se+xe*xe,Ve;return Ae>0&&(Ve=((y.x-z)*se+(y.y-Z)*xe)/Ae,Ve>1?(z=M.x,Z=M.y):Ve>0&&(z+=se*Ve,Z+=xe*Ve)),se=y.x-z,xe=y.y-Z,O?se*se+xe*xe:new he(z,Z)}function Ds(y){return!A(y[0])||typeof y[0][0]!="object"&&typeof y[0][0]<"u"}function xO(y){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ds(y)}function M$(y,S){var M,O,z,Z,se,xe,Ae,Ve;if(!y||y.length===0)throw new Error("latlngs not passed");Ds(y)||(console.warn("latlngs are not flat! Only the first ring will be used"),y=y[0]);var ct=Xe([0,0]),xt=Ke(y),$t=xt.getNorthWest().distanceTo(xt.getSouthWest())*xt.getNorthEast().distanceTo(xt.getNorthWest());$t<1700&&(ct=E$(y));var Jt=y.length,Sr=[];for(M=0;M<Jt;M++){var dn=Xe(y[M]);Sr.push(S.project(Xe([dn.lat-ct.lat,dn.lng-ct.lng])))}for(M=0,O=0;M<Jt-1;M++)O+=Sr[M].distanceTo(Sr[M+1])/2;if(O===0)Ve=Sr[0];else for(M=0,Z=0;M<Jt-1;M++)if(se=Sr[M],xe=Sr[M+1],z=se.distanceTo(xe),Z+=z,Z>O){Ae=(Z-O)/z,Ve=[xe.x-Ae*(xe.x-se.x),xe.y-Ae*(xe.y-se.y)];break}var Fs=S.unproject(X(Ve));return Xe([Fs.lat+ct.lat,Fs.lng+ct.lng])}var SO={__proto__:null,simplify:bO,pointToSegmentDistance:T$,closestPointOnSegment:XU,clipSegment:_O,_getEdgeIntersection:O1,_getBitCode:uf,_sqClosestPointOnSegment:hf,isFlat:Ds,_flat:xO,polylineCenter:M$},L1={project:function(y){return new he(y.lng,y.lat)},unproject:function(y){return new Qe(y.y,y.x)},bounds:new _e([-180,-90],[180,90])},R1={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(y){var S=Math.PI/180,M=this.R,O=y.lat*S,z=this.R_MINOR/M,Z=Math.sqrt(1-z*z),se=Z*Math.sin(O),xe=Math.tan(Math.PI/4-O/2)/Math.pow((1-se)/(1+se),Z/2);return O=-M*Math.log(Math.max(xe,1e-10)),new he(y.lng*S*M,O)},unproject:function(y){for(var S=180/Math.PI,M=this.R,O=this.R_MINOR/M,z=Math.sqrt(1-O*O),Z=Math.exp(-y.y/M),se=Math.PI/2-2*Math.atan(Z),xe=0,Ae=.1,Ve;xe<15&&Math.abs(Ae)>1e-7;xe++)Ve=z*Math.sin(se),Ve=Math.pow((1-Ve)/(1+Ve),z/2),Ae=Math.PI/2-2*Math.atan(Z*Ve)-se,se+=Ae;return new Qe(se*S,y.x*S/M)}},EO={__proto__:null,LonLat:L1,Mercator:R1,SphericalMercator:Vt},Uy=n({},qt,{code:"EPSG:3395",projection:R1,transformation:(function(){var y=.5/(Math.PI*R1.R);return He(y,.5,-y,.5)})()}),TO=n({},qt,{code:"EPSG:4326",projection:L1,transformation:He(1/180,1,-1/180,.5)}),i6=n({},di,{projection:L1,transformation:He(1,0,-1,0),scale:function(y){return Math.pow(2,y)},zoom:function(y){return Math.log(y)/Math.LN2},distance:function(y,S){var M=S.lng-y.lng,O=S.lat-y.lat;return Math.sqrt(M*M+O*O)},infinite:!0});di.Earth=qt,di.EPSG3395=Uy,di.EPSG3857=Ri,di.EPSG900913=ci,di.EPSG4326=TO,di.Simple=i6;var Ml=ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(y){return y.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(y){return y&&y.removeLayer(this),this},getPane:function(y){return this._map.getPane(y?this.options[y]||y:this.options.pane)},addInteractiveTarget:function(y){return this._map._targets[l(y)]=this,this},removeInteractiveTarget:function(y){return delete this._map._targets[l(y)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(y){var S=y.target;if(S.hasLayer(this)){if(this._map=S,this._zoomAnimated=S._zoomAnimated,this.getEvents){var M=this.getEvents();S.on(M,this),this.once("remove",function(){S.off(M,this)},this)}this.onAdd(S),this.fire("add"),S.fire("layeradd",{layer:this})}}});yi.include({addLayer:function(y){if(!y._layerAdd)throw new Error("The provided object is not a Layer.");var S=l(y);return this._layers[S]?this:(this._layers[S]=y,y._mapToAdd=this,y.beforeAdd&&y.beforeAdd(this),this.whenReady(y._layerAdd,y),this)},removeLayer:function(y){var S=l(y);return this._layers[S]?(this._loaded&&y.onRemove(this),delete this._layers[S],this._loaded&&(this.fire("layerremove",{layer:y}),y.fire("remove")),y._map=y._mapToAdd=null,this):this},hasLayer:function(y){return l(y)in this._layers},eachLayer:function(y,S){for(var M in this._layers)y.call(S,this._layers[M]);return this},_addLayers:function(y){y=y?A(y)?y:[y]:[];for(var S=0,M=y.length;S<M;S++)this.addLayer(y[S])},_addZoomLimit:function(y){(!isNaN(y.options.maxZoom)||!isNaN(y.options.minZoom))&&(this._zoomBoundLayers[l(y)]=y,this._updateZoomLevels())},_removeZoomLimit:function(y){var S=l(y);this._zoomBoundLayers[S]&&(delete this._zoomBoundLayers[S],this._updateZoomLevels())},_updateZoomLevels:function(){var y=1/0,S=-1/0,M=this._getZoomSpan();for(var O in this._zoomBoundLayers){var z=this._zoomBoundLayers[O].options;y=z.minZoom===void 0?y:Math.min(y,z.minZoom),S=z.maxZoom===void 0?S:Math.max(S,z.maxZoom)}this._layersMaxZoom=S===-1/0?void 0:S,this._layersMinZoom=y===1/0?void 0:y,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var df=Ml.extend({initialize:function(y,S){_(this,S),this._layers={};var M,O;if(y)for(M=0,O=y.length;M<O;M++)this.addLayer(y[M])},addLayer:function(y){var S=this.getLayerId(y);return this._layers[S]=y,this._map&&this._map.addLayer(y),this},removeLayer:function(y){var S=y in this._layers?y:this.getLayerId(y);return this._map&&this._layers[S]&&this._map.removeLayer(this._layers[S]),delete this._layers[S],this},hasLayer:function(y){var S=typeof y=="number"?y:this.getLayerId(y);return S in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(y){var S=Array.prototype.slice.call(arguments,1),M,O;for(M in this._layers)O=this._layers[M],O[y]&&O[y].apply(O,S);return this},onAdd:function(y){this.eachLayer(y.addLayer,y)},onRemove:function(y){this.eachLayer(y.removeLayer,y)},eachLayer:function(y,S){for(var M in this._layers)y.call(S,this._layers[M]);return this},getLayer:function(y){return this._layers[y]},getLayers:function(){var y=[];return this.eachLayer(y.push,y),y},setZIndex:function(y){return this.invoke("setZIndex",y)},getLayerId:function(y){return l(y)}}),$O=function(y,S){return new df(y,S)},la=df.extend({addLayer:function(y){return this.hasLayer(y)?this:(y.addEventParent(this),df.prototype.addLayer.call(this,y),this.fire("layeradd",{layer:y}))},removeLayer:function(y){return this.hasLayer(y)?(y in this._layers&&(y=this._layers[y]),y.removeEventParent(this),df.prototype.removeLayer.call(this,y),this.fire("layerremove",{layer:y})):this},setStyle:function(y){return this.invoke("setStyle",y)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var y=new qe;for(var S in this._layers){var M=this._layers[S];y.extend(M.getBounds?M.getBounds():M.getLatLng())}return y}}),G0=function(y,S){return new la(y,S)},By=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(y){_(this,y)},createIcon:function(y){return this._createIcon("icon",y)},createShadow:function(y){return this._createIcon("shadow",y)},_createIcon:function(y,S){var M=this._getIconUrl(y);if(!M){if(y==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var O=this._createImg(M,S&&S.tagName==="IMG"?S:null);return this._setIconStyles(O,y),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),O},_setIconStyles:function(y,S){var M=this.options,O=M[S+"Size"];typeof O=="number"&&(O=[O,O]);var z=X(O),Z=X(S==="shadow"&&M.shadowAnchor||M.iconAnchor||z&&z.divideBy(2,!0));y.className="leaflet-marker-"+S+" "+(M.className||""),Z&&(y.style.marginLeft=-Z.x+"px",y.style.marginTop=-Z.y+"px"),z&&(y.style.width=z.x+"px",y.style.height=z.y+"px")},_createImg:function(y,S){return S=S||document.createElement("img"),S.src=y,S},_getIconUrl:function(y){return Mt.retina&&this.options[y+"RetinaUrl"]||this.options[y+"Url"]}});function N1(y){return new By(y)}var Vy=By.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(y){return typeof Vy.imagePath!="string"&&(Vy.imagePath=this._detectIconPath()),(this.options.imagePath||Vy.imagePath)+By.prototype._getIconUrl.call(this,y)},_stripUrl:function(y){var S=function(M,O,z){var Z=O.exec(M);return Z&&Z[z]};return y=S(y,/^url\((['"])?(.+)\1\)$/,2),y&&S(y,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var y=mi("div","leaflet-default-icon-path",document.body),S=Ou(y,"background-image")||Ou(y,"backgroundImage");if(document.body.removeChild(y),S=this._stripUrl(S),S)return S;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),C$=$l.extend({initialize:function(y){this._marker=y},addHooks:function(){var y=this._marker._icon;this._draggable||(this._draggable=new td(y,y,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(y,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(y){var S=this._marker,M=S._map,O=this._marker.options.autoPanSpeed,z=this._marker.options.autoPanPadding,Z=Qh(S._icon),se=M.getPixelBounds(),xe=M.getPixelOrigin(),Ae=ke(se.min._subtract(xe).add(z),se.max._subtract(xe).subtract(z));if(!Ae.contains(Z)){var Ve=X((Math.max(Ae.max.x,Z.x)-Ae.max.x)/(se.max.x-Ae.max.x)-(Math.min(Ae.min.x,Z.x)-Ae.min.x)/(se.min.x-Ae.min.x),(Math.max(Ae.max.y,Z.y)-Ae.max.y)/(se.max.y-Ae.max.y)-(Math.min(Ae.min.y,Z.y)-Ae.min.y)/(se.min.y-Ae.min.y)).multiplyBy(O);M.panBy(Ve,{animate:!1}),this._draggable._newPos._add(Ve),this._draggable._startPos._add(Ve),hn(S._icon,this._draggable._newPos),this._onDrag(y),this._panRequest=Q(this._adjustPan.bind(this,y))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(y){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,y)))},_onDrag:function(y){var S=this._marker,M=S._shadow,O=Qh(S._icon),z=S._map.layerPointToLatLng(O);M&&hn(M,O),S._latlng=z,y.latlng=z,y.oldLatLng=this._oldLatLng,S.fire("move",y).fire("drag",y)},_onDragEnd:function(y){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",y)}}),Gy=Ml.extend({options:{icon:new Vy,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(y,S){_(this,S),this._latlng=Xe(y)},onAdd:function(y){this._zoomAnimated=this._zoomAnimated&&y.options.markerZoomAnimation,this._zoomAnimated&&y.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(y){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&y.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(y){var S=this._latlng;return this._latlng=Xe(y),this.update(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},setZIndexOffset:function(y){return this.options.zIndexOffset=y,this.update()},getIcon:function(){return this.options.icon},setIcon:function(y){return this.options.icon=y,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var y=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(y)}return this},_initIcon:function(){var y=this.options,S="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=y.icon.createIcon(this._icon),O=!1;M!==this._icon&&(this._icon&&this._removeIcon(),O=!0,y.title&&(M.title=y.title),M.tagName==="IMG"&&(M.alt=y.alt||"")),lt(M,S),y.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,y.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(M,"focus",this._panOnFocus,this);var z=y.icon.createShadow(this._shadow),Z=!1;z!==this._shadow&&(this._removeShadow(),Z=!0),z&&(lt(z,S),z.alt=""),this._shadow=z,y.opacity<1&&this._updateOpacity(),O&&this.getPane().appendChild(this._icon),this._initInteraction(),z&&Z&&this.getPane(y.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ni(this._icon,"focus",this._panOnFocus,this),er(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&er(this._shadow),this._shadow=null},_setPos:function(y){this._icon&&hn(this._icon,y),this._shadow&&hn(this._shadow,y),this._zIndex=y.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(y){this._icon&&(this._icon.style.zIndex=this._zIndex+y)},_animateZoom:function(y){var S=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center).round();this._setPos(S)},_initInteraction:function(){if(this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),C$)){var y=this.options.draggable;this.dragging&&(y=this.dragging.enabled(),this.dragging.disable()),this.dragging=new C$(this),y&&this.dragging.enable()}},setOpacity:function(y){return this.options.opacity=y,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var y=this.options.opacity;this._icon&&Po(this._icon,y),this._shadow&&Po(this._shadow,y)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var y=this._map;if(y){var S=this.options.icon.options,M=S.iconSize?X(S.iconSize):X(0,0),O=S.iconAnchor?X(S.iconAnchor):X(0,0);y.panInside(this._latlng,{paddingTopLeft:O,paddingBottomRight:M.subtract(O)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function I$(y,S){return new Gy(y,S)}var Ru=Ml.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(y){this._renderer=y.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(y){return _(this,y),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&y&&Object.prototype.hasOwnProperty.call(y,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),q0=Ru.extend({options:{fill:!0,radius:10},initialize:function(y,S){_(this,S),this._latlng=Xe(y),this._radius=this.options.radius},setLatLng:function(y){var S=this._latlng;return this._latlng=Xe(y),this.redraw(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(y){return this.options.radius=this._radius=y,this.redraw()},getRadius:function(){return this._radius},setStyle:function(y){var S=y&&y.radius||this._radius;return Ru.prototype.setStyle.call(this,y),this.setRadius(S),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,S=this._radiusY||y,M=this._clickTolerance(),O=[y+M,S+M];this._pxBounds=new _e(this._point.subtract(O),this._point.add(O))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(y){return y.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function MO(y,S){return new q0(y,S)}var A$=q0.extend({initialize:function(y,S,M){if(typeof S=="number"&&(S=n({},M,{radius:S})),_(this,S),this._latlng=Xe(y),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(y){return this._mRadius=y,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var y=[this._radius,this._radiusY||this._radius];return new qe(this._map.layerPointToLatLng(this._point.subtract(y)),this._map.layerPointToLatLng(this._point.add(y)))},setStyle:Ru.prototype.setStyle,_project:function(){var y=this._latlng.lng,S=this._latlng.lat,M=this._map,O=M.options.crs;if(O.distance===qt.distance){var z=Math.PI/180,Z=this._mRadius/qt.R/z,se=M.project([S+Z,y]),xe=M.project([S-Z,y]),Ae=se.add(xe).divideBy(2),Ve=M.unproject(Ae).lat,ct=Math.acos((Math.cos(Z*z)-Math.sin(S*z)*Math.sin(Ve*z))/(Math.cos(S*z)*Math.cos(Ve*z)))/z;(isNaN(ct)||ct===0)&&(ct=Z/Math.cos(Math.PI/180*S)),this._point=Ae.subtract(M.getPixelOrigin()),this._radius=isNaN(ct)?0:Ae.x-M.project([Ve,y-ct]).x,this._radiusY=Ae.y-se.y}else{var xt=O.unproject(O.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint(xt).x}this._updateBounds()}});function r6(y,S,M){return new A$(y,S,M)}var Nu=Ru.extend({options:{smoothFactor:1,noClip:!1},initialize:function(y,S){_(this,S),this._setLatLngs(y)},getLatLngs:function(){return this._latlngs},setLatLngs:function(y){return this._setLatLngs(y),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(y){for(var S=1/0,M=null,O=hf,z,Z,se=0,xe=this._parts.length;se<xe;se++)for(var Ae=this._parts[se],Ve=1,ct=Ae.length;Ve<ct;Ve++){z=Ae[Ve-1],Z=Ae[Ve];var xt=O(y,z,Z,!0);xt<S&&(S=xt,M=O(y,z,Z))}return M&&(M.distance=Math.sqrt(S)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return M$(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(y,S){return S=S||this._defaultShape(),y=Xe(y),S.push(y),this._bounds.extend(y),this.redraw()},_setLatLngs:function(y){this._bounds=new qe,this._latlngs=this._convertLatLngs(y)},_defaultShape:function(){return Ds(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(y){for(var S=[],M=Ds(y),O=0,z=y.length;O<z;O++)M?(S[O]=Xe(y[O]),this._bounds.extend(S[O])):S[O]=this._convertLatLngs(y[O]);return S},_project:function(){var y=new _e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,y),this._bounds.isValid()&&y.isValid()&&(this._rawPxBounds=y,this._updateBounds())},_updateBounds:function(){var y=this._clickTolerance(),S=new he(y,y);this._rawPxBounds&&(this._pxBounds=new _e([this._rawPxBounds.min.subtract(S),this._rawPxBounds.max.add(S)]))},_projectLatlngs:function(y,S,M){var O=y[0]instanceof Qe,z=y.length,Z,se;if(O){for(se=[],Z=0;Z<z;Z++)se[Z]=this._map.latLngToLayerPoint(y[Z]),M.extend(se[Z]);S.push(se)}else for(Z=0;Z<z;Z++)this._projectLatlngs(y[Z],S,M)},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}var S=this._parts,M,O,z,Z,se,xe,Ae;for(M=0,z=0,Z=this._rings.length;M<Z;M++)for(Ae=this._rings[M],O=0,se=Ae.length;O<se-1;O++)xe=_O(Ae[O],Ae[O+1],y,O,!0),xe&&(S[z]=S[z]||[],S[z].push(xe[0]),(xe[1]!==Ae[O+1]||O===se-2)&&(S[z].push(xe[1]),z++))}},_simplifyPoints:function(){for(var y=this._parts,S=this.options.smoothFactor,M=0,O=y.length;M<O;M++)y[M]=bO(y[M],S)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(y,S){var M,O,z,Z,se,xe,Ae=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(M=0,Z=this._parts.length;M<Z;M++)for(xe=this._parts[M],O=0,se=xe.length,z=se-1;O<se;z=O++)if(!(!S&&O===0)&&T$(y,xe[z],xe[O])<=Ae)return!0;return!1}});function n6(y,S){return new Nu(y,S)}Nu._flat=xO;var qy=Nu.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return k1(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(y){var S=Nu.prototype._convertLatLngs.call(this,y),M=S.length;return M>=2&&S[0]instanceof Qe&&S[0].equals(S[M-1])&&S.pop(),S},_setLatLngs:function(y){Nu.prototype._setLatLngs.call(this,y),Ds(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ds(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var y=this._renderer._bounds,S=this.options.weight,M=new he(S,S);if(y=new _e(y.min.subtract(M),y.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(y))){if(this.options.noClip){this._parts=this._rings;return}for(var O=0,z=this._rings.length,Z;O<z;O++)Z=vO(this._rings[O],y,!0),Z.length&&this._parts.push(Z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(y){var S=!1,M,O,z,Z,se,xe,Ae,Ve;if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(Z=0,Ae=this._parts.length;Z<Ae;Z++)for(M=this._parts[Z],se=0,Ve=M.length,xe=Ve-1;se<Ve;xe=se++)O=M[se],z=M[xe],O.y>y.y!=z.y>y.y&&y.x<(z.x-O.x)*(y.y-O.y)/(z.y-O.y)+O.x&&(S=!S);return S||Nu.prototype._containsPoint.call(this,y,!0)}});function ca(y,S){return new qy(y,S)}var ua=la.extend({initialize:function(y,S){_(this,S),this._layers={},y&&this.addData(y)},addData:function(y){var S=A(y)?y:y.features,M,O,z;if(S){for(M=0,O=S.length;M<O;M++)z=S[M],(z.geometries||z.geometry||z.features||z.coordinates)&&this.addData(z);return this}var Z=this.options;if(Z.filter&&!Z.filter(y))return this;var se=H0(y,Z);return se?(se.feature=Hy(y),se.defaultOptions=se.options,this.resetStyle(se),Z.onEachFeature&&Z.onEachFeature(y,se),this.addLayer(se)):this},resetStyle:function(y){return y===void 0?this.eachLayer(this.resetStyle,this):(y.options=n({},y.defaultOptions),this._setLayerStyle(y,this.options.style),this)},setStyle:function(y){return this.eachLayer(function(S){this._setLayerStyle(S,y)},this)},_setLayerStyle:function(y,S){y.setStyle&&(typeof S=="function"&&(S=S(y.feature)),y.setStyle(S))}});function H0(y,S){var M=y.type==="Feature"?y.geometry:y,O=M?M.coordinates:null,z=[],Z=S&&S.pointToLayer,se=S&&S.coordsToLatLng||D1,xe,Ae,Ve,ct;if(!O&&!M)return null;switch(M.type){case"Point":return xe=se(O),P$(Z,y,xe,S);case"MultiPoint":for(Ve=0,ct=O.length;Ve<ct;Ve++)xe=se(O[Ve]),z.push(P$(Z,y,xe,S));return new la(z);case"LineString":case"MultiLineString":return Ae=W0(O,M.type==="LineString"?0:1,se),new Nu(Ae,S);case"Polygon":case"MultiPolygon":return Ae=W0(O,M.type==="Polygon"?1:2,se),new qy(Ae,S);case"GeometryCollection":for(Ve=0,ct=M.geometries.length;Ve<ct;Ve++){var xt=H0({geometry:M.geometries[Ve],type:"Feature",properties:y.properties},S);xt&&z.push(xt)}return new la(z);case"FeatureCollection":for(Ve=0,ct=M.features.length;Ve<ct;Ve++){var $t=H0(M.features[Ve],S);$t&&z.push($t)}return new la(z);default:throw new Error("Invalid GeoJSON object.")}}function P$(y,S,M,O){return y?y(S,M):new Gy(M,O&&O.markersInheritOptions&&O)}function D1(y){return new Qe(y[1],y[0],y[2])}function W0(y,S,M){for(var O=[],z=0,Z=y.length,se;z<Z;z++)se=S?W0(y[z],S-1,M):(M||D1)(y[z]),O.push(se);return O}function Z0(y,S){return y=Xe(y),y.alt!==void 0?[m(y.lng,S),m(y.lat,S),m(y.alt,S)]:[m(y.lng,S),m(y.lat,S)]}function F1(y,S,M,O){for(var z=[],Z=0,se=y.length;Z<se;Z++)z.push(S?F1(y[Z],Ds(y[Z])?0:S-1,M,O):Z0(y[Z],O));return!S&&M&&z.length>0&&z.push(z[0].slice()),z}function Cl(y,S){return y.feature?n({},y.feature,{geometry:S}):Hy(S)}function Hy(y){return y.type==="Feature"||y.type==="FeatureCollection"?y:{type:"Feature",properties:{},geometry:y}}var pf={toGeoJSON:function(y){return Cl(this,{type:"Point",coordinates:Z0(this.getLatLng(),y)})}};Gy.include(pf),A$.include(pf),q0.include(pf),Nu.include({toGeoJSON:function(y){var S=!Ds(this._latlngs),M=F1(this._latlngs,S?1:0,!1,y);return Cl(this,{type:(S?"Multi":"")+"LineString",coordinates:M})}}),qy.include({toGeoJSON:function(y){var S=!Ds(this._latlngs),M=S&&!Ds(this._latlngs[0]),O=F1(this._latlngs,M?2:S?1:0,!0,y);return S||(O=[O]),Cl(this,{type:(M?"Multi":"")+"Polygon",coordinates:O})}}),df.include({toMultiPoint:function(y){var S=[];return this.eachLayer(function(M){S.push(M.toGeoJSON(y).geometry.coordinates)}),Cl(this,{type:"MultiPoint",coordinates:S})},toGeoJSON:function(y){var S=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(S==="MultiPoint")return this.toMultiPoint(y);var M=S==="GeometryCollection",O=[];return this.eachLayer(function(z){if(z.toGeoJSON){var Z=z.toGeoJSON(y);if(M)O.push(Z.geometry);else{var se=Hy(Z);se.type==="FeatureCollection"?O.push.apply(O,se.features):O.push(se)}}}),M?Cl(this,{geometries:O,type:"GeometryCollection"}):{type:"FeatureCollection",features:O}}});function z1(y,S){return new ua(y,S)}var CO=z1,Oc=Ml.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(y,S,M){this._url=y,this._bounds=Ke(S),_(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){er(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(y){return this.options.opacity=y,this._image&&this._updateOpacity(),this},setStyle:function(y){return y.opacity&&this.setOpacity(y.opacity),this},bringToFront:function(){return this._map&&Te(this._image),this},bringToBack:function(){return this._map&&We(this._image),this},setUrl:function(y){return this._url=y,this._image&&(this._image.src=y),this},setBounds:function(y){return this._bounds=Ke(y),this._map&&this._reset(),this},getEvents:function(){var y={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var y=this._url.tagName==="IMG",S=this._image=y?this._url:mi("img");if(lt(S,"leaflet-image-layer"),this._zoomAnimated&&lt(S,"leaflet-zoom-animated"),this.options.className&&lt(S,this.options.className),S.onselectstart=p,S.onmousemove=p,S.onload=o(this.fire,this,"load"),S.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),y){this._url=S.src;return}S.src=this._url,S.alt=this.options.alt},_animateZoom:function(y){var S=this._map.getZoomScale(y.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min;Da(this._image,M,S)},_reset:function(){var y=this._image,S=new _e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=S.getSize();hn(y,S.min),y.style.width=M.x+"px",y.style.height=M.y+"px"},_updateOpacity:function(){Po(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var y=this.options.errorOverlayUrl;y&&this._url!==y&&(this._url=y,this._image.src=y)},getCenter:function(){return this._bounds.getCenter()}}),Wy=function(y,S,M){return new Oc(y,S,M)},j1=Oc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var y=this._url.tagName==="VIDEO",S=this._image=y?this._url:mi("video");if(lt(S,"leaflet-image-layer"),this._zoomAnimated&&lt(S,"leaflet-zoom-animated"),this.options.className&&lt(S,this.options.className),S.onselectstart=p,S.onmousemove=p,S.onloadeddata=o(this.fire,this,"load"),y){for(var M=S.getElementsByTagName("source"),O=[],z=0;z<M.length;z++)O.push(M[z].src);this._url=M.length>0?O:[S.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(S.style,"objectFit")&&(S.style.objectFit="fill"),S.autoplay=!!this.options.autoplay,S.loop=!!this.options.loop,S.muted=!!this.options.muted,S.playsInline=!!this.options.playsInline;for(var Z=0;Z<this._url.length;Z++){var se=mi("source");se.src=this._url[Z],S.appendChild(se)}}});function IO(y,S,M){return new j1(y,S,M)}var id=Oc.extend({_initImage:function(){var y=this._image=this._url;lt(y,"leaflet-image-layer"),this._zoomAnimated&&lt(y,"leaflet-zoom-animated"),this.options.className&&lt(y,this.options.className),y.onselectstart=p,y.onmousemove=p}});function AO(y,S,M){return new id(y,S,M)}var Il=Ml.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(y,S){y&&(y instanceof Qe||A(y))?(this._latlng=Xe(y),_(this,S)):(_(this,y),this._source=S),this.options.content&&(this._content=this.options.content)},openOn:function(y){return y=arguments.length?y:this._source._map,y.hasLayer(this)||y.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(y){return this._map?this.close():(arguments.length?this._source=y:y=this._source,this._prepareOpen(),this.openOn(y._map)),this},onAdd:function(y){this._zoomAnimated=y._zoomAnimated,this._container||this._initLayout(),y._fadeAnimated&&Po(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),y._fadeAnimated&&Po(this._container,1),this.bringToFront(),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(y){y._fadeAnimated?(Po(this._container,0),this._removeTimeout=setTimeout(o(er,void 0,this._container),200)):er(this._container),this.options.interactive&&(Ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(y){return this._latlng=Xe(y),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(y){return this._content=y,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var y={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Te(this._container),this},bringToBack:function(){return this._map&&We(this._container),this},_prepareOpen:function(y){var S=this._source;if(!S._map)return!1;if(S instanceof la){S=null;var M=this._source._layers;for(var O in M)if(M[O]._map){S=M[O];break}if(!S)return!1;this._source=S}if(!y)if(S.getCenter)y=S.getCenter();else if(S.getLatLng)y=S.getLatLng();else if(S.getBounds)y=S.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(y),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var y=this._contentNode,S=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof S=="string")y.innerHTML=S;else{for(;y.hasChildNodes();)y.removeChild(y.firstChild);y.appendChild(S)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var y=this._map.latLngToLayerPoint(this._latlng),S=X(this.options.offset),M=this._getAnchor();this._zoomAnimated?hn(this._container,y.add(M)):S=S.add(y).add(M);var O=this._containerBottom=-S.y,z=this._containerLeft=-Math.round(this._containerWidth/2)+S.x;this._container.style.bottom=O+"px",this._container.style.left=z+"px"}},_getAnchor:function(){return[0,0]}});yi.include({_initOverlay:function(y,S,M,O){var z=S;return z instanceof y||(z=new y(O).setContent(S)),M&&z.setLatLng(M),z}}),Ml.include({_initOverlay:function(y,S,M,O){var z=M;return z instanceof y?(_(z,O),z._source=this):(z=S&&!O?S:new y(O,this),z.setContent(M)),z}});var Y0=Il.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(y){return y=arguments.length?y:this._source._map,!y.hasLayer(this)&&y._popup&&y._popup.options.autoClose&&y.removeLayer(y._popup),y._popup=this,Il.prototype.openOn.call(this,y)},onAdd:function(y){Il.prototype.onAdd.call(this,y),y.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ru||this._source.on("preclick",Lu))},onRemove:function(y){Il.prototype.onRemove.call(this,y),y.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ru||this._source.off("preclick",Lu))},getEvents:function(){var y=Il.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(y.preclick=this.close),this.options.keepInView&&(y.moveend=this._adjustPan),y},_initLayout:function(){var y="leaflet-popup",S=this._container=mi("div",y+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=mi("div",y+"-content-wrapper",S);if(this._contentNode=mi("div",y+"-content",M),zy(S),Fy(this._contentNode),Xt(S,"contextmenu",Lu),this._tipContainer=mi("div",y+"-tip-container",S),this._tip=mi("div",y+"-tip",this._tipContainer),this.options.closeButton){var O=this._closeButton=mi("a",y+"-close-button",S);O.setAttribute("role","button"),O.setAttribute("aria-label","Close popup"),O.href="#close",O.innerHTML='<span aria-hidden="true">&#215;</span>',Xt(O,"click",function(z){$n(z),this.close()},this)}},_updateLayout:function(){var y=this._contentNode,S=y.style;S.width="",S.whiteSpace="nowrap";var M=y.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),S.width=M+1+"px",S.whiteSpace="",S.height="";var O=y.offsetHeight,z=this.options.maxHeight,Z="leaflet-popup-scrolled";z&&O>z?(S.height=z+"px",lt(y,Z)):Ht(y,Z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(y){var S=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center),M=this._getAnchor();hn(this._container,S.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var y=this._map,S=parseInt(Ou(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+S,O=this._containerWidth,z=new he(this._containerLeft,-M-this._containerBottom);z._add(Qh(this._container));var Z=y.layerPointToContainerPoint(z),se=X(this.options.autoPanPadding),xe=X(this.options.autoPanPaddingTopLeft||se),Ae=X(this.options.autoPanPaddingBottomRight||se),Ve=y.getSize(),ct=0,xt=0;Z.x+O+Ae.x>Ve.x&&(ct=Z.x+O-Ve.x+Ae.x),Z.x-ct-xe.x<0&&(ct=Z.x-xe.x),Z.y+M+Ae.y>Ve.y&&(xt=Z.y+M-Ve.y+Ae.y),Z.y-xt-xe.y<0&&(xt=Z.y-xe.y),(ct||xt)&&(this.options.keepInView&&(this._autopanning=!0),y.fire("autopanstart").panBy([ct,xt]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),s6=function(y,S){return new Y0(y,S)};yi.mergeOptions({closePopupOnClick:!0}),yi.include({openPopup:function(y,S,M){return this._initOverlay(Y0,y,S,M).openOn(this),this},closePopup:function(y){return y=arguments.length?y:this._popup,y&&y.close(),this}}),Ml.include({bindPopup:function(y,S){return this._popup=this._initOverlay(Y0,this._popup,y,S),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(y){return this._popup&&(this instanceof la||(this._popup._source=this),this._popup._prepareOpen(y||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(y){return this._popup&&this._popup.setContent(y),this},getPopup:function(){return this._popup},_openPopup:function(y){if(!(!this._popup||!this._map)){kc(y);var S=y.layer||y.target;if(this._popup._source===S&&!(S instanceof Ru)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(y.latlng);return}this._popup._source=S,this.openPopup(y.latlng)}},_movePopup:function(y){this._popup.setLatLng(y.latlng)},_onKeyPress:function(y){y.originalEvent.keyCode===13&&this._openPopup(y)}});var U1=Il.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(y){Il.prototype.onAdd.call(this,y),this.setOpacity(this.options.opacity),y.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(y){Il.prototype.onRemove.call(this,y),y.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var y=Il.prototype.getEvents.call(this);return this.options.permanent||(y.preclick=this.close),y},_initLayout:function(){var y="leaflet-tooltip",S=y+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mi("div",S),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(y){var S,M,O=this._map,z=this._container,Z=O.latLngToContainerPoint(O.getCenter()),se=O.layerPointToContainerPoint(y),xe=this.options.direction,Ae=z.offsetWidth,Ve=z.offsetHeight,ct=X(this.options.offset),xt=this._getAnchor();xe==="top"?(S=Ae/2,M=Ve):xe==="bottom"?(S=Ae/2,M=0):xe==="center"?(S=Ae/2,M=Ve/2):xe==="right"?(S=0,M=Ve/2):xe==="left"?(S=Ae,M=Ve/2):se.x<Z.x?(xe="right",S=0,M=Ve/2):(xe="left",S=Ae+(ct.x+xt.x)*2,M=Ve/2),y=y.subtract(X(S,M,!0)).add(ct).add(xt),Ht(z,"leaflet-tooltip-right"),Ht(z,"leaflet-tooltip-left"),Ht(z,"leaflet-tooltip-top"),Ht(z,"leaflet-tooltip-bottom"),lt(z,"leaflet-tooltip-"+xe),hn(z,y)},_updatePosition:function(){var y=this._map.latLngToLayerPoint(this._latlng);this._setPosition(y)},setOpacity:function(y){this.options.opacity=y,this._container&&Po(this._container,y)},_animateZoom:function(y){var S=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center);this._setPosition(S)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),o6=function(y,S){return new U1(y,S)};yi.include({openTooltip:function(y,S,M){return this._initOverlay(U1,y,S,M).openOn(this),this},closeTooltip:function(y){return y.close(),this}}),Ml.include({bindTooltip:function(y,S){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(U1,this._tooltip,y,S),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(y){if(!(!y&&this._tooltipHandlersAdded)){var S=y?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[S](M),this._tooltipHandlersAdded=!y}},openTooltip:function(y){return this._tooltip&&(this instanceof la||(this._tooltip._source=this),this._tooltip._prepareOpen(y)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(y){return this._tooltip&&this._tooltip.setContent(y),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(y){var S=typeof y.getElement=="function"&&y.getElement();S&&(Xt(S,"focus",function(){this._tooltip._source=y,this.openTooltip()},this),Xt(S,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(y){var S=typeof y.getElement=="function"&&y.getElement();S&&S.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(y){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var S=this;this._map.once("moveend",function(){S._openOnceFlag=!1,S._openTooltip(y)});return}this._tooltip._source=y.layer||y.target,this.openTooltip(this._tooltip.options.sticky?y.latlng:void 0)}},_moveTooltip:function(y){var S=y.latlng,M,O;this._tooltip.options.sticky&&y.originalEvent&&(M=this._map.mouseEventToContainerPoint(y.originalEvent),O=this._map.containerPointToLayerPoint(M),S=this._map.layerPointToLatLng(O)),this._tooltip.setLatLng(S)}});var k$=By.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(y){var S=y&&y.tagName==="DIV"?y:document.createElement("div"),M=this.options;if(M.html instanceof Element?(ie(S),S.appendChild(M.html)):S.innerHTML=M.html!==!1?M.html:"",M.bgPos){var O=X(M.bgPos);S.style.backgroundPosition=-O.x+"px "+-O.y+"px"}return this._setIconStyles(S,"icon"),S},createShadow:function(){return null}});function PO(y){return new k$(y)}By.Default=Vy;var ff=Ml.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(y){_(this,y)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(y){y._addZoomLimit(this)},onRemove:function(y){this._removeAllTiles(),er(this._container),y._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Te(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(We(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(y){return this.options.opacity=y,this._updateOpacity(),this},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var y=this._clampZoom(this._map.getZoom());y!==this._tileZoom&&(this._tileZoom=y,this._updateLevels()),this._update()}return this},getEvents:function(){var y={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),y.move=this._onMove),this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},createTile:function(){return document.createElement("div")},getTileSize:function(){var y=this.options.tileSize;return y instanceof he?y:new he(y,y)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(y){for(var S=this.getPane().children,M=-y(-1/0,1/0),O=0,z=S.length,Z;O<z;O++)Z=S[O].style.zIndex,S[O]!==this._container&&Z&&(M=y(M,+Z));isFinite(M)&&(this.options.zIndex=M+y(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Mt.ielt9){Po(this._container,this.options.opacity);var y=+new Date,S=!1,M=!1;for(var O in this._tiles){var z=this._tiles[O];if(!(!z.current||!z.loaded)){var Z=Math.min(1,(y-z.loaded)/200);Po(z.el,Z),Z<1?S=!0:(z.active?M=!0:this._onOpaqueTile(z),z.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),S&&(te(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=mi("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var y=this._tileZoom,S=this.options.maxZoom;if(y!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===y?(this._levels[M].el.style.zIndex=S-Math.abs(y-M),this._onUpdateLevel(M)):(er(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var O=this._levels[y],z=this._map;return O||(O=this._levels[y]={},O.el=mi("div","leaflet-tile-container leaflet-zoom-animated",this._container),O.el.style.zIndex=S,O.origin=z.project(z.unproject(z.getPixelOrigin()),y).round(),O.zoom=y,this._setZoomTransform(O,z.getCenter(),z.getZoom()),p(O.el.offsetWidth),this._onCreateLevel(O)),this._level=O,O}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var y,S,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(y in this._tiles)S=this._tiles[y],S.retain=S.current;for(y in this._tiles)if(S=this._tiles[y],S.current&&!S.active){var O=S.coords;this._retainParent(O.x,O.y,O.z,O.z-5)||this._retainChildren(O.x,O.y,O.z,O.z+2)}for(y in this._tiles)this._tiles[y].retain||this._removeTile(y)}},_removeTilesAtZoom:function(y){for(var S in this._tiles)this._tiles[S].coords.z===y&&this._removeTile(S)},_removeAllTiles:function(){for(var y in this._tiles)this._removeTile(y)},_invalidateAll:function(){for(var y in this._levels)er(this._levels[y].el),this._onRemoveLevel(Number(y)),delete this._levels[y];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(y,S,M,O){var z=Math.floor(y/2),Z=Math.floor(S/2),se=M-1,xe=new he(+z,+Z);xe.z=+se;var Ae=this._tileCoordsToKey(xe),Ve=this._tiles[Ae];return Ve&&Ve.active?(Ve.retain=!0,!0):(Ve&&Ve.loaded&&(Ve.retain=!0),se>O?this._retainParent(z,Z,se,O):!1)},_retainChildren:function(y,S,M,O){for(var z=2*y;z<2*y+2;z++)for(var Z=2*S;Z<2*S+2;Z++){var se=new he(z,Z);se.z=M+1;var xe=this._tileCoordsToKey(se),Ae=this._tiles[xe];if(Ae&&Ae.active){Ae.retain=!0;continue}else Ae&&Ae.loaded&&(Ae.retain=!0);M+1<O&&this._retainChildren(z,Z,M+1,O)}},_resetView:function(y){var S=y&&(y.pinch||y.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),S,S)},_animateZoom:function(y){this._setView(y.center,y.zoom,!0,y.noUpdate)},_clampZoom:function(y){var S=this.options;return S.minNativeZoom!==void 0&&y<S.minNativeZoom?S.minNativeZoom:S.maxNativeZoom!==void 0&&S.maxNativeZoom<y?S.maxNativeZoom:y},_setView:function(y,S,M,O){var z=Math.round(S);this.options.maxZoom!==void 0&&z>this.options.maxZoom||this.options.minZoom!==void 0&&z<this.options.minZoom?z=void 0:z=this._clampZoom(z);var Z=this.options.updateWhenZooming&&z!==this._tileZoom;(!O||Z)&&(this._tileZoom=z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),z!==void 0&&this._update(y),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(y,S)},_setZoomTransforms:function(y,S){for(var M in this._levels)this._setZoomTransform(this._levels[M],y,S)},_setZoomTransform:function(y,S,M){var O=this._map.getZoomScale(M,y.zoom),z=y.origin.multiplyBy(O).subtract(this._map._getNewPixelOrigin(S,M)).round();Mt.any3d?Da(y.el,z,O):hn(y.el,z)},_resetGrid:function(){var y=this._map,S=y.options.crs,M=this._tileSize=this.getTileSize(),O=this._tileZoom,z=this._map.getPixelWorldBounds(this._tileZoom);z&&(this._globalTileRange=this._pxBoundsToTileRange(z)),this._wrapX=S.wrapLng&&!this.options.noWrap&&[Math.floor(y.project([0,S.wrapLng[0]],O).x/M.x),Math.ceil(y.project([0,S.wrapLng[1]],O).x/M.y)],this._wrapY=S.wrapLat&&!this.options.noWrap&&[Math.floor(y.project([S.wrapLat[0],0],O).y/M.x),Math.ceil(y.project([S.wrapLat[1],0],O).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(y){var S=this._map,M=S._animatingZoom?Math.max(S._animateToZoom,S.getZoom()):S.getZoom(),O=S.getZoomScale(M,this._tileZoom),z=S.project(y,this._tileZoom).floor(),Z=S.getSize().divideBy(O*2);return new _e(z.subtract(Z),z.add(Z))},_update:function(y){var S=this._map;if(S){var M=this._clampZoom(S.getZoom());if(y===void 0&&(y=S.getCenter()),this._tileZoom!==void 0){var O=this._getTiledPixelBounds(y),z=this._pxBoundsToTileRange(O),Z=z.getCenter(),se=[],xe=this.options.keepBuffer,Ae=new _e(z.getBottomLeft().subtract([xe,-xe]),z.getTopRight().add([xe,-xe]));if(!(isFinite(z.min.x)&&isFinite(z.min.y)&&isFinite(z.max.x)&&isFinite(z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ve in this._tiles){var ct=this._tiles[Ve].coords;(ct.z!==this._tileZoom||!Ae.contains(new he(ct.x,ct.y)))&&(this._tiles[Ve].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(y,M);return}for(var xt=z.min.y;xt<=z.max.y;xt++)for(var $t=z.min.x;$t<=z.max.x;$t++){var Jt=new he($t,xt);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var Sr=this._tiles[this._tileCoordsToKey(Jt)];Sr?Sr.current=!0:se.push(Jt)}}if(se.sort(function(Fs,Fa){return Fs.distanceTo(Z)-Fa.distanceTo(Z)}),se.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var dn=document.createDocumentFragment();for($t=0;$t<se.length;$t++)this._addTile(se[$t],dn);this._level.el.appendChild(dn)}}}},_isValidTile:function(y){var S=this._map.options.crs;if(!S.infinite){var M=this._globalTileRange;if(!S.wrapLng&&(y.x<M.min.x||y.x>M.max.x)||!S.wrapLat&&(y.y<M.min.y||y.y>M.max.y))return!1}if(!this.options.bounds)return!0;var O=this._tileCoordsToBounds(y);return Ke(this.options.bounds).overlaps(O)},_keyToBounds:function(y){return this._tileCoordsToBounds(this._keyToTileCoords(y))},_tileCoordsToNwSe:function(y){var S=this._map,M=this.getTileSize(),O=y.scaleBy(M),z=O.add(M),Z=S.unproject(O,y.z),se=S.unproject(z,y.z);return[Z,se]},_tileCoordsToBounds:function(y){var S=this._tileCoordsToNwSe(y),M=new qe(S[0],S[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(y){return y.x+":"+y.y+":"+y.z},_keyToTileCoords:function(y){var S=y.split(":"),M=new he(+S[0],+S[1]);return M.z=+S[2],M},_removeTile:function(y){var S=this._tiles[y];S&&(er(S.el),delete this._tiles[y],this.fire("tileunload",{tile:S.el,coords:this._keyToTileCoords(y)}))},_initTile:function(y){lt(y,"leaflet-tile");var S=this.getTileSize();y.style.width=S.x+"px",y.style.height=S.y+"px",y.onselectstart=p,y.onmousemove=p,Mt.ielt9&&this.options.opacity<1&&Po(y,this.options.opacity)},_addTile:function(y,S){var M=this._getTilePos(y),O=this._tileCoordsToKey(y),z=this.createTile(this._wrapCoords(y),o(this._tileReady,this,y));this._initTile(z),this.createTile.length<2&&Q(o(this._tileReady,this,y,null,z)),hn(z,M),this._tiles[O]={el:z,coords:y,current:!0},S.appendChild(z),this.fire("tileloadstart",{tile:z,coords:y})},_tileReady:function(y,S,M){S&&this.fire("tileerror",{error:S,tile:M,coords:y});var O=this._tileCoordsToKey(y);M=this._tiles[O],M&&(M.loaded=+new Date,this._map._fadeAnimated?(Po(M.el,0),te(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),S||(lt(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:y})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Mt.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(y){return y.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(y){var S=new he(this._wrapX?u(y.x,this._wrapX):y.x,this._wrapY?u(y.y,this._wrapY):y.y);return S.z=y.z,S},_pxBoundsToTileRange:function(y){var S=this.getTileSize();return new _e(y.min.unscaleBy(S).floor(),y.max.unscaleBy(S).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var y in this._tiles)if(!this._tiles[y].loaded)return!1;return!0}});function Al(y){return new ff(y)}var mf=ff.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(y,S){this._url=y,S=_(this,S),S.detectRetina&&Mt.retina&&S.maxZoom>0?(S.tileSize=Math.floor(S.tileSize/2),S.zoomReverse?(S.zoomOffset--,S.minZoom=Math.min(S.maxZoom,S.minZoom+1)):(S.zoomOffset++,S.maxZoom=Math.max(S.minZoom,S.maxZoom-1)),S.minZoom=Math.max(0,S.minZoom)):S.zoomReverse?S.minZoom=Math.min(S.maxZoom,S.minZoom):S.maxZoom=Math.max(S.minZoom,S.maxZoom),typeof S.subdomains=="string"&&(S.subdomains=S.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(y,S){return this._url===y&&S===void 0&&(S=!0),this._url=y,S||this.redraw(),this},createTile:function(y,S){var M=document.createElement("img");return Xt(M,"load",o(this._tileOnLoad,this,S,M)),Xt(M,"error",o(this._tileOnError,this,S,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(y),M},getTileUrl:function(y){var S={r:Mt.retina?"@2x":"",s:this._getSubdomain(y),x:y.x,y:y.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-y.y;this.options.tms&&(S.y=M),S["-y"]=M}return I(this._url,n(S,this.options))},_tileOnLoad:function(y,S){Mt.ielt9?setTimeout(o(y,this,null,S),0):y(null,S)},_tileOnError:function(y,S,M){var O=this.options.errorTileUrl;O&&S.getAttribute("src")!==O&&(S.src=O),y(M,S)},_onTileRemove:function(y){y.tile.onload=null},_getZoomForUrl:function(){var y=this._tileZoom,S=this.options.maxZoom,M=this.options.zoomReverse,O=this.options.zoomOffset;return M&&(y=S-y),y+O},_getSubdomain:function(y){var S=Math.abs(y.x+y.y)%this.options.subdomains.length;return this.options.subdomains[S]},_abortLoading:function(){var y,S;for(y in this._tiles)if(this._tiles[y].coords.z!==this._tileZoom&&(S=this._tiles[y].el,S.onload=p,S.onerror=p,!S.complete)){S.src=R;var M=this._tiles[y].coords;er(S),delete this._tiles[y],this.fire("tileabort",{tile:S,coords:M})}},_removeTile:function(y){var S=this._tiles[y];if(S)return S.el.setAttribute("src",R),ff.prototype._removeTile.call(this,y)},_tileReady:function(y,S,M){if(!(!this._map||M&&M.getAttribute("src")===R))return ff.prototype._tileReady.call(this,y,S,M)}});function ha(y,S){return new mf(y,S)}var da=mf.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(y,S){this._url=y;var M=n({},this.defaultWmsParams);for(var O in S)O in this.options||(M[O]=S[O]);S=_(this,S);var z=S.detectRetina&&Mt.retina?2:1,Z=this.getTileSize();M.width=Z.x*z,M.height=Z.y*z,this.wmsParams=M},onAdd:function(y){this._crs=this.options.crs||y.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var S=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[S]=this._crs.code,mf.prototype.onAdd.call(this,y)},getTileUrl:function(y){var S=this._tileCoordsToNwSe(y),M=this._crs,O=ke(M.project(S[0]),M.project(S[1])),z=O.min,Z=O.max,se=(this._wmsVersion>=1.3&&this._crs===TO?[z.y,z.x,Z.y,Z.x]:[z.x,z.y,Z.x,Z.y]).join(","),xe=mf.prototype.getTileUrl.call(this,y);return xe+T(this.wmsParams,xe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+se},setParams:function(y,S){return n(this.wmsParams,y),S||this.redraw(),this}});function Zy(y,S){return new da(y,S)}mf.WMS=da,ha.wms=Zy;var Pl=Ml.extend({options:{padding:.1},initialize:function(y){_(this,y),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var y={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(y.zoomanim=this._onAnimZoom),y},_onAnimZoom:function(y){this._updateTransform(y.center,y.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,S){var M=this._map.getZoomScale(S,this._zoom),O=this._map.getSize().multiplyBy(.5+this.options.padding),z=this._map.project(this._center,S),Z=O.multiplyBy(-M).add(z).subtract(this._map._getNewPixelOrigin(y,S));Mt.any3d?Da(this._container,Z,M):hn(this._container,Z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var y in this._layers)this._layers[y]._reset()},_onZoomEnd:function(){for(var y in this._layers)this._layers[y]._project()},_updatePaths:function(){for(var y in this._layers)this._layers[y]._update()},_update:function(){var y=this.options.padding,S=this._map.getSize(),M=this._map.containerPointToLayerPoint(S.multiplyBy(-y)).round();this._bounds=new _e(M,M.add(S.multiplyBy(1+y*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),K0=Pl.extend({options:{tolerance:0},getEvents:function(){var y=Pl.prototype.getEvents.call(this);return y.viewprereset=this._onViewPreReset,y},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pl.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var y=this._container=document.createElement("canvas");Xt(y,"mousemove",this._onMouseMove,this),Xt(y,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xt(y,"mouseout",this._handleMouseOut,this),y._leaflet_disable_events=!0,this._ctx=y.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,er(this._container),Ni(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var y;this._redrawBounds=null;for(var S in this._layers)y=this._layers[S],y._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pl.prototype._update.call(this);var y=this._bounds,S=this._container,M=y.getSize(),O=Mt.retina?2:1;hn(S,y.min),S.width=O*M.x,S.height=O*M.y,S.style.width=M.x+"px",S.style.height=M.y+"px",Mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-y.min.x,-y.min.y),this.fire("update")}},_reset:function(){Pl.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(y){this._updateDashArray(y),this._layers[l(y)]=y;var S=y._order={layer:y,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=S),this._drawLast=S,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(y){this._requestRedraw(y)},_removePath:function(y){var S=y._order,M=S.next,O=S.prev;M?M.prev=O:this._drawLast=O,O?O.next=M:this._drawFirst=M,delete y._order,delete this._layers[l(y)],this._requestRedraw(y)},_updatePath:function(y){this._extendRedrawBounds(y),y._project(),y._update(),this._requestRedraw(y)},_updateStyle:function(y){this._updateDashArray(y),this._requestRedraw(y)},_updateDashArray:function(y){if(typeof y.options.dashArray=="string"){var S=y.options.dashArray.split(/[, ]+/),M=[],O,z;for(z=0;z<S.length;z++){if(O=Number(S[z]),isNaN(O))return;M.push(O)}y.options._dashArray=M}else y.options._dashArray=y.options.dashArray},_requestRedraw:function(y){this._map&&(this._extendRedrawBounds(y),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(y){if(y._pxBounds){var S=(y.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _e,this._redrawBounds.extend(y._pxBounds.min.subtract([S,S])),this._redrawBounds.extend(y._pxBounds.max.add([S,S]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var y=this._redrawBounds;if(y){var S=y.getSize();this._ctx.clearRect(y.min.x,y.min.y,S.x,S.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var y,S=this._redrawBounds;if(this._ctx.save(),S){var M=S.getSize();this._ctx.beginPath(),this._ctx.rect(S.min.x,S.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var O=this._drawFirst;O;O=O.next)y=O.layer,(!S||y._pxBounds&&y._pxBounds.intersects(S))&&y._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(y,S){if(this._drawing){var M,O,z,Z,se=y._parts,xe=se.length,Ae=this._ctx;if(xe){for(Ae.beginPath(),M=0;M<xe;M++){for(O=0,z=se[M].length;O<z;O++)Z=se[M][O],Ae[O?"lineTo":"moveTo"](Z.x,Z.y);S&&Ae.closePath()}this._fillStroke(Ae,y)}}},_updateCircle:function(y){if(!(!this._drawing||y._empty())){var S=y._point,M=this._ctx,O=Math.max(Math.round(y._radius),1),z=(Math.max(Math.round(y._radiusY),1)||O)/O;z!==1&&(M.save(),M.scale(1,z)),M.beginPath(),M.arc(S.x,S.y/z,O,0,Math.PI*2,!1),z!==1&&M.restore(),this._fillStroke(M,y)}},_fillStroke:function(y,S){var M=S.options;M.fill&&(y.globalAlpha=M.fillOpacity,y.fillStyle=M.fillColor||M.color,y.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(y.setLineDash&&y.setLineDash(S.options&&S.options._dashArray||[]),y.globalAlpha=M.opacity,y.lineWidth=M.weight,y.strokeStyle=M.color,y.lineCap=M.lineCap,y.lineJoin=M.lineJoin,y.stroke())},_onClick:function(y){for(var S=this._map.mouseEventToLayerPoint(y),M,O,z=this._drawFirst;z;z=z.next)M=z.layer,M.options.interactive&&M._containsPoint(S)&&(!(y.type==="click"||y.type==="preclick")||!this._map._draggableMoved(M))&&(O=M);this._fireEvent(O?[O]:!1,y)},_onMouseMove:function(y){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var S=this._map.mouseEventToLayerPoint(y);this._handleMouseHover(y,S)}},_handleMouseOut:function(y){var S=this._hoveredLayer;S&&(Ht(this._container,"leaflet-interactive"),this._fireEvent([S],y,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(y,S){if(!this._mouseHoverThrottled){for(var M,O,z=this._drawFirst;z;z=z.next)M=z.layer,M.options.interactive&&M._containsPoint(S)&&(O=M);O!==this._hoveredLayer&&(this._handleMouseOut(y),O&&(lt(this._container,"leaflet-interactive"),this._fireEvent([O],y,"mouseover"),this._hoveredLayer=O)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,y),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(y,S,M){this._map._fireDOMEvent(S,M||S.type,y)},_bringToFront:function(y){var S=y._order;if(S){var M=S.next,O=S.prev;if(M)M.prev=O;else return;O?O.next=M:M&&(this._drawFirst=M),S.prev=this._drawLast,this._drawLast.next=S,S.next=null,this._drawLast=S,this._requestRedraw(y)}},_bringToBack:function(y){var S=y._order;if(S){var M=S.next,O=S.prev;if(O)O.next=M;else return;M?M.prev=O:O&&(this._drawLast=O),S.prev=null,S.next=this._drawFirst,this._drawFirst.prev=S,this._drawFirst=S,this._requestRedraw(y)}}});function J0(y){return Mt.canvas?new K0(y):null}var yf=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(y){return document.createElement("<lvml:"+y+' class="lvml">')}}catch{}return function(y){return document.createElement("<"+y+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Yy={_initContainer:function(){this._container=mi("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pl.prototype._update.call(this),this.fire("update"))},_initPath:function(y){var S=y._container=yf("shape");lt(S,"leaflet-vml-shape "+(this.options.className||"")),S.coordsize="1 1",y._path=yf("path"),S.appendChild(y._path),this._updateStyle(y),this._layers[l(y)]=y},_addPath:function(y){var S=y._container;this._container.appendChild(S),y.options.interactive&&y.addInteractiveTarget(S)},_removePath:function(y){var S=y._container;er(S),y.removeInteractiveTarget(S),delete this._layers[l(y)]},_updateStyle:function(y){var S=y._stroke,M=y._fill,O=y.options,z=y._container;z.stroked=!!O.stroke,z.filled=!!O.fill,O.stroke?(S||(S=y._stroke=yf("stroke")),z.appendChild(S),S.weight=O.weight+"px",S.color=O.color,S.opacity=O.opacity,O.dashArray?S.dashStyle=A(O.dashArray)?O.dashArray.join(" "):O.dashArray.replace(/( *, *)/g," "):S.dashStyle="",S.endcap=O.lineCap.replace("butt","flat"),S.joinstyle=O.lineJoin):S&&(z.removeChild(S),y._stroke=null),O.fill?(M||(M=y._fill=yf("fill")),z.appendChild(M),M.color=O.fillColor||O.color,M.opacity=O.fillOpacity):M&&(z.removeChild(M),y._fill=null)},_updateCircle:function(y){var S=y._point.round(),M=Math.round(y._radius),O=Math.round(y._radiusY||M);this._setPath(y,y._empty()?"M0 0":"AL "+S.x+","+S.y+" "+M+","+O+" 0,"+65535*360)},_setPath:function(y,S){y._path.v=S},_bringToFront:function(y){Te(y._container)},_bringToBack:function(y){We(y._container)}},X0=Mt.vml?yf:Sn,rd=Pl.extend({_initContainer:function(){this._container=X0("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=X0("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){er(this._container),Ni(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pl.prototype._update.call(this);var y=this._bounds,S=y.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(S))&&(this._svgSize=S,M.setAttribute("width",S.x),M.setAttribute("height",S.y)),hn(M,y.min),M.setAttribute("viewBox",[y.min.x,y.min.y,S.x,S.y].join(" ")),this.fire("update")}},_initPath:function(y){var S=y._path=X0("path");y.options.className&&lt(S,y.options.className),y.options.interactive&&lt(S,"leaflet-interactive"),this._updateStyle(y),this._layers[l(y)]=y},_addPath:function(y){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(y._path),y.addInteractiveTarget(y._path)},_removePath:function(y){er(y._path),y.removeInteractiveTarget(y._path),delete this._layers[l(y)]},_updatePath:function(y){y._project(),y._update()},_updateStyle:function(y){var S=y._path,M=y.options;S&&(M.stroke?(S.setAttribute("stroke",M.color),S.setAttribute("stroke-opacity",M.opacity),S.setAttribute("stroke-width",M.weight),S.setAttribute("stroke-linecap",M.lineCap),S.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?S.setAttribute("stroke-dasharray",M.dashArray):S.removeAttribute("stroke-dasharray"),M.dashOffset?S.setAttribute("stroke-dashoffset",M.dashOffset):S.removeAttribute("stroke-dashoffset")):S.setAttribute("stroke","none"),M.fill?(S.setAttribute("fill",M.fillColor||M.color),S.setAttribute("fill-opacity",M.fillOpacity),S.setAttribute("fill-rule",M.fillRule||"evenodd")):S.setAttribute("fill","none"))},_updatePoly:function(y,S){this._setPath(y,En(y._parts,S))},_updateCircle:function(y){var S=y._point,M=Math.max(Math.round(y._radius),1),O=Math.max(Math.round(y._radiusY),1)||M,z="a"+M+","+O+" 0 1,0 ",Z=y._empty()?"M0 0":"M"+(S.x-M)+","+S.y+z+M*2+",0 "+z+-M*2+",0 ";this._setPath(y,Z)},_setPath:function(y,S){y._path.setAttribute("d",S)},_bringToFront:function(y){Te(y._path)},_bringToBack:function(y){We(y._path)}});Mt.vml&&rd.include(Yy);function gf(y){return Mt.svg||Mt.vml?new rd(y):null}yi.include({getRenderer:function(y){var S=y.options.renderer||this._getPaneRenderer(y.options.pane)||this.options.renderer||this._renderer;return S||(S=this._renderer=this._createRenderer()),this.hasLayer(S)||this.addLayer(S),S},_getPaneRenderer:function(y){if(y==="overlayPane"||y===void 0)return!1;var S=this._paneRenderers[y];return S===void 0&&(S=this._createRenderer({pane:y}),this._paneRenderers[y]=S),S},_createRenderer:function(y){return this.options.preferCanvas&&J0(y)||gf(y)}});var kO=qy.extend({initialize:function(y,S){qy.prototype.initialize.call(this,this._boundsToLatLngs(y),S)},setBounds:function(y){return this.setLatLngs(this._boundsToLatLngs(y))},_boundsToLatLngs:function(y){return y=Ke(y),[y.getSouthWest(),y.getNorthWest(),y.getNorthEast(),y.getSouthEast()]}});function pa(y,S){return new kO(y,S)}rd.create=X0,rd.pointsToPath=En,ua.geometryToLayer=H0,ua.coordsToLatLng=D1,ua.coordsToLatLngs=W0,ua.latLngToCoords=Z0,ua.latLngsToCoords=F1,ua.getFeature=Cl,ua.asFeature=Hy,yi.mergeOptions({boxZoom:!0});var B1=$l.extend({initialize:function(y){this._map=y,this._container=y._container,this._pane=y._panes.overlayPane,this._resetStateTimeout=0,y.on("unload",this._destroy,this)},addHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ni(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){er(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(y){if(!y.shiftKey||y.which!==1&&y.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ic(),z0(),this._startPoint=this._map.mouseEventToContainerPoint(y),Xt(document,{contextmenu:kc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(y){this._moved||(this._moved=!0,this._box=mi("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(y);var S=new _e(this._point,this._startPoint),M=S.getSize();hn(this._box,S.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(er(this._box),Ht(this._container,"leaflet-crosshair")),F0(),b$(),Ni(document,{contextmenu:kc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(y){if(!(y.which!==1&&y.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var S=new qe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(S).fire("boxzoomend",{boxZoomBounds:S})}},_onKeyDown:function(y){y.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yi.addInitHook("addHandler","boxZoom",B1),yi.mergeOptions({doubleClickZoom:!0});var Lc=$l.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(y){var S=this._map,M=S.getZoom(),O=S.options.zoomDelta,z=y.originalEvent.shiftKey?M-O:M+O;S.options.doubleClickZoom==="center"?S.setZoom(z):S.setZoomAround(y.containerPoint,z)}});yi.addInitHook("addHandler","doubleClickZoom",Lc),yi.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var O$=$l.extend({addHooks:function(){if(!this._draggable){var y=this._map;this._draggable=new td(y._mapPane,y._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),y.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),y.on("zoomend",this._onZoomEnd,this),y.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ht(this._map._container,"leaflet-grab"),Ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var y=this._map;if(y._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var S=Ke(this._map.options.maxBounds);this._offsetLimit=ke(this._map.latLngToContainerPoint(S.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(S.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;y.fire("movestart").fire("dragstart"),y.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(y){if(this._map.options.inertia){var S=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(S),this._prunePositions(S)}this._map.fire("move",y).fire("drag",y)},_prunePositions:function(y){for(;this._positions.length>1&&y-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var y=this._map.getSize().divideBy(2),S=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=S.subtract(y).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(y,S){return y-(y-S)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var y=this._draggable._newPos.subtract(this._draggable._startPos),S=this._offsetLimit;y.x<S.min.x&&(y.x=this._viscousLimit(y.x,S.min.x)),y.y<S.min.y&&(y.y=this._viscousLimit(y.y,S.min.y)),y.x>S.max.x&&(y.x=this._viscousLimit(y.x,S.max.x)),y.y>S.max.y&&(y.y=this._viscousLimit(y.y,S.max.y)),this._draggable._newPos=this._draggable._startPos.add(y)}},_onPreDragWrap:function(){var y=this._worldWidth,S=Math.round(y/2),M=this._initialWorldOffset,O=this._draggable._newPos.x,z=(O-S+M)%y+S-M,Z=(O+S+M)%y-S-M,se=Math.abs(z+M)<Math.abs(Z+M)?z:Z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=se},_onDragEnd:function(y){var S=this._map,M=S.options,O=!M.inertia||y.noInertia||this._times.length<2;if(S.fire("dragend",y),O)S.fire("moveend");else{this._prunePositions(+new Date);var z=this._lastPos.subtract(this._positions[0]),Z=(this._lastTime-this._times[0])/1e3,se=M.easeLinearity,xe=z.multiplyBy(se/Z),Ae=xe.distanceTo([0,0]),Ve=Math.min(M.inertiaMaxSpeed,Ae),ct=xe.multiplyBy(Ve/Ae),xt=Ve/(M.inertiaDeceleration*se),$t=ct.multiplyBy(-xt/2).round();!$t.x&&!$t.y?S.fire("moveend"):($t=S._limitOffset($t,S.options.maxBounds),Q(function(){S.panBy($t,{duration:xt,easeLinearity:se,noMoveStart:!0,animate:!0})}))}}});yi.addInitHook("addHandler","dragging",O$),yi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Q0=$l.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(y){this._map=y,this._setPanDelta(y.options.keyboardPanDelta),this._setZoomDelta(y.options.zoomDelta)},addHooks:function(){var y=this._map._container;y.tabIndex<=0&&(y.tabIndex="0"),Xt(y,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ni(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var y=document.body,S=document.documentElement,M=y.scrollTop||S.scrollTop,O=y.scrollLeft||S.scrollLeft;this._map._container.focus(),window.scrollTo(O,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(y){var S=this._panKeys={},M=this.keyCodes,O,z;for(O=0,z=M.left.length;O<z;O++)S[M.left[O]]=[-1*y,0];for(O=0,z=M.right.length;O<z;O++)S[M.right[O]]=[y,0];for(O=0,z=M.down.length;O<z;O++)S[M.down[O]]=[0,y];for(O=0,z=M.up.length;O<z;O++)S[M.up[O]]=[0,-1*y]},_setZoomDelta:function(y){var S=this._zoomKeys={},M=this.keyCodes,O,z;for(O=0,z=M.zoomIn.length;O<z;O++)S[M.zoomIn[O]]=y;for(O=0,z=M.zoomOut.length;O<z;O++)S[M.zoomOut[O]]=-y},_addHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ni(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(y){if(!(y.altKey||y.ctrlKey||y.metaKey)){var S=y.keyCode,M=this._map,O;if(S in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(O=this._panKeys[S],y.shiftKey&&(O=X(O).multiplyBy(3)),M.options.maxBounds&&(O=M._limitOffset(X(O),M.options.maxBounds)),M.options.worldCopyJump){var z=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(O)));M.panTo(z)}else M.panBy(O)}else if(S in this._zoomKeys)M.setZoom(M.getZoom()+(y.shiftKey?3:1)*this._zoomKeys[S]);else if(S===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;kc(y)}}});yi.addInitHook("addHandler","keyboard",Q0),yi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var nd=$l.extend({addHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ni(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(y){var S=B0(y),M=this._map.options.wheelDebounceTime;this._delta+=S,this._lastMousePos=this._map.mouseEventToContainerPoint(y),this._startTime||(this._startTime=+new Date);var O=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),O),kc(y)},_performZoom:function(){var y=this._map,S=y.getZoom(),M=this._map.options.zoomSnap||0;y._stop();var O=this._delta/(this._map.options.wheelPxPerZoomLevel*4),z=4*Math.log(2/(1+Math.exp(-Math.abs(O))))/Math.LN2,Z=M?Math.ceil(z/M)*M:z,se=y._limitZoom(S+(this._delta>0?Z:-Z))-S;this._delta=0,this._startTime=null,se&&(y.options.scrollWheelZoom==="center"?y.setZoom(S+se):y.setZoomAround(this._lastMousePos,S+se))}});yi.addInitHook("addHandler","scrollWheelZoom",nd);var L$=600;yi.mergeOptions({tapHold:Mt.touchNative&&Mt.safari&&Mt.mobile,tapTolerance:15});var V1=$l.extend({addHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ni(this._map._container,"touchstart",this._onDown,this)},_onDown:function(y){if(clearTimeout(this._holdTimeout),y.touches.length===1){var S=y.touches[0];this._startPos=this._newPos=new he(S.clientX,S.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Xt(document,"touchend",$n),Xt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",S))},this),L$),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function y(){Ni(document,"touchend",$n),Ni(document,"touchend touchcancel",y)},_cancel:function(){clearTimeout(this._holdTimeout),Ni(document,"touchend touchcancel contextmenu",this._cancel,this),Ni(document,"touchmove",this._onMove,this)},_onMove:function(y){var S=y.touches[0];this._newPos=new he(S.clientX,S.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(y,S){var M=new MouseEvent(y,{bubbles:!0,cancelable:!0,view:window,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY});M._simulated=!0,S.target.dispatchEvent(M)}});yi.addInitHook("addHandler","tapHold",V1),yi.mergeOptions({touchZoom:Mt.touch,bounceAtZoomLimits:!0});var vf=$l.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ht(this._map._container,"leaflet-touch-zoom"),Ni(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(y){var S=this._map;if(!(!y.touches||y.touches.length!==2||S._animatingZoom||this._zooming)){var M=S.mouseEventToContainerPoint(y.touches[0]),O=S.mouseEventToContainerPoint(y.touches[1]);this._centerPoint=S.getSize()._divideBy(2),this._startLatLng=S.containerPointToLatLng(this._centerPoint),S.options.touchZoom!=="center"&&(this._pinchStartLatLng=S.containerPointToLatLng(M.add(O)._divideBy(2))),this._startDist=M.distanceTo(O),this._startZoom=S.getZoom(),this._moved=!1,this._zooming=!0,S._stop(),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),$n(y)}},_onTouchMove:function(y){if(!(!y.touches||y.touches.length!==2||!this._zooming)){var S=this._map,M=S.mouseEventToContainerPoint(y.touches[0]),O=S.mouseEventToContainerPoint(y.touches[1]),z=M.distanceTo(O)/this._startDist;if(this._zoom=S.getScaleZoom(z,this._startZoom),!S.options.bounceAtZoomLimits&&(this._zoom<S.getMinZoom()&&z<1||this._zoom>S.getMaxZoom()&&z>1)&&(this._zoom=S._limitZoom(this._zoom)),S.options.touchZoom==="center"){if(this._center=this._startLatLng,z===1)return}else{var Z=M._add(O)._divideBy(2)._subtract(this._centerPoint);if(z===1&&Z.x===0&&Z.y===0)return;this._center=S.unproject(S.project(this._pinchStartLatLng,this._zoom).subtract(Z),this._zoom)}this._moved||(S._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var se=o(S._move,S,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(se,this,!0),$n(y)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),Ni(document,"touchmove",this._onTouchMove,this),Ni(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yi.addInitHook("addHandler","touchZoom",vf),yi.BoxZoom=B1,yi.DoubleClickZoom=Lc,yi.Drag=O$,yi.Keyboard=Q0,yi.ScrollWheelZoom=nd,yi.TapHold=V1,yi.TouchZoom=vf,i.Bounds=_e,i.Browser=Mt,i.CRS=di,i.Canvas=K0,i.Circle=A$,i.CircleMarker=q0,i.Class=ee,i.Control=ko,i.DivIcon=k$,i.DivOverlay=Il,i.DomEvent=qU,i.DomUtil=fO,i.Draggable=td,i.Evented=ue,i.FeatureGroup=la,i.GeoJSON=ua,i.GridLayer=ff,i.Handler=$l,i.Icon=By,i.ImageOverlay=Oc,i.LatLng=Qe,i.LatLngBounds=qe,i.Layer=Ml,i.LayerGroup=df,i.LineUtil=SO,i.Map=yi,i.Marker=Gy,i.Mixin=KU,i.Path=Ru,i.Point=he,i.PolyUtil=JU,i.Polygon=qy,i.Polyline=Nu,i.Popup=Y0,i.PosAnimation=P1,i.Projection=EO,i.Rectangle=kO,i.Renderer=Pl,i.SVG=rd,i.SVGOverlay=id,i.TileLayer=mf,i.Tooltip=U1,i.Transformation=Pt,i.Util=re,i.VideoOverlay=j1,i.bind=o,i.bounds=ke,i.canvas=J0,i.circle=r6,i.circleMarker=MO,i.control=jy,i.divIcon=PO,i.extend=n,i.featureGroup=G0,i.geoJSON=z1,i.geoJson=CO,i.gridLayer=Al,i.icon=N1,i.imageOverlay=Wy,i.latLng=Xe,i.latLngBounds=Ke,i.layerGroup=$O,i.map=V0,i.marker=I$,i.point=X,i.polygon=ca,i.polyline=n6,i.popup=s6,i.rectangle=pa,i.setOptions=_,i.stamp=l,i.svg=gf,i.svgOverlay=AO,i.tileLayer=ha,i.tooltip=o6,i.transformation=He,i.version=r,i.videoOverlay=IO;var Ky=window.L;i.noConflict=function(){return window.L=Ky,this},window.L=i}))})(PI,PI.exports)),PI.exports}var n$=ELe();const Uv=Qp(n$);function cU(t,e,i){return Object.freeze({instance:t,context:e,container:i})}function uU(t,e){return e==null?function(r,n){const s=U.useRef(void 0);return s.current||(s.current=t(r,n)),s}:function(r,n){const s=U.useRef(void 0);s.current||(s.current=t(r,n));const o=U.useRef(r),{instance:a}=s.current;return U.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,e]),s}}function TLe(t,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function $Le(t){return function(i){const r=aU(),n=t(lU(i,r),r);return _Le(r.map,i.attribution),xte(n.current,i.eventHandlers),TLe(n.current,r),n}}function u$t(t,e){const i=U.useRef(void 0);U.useEffect(function(){if(e.pathOptions!==i.current){const n=e.pathOptions??{};t.instance.setStyle(n),i.current=n}},[t,e])}function h$t(t){return function(i){const r=aU(),n=t(lU(i,r),r);return xte(n.current,i.eventHandlers),TLe(n.current,r),u$t(n.current,i),n}}function d$t(t,e){const i=uU(t,e),r=$Le(i);return SLe(r)}function p$t(t,e){const i=uU(t),r=l$t(i,e);return o$t(r)}function f$t(t,e){const i=uU(t,e),r=h$t(i);return SLe(r)}function m$t(t,e){const i=uU(t,e),r=$Le(i);return a$t(r)}function y$t(t,e,i){const{opacity:r,zIndex:n}=e;r!=null&&r!==i.opacity&&t.setOpacity(r),n!=null&&n!==i.zIndex&&t.setZIndex(n)}function bD(){return aU().map}function MLe(t,e){const i=bD();return U.useEffect(function(){return i.on(t,e),function(){i.off(t,e)}},[i,t,e]),i}function g$t({bounds:t,boundsOptions:e,center:i,children:r,className:n,id:s,placeholder:o,style:a,whenReady:l,zoom:c,...u},p){const[m]=U.useState({className:n,id:s,style:a}),[v,w]=U.useState(null),_=U.useRef(void 0);U.useImperativeHandle(p,()=>(v==null?void 0:v.map)??null,[v]);const T=U.useCallback(I=>{if(I!==null&&!_.current){const A=new n$.Map(I,u);_.current=A,i!=null&&c!=null?A.setView(i,c):t!=null&&A.fitBounds(t,e),l!=null&&A.whenReady(l),w(s$t(A))}},[]);U.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const $=v?xD.createElement(_te,{value:v},r):o??null;return xD.createElement("div",{...m,ref:T},$)}const CLe=U.forwardRef(g$t),ILe=d$t(function({position:e,...i},r){const n=new n$.Marker(e,i);return cU(n,xLe(r,{overlayContainer:n}))},function(e,i,r){i.position!==r.position&&e.setLatLng(i.position),i.icon!=null&&i.icon!==r.icon&&e.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==r.opacity&&e.setOpacity(i.opacity),e.dragging!=null&&i.draggable!==r.draggable&&(i.draggable===!0?e.dragging.enable():e.dragging.disable())}),v$t=f$t(function({positions:e,...i},r){const n=new n$.Polyline(e,i);return cU(n,xLe(r,{overlayContainer:n}))},function(e,i,r){i.positions!==r.positions&&e.setLatLngs(i.positions)}),ALe=p$t(function(e,i){const r=new n$.Popup(e,i.overlayContainer);return cU(r,i)},function(e,i,{position:r},n){U.useEffect(function(){const{instance:o}=e;function a(c){c.popup===o&&(o.update(),n(!0))}function l(c){c.popup===o&&n(!1)}return i.map.on({popupopen:a,popupclose:l}),i.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(i.map)):i.overlayContainer.bindPopup(o),function(){var u;i.map.off({popupopen:a,popupclose:l}),(u=i.overlayContainer)==null||u.unbindPopup(),i.map.removeLayer(o)}},[e,i,n,r])}),PLe=m$t(function({url:e,...i},r){const n=new n$.TileLayer(e,lU(i,r));return cU(n,r)},function(e,i,r){y$t(e,i,r);const{url:n}=i;n!=null&&n!==r.url&&e.setUrl(n)}),b$t=Uv.divIcon({className:"custom-marker",html:`<div style="
      width:16px;
      height:16px;
      background:red;
      border:2px solid white;
      border-radius:50%;
  "></div>`,iconSize:[16,16],iconAnchor:[8,8]});function w$t(){const t={longitude:13.54008,latitude:52.45714},[e,i]=U.useState({lat:t.latitude,lng:t.longitude});function r(){const o=bD();return MLe("click",a=>{i({lat:a.latlng.lat,lng:a.latlng.lng}),o.setView(a.latlng,o.getZoom())}),null}function n(){const o=bD();return U.useEffect(()=>{const a=Uv.control({position:"bottomleft"});return a.onAdd=function(){const l=Uv.DomUtil.create("div","info legend");return l.style.background="white",l.style.padding="6px 8px",l.style.borderRadius="4px",l.style.boxShadow="0 0 5px rgba(0,0,0,0.3)",l.innerHTML="<b>Legende</b><br><i style='background:red;width:12px;height:12px;display:inline-block;margin-right:5px;'></i> Marker",l},a.addTo(o),()=>a.remove()},[o]),null}function s({position:o="topleft"}){const a=bD();return U.useEffect(()=>{const l=Uv.control.zoom({position:o});return l.addTo(a),()=>a.removeControl(l)},[a,o]),null}return H.jsxs(CLe,{center:[50,10],zoom:6,style:{height:"100vh",width:"100%"},zoomControl:!1,children:[H.jsx(PLe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),H.jsx(r,{}),e&&H.jsx(ILe,{position:[e.lat,e.lng],icon:b$t,children:H.jsxs(ALe,{children:["Lat: ",e.lat.toFixed(4),", Lng: ",e.lng.toFixed(4)]})}),H.jsx(n,{}),H.jsx(s,{})]})}function _$t(){const{mapType:t}=tk(),e={latitude:52.45714,longitude:13.54008};return H.jsx("div",{className:"w-full h-full",children:t==="leaflet"?H.jsx(w$t,{initialPoint:e}):H.jsx(r$t,{centerPoint:e})})}var IK={exports:{}},x$t=IK.exports,Gye;function S$t(){return Gye||(Gye=1,(function(t,e){(function(i,r){r(ELe())})(x$t,(function(i){i=i&&i.hasOwnProperty("default")?i.default:i;function r(v,w){var _=w.x-v.x,T=w.y-v.y;return Math.sqrt(_*_+T*T)}var n=function(w,_){return(Math.atan2(_.y-w.y,_.x-w.x)*180/Math.PI+90+360)%360},s=function(w,_){var T=w.value,$=w.isInPixels;return $?T/_:T};function o(v){if(typeof v=="string"&&v.indexOf("%")!==-1)return{value:parseFloat(v)/100,isInPixels:!1};var w=v?parseFloat(v):0;return{value:w,isInPixels:w>0}}var a=function(w,_){return w.x===_.x&&w.y===_.y};function l(v){return v.reduce(function(w,_,T,$){if(T>0&&!a(_,$[T-1])){var I=$[T-1],A=w.length>0?w[w.length-1].distB:0,k=r(I,_);w.push({a:I,b:_,distA:A,distB:A+k,heading:n(I,_)})}return w},[])}function c(v,w){var _=l(v),T=_.length;if(T===0)return[];var $=_[T-1].distB,I=s(w.offset,$),A=s(w.endOffset,$),k=s(w.repeat,$),R=$*k,F=I>0?$*I:0,B=A>0?$*A:0,q=[],Y=F;do q.push(Y),Y+=R;while(R>0&&Y<$-B);var J=0,Q=_[0];return q.map(function(te){for(;te>Q.distB&&J<T-1;)J++,Q=_[J];var re=(te-Q.distA)/(Q.distB-Q.distA);return{pt:u(Q.a,Q.b,re),heading:Q.heading}})}function u(v,w,_){return w.x!==v.x?{x:v.x+_*(w.x-v.x),y:v.y+_*(w.y-v.y)}:{x:v.x,y:v.y+(w.y-v.y)*_}}(function(){var v=L.Marker.prototype._initIcon,w=L.Marker.prototype._setPos,_=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var T=this.options.icon&&this.options.icon.options,$=T&&this.options.icon.options.iconAnchor;$&&($=$[0]+"px "+$[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||$||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(I){I.target._applyRotation()})}),L.Marker.include({_initIcon:function(){v.call(this)},_setPos:function(T){w.call(this,T),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,_?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(T){return this.options.rotationAngle=T,this.update(),this},setRotationOrigin:function(T){return this.options.rotationOrigin=T,this.update(),this}})})(),i.Symbol=i.Symbol||{},i.Symbol.Dash=i.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(w){i.Util.setOptions(this,w),this.options.pathOptions.clickable=!1},buildSymbol:function(w,_,T,$,I){var A=this.options,k=Math.PI/180;if(A.pixelSize<=1)return i.polyline([w.latLng,w.latLng],A.pathOptions);var R=T.project(w.latLng),F=-(w.heading-90)*k,B=i.point(R.x+A.pixelSize*Math.cos(F+Math.PI)/2,R.y+A.pixelSize*Math.sin(F)/2),q=R.add(R.subtract(B));return i.polyline([T.unproject(B),T.unproject(q)],A.pathOptions)}}),i.Symbol.dash=function(v){return new i.Symbol.Dash(v)},i.Symbol.ArrowHead=i.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(w){i.Util.setOptions(this,w),this.options.pathOptions.clickable=!1},buildSymbol:function(w,_,T,$,I){return this.options.polygon?i.polygon(this._buildArrowPath(w,T),this.options.pathOptions):i.polyline(this._buildArrowPath(w,T),this.options.pathOptions)},_buildArrowPath:function(w,_){var T=Math.PI/180,$=_.project(w.latLng),I=-(w.heading-90)*T,A=this.options.headAngle/2*T,k=I+A,R=I-A,F=i.point($.x-this.options.pixelSize*Math.cos(k),$.y+this.options.pixelSize*Math.sin(k)),B=i.point($.x-this.options.pixelSize*Math.cos(R),$.y+this.options.pixelSize*Math.sin(R));return[_.unproject(F),w.latLng,_.unproject(B)]}}),i.Symbol.arrowHead=function(v){return new i.Symbol.ArrowHead(v)},i.Symbol.Marker=i.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(w){i.Util.setOptions(this,w),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(w,_,T,$,I){return this.options.rotate&&(this.options.markerOptions.rotationAngle=w.heading+(this.options.angleCorrection||0)),i.marker(w.latLng,this.options.markerOptions)}}),i.Symbol.marker=function(v){return new i.Symbol.Marker(v)};var p=function(w){return w instanceof i.LatLng||Array.isArray(w)&&w.length===2&&typeof w[0]=="number"},m=function(w){return Array.isArray(w)&&p(w[0])};i.PolylineDecorator=i.FeatureGroup.extend({options:{patterns:[]},initialize:function(w,_){i.FeatureGroup.prototype.initialize.call(this),i.Util.setOptions(this,_),this._map=null,this._paths=this._initPaths(w),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(w,_){var T=this;if(m(w)){var $=_?w.concat([w[0]]):w;return[$]}return w instanceof i.Polyline?this._initPaths(w.getLatLngs(),w instanceof i.Polygon):Array.isArray(w)?w.reduce(function(I,A){return I.concat(T._initPaths(A,_))},[]):[]},_initPatterns:function(w){return w.map(this._parsePatternDef)},setPatterns:function(w){this.options.patterns=w,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(w){this._paths=this._initPaths(w),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(w,_){return{symbolFactory:w.symbol,offset:o(w.offset),endOffset:o(w.endOffset),repeat:o(w.repeat)}},onAdd:function(w){this._map=w,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(w){this._map.off("moveend",this.redraw,this),this._map=null,i.FeatureGroup.prototype.onRemove.call(this,w)},_initBounds:function(){var w=this._paths.reduce(function(_,T){return _.concat(T)},[]);return i.latLngBounds(w)},getBounds:function(){return this._bounds},_buildSymbols:function(w,_,T){var $=this;return T.map(function(I,A){return _.buildSymbol(I,w,$._map,A,T.length)})},_getDirectionPoints:function(w,_){var T=this;if(w.length<2)return[];var $=w.map(function(I){return T._map.project(I)});return c($,_).map(function(I){return{latLng:T._map.unproject(i.point(I.pt)),heading:I.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(w){var _=this,T=this._map.getBounds().pad(.1);return this._paths.map(function($){var I=_._getDirectionPoints($,w).filter(function(A){return T.contains(A.latLng)});return i.featureGroup(_._buildSymbols($,w.symbolFactory,I))})},_draw:function(){var w=this;this._patterns.map(function(_){return w._getPatternLayers(_)}).forEach(function(_){w.addLayer(i.featureGroup(_))})}}),i.polylineDecorator=function(v,w){return new i.PolylineDecorator(v,w)}}))})()),IK.exports}S$t();const kLe=U.createContext(),Yk=({children:t})=>{const[e,i]=U.useState(()=>{const a=localStorage.getItem("travelRoute");return a?JSON.parse(a):[]}),[r,n]=U.useState(()=>{const a=localStorage.getItem("travelPhotos");return a?JSON.parse(a):{}}),[s,o]=U.useState(()=>{const a=localStorage.getItem("unsplashCache");return a?JSON.parse(a):{}});return U.useEffect(()=>{localStorage.setItem("travelRoute",JSON.stringify(e))},[e]),U.useEffect(()=>{localStorage.setItem("travelPhotos",JSON.stringify(r))},[r]),U.useEffect(()=>{localStorage.setItem("unsplashCache",JSON.stringify(s))},[s]),H.jsx(kLe.Provider,{value:{routePoints:e,setRoutePoints:i,photos:r,setPhotos:n,unsplash:s,setUnsplash:o},children:t})};function M0(){return U.useContext(kLe)}async function E$t(t,e){try{const i=await fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${t}&lon=${e}&type=city&limit=1&apiKey=55e909bc27dc450b8f322b4754b9216d`);if(!i.ok)return console.error("Geoapify API Fehler:",i.status,i.statusText),null;const r=await i.json();if(r.features&&r.features.length>0){const n=r.features[0],s=n.properties.city||n.properties.name||"Unbekannt",o=n.properties.country||"Unbekanntes Land",[a,l]=n.geometry.coordinates;return{name:s,country:o,lat:l,lng:a}}}catch(i){console.error("Fehler beim Abrufen von Geoapify:",i)}return null}function hU(){const{routePoints:t,setRoutePoints:e}=M0(),[i,r]=U.useState(null),n=(o,a="info")=>{r({message:o,type:a}),setTimeout(()=>r(null),3e3)};function s(){return MLe("click",async o=>{const a=await E$t(o.latlng.lat,o.latlng.lng);if(!a){n("Keine Stadt in der Nhe gefunden!","error");return}t.some(c=>c.name===a.name)?n("Stadt ist bereits in der Route!","warning"):(e([...t,a]),n(`Gewhlte Stadt: ${a.name}, Land: ${a.country}`,"success"))}),null}return U.useEffect(()=>{const o=window._leaflet_map_instance;if(!o||t.length<2)return;o.eachLayer(c=>{c.options&&c.options._isArrowDecorator&&o.removeLayer(c)});const a=Uv.polyline(t.map(c=>[c.lat,c.lng])),l=Uv.polylineDecorator(a,{patterns:[{offset:25,repeat:50,symbol:Uv.Symbol.arrowHead({pixelSize:10,polygon:!1,pathOptions:{stroke:!0,color:"red",weight:2}})}]}).addTo(o);l.options._isArrowDecorator=!0},[t]),H.jsxs("div",{className:"relative w-full h-screen",children:[H.jsxs(CLe,{center:[50,10],zoom:6,style:{height:"100%",width:"100%"},whenCreated:o=>{window._leaflet_map_instance=o},children:[H.jsx(PLe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),H.jsx(s,{}),t.map((o,a)=>H.jsx(ILe,{position:{lat:o.lat,lng:o.lng},icon:Uv.icon({iconUrl:a===0?"https://maps.google.com/mapfiles/ms/icons/green-dot.png":"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",iconSize:[32,32],iconAnchor:[16,32]}),children:H.jsxs(ALe,{children:[a===0?"Startpunkt":`Zwischenpunkt ${a}`,H.jsx("br",{}),"Stadt: ",o.name,H.jsx("br",{}),"Land: ",o.country,H.jsx("br",{}),"Lat: ",o.lat.toFixed(4),", Lng: ",o.lng.toFixed(4)]})},a)),t.length>1&&H.jsx(v$t,{positions:t.map(o=>[o.lat,o.lng]),color:"red",weight:3})]}),i&&H.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000]",children:H.jsx("div",{className:`alert shadow-lg ${i.type==="success"?"alert-success":i.type==="error"?"alert-error":"alert-warning"}`,children:H.jsx("span",{children:i.message})})})]})}async function T$t(t){return(await(await fetch(`https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(t)}&type=city&format=json&limit=10&apiKey=55e909bc27dc450b8f322b4754b9216d`)).json()).results||[]}async function $$t(t,e=8){return(await(await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(t)}&per_page=${e}`,{headers:{Authorization:"Client-ID 9eLfD7TKFyeK2Oy4Q56voohvdDPOMAk7chn7AiixE8A"}})).json()).results.map(n=>n.urls.regular)}function Ste(){const{routePoints:t,setRoutePoints:e,photos:i,setPhotos:r}=M0(),[n,s]=U.useState(""),[o,a]=U.useState(""),[l,c]=U.useState([]),u=async T=>{if(s(T),T.length<2){c([]);return}try{const $=await T$t(T);c($)}catch($){console.error("Fehler bei City-Suche:",$),c([])}},p=T=>{const $=T.city||T.address_line1||T.formatted,I=T.country||"";if(s($),a(I),c([]),T.lat&&T.lon){const A={name:$,country:I,lat:T.lat,lng:T.lon};t.some(R=>R.name===A.name&&R.country===A.country)||(e([...t,A]),r(R=>({...R,[A.name]:R[A.name]||[]})))}},m=T=>{var I;const $=(I=t[T])==null?void 0:I.name;e(t.filter((A,k)=>k!==T)),$&&r(A=>{const k={...A};return delete k[$],k})},v=()=>{t[t.length-1],m(t.length-1)},w=()=>{e([]),r({})},_=(T,$)=>{const I=[...t],A=T+$;A<0||A>=I.length||([I[T],I[A]]=[I[A],I[T]],e(I))};return H.jsxs("div",{className:"p-3 max-w-xl mx-auto",children:[H.jsx("h2",{className:"text-lg font-bold mb-4",children:"Reiseroute (Stdte)"}),H.jsxs("div",{className:"mb-4 flex flex-col gap-2 relative",children:[H.jsx("input",{type:"text",placeholder:"Stadt suchen...",value:n,onChange:T=>u(T.target.value),className:"input input-bordered w-full"}),l.length>0&&H.jsx("ul",{className:"menu bg-base-100 shadow rounded-box absolute top-12 w-full z-10",children:l.map((T,$)=>H.jsx("li",{children:H.jsxs("button",{type:"button",className:"text-left w-full",onClick:()=>p(T),children:[T.city||T.address_line1||T.formatted,","," ",H.jsx("span",{className:"opacity-70",children:T.country})]})},$))})]}),H.jsxs("div",{className:"flex gap-2 mb-4",children:[H.jsx("button",{className:"btn btn-sm flex-1 bg-blue-500 hover:bg-blue-600 text-white",onClick:v,disabled:t.length===0,children:"Rckgngig"}),H.jsx("button",{className:"btn btn-warning btn-sm flex-1",onClick:w,disabled:t.length===0,children:"Zurcksetzen"})]}),t.length===0&&H.jsx("p",{className:"text-sm opacity-70",children:"Keine Stdte ausgewhlt."}),H.jsx("ul",{className:"steps steps-vertical",children:t.map((T,$)=>H.jsx("li",{className:"step step-primary relative flex flex-col items-start",children:H.jsxs("div",{className:"flex items-center justify-between w-full",children:[H.jsxs("span",{children:[H.jsx("span",{className:"font-semibold",children:T.name})," ",H.jsxs("span",{className:"text-sm opacity-70",children:["(",T.country,")"]})]}),H.jsxs("div",{className:"flex gap-1",children:[H.jsx("button",{className:"btn btn-xs",onClick:()=>_($,-1),disabled:$===0,children:""}),H.jsx("button",{className:"btn btn-xs",onClick:()=>_($,1),disabled:$===t.length-1,children:""}),H.jsx("button",{className:"btn btn-xs btn-error",onClick:()=>m($),children:""})]})]})},$))})]})}let Dd=class extends ICe(cAe(Br)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h_,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};d([g({type:Od})],Dd.prototype,"elevationInfo",void 0),d([g(Bq(h_,"graphics"))],Dd.prototype,"graphics",void 0),d([g({type:["show","hide"]})],Dd.prototype,"listMode",void 0),d([g()],Dd.prototype,"screenSizePerspectiveEnabled",void 0),d([g({readOnly:!0})],Dd.prototype,"type",void 0),d([g({constructOnly:!0})],Dd.prototype,"internal",void 0),Dd=d([G("esri.layers.GraphicsLayer")],Dd);async function M$t(t,e){try{const i=await fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${t}&lon=${e}&type=city&limit=1&apiKey=55e909bc27dc450b8f322b4754b9216d`);if(!i.ok)return console.error("Geoapify API Fehler:",i.status,i.statusText),null;const r=await i.json();if(r.features&&r.features.length>0){const n=r.features[0],s=n.properties.city||n.properties.name||"Unbekannte Stadt",o=n.properties.country||"Unbekanntes Land",[a,l]=n.geometry.coordinates;return{name:s,country:o,lat:l,lng:a}}}catch(i){console.error("Fehler beim Abrufen von Geoapify:",i)}return null}function dU(){const{routePoints:t,setRoutePoints:e}=M0(),i=U.useRef(null),r=U.useRef(null),n=U.useRef(null),s=U.useRef(null),[o,a]=U.useState(null),l=(c,u="info")=>{a({message:c,type:u}),setTimeout(()=>a(null),3e3)};return U.useEffect(()=>{if(!i.current)return;const c=new lQ({basemap:{portalItem:{id:"f56c2695190f4f4da032f79b2d51aaa9"}}}),u=new dCe({container:i.current,map:c,center:[10,50],zoom:5}),p=new Dd,m=new Dd({elevationInfo:{mode:"relative-to-ground"}});return c.addMany([m,p]),r.current=u,n.current=p,s.current=m,u.on("click",async v=>{const{latitude:w,longitude:_}=v.mapPoint,T=await M$t(w,_);if(!T){l("Keine Stadt in der Nhe gefunden!","error");return}e($=>{if($.some(A=>A.name===T.name))return l("Stadt ist bereits in der Route!","warning"),$;const I=[...$,T];return l(`Stadt hinzugefgt: ${T.name}`,"success"),I})}),()=>u.destroy()},[]),U.useEffect(()=>{if(!n.current||!s.current)return;const c=n.current,u=s.current;if(c.removeAll(),u.removeAll(),t.forEach((p,m)=>{const v=new sr({geometry:new gt({longitude:p.lng,latitude:p.lat}),symbol:new Or({color:m===0?"green":"blue",size:"10px",outline:{color:"white",width:1}}),popupTemplate:{title:m===0?"Startpunkt":`Zwischenpunkt ${m}`,content:`<b>${p.name}</b><br/>Land: ${p.country}<br/>Lat: ${p.lat.toFixed(4)}, Lng: ${p.lng.toFixed(4)}`}});c.add(v)}),t.length>1){const p=new en({paths:t.map(v=>[v.lng,v.lat])}),m=new sr({geometry:p,symbol:new Hr({color:[255,0,0,.9],width:3})});u.add(m)}},[t]),H.jsxs("div",{className:"relative w-full h-screen",children:[H.jsx("div",{ref:i,className:"w-full h-full"}),o&&H.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000]",children:H.jsx("div",{className:`alert shadow-lg ${o.type==="success"?"alert-success":o.type==="error"?"alert-error":"alert-warning"}`,children:H.jsx("span",{children:o.message})})})]})}function C$t(){const{mapType:t}=tk();return H.jsx(Yk,{children:H.jsxs("div",{className:"flex h-screen w-screen",children:[H.jsx("div",{className:"relative flex-1",children:t==="leaflet"?H.jsx(hU,{}):H.jsx(dU,{})}),H.jsx("div",{className:"w-80 bg-gray-800 overflow-y-auto p-4",children:H.jsx(Ste,{})})]})})}function OLe(){const{user:t}=U.useContext(gy),{showAlert:e}=U.useContext(gj),{routePoints:i,setRoutePoints:r,photos:n,setPhotos:s,setUnsplash:o}=M0(),[a,l]=U.useState(null),[c,u]=U.useState(1),[p,m]=U.useState({points:[],startDate:"",endDate:""});U.useEffect(()=>{m(A=>({...A,points:i.map(k=>({city:k.name,country:k.country}))}))},[i]);const v=(A,k)=>{m(R=>{const F=[...R.points];return F[A].city=k,{...R,points:F}})},w=(A,k)=>{m(R=>{const F=[...R.points];return F[A].country=k,{...R,points:F}})},_=()=>u(A=>Math.min(A+1,3)),T=()=>u(A=>Math.max(A-1,1)),$=A=>{var R;const k=(R=i[A])==null?void 0:R.name;m(F=>({...F,points:F.points.filter((B,q)=>q!==A)})),r(F=>F.filter((B,q)=>q!==A)),k&&(s(F=>{const B={...F};return delete B[k],B}),o(F=>{const B={...F};return delete B[k],B}))},I=async()=>{if(!t){e("error","Sie mssen eingeloggt sein!");return}const A={username:t.username,points:p.points,startDate:p.startDate,endDate:p.endDate,photos:Object.entries(n).map(([k,R])=>({city:k,urls:R}))};try{const k=await fetch("https://reiseplaner-backend.onrender.com/travels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A),credentials:"include"}),R=await k.json();if(!k.ok)throw new Error(R.error||"Fehler beim Speichern der Reise");e("success","Reise erfolgreich gespeichert!"),console.log("Gespeichert:",R)}catch(k){console.error(k),e("error","Fehler: "+k.message)}};return H.jsxs("div",{className:"p-8 max-w-xl mx-auto",children:[H.jsxs("ul",{className:"steps mb-6",children:[H.jsx("li",{className:`step ${c>=1?"step-primary":""}`,children:"Stdte & Lnder"}),H.jsx("li",{className:`step ${c>=2?"step-primary":""}`,children:"Datum"}),H.jsx("li",{className:`step ${c>=3?"step-primary":""}`,children:"Fotos"})]}),c===1&&H.jsx("div",{className:"flex flex-col gap-4",children:p.points.map((A,k)=>H.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 items-end",children:[H.jsxs("div",{children:[H.jsxs("label",{className:"block mb-1",children:["Stadt ",k+1,":"]}),H.jsx("input",{type:"text",value:A.city,onChange:R=>v(k,R.target.value),className:"input input-bordered w-full",required:!0})]}),H.jsxs("div",{children:[H.jsxs("label",{className:"block mb-1",children:["Land ",k+1,":"]}),H.jsx("input",{type:"text",value:A.country,onChange:R=>w(k,R.target.value),className:"input input-bordered w-full",required:!0})]}),H.jsx("div",{className:"flex justify-center",children:H.jsx("button",{type:"button",className:"btn btn-dash btn-xs btn-circle",onClick:()=>$(k),children:""})})]},k))}),c===2&&H.jsxs("div",{children:[H.jsxs("label",{className:"block mb-2",children:["Startdatum:",H.jsx("input",{type:"date",value:p.startDate,onChange:A=>m(k=>({...k,startDate:A.target.value})),className:"input input-bordered w-full",required:!0})]}),H.jsxs("label",{className:"block",children:["Enddatum:",H.jsx("input",{type:"date",value:p.endDate,onChange:A=>m(k=>({...k,endDate:A.target.value})),className:"input input-bordered w-full mt-2",required:!0})]})]}),c===3&&H.jsxs("div",{className:"flex flex-col gap-4",children:[p.points.map((A,k)=>{const R=n[A.city]||[];return H.jsxs("div",{className:"flex flex-col gap-2",children:[H.jsx("h4",{className:"font-semibold",children:A.city}),H.jsxs("label",{className:"block",children:["Foto-URLs (kommagetrennt):",H.jsx("input",{type:"text",value:R.join(","),onChange:F=>{const B=F.target.value.split(",").map(q=>q.trim());s(q=>({...q,[A.city]:B}))},className:"input input-bordered w-full"})]}),H.jsx("div",{className:"flex gap-2",children:H.jsx(sc,{to:"/photolibrary",state:{points:[A]},className:"btn btn-info flex-1",children:"Fotos auswhlen"})}),H.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:R.map((F,B)=>H.jsx("img",{src:F,alt:`${A.city}-${B}`,className:"w-24 h-24 object-cover rounded shadow cursor-pointer hover:scale-105 transition-transform",onClick:()=>l(F)},B))})]},k)}),a&&H.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-80",children:H.jsxs("div",{className:"relative p-4 max-w-[90vw] max-h-[90vh]",children:[H.jsx("button",{className:"absolute top-2 right-2 text-white text-xl font-bold",onClick:()=>l(null),children:""}),H.jsx("img",{src:a,alt:"Ausgewhltes Foto",className:"max-w-full max-h-full rounded shadow-lg"})]})}),H.jsx("button",{type:"button",className:"btn btn-primary mt-4 w-full",onClick:I,children:"Reise speichern"})]}),H.jsxs("div",{className:"flex justify-between mt-6",children:[H.jsx("button",{type:"button",className:"btn bg-blue-500 hover:bg-blue-600 text-white",onClick:T,disabled:c===1,children:"Zurck"}),H.jsx("button",{type:"button",className:"btn bg-blue-500 hover:bg-blue-600 text-white",onClick:_,disabled:c===3,children:"Weiter"})]})]})}function I$t(){const{mapType:t}=tk();return H.jsx(Yk,{children:H.jsxs("div",{className:"flex h-screen w-screen",children:[H.jsx("div",{className:"relative flex-[7]",children:t==="leaflet"?H.jsx(hU,{}):H.jsx(dU,{})}),H.jsx("div",{className:"flex-[2] bg-gray-800 text-white overflow-y-auto border-l border-gray-700 p-4",children:H.jsx(OLe,{})})]})})}const A$t=()=>{const[t,e]=U.useState({username:"",password:""}),[i,r]=U.useState(""),[n,s]=U.useState(null),{signup:o}=U.useContext(gy),a=c=>{e(u=>({...u,[c.target.name]:c.target.value}))},l=async c=>{if(c.preventDefault(),s(null),i!==t.password){s("Passwords do not match.");return}try{await o(t)}catch(u){s(u.message||"Signup failed.")}};return H.jsx("div",{className:"flex items-center justify-center min-h-screen bg-base-100",children:H.jsx("form",{onSubmit:l,className:"w-full max-w-2xl",children:H.jsxs("fieldset",{className:"fieldset bg-base-200 border border-base-300 p-8 rounded-2xl shadow-xl",children:[H.jsx("legend",{className:"fieldset-legend text-3xl font-bold text-white mb-6 text-center",children:"Sign Up"}),H.jsxs("div",{className:"flex flex-col gap-6",children:[H.jsx("label",{className:"fieldset-label text-lg",htmlFor:"username",children:"Username"}),H.jsx("input",{className:"input input-lg w-full",type:"text",required:!0,placeholder:"your_username",name:"username",onChange:a,value:t.username,id:"username"}),H.jsx("label",{className:"fieldset-label text-lg",htmlFor:"password-signup",children:"Password"}),H.jsx("input",{type:"password",className:"input input-lg w-full",required:!0,placeholder:"Password",minLength:"8",name:"password",pattern:"(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\\\\#\\\\?!\\\\@\\\\$%\\\\^&*\\\\-]).{8,}",title:"Must be more than 8 characters, including number, lowercase, uppercase, and special character",onChange:a,value:t.password,id:"password-signup"}),H.jsx("label",{className:"fieldset-label text-lg",htmlFor:"password-confirm",children:"Confirm Password"}),H.jsx("input",{type:"password",className:`input input-lg w-full ${i&&t.password===i?"input-success":i?"input-error":""}`,required:!0,placeholder:"Confirm Password",title:"Must match Password",onChange:c=>r(c.target.value),value:i,id:"password-confirm"}),i&&i!==t.password&&H.jsx("p",{className:"text-red-500 text-sm",children:"Passwords don't match."}),n&&H.jsx("p",{className:"text-red-500 text-center",children:n}),H.jsx("button",{disabled:!i||i!==t.password,className:"btn btn-neutral btn-lg w-full mt-4",children:"Signup"})]})]})})})},P$t=()=>{const[t,e]=U.useState({username:"",password:""}),{login:i}=U.useContext(gy),{showAlert:r}=U.useContext(gj),n=o=>e(a=>({...a,[o.target.name]:o.target.value})),s=async o=>{o.preventDefault();try{await i(t),r("success","Login erfolgreich!")}catch(a){r("error",a.message||"Login fehlgeschlagen.")}};return H.jsx("div",{className:"flex items-center justify-center min-h-screen bg-base-100",children:H.jsx("form",{onSubmit:s,className:"w-full max-w-2xl",children:H.jsxs("fieldset",{className:"fieldset bg-base-200 border border-base-300 p-8 rounded-2xl shadow-xl",children:[H.jsx("legend",{className:"fieldset-legend text-3xl font-bold text-white mb-6 text-center",children:"Login"}),H.jsxs("div",{className:"flex flex-col gap-6",children:[H.jsx("label",{className:"fieldset-label text-lg",htmlFor:"username",children:"Username"}),H.jsx("input",{className:"input input-lg w-full",type:"text",required:!0,placeholder:"your_username",name:"username",onChange:n,value:t.username,id:"username"}),H.jsx("label",{className:"fieldset-label text-lg",htmlFor:"password-login",children:"Password"}),H.jsx("input",{type:"password",className:"input input-lg w-full",required:!0,placeholder:"Password",name:"password",onChange:n,value:t.password,id:"password-login"}),H.jsx("button",{disabled:!t.username||!t.password,className:"btn btn-neutral btn-lg w-full mt-4",children:"Login"})]})]})})})};function k$t(){return H.jsx(Yk,{children:H.jsxs("div",{className:"flex h-screen w-screen",children:[H.jsx("div",{className:"flex-1",children:H.jsx(dU,{})}),H.jsx("div",{className:"w-80 bg-gray-800 overflow-y-auto p-4",children:H.jsx(Ste,{})})]})})}const O$t=()=>{const{user:t}=U.useContext(gy),[e,i]=U.useState([]),[r,n]=U.useState(!0);return U.useEffect(()=>{const s=async()=>{try{const o=await fetch(`https://reiseplaner-backend.onrender.com/travels/user/${t._id}`,{credentials:"include"}),a=await o.json();if(!o.ok)throw new Error(a.error||"Fehler beim Laden der Reisen");i(a.data||[])}catch(o){console.error("Travels laden fehlgeschlagen:",o)}finally{n(!1)}};t!=null&&t._id&&s()},[t]),r?H.jsx("p",{className:"p-4",children:"Lade Reisen..."}):e.length?H.jsx("div",{className:"overflow-x-auto p-4",children:H.jsxs("table",{className:"table table-zebra w-full",children:[H.jsx("thead",{children:H.jsxs("tr",{children:[H.jsx("th",{children:""}),H.jsx("th",{children:"Startdatum"}),H.jsx("th",{children:"Enddatum"}),H.jsx("th",{children:"Stdte"})]})}),H.jsx("tbody",{children:e.map((s,o)=>H.jsxs("tr",{children:[H.jsx("td",{children:o+1}),H.jsx("td",{children:new Date(s.startDate).toLocaleDateString()}),H.jsx("td",{children:new Date(s.endDate).toLocaleDateString()}),H.jsx("td",{children:s.points.map(a=>`${a.city} (${a.country})`).join(", ")})]},s._id))})]})}):H.jsx("p",{className:"p-4",children:"Keine Reisen gefunden."})};function L$t(){const{mapType:t}=tk();return H.jsx(Yk,{children:H.jsxs("div",{className:"flex h-screen w-screen",children:[H.jsx("div",{className:"basis-1/3",children:t==="leaflet"?H.jsx(hU,{}):H.jsx(dU,{})}),H.jsx("div",{className:"basis-2/3 bg-gray-800 overflow-y-auto p-4",children:H.jsx(O$t,{})})]})})}function LLe(t){var e,i,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(i=LLe(t[e]))&&(r&&(r+=" "),r+=i)}else for(i in t)t[i]&&(r&&(r+=" "),r+=i);return r}function vs(){for(var t,e,i=0,r="",n=arguments.length;i<n;i++)(t=arguments[i])&&(e=LLe(t))&&(r&&(r+=" "),r+=e);return r}var E9={},T9={},qye;function R$t(){return qye||(qye=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i==="__proto__"}t.isUnsafeProperty=e})(T9)),T9}var $9={},Hye;function RLe(){return Hye||(Hye=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}t.isDeepKey=e})($9)),$9}var M9={},Wye;function NLe(){return Wye||(Wye=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){var r;return typeof i=="string"||typeof i=="symbol"?i:Object.is((r=i==null?void 0:i.valueOf)==null?void 0:r.call(i),-0)?"-0":String(i)}t.toKey=e})(M9)),M9}var C9={},Zye;function Ete(){return Zye||(Zye=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){const r=[],n=i.length;if(n===0)return r;let s=0,o="",a="",l=!1;for(i.charCodeAt(0)===46&&(r.push(""),s++);s<n;){const c=i[s];a?c==="\\"&&s+1<n?(s++,o+=i[s]):c===a?a="":o+=c:l?c==='"'||c==="'"?a=c:c==="]"?(l=!1,r.push(o),o=""):o+=c:c==="["?(l=!0,o&&(r.push(o),o="")):c==="."?o&&(r.push(o),o=""):o+=c,s++}return o&&r.push(o),r}t.toPath=e})(C9)),C9}var Yye;function Tte(){return Yye||(Yye=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R$t(),i=RLe(),r=NLe(),n=Ete();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?i.isDeepKey(l)?s(a,n.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let p=0;p<l.length;p++){if(u==null||e.isUnsafeProperty(l[p]))return c;u=u[l[p]]}return u===void 0?c:u}t.get=s})(E9)),E9}var I9,Kye;function N$t(){return Kye||(Kye=1,I9=Tte().get),I9}var D$t=N$t();const IP=Qp(D$t);var A9={exports:{}},hr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jye;function F$t(){if(Jye)return hr;Jye=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function w(_){if(typeof _=="object"&&_!==null){var T=_.$$typeof;switch(T){case t:switch(_=_.type,_){case i:case n:case r:case l:case c:case m:return _;default:switch(_=_&&_.$$typeof,_){case o:case a:case p:case u:return _;case s:return _;default:return T}}case e:return T}}}return hr.ContextConsumer=s,hr.ContextProvider=o,hr.Element=t,hr.ForwardRef=a,hr.Fragment=i,hr.Lazy=p,hr.Memo=u,hr.Portal=e,hr.Profiler=n,hr.StrictMode=r,hr.Suspense=l,hr.SuspenseList=c,hr.isContextConsumer=function(_){return w(_)===s},hr.isContextProvider=function(_){return w(_)===o},hr.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},hr.isForwardRef=function(_){return w(_)===a},hr.isFragment=function(_){return w(_)===i},hr.isLazy=function(_){return w(_)===p},hr.isMemo=function(_){return w(_)===u},hr.isPortal=function(_){return w(_)===e},hr.isProfiler=function(_){return w(_)===n},hr.isStrictMode=function(_){return w(_)===r},hr.isSuspense=function(_){return w(_)===l},hr.isSuspenseList=function(_){return w(_)===c},hr.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===i||_===n||_===r||_===l||_===c||typeof _=="object"&&_!==null&&(_.$$typeof===p||_.$$typeof===u||_.$$typeof===o||_.$$typeof===s||_.$$typeof===a||_.$$typeof===v||_.getModuleId!==void 0)},hr.typeOf=w,hr}var Xye;function z$t(){return Xye||(Xye=1,A9.exports=F$t()),A9.exports}var j$t=z$t(),hl=t=>t===0?0:t>0?1:-1,Vh=t=>typeof t=="number"&&t!=+t,Hw=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,bi=t=>(typeof t=="number"||t instanceof Number)&&!Vh(t),hy=t=>bi(t)||typeof t=="string",U$t=0,AP=t=>{var e=++U$t;return"".concat(t||"").concat(e)},mc=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bi(e)&&typeof e!="string")return r;var s;if(Hw(e)){if(i==null)return r;var o=e.indexOf("%");s=i*parseFloat(e.slice(0,o))/100}else s=+e;return Vh(s)&&(s=r),n&&i!=null&&s>i&&(s=i),s},DLe=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,i={},r=0;r<e;r++)if(!i[t[r]])i[t[r]]=!0;else return!0;return!1};function Mh(t,e,i){return bi(t)&&bi(e)?t+i*(e-t):e}function B$t(t,e,i){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):IP(r,e))===i)}var bc=t=>t===null||typeof t>"u",Kk=t=>bc(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),V$t=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $te(t){if(typeof t!="string")return!1;var e=V$t;return e.includes(t)}var G$t=["viewBox","children"],Qye=["points","pathLength"],P9={svg:G$t,polygon:Qye,polyline:Qye},q$t=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(U.isValidElement(t)&&(i=t.props),typeof i!="object"&&typeof i!="function")return null;var r={};return Object.keys(i).forEach(n=>{$te(n)&&(r[n]=(s=>i[n](i,s)))}),r},H$t=(t,e,i)=>r=>(t(e,i,r),null),W$t=(t,e,i)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(n=>{var s=t[n];$te(n)&&typeof s=="function"&&(r||(r={}),r[n]=H$t(s,e,i))}),r},Z$t=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function FLe(t){if(typeof t!="string")return!1;var e=Z$t;return e.includes(t)}function pU(t){var e=Object.entries(t).filter(i=>{var[r]=i;return FLe(r)});return Object.fromEntries(e)}var ege=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",tge=null,k9=null,zLe=t=>{if(t===tge&&Array.isArray(k9))return k9;var e=[];return U.Children.forEach(t,i=>{bc(i)||(j$t.isFragment(i)?e=e.concat(zLe(i.props.children)):e.push(i))}),k9=e,tge=t,e};function jLe(t,e){var i=[],r=[];return Array.isArray(e)?r=e.map(n=>ege(n)):r=[ege(e)],zLe(t).forEach(n=>{var s=IP(n,"type.displayName")||IP(n,"type.name");r.indexOf(s)!==-1&&i.push(n)}),i}var Y$t=(t,e,i,r)=>{var n;if(typeof e=="symbol"||typeof e=="number")return!0;var s=(n=r&&(P9==null?void 0:P9[r]))!==null&&n!==void 0?n:[],o=e.startsWith("data-"),a=typeof t!="function"&&(!!r&&s.includes(e)||FLe(e)),l=!!i&&$te(e);return o||a||l},Na=(t,e,i)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(U.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{var o;Y$t((o=r)===null||o===void 0?void 0:o[s],s,e,i)&&(n[s]=r[s])}),n},K$t=["children","width","height","viewBox","className","style","title","desc"];function AK(){return AK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},AK.apply(null,arguments)}function J$t(t,e){if(t==null)return{};var i,r,n=X$t(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function X$t(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var ULe=U.forwardRef((t,e)=>{var{children:i,width:r,height:n,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=J$t(t,K$t),p=s||{width:r,height:n,x:0,y:0},m=vs("recharts-surface",o);return U.createElement("svg",AK({},Na(u,!0,"svg"),{className:m,width:r,height:n,style:a,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),U.createElement("title",null,l),U.createElement("desc",null,c),i)}),Q$t=["children","className"];function PK(){return PK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},PK.apply(null,arguments)}function eMt(t,e){if(t==null)return{};var i,r,n=tMt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function tMt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var m0=U.forwardRef((t,e)=>{var{children:i,className:r}=t,n=eMt(t,Q$t),s=vs("recharts-layer",r);return U.createElement("g",PK({className:s},Na(n,!0),{ref:e}),i)}),iMt=U.createContext(null);function kr(t){return function(){return t}}const BLe=Math.cos,lz=Math.sin,Zh=Math.sqrt,cz=Math.PI,fU=2*cz,kK=Math.PI,OK=2*kK,_w=1e-6,rMt=OK-_w;function VLe(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function nMt(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return VLe;const i=10**e;return function(r){this._+=r[0];for(let n=1,s=r.length;n<s;++n)this._+=Math.round(arguments[n]*i)/i+r[n]}}class sMt{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?VLe:nMt(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,r,n){this._append`Q${+e},${+i},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,i,r,n,s,o){this._append`C${+e},${+i},${+r},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,i,r,n,s){if(e=+e,i=+i,r=+r,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=n-i,u=o-e,p=a-i,m=u*u+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(m>_w)if(!(Math.abs(p*l-c*u)>_w)||!s)this._append`L${this._x1=e},${this._y1=i}`;else{let v=r-o,w=n-a,_=l*l+c*c,T=v*v+w*w,$=Math.sqrt(_),I=Math.sqrt(m),A=s*Math.tan((kK-Math.acos((_+m-T)/(2*$*I)))/2),k=A/I,R=A/$;Math.abs(k-1)>_w&&this._append`L${e+k*u},${i+k*p}`,this._append`A${s},${s},0,0,${+(p*v>u*w)},${this._x1=e+R*l},${this._y1=i+R*c}`}}arc(e,i,r,n,s,o){if(e=+e,i=+i,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),l=r*Math.sin(n),c=e+a,u=i+l,p=1^o,m=o?n-s:s-n;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>_w||Math.abs(this._y1-u)>_w)&&this._append`L${c},${u}`,r&&(m<0&&(m=m%OK+OK),m>rMt?this._append`A${r},${r},0,1,${p},${e-a},${i-l}A${r},${r},0,1,${p},${this._x1=c},${this._y1=u}`:m>_w&&this._append`A${r},${r},0,${+(m>=kK)},${p},${this._x1=e+r*Math.cos(s)},${this._y1=i+r*Math.sin(s)}`)}rect(e,i,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function Mte(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const r=Math.floor(i);if(!(r>=0))throw new RangeError(`invalid digits: ${i}`);e=r}return t},()=>new sMt(e)}function Cte(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function GLe(t){this._context=t}GLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function mU(t){return new GLe(t)}function qLe(t){return t[0]}function HLe(t){return t[1]}function WLe(t,e){var i=kr(!0),r=null,n=mU,s=null,o=Mte(a);t=typeof t=="function"?t:t===void 0?qLe:kr(t),e=typeof e=="function"?e:e===void 0?HLe:kr(e);function a(l){var c,u=(l=Cte(l)).length,p,m=!1,v;for(r==null&&(s=n(v=o())),c=0;c<=u;++c)!(c<u&&i(p=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(p,c,l),+e(p,c,l));if(v)return s=null,v+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:kr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:kr(+l),a):e},a.defined=function(l){return arguments.length?(i=typeof l=="function"?l:kr(!!l),a):i},a.curve=function(l){return arguments.length?(n=l,r!=null&&(s=n(r)),a):n},a.context=function(l){return arguments.length?(l==null?r=s=null:s=n(r=l),a):r},a}function d3(t,e,i){var r=null,n=kr(!0),s=null,o=mU,a=null,l=Mte(c);t=typeof t=="function"?t:t===void 0?qLe:kr(+t),e=typeof e=="function"?e:kr(e===void 0?0:+e),i=typeof i=="function"?i:i===void 0?HLe:kr(+i);function c(p){var m,v,w,_=(p=Cte(p)).length,T,$=!1,I,A=new Array(_),k=new Array(_);for(s==null&&(a=o(I=l())),m=0;m<=_;++m){if(!(m<_&&n(T=p[m],m,p))===$)if($=!$)v=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),w=m-1;w>=v;--w)a.point(A[w],k[w]);a.lineEnd(),a.areaEnd()}$&&(A[m]=+t(T,m,p),k[m]=+e(T,m,p),a.point(r?+r(T,m,p):A[m],i?+i(T,m,p):k[m]))}if(I)return a=null,I+""||null}function u(){return WLe().defined(n).curve(o).context(s)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:kr(+p),r=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:kr(+p),c):t},c.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:kr(+p),c):r},c.y=function(p){return arguments.length?(e=typeof p=="function"?p:kr(+p),i=null,c):e},c.y0=function(p){return arguments.length?(e=typeof p=="function"?p:kr(+p),c):e},c.y1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:kr(+p),c):i},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(i)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(p){return arguments.length?(n=typeof p=="function"?p:kr(!!p),c):n},c.curve=function(p){return arguments.length?(o=p,s!=null&&(a=o(s)),c):o},c.context=function(p){return arguments.length?(p==null?s=a=null:a=o(s=p),c):s},c}class ZLe{constructor(e,i){this._context=e,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,i){switch(e=+e,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,i,e,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,e,this._y0,e,i);break}}this._x0=e,this._y0=i}}function oMt(t){return new ZLe(t,!0)}function aMt(t){return new ZLe(t,!1)}const Ite={draw(t,e){const i=Zh(e/cz);t.moveTo(i,0),t.arc(0,0,i,0,fU)}},lMt={draw(t,e){const i=Zh(e/5)/2;t.moveTo(-3*i,-i),t.lineTo(-i,-i),t.lineTo(-i,-3*i),t.lineTo(i,-3*i),t.lineTo(i,-i),t.lineTo(3*i,-i),t.lineTo(3*i,i),t.lineTo(i,i),t.lineTo(i,3*i),t.lineTo(-i,3*i),t.lineTo(-i,i),t.lineTo(-3*i,i),t.closePath()}},YLe=Zh(1/3),cMt=YLe*2,uMt={draw(t,e){const i=Zh(e/cMt),r=i*YLe;t.moveTo(0,-i),t.lineTo(r,0),t.lineTo(0,i),t.lineTo(-r,0),t.closePath()}},hMt={draw(t,e){const i=Zh(e),r=-i/2;t.rect(r,r,i,i)}},dMt=.8908130915292852,KLe=lz(cz/10)/lz(7*cz/10),pMt=lz(fU/10)*KLe,fMt=-BLe(fU/10)*KLe,mMt={draw(t,e){const i=Zh(e*dMt),r=pMt*i,n=fMt*i;t.moveTo(0,-i),t.lineTo(r,n);for(let s=1;s<5;++s){const o=fU*s/5,a=BLe(o),l=lz(o);t.lineTo(l*i,-a*i),t.lineTo(a*r-l*n,l*r+a*n)}t.closePath()}},O9=Zh(3),yMt={draw(t,e){const i=-Zh(e/(O9*3));t.moveTo(0,i*2),t.lineTo(-O9*i,-i),t.lineTo(O9*i,-i),t.closePath()}},Uc=-.5,Bc=Zh(3)/2,LK=1/Zh(12),gMt=(LK/2+1)*3,vMt={draw(t,e){const i=Zh(e/gMt),r=i/2,n=i*LK,s=r,o=i*LK+i,a=-s,l=o;t.moveTo(r,n),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Uc*r-Bc*n,Bc*r+Uc*n),t.lineTo(Uc*s-Bc*o,Bc*s+Uc*o),t.lineTo(Uc*a-Bc*l,Bc*a+Uc*l),t.lineTo(Uc*r+Bc*n,Uc*n-Bc*r),t.lineTo(Uc*s+Bc*o,Uc*o-Bc*s),t.lineTo(Uc*a+Bc*l,Uc*l-Bc*a),t.closePath()}};function bMt(t,e){let i=null,r=Mte(n);t=typeof t=="function"?t:kr(t||Ite),e=typeof e=="function"?e:kr(e===void 0?64:+e);function n(){let s;if(i||(i=s=r()),t.apply(this,arguments).draw(i,+e.apply(this,arguments)),s)return i=null,s+""||null}return n.type=function(s){return arguments.length?(t=typeof s=="function"?s:kr(s),n):t},n.size=function(s){return arguments.length?(e=typeof s=="function"?s:kr(+s),n):e},n.context=function(s){return arguments.length?(i=s??null,n):i},n}function uz(){}function hz(t,e,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6)}function JLe(t){this._context=t}JLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hz(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hz(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wMt(t){return new JLe(t)}function XLe(t){this._context=t}XLe.prototype={areaStart:uz,areaEnd:uz,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hz(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _Mt(t){return new XLe(t)}function QLe(t){this._context=t}QLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 3:this._point=4;default:hz(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xMt(t){return new QLe(t)}function eRe(t){this._context=t}eRe.prototype={areaStart:uz,areaEnd:uz,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function SMt(t){return new eRe(t)}function ige(t){return t<0?-1:1}function rge(t,e,i){var r=t._x1-t._x0,n=e-t._x1,s=(t._y1-t._y0)/(r||n<0&&-0),o=(i-t._y1)/(n||r<0&&-0),a=(s*n+o*r)/(r+n);return(ige(s)+ige(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function nge(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function L9(t,e,i){var r=t._x0,n=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,n+a*e,s-a,o-a*i,s,o)}function dz(t){this._context=t}dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L9(this,this._t0,nge(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,L9(this,nge(this,i=rge(this,t,e)),i);break;default:L9(this,this._t0,i=rge(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}};function tRe(t){this._context=new iRe(t)}(tRe.prototype=Object.create(dz.prototype)).point=function(t,e){dz.prototype.point.call(this,e,t)};function iRe(t){this._context=t}iRe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,r,n,s){this._context.bezierCurveTo(e,t,r,i,s,n)}};function EMt(t){return new dz(t)}function TMt(t){return new tRe(t)}function rRe(t){this._context=t}rRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),i===2)this._context.lineTo(t[1],e[1]);else for(var r=sge(t),n=sge(e),s=0,o=1;o<i;++s,++o)this._context.bezierCurveTo(r[0][s],n[0][s],r[1][s],n[1][s],t[o],e[o]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function sge(t){var e,i=t.length-1,r,n=new Array(i),s=new Array(i),o=new Array(i);for(n[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)n[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(n[i-1]=2,s[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)r=n[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(n[i-1]=o[i-1]/s[i-1],e=i-2;e>=0;--e)n[e]=(o[e]-n[e+1])/s[e];for(s[i-1]=(t[i]+n[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-n[e+1];return[n,s]}function $Mt(t){return new rRe(t)}function yU(t,e){this._context=t,this._t=e}yU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}break}}this._x=t,this._y=e}};function MMt(t){return new yU(t,.5)}function CMt(t){return new yU(t,0)}function IMt(t){return new yU(t,1)}function mT(t,e){if((o=t.length)>1)for(var i=1,r,n,s=t[e[0]],o,a=s.length;i<o;++i)for(n=s,s=t[e[i]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function RK(t){for(var e=t.length,i=new Array(e);--e>=0;)i[e]=e;return i}function AMt(t,e){return t[e]}function PMt(t){const e=[];return e.key=t,e}function kMt(){var t=kr([]),e=RK,i=mT,r=AMt;function n(s){var o=Array.from(t.apply(this,arguments),PMt),a,l=o.length,c=-1,u;for(const p of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(p,o[a].key,c,s)]).data=p;for(a=0,u=Cte(e(o));a<l;++a)o[u[a]].index=a;return i(o,u),o}return n.keys=function(s){return arguments.length?(t=typeof s=="function"?s:kr(Array.from(s)),n):t},n.value=function(s){return arguments.length?(r=typeof s=="function"?s:kr(+s),n):r},n.order=function(s){return arguments.length?(e=s==null?RK:typeof s=="function"?s:kr(Array.from(s)),n):e},n.offset=function(s){return arguments.length?(i=s??mT,n):i},n}function OMt(t,e){if((r=t.length)>0){for(var i,r,n=0,s=t[0].length,o;n<s;++n){for(o=i=0;i<r;++i)o+=t[i][n][1]||0;if(o)for(i=0;i<r;++i)t[i][n][1]/=o}mT(t,e)}}function LMt(t,e){if((n=t.length)>0){for(var i=0,r=t[e[0]],n,s=r.length;i<s;++i){for(var o=0,a=0;o<n;++o)a+=t[o][i][1]||0;r[i][1]+=r[i][0]=-a/2}mT(t,e)}}function RMt(t,e){if(!(!((o=t.length)>0)||!((s=(n=t[e[0]]).length)>0))){for(var i=0,r=1,n,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],p=u[r][1]||0,m=u[r-1][1]||0,v=(p-m)/2,w=0;w<a;++w){var _=t[e[w]],T=_[r][1]||0,$=_[r-1][1]||0;v+=T-$}l+=p,c+=v*p}n[r-1][1]+=n[r-1][0]=i,l&&(i-=c/l)}n[r-1][1]+=n[r-1][0]=i,mT(t,e)}}var NMt=["type","size","sizeType"];function NK(){return NK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},NK.apply(null,arguments)}function oge(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function age(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?oge(Object(i),!0).forEach(function(r){DMt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oge(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function DMt(t,e,i){return(e=FMt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function FMt(t){var e=zMt(t,"string");return typeof e=="symbol"?e:e+""}function zMt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jMt(t,e){if(t==null)return{};var i,r,n=UMt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function UMt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var nRe={symbolCircle:Ite,symbolCross:lMt,symbolDiamond:uMt,symbolSquare:hMt,symbolStar:mMt,symbolTriangle:yMt,symbolWye:vMt},BMt=Math.PI/180,VMt=t=>{var e="symbol".concat(Kk(t));return nRe[e]||Ite},GMt=(t,e,i)=>{if(e==="area")return t;switch(i){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*BMt;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},qMt=(t,e)=>{nRe["symbol".concat(Kk(t))]=e},sRe=t=>{var{type:e="circle",size:i=64,sizeType:r="area"}=t,n=jMt(t,NMt),s=age(age({},n),{},{type:e,size:i,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=VMt(o),v=bMt().type(m).size(GMt(i,r,o));return v()},{className:l,cx:c,cy:u}=s,p=Na(s,!0);return c===+c&&u===+u&&i===+i?U.createElement("path",NK({},p,{className:vs("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};sRe.registerSymbol=qMt;var R9={},N9={},lge;function HMt(){return lge||(lge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i,r){const n=new Map;for(let s=0;s<i.length;s++){const o=i[s],a=r(o);n.has(a)||n.set(a,o)}return Array.from(n.values())}t.uniqBy=e})(N9)),N9}var D9={},cge;function oRe(){return cge||(cge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i}t.identity=e})(D9)),D9}var F9={},z9={},j9={},uge;function WMt(){return uge||(uge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return Number.isSafeInteger(i)&&i>=0}t.isLength=e})(j9)),j9}var hge;function Ate(){return hge||(hge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WMt();function i(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=i})(z9)),z9}var U9={},dge;function ZMt(){return dge||(dge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="object"&&i!==null}t.isObjectLike=e})(U9)),U9}var pge;function YMt(){return pge||(pge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ate(),i=ZMt();function r(n){return i.isObjectLike(n)&&e.isArrayLike(n)}t.isArrayLikeObject=r})(F9)),F9}var B9={},V9={},fge;function KMt(){return fge||(fge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tte();function i(r){return function(n){return e.get(n,r)}}t.property=i})(V9)),V9}var G9={},q9={},H9={},W9={},mge;function aRe(){return mge||(mge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i!==null&&(typeof i=="object"||typeof i=="function")}t.isObject=e})(W9)),W9}var Z9={},yge;function lRe(){return yge||(yge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i==null||typeof i!="object"&&typeof i!="function"}t.isPrimitive=e})(Z9)),Z9}var Y9={},gge;function cRe(){return gge||(gge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i,r){return i===r||Number.isNaN(i)&&Number.isNaN(r)}t.eq=e})(Y9)),Y9}var vge;function JMt(){return vge||(vge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pte(),i=aRe(),r=lRe(),n=cRe();function s(p,m,v){return typeof v!="function"?e.isMatch(p,m):o(p,m,function w(_,T,$,I,A,k){const R=v(_,T,$,I,A,k);return R!==void 0?!!R:o(_,T,w,k)},new Map)}function o(p,m,v,w){if(m===p)return!0;switch(typeof m){case"object":return a(p,m,v,w);case"function":return Object.keys(m).length>0?o(p,{...m},v,w):n.eq(p,m);default:return i.isObject(p)?typeof m=="string"?m==="":!0:n.eq(p,m)}}function a(p,m,v,w){if(m==null)return!0;if(Array.isArray(m))return c(p,m,v,w);if(m instanceof Map)return l(p,m,v,w);if(m instanceof Set)return u(p,m,v,w);const _=Object.keys(m);if(p==null)return _.length===0;if(_.length===0)return!0;if(w&&w.has(m))return w.get(m)===p;w&&w.set(m,p);try{for(let T=0;T<_.length;T++){const $=_[T];if(!r.isPrimitive(p)&&!($ in p)||m[$]===void 0&&p[$]!==void 0||m[$]===null&&p[$]!==null||!v(p[$],m[$],$,p,m,w))return!1}return!0}finally{w&&w.delete(m)}}function l(p,m,v,w){if(m.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,T]of m.entries()){const $=p.get(_);if(v($,T,_,p,m,w)===!1)return!1}return!0}function c(p,m,v,w){if(m.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let T=0;T<m.length;T++){const $=m[T];let I=!1;for(let A=0;A<p.length;A++){if(_.has(A))continue;const k=p[A];let R=!1;if(v(k,$,T,p,m,w)&&(R=!0),R){_.add(A),I=!0;break}}if(!I)return!1}return!0}function u(p,m,v,w){return m.size===0?!0:p instanceof Set?c([...p],[...m],v,w):!1}t.isMatchWith=s,t.isSetMatch=u})(H9)),H9}var bge;function Pte(){return bge||(bge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JMt();function i(r,n){return e.isMatchWith(r,n,()=>{})}t.isMatch=i})(q9)),q9}var K9={},J9={},X9={},wge;function XMt(){return wge||(wge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return Object.getOwnPropertySymbols(i).filter(r=>Object.prototype.propertyIsEnumerable.call(i,r))}t.getSymbols=e})(X9)),X9}var Q9={},_ge;function uRe(){return _ge||(_ge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}t.getTag=e})(Q9)),Q9}var e7={},xge;function hRe(){return xge||(xge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",i="[object String]",r="[object Number]",n="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",p="[object Function]",m="[object ArrayBuffer]",v="[object Object]",w="[object Error]",_="[object DataView]",T="[object Uint8Array]",$="[object Uint8ClampedArray]",I="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",R="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",q="[object BigInt64Array]",Y="[object Float32Array]",J="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=u,t.bigInt64ArrayTag=q,t.bigUint64ArrayTag=k,t.booleanTag=n,t.dataViewTag=_,t.dateTag=a,t.errorTag=w,t.float32ArrayTag=Y,t.float64ArrayTag=J,t.functionTag=p,t.int16ArrayTag=F,t.int32ArrayTag=B,t.int8ArrayTag=R,t.mapTag=l,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=c,t.stringTag=i,t.symbolTag=o,t.uint16ArrayTag=I,t.uint32ArrayTag=A,t.uint8ArrayTag=T,t.uint8ClampedArrayTag=$})(e7)),e7}var t7={},Sge;function QMt(){return Sge||(Sge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}t.isTypedArray=e})(t7)),t7}var Ege;function dRe(){return Ege||(Ege=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XMt(),i=uRe(),r=hRe(),n=lRe(),s=QMt();function o(u,p){return a(u,void 0,u,new Map,p)}function a(u,p,m,v=new Map,w=void 0){const _=w==null?void 0:w(u,p,m,v);if(_!==void 0)return _;if(n.isPrimitive(u))return u;if(v.has(u))return v.get(u);if(Array.isArray(u)){const T=new Array(u.length);v.set(u,T);for(let $=0;$<u.length;$++)T[$]=a(u[$],$,m,v,w);return Object.hasOwn(u,"index")&&(T.index=u.index),Object.hasOwn(u,"input")&&(T.input=u.input),T}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const T=new RegExp(u.source,u.flags);return T.lastIndex=u.lastIndex,T}if(u instanceof Map){const T=new Map;v.set(u,T);for(const[$,I]of u)T.set($,a(I,$,m,v,w));return T}if(u instanceof Set){const T=new Set;v.set(u,T);for(const $ of u)T.add(a($,void 0,m,v,w));return T}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const T=new(Object.getPrototypeOf(u)).constructor(u.length);v.set(u,T);for(let $=0;$<u.length;$++)T[$]=a(u[$],$,m,v,w);return T}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const T=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return v.set(u,T),l(T,u,m,v,w),T}if(typeof File<"u"&&u instanceof File){const T=new File([u],u.name,{type:u.type});return v.set(u,T),l(T,u,m,v,w),T}if(u instanceof Blob){const T=new Blob([u],{type:u.type});return v.set(u,T),l(T,u,m,v,w),T}if(u instanceof Error){const T=new u.constructor;return v.set(u,T),T.message=u.message,T.name=u.name,T.stack=u.stack,T.cause=u.cause,l(T,u,m,v,w),T}if(typeof u=="object"&&c(u)){const T=Object.create(Object.getPrototypeOf(u));return v.set(u,T),l(T,u,m,v,w),T}return u}function l(u,p,m=u,v,w){const _=[...Object.keys(p),...e.getSymbols(p)];for(let T=0;T<_.length;T++){const $=_[T],I=Object.getOwnPropertyDescriptor(u,$);(I==null||I.writable)&&(u[$]=a(p[$],$,m,v,w))}}function c(u){switch(i.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(J9)),J9}var Tge;function eCt(){return Tge||(Tge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dRe();function i(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=i})(K9)),K9}var $ge;function tCt(){return $ge||($ge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pte(),i=eCt();function r(n){return n=i.cloneDeep(n),s=>e.isMatch(s,n)}t.matches=r})(G9)),G9}var i7={},r7={},n7={},Mge;function iCt(){return Mge||(Mge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dRe(),i=hRe();function r(n,s){return e.cloneDeepWith(n,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case i.numberTag:case i.stringTag:case i.booleanTag:{const p=new n.constructor(n==null?void 0:n.valueOf());return e.copyProperties(p,n),p}case i.argumentsTag:{const p={};return e.copyProperties(p,n),p.length=n.length,p[Symbol.iterator]=n[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})(n7)),n7}var Cge;function rCt(){return Cge||(Cge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iCt();function i(r){return e.cloneDeepWith(r)}t.cloneDeep=i})(r7)),r7}var s7={},o7={},Ige;function pRe(){return Ige||(Ige=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function i(r,n=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<n;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=i})(o7)),o7}var a7={},Age;function nCt(){return Age||(Age=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uRe();function i(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=i})(a7)),a7}var Pge;function sCt(){return Pge||(Pge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RLe(),i=pRe(),r=nCt(),n=Ete();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=n.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const p=l[u];if((c==null||!Object.hasOwn(c,p))&&!((Array.isArray(c)||r.isArguments(c))&&i.isIndex(p)&&p<c.length))return!1;c=c[p]}return!0}t.has=s})(s7)),s7}var kge;function oCt(){return kge||(kge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pte(),i=NLe(),r=rCt(),n=Tte(),s=sCt();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=i.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=n.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(i7)),i7}var Oge;function aCt(){return Oge||(Oge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oRe(),i=KMt(),r=tCt(),n=oCt();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return i.property(o)}}t.iteratee=s})(B9)),B9}var Lge;function lCt(){return Lge||(Lge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HMt(),i=oRe(),r=YMt(),n=aCt();function s(o,a=i.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.iteratee(a)):[]}t.uniqBy=s})(R9)),R9}var l7,Rge;function cCt(){return Rge||(Rge=1,l7=lCt().uniqBy),l7}var uCt=cCt();const Nge=Qp(uCt);function hCt(t,e,i){return e===!0?Nge(t,i):typeof e=="function"?Nge(t,e):t}var c7={exports:{}},u7={},h7={exports:{}},d7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dge;function dCt(){if(Dge)return d7;Dge=1;var t=ST();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:e,r=t.useState,n=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(p,m){var v=m(),w=r({inst:{value:v,getSnapshot:m}}),_=w[0].inst,T=w[1];return s(function(){_.value=v,_.getSnapshot=m,l(_)&&T({inst:_})},[p,v,m]),n(function(){return l(_)&&T({inst:_}),p(function(){l(_)&&T({inst:_})})},[p]),o(v),v}function l(p){var m=p.getSnapshot;p=p.value;try{var v=m();return!i(p,v)}catch{return!0}}function c(p,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return d7.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,d7}var Fge;function pCt(){return Fge||(Fge=1,h7.exports=dCt()),h7.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zge;function fCt(){if(zge)return u7;zge=1;var t=ST(),e=pCt();function i(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:i,n=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return u7.useSyncExternalStoreWithSelector=function(c,u,p,m,v){var w=s(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=a(function(){function $(F){if(!I){if(I=!0,A=F,F=m(F),v!==void 0&&_.hasValue){var B=_.value;if(v(B,F))return k=B}return k=F}if(B=k,r(A,F))return B;var q=m(F);return v!==void 0&&v(B,q)?(A=F,B):(A=F,k=q)}var I=!1,A,k,R=p===void 0?null:p;return[function(){return $(u())},R===null?void 0:function(){return $(R())}]},[u,p,m,v]);var T=n(c,w[0],w[1]);return o(function(){_.hasValue=!0,_.value=T},[T]),l(T),T},u7}var jge;function mCt(){return jge||(jge=1,c7.exports=fCt()),c7.exports}var yCt=mCt(),kte=U.createContext(null),gCt=t=>t,oa=()=>{var t=U.useContext(kte);return t?t.store.dispatch:gCt},wD=()=>{},vCt=()=>wD,bCt=(t,e)=>t===e;function Ei(t){var e=U.useContext(kte);return yCt.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:vCt,e?e.store.getState:wD,e?e.store.getState:wD,e?t:wD,bCt)}function wCt(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function _Ct(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function xCt(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(i=>typeof i=="function")){const i=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${i}]`)}}var Uge=t=>Array.isArray(t)?t:[t];function SCt(t){const e=Array.isArray(t[0])?t[0]:t;return xCt(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ECt(t,e){const i=[],{length:r}=t;for(let n=0;n<r;n++)i.push(t[n].apply(null,e));return i}var TCt=class{constructor(t){this.value=t}deref(){return this.value}},$Ct=typeof WeakRef<"u"?WeakRef:TCt,MCt=0,Bge=1;function p3(){return{s:MCt,v:void 0,o:null,p:null}}function fRe(t,e={}){let i=p3();const{resultEqualityCheck:r}=e;let n,s=0;function o(){var p;let a=i;const{length:l}=arguments;for(let m=0,v=l;m<v;m++){const w=arguments[m];if(typeof w=="function"||typeof w=="object"&&w!==null){let _=a.o;_===null&&(a.o=_=new WeakMap);const T=_.get(w);T===void 0?(a=p3(),_.set(w,a)):a=T}else{let _=a.p;_===null&&(a.p=_=new Map);const T=_.get(w);T===void 0?(a=p3(),_.set(w,a)):a=T}}const c=a;let u;if(a.s===Bge)u=a.v;else if(u=t.apply(null,arguments),s++,r){const m=((p=n==null?void 0:n.deref)==null?void 0:p.call(n))??n;m!=null&&r(m,u)&&(u=m,s!==0&&s--),n=typeof u=="object"&&u!==null||typeof u=="function"?new $Ct(u):u}return c.s=Bge,c.v=u,u}return o.clearCache=()=>{i=p3(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function CCt(t,...e){const i=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...n)=>{let s=0,o=0,a,l={},c=n.pop();typeof c=="object"&&(l=c,c=n.pop()),wCt(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...i,...l},{memoize:p,memoizeOptions:m=[],argsMemoize:v=fRe,argsMemoizeOptions:w=[]}=u,_=Uge(m),T=Uge(w),$=SCt(n),I=p(function(){return s++,c.apply(null,arguments)},..._),A=v(function(){o++;const R=ECt($,arguments);return a=I.apply(null,R),a},...T);return Object.assign(A,{resultFunc:c,memoizedResultFunc:I,dependencies:$,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var Le=CCt(fRe),ICt=Object.assign((t,e=Le)=>{_Ct(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const i=Object.keys(t),r=i.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[i[l]]=a,o),{}))},{withTypes:()=>ICt}),p7={},f7={},m7={},Vge;function ACt(){return Vge||(Vge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const i=(r,n,s)=>{if(r!==n){const o=e(r),a=e(n);if(o===a&&o===0){if(r<n)return s==="desc"?1:-1;if(r>n)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=i})(m7)),m7}var y7={},g7={},Gge;function mRe(){return Gge||(Gge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"||i instanceof Symbol}t.isSymbol=e})(g7)),g7}var qge;function PCt(){return qge||(qge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mRe(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function n(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!i.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=n})(y7)),y7}var Hge;function kCt(){return Hge||(Hge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ACt(),i=PCt(),r=Ete();function n(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(v=>String(v));const c=(v,w)=>{let _=v;for(let T=0;T<w.length&&_!=null;++T)_=_[w[T]];return _},u=(v,w)=>w==null||v==null?w:typeof v=="object"&&"key"in v?Object.hasOwn(w,v.key)?w[v.key]:c(w,v.path):typeof v=="function"?v(w):Array.isArray(v)?c(w,v):typeof w=="object"?w[v]:w,p=o.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||i.isKey(v)?v:{key:v,path:r.toPath(v)}));return s.map(v=>({original:v,criteria:p.map(w=>u(w,v))})).slice().sort((v,w)=>{for(let _=0;_<p.length;_++){const T=e.compareValues(v.criteria[_],w.criteria[_],a[_]);if(T!==0)return T}return 0}).map(v=>v.original)}t.orderBy=n})(f7)),f7}var v7={},Wge;function OCt(){return Wge||(Wge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i,r=1){const n=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):n.push(u)}};return o(i,0),n}t.flatten=e})(v7)),v7}var b7={},Zge;function yRe(){return Zge||(Zge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pRe(),i=Ate(),r=aRe(),n=cRe();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&i.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?n.eq(l[a],o):!1}t.isIterateeCall=s})(b7)),b7}var Yge;function LCt(){return Yge||(Yge=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kCt(),i=OCt(),r=yRe();function n(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,i.flatten(o),["asc"])}t.sortBy=n})(p7)),p7}var w7,Kge;function RCt(){return Kge||(Kge=1,w7=LCt().sortBy),w7}var NCt=RCt();const gU=Qp(NCt);var gRe=t=>t.legend.settings,DCt=t=>t.legend.size,FCt=t=>t.legend.payload;Le([FCt,gRe],(t,e)=>{var{itemSorter:i}=e,r=t.flat(1);return i?gU(r,i):r});var f3=1;function zCt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,i]=U.useState({height:0,left:0,top:0,width:0}),r=U.useCallback(n=>{if(n!=null){var s=n.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>f3||Math.abs(o.left-e.left)>f3||Math.abs(o.top-e.top)>f3||Math.abs(o.width-e.width)>f3)&&i({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function wo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var jCt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Jge=jCt,_7=()=>Math.random().toString(36).substring(7).split("").join("."),UCt={INIT:`@@redux/INIT${_7()}`,REPLACE:`@@redux/REPLACE${_7()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_7()}`},pz=UCt;function Ote(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function vRe(t,e,i){if(typeof t!="function")throw new Error(wo(2));if(typeof e=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(wo(0));if(typeof e=="function"&&typeof i>"u"&&(i=e,e=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(wo(1));return i(vRe)(t,e)}let r=t,n=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((T,$)=>{o.set($,T)}))}function u(){if(l)throw new Error(wo(3));return n}function p(T){if(typeof T!="function")throw new Error(wo(4));if(l)throw new Error(wo(5));let $=!0;c();const I=a++;return o.set(I,T),function(){if($){if(l)throw new Error(wo(6));$=!1,c(),o.delete(I),s=null}}}function m(T){if(!Ote(T))throw new Error(wo(7));if(typeof T.type>"u")throw new Error(wo(8));if(typeof T.type!="string")throw new Error(wo(17));if(l)throw new Error(wo(9));try{l=!0,n=r(n,T)}finally{l=!1}return(s=o).forEach(I=>{I()}),T}function v(T){if(typeof T!="function")throw new Error(wo(10));r=T,m({type:pz.REPLACE})}function w(){const T=p;return{subscribe($){if(typeof $!="object"||$===null)throw new Error(wo(11));function I(){const k=$;k.next&&k.next(u())}return I(),{unsubscribe:T(I)}},[Jge](){return this}}}return m({type:pz.INIT}),{dispatch:m,subscribe:p,getState:u,replaceReducer:v,[Jge]:w}}function BCt(t){Object.keys(t).forEach(e=>{const i=t[e];if(typeof i(void 0,{type:pz.INIT})>"u")throw new Error(wo(12));if(typeof i(void 0,{type:pz.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wo(13))})}function bRe(t){const e=Object.keys(t),i={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(i[o]=t[o])}const r=Object.keys(i);let n;try{BCt(i)}catch(s){n=s}return function(o={},a){if(n)throw n;let l=!1;const c={};for(let u=0;u<r.length;u++){const p=r[u],m=i[p],v=o[p],w=m(v,a);if(typeof w>"u")throw a&&a.type,new Error(wo(14));c[p]=w,l=l||w!==v}return l=l||r.length!==Object.keys(o).length,l?c:o}}function fz(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,i)=>(...r)=>e(i(...r)))}function VCt(...t){return e=>(i,r)=>{const n=e(i,r);let s=()=>{throw new Error(wo(15))};const o={getState:n.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=fz(...a)(n.dispatch),{...n,dispatch:s}}}function wRe(t){return Ote(t)&&"type"in t&&typeof t.type=="string"}var _Re=Symbol.for("immer-nothing"),Xge=Symbol.for("immer-draftable"),wc=Symbol.for("immer-state");function Ch(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yT=Object.getPrototypeOf;function K_(t){return!!t&&!!t[wc]}function dy(t){var e;return t?xRe(t)||Array.isArray(t)||!!t[Xge]||!!((e=t.constructor)!=null&&e[Xge])||Jk(t)||bU(t):!1}var GCt=Object.prototype.constructor.toString();function xRe(t){if(!t||typeof t!="object")return!1;const e=yT(t);if(e===null)return!0;const i=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===GCt}function mz(t,e){vU(t)===0?Reflect.ownKeys(t).forEach(i=>{e(i,t[i],t)}):t.forEach((i,r)=>e(r,i,t))}function vU(t){const e=t[wc];return e?e.type_:Array.isArray(t)?1:Jk(t)?2:bU(t)?3:0}function DK(t,e){return vU(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function SRe(t,e,i){const r=vU(t);r===2?t.set(e,i):r===3?t.add(i):t[e]=i}function qCt(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Jk(t){return t instanceof Map}function bU(t){return t instanceof Set}function xw(t){return t.copy_||t.base_}function FK(t,e){if(Jk(t))return new Map(t);if(bU(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const i=xRe(t);if(e===!0||e==="class_only"&&!i){const r=Object.getOwnPropertyDescriptors(t);delete r[wc];let n=Reflect.ownKeys(r);for(let s=0;s<n.length;s++){const o=n[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(yT(t),r)}else{const r=yT(t);if(r!==null&&i)return{...t};const n=Object.create(r);return Object.assign(n,t)}}function Lte(t,e=!1){return wU(t)||K_(t)||!dy(t)||(vU(t)>1&&Object.defineProperties(t,{set:{value:m3},add:{value:m3},clear:{value:m3},delete:{value:m3}}),Object.freeze(t),e&&Object.values(t).forEach(i=>Lte(i,!0))),t}function m3(){Ch(2)}function wU(t){return Object.isFrozen(t)}var HCt={};function J_(t){const e=HCt[t];return e||Ch(0,t),e}var PP;function ERe(){return PP}function WCt(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qge(t,e){e&&(J_("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zK(t){jK(t),t.drafts_.forEach(ZCt),t.drafts_=null}function jK(t){t===PP&&(PP=t.parent_)}function eve(t){return PP=WCt(PP,t)}function ZCt(t){const e=t[wc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tve(t,e){e.unfinalizedDrafts_=e.drafts_.length;const i=e.drafts_[0];return t!==void 0&&t!==i?(i[wc].modified_&&(zK(e),Ch(4)),dy(t)&&(t=yz(e,t),e.parent_||gz(e,t)),e.patches_&&J_("Patches").generateReplacementPatches_(i[wc].base_,t,e.patches_,e.inversePatches_)):t=yz(e,i,[]),zK(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==_Re?t:void 0}function yz(t,e,i){if(wU(e))return e;const r=e[wc];if(!r)return mz(e,(n,s)=>ive(t,r,e,n,s,i)),e;if(r.scope_!==t)return e;if(!r.modified_)return gz(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const n=r.copy_;let s=n,o=!1;r.type_===3&&(s=new Set(n),n.clear(),o=!0),mz(s,(a,l)=>ive(t,r,n,a,l,i,o)),gz(t,n,!1),i&&t.patches_&&J_("Patches").generatePatches_(r,i,t.patches_,t.inversePatches_)}return r.copy_}function ive(t,e,i,r,n,s,o){if(K_(n)){const a=s&&e&&e.type_!==3&&!DK(e.assigned_,r)?s.concat(r):void 0,l=yz(t,n,a);if(SRe(i,r,l),K_(l))t.canAutoFreeze_=!1;else return}else o&&i.add(n);if(dy(n)&&!wU(n)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;yz(t,n),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Jk(i)?i.has(r):Object.prototype.propertyIsEnumerable.call(i,r))&&gz(t,n)}}function gz(t,e,i=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Lte(e,i)}function YCt(t,e){const i=Array.isArray(t),r={type_:i?1:0,scope_:e?e.scope_:ERe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=r,s=Rte;i&&(n=[r],s=kP);const{revoke:o,proxy:a}=Proxy.revocable(n,s);return r.draft_=a,r.revoke_=o,a}var Rte={get(t,e){if(e===wc)return t;const i=xw(t);if(!DK(i,e))return KCt(t,i,e);const r=i[e];return t.finalized_||!dy(r)?r:r===x7(t.base_,e)?(S7(t),t.copy_[e]=BK(r,t)):r},has(t,e){return e in xw(t)},ownKeys(t){return Reflect.ownKeys(xw(t))},set(t,e,i){const r=TRe(xw(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,i),!0;if(!t.modified_){const n=x7(xw(t),e),s=n==null?void 0:n[wc];if(s&&s.base_===i)return t.copy_[e]=i,t.assigned_[e]=!1,!0;if(qCt(i,n)&&(i!==void 0||DK(t.base_,e)))return!0;S7(t),UK(t)}return t.copy_[e]===i&&(i!==void 0||e in t.copy_)||Number.isNaN(i)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=i,t.assigned_[e]=!0),!0},deleteProperty(t,e){return x7(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,S7(t),UK(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const i=xw(t),r=Reflect.getOwnPropertyDescriptor(i,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:i[e]}},defineProperty(){Ch(11)},getPrototypeOf(t){return yT(t.base_)},setPrototypeOf(){Ch(12)}},kP={};mz(Rte,(t,e)=>{kP[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});kP.deleteProperty=function(t,e){return kP.set.call(this,t,e,void 0)};kP.set=function(t,e,i){return Rte.set.call(this,t[0],e,i,t[0])};function x7(t,e){const i=t[wc];return(i?xw(i):t)[e]}function KCt(t,e,i){var n;const r=TRe(e,i);return r?"value"in r?r.value:(n=r.get)==null?void 0:n.call(t.draft_):void 0}function TRe(t,e){if(!(e in t))return;let i=yT(t);for(;i;){const r=Object.getOwnPropertyDescriptor(i,e);if(r)return r;i=yT(i)}}function UK(t){t.modified_||(t.modified_=!0,t.parent_&&UK(t.parent_))}function S7(t){t.copy_||(t.copy_=FK(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var JCt=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,i,r)=>{if(typeof e=="function"&&typeof i!="function"){const s=i;i=e;const o=this;return function(l=s,...c){return o.produce(l,u=>i.call(this,u,...c))}}typeof i!="function"&&Ch(6),r!==void 0&&typeof r!="function"&&Ch(7);let n;if(dy(e)){const s=eve(this),o=BK(e,void 0);let a=!0;try{n=i(o),a=!1}finally{a?zK(s):jK(s)}return Qge(s,r),tve(n,s)}else if(!e||typeof e!="object"){if(n=i(e),n===void 0&&(n=e),n===_Re&&(n=void 0),this.autoFreeze_&&Lte(n,!0),r){const s=[],o=[];J_("Patches").generateReplacementPatches_(e,n,s,o),r(s,o)}return n}else Ch(1,e)},this.produceWithPatches=(e,i)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,n;return[this.produce(e,i,(o,a)=>{r=o,n=a}),r,n]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){dy(t)||Ch(8),K_(t)&&(t=ty(t));const e=eve(this),i=BK(t,void 0);return i[wc].isManual_=!0,jK(e),i}finishDraft(t,e){const i=t&&t[wc];(!i||!i.isManual_)&&Ch(9);const{scope_:r}=i;return Qge(r,e),tve(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let i;for(i=e.length-1;i>=0;i--){const n=e[i];if(n.path.length===0&&n.op==="replace"){t=n.value;break}}i>-1&&(e=e.slice(i+1));const r=J_("Patches").applyPatches_;return K_(t)?r(t,e):this.produce(t,n=>r(n,e))}};function BK(t,e){const i=Jk(t)?J_("MapSet").proxyMap_(t,e):bU(t)?J_("MapSet").proxySet_(t,e):YCt(t,e);return(e?e.scope_:ERe()).drafts_.push(i),i}function ty(t){return K_(t)||Ch(10,t),$Re(t)}function $Re(t){if(!dy(t)||wU(t))return t;const e=t[wc];let i;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,i=FK(t,e.scope_.immer_.useStrictShallowCopy_)}else i=FK(t,!0);return mz(i,(r,n)=>{SRe(i,r,$Re(n))}),e&&(e.finalized_=!1),i}var XCt=new JCt,MRe=XCt.produce;function CRe(t){return({dispatch:i,getState:r})=>n=>s=>typeof s=="function"?s(i,r,t):n(s)}var QCt=CRe(),eIt=CRe,tIt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fz:fz.apply(null,arguments)};function Eu(t,e){function i(...r){if(e){let n=e(...r);if(!n)throw new Error(yc(0));return{type:t,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:t,payload:r[0]}}return i.toString=()=>`${t}`,i.type=t,i.match=r=>wRe(r)&&r.type===t,i}var IRe=class kI extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,kI.prototype)}static get[Symbol.species](){return kI}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new kI(...e[0].concat(this)):new kI(...e.concat(this))}};function rve(t){return dy(t)?MRe(t,()=>{}):t}function y3(t,e,i){return t.has(e)?t.get(e):t.set(e,i(e)).get(e)}function iIt(t){return typeof t=="boolean"}var rIt=()=>function(e){const{thunk:i=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let o=new IRe;return i&&(iIt(i)?o.push(QCt):o.push(eIt(i.extraArgument))),o},nIt="RTK_autoBatch",nve=t=>e=>{setTimeout(e,t)},sIt=(t={type:"raf"})=>e=>(...i)=>{const r=e(...i);let n=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nve(10):t.type==="callback"?t.queueNotification:nve(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const p=()=>n&&u(),m=r.subscribe(p);return a.add(u),()=>{m(),a.delete(u)}},dispatch(u){var p;try{return n=!((p=u==null?void 0:u.meta)!=null&&p[nIt]),s=!n,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{n=!0}}})},oIt=t=>function(i){const{autoBatch:r=!0}=i??{};let n=new IRe(t);return r&&n.push(sIt(typeof r=="object"?r:void 0)),n};function aIt(t){const e=rIt(),{reducer:i=void 0,middleware:r,devTools:n=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof i=="function")a=i;else if(Ote(i))a=bRe(i);else throw new Error(yc(1));let l;typeof r=="function"?l=r(e):l=e();let c=fz;n&&(c=tIt({trace:!1,...typeof n=="object"&&n}));const u=VCt(...l),p=oIt(u);let m=typeof o=="function"?o(p):p();const v=c(...m);return vRe(a,s,v)}function ARe(t){const e={},i=[];let r;const n={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(yc(28));if(a in e)throw new Error(yc(29));return e[a]=o,n},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&i.push({matcher:s.settled,reducer:o.settled}),n},addMatcher(s,o){return i.push({matcher:s,reducer:o}),n},addDefaultCase(s){return r=s,n}};return t(n),[e,i,r]}function lIt(t){return typeof t=="function"}function cIt(t,e){let[i,r,n]=ARe(e),s;if(lIt(t))s=()=>rve(t());else{const a=rve(t);s=()=>a}function o(a=s(),l){let c=[i[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[n]),c.reduce((u,p)=>{if(p)if(K_(u)){const v=p(u,l);return v===void 0?u:v}else{if(dy(u))return MRe(u,m=>p(m,l));{const m=p(u,l);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},a)}return o.getInitialState=s,o}var uIt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hIt=(t=21)=>{let e="",i=t;for(;i--;)e+=uIt[Math.random()*64|0];return e},dIt=Symbol.for("rtk-slice-createasyncthunk");function pIt(t,e){return`${t}/${e}`}function fIt({creators:t}={}){var i;const e=(i=t==null?void 0:t.asyncThunk)==null?void 0:i[dIt];return function(n){const{name:s,reducerPath:o=s}=n;if(!s)throw new Error(yc(11));const a=(typeof n.reducers=="function"?n.reducers(yIt()):n.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(k,R){const F=typeof k=="string"?k:k.type;if(!F)throw new Error(yc(12));if(F in c.sliceCaseReducersByType)throw new Error(yc(13));return c.sliceCaseReducersByType[F]=R,u},addMatcher(k,R){return c.sliceMatchers.push({matcher:k,reducer:R}),u},exposeAction(k,R){return c.actionCreators[k]=R,u},exposeCaseReducer(k,R){return c.sliceCaseReducersByName[k]=R,u}};l.forEach(k=>{const R=a[k],F={reducerName:k,type:pIt(s,k),createNotation:typeof n.reducers=="function"};vIt(R)?wIt(F,R,u,e):gIt(F,R,u)});function p(){const[k={},R=[],F=void 0]=typeof n.extraReducers=="function"?ARe(n.extraReducers):[n.extraReducers],B={...k,...c.sliceCaseReducersByType};return cIt(n.initialState,q=>{for(let Y in B)q.addCase(Y,B[Y]);for(let Y of c.sliceMatchers)q.addMatcher(Y.matcher,Y.reducer);for(let Y of R)q.addMatcher(Y.matcher,Y.reducer);F&&q.addDefaultCase(F)})}const m=k=>k,v=new Map,w=new WeakMap;let _;function T(k,R){return _||(_=p()),_(k,R)}function $(){return _||(_=p()),_.getInitialState()}function I(k,R=!1){function F(q){let Y=q[k];return typeof Y>"u"&&R&&(Y=y3(w,F,$)),Y}function B(q=m){const Y=y3(v,R,()=>new WeakMap);return y3(Y,q,()=>{const J={};for(const[Q,te]of Object.entries(n.selectors??{}))J[Q]=mIt(te,q,()=>y3(w,q,$),R);return J})}return{reducerPath:k,getSelectors:B,get selectors(){return B(F)},selectSlice:F}}const A={name:s,reducer:T,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:$,...I(o),injectInto(k,{reducerPath:R,...F}={}){const B=R??o;return k.inject({reducerPath:B,reducer:T},F),{...A,...I(B,!0)}}};return A}}function mIt(t,e,i,r){function n(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=i()),t(a,...o)}return n.unwrapped=t,n}var Tc=fIt();function yIt(){function t(e,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...i}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...i){return e(...i)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:i}},asyncThunk:t}}function gIt({type:t,reducerName:e,createNotation:i},r,n){let s,o;if("reducer"in r){if(i&&!bIt(r))throw new Error(yc(17));s=r.reducer,o=r.prepare}else s=r;n.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Eu(t,o):Eu(t))}function vIt(t){return t._reducerDefinitionType==="asyncThunk"}function bIt(t){return t._reducerDefinitionType==="reducerWithPrepare"}function wIt({type:t,reducerName:e},i,r,n){if(!n)throw new Error(yc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=i,p=n(t,s,u);r.exposeAction(e,p),o&&r.addCase(p.fulfilled,o),a&&r.addCase(p.pending,a),l&&r.addCase(p.rejected,l),c&&r.addMatcher(p.settled,c),r.exposeCaseReducer(e,{fulfilled:o||g3,pending:a||g3,rejected:l||g3,settled:c||g3})}function g3(){}var _It="task",PRe="listener",kRe="completed",Nte="cancelled",xIt=`task-${Nte}`,SIt=`task-${kRe}`,VK=`${PRe}-${Nte}`,EIt=`${PRe}-${kRe}`,_U=class{constructor(t){Fi(this,"name","TaskAbortError");Fi(this,"message");this.code=t,this.message=`${_It} ${Nte} (reason: ${t})`}},Dte=(t,e)=>{if(typeof t!="function")throw new TypeError(yc(32))},vz=()=>{},ORe=(t,e=vz)=>(t.catch(e),t),LRe=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),y_=(t,e)=>{const i=t.signal;i.aborted||("reason"in i||Object.defineProperty(i,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},g_=t=>{if(t.aborted){const{reason:e}=t;throw new _U(e)}};function RRe(t,e){let i=vz;return new Promise((r,n)=>{const s=()=>n(new _U(t.reason));if(t.aborted){s();return}i=LRe(t,s),e.finally(()=>i()).then(r,n)}).finally(()=>{i=vz})}var TIt=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(i){return{status:i instanceof _U?"cancelled":"rejected",error:i}}finally{e==null||e()}},bz=t=>e=>ORe(RRe(t,e).then(i=>(g_(t),i))),NRe=t=>{const e=bz(t);return i=>e(new Promise(r=>setTimeout(r,i)))},{assign:F2}=Object,sve={},xU="listenerMiddleware",$It=(t,e)=>{const i=r=>LRe(t,()=>y_(r,t.reason));return(r,n)=>{Dte(r);const s=new AbortController;i(s);const o=TIt(async()=>{g_(t),g_(s.signal);const a=await r({pause:bz(s.signal),delay:NRe(s.signal),signal:s.signal});return g_(s.signal),a},()=>y_(s,SIt));return n!=null&&n.autoJoin&&e.push(o.catch(vz)),{result:bz(t)(o),cancel(){y_(s,xIt)}}}},MIt=(t,e)=>{const i=async(r,n)=>{g_(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(p,m)=>{m.unsubscribe(),l([p,m.getState(),m.getOriginalState()])}});s=()=>{u(),c()}})];n!=null&&a.push(new Promise(l=>setTimeout(l,n,null)));try{const l=await RRe(e,Promise.race(a));return g_(e),l}finally{s()}};return(r,n)=>ORe(i(r,n))},DRe=t=>{let{type:e,actionCreator:i,matcher:r,predicate:n,effect:s}=t;if(e)n=Eu(e).match;else if(i)e=i.type,n=i.match;else if(r)n=r;else if(!n)throw new Error(yc(21));return Dte(s),{predicate:n,type:e,effect:s}},FRe=F2(t=>{const{type:e,predicate:i,effect:r}=DRe(t);return{id:hIt(),effect:r,type:e,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(yc(22))}}},{withTypes:()=>FRe}),ove=(t,e)=>{const{type:i,effect:r,predicate:n}=DRe(e);return Array.from(t.values()).find(s=>(typeof i=="string"?s.type===i:s.predicate===n)&&s.effect===r)},GK=t=>{t.pending.forEach(e=>{y_(e,VK)})},CIt=t=>()=>{t.forEach(GK),t.clear()},ave=(t,e,i)=>{try{t(e,i)}catch(r){setTimeout(()=>{throw r},0)}},zRe=F2(Eu(`${xU}/add`),{withTypes:()=>zRe}),IIt=Eu(`${xU}/removeAll`),jRe=F2(Eu(`${xU}/remove`),{withTypes:()=>jRe}),AIt=(...t)=>{console.error(`${xU}/error`,...t)},Xk=(t={})=>{const e=new Map,{extra:i,onError:r=AIt}=t;Dte(r);const n=u=>(u.unsubscribe=()=>e.delete(u.id),e.set(u.id,u),p=>{u.unsubscribe(),p!=null&&p.cancelActive&&GK(u)}),s=u=>{const p=ove(e,u)??FRe(u);return n(p)};F2(s,{withTypes:()=>s});const o=u=>{const p=ove(e,u);return p&&(p.unsubscribe(),u.cancelActive&&GK(p)),!!p};F2(o,{withTypes:()=>o});const a=async(u,p,m,v)=>{const w=new AbortController,_=MIt(s,w.signal),T=[];try{u.pending.add(w),await Promise.resolve(u.effect(p,F2({},m,{getOriginalState:v,condition:($,I)=>_($,I).then(Boolean),take:_,delay:NRe(w.signal),pause:bz(w.signal),extra:i,signal:w.signal,fork:$It(w.signal,T),unsubscribe:u.unsubscribe,subscribe:()=>{e.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach(($,I,A)=>{$!==w&&(y_($,VK),A.delete($))})},cancel:()=>{y_(w,VK),u.pending.delete(w)},throwIfCancelled:()=>{g_(w.signal)}})))}catch($){$ instanceof _U||ave(r,$,{raisedBy:"effect"})}finally{await Promise.all(T),y_(w,EIt),u.pending.delete(w)}},l=CIt(e);return{middleware:u=>p=>m=>{if(!wRe(m))return p(m);if(zRe.match(m))return s(m.payload);if(IIt.match(m)){l();return}if(jRe.match(m))return o(m.payload);let v=u.getState();const w=()=>{if(v===sve)throw new Error(yc(23));return v};let _;try{if(_=p(m),e.size>0){const T=u.getState(),$=Array.from(e.values());for(const I of $){let A=!1;try{A=I.predicate(m,T,v)}catch(k){A=!1,ave(r,k,{raisedBy:"predicate"})}A&&a(I,m,u,w)}}}finally{v=sve}return _},startListening:s,stopListening:o,clearListeners:l}};function yc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var PIt={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},URe=Tc({name:"chartLayout",initialState:PIt,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var i,r,n,s;t.margin.top=(i=e.payload.top)!==null&&i!==void 0?i:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(n=e.payload.bottom)!==null&&n!==void 0?n:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:kIt,setLayout:OIt,setChartSize:LIt,setScale:RIt}=URe.actions,NIt=URe.reducer;function lve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function cve(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?lve(Object(i),!0).forEach(function(r){DIt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function DIt(t,e,i){return(e=FIt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function FIt(t){var e=zIt(t,"string");return typeof e=="symbol"?e:e+""}function zIt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wz=Math.PI/180,jIt=t=>t*180/Math.PI,ms=(t,e,i,r)=>({x:t+Math.cos(-wz*r)*i,y:e+Math.sin(-wz*r)*i}),BRe=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(i-(r.top||0)-(r.bottom||0)))/2},UIt=(t,e)=>{var{x:i,y:r}=t,{x:n,y:s}=e;return Math.sqrt((i-n)**2+(r-s)**2)},BIt=(t,e)=>{var{x:i,y:r}=t,{cx:n,cy:s}=e,o=UIt({x:i,y:r},{x:n,y:s});if(o<=0)return{radius:o,angle:0};var a=(i-n)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:jIt(l),angleInRadian:l}},VIt=t=>{var{startAngle:e,endAngle:i}=t,r=Math.floor(e/360),n=Math.floor(i/360),s=Math.min(r,n);return{startAngle:e-s*360,endAngle:i-s*360}},GIt=(t,e)=>{var{startAngle:i,endAngle:r}=e,n=Math.floor(i/360),s=Math.floor(r/360),o=Math.min(n,s);return t+o*360},qIt=(t,e)=>{var{x:i,y:r}=t,{radius:n,angle:s}=BIt({x:i,y:r},e),{innerRadius:o,outerRadius:a}=e;if(n<o||n>a||n===0)return null;var{startAngle:l,endAngle:c}=VIt(e),u=s,p;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;p=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;p=u>=c&&u<=l}return p?cve(cve({},e),{},{radius:n,angle:GIt(u,e)}):null};function VRe(t,e,i){return Array.isArray(t)&&t&&e+i!==0?t.slice(e,i+1):t}function uve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function uu(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?uve(Object(i),!0).forEach(function(r){HIt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):uve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function HIt(t,e,i){return(e=WIt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function WIt(t){var e=ZIt(t,"string");return typeof e=="symbol"?e:e+""}function ZIt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ys(t,e,i){return bc(t)||bc(e)?i:hy(e)?IP(t,e,i):typeof e=="function"?e(t):i}var YIt=(t,e,i,r,n)=>{var s,o=-1,a=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var l=0;l<a;l++){var c=l>0?i[l-1].coordinate:i[a-1].coordinate,u=i[l].coordinate,p=l>=a-1?i[0].coordinate:i[l+1].coordinate,m=void 0;if(hl(u-c)!==hl(p-u)){var v=[];if(hl(p-u)===hl(n[1]-n[0])){m=p;var w=u+n[1]-n[0];v[0]=Math.min(w,(w+c)/2),v[1]=Math.max(w,(w+c)/2)}else{m=c;var _=p+n[1]-n[0];v[0]=Math.min(u,(_+u)/2),v[1]=Math.max(u,(_+u)/2)}var T=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(t>T[0]&&t<=T[1]||t>=v[0]&&t<=v[1]){({index:o}=i[l]);break}}else{var $=Math.min(c,p),I=Math.max(c,p);if(t>($+u)/2&&t<=(I+u)/2){({index:o}=i[l]);break}}}else if(e){for(var A=0;A<a;A++)if(A===0&&t<=(e[A].coordinate+e[A+1].coordinate)/2||A>0&&A<a-1&&t>(e[A].coordinate+e[A-1].coordinate)/2&&t<=(e[A].coordinate+e[A+1].coordinate)/2||A===a-1&&t>(e[A].coordinate+e[A-1].coordinate)/2){({index:o}=e[A]);break}}return o},KIt=(t,e,i)=>{if(e&&i){var{width:r,height:n}=i,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&bi(t[s]))return uu(uu({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&bi(t[o]))return uu(uu({},t),{},{[o]:t[o]+(n||0)})}return t},f1=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",hve=1e-4,JIt=t=>{var e=t.domain();if(!(!e||e.length<=2)){var i=e.length,r=t.range(),n=Math.min(r[0],r[1])-hve,s=Math.max(r[0],r[1])+hve,o=t(e[0]),a=t(e[i-1]);(o<n||o>s||a<n||a>s)&&t.domain([e[0],e[i-1]])}},XIt=t=>{var e=t.length;if(!(e<=0))for(var i=0,r=t[0].length;i<r;++i)for(var n=0,s=0,o=0;o<e;++o){var a=Vh(t[o][i][1])?t[o][i][0]:t[o][i][1];a>=0?(t[o][i][0]=n,t[o][i][1]=n+a,n=t[o][i][1]):(t[o][i][0]=s,t[o][i][1]=s+a,s=t[o][i][1])}},QIt=t=>{var e=t.length;if(!(e<=0))for(var i=0,r=t[0].length;i<r;++i)for(var n=0,s=0;s<e;++s){var o=Vh(t[s][i][1])?t[s][i][0]:t[s][i][1];o>=0?(t[s][i][0]=n,t[s][i][1]=n+o,n=t[s][i][1]):(t[s][i][0]=0,t[s][i][1]=0)}},eAt={sign:XIt,expand:OMt,none:mT,silhouette:LMt,wiggle:RMt,positive:QIt},tAt=(t,e,i)=>{var r=eAt[i],n=kMt().keys(e).value((s,o)=>+ys(s,o,0)).order(RK).offset(r);return n(t)},iAt=t=>{var e=t.flat(2).filter(bi);return[Math.min(...e),Math.max(...e)]},rAt=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],nAt=(t,e,i)=>{if(t!=null)return rAt(Object.keys(t).reduce((r,n)=>{var s=t[n],{stackedData:o}=s,a=o.reduce((l,c)=>{var u=VRe(c,e,i),p=iAt(u);return[Math.min(l[0],p[0]),Math.max(l[1],p[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},dve=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pve=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sAt=(t,e,i)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();return r}if(t&&e&&e.length>=2){for(var n=gU(e,u=>u.coordinate),s=1/0,o=1,a=n.length;o<a;o++){var l=n[o],c=n[o-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return 0};function fve(t){var{tooltipEntrySettings:e,dataKey:i,payload:r,value:n,name:s}=t;return uu(uu({},e),{},{dataKey:i,payload:r,value:n,name:s})}function GRe(t,e){if(t)return String(t);if(typeof e=="string")return e}function oAt(t,e,i,r,n){if(i==="horizontal"||i==="vertical"){var s=t>=n.left&&t<=n.left+n.width&&e>=n.top&&e<=n.top+n.height;return s?{x:t,y:e}:null}return r?qIt({x:t,y:e},r):null}var aAt=(t,e,i,r)=>{var n=e.find(c=>c&&c.index===i);if(n){if(t==="horizontal")return{x:n.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:n.coordinate};if(t==="centric"){var s=n.coordinate,{radius:o}=r;return uu(uu(uu({},r),ms(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=n.coordinate,{angle:l}=r;return uu(uu(uu({},r),ms(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},lAt=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Sy=t=>t.layout.width,Ey=t=>t.layout.height,cAt=t=>t.layout.scale,qRe=t=>t.layout.margin,SU=Le(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),EU=Le(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),HRe="data-recharts-item-index",WRe="data-recharts-item-data-key",Qk=60;function mve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function v3(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?mve(Object(i),!0).forEach(function(r){uAt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function uAt(t,e,i){return(e=hAt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function hAt(t){var e=dAt(t,"string");return typeof e=="symbol"?e:e+""}function dAt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pAt=t=>t.brush.height;function fAt(t){var e=EU(t);return e.reduce((i,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var n=typeof r.width=="number"?r.width:Qk;return i+n}return i},0)}function mAt(t){var e=EU(t);return e.reduce((i,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var n=typeof r.width=="number"?r.width:Qk;return i+n}return i},0)}function yAt(t){var e=SU(t);return e.reduce((i,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?i+r.height:i,0)}function gAt(t){var e=SU(t);return e.reduce((i,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?i+r.height:i,0)}var ro=Le([Sy,Ey,qRe,pAt,fAt,mAt,yAt,gAt,gRe,DCt],(t,e,i,r,n,s,o,a,l,c)=>{var u={left:(i.left||0)+n,right:(i.right||0)+s},p={top:(i.top||0)+o,bottom:(i.bottom||0)+a},m=v3(v3({},p),u),v=m.bottom;m.bottom+=r,m=KIt(m,l,c);var w=t-m.left-m.right,_=e-m.top-m.bottom;return v3(v3({brushBottom:v},m),{},{width:Math.max(w,0),height:Math.max(_,0)})}),vAt=Le(ro,t=>({x:t.left,y:t.top,width:t.width,height:t.height}));Le(Sy,Ey,(t,e)=>({x:0,y:0,width:t,height:e}));var bAt=U.createContext(null),s$=()=>U.useContext(bAt)!=null,TU=t=>t.brush,$U=Le([TU,ro,qRe],(t,e,i)=>({height:t.height,x:bi(t.x)?t.x:e.left,y:bi(t.y)?t.y:e.top+e.height+e.brushBottom-((i==null?void 0:i.bottom)||0),width:bi(t.width)?t.width:e.width})),Fte=()=>{var t,e=s$(),i=Ei(vAt),r=Ei($U),n=(t=Ei(TU))===null||t===void 0?void 0:t.padding;return!e||!r||!n?i:{width:r.width-n.left-n.right,height:r.height-n.top-n.bottom,x:n.left,y:n.top}},wAt={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_At=()=>{var t;return(t=Ei(ro))!==null&&t!==void 0?t:wAt},xAt=()=>Ei(Sy),SAt=()=>Ei(Ey),Dr=t=>t.layout.layoutType,ZRe=()=>Ei(Dr),EAt={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YRe=Tc({name:"legend",initialState:EAt,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var i=ty(t).payload.indexOf(e.payload);i>-1&&t.payload.splice(i,1)}}}),{setLegendSize:zYt,setLegendSettings:jYt,addLegendPayload:TAt,removeLegendPayload:$At}=YRe.actions,MAt=YRe.reducer;function qK(){return qK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},qK.apply(null,arguments)}function yve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function E7(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?yve(Object(i),!0).forEach(function(r){CAt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function CAt(t,e,i){return(e=IAt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function IAt(t){var e=AAt(t,"string");return typeof e=="symbol"?e:e+""}function AAt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PAt(t){return Array.isArray(t)&&hy(t[0])&&hy(t[1])?t.join(" ~ "):t}var kAt=t=>{var{separator:e=" : ",contentStyle:i={},itemStyle:r={},labelStyle:n={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:p,accessibilityLayer:m=!1}=t,v=()=>{if(s&&s.length){var R={padding:0,margin:0},F=(a?gU(s,a):s).map((B,q)=>{if(B.type==="none")return null;var Y=B.formatter||o||PAt,{value:J,name:Q}=B,te=J,re=Q;if(Y){var ee=Y(J,Q,B,q,s);if(Array.isArray(ee))[te,re]=ee;else if(ee!=null)te=ee;else return null}var ye=E7({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},r);return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:ye},hy(re)?U.createElement("span",{className:"recharts-tooltip-item-name"},re):null,hy(re)?U.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,U.createElement("span",{className:"recharts-tooltip-item-value"},te),U.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:R},F)}return null},w=E7({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=E7({margin:0},n),T=!bc(u),$=T?u:"",I=vs("recharts-default-tooltip",l),A=vs("recharts-tooltip-label",c);T&&p&&s!==void 0&&s!==null&&($=p(u,s));var k=m?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",qK({className:I,style:w},k),U.createElement("p",{className:A,style:_},U.isValidElement($)?$:"".concat($)),v())},lC="recharts-tooltip-wrapper",OAt={visibility:"hidden"};function LAt(t){var{coordinate:e,translateX:i,translateY:r}=t;return vs(lC,{["".concat(lC,"-right")]:bi(i)&&e&&bi(e.x)&&i>=e.x,["".concat(lC,"-left")]:bi(i)&&e&&bi(e.x)&&i<e.x,["".concat(lC,"-bottom")]:bi(r)&&e&&bi(e.y)&&r>=e.y,["".concat(lC,"-top")]:bi(r)&&e&&bi(e.y)&&r<e.y})}function gve(t){var{allowEscapeViewBox:e,coordinate:i,key:r,offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&bi(s[r]))return s[r];var u=i[r]-a-(n>0?n:0),p=i[r]+n;if(e[r])return o[r]?u:p;var m=l[r];if(m==null)return 0;if(o[r]){var v=u,w=m;return v<w?Math.max(p,m):Math.max(u,m)}if(c==null)return 0;var _=p+a,T=m+c;return _>T?Math.max(u,m):Math.max(p,m)}function RAt(t){var{translateX:e,translateY:i,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(i,"px, 0)"):"translate(".concat(e,"px, ").concat(i,"px)")}}function NAt(t){var{allowEscapeViewBox:e,coordinate:i,offsetTopLeft:r,position:n,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,p;return o.height>0&&o.width>0&&i?(u=gve({allowEscapeViewBox:e,coordinate:i,key:"x",offsetTopLeft:r,position:n,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),p=gve({allowEscapeViewBox:e,coordinate:i,key:"y",offsetTopLeft:r,position:n,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=RAt({translateX:u,translateY:p,useTranslate3d:a})):c=OAt,{cssProperties:c,cssClasses:LAt({translateX:u,translateY:p,coordinate:i})}}function vve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function b3(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vve(Object(i),!0).forEach(function(r){HK(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function HK(t,e,i){return(e=DAt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function DAt(t){var e=FAt(t,"string");return typeof e=="symbol"?e:e+""}function FAt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class zAt extends U.PureComponent{constructor(){super(...arguments),HK(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),HK(this,"handleKeyDown",e=>{if(e.key==="Escape"){var i,r,n,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0,y:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,i;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:i,animationDuration:r,animationEasing:n,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:p,useTranslate3d:m,viewBox:v,wrapperStyle:w,lastBoundingBox:_,innerRef:T,hasPortalFromProps:$}=this.props,{cssClasses:I,cssProperties:A}=NAt({allowEscapeViewBox:i,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:p,tooltipBox:{height:_.height,width:_.width},useTranslate3d:m,viewBox:v}),k=$?{}:b3(b3({transition:l&&e?"transform ".concat(r,"ms ").concat(n):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),R=b3(b3({},k),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},w);return U.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:I,style:R,ref:T},s)}}var jAt=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),eO={devToolsEnabled:!1,isSsr:jAt()},KRe=()=>Ei(t=>t.rootProps.accessibilityLayer);function Gh(t){return Number.isFinite(t)}function _z(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function WK(){return WK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},WK.apply(null,arguments)}function bve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function wve(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?bve(Object(i),!0).forEach(function(r){UAt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):bve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function UAt(t,e,i){return(e=BAt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function BAt(t){var e=VAt(t,"string");return typeof e=="symbol"?e:e+""}function VAt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _ve={curveBasisClosed:_Mt,curveBasisOpen:xMt,curveBasis:wMt,curveBumpX:oMt,curveBumpY:aMt,curveLinearClosed:SMt,curveLinear:mU,curveMonotoneX:EMt,curveMonotoneY:TMt,curveNatural:$Mt,curveStep:MMt,curveStepAfter:IMt,curveStepBefore:CMt},w3=t=>Gh(t.x)&&Gh(t.y),cC=t=>t.x,uC=t=>t.y,GAt=(t,e)=>{if(typeof t=="function")return t;var i="curve".concat(Kk(t));return(i==="curveMonotone"||i==="curveBump")&&e?_ve["".concat(i).concat(e==="vertical"?"Y":"X")]:_ve[i]||mU},qAt=t=>{var{type:e="linear",points:i=[],baseLine:r,layout:n,connectNulls:s=!1}=t,o=GAt(e,n),a=s?i.filter(w3):i,l;if(Array.isArray(r)){var c=s?r.filter(p=>w3(p)):r,u=a.map((p,m)=>wve(wve({},p),{},{base:c[m]}));return n==="vertical"?l=d3().y(uC).x1(cC).x0(p=>p.base.x):l=d3().x(cC).y1(uC).y0(p=>p.base.y),l.defined(w3).curve(o),l(u)}return n==="vertical"&&bi(r)?l=d3().y(uC).x1(cC).x0(r):bi(r)?l=d3().x(cC).y1(uC).y0(r):l=WLe().x(cC).y(uC),l.defined(w3).curve(o),l(a)},JRe=t=>{var{className:e,points:i,path:r,pathRef:n}=t;if((!i||!i.length)&&!r)return null;var s=i&&i.length?qAt(t):r;return U.createElement("path",WK({},pU(t),q$t(t),{className:vs("recharts-curve",e),d:s===null?void 0:s,ref:n}))},HAt=["x","y","top","left","width","height","className"];function ZK(){return ZK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},ZK.apply(null,arguments)}function xve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function WAt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?xve(Object(i),!0).forEach(function(r){ZAt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ZAt(t,e,i){return(e=YAt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function YAt(t){var e=KAt(t,"string");return typeof e=="symbol"?e:e+""}function KAt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JAt(t,e){if(t==null)return{};var i,r,n=XAt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function XAt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var QAt=(t,e,i,r,n,s)=>"M".concat(t,",").concat(n,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(i),ePt=t=>{var{x:e=0,y:i=0,top:r=0,left:n=0,width:s=0,height:o=0,className:a}=t,l=JAt(t,HAt),c=WAt({x:e,y:i,top:r,left:n,width:s,height:o},l);return!bi(e)||!bi(i)||!bi(s)||!bi(o)||!bi(r)||!bi(n)?null:U.createElement("path",ZK({},Na(c,!0),{className:vs("recharts-cross",a),d:QAt(e,i,s,o,r,n)}))};function tPt(t,e,i,r){var n=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-n:i.left+.5,y:t==="horizontal"?i.top+.5:e.y-n,width:t==="horizontal"?r:i.width-1,height:t==="horizontal"?i.height-1:r}}function Sve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function iPt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Sve(Object(i),!0).forEach(function(r){rPt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Sve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function rPt(t,e,i){return(e=nPt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function nPt(t){var e=sPt(t,"string");return typeof e=="symbol"?e:e+""}function sPt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ty(t,e){var i=iPt({},t),r=e,n=Object.keys(e),s=n.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),i);return s}function Eve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Tve(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Eve(Object(i),!0).forEach(function(r){oPt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Eve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function oPt(t,e,i){return(e=aPt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function aPt(t){var e=lPt(t,"string");return typeof e=="symbol"?e:e+""}function lPt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cPt=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),XRe=(t,e,i)=>t.map(r=>"".concat(cPt(r)," ").concat(e,"ms ").concat(i)).join(","),uPt=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((i,r)=>i.filter(n=>r.includes(n))),OP=(t,e)=>Object.keys(e).reduce((i,r)=>Tve(Tve({},i),{},{[r]:t(r,e[r])}),{});function $ve(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Eo(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$ve(Object(i),!0).forEach(function(r){hPt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$ve(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function hPt(t,e,i){return(e=dPt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function dPt(t){var e=pPt(t,"string");return typeof e=="symbol"?e:e+""}function pPt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xz=(t,e,i)=>t+(e-t)*i,YK=t=>{var{from:e,to:i}=t;return e!==i},QRe=(t,e,i)=>{var r=OP((n,s)=>{if(YK(s)){var[o,a]=t(s.from,s.to,s.velocity);return Eo(Eo({},s),{},{from:o,velocity:a})}return s},e);return i<1?OP((n,s)=>YK(s)?Eo(Eo({},s),{},{velocity:xz(s.velocity,r[n].velocity,i),from:xz(s.from,r[n].from,i)}):s,e):QRe(t,r,i-1)};function fPt(t,e,i,r,n,s){var o,a=r.reduce((m,v)=>Eo(Eo({},m),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),l=()=>OP((m,v)=>v.from,a),c=()=>!Object.values(a).filter(YK).length,u=null,p=m=>{o||(o=m);var v=m-o,w=v/i.dt;a=QRe(i,a,w),n(Eo(Eo(Eo({},t),e),l())),o=m,c()||(u=s.setTimeout(p))};return()=>(u=s.setTimeout(p),()=>{u()})}function mPt(t,e,i,r,n,s,o){var a=null,l=n.reduce((p,m)=>Eo(Eo({},p),{},{[m]:[t[m],e[m]]}),{}),c,u=p=>{c||(c=p);var m=(p-c)/r,v=OP((_,T)=>xz(...T,i(m)),l);if(s(Eo(Eo(Eo({},t),e),v)),m<1)a=o.setTimeout(u);else{var w=OP((_,T)=>xz(...T,i(1)),l);s(Eo(Eo(Eo({},t),e),w))}};return()=>(a=o.setTimeout(u),()=>{a()})}const yPt=(t,e,i,r,n,s)=>{var o=uPt(t,e);return i.isStepper===!0?fPt(t,e,i,o,n,s):mPt(t,e,i,r,o,n,s)};var Sz=1e-4,e3e=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],t3e=(t,e)=>t.map((i,r)=>i*e**r).reduce((i,r)=>i+r),Mve=(t,e)=>i=>{var r=e3e(t,e);return t3e(r,i)},gPt=(t,e)=>i=>{var r=e3e(t,e),n=[...r.map((s,o)=>s*o).slice(1),0];return t3e(n,i)},Cve=function(){for(var e,i,r,n,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];if(o.length===1)switch(o[0]){case"linear":[e,r,i,n]=[0,0,1,1];break;case"ease":[e,r,i,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,i,n]=[.42,0,1,1];break;case"ease-out":[e,r,i,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,i,n]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,i,n]=l[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else o.length===4&&([e,r,i,n]=o);var c=Mve(e,i),u=Mve(r,n),p=gPt(e,i),m=w=>w>1?1:w<0?0:w,v=w=>{for(var _=w>1?1:w,T=_,$=0;$<8;++$){var I=c(T)-_,A=p(T);if(Math.abs(I-_)<Sz||A<Sz)return u(T);T=m(T-I/A)}return u(T)};return v.isStepper=!1,v},vPt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:r=8,dt:n=17}=e,s=(o,a,l)=>{var c=-(o-a)*i,u=l*r,p=l+(c-u)*n/1e3,m=l*n/1e3+o;return Math.abs(m-a)<Sz&&Math.abs(p)<Sz?[a,0]:[m,p]};return s.isStepper=!0,s.dt=n,s},bPt=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Cve(t);case"spring":return vPt();default:if(t.split("(")[0]==="cubic-bezier")return Cve(t)}return typeof t=="function"?t:null};function wPt(t){var e,i=()=>null,r=!1,n=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){n=t.setTimeout(s.bind(null,c),l);return}s(l),n=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,i(e)),typeof o=="object"&&(e=o,i(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,n&&(n(),n=null),s(o)},subscribe:o=>(i=o,()=>{i=()=>null}),getTimeoutController:()=>t}}class _Pt{setTimeout(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),n=null,s=o=>{o-r>=i?e(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(s))};return n=requestAnimationFrame(s),()=>{cancelAnimationFrame(n)}}}function xPt(){return wPt(new _Pt)}var SPt=U.createContext(xPt);function EPt(t,e){var i=U.useContext(SPt);return U.useMemo(()=>e??i(t),[t,e,i])}var TPt={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ive={t:0},T7={t:1};function zte(t){var e=Ty(t,TPt),{isActive:i,canBegin:r,duration:n,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=EPt(e.animationId,e.animationManager),[p,m]=U.useState(i?Ive:T7),v=U.useRef(null);return U.useEffect(()=>{i||m(T7)},[i]),U.useEffect(()=>{if(!i||!r)return pSt;var w=yPt(Ive,T7,bPt(s),n,m,u.getTimeoutController()),_=()=>{v.current=w()};return u.start([l,o,_,n,a]),()=>{u.stop(),v.current&&v.current(),a()}},[i,r,n,s,o,l,a,u]),c(p.t)}function jte(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=U.useRef(AP(e)),r=U.useRef(t);return r.current!==t&&(i.current=AP(e),r.current=t),i.current}function Ave(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Pve(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ave(Object(i),!0).forEach(function(r){$Pt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ave(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function $Pt(t,e,i){return(e=MPt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function MPt(t){var e=CPt(t,"string");return typeof e=="symbol"?e:e+""}function CPt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ez(){return Ez=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Ez.apply(null,arguments)}var kve=(t,e,i,r,n)=>{var s=Math.min(Math.abs(i)/2,Math.abs(r)/2),o=r>=0?1:-1,a=i>=0?1:-1,l=r>=0&&i>=0||r<0&&i<0?1:0,c;if(s>0&&n instanceof Array){for(var u=[0,0,0,0],p=0,m=4;p<m;p++)u[p]=n[p]>s?s:n[p];c="M".concat(t,",").concat(e+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+a*u[0],",").concat(e)),c+="L ".concat(t+i-a*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+i,",").concat(e+o*u[1])),c+="L ".concat(t+i,",").concat(e+r-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+i-a*u[2],",").concat(e+r)),c+="L ".concat(t+a*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-o*u[3])),c+="Z"}else if(s>0&&n===+n&&n>0){var v=Math.min(s,n);c="M ".concat(t,",").concat(e+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(l,",").concat(t+a*v,",").concat(e,`
            L `).concat(t+i-a*v,",").concat(e,`
            A `).concat(v,",").concat(v,",0,0,").concat(l,",").concat(t+i,",").concat(e+o*v,`
            L `).concat(t+i,",").concat(e+r-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(l,",").concat(t+i-a*v,",").concat(e+r,`
            L `).concat(t+a*v,",").concat(e+r,`
            A `).concat(v,",").concat(v,",0,0,").concat(l,",").concat(t,",").concat(e+r-o*v," Z")}else c="M ".concat(t,",").concat(e," h ").concat(i," v ").concat(r," h ").concat(-i," Z");return c},IPt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},i3e=t=>{var e=Ty(t,IPt),i=U.useRef(null),[r,n]=U.useState(-1);U.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var ee=i.current.getTotalLength();ee&&n(ee)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:p,animationDuration:m,animationBegin:v,isAnimationActive:w,isUpdateAnimationActive:_}=e,T=U.useRef(a),$=U.useRef(l),I=U.useRef(s),A=U.useRef(o),k=U.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),R=jte(k,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var F=vs("recharts-rectangle",u);if(!_)return U.createElement("path",Ez({},Na(e,!0),{className:F,d:kve(s,o,a,l,c)}));var B=T.current,q=$.current,Y=I.current,J=A.current,Q="0px ".concat(r===-1?1:r,"px"),te="".concat(r,"px 0px"),re=XRe(["strokeDasharray"],m,typeof p=="string"?p:void 0);return U.createElement(zte,{animationId:R,key:R,canBegin:r>0,duration:m,easing:p,isActive:_,begin:v},ee=>{var ye=Mh(B,a,ee),ne=Mh(q,l,ee),ue=Mh(Y,s,ee),he=Mh(J,o,ee);i.current&&(T.current=ye,$.current=ne,I.current=ue,A.current=he);var Ne;return w?ee>0?Ne={transition:re,strokeDasharray:te}:Ne={strokeDasharray:Q}:Ne={strokeDasharray:te},U.createElement("path",Ez({},Na(e,!0),{className:F,d:kve(ue,he,ye,ne,c),ref:i,style:Pve(Pve({},Ne),e.style)}))})};function r3e(t){var{cx:e,cy:i,radius:r,startAngle:n,endAngle:s}=t,o=ms(e,i,r,n),a=ms(e,i,r,s);return{points:[o,a],cx:e,cy:i,radius:r,startAngle:n,endAngle:s}}function KK(){return KK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},KK.apply(null,arguments)}var APt=(t,e)=>{var i=hl(e-t),r=Math.min(Math.abs(e-t),359.999);return i*r},_3=t=>{var{cx:e,cy:i,radius:r,angle:n,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/wz,p=l?n:n+s*u,m=ms(e,i,c,p),v=ms(e,i,r,p),w=l?n-s*u:n,_=ms(e,i,c*Math.cos(u*wz),w);return{center:m,circleTangency:v,lineTangency:_,theta:u}},n3e=t=>{var{cx:e,cy:i,innerRadius:r,outerRadius:n,startAngle:s,endAngle:o}=t,a=APt(s,o),l=s+a,c=ms(e,i,n,s),u=ms(e,i,n,l),p="M ".concat(c.x,",").concat(c.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var m=ms(e,i,r,s),v=ms(e,i,r,l);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(s<=l),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(e,",").concat(i," Z");return p},PPt=t=>{var{cx:e,cy:i,innerRadius:r,outerRadius:n,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=hl(c-l),{circleTangency:p,lineTangency:m,theta:v}=_3({cx:e,cy:i,radius:n,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:w,lineTangency:_,theta:T}=_3({cx:e,cy:i,radius:n,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),$=a?Math.abs(l-c):Math.abs(l-c)-v-T;if($<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):n3e({cx:e,cy:i,innerRadius:r,outerRadius:n,startAngle:l,endAngle:c});var I="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(n,",").concat(n,",0,").concat(+($>180),",").concat(+(u<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,`
  `);if(r>0){var{circleTangency:A,lineTangency:k,theta:R}=_3({cx:e,cy:i,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:F,lineTangency:B,theta:q}=_3({cx:e,cy:i,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),Y=a?Math.abs(l-c):Math.abs(l-c)-R-q;if(Y<0&&s===0)return"".concat(I,"L").concat(e,",").concat(i,"Z");I+="L".concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(Y>180),",").concat(+(u>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else I+="L".concat(e,",").concat(i,"Z");return I},kPt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},s3e=t=>{var e=Ty(t,kPt),{cx:i,cy:r,innerRadius:n,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:p}=e;if(s<n||c===u)return null;var m=vs("recharts-sector",p),v=s-n,w=mc(o,v,0,!0),_;return w>0&&Math.abs(c-u)<360?_=PPt({cx:i,cy:r,innerRadius:n,outerRadius:s,cornerRadius:Math.min(w,v/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):_=n3e({cx:i,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u}),U.createElement("path",KK({},Na(e,!0),{className:m,d:_}))};function OPt(t,e,i){var r,n,s,o;if(t==="horizontal")r=e.x,s=r,n=i.top,o=i.top+i.height;else if(t==="vertical")n=e.y,o=n,r=i.left,s=i.left+i.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:a,cy:l,innerRadius:c,outerRadius:u,angle:p}=e,m=ms(a,l,c,p),v=ms(a,l,u,p);r=m.x,n=m.y,s=v.x,o=v.y}else return r3e(e);return[{x:r,y:n},{x:s,y:o}]}var $7={},M7={},C7={},Ove;function LPt(){return Ove||(Ove=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mRe();function i(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=i})(C7)),C7}var Lve;function RPt(){return Lve||(Lve=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LPt();function i(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=i})(M7)),M7}var Rve;function NPt(){return Rve||(Rve=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yRe(),i=RPt();function r(n,s,o){o&&typeof o!="number"&&e.isIterateeCall(n,s,o)&&(s=o=void 0),n=i.toFinite(n),s===void 0?(s=n,n=0):s=i.toFinite(s),o=o===void 0?n<s?1:-1:i.toFinite(o);const a=Math.max(Math.ceil((s-n)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=n,n+=o;return l}t.range=r})($7)),$7}var I7,Nve;function DPt(){return Nve||(Nve=1,I7=NPt().range),I7}var FPt=DPt();const o3e=Qp(FPt);function Zv(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zPt(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ute(t){let e,i,r;t.length!==2?(e=Zv,i=(a,l)=>Zv(t(a),l),r=(a,l)=>t(a)-l):(e=t===Zv||t===zPt?t:jPt,i=t,r=t);function n(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const p=c+u>>>1;i(a[p],l)<0?c=p+1:u=p}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const p=c+u>>>1;i(a[p],l)<=0?c=p+1:u=p}while(c<u)}return c}function o(a,l,c=0,u=a.length){const p=n(a,l,c,u-1);return p>c&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:n,center:o,right:s}}function jPt(){return 0}function a3e(t){return t===null?NaN:+t}function*UPt(t,e){for(let i of t)i!=null&&(i=+i)>=i&&(yield i)}const BPt=Ute(Zv),tO=BPt.right;Ute(a3e).center;class Dve extends Map{constructor(e,i=qPt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(Fve(this,e))}has(e){return super.has(Fve(this,e))}set(e,i){return super.set(VPt(this,e),i)}delete(e){return super.delete(GPt(this,e))}}function Fve({_intern:t,_key:e},i){const r=e(i);return t.has(r)?t.get(r):i}function VPt({_intern:t,_key:e},i){const r=e(i);return t.has(r)?t.get(r):(t.set(r,i),i)}function GPt({_intern:t,_key:e},i){const r=e(i);return t.has(r)&&(i=t.get(r),t.delete(r)),i}function qPt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function HPt(t=Zv){if(t===Zv)return l3e;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,i)=>{const r=t(e,i);return r||r===0?r:(t(i,i)===0)-(t(e,e)===0)}}function l3e(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const WPt=Math.sqrt(50),ZPt=Math.sqrt(10),YPt=Math.sqrt(2);function Tz(t,e,i){const r=(e-t)/Math.max(0,i),n=Math.floor(Math.log10(r)),s=r/Math.pow(10,n),o=s>=WPt?10:s>=ZPt?5:s>=YPt?2:1;let a,l,c;return n<0?(c=Math.pow(10,-n)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,n)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=i&&i<2?Tz(t,e,i*2):[a,l,c]}function JK(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const r=e<t,[n,s,o]=r?Tz(e,t,i):Tz(t,e,i);if(!(s>=n))return[];const a=s-n+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(n+c)/-o;else for(let c=0;c<a;++c)l[c]=(n+c)*o;return l}function XK(t,e,i){return e=+e,t=+t,i=+i,Tz(t,e,i)[2]}function QK(t,e,i){e=+e,t=+t,i=+i;const r=e<t,n=r?XK(e,t,i):XK(t,e,i);return(r?-1:1)*(n<0?1/-n:n)}function zve(t,e){let i;for(const r of t)r!=null&&(i<r||i===void 0&&r>=r)&&(i=r);return i}function jve(t,e){let i;for(const r of t)r!=null&&(i>r||i===void 0&&r>=r)&&(i=r);return i}function c3e(t,e,i=0,r=1/0,n){if(e=Math.floor(e),i=Math.floor(Math.max(0,i)),r=Math.floor(Math.min(t.length-1,r)),!(i<=e&&e<=r))return t;for(n=n===void 0?l3e:HPt(n);r>i;){if(r-i>600){const l=r-i+1,c=e-i+1,u=Math.log(l),p=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*p*(l-p)/l)*(c-l/2<0?-1:1),v=Math.max(i,Math.floor(e-c*p/l+m)),w=Math.min(r,Math.floor(e+(l-c)*p/l+m));c3e(t,e,v,w,n)}const s=t[e];let o=i,a=r;for(hC(t,i,e),n(t[r],s)>0&&hC(t,i,r);o<a;){for(hC(t,o,a),++o,--a;n(t[o],s)<0;)++o;for(;n(t[a],s)>0;)--a}n(t[i],s)===0?hC(t,i,a):(++a,hC(t,a,r)),a<=e&&(i=a+1),e<=a&&(r=a-1)}return t}function hC(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function KPt(t,e,i){if(t=Float64Array.from(UPt(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return jve(t);if(e>=1)return zve(t);var r,n=(r-1)*e,s=Math.floor(n),o=zve(c3e(t,s).subarray(0,s+1)),a=jve(t.subarray(s+1));return o+(a-o)*(n-s)}}function JPt(t,e,i=a3e){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+i(t[0],0,t);if(e>=1)return+i(t[r-1],r-1,t);var r,n=(r-1)*e,s=Math.floor(n),o=+i(t[s],s,t),a=+i(t[s+1],s+1,t);return o+(a-o)*(n-s)}}function XPt(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;for(var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);++r<n;)s[r]=t+r*i;return s}function Cu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $y(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eJ=Symbol("implicit");function Bte(){var t=new Dve,e=[],i=[],r=eJ;function n(s){let o=t.get(s);if(o===void 0){if(r!==eJ)return r;t.set(s,o=e.push(s)-1)}return i[o%i.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Dve;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return n},n.range=function(s){return arguments.length?(i=Array.from(s),n):i.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return Bte(e,i).unknown(r)},Cu.apply(n,arguments),n}function Vte(){var t=Bte().unknown(void 0),e=t.domain,i=t.range,r=0,n=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function p(){var m=e().length,v=n<r,w=v?n:r,_=v?r:n;s=(_-w)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),w+=(_-w-s*(m-l))*u,o=s*(1-l),a&&(w=Math.round(w),o=Math.round(o));var T=XPt(m).map(function($){return w+s*$});return i(v?T.reverse():T)}return t.domain=function(m){return arguments.length?(e(m),p()):e()},t.range=function(m){return arguments.length?([r,n]=m,r=+r,n=+n,p()):[r,n]},t.rangeRound=function(m){return[r,n]=m,r=+r,n=+n,a=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,p()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),p()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),p()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,p()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),p()):u},t.copy=function(){return Vte(e(),[r,n]).round(a).paddingInner(l).paddingOuter(c).align(u)},Cu.apply(p(),arguments)}function u3e(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u3e(e())},t}function QPt(){return u3e(Vte.apply(null,arguments).paddingInner(1))}function Gte(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function h3e(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function iO(){}var LP=.7,$z=1/LP,z2="\\s*([+-]?\\d+)\\s*",RP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ekt=/^#([0-9a-f]{3,8})$/,tkt=new RegExp(`^rgb\\(${z2},${z2},${z2}\\)$`),ikt=new RegExp(`^rgb\\(${zp},${zp},${zp}\\)$`),rkt=new RegExp(`^rgba\\(${z2},${z2},${z2},${RP}\\)$`),nkt=new RegExp(`^rgba\\(${zp},${zp},${zp},${RP}\\)$`),skt=new RegExp(`^hsl\\(${RP},${zp},${zp}\\)$`),okt=new RegExp(`^hsla\\(${RP},${zp},${zp},${RP}\\)$`),Uve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gte(iO,NP,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Bve,formatHex:Bve,formatHex8:akt,formatHsl:lkt,formatRgb:Vve,toString:Vve});function Bve(){return this.rgb().formatHex()}function akt(){return this.rgb().formatHex8()}function lkt(){return d3e(this).formatHsl()}function Vve(){return this.rgb().formatRgb()}function NP(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=ekt.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Gve(e):i===3?new dl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?x3(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?x3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tkt.exec(t))?new dl(e[1],e[2],e[3],1):(e=ikt.exec(t))?new dl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rkt.exec(t))?x3(e[1],e[2],e[3],e[4]):(e=nkt.exec(t))?x3(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=skt.exec(t))?Wve(e[1],e[2]/100,e[3]/100,1):(e=okt.exec(t))?Wve(e[1],e[2]/100,e[3]/100,e[4]):Uve.hasOwnProperty(t)?Gve(Uve[t]):t==="transparent"?new dl(NaN,NaN,NaN,0):null}function Gve(t){return new dl(t>>16&255,t>>8&255,t&255,1)}function x3(t,e,i,r){return r<=0&&(t=e=i=NaN),new dl(t,e,i,r)}function ckt(t){return t instanceof iO||(t=NP(t)),t?(t=t.rgb(),new dl(t.r,t.g,t.b,t.opacity)):new dl}function tJ(t,e,i,r){return arguments.length===1?ckt(t):new dl(t,e,i,r??1)}function dl(t,e,i,r){this.r=+t,this.g=+e,this.b=+i,this.opacity=+r}Gte(dl,tJ,h3e(iO,{brighter(t){return t=t==null?$z:Math.pow($z,t),new dl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?LP:Math.pow(LP,t),new dl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dl(v_(this.r),v_(this.g),v_(this.b),Mz(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qve,formatHex:qve,formatHex8:ukt,formatRgb:Hve,toString:Hve}));function qve(){return`#${Ww(this.r)}${Ww(this.g)}${Ww(this.b)}`}function ukt(){return`#${Ww(this.r)}${Ww(this.g)}${Ww(this.b)}${Ww((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hve(){const t=Mz(this.opacity);return`${t===1?"rgb(":"rgba("}${v_(this.r)}, ${v_(this.g)}, ${v_(this.b)}${t===1?")":`, ${t})`}`}function Mz(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function v_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ww(t){return t=v_(t),(t<16?"0":"")+t.toString(16)}function Wve(t,e,i,r){return r<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Ih(t,e,i,r)}function d3e(t){if(t instanceof Ih)return new Ih(t.h,t.s,t.l,t.opacity);if(t instanceof iO||(t=NP(t)),!t)return new Ih;if(t instanceof Ih)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(i-r)/a+(i<r)*6:i===s?o=(r-e)/a+2:o=(e-i)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new Ih(o,a,l,t.opacity)}function hkt(t,e,i,r){return arguments.length===1?d3e(t):new Ih(t,e,i,r??1)}function Ih(t,e,i,r){this.h=+t,this.s=+e,this.l=+i,this.opacity=+r}Gte(Ih,hkt,h3e(iO,{brighter(t){return t=t==null?$z:Math.pow($z,t),new Ih(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?LP:Math.pow(LP,t),new Ih(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new dl(A7(t>=240?t-240:t+120,n,r),A7(t,n,r),A7(t<120?t+240:t-120,n,r),this.opacity)},clamp(){return new Ih(Zve(this.h),S3(this.s),S3(this.l),Mz(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mz(this.opacity);return`${t===1?"hsl(":"hsla("}${Zve(this.h)}, ${S3(this.s)*100}%, ${S3(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Zve(t){return t=(t||0)%360,t<0?t+360:t}function S3(t){return Math.max(0,Math.min(1,t||0))}function A7(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const qte=t=>()=>t;function dkt(t,e){return function(i){return t+i*e}}function pkt(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function fkt(t){return(t=+t)==1?p3e:function(e,i){return i-e?pkt(e,i,t):qte(isNaN(e)?i:e)}}function p3e(t,e){var i=e-t;return i?dkt(t,i):qte(isNaN(t)?e:t)}const Yve=(function t(e){var i=fkt(e);function r(n,s){var o=i((n=tJ(n)).r,(s=tJ(s)).r),a=i(n.g,s.g),l=i(n.b,s.b),c=p3e(n.opacity,s.opacity);return function(u){return n.r=o(u),n.g=a(u),n.b=l(u),n.opacity=c(u),n+""}}return r.gamma=t,r})(1);function mkt(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function ykt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gkt(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),o;for(o=0;o<r;++o)n[o]=o$(t[o],e[o]);for(;o<i;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=n[o](a);return s}}function vkt(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function Cz(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function bkt(t,e){var i={},r={},n;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in t?i[n]=o$(t[n],e[n]):r[n]=e[n];return function(s){for(n in i)r[n]=i[n](s);return r}}var iJ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,P7=new RegExp(iJ.source,"g");function wkt(t){return function(){return t}}function _kt(t){return function(e){return t(e)+""}}function xkt(t,e){var i=iJ.lastIndex=P7.lastIndex=0,r,n,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=iJ.exec(t))&&(n=P7.exec(e));)(s=n.index)>i&&(s=e.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:Cz(r,n)})),i=P7.lastIndex;return i<e.length&&(s=e.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?_kt(l[0].x):wkt(e):(e=l.length,function(c){for(var u=0,p;u<e;++u)a[(p=l[u]).i]=p.x(c);return a.join("")})}function o$(t,e){var i=typeof e,r;return e==null||i==="boolean"?qte(e):(i==="number"?Cz:i==="string"?(r=NP(e))?(e=r,Yve):xkt:e instanceof NP?Yve:e instanceof Date?vkt:ykt(e)?mkt:Array.isArray(e)?gkt:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bkt:Cz)(t,e)}function Hte(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}function Skt(t,e){e===void 0&&(e=t,t=o$);for(var i=0,r=e.length-1,n=e[0],s=new Array(r<0?0:r);i<r;)s[i]=t(n,n=e[++i]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Ekt(t){return function(){return t}}function Iz(t){return+t}var Kve=[0,1];function Aa(t){return t}function rJ(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Ekt(isNaN(e)?NaN:.5)}function Tkt(t,e){var i;return t>e&&(i=t,t=e,e=i),function(r){return Math.max(t,Math.min(e,r))}}function $kt(t,e,i){var r=t[0],n=t[1],s=e[0],o=e[1];return n<r?(r=rJ(n,r),s=i(o,s)):(r=rJ(r,n),s=i(s,o)),function(a){return s(r(a))}}function Mkt(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)n[o]=rJ(t[o],t[o+1]),s[o]=i(e[o],e[o+1]);return function(a){var l=tO(t,a,1,r)-1;return s[l](n[l](a))}}function rO(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function MU(){var t=Kve,e=Kve,i=o$,r,n,s,o=Aa,a,l,c;function u(){var m=Math.min(t.length,e.length);return o!==Aa&&(o=Tkt(t[0],t[m-1])),a=m>2?Mkt:$kt,l=c=null,p}function p(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,i)))(r(o(m)))}return p.invert=function(m){return o(n((c||(c=a(e,t.map(r),Cz)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,Iz),u()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),i=Hte,u()},p.clamp=function(m){return arguments.length?(o=m?!0:Aa,u()):o!==Aa},p.interpolate=function(m){return arguments.length?(i=m,u()):i},p.unknown=function(m){return arguments.length?(s=m,p):s},function(m,v){return r=m,n=v,u()}}function Wte(){return MU()(Aa,Aa)}function Ckt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Az(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function gT(t){return t=Az(Math.abs(t)),t?t[1]:NaN}function Ikt(t,e){return function(i,r){for(var n=i.length,s=[],o=0,a=t[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(i.substring(n-=a,n+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Akt(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var Pkt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function DP(t){if(!(e=Pkt.exec(t)))throw new Error("invalid format: "+t);var e;return new Zte({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}DP.prototype=Zte.prototype;function Zte(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Zte.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kkt(t){e:for(var e=t.length,i=1,r=-1,n;i<e;++i)switch(t[i]){case".":r=n=i;break;case"0":r===0&&(r=i),n=i;break;default:if(!+t[i])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(n+1):t}var f3e;function Okt(t,e){var i=Az(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(f3e=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Az(t,Math.max(0,e+s-1))[0]}function Jve(t,e){var i=Az(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const Xve={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ckt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Jve(t*100,e),r:Jve,s:Okt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Qve(t){return t}var e0e=Array.prototype.map,t0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lkt(t){var e=t.grouping===void 0||t.thousands===void 0?Qve:Ikt(e0e.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Qve:Akt(e0e.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(p){p=DP(p);var m=p.fill,v=p.align,w=p.sign,_=p.symbol,T=p.zero,$=p.width,I=p.comma,A=p.precision,k=p.trim,R=p.type;R==="n"?(I=!0,R="g"):Xve[R]||(A===void 0&&(A=12),k=!0,R="g"),(T||m==="0"&&v==="=")&&(T=!0,m="0",v="=");var F=_==="$"?i:_==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",B=_==="$"?r:/[%p]/.test(R)?o:"",q=Xve[R],Y=/[defgprs%]/.test(R);A=A===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function J(Q){var te=F,re=B,ee,ye,ne;if(R==="c")re=q(Q)+re,Q="";else{Q=+Q;var ue=Q<0||1/Q<0;if(Q=isNaN(Q)?l:q(Math.abs(Q),A),k&&(Q=kkt(Q)),ue&&+Q==0&&w!=="+"&&(ue=!1),te=(ue?w==="("?w:a:w==="-"||w==="("?"":w)+te,re=(R==="s"?t0e[8+f3e/3]:"")+re+(ue&&w==="("?")":""),Y){for(ee=-1,ye=Q.length;++ee<ye;)if(ne=Q.charCodeAt(ee),48>ne||ne>57){re=(ne===46?n+Q.slice(ee+1):Q.slice(ee))+re,Q=Q.slice(0,ee);break}}}I&&!T&&(Q=e(Q,1/0));var he=te.length+Q.length+re.length,Ne=he<$?new Array($-he+1).join(m):"";switch(I&&T&&(Q=e(Ne+Q,Ne.length?$-re.length:1/0),Ne=""),v){case"<":Q=te+Q+re+Ne;break;case"=":Q=te+Ne+Q+re;break;case"^":Q=Ne.slice(0,he=Ne.length>>1)+te+Q+re+Ne.slice(he);break;default:Q=Ne+te+Q+re;break}return s(Q)}return J.toString=function(){return p+""},J}function u(p,m){var v=c((p=DP(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(gT(m)/3)))*3,_=Math.pow(10,-w),T=t0e[8+w/3];return function($){return v(_*$)+T}}return{format:c,formatPrefix:u}}var E3,Yte,m3e;Rkt({thousands:",",grouping:[3],currency:["$",""]});function Rkt(t){return E3=Lkt(t),Yte=E3.format,m3e=E3.formatPrefix,E3}function Nkt(t){return Math.max(0,-gT(Math.abs(t)))}function Dkt(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gT(e)/3)))*3-gT(Math.abs(t)))}function Fkt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gT(e)-gT(t))+1}function y3e(t,e,i,r){var n=QK(t,e,i),s;switch(r=DP(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Dkt(n,o))&&(r.precision=s),m3e(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Fkt(n,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Nkt(n))&&(r.precision=s-(r.type==="%")*2);break}}return Yte(r)}function C0(t){var e=t.domain;return t.ticks=function(i){var r=e();return JK(r[0],r[r.length-1],i??10)},t.tickFormat=function(i,r){var n=e();return y3e(n[0],n[n.length-1],i??10,r)},t.nice=function(i){i==null&&(i=10);var r=e(),n=0,s=r.length-1,o=r[n],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=n,n=s,s=c);u-- >0;){if(c=XK(o,a,i),c===l)return r[n]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function g3e(){var t=Wte();return t.copy=function(){return rO(t,g3e())},Cu.apply(t,arguments),C0(t)}function v3e(t){var e;function i(r){return r==null||isNaN(r=+r)?e:r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(t=Array.from(r,Iz),i):t.slice()},i.unknown=function(r){return arguments.length?(e=r,i):e},i.copy=function(){return v3e(t).unknown(e)},t=arguments.length?Array.from(t,Iz):[0,1],C0(i)}function b3e(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],o;return s<n&&(o=i,i=r,r=o,o=n,n=s,s=o),t[i]=e.floor(n),t[r]=e.ceil(s),t}function i0e(t){return Math.log(t)}function r0e(t){return Math.exp(t)}function zkt(t){return-Math.log(-t)}function jkt(t){return-Math.exp(-t)}function Ukt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Bkt(t){return t===10?Ukt:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Vkt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function n0e(t){return(e,i)=>-t(-e,i)}function Kte(t){const e=t(i0e,r0e),i=e.domain;let r=10,n,s;function o(){return n=Vkt(r),s=Bkt(r),i()[0]<0?(n=n0e(n),s=n0e(s),t(zkt,jkt)):t(i0e,r0e),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(i(a),o()):i()},e.ticks=a=>{const l=i();let c=l[0],u=l[l.length-1];const p=u<c;p&&([c,u]=[u,c]);let m=n(c),v=n(u),w,_;const T=a==null?10:+a;let $=[];if(!(r%1)&&v-m<T){if(m=Math.floor(m),v=Math.ceil(v),c>0){for(;m<=v;++m)for(w=1;w<r;++w)if(_=m<0?w/s(-m):w*s(m),!(_<c)){if(_>u)break;$.push(_)}}else for(;m<=v;++m)for(w=r-1;w>=1;--w)if(_=m>0?w/s(-m):w*s(m),!(_<c)){if(_>u)break;$.push(_)}$.length*2<T&&($=JK(c,u,T))}else $=JK(m,v,Math.min(v-m,T)).map(s);return p?$.reverse():$},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=DP(l)).precision==null&&(l.trim=!0),l=Yte(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let p=u/s(Math.round(n(u)));return p*r<r-.5&&(p*=r),p<=c?l(u):""}},e.nice=()=>i(b3e(i(),{floor:a=>s(Math.floor(n(a))),ceil:a=>s(Math.ceil(n(a)))})),e}function w3e(){const t=Kte(MU()).domain([1,10]);return t.copy=()=>rO(t,w3e()).base(t.base()),Cu.apply(t,arguments),t}function s0e(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function o0e(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Jte(t){var e=1,i=t(s0e(e),o0e(e));return i.constant=function(r){return arguments.length?t(s0e(e=+r),o0e(e)):e},C0(i)}function _3e(){var t=Jte(MU());return t.copy=function(){return rO(t,_3e()).constant(t.constant())},Cu.apply(t,arguments)}function a0e(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Gkt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qkt(t){return t<0?-t*t:t*t}function Xte(t){var e=t(Aa,Aa),i=1;function r(){return i===1?t(Aa,Aa):i===.5?t(Gkt,qkt):t(a0e(i),a0e(1/i))}return e.exponent=function(n){return arguments.length?(i=+n,r()):i},C0(e)}function Qte(){var t=Xte(MU());return t.copy=function(){return rO(t,Qte()).exponent(t.exponent())},Cu.apply(t,arguments),t}function Hkt(){return Qte.apply(null,arguments).exponent(.5)}function l0e(t){return Math.sign(t)*t*t}function Wkt(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function x3e(){var t=Wte(),e=[0,1],i=!1,r;function n(s){var o=Wkt(t(s));return isNaN(o)?r:i?Math.round(o):o}return n.invert=function(s){return t.invert(l0e(s))},n.domain=function(s){return arguments.length?(t.domain(s),n):t.domain()},n.range=function(s){return arguments.length?(t.range((e=Array.from(s,Iz)).map(l0e)),n):e.slice()},n.rangeRound=function(s){return n.range(s).round(!0)},n.round=function(s){return arguments.length?(i=!!s,n):i},n.clamp=function(s){return arguments.length?(t.clamp(s),n):t.clamp()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return x3e(t.domain(),e).round(i).clamp(t.clamp()).unknown(r)},Cu.apply(n,arguments),C0(n)}function S3e(){var t=[],e=[],i=[],r;function n(){var o=0,a=Math.max(1,e.length);for(i=new Array(a-1);++o<a;)i[o-1]=JPt(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[tO(i,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?i[a-1]:t[0],a<i.length?i[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Zv),n()},s.range=function(o){return arguments.length?(e=Array.from(o),n()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return i.slice()},s.copy=function(){return S3e().domain(t).range(e).unknown(r)},Cu.apply(s,arguments)}function E3e(){var t=0,e=1,i=1,r=[.5],n=[0,1],s;function o(l){return l!=null&&l<=l?n[tO(r,l,0,i)]:s}function a(){var l=-1;for(r=new Array(i);++l<i;)r[l]=((l+1)*e-(l-i)*t)/(i+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(i=(n=Array.from(l)).length-1,a()):n.slice()},o.invertExtent=function(l){var c=n.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=i?[r[i-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return E3e().domain([t,e]).range(n).unknown(s)},Cu.apply(C0(o),arguments)}function T3e(){var t=[.5],e=[0,1],i,r=1;function n(s){return s!=null&&s<=s?e[tO(t,s,0,r)]:i}return n.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),n):t.slice()},n.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),n):e.slice()},n.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},n.unknown=function(s){return arguments.length?(i=s,n):i},n.copy=function(){return T3e().domain(t).range(e).unknown(i)},Cu.apply(n,arguments)}const k7=new Date,O7=new Date;function Ls(t,e,i,r){function n(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(t(s=new Date(+s)),s),n.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),n.round=s=>{const o=n(s),a=n.ceil(s);return s-o<a-s?o:a},n.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),n.range=(s,o,a)=>{const l=[];if(s=n.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},n.filter=s=>Ls(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),i&&(n.count=(s,o)=>(k7.setTime(+s),O7.setTime(+o),t(k7),t(O7),Math.floor(i(k7,O7))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(r?o=>r(o)%s===0:o=>n.count(0,o)%s===0):n)),n}const Pz=Ls(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Pz.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ls(e=>{e.setTime(Math.floor(e/t)*t)},(e,i)=>{e.setTime(+e+i*t)},(e,i)=>(i-e)/t):Pz);Pz.range;const Gm=1e3,bu=Gm*60,qm=bu*60,py=qm*24,eie=py*7,c0e=py*30,L7=py*365,Zw=Ls(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Gm)},(t,e)=>(e-t)/Gm,t=>t.getUTCSeconds());Zw.range;const tie=Ls(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gm)},(t,e)=>{t.setTime(+t+e*bu)},(t,e)=>(e-t)/bu,t=>t.getMinutes());tie.range;const iie=Ls(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*bu)},(t,e)=>(e-t)/bu,t=>t.getUTCMinutes());iie.range;const rie=Ls(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gm-t.getMinutes()*bu)},(t,e)=>{t.setTime(+t+e*qm)},(t,e)=>(e-t)/qm,t=>t.getHours());rie.range;const nie=Ls(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qm)},(t,e)=>(e-t)/qm,t=>t.getUTCHours());nie.range;const nO=Ls(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bu)/py,t=>t.getDate()-1);nO.range;const CU=Ls(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/py,t=>t.getUTCDate()-1);CU.range;const $3e=Ls(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/py,t=>Math.floor(t/py));$3e.range;function m1(t){return Ls(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,i)=>{e.setDate(e.getDate()+i*7)},(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*bu)/eie)}const IU=m1(0),kz=m1(1),Zkt=m1(2),Ykt=m1(3),vT=m1(4),Kkt=m1(5),Jkt=m1(6);IU.range;kz.range;Zkt.range;Ykt.range;vT.range;Kkt.range;Jkt.range;function y1(t){return Ls(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i*7)},(e,i)=>(i-e)/eie)}const AU=y1(0),Oz=y1(1),Xkt=y1(2),Qkt=y1(3),bT=y1(4),eOt=y1(5),tOt=y1(6);AU.range;Oz.range;Xkt.range;Qkt.range;bT.range;eOt.range;tOt.range;const sie=Ls(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sie.range;const oie=Ls(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());oie.range;const fy=Ls(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());fy.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ls(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i*t)});fy.range;const my=Ls(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());my.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ls(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)});my.range;function M3e(t,e,i,r,n,s){const o=[[Zw,1,Gm],[Zw,5,5*Gm],[Zw,15,15*Gm],[Zw,30,30*Gm],[s,1,bu],[s,5,5*bu],[s,15,15*bu],[s,30,30*bu],[n,1,qm],[n,3,3*qm],[n,6,6*qm],[n,12,12*qm],[r,1,py],[r,2,2*py],[i,1,eie],[e,1,c0e],[e,3,3*c0e],[t,1,L7]];function a(c,u,p){const m=u<c;m&&([c,u]=[u,c]);const v=p&&typeof p.range=="function"?p:l(c,u,p),w=v?v.range(c,+u+1):[];return m?w.reverse():w}function l(c,u,p){const m=Math.abs(u-c)/p,v=Ute(([,,T])=>T).right(o,m);if(v===o.length)return t.every(QK(c/L7,u/L7,p));if(v===0)return Pz.every(Math.max(QK(c,u,p),1));const[w,_]=o[m/o[v-1][2]<o[v][2]/m?v-1:v];return w.every(_)}return[a,l]}const[iOt,rOt]=M3e(my,oie,AU,$3e,nie,iie),[nOt,sOt]=M3e(fy,sie,IU,nO,rie,tie);function R7(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function N7(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dC(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function oOt(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=pC(n),u=fC(n),p=pC(s),m=fC(s),v=pC(o),w=fC(o),_=pC(a),T=fC(a),$=pC(l),I=fC(l),A={a:ue,A:he,b:Ne,B:X,c:null,d:m0e,e:m0e,f:IOt,g:zOt,G:UOt,H:$Ot,I:MOt,j:COt,L:C3e,m:AOt,M:POt,p:_e,q:ke,Q:v0e,s:b0e,S:kOt,u:OOt,U:LOt,V:ROt,w:NOt,W:DOt,x:null,X:null,y:FOt,Y:jOt,Z:BOt,"%":g0e},k={a:qe,A:Ke,b:Qe,B:Xe,c:null,d:y0e,e:y0e,f:HOt,g:iLt,G:nLt,H:VOt,I:GOt,j:qOt,L:A3e,m:WOt,M:ZOt,p:di,q:qt,Q:v0e,s:b0e,S:YOt,u:KOt,U:JOt,V:XOt,w:QOt,W:eLt,x:null,X:null,y:tLt,Y:rLt,Z:sLt,"%":g0e},R={a:J,A:Q,b:te,B:re,c:ee,d:p0e,e:p0e,f:xOt,g:d0e,G:h0e,H:f0e,I:f0e,j:vOt,L:_Ot,m:gOt,M:bOt,p:Y,q:yOt,Q:EOt,s:TOt,S:wOt,u:hOt,U:dOt,V:pOt,w:uOt,W:fOt,x:ye,X:ne,y:d0e,Y:h0e,Z:mOt,"%":SOt};A.x=F(i,A),A.X=F(r,A),A.c=F(e,A),k.x=F(i,k),k.X=F(r,k),k.c=F(e,k);function F(it,Vt){return function(Pt){var He=[],Ri=-1,ci=0,Sn=it.length,En,_r,bl;for(Pt instanceof Date||(Pt=new Date(+Pt));++Ri<Sn;)it.charCodeAt(Ri)===37&&(He.push(it.slice(ci,Ri)),(_r=u0e[En=it.charAt(++Ri)])!=null?En=it.charAt(++Ri):_r=En==="e"?" ":"0",(bl=Vt[En])&&(En=bl(Pt,_r)),He.push(En),ci=Ri+1);return He.push(it.slice(ci,Ri)),He.join("")}}function B(it,Vt){return function(Pt){var He=dC(1900,void 0,1),Ri=q(He,it,Pt+="",0),ci,Sn;if(Ri!=Pt.length)return null;if("Q"in He)return new Date(He.Q);if("s"in He)return new Date(He.s*1e3+("L"in He?He.L:0));if(Vt&&!("Z"in He)&&(He.Z=0),"p"in He&&(He.H=He.H%12+He.p*12),He.m===void 0&&(He.m="q"in He?He.q:0),"V"in He){if(He.V<1||He.V>53)return null;"w"in He||(He.w=1),"Z"in He?(ci=N7(dC(He.y,0,1)),Sn=ci.getUTCDay(),ci=Sn>4||Sn===0?Oz.ceil(ci):Oz(ci),ci=CU.offset(ci,(He.V-1)*7),He.y=ci.getUTCFullYear(),He.m=ci.getUTCMonth(),He.d=ci.getUTCDate()+(He.w+6)%7):(ci=R7(dC(He.y,0,1)),Sn=ci.getDay(),ci=Sn>4||Sn===0?kz.ceil(ci):kz(ci),ci=nO.offset(ci,(He.V-1)*7),He.y=ci.getFullYear(),He.m=ci.getMonth(),He.d=ci.getDate()+(He.w+6)%7)}else("W"in He||"U"in He)&&("w"in He||(He.w="u"in He?He.u%7:"W"in He?1:0),Sn="Z"in He?N7(dC(He.y,0,1)).getUTCDay():R7(dC(He.y,0,1)).getDay(),He.m=0,He.d="W"in He?(He.w+6)%7+He.W*7-(Sn+5)%7:He.w+He.U*7-(Sn+6)%7);return"Z"in He?(He.H+=He.Z/100|0,He.M+=He.Z%100,N7(He)):R7(He)}}function q(it,Vt,Pt,He){for(var Ri=0,ci=Vt.length,Sn=Pt.length,En,_r;Ri<ci;){if(He>=Sn)return-1;if(En=Vt.charCodeAt(Ri++),En===37){if(En=Vt.charAt(Ri++),_r=R[En in u0e?Vt.charAt(Ri++):En],!_r||(He=_r(it,Pt,He))<0)return-1}else if(En!=Pt.charCodeAt(He++))return-1}return He}function Y(it,Vt,Pt){var He=c.exec(Vt.slice(Pt));return He?(it.p=u.get(He[0].toLowerCase()),Pt+He[0].length):-1}function J(it,Vt,Pt){var He=v.exec(Vt.slice(Pt));return He?(it.w=w.get(He[0].toLowerCase()),Pt+He[0].length):-1}function Q(it,Vt,Pt){var He=p.exec(Vt.slice(Pt));return He?(it.w=m.get(He[0].toLowerCase()),Pt+He[0].length):-1}function te(it,Vt,Pt){var He=$.exec(Vt.slice(Pt));return He?(it.m=I.get(He[0].toLowerCase()),Pt+He[0].length):-1}function re(it,Vt,Pt){var He=_.exec(Vt.slice(Pt));return He?(it.m=T.get(He[0].toLowerCase()),Pt+He[0].length):-1}function ee(it,Vt,Pt){return q(it,e,Vt,Pt)}function ye(it,Vt,Pt){return q(it,i,Vt,Pt)}function ne(it,Vt,Pt){return q(it,r,Vt,Pt)}function ue(it){return o[it.getDay()]}function he(it){return s[it.getDay()]}function Ne(it){return l[it.getMonth()]}function X(it){return a[it.getMonth()]}function _e(it){return n[+(it.getHours()>=12)]}function ke(it){return 1+~~(it.getMonth()/3)}function qe(it){return o[it.getUTCDay()]}function Ke(it){return s[it.getUTCDay()]}function Qe(it){return l[it.getUTCMonth()]}function Xe(it){return a[it.getUTCMonth()]}function di(it){return n[+(it.getUTCHours()>=12)]}function qt(it){return 1+~~(it.getUTCMonth()/3)}return{format:function(it){var Vt=F(it+="",A);return Vt.toString=function(){return it},Vt},parse:function(it){var Vt=B(it+="",!1);return Vt.toString=function(){return it},Vt},utcFormat:function(it){var Vt=F(it+="",k);return Vt.toString=function(){return it},Vt},utcParse:function(it){var Vt=B(it+="",!0);return Vt.toString=function(){return it},Vt}}}var u0e={"-":"",_:" ",0:"0"},no=/^\s*\d+/,aOt=/^%/,lOt=/[\\^$*+?|[\]().{}]/g;function Gi(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function cOt(t){return t.replace(lOt,"\\$&")}function pC(t){return new RegExp("^(?:"+t.map(cOt).join("|")+")","i")}function fC(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}function uOt(t,e,i){var r=no.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function hOt(t,e,i){var r=no.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function dOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function pOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function fOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function h0e(t,e,i){var r=no.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function d0e(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function mOt(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function yOt(t,e,i){var r=no.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function gOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function p0e(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function vOt(t,e,i){var r=no.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function f0e(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function bOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function wOt(t,e,i){var r=no.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function _Ot(t,e,i){var r=no.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function xOt(t,e,i){var r=no.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function SOt(t,e,i){var r=aOt.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function EOt(t,e,i){var r=no.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function TOt(t,e,i){var r=no.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function m0e(t,e){return Gi(t.getDate(),e,2)}function $Ot(t,e){return Gi(t.getHours(),e,2)}function MOt(t,e){return Gi(t.getHours()%12||12,e,2)}function COt(t,e){return Gi(1+nO.count(fy(t),t),e,3)}function C3e(t,e){return Gi(t.getMilliseconds(),e,3)}function IOt(t,e){return C3e(t,e)+"000"}function AOt(t,e){return Gi(t.getMonth()+1,e,2)}function POt(t,e){return Gi(t.getMinutes(),e,2)}function kOt(t,e){return Gi(t.getSeconds(),e,2)}function OOt(t){var e=t.getDay();return e===0?7:e}function LOt(t,e){return Gi(IU.count(fy(t)-1,t),e,2)}function I3e(t){var e=t.getDay();return e>=4||e===0?vT(t):vT.ceil(t)}function ROt(t,e){return t=I3e(t),Gi(vT.count(fy(t),t)+(fy(t).getDay()===4),e,2)}function NOt(t){return t.getDay()}function DOt(t,e){return Gi(kz.count(fy(t)-1,t),e,2)}function FOt(t,e){return Gi(t.getFullYear()%100,e,2)}function zOt(t,e){return t=I3e(t),Gi(t.getFullYear()%100,e,2)}function jOt(t,e){return Gi(t.getFullYear()%1e4,e,4)}function UOt(t,e){var i=t.getDay();return t=i>=4||i===0?vT(t):vT.ceil(t),Gi(t.getFullYear()%1e4,e,4)}function BOt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gi(e/60|0,"0",2)+Gi(e%60,"0",2)}function y0e(t,e){return Gi(t.getUTCDate(),e,2)}function VOt(t,e){return Gi(t.getUTCHours(),e,2)}function GOt(t,e){return Gi(t.getUTCHours()%12||12,e,2)}function qOt(t,e){return Gi(1+CU.count(my(t),t),e,3)}function A3e(t,e){return Gi(t.getUTCMilliseconds(),e,3)}function HOt(t,e){return A3e(t,e)+"000"}function WOt(t,e){return Gi(t.getUTCMonth()+1,e,2)}function ZOt(t,e){return Gi(t.getUTCMinutes(),e,2)}function YOt(t,e){return Gi(t.getUTCSeconds(),e,2)}function KOt(t){var e=t.getUTCDay();return e===0?7:e}function JOt(t,e){return Gi(AU.count(my(t)-1,t),e,2)}function P3e(t){var e=t.getUTCDay();return e>=4||e===0?bT(t):bT.ceil(t)}function XOt(t,e){return t=P3e(t),Gi(bT.count(my(t),t)+(my(t).getUTCDay()===4),e,2)}function QOt(t){return t.getUTCDay()}function eLt(t,e){return Gi(Oz.count(my(t)-1,t),e,2)}function tLt(t,e){return Gi(t.getUTCFullYear()%100,e,2)}function iLt(t,e){return t=P3e(t),Gi(t.getUTCFullYear()%100,e,2)}function rLt(t,e){return Gi(t.getUTCFullYear()%1e4,e,4)}function nLt(t,e){var i=t.getUTCDay();return t=i>=4||i===0?bT(t):bT.ceil(t),Gi(t.getUTCFullYear()%1e4,e,4)}function sLt(){return"+0000"}function g0e(){return"%"}function v0e(t){return+t}function b0e(t){return Math.floor(+t/1e3)}var Hx,k3e,O3e;oLt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oLt(t){return Hx=oOt(t),k3e=Hx.format,Hx.parse,O3e=Hx.utcFormat,Hx.utcParse,Hx}function aLt(t){return new Date(t)}function lLt(t){return t instanceof Date?+t:+new Date(+t)}function aie(t,e,i,r,n,s,o,a,l,c){var u=Wte(),p=u.invert,m=u.domain,v=c(".%L"),w=c(":%S"),_=c("%I:%M"),T=c("%I %p"),$=c("%a %d"),I=c("%b %d"),A=c("%B"),k=c("%Y");function R(F){return(l(F)<F?v:a(F)<F?w:o(F)<F?_:s(F)<F?T:r(F)<F?n(F)<F?$:I:i(F)<F?A:k)(F)}return u.invert=function(F){return new Date(p(F))},u.domain=function(F){return arguments.length?m(Array.from(F,lLt)):m().map(aLt)},u.ticks=function(F){var B=m();return t(B[0],B[B.length-1],F??10)},u.tickFormat=function(F,B){return B==null?R:c(B)},u.nice=function(F){var B=m();return(!F||typeof F.range!="function")&&(F=e(B[0],B[B.length-1],F??10)),F?m(b3e(B,F)):u},u.copy=function(){return rO(u,aie(t,e,i,r,n,s,o,a,l,c))},u}function cLt(){return Cu.apply(aie(nOt,sOt,fy,sie,IU,nO,rie,tie,Zw,k3e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uLt(){return Cu.apply(aie(iOt,rOt,my,oie,AU,CU,nie,iie,Zw,O3e).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function PU(){var t=0,e=1,i,r,n,s,o=Aa,a=!1,l;function c(p){return p==null||isNaN(p=+p)?l:o(n===0?.5:(p=(s(p)-i)*n,a?Math.max(0,Math.min(1,p)):p))}c.domain=function(p){return arguments.length?([t,e]=p,i=s(t=+t),r=s(e=+e),n=i===r?0:1/(r-i),c):[t,e]},c.clamp=function(p){return arguments.length?(a=!!p,c):a},c.interpolator=function(p){return arguments.length?(o=p,c):o};function u(p){return function(m){var v,w;return arguments.length?([v,w]=m,o=p(v,w),c):[o(0),o(1)]}}return c.range=u(o$),c.rangeRound=u(Hte),c.unknown=function(p){return arguments.length?(l=p,c):l},function(p){return s=p,i=p(t),r=p(e),n=i===r?0:1/(r-i),c}}function I0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function L3e(){var t=C0(PU()(Aa));return t.copy=function(){return I0(t,L3e())},$y.apply(t,arguments)}function R3e(){var t=Kte(PU()).domain([1,10]);return t.copy=function(){return I0(t,R3e()).base(t.base())},$y.apply(t,arguments)}function N3e(){var t=Jte(PU());return t.copy=function(){return I0(t,N3e()).constant(t.constant())},$y.apply(t,arguments)}function lie(){var t=Xte(PU());return t.copy=function(){return I0(t,lie()).exponent(t.exponent())},$y.apply(t,arguments)}function hLt(){return lie.apply(null,arguments).exponent(.5)}function D3e(){var t=[],e=Aa;function i(r){if(r!=null&&!isNaN(r=+r))return e((tO(t,r,1)-1)/(t.length-1))}return i.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let n of r)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Zv),i},i.interpolator=function(r){return arguments.length?(e=r,i):e},i.range=function(){return t.map((r,n)=>e(n/(t.length-1)))},i.quantiles=function(r){return Array.from({length:r+1},(n,s)=>KPt(t,s/r))},i.copy=function(){return D3e(e).domain(t)},$y.apply(i,arguments)}function kU(){var t=0,e=.5,i=1,r=1,n,s,o,a,l,c=Aa,u,p=!1,m;function v(_){return isNaN(_=+_)?m:(_=.5+((_=+u(_))-s)*(r*_<r*s?a:l),c(p?Math.max(0,Math.min(1,_)):_))}v.domain=function(_){return arguments.length?([t,e,i]=_,n=u(t=+t),s=u(e=+e),o=u(i=+i),a=n===s?0:.5/(s-n),l=s===o?0:.5/(o-s),r=s<n?-1:1,v):[t,e,i]},v.clamp=function(_){return arguments.length?(p=!!_,v):p},v.interpolator=function(_){return arguments.length?(c=_,v):c};function w(_){return function(T){var $,I,A;return arguments.length?([$,I,A]=T,c=Skt(_,[$,I,A]),v):[c(0),c(.5),c(1)]}}return v.range=w(o$),v.rangeRound=w(Hte),v.unknown=function(_){return arguments.length?(m=_,v):m},function(_){return u=_,n=_(t),s=_(e),o=_(i),a=n===s?0:.5/(s-n),l=s===o?0:.5/(o-s),r=s<n?-1:1,v}}function F3e(){var t=C0(kU()(Aa));return t.copy=function(){return I0(t,F3e())},$y.apply(t,arguments)}function z3e(){var t=Kte(kU()).domain([.1,1,10]);return t.copy=function(){return I0(t,z3e()).base(t.base())},$y.apply(t,arguments)}function j3e(){var t=Jte(kU());return t.copy=function(){return I0(t,j3e()).constant(t.constant())},$y.apply(t,arguments)}function cie(){var t=Xte(kU());return t.copy=function(){return I0(t,cie()).exponent(t.exponent())},$y.apply(t,arguments)}function dLt(){return cie.apply(null,arguments).exponent(.5)}const OI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vte,scaleDiverging:F3e,scaleDivergingLog:z3e,scaleDivergingPow:cie,scaleDivergingSqrt:dLt,scaleDivergingSymlog:j3e,scaleIdentity:v3e,scaleImplicit:eJ,scaleLinear:g3e,scaleLog:w3e,scaleOrdinal:Bte,scalePoint:QPt,scalePow:Qte,scaleQuantile:S3e,scaleQuantize:E3e,scaleRadial:x3e,scaleSequential:L3e,scaleSequentialLog:R3e,scaleSequentialPow:lie,scaleSequentialQuantile:D3e,scaleSequentialSqrt:hLt,scaleSequentialSymlog:N3e,scaleSqrt:Hkt,scaleSymlog:_3e,scaleThreshold:T3e,scaleTime:cLt,scaleUtc:uLt,tickFormat:y3e},Symbol.toStringTag,{value:"Module"}));var A0=t=>t.chartData,uie=Le([A0],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),U3e=(t,e,i,r)=>r?uie(t):A0(t);function wT(t){if(Array.isArray(t)&&t.length===2){var[e,i]=t;if(Gh(e)&&Gh(i))return!0}return!1}function w0e(t,e,i){return i?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function pLt(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[i,r]=t,n,s;if(Gh(i))n=i;else if(typeof i=="function")return;if(Gh(r))s=r;else if(typeof r=="function")return;var o=[n,s];if(wT(o))return o}}function fLt(t,e,i){if(!(!i&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,i);if(wT(r))return w0e(r,e,i)}catch{}if(Array.isArray(t)&&t.length===2){var[n,s]=t,o,a;if(n==="auto")e!=null&&(o=Math.min(...e));else if(bi(n))o=n;else if(typeof n=="function")try{e!=null&&(o=n(e==null?void 0:e[0]))}catch{}else if(typeof n=="string"&&dve.test(n)){var l=dve.exec(n);if(l==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(bi(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&pve.test(s)){var u=pve.exec(s);if(u==null||e==null)a=void 0;else{var p=+u[1];a=e[1]+p}}else a=e==null?void 0:e[1];var m=[o,a];if(wT(m))return e==null?m:w0e(m,e,i)}}}var a$=1e9,mLt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},die,nn=!0,Tu="[DecimalError] ",b_=Tu+"Invalid argument: ",hie=Tu+"Exponent out of range: ",l$=Math.floor,Sw=Math.pow,yLt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lc,Qs=1e7,qr=7,B3e=9007199254740991,Lz=l$(B3e/qr),_t={};_t.absoluteValue=_t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_t.comparedTo=_t.cmp=function(t){var e,i,r,n,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,n=t.d.length,e=0,i=r<n?r:n;e<i;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===n?0:r>n^s.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var t=this,e=t.d.length-1,i=(e-t.e)*qr;if(e=t.d[e],e)for(;e%10==0;e/=10)i--;return i<0?0:i};_t.dividedBy=_t.div=function(t){return iy(this,new this.constructor(t))};_t.dividedToIntegerBy=_t.idiv=function(t){var e=this,i=e.constructor;return wr(iy(e,new i(t),0,1),i.precision)};_t.equals=_t.eq=function(t){return!this.cmp(t)};_t.exponent=function(){return gs(this)};_t.greaterThan=_t.gt=function(t){return this.cmp(t)>0};_t.greaterThanOrEqualTo=_t.gte=function(t){return this.cmp(t)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(t){return this.cmp(t)<0};_t.lessThanOrEqualTo=_t.lte=function(t){return this.cmp(t)<1};_t.logarithm=_t.log=function(t){var e,i=this,r=i.constructor,n=r.precision,s=n+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(lc))throw Error(Tu+"NaN");if(i.s<1)throw Error(Tu+(i.s?"NaN":"-Infinity"));return i.eq(lc)?new r(0):(nn=!1,e=iy(FP(i,s),FP(t,s),s),nn=!0,wr(e,n))};_t.minus=_t.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?q3e(e,t):V3e(e,(t.s=-t.s,t))};_t.modulo=_t.mod=function(t){var e,i=this,r=i.constructor,n=r.precision;if(t=new r(t),!t.s)throw Error(Tu+"NaN");return i.s?(nn=!1,e=iy(i,t,0,1).times(t),nn=!0,i.minus(e)):wr(new r(i),n)};_t.naturalExponential=_t.exp=function(){return G3e(this)};_t.naturalLogarithm=_t.ln=function(){return FP(this)};_t.negated=_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_t.plus=_t.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?V3e(e,t):q3e(e,(t.s=-t.s,t))};_t.precision=_t.sd=function(t){var e,i,r,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(b_+t);if(e=gs(n)+1,r=n.d.length-1,i=r*qr+1,r=n.d[r],r){for(;r%10==0;r/=10)i--;for(r=n.d[0];r>=10;r/=10)i++}return t&&e>i?e:i};_t.squareRoot=_t.sqrt=function(){var t,e,i,r,n,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Tu+"NaN")}for(t=gs(a),nn=!1,n=Math.sqrt(+a),n==0||n==1/0?(e=Pp(a.d),(e.length+t)%2==0&&(e+="0"),n=Math.sqrt(e),t=l$((t+1)/2)-(t<0||t%2),n==1/0?e="5e"+t:(e=n.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(n.toString()),i=l.precision,n=o=i+3;;)if(s=r,r=s.plus(iy(a,s,o+2)).times(.5),Pp(s.d).slice(0,o)===(e=Pp(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),n==o&&e=="4999"){if(wr(s,i+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return nn=!0,wr(r,i)};_t.times=_t.mul=function(t){var e,i,r,n,s,o,a,l,c,u=this,p=u.constructor,m=u.d,v=(t=new p(t)).d;if(!u.s||!t.s)return new p(0);for(t.s*=u.s,i=u.e+t.e,l=m.length,c=v.length,l<c&&(s=m,m=v,v=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,n=l+r;n>r;)a=s[n]+v[r]*m[n-r-1]+e,s[n--]=a%Qs|0,e=a/Qs|0;s[n]=(s[n]+e)%Qs|0}for(;!s[--o];)s.pop();return e?++i:s.shift(),t.d=s,t.e=i,nn?wr(t,p.precision):t};_t.toDecimalPlaces=_t.todp=function(t,e){var i=this,r=i.constructor;return i=new r(i),t===void 0?i:(Xp(t,0,a$),e===void 0?e=r.rounding:Xp(e,0,8),wr(i,t+gs(i)+1,e))};_t.toExponential=function(t,e){var i,r=this,n=r.constructor;return t===void 0?i=X_(r,!0):(Xp(t,0,a$),e===void 0?e=n.rounding:Xp(e,0,8),r=wr(new n(r),t+1,e),i=X_(r,!0,t+1)),i};_t.toFixed=function(t,e){var i,r,n=this,s=n.constructor;return t===void 0?X_(n):(Xp(t,0,a$),e===void 0?e=s.rounding:Xp(e,0,8),r=wr(new s(n),t+gs(n)+1,e),i=X_(r.abs(),!1,t+gs(r)+1),n.isneg()&&!n.isZero()?"-"+i:i)};_t.toInteger=_t.toint=function(){var t=this,e=t.constructor;return wr(new e(t),gs(t)+1,e.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(t){var e,i,r,n,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(lc);if(a=new l(a),!a.s){if(t.s<1)throw Error(Tu+"Infinity");return a}if(a.eq(lc))return a;if(r=l.precision,t.eq(lc))return wr(a,r);if(e=t.e,i=t.d.length-1,o=e>=i,s=a.s,o){if((i=u<0?-u:u)<=B3e){for(n=new l(lc),e=Math.ceil(r/qr+4),nn=!1;i%2&&(n=n.times(a),x0e(n.d,e)),i=l$(i/2),i!==0;)a=a.times(a),x0e(a.d,e);return nn=!0,t.s<0?new l(lc).div(n):wr(n,r)}}else if(s<0)throw Error(Tu+"NaN");return s=s<0&&t.d[Math.max(e,i)]&1?-1:1,a.s=1,nn=!1,n=t.times(FP(a,r+c)),nn=!0,n=G3e(n),n.s=s,n};_t.toPrecision=function(t,e){var i,r,n=this,s=n.constructor;return t===void 0?(i=gs(n),r=X_(n,i<=s.toExpNeg||i>=s.toExpPos)):(Xp(t,1,a$),e===void 0?e=s.rounding:Xp(e,0,8),n=wr(new s(n),t,e),i=gs(n),r=X_(n,t<=i||i<=s.toExpNeg,t)),r};_t.toSignificantDigits=_t.tosd=function(t,e){var i=this,r=i.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Xp(t,1,a$),e===void 0?e=r.rounding:Xp(e,0,8)),wr(new r(i),t,e)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=gs(t),i=t.constructor;return X_(t,e<=i.toExpNeg||e>=i.toExpPos)};function V3e(t,e){var i,r,n,s,o,a,l,c,u=t.constructor,p=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),nn?wr(e,p):e;if(l=t.d,c=e.d,o=t.e,n=e.e,l=l.slice(),s=o-n,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,n=o,a=l.length),o=Math.ceil(p/qr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),i=0;s;)i=(l[--s]=l[s]+c[s]+i)/Qs|0,l[s]%=Qs;for(i&&(l.unshift(i),++n),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=n,nn?wr(e,p):e}function Xp(t,e,i){if(t!==~~t||t<e||t>i)throw Error(b_+t)}function Pp(t){var e,i,r,n=t.length-1,s="",o=t[0];if(n>0){for(s+=o,e=1;e<n;e++)r=t[e]+"",i=qr-r.length,i&&(s+=dv(i)),s+=r;o=t[e],r=o+"",i=qr-r.length,i&&(s+=dv(i))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var iy=(function(){function t(r,n){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*n+o,r[a]=s%Qs|0,o=s/Qs|0;return o&&r.unshift(o),r}function e(r,n,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=n[a]){l=r[a]>n[a]?1:-1;break}return l}function i(r,n,s){for(var o=0;s--;)r[s]-=o,o=r[s]<n[s]?1:0,r[s]=o*Qs+r[s]-n[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,s,o){var a,l,c,u,p,m,v,w,_,T,$,I,A,k,R,F,B,q,Y=r.constructor,J=r.s==n.s?1:-1,Q=r.d,te=n.d;if(!r.s)return new Y(r);if(!n.s)throw Error(Tu+"Division by zero");for(l=r.e-n.e,B=te.length,R=Q.length,v=new Y(J),w=v.d=[],c=0;te[c]==(Q[c]||0);)++c;if(te[c]>(Q[c]||0)&&--l,s==null?I=s=Y.precision:o?I=s+(gs(r)-gs(n))+1:I=s,I<0)return new Y(0);if(I=I/qr+2|0,c=0,B==1)for(u=0,te=te[0],I++;(c<R||u)&&I--;c++)A=u*Qs+(Q[c]||0),w[c]=A/te|0,u=A%te|0;else{for(u=Qs/(te[0]+1)|0,u>1&&(te=t(te,u),Q=t(Q,u),B=te.length,R=Q.length),k=B,_=Q.slice(0,B),T=_.length;T<B;)_[T++]=0;q=te.slice(),q.unshift(0),F=te[0],te[1]>=Qs/2&&++F;do u=0,a=e(te,_,B,T),a<0?($=_[0],B!=T&&($=$*Qs+(_[1]||0)),u=$/F|0,u>1?(u>=Qs&&(u=Qs-1),p=t(te,u),m=p.length,T=_.length,a=e(p,_,m,T),a==1&&(u--,i(p,B<m?q:te,m))):(u==0&&(a=u=1),p=te.slice()),m=p.length,m<T&&p.unshift(0),i(_,p,T),a==-1&&(T=_.length,a=e(te,_,B,T),a<1&&(u++,i(_,B<T?q:te,T))),T=_.length):a===0&&(u++,_=[0]),w[c++]=u,a&&_[0]?_[T++]=Q[k]||0:(_=[Q[k]],T=1);while((k++<R||_[0]!==void 0)&&I--)}return w[0]||w.shift(),v.e=l,wr(v,o?s+gs(v)+1:s)}})();function G3e(t,e){var i,r,n,s,o,a,l=0,c=0,u=t.constructor,p=u.precision;if(gs(t)>16)throw Error(hie+gs(t));if(!t.s)return new u(lc);for(nn=!1,a=p,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(Sw(2,c))/Math.LN10*2+5|0,a+=r,i=n=s=new u(lc),u.precision=a;;){if(n=wr(n.times(t),a),i=i.times(++l),o=s.plus(iy(n,i,a)),Pp(o.d).slice(0,a)===Pp(s.d).slice(0,a)){for(;c--;)s=wr(s.times(s),a);return u.precision=p,e==null?(nn=!0,wr(s,p)):s}s=o}}function gs(t){for(var e=t.e*qr,i=t.d[0];i>=10;i/=10)e++;return e}function D7(t,e,i){if(e>t.LN10.sd())throw nn=!0,i&&(t.precision=i),Error(Tu+"LN10 precision limit exceeded");return wr(new t(t.LN10),e)}function dv(t){for(var e="";t--;)e+="0";return e}function FP(t,e){var i,r,n,s,o,a,l,c,u,p=1,m=10,v=t,w=v.d,_=v.constructor,T=_.precision;if(v.s<1)throw Error(Tu+(v.s?"NaN":"-Infinity"));if(v.eq(lc))return new _(0);if(e==null?(nn=!1,c=T):c=e,v.eq(10))return e==null&&(nn=!0),D7(_,c);if(c+=m,_.precision=c,i=Pp(w),r=i.charAt(0),s=gs(v),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&i.charAt(1)>3;)v=v.times(t),i=Pp(v.d),r=i.charAt(0),p++;s=gs(v),r>1?(v=new _("0."+i),s++):v=new _(r+"."+i.slice(1))}else return l=D7(_,c+2,T).times(s+""),v=FP(new _(r+"."+i.slice(1)),c-m).plus(l),_.precision=T,e==null?(nn=!0,wr(v,T)):v;for(a=o=v=iy(v.minus(lc),v.plus(lc),c),u=wr(v.times(v),c),n=3;;){if(o=wr(o.times(u),c),l=a.plus(iy(o,new _(n),c)),Pp(l.d).slice(0,c)===Pp(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(D7(_,c+2,T).times(s+""))),a=iy(a,new _(p),c),_.precision=T,e==null?(nn=!0,wr(a,T)):a;a=l,n+=2}}function _0e(t,e){var i,r,n;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(i<0&&(i=r),i+=+e.slice(r+1),e=e.substring(0,r)):i<0&&(i=e.length),r=0;e.charCodeAt(r)===48;)++r;for(n=e.length;e.charCodeAt(n-1)===48;)--n;if(e=e.slice(r,n),e){if(n-=r,i=i-r-1,t.e=l$(i/qr),t.d=[],r=(i+1)%qr,i<0&&(r+=qr),r<n){for(r&&t.d.push(+e.slice(0,r)),n-=qr;r<n;)t.d.push(+e.slice(r,r+=qr));e=e.slice(r),r=qr-e.length}else r-=n;for(;r--;)e+="0";if(t.d.push(+e),nn&&(t.e>Lz||t.e<-Lz))throw Error(hie+i)}else t.s=0,t.e=0,t.d=[0];return t}function wr(t,e,i){var r,n,s,o,a,l,c,u,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=qr,n=e,c=p[u=0];else{if(u=Math.ceil((r+1)/qr),s=p.length,u>=s)return t;for(c=s=p[u],o=1;s>=10;s/=10)o++;r%=qr,n=r-qr+o}if(i!==void 0&&(s=Sw(10,o-n-1),a=c/s%10|0,l=e<0||p[u+1]!==void 0||c%s,l=i<4?(a||l)&&(i==0||i==(t.s<0?3:2)):a>5||a==5&&(i==4||l||i==6&&(r>0?n>0?c/Sw(10,o-n):0:p[u-1])%10&1||i==(t.s<0?8:7))),e<1||!p[0])return l?(s=gs(t),p.length=1,e=e-s-1,p[0]=Sw(10,(qr-e%qr)%qr),t.e=l$(-e/qr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=u,s=1,u--):(p.length=u+1,s=Sw(10,qr-r),p[u]=n>0?(c/Sw(10,o-n)%Sw(10,n)|0)*s:0),l)for(;;)if(u==0){(p[0]+=s)==Qs&&(p[0]=1,++t.e);break}else{if(p[u]+=s,p[u]!=Qs)break;p[u--]=0,s=1}for(r=p.length;p[--r]===0;)p.pop();if(nn&&(t.e>Lz||t.e<-Lz))throw Error(hie+gs(t));return t}function q3e(t,e){var i,r,n,s,o,a,l,c,u,p,m=t.constructor,v=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),nn?wr(e,v):e;if(l=t.d,p=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(i=l,o=-o,a=p.length):(i=p,r=c,a=l.length),n=Math.max(Math.ceil(v/qr),a)+2,o>n&&(o=n,i.length=1),i.reverse(),n=o;n--;)i.push(0);i.reverse()}else{for(n=l.length,a=p.length,u=n<a,u&&(a=n),n=0;n<a;n++)if(l[n]!=p[n]){u=l[n]<p[n];break}o=0}for(u&&(i=l,l=p,p=i,e.s=-e.s),a=l.length,n=p.length-a;n>0;--n)l[a++]=0;for(n=p.length;n>o;){if(l[--n]<p[n]){for(s=n;s&&l[--s]===0;)l[s]=Qs-1;--l[s],l[n]+=Qs}l[n]-=p[n]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,nn?wr(e,v):e):new m(0)}function X_(t,e,i){var r,n=gs(t),s=Pp(t.d),o=s.length;return e?(i&&(r=i-o)>0?s=s.charAt(0)+"."+s.slice(1)+dv(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n<0?"e":"e+")+n):n<0?(s="0."+dv(-n-1)+s,i&&(r=i-o)>0&&(s+=dv(r))):n>=o?(s+=dv(n+1-o),i&&(r=i-n-1)>0&&(s=s+"."+dv(r))):((r=n+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),i&&(r=i-o)>0&&(n+1===o&&(s+="."),s+=dv(r))),t.s<0?"-"+s:s}function x0e(t,e){if(t.length>e)return t.length=e,!0}function H3e(t){var e,i,r;function n(s){var o=this;if(!(o instanceof n))return new n(s);if(o.constructor=n,s instanceof n){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(b_+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return _0e(o,s.toString())}else if(typeof s!="string")throw Error(b_+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,yLt.test(s))_0e(o,s);else throw Error(b_+s)}if(n.prototype=_t,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=H3e,n.config=n.set=gLt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(i=r[e++])||(t[i]=this[i]);return n.config(t),n}function gLt(t){if(!t||typeof t!="object")throw Error(Tu+"Object expected");var e,i,r,n=["precision",1,a$,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<n.length;e+=3)if((r=t[i=n[e]])!==void 0)if(l$(r)===r&&r>=n[e+1]&&r<=n[e+2])this[i]=r;else throw Error(b_+i+": "+r);if((r=t[i="LN10"])!==void 0)if(r==Math.LN10)this[i]=new this(r);else throw Error(b_+i+": "+r);return this}var die=H3e(mLt);lc=new die(1);const ar=die;var vLt=t=>t,W3e={},Z3e=t=>t===W3e,S0e=t=>function e(){return arguments.length===0||arguments.length===1&&Z3e(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Y3e=(t,e)=>t===1?e:S0e(function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=r.filter(o=>o!==W3e).length;return s>=t?e(...r):Y3e(t-s,S0e(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>Z3e(u)?a.shift():u);return e(...c,...a)}))}),OU=t=>Y3e(t.length,t),nJ=(t,e)=>{for(var i=[],r=t;r<e;++r)i[r-t]=r;return i},bLt=OU((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(i=>e[i]).map(t)),wLt=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];if(!i.length)return vLt;var n=i.reverse(),s=n[0],o=n.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}},sJ=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),K3e=t=>{var e=null,i=null;return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e&&n.every((o,a)=>{var l;return o===((l=e)===null||l===void 0?void 0:l[a])})||(e=n,i=t(...n)),i}};function J3e(t){var e;return t===0?e=1:e=Math.floor(new ar(t).abs().log(10).toNumber())+1,e}function X3e(t,e,i){for(var r=new ar(t),n=0,s=[];r.lt(e)&&n<1e5;)s.push(r.toNumber()),r=r.add(i),n++;return s}OU((t,e,i)=>{var r=+t,n=+e;return r+i*(n-r)});OU((t,e,i)=>{var r=e-+t;return r=r||1/0,(i-t)/r});OU((t,e,i)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(i-t)/r))});var Q3e=t=>{var[e,i]=t,[r,n]=[e,i];return e>i&&([r,n]=[i,e]),[r,n]},eNe=(t,e,i)=>{if(t.lte(0))return new ar(0);var r=J3e(t.toNumber()),n=new ar(10).pow(r),s=t.div(n),o=r!==1?.05:.1,a=new ar(Math.ceil(s.div(o).toNumber())).add(i).mul(o),l=a.mul(n);return e?new ar(l.toNumber()):new ar(Math.ceil(l.toNumber()))},_Lt=(t,e,i)=>{var r=new ar(1),n=new ar(t);if(!n.isint()&&i){var s=Math.abs(t);s<1?(r=new ar(10).pow(J3e(t)-1),n=new ar(Math.floor(n.div(r).toNumber())).mul(r)):s>1&&(n=new ar(Math.floor(t)))}else t===0?n=new ar(Math.floor((e-1)/2)):i||(n=new ar(Math.floor(t)));var o=Math.floor((e-1)/2),a=wLt(bLt(l=>n.add(new ar(l-o).mul(r)).toNumber()),nJ);return a(0,e)},tNe=function(e,i,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-e)/(r-1)))return{step:new ar(0),tickMin:new ar(0),tickMax:new ar(0)};var o=eNe(new ar(i).sub(e).div(r-1),n,s),a;e<=0&&i>=0?a=new ar(0):(a=new ar(e).add(i).div(2),a=a.sub(new ar(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new ar(i).sub(a).div(o).toNumber()),u=l+c+1;return u>r?tNe(e,i,r,n,s+1):(u<r&&(c=i>0?c+(r-u):c,l=i>0?l:l+(r-u)),{step:o,tickMin:a.sub(new ar(l).mul(o)),tickMax:a.add(new ar(c).mul(o))})};function xLt(t){var[e,i]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[o,a]=Q3e([e,i]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...nJ(0,r-1).map(()=>1/0)]:[...nJ(0,r-1).map(()=>-1/0),a];return e>i?sJ(l):l}if(o===a)return _Lt(o,r,n);var{step:c,tickMin:u,tickMax:p}=tNe(o,a,s,n,0),m=X3e(u,p.add(new ar(.1).mul(c)),c);return e>i?sJ(m):m}function SLt(t,e){var[i,r]=t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Q3e([i,r]);if(s===-1/0||o===1/0)return[i,r];if(s===o)return[s];var a=Math.max(e,2),l=eNe(new ar(o).sub(s).div(a-1),n,0),c=[...X3e(new ar(s),new ar(o),l),o];return n===!1&&(c=c.map(u=>Math.round(u))),i>r?sJ(c):c}var ELt=K3e(xLt),TLt=K3e(SLt),$Lt=t=>t.rootProps.barCategoryGap,sO=t=>t.rootProps.stackOffset,pie=t=>t.options.chartName,fie=t=>t.rootProps.syncId,iNe=t=>t.rootProps.syncMethod,mie=t=>t.options.eventEmitter,Rm={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},rc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},LU=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},MLt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Rm.angleAxisId,includeHidden:!1,name:void 0,reversed:Rm.reversed,scale:Rm.scale,tick:Rm.tick,tickCount:void 0,ticks:void 0,type:Rm.type,unit:void 0},CLt={allowDataOverflow:rc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rc.scale,tick:rc.tick,tickCount:rc.tickCount,ticks:void 0,type:rc.type,unit:void 0},ILt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Rm.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rm.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rm.scale,tick:Rm.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ALt={allowDataOverflow:rc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rc.scale,tick:rc.tick,tickCount:rc.tickCount,ticks:void 0,type:"category",unit:void 0},yie=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?ILt:MLt,gie=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?ALt:CLt,RU=t=>t.polarOptions,vie=Le([Sy,Ey,ro],BRe),rNe=Le([RU,vie],(t,e)=>{if(t!=null)return mc(t.innerRadius,e,0)}),nNe=Le([RU,vie],(t,e)=>{if(t!=null)return mc(t.outerRadius,e,e*.8)}),PLt=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:i}=t;return[e,i]},sNe=Le([RU],PLt);Le([yie,sNe],LU);var oNe=Le([vie,rNe,nNe],(t,e,i)=>{if(!(t==null||e==null||i==null))return[e,i]});Le([gie,oNe],LU);var aNe=Le([Dr,RU,rNe,nNe,Sy,Ey],(t,e,i,r,n,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||i==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:mc(o,n,n/2),cy:mc(a,s,s/2),innerRadius:i,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),ln=(t,e)=>e,oO=(t,e,i)=>i;function lNe(t){return t==null?void 0:t.id}var Rs=t=>{var e=Dr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},c$=t=>t.tooltip.settings.axisId,so=t=>{var e=Rs(t),i=c$(t);return aO(t,e,i)},cNe=Le([so],t=>t==null?void 0:t.dataKey);function uNe(t,e,i){var{chartData:r=[]}=e,{allowDuplicatedCategory:n,dataKey:s}=i,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=lNe(a);c.forEach((p,m)=>{var v=s==null||n?m:String(ys(p,s,null)),w=ys(p,a.dataKey,0),_;o.has(v)?_=o.get(v):_={},Object.assign(_,{[u]:w}),o.set(v,_)})}}),Array.from(o.values())}function bie(t){return t.stackId!=null&&t.dataKey!=null}function E0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Rz(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?E0e(Object(i),!0).forEach(function(r){kLt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function kLt(t,e,i){return(e=OLt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function OLt(t){var e=LLt(t,"string");return typeof e=="symbol"?e:e+""}function LLt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oJ=[0,"auto"],RLt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},NLt=(t,e)=>t.cartesianAxis.xAxis[e],P0=(t,e)=>{var i=NLt(t,e);return i??RLt},DLt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oJ,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Qk},FLt=(t,e)=>t.cartesianAxis.yAxis[e],k0=(t,e)=>{var i=FLt(t,e);return i??DLt},zLt={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},wie=(t,e)=>{var i=t.cartesianAxis.zAxis[e];return i??zLt},ss=(t,e,i)=>{switch(e){case"xAxis":return P0(t,i);case"yAxis":return k0(t,i);case"zAxis":return wie(t,i);case"angleAxis":return yie(t,i);case"radiusAxis":return gie(t,i);default:throw new Error("Unexpected axis type: ".concat(e))}},jLt=(t,e,i)=>{switch(e){case"xAxis":return P0(t,i);case"yAxis":return k0(t,i);default:throw new Error("Unexpected axis type: ".concat(e))}},aO=(t,e,i)=>{switch(e){case"xAxis":return P0(t,i);case"yAxis":return k0(t,i);case"angleAxis":return yie(t,i);case"radiusAxis":return gie(t,i);default:throw new Error("Unexpected axis type: ".concat(e))}},hNe=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function _ie(t,e){return i=>{switch(t){case"xAxis":return"xAxisId"in i&&i.xAxisId===e;case"yAxis":return"yAxisId"in i&&i.yAxisId===e;case"zAxis":return"zAxisId"in i&&i.zAxisId===e;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===e;default:return!1}}}var ULt=t=>t.graphicalItems.cartesianItems,BLt=Le([ln,oO],_ie),xie=(t,e,i)=>t.filter(i).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),lO=Le([ULt,ss,BLt],xie),dNe=Le([lO],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(bie)),pNe=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),fNe=Le([lO],pNe),Sie=t=>t.map(e=>e.data).filter(Boolean).flat(1),VLt=Le([lO],Sie),Eie=(t,e)=>{var{chartData:i=[],dataStartIndex:r,dataEndIndex:n}=e;return t.length>0?t:i.slice(r,n+1)},Tie=Le([VLt,U3e],Eie),$ie=(t,e,i)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:ys(r,e.dataKey)})):i.length>0?i.map(r=>r.dataKey).flatMap(r=>t.map(n=>({value:ys(n,r)}))):t.map(r=>({value:r})),NU=Le([Tie,ss,lO],$ie);function mNe(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function g1(t){return t.filter(e=>hy(e)||e instanceof Date).map(Number).filter(e=>Vh(e)===!1)}function GLt(t,e,i){return!i||typeof e!="number"||Vh(e)?[]:i.length?g1(i.flatMap(r=>{var n=ys(t,r.dataKey),s,o;if(Array.isArray(n)?[s,o]=n:s=o=n,!(!Gh(s)||!Gh(o)))return[e-s,e+o]})):[]}var qLt=Le([dNe,U3e,so],uNe),yNe=(t,e,i)=>{var r={},n=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),r);return Object.fromEntries(Object.entries(n).map(s=>{var[o,a]=s,l=a.map(lNe);return[o,{stackedData:tAt(t,l,i),graphicalItems:a}]}))},HLt=Le([qLt,dNe,sO],yNe),gNe=(t,e,i)=>{var{dataStartIndex:r,dataEndIndex:n}=e;if(i!=="zAxis"){var s=nAt(t,r,n);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},WLt=Le([HLt,A0,ln],gNe),vNe=(t,e,i,r,n)=>i.length>0?t.flatMap(s=>i.flatMap(o=>{var a,l,c=(a=r[o.id])===null||a===void 0?void 0:a.filter(p=>mNe(n,p)),u=ys(s,(l=e.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:GLt(s,u,c)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(s=>({value:ys(s,e.dataKey),errorDomain:[]})):t.map(s=>({value:s,errorDomain:[]})),DU=t=>t.errorBars,bNe=(t,e,i)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>mNe(i,r));Le([fNe,DU,ln],bNe);var ZLt=Le([Tie,ss,fNe,DU,ln],vNe);function YLt(t){var{value:e}=t;if(hy(e)||e instanceof Date)return e}var T0e=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),i=g1(e);if(i.length!==0)return[Math.min(...i),Math.max(...i)]},KLt=(t,e,i)=>{var r=t.map(YLt).filter(n=>n!=null);return i&&(e.dataKey==null||e.allowDuplicatedCategory&&DLe(r))?o3e(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Mie=t=>{var e;if(t==null||!("domain"in t))return oJ;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var i=g1(t.ticks);return[Math.min(...i),Math.max(...i)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:oJ},Nz=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var n=i.filter(Boolean);if(n.length!==0){var s=n.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},wNe=t=>t.referenceElements.dots,u$=(t,e,i)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===i:r.yAxisId===i),JLt=Le([wNe,ln,oO],u$),_Ne=t=>t.referenceElements.areas,XLt=Le([_Ne,ln,oO],u$),xNe=t=>t.referenceElements.lines,QLt=Le([xNe,ln,oO],u$),SNe=(t,e)=>{var i=g1(t.map(r=>e==="xAxis"?r.x:r.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},eRt=Le(JLt,ln,SNe),ENe=(t,e)=>{var i=g1(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},tRt=Le([XLt,ln],ENe),TNe=(t,e)=>{var i=g1(t.map(r=>e==="xAxis"?r.x:r.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]},iRt=Le(QLt,ln,TNe),rRt=Le(eRt,iRt,tRt,(t,e,i)=>Nz(t,i,e)),$Ne=Le([ss],Mie),Cie=(t,e,i,r,n,s,o)=>{var a=pLt(e,t.allowDataOverflow);if(a!=null)return a;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?Nz(i,n,T0e(r)):Nz(n,T0e(r));return fLt(e,c,t.allowDataOverflow)},nRt=Le([ss,$Ne,WLt,ZLt,rRt,Dr,ln],Cie),sRt=[0,1],Iie=(t,e,i,r,n,s,o)=>{if(!((t==null||i==null||i.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=f1(e,s);return c&&a==null?o3e(0,i.length):l==="category"?KLt(r,t,c):n==="expand"?sRt:o}},Aie=Le([ss,Dr,Tie,NU,sO,ln,nRt],Iie),MNe=(t,e,i,r,n)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&n==="radiusAxis"?"band":e==="radial"&&n==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!i)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(Kk(s));return a in OI?a:"point"}}},h$=Le([ss,Dr,hNe,pie,ln],MNe);function oRt(t){if(t!=null){if(t in OI)return OI[t]();var e="scale".concat(Kk(t));if(e in OI)return OI[e]()}}function Pie(t,e,i,r){if(!(i==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(i).range(r);var n=oRt(e);if(n!=null){var s=n.domain(i).range(r);return JIt(s),s}}}var kie=(t,e,i)=>{var r=Mie(e);if(!(i!=="auto"&&i!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&wT(t))return ELt(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&wT(t))return TLt(t,e.tickCount,e.allowDecimals)}},Oie=Le([Aie,aO,h$],kie),Lie=(t,e,i,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&wT(e)&&Array.isArray(i)&&i.length>0){var n=e[0],s=i[0],o=e[1],a=i[i.length-1];return[Math.min(n,s),Math.max(o,a)]}return e},aRt=Le([ss,Aie,Oie,ln],Lie),lRt=Le(NU,ss,(t,e)=>{if(!(!e||e.type!=="number")){var i=1/0,r=Array.from(g1(t.map(a=>a.value))).sort((a,l)=>a-l);if(r.length<2)return 1/0;var n=r[r.length-1]-r[0];if(n===0)return 1/0;for(var s=0;s<r.length-1;s++){var o=r[s+1]-r[s];i=Math.min(i,o)}return i/n}}),CNe=Le(lRt,Dr,$Lt,ro,(t,e,i,r)=>r,(t,e,i,r,n)=>{if(!Gh(t))return 0;var s=e==="vertical"?r.height:r.width;if(n==="gap")return t*s/2;if(n==="no-gap"){var o=mc(i,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),cRt=(t,e)=>{var i=P0(t,e);return i==null||typeof i.padding!="string"?0:CNe(t,"xAxis",e,i.padding)},uRt=(t,e)=>{var i=k0(t,e);return i==null||typeof i.padding!="string"?0:CNe(t,"yAxis",e,i.padding)},hRt=Le(P0,cRt,(t,e)=>{var i,r;if(t==null)return{left:0,right:0};var{padding:n}=t;return typeof n=="string"?{left:e,right:e}:{left:((i=n.left)!==null&&i!==void 0?i:0)+e,right:((r=n.right)!==null&&r!==void 0?r:0)+e}}),dRt=Le(k0,uRt,(t,e)=>{var i,r;if(t==null)return{top:0,bottom:0};var{padding:n}=t;return typeof n=="string"?{top:e,bottom:e}:{top:((i=n.top)!==null&&i!==void 0?i:0)+e,bottom:((r=n.bottom)!==null&&r!==void 0?r:0)+e}}),pRt=Le([ro,hRt,$U,TU,(t,e,i)=>i],(t,e,i,r,n)=>{var{padding:s}=r;return n?[s.left,i.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),fRt=Le([ro,Dr,dRt,$U,TU,(t,e,i)=>i],(t,e,i,r,n,s)=>{var{padding:o}=n;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-i.bottom,t.top+i.top]:[t.top+i.top,t.top+t.height-i.bottom]}),cO=(t,e,i,r)=>{var n;switch(e){case"xAxis":return pRt(t,i,r);case"yAxis":return fRt(t,i,r);case"zAxis":return(n=wie(t,i))===null||n===void 0?void 0:n.range;case"angleAxis":return sNe(t);case"radiusAxis":return oNe(t,i);default:return}},INe=Le([ss,cO],LU),FU=Le([ss,h$,aRt,INe],Pie);Le([lO,DU,ln],bNe);function ANe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var zU=(t,e)=>e,jU=(t,e,i)=>i,mRt=Le(SU,zU,jU,(t,e,i)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===i).sort(ANe)),yRt=Le(EU,zU,jU,(t,e,i)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===i).sort(ANe)),PNe=(t,e)=>({width:t.width,height:e.height}),gRt=(t,e)=>{var i=typeof e.width=="number"?e.width:Qk;return{width:i,height:t.height}};Le(ro,P0,PNe);var vRt=(t,e,i)=>{switch(e){case"top":return t.top;case"bottom":return i-t.bottom;default:return 0}},bRt=(t,e,i)=>{switch(e){case"left":return t.left;case"right":return i-t.right;default:return 0}},wRt=Le(Ey,ro,mRt,zU,jU,(t,e,i,r,n)=>{var s={},o;return i.forEach(a=>{var l=PNe(e,a);o==null&&(o=vRt(e,r,t));var c=r==="top"&&!n||r==="bottom"&&n;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),_Rt=Le(Sy,ro,yRt,zU,jU,(t,e,i,r,n)=>{var s={},o;return i.forEach(a=>{var l=gRt(e,a);o==null&&(o=bRt(e,r,t));var c=r==="left"&&!n||r==="right"&&n;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),xRt=(t,e)=>{var i=P0(t,e);if(i!=null)return wRt(t,i.orientation,i.mirror)};Le([ro,P0,xRt,(t,e)=>e],(t,e,i,r)=>{if(e!=null){var n=i==null?void 0:i[r];return n==null?{x:t.left,y:0}:{x:t.left,y:n}}});var SRt=(t,e)=>{var i=k0(t,e);if(i!=null)return _Rt(t,i.orientation,i.mirror)};Le([ro,k0,SRt,(t,e)=>e],(t,e,i,r)=>{if(e!=null){var n=i==null?void 0:i[r];return n==null?{x:0,y:t.top}:{x:n,y:t.top}}});Le(ro,k0,(t,e)=>{var i=typeof e.width=="number"?e.width:Qk;return{width:i,height:t.height}});var kNe=(t,e,i,r)=>{if(i!=null){var{allowDuplicatedCategory:n,type:s,dataKey:o}=i,a=f1(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&n&&DLe(l))return l}},Rie=Le([Dr,NU,ss,ln],kNe),ONe=(t,e,i,r)=>{if(!(i==null||i.dataKey==null)){var{type:n,scale:s}=i,o=f1(t,r);if(o&&(n==="number"||s!=="auto"))return e.map(a=>a.value)}},Nie=Le([Dr,NU,aO,ln],ONe);Le([Dr,jLt,h$,FU,Rie,Nie,cO,Oie,ln],(t,e,i,r,n,s,o,a,l)=>{if(e==null)return null;var c=f1(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:n,isCategorical:c,niceTicks:a,range:o,realScaleType:i,scale:r}});var ERt=(t,e,i,r,n,s,o,a,l)=>{if(!(e==null||r==null)){var c=f1(t,l),{type:u,ticks:p,tickCount:m}=e,v=i==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=u==="category"&&r.bandwidth?r.bandwidth()/v:0;w=l==="angleAxis"&&s!=null&&s.length>=2?hl(s[0]-s[1])*2*w:w;var _=p||n;if(_){var T=_.map(($,I)=>{var A=o?o.indexOf($):$;return{index:I,coordinate:r(A)+w,value:$,offset:w}});return T.filter($=>!Vh($.coordinate))}return c&&a?a.map(($,I)=>({coordinate:r($)+w,value:$,index:I,offset:w})):r.ticks?r.ticks(m).map($=>({coordinate:r($)+w,value:$,offset:w})):r.domain().map(($,I)=>({coordinate:r($)+w,value:o?o[$]:$,index:I,offset:w}))}};Le([Dr,aO,h$,FU,Oie,cO,Rie,Nie,ln],ERt);var TRt=(t,e,i,r,n,s,o)=>{if(!(e==null||i==null||r==null||r[0]===r[1])){var a=f1(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?hl(r[0]-r[1])*2*c:c,a&&s?s.map((u,p)=>({coordinate:i(u)+c,value:u,index:p,offset:c})):i.ticks?i.ticks(l).map(u=>({coordinate:i(u)+c,value:u,offset:c})):i.domain().map((u,p)=>({coordinate:i(u)+c,value:n?n[u]:u,index:p,offset:c}))}};Le([Dr,aO,FU,cO,Rie,Nie,ln],TRt);Le(ss,FU,(t,e)=>{if(!(t==null||e==null))return Rz(Rz({},t),{},{scale:e})});var $Rt=Le([ss,h$,Aie,INe],Pie);Le((t,e,i)=>wie(t,i),$Rt,(t,e)=>{if(!(t==null||e==null))return Rz(Rz({},t),{},{scale:e})});var MRt=Le([Dr,SU,EU],(t,e,i)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),LNe=t=>t.options.defaultTooltipEventType,RNe=t=>t.options.validateTooltipEventTypes;function NNe(t,e,i){if(t==null)return e;var r=t?"axis":"item";return i==null?e:i.includes(r)?r:e}function Die(t,e){var i=LNe(t),r=RNe(t);return NNe(e,i,r)}function CRt(t){return Ei(e=>Die(e,t))}var DNe=(t,e)=>{var i,r=Number(e);if(!(Vh(r)||e==null))return r>=0?t==null||(i=t[r])===null||i===void 0?void 0:i.value:void 0},IRt=t=>t.tooltip.settings,_v={active:!1,index:null,dataKey:void 0,coordinate:void 0},ARt={itemInteraction:{click:_v,hover:_v},axisInteraction:{click:_v,hover:_v},keyboardInteraction:_v,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},FNe=Tc({name:"tooltip",initialState:ARt,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var i=ty(t).tooltipItemPayloads.indexOf(e.payload);i>-1&&t.tooltipItemPayloads.splice(i,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:PRt,removeTooltipEntrySettings:kRt,setTooltipSettingsState:ORt,setActiveMouseOverItemIndex:zNe,mouseLeaveItem:LRt,mouseLeaveChart:jNe,setActiveClickItemIndex:RRt,setMouseOverAxisIndex:UNe,setMouseClickAxisIndex:NRt,setSyncInteraction:aJ,setKeyboardInteraction:lJ}=FNe.actions,DRt=FNe.reducer;function $0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function T3(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$0e(Object(i),!0).forEach(function(r){FRt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function FRt(t,e,i){return(e=zRt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zRt(t){var e=jRt(t,"string");return typeof e=="symbol"?e:e+""}function jRt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function URt(t,e,i){return e==="axis"?i==="click"?t.axisInteraction.click:t.axisInteraction.hover:i==="click"?t.itemInteraction.click:t.itemInteraction.hover}function BRt(t){return t.index!=null}var BNe=(t,e,i,r)=>{if(e==null)return _v;var n=URt(t,e,i);if(n==null)return _v;if(n.active)return n;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(BRt(n)){if(s)return T3(T3({},n),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return T3(T3({},_v),{},{coordinate:n.coordinate})},Fie=(t,e)=>{var i=t==null?void 0:t.index;if(i==null)return null;var r=Number(i);if(!Gh(r))return i;var n=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(n,Math.min(r,s)))},VNe=(t,e,i,r,n,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=n==null?void 0:n[Number(s)];if(u)switch(i){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},GNe=(t,e,i,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var n;return i==="hover"?n=t.itemInteraction.hover.dataKey:n=t.itemInteraction.click.dataKey,n==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===n})},uO=t=>t.options.tooltipPayloadSearcher,d$=t=>t.tooltip;function M0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function C0e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?M0e(Object(i),!0).forEach(function(r){VRt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function VRt(t,e,i){return(e=GRt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function GRt(t){var e=qRt(t,"string");return typeof e=="symbol"?e:e+""}function qRt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HRt(t,e){return t??e}var qNe=(t,e,i,r,n,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=i,p=[];return t.reduce((m,v)=>{var w,{dataDefinedOnItem:_,settings:T}=v,$=HRt(_,a),I=Array.isArray($)?VRe($,c,u):$,A=(w=T==null?void 0:T.dataKey)!==null&&w!==void 0?w:r,k=T==null?void 0:T.nameKey,R;if(r&&Array.isArray(I)&&!Array.isArray(I[0])&&o==="axis"?R=B$t(I,r,n):R=s(I,e,l,k),Array.isArray(R))R.forEach(B=>{var q=C0e(C0e({},T),{},{name:B.name,unit:B.unit,color:void 0,fill:void 0});m.push(fve({tooltipEntrySettings:q,dataKey:B.dataKey,payload:B.payload,value:ys(B.payload,B.dataKey),name:B.name}))});else{var F;m.push(fve({tooltipEntrySettings:T,dataKey:A,payload:R,value:ys(R,A),name:(F=ys(R,k))!==null&&F!==void 0?F:T==null?void 0:T.name}))}return m},p)}},zie=Le([so,Dr,hNe,pie,Rs],MNe),WRt=Le([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),ZRt=Le([Rs,c$],_ie),hO=Le([WRt,so,ZRt],xie),YRt=Le([hO],t=>t.filter(bie)),KRt=Le([hO],Sie),p$=Le([KRt,A0],Eie),JRt=Le([YRt,A0,so],uNe),jie=Le([p$,so,hO],$ie),XRt=Le([so],Mie),QRt=Le([hO],t=>t.filter(bie)),e3t=Le([JRt,QRt,sO],yNe),t3t=Le([e3t,A0,Rs],gNe),i3t=Le([hO],pNe),r3t=Le([p$,so,i3t,DU,Rs],vNe),n3t=Le([wNe,Rs,c$],u$),s3t=Le([n3t,Rs],SNe),o3t=Le([_Ne,Rs,c$],u$),a3t=Le([o3t,Rs],ENe),l3t=Le([xNe,Rs,c$],u$),c3t=Le([l3t,Rs],TNe),u3t=Le([s3t,c3t,a3t],Nz),h3t=Le([so,XRt,t3t,r3t,u3t,Dr,Rs],Cie),HNe=Le([so,Dr,p$,jie,sO,Rs,h3t],Iie),d3t=Le([HNe,so,zie],kie),p3t=Le([so,HNe,d3t,Rs],Lie),WNe=t=>{var e=Rs(t),i=c$(t),r=!1;return cO(t,e,i,r)},ZNe=Le([so,WNe],LU),YNe=Le([so,zie,p3t,ZNe],Pie),f3t=Le([Dr,jie,so,Rs],kNe),m3t=Le([Dr,jie,so,Rs],ONe),y3t=(t,e,i,r,n,s,o,a)=>{if(e){var{type:l}=e,c=f1(t,a);if(r){var u=i==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return p=a==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?hl(n[0]-n[1])*2*p:p,c&&o?o.map((m,v)=>({coordinate:r(m)+p,value:m,index:v,offset:p})):r.domain().map((m,v)=>({coordinate:r(m)+p,value:s?s[m]:m,index:v,offset:p}))}}},My=Le([Dr,so,zie,YNe,WNe,f3t,m3t,Rs],y3t),Uie=Le([LNe,RNe,IRt],(t,e,i)=>NNe(i.shared,t,e)),KNe=t=>t.tooltip.settings.trigger,Bie=t=>t.tooltip.settings.defaultIndex,UU=Le([d$,Uie,KNe,Bie],BNe),zP=Le([UU,p$],Fie),JNe=Le([My,zP],DNe),g3t=Le([UU],t=>{if(t)return t.dataKey}),XNe=Le([d$,Uie,KNe,Bie],GNe),v3t=Le([Sy,Ey,Dr,ro,My,Bie,XNe,uO],VNe),b3t=Le([UU,v3t],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),w3t=Le([UU],t=>t.active),_3t=Le([XNe,zP,A0,cNe,JNe,uO,Uie],qNe);Le([_3t],t=>{if(t!=null){var e=t.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(e))}});function I0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function A0e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?I0e(Object(i),!0).forEach(function(r){x3t(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function x3t(t,e,i){return(e=S3t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S3t(t){var e=E3t(t,"string");return typeof e=="symbol"?e:e+""}function E3t(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T3t=()=>Ei(so),$3t=()=>{var t=T3t(),e=Ei(My),i=Ei(YNe);return sAt(A0e(A0e({},t),{},{scale:i}),e)},M3t=()=>Ei(pie),Vie=(t,e)=>e,QNe=(t,e,i)=>i,Gie=(t,e,i,r)=>r,C3t=Le(My,t=>gU(t,e=>e.coordinate)),qie=Le([d$,Vie,QNe,Gie],BNe),eDe=Le([qie,p$],Fie),I3t=(t,e,i)=>{if(e!=null){var r=d$(t);return e==="axis"?i==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:i==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},tDe=Le([d$,Vie,QNe,Gie],GNe),Dz=Le([Sy,Ey,Dr,ro,My,Gie,tDe,uO],VNe),A3t=Le([qie,Dz],(t,e)=>{var i;return(i=t.coordinate)!==null&&i!==void 0?i:e}),iDe=Le(My,eDe,DNe),P3t=Le([tDe,eDe,A0,cNe,iDe,uO,Vie],qNe),k3t=Le([qie],t=>({isActive:t.active,activeIndex:t.index})),O3t=(t,e,i,r,n,s,o,a)=>{if(!(!t||!e||!r||!n||!s)){var l=oAt(t.chartX,t.chartY,e,i,a);if(l){var c=lAt(l,e),u=YIt(c,o,s,r,n),p=aAt(e,s,u,l);return{activeIndex:String(u),activeCoordinate:p}}}};function cJ(){return cJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},cJ.apply(null,arguments)}function P0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function $3(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?P0e(Object(i),!0).forEach(function(r){L3t(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function L3t(t,e,i){return(e=R3t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function R3t(t){var e=N3t(t,"string");return typeof e=="symbol"?e:e+""}function N3t(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D3t(t){var{coordinate:e,payload:i,index:r,offset:n,tooltipAxisBandSize:s,layout:o,cursor:a,tooltipEventType:l,chartName:c}=t,u=e,p=i,m=r;if(!a||!u||c!=="ScatterChart"&&l!=="axis")return null;var v,w;if(c==="ScatterChart")v=u,w=ePt;else if(c==="BarChart")v=tPt(o,u,n,s),w=i3e;else if(o==="radial"){var{cx:_,cy:T,radius:$,startAngle:I,endAngle:A}=r3e(u);v={cx:_,cy:T,startAngle:I,endAngle:A,innerRadius:$,outerRadius:$},w=s3e}else v={points:OPt(o,u,n)},w=JRe;var k=typeof a=="object"&&"className"in a?a.className:void 0,R=$3($3($3($3({stroke:"#ccc",pointerEvents:"none"},n),v),Na(a,!1)),{},{payload:p,payloadIndex:m,className:vs("recharts-tooltip-cursor",k)});return U.isValidElement(a)?U.cloneElement(a,R):U.createElement(w,R)}function F3t(t){var e=$3t(),i=_At(),r=ZRe(),n=M3t();return U.createElement(D3t,cJ({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:i,layout:r,tooltipAxisBandSize:e,chartName:n}))}var rDe=U.createContext(null),z3t=()=>U.useContext(rDe),F7={exports:{}},k0e;function j3t(){return k0e||(k0e=1,(function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,p,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var v=new n(u,p||l,m),w=i?i+c:c;return l._events[w]?l._events[w].fn?l._events[w]=[l._events[w],v]:l._events[w].push(v):(l._events[w]=v,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,p;if(this._eventsCount===0)return c;for(p in u=this._events)e.call(u,p)&&c.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=i?i+c:c,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,v=p.length,w=new Array(v);m<v;m++)w[m]=p[m].fn;return w},a.prototype.listenerCount=function(c){var u=i?i+c:c,p=this._events[u];return p?p.fn?1:p.length:0},a.prototype.emit=function(c,u,p,m,v,w){var _=i?i+c:c;if(!this._events[_])return!1;var T=this._events[_],$=arguments.length,I,A;if(T.fn){switch(T.once&&this.removeListener(c,T.fn,void 0,!0),$){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,u),!0;case 3:return T.fn.call(T.context,u,p),!0;case 4:return T.fn.call(T.context,u,p,m),!0;case 5:return T.fn.call(T.context,u,p,m,v),!0;case 6:return T.fn.call(T.context,u,p,m,v,w),!0}for(A=1,I=new Array($-1);A<$;A++)I[A-1]=arguments[A];T.fn.apply(T.context,I)}else{var k=T.length,R;for(A=0;A<k;A++)switch(T[A].once&&this.removeListener(c,T[A].fn,void 0,!0),$){case 1:T[A].fn.call(T[A].context);break;case 2:T[A].fn.call(T[A].context,u);break;case 3:T[A].fn.call(T[A].context,u,p);break;case 4:T[A].fn.call(T[A].context,u,p,m);break;default:if(!I)for(R=1,I=new Array($-1);R<$;R++)I[R-1]=arguments[R];T[A].fn.apply(T[A].context,I)}}return!0},a.prototype.on=function(c,u,p){return s(this,c,u,p,!1)},a.prototype.once=function(c,u,p){return s(this,c,u,p,!0)},a.prototype.removeListener=function(c,u,p,m){var v=i?i+c:c;if(!this._events[v])return this;if(!u)return o(this,v),this;var w=this._events[v];if(w.fn)w.fn===u&&(!m||w.once)&&(!p||w.context===p)&&o(this,v);else{for(var _=0,T=[],$=w.length;_<$;_++)(w[_].fn!==u||m&&!w[_].once||p&&w[_].context!==p)&&T.push(w[_]);T.length?this._events[v]=T.length===1?T[0]:T:o(this,v)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=i?i+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a})(F7)),F7.exports}var U3t=j3t();const B3t=Qp(U3t);var jP=new B3t,uJ="recharts.syncEvent.tooltip",O0e="recharts.syncEvent.brush";function V3t(t,e){if(e){var i=Number.parseInt(e,10);if(!Vh(i))return t==null?void 0:t[i]}}var G3t={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},nDe=Tc({name:"options",initialState:G3t,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),q3t=nDe.reducer,{createEventEmitter:H3t}=nDe.actions;function W3t(t){return t.tooltip.syncInteraction}var Z3t={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sDe=Tc({name:"chartData",initialState:Z3t,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:i,endIndex:r}=e.payload;i!=null&&(t.dataStartIndex=i),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:L0e,setDataStartEndIndexes:Y3t,setComputedData:UYt}=sDe.actions,K3t=sDe.reducer,J3t=["x","y"];function R0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Cb(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?R0e(Object(i),!0).forEach(function(r){X3t(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):R0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function X3t(t,e,i){return(e=Q3t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Q3t(t){var e=eNt(t,"string");return typeof e=="symbol"?e:e+""}function eNt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tNt(t,e){if(t==null)return{};var i,r,n=iNt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function iNt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var oDe=()=>{};function rNt(){var t=Ei(fie),e=Ei(mie),i=oa(),r=Ei(iNe),n=Ei(My),s=ZRe(),o=Fte(),a=Ei(l=>l.rootProps.className);U.useEffect(()=>{if(t==null)return oDe;var l=(c,u,p)=>{if(e!==p&&t===c){if(r==="index"){var m;if(o&&u!==null&&u!==void 0&&(m=u.payload)!==null&&m!==void 0&&m.coordinate){var v=u.payload.coordinate,{x:w,y:_}=v,T=tNt(v,J3t),$=Cb(Cb(Cb({},T),typeof w=="number"&&{x:Math.max(o.x,Math.min(w,o.x+o.width))}),typeof _=="number"&&{y:Math.max(o.y,Math.min(_,o.y+o.height))}),I=Cb(Cb({},u),{},{payload:Cb(Cb({},u.payload),{},{coordinate:$})});i(I)}else i(u);return}if(n!=null){var A;if(typeof r=="function"){var k={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},R=r(n,k);A=n[R]}else r==="value"&&(A=n.find(re=>String(re.value)===u.payload.label));var{coordinate:F}=u.payload;if(A==null||u.payload.active===!1||F==null||o==null){i(aJ({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:B,y:q}=F,Y=Math.min(B,o.x+o.width),J=Math.min(q,o.y+o.height),Q={x:s==="horizontal"?A.coordinate:Y,y:s==="horizontal"?J:A.coordinate},te=aJ({active:u.payload.active,coordinate:Q,dataKey:u.payload.dataKey,index:String(A.index),label:u.payload.label});i(te)}}};return jP.on(uJ,l),()=>{jP.off(uJ,l)}},[a,i,e,t,r,n,s,o])}function nNt(){var t=Ei(fie),e=Ei(mie),i=oa();U.useEffect(()=>{if(t==null)return oDe;var r=(n,s,o)=>{e!==o&&t===n&&i(Y3t(s))};return jP.on(O0e,r),()=>{jP.off(O0e,r)}},[i,e,t])}function sNt(){var t=oa();U.useEffect(()=>{t(H3t())},[t]),rNt(),nNt()}function oNt(t,e,i,r,n,s){var o=Ei(m=>I3t(m,t,e)),a=Ei(mie),l=Ei(fie),c=Ei(iNe),u=Ei(W3t),p=u==null?void 0:u.active;U.useEffect(()=>{if(!p&&l!=null&&a!=null){var m=aJ({active:s,coordinate:i,dataKey:o,index:n,label:typeof r=="number"?String(r):r});jP.emit(uJ,l,m,a)}},[p,i,o,n,r,a,l,c,s])}function N0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function D0e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?N0e(Object(i),!0).forEach(function(r){aNt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function aNt(t,e,i){return(e=lNt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function lNt(t){var e=cNt(t,"string");return typeof e=="symbol"?e:e+""}function cNt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uNt(t){return t.dataKey}function hNt(t,e){return U.isValidElement(t)?U.cloneElement(t,e):typeof t=="function"?U.createElement(t,e):U.createElement(kAt,e)}var F0e=[],dNt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!eO.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function pNt(t){var e=Ty(t,dNt),{active:i,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,content:o,filterNull:a,isAnimationActive:l,offset:c,payloadUniqBy:u,position:p,reverseDirection:m,useTranslate3d:v,wrapperStyle:w,cursor:_,shared:T,trigger:$,defaultIndex:I,portal:A,axisId:k}=e,R=oa(),F=typeof I=="number"?String(I):I;U.useEffect(()=>{R(ORt({shared:T,trigger:$,axisId:k,active:i,defaultIndex:F}))},[R,T,$,k,i,F]);var B=Fte(),q=KRe(),Y=CRt(T),{activeIndex:J,isActive:Q}=Ei(Qe=>k3t(Qe,Y,$,F)),te=Ei(Qe=>P3t(Qe,Y,$,F)),re=Ei(Qe=>iDe(Qe,Y,$,F)),ee=Ei(Qe=>A3t(Qe,Y,$,F)),ye=te,ne=z3t(),ue=i??Q,[he,Ne]=zCt([ye,ue]),X=Y==="axis"?re:void 0;oNt(Y,$,ee,X,J,ue);var _e=A??ne;if(_e==null)return null;var ke=ye??F0e;ue||(ke=F0e),a&&ke.length&&(ke=hCt(ye.filter(Qe=>Qe.value!=null&&(Qe.hide!==!0||e.includeHidden)),u,uNt));var qe=ke.length>0,Ke=U.createElement(zAt,{allowEscapeViewBox:r,animationDuration:n,animationEasing:s,isAnimationActive:l,active:ue,coordinate:ee,hasPayload:qe,offset:c,position:p,reverseDirection:m,useTranslate3d:v,viewBox:B,wrapperStyle:w,lastBoundingBox:he,innerRef:Ne,hasPortalFromProps:!!A},hNt(o,D0e(D0e({},e),{},{payload:ke,label:X,active:ue,coordinate:ee,accessibilityLayer:q})));return U.createElement(U.Fragment,null,ywe.createPortal(Ke,_e),ue&&U.createElement(F3t,{cursor:_,tooltipEventType:Y,coordinate:ee,payload:ye,index:J}))}var z7={},j7={},U7={},z0e;function fNt(){return z0e||(z0e=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i,r,{signal:n,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(i.apply(o,a),o=void 0,a=null)},p=()=>{c&&u(),_()};let m=null;const v=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,p()},r)},w=()=>{m!==null&&(clearTimeout(m),m=null)},_=()=>{w(),o=void 0,a=null},T=()=>{u()},$=function(...I){if(n!=null&&n.aborted)return;o=this,a=I;const A=m==null;v(),l&&A&&u()};return $.schedule=v,$.cancel=_,$.flush=T,n==null||n.addEventListener("abort",_,{once:!0}),$}t.debounce=e})(U7)),U7}var j0e;function mNt(){return j0e||(j0e=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fNt();function i(r,n=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,p=null;const m=e.debounce(function(..._){u=r.apply(this,_),p=null},n,{edges:c}),v=function(..._){return l!=null&&(p===null&&(p=Date.now()),Date.now()-p>=l)?(u=r.apply(this,_),p=Date.now(),m.cancel(),m.schedule(),u):(m.apply(this,_),u)},w=()=>(m.flush(),u);return v.cancel=m.cancel,v.flush=w,v}t.debounce=i})(j7)),j7}var U0e;function yNt(){return U0e||(U0e=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mNt();function i(r,n=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,n,{leading:o,maxWait:n,trailing:a})}t.throttle=i})(z7)),z7}var B7,B0e;function gNt(){return B0e||(B0e=1,B7=yNt().throttle),B7}var vNt=gNt();const bNt=Qp(vNt);var V7=function(e,i){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};function V0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function G7(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?V0e(Object(i),!0).forEach(function(r){wNt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):V0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function wNt(t,e,i){return(e=_Nt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _Nt(t){var e=xNt(t,"string");return typeof e=="symbol"?e:e+""}function xNt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SNt=U.forwardRef((t,e)=>{var{aspect:i,initialDimension:r={width:-1,height:-1},width:n="100%",height:s="100%",minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:p,className:m,onResize:v,style:w={}}=t,_=U.useRef(null),T=U.useRef();T.current=v,U.useImperativeHandle(e,()=>_.current);var[$,I]=U.useState({containerWidth:r.width,containerHeight:r.height}),A=U.useCallback((R,F)=>{I(B=>{var q=Math.round(R),Y=Math.round(F);return B.containerWidth===q&&B.containerHeight===Y?B:{containerWidth:q,containerHeight:Y}})},[]);U.useEffect(()=>{var R=Y=>{var J,{width:Q,height:te}=Y[0].contentRect;A(Q,te),(J=T.current)===null||J===void 0||J.call(T,Q,te)};u>0&&(R=bNt(R,u,{trailing:!0,leading:!1}));var F=new ResizeObserver(R),{width:B,height:q}=_.current.getBoundingClientRect();return A(B,q),F.observe(_.current),()=>{F.disconnect()}},[A,u]);var k=U.useMemo(()=>{var{containerWidth:R,containerHeight:F}=$;if(R<0||F<0)return null;V7(Hw(n)||Hw(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,s),V7(!i||i>0,"The aspect(%s) must be greater than zero.",i);var B=Hw(n)?R:n,q=Hw(s)?F:s;return i&&i>0&&(B?q=B/i:q&&(B=q*i),l&&q>l&&(q=l)),V7(B>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,q,n,s,o,a,i),U.Children.map(c,Y=>U.cloneElement(Y,{width:B,height:q,style:G7({width:B,height:q},Y.props.style)}))},[i,c,s,l,a,o,$,n]);return U.createElement("div",{id:p?"".concat(p):void 0,className:vs("recharts-responsive-container",m),style:G7(G7({},w),{},{width:n,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:_},U.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),BU=t=>null;BU.displayName="Cell";function ENt(t,e,i){return(e=TNt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function TNt(t){var e=$Nt(t,"string");return typeof e=="symbol"?e:e+""}function $Nt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class MNt{constructor(e){ENt(this,"cache",new Map),this.maxSize=e}get(e){var i=this.cache.get(e);return i!==void 0&&(this.cache.delete(e),this.cache.set(e,i)),i}set(e,i){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function G0e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function CNt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?G0e(Object(i),!0).forEach(function(r){INt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G0e(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function INt(t,e,i){return(e=ANt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ANt(t){var e=PNt(t,"string");return typeof e=="symbol"?e:e+""}function PNt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kNt={cacheSize:2e3,enableCache:!0},aDe=CNt({},kNt),q0e=new MNt(aDe.cacheSize),ONt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},H0e="recharts_measurement_span";function LNt(t,e){var i=e.fontSize||"",r=e.fontFamily||"",n=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(i,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(o,"|").concat(a)}var W0e=(t,e)=>{try{var i=document.getElementById(H0e);i||(i=document.createElement("span"),i.setAttribute("id",H0e),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,ONt,e),i.textContent="".concat(t);var r=i.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Z0e=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||eO.isSsr)return{width:0,height:0};if(!aDe.enableCache)return W0e(e,i);var r=LNt(e,i),n=q0e.get(r);if(n)return n;var s=W0e(e,i);return q0e.set(r,s),s},Y0e=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K0e=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RNt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NNt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lDe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DNt=Object.keys(lDe),g2="NaN";function FNt(t,e){return t*lDe[e]}class nl{static parse(e){var i,[,r,n]=(i=NNt.exec(e))!==null&&i!==void 0?i:[];return new nl(parseFloat(r),n??"")}constructor(e,i){this.num=e,this.unit=i,this.num=e,this.unit=i,Vh(e)&&(this.unit=""),i!==""&&!RNt.test(i)&&(this.num=NaN,this.unit=""),DNt.includes(i)&&(this.num=FNt(e,i),this.unit="px")}add(e){return this.unit!==e.unit?new nl(NaN,""):new nl(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new nl(NaN,""):new nl(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new nl(NaN,""):new nl(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new nl(NaN,""):new nl(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Vh(this.num)}}function cDe(t){if(t.includes(g2))return g2;for(var e=t;e.includes("*")||e.includes("/");){var i,[,r,n,s]=(i=Y0e.exec(e))!==null&&i!==void 0?i:[],o=nl.parse(r??""),a=nl.parse(s??""),l=n==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return g2;e=e.replace(Y0e,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,p,m]=(c=K0e.exec(e))!==null&&c!==void 0?c:[],v=nl.parse(u??""),w=nl.parse(m??""),_=p==="+"?v.add(w):v.subtract(w);if(_.isNaN())return g2;e=e.replace(K0e,_.toString())}return e}var J0e=/\(([^()]*)\)/;function zNt(t){for(var e=t,i;(i=J0e.exec(e))!=null;){var[,r]=i;e=e.replace(J0e,cDe(r))}return e}function jNt(t){var e=t.replace(/\s+/g,"");return e=zNt(e),e=cDe(e),e}function UNt(t){try{return jNt(t)}catch{return g2}}function q7(t){var e=UNt(t.slice(5,-1));return e===g2?"":e}var BNt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VNt=["dx","dy","angle","className","breakAll"];function hJ(){return hJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},hJ.apply(null,arguments)}function X0e(t,e){if(t==null)return{};var i,r,n=GNt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function GNt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var uDe=/[ \f\n\r\t\v\u2028\u2029]+/,hDe=t=>{var{children:e,breakAll:i,style:r}=t;try{var n=[];bc(e)||(i?n=e.toString().split(""):n=e.toString().split(uDe));var s=n.map(a=>({word:a,width:Z0e(a,r).width})),o=i?0:Z0e("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},qNt=(t,e,i,r,n)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=bi(s),u=o,p=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce((te,re)=>{var{word:ee,width:ye}=re,ne=te[te.length-1];if(ne&&(r==null||n||ne.width+ye+i<Number(r)))ne.words.push(ee),ne.width+=ye+i;else{var ue={words:[ee],width:ye};te.push(ue)}return te},[])},m=p(e),v=J=>J.reduce((Q,te)=>Q.width>te.width?Q:te);if(!c||n)return m;var w=m.length>s||v(m).width>Number(r);if(!w)return m;for(var _="",T=J=>{var Q=u.slice(0,J),te=hDe({breakAll:l,style:a,children:Q+_}).wordsWithComputedWidth,re=p(te),ee=re.length>s||v(re).width>Number(r);return[ee,re]},$=0,I=u.length-1,A=0,k;$<=I&&A<=u.length-1;){var R=Math.floor(($+I)/2),F=R-1,[B,q]=T(F),[Y]=T(R);if(!B&&!Y&&($=R+1),B&&Y&&(I=R-1),!B&&Y){k=q;break}A++}return k||m},Q0e=t=>{var e=bc(t)?[]:t.toString().split(uDe);return[{words:e}]},HNt=t=>{var{width:e,scaleToFit:i,children:r,style:n,breakAll:s,maxLines:o}=t;if((e||i)&&!eO.isSsr){var a,l,c=hDe({breakAll:s,children:r,style:n});if(c){var{wordsWithComputedWidth:u,spaceWidth:p}=c;a=u,l=p}else return Q0e(r);return qNt({breakAll:s,children:r,maxLines:o,style:n},a,l,e,i)}return Q0e(r)},ebe="#808080",Hie=U.forwardRef((t,e)=>{var{x:i=0,y:r=0,lineHeight:n="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:c=ebe}=t,u=X0e(t,BNt),p=U.useMemo(()=>HNt({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:m,dy:v,angle:w,className:_,breakAll:T}=u,$=X0e(u,VNt);if(!hy(i)||!hy(r)||p.length===0)return null;var I=i+(bi(m)?m:0),A=r+(bi(v)?v:0),k;switch(l){case"start":k=q7("calc(".concat(s,")"));break;case"middle":k=q7("calc(".concat((p.length-1)/2," * -").concat(n," + (").concat(s," / 2))"));break;default:k=q7("calc(".concat(p.length-1," * -").concat(n,")"));break}var R=[];if(o){var F=p[0].width,{width:B}=u;R.push("scale(".concat(bi(B)?B/F:1,")"))}return w&&R.push("rotate(".concat(w,", ").concat(I,", ").concat(A,")")),R.length&&($.transform=R.join(" ")),U.createElement("text",hJ({},Na($,!0),{ref:e,x:I,y:A,className:vs("recharts-text",_),textAnchor:a,fill:c.includes("url")?ebe:c}),p.map((q,Y)=>{var J=q.words.join(T?"":" ");return U.createElement("tspan",{x:I,dy:Y===0?k:n,key:"".concat(J,"-").concat(Y)},J)}))});Hie.displayName="Text";var WNt=["labelRef"];function ZNt(t,e){if(t==null)return{};var i,r,n=YNt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function YNt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}function tbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function cs(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?tbe(Object(i),!0).forEach(function(r){KNt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function KNt(t,e,i){return(e=JNt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function JNt(t){var e=XNt(t,"string");return typeof e=="symbol"?e:e+""}function XNt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fz(){return Fz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Fz.apply(null,arguments)}var QNt=U.createContext(null),eDt=()=>{var t=U.useContext(QNt),e=Fte();return t||e},tDt=U.createContext(null),iDt=()=>{var t=U.useContext(tDt),e=Ei(aNe);return t||e},rDt=t=>{var{value:e,formatter:i}=t,r=bc(t.children)?e:t.children;return typeof i=="function"?i(r):r},nDt=t=>t!=null&&typeof t=="function",sDt=(t,e)=>{var i=hl(e-t),r=Math.min(Math.abs(e-t),360);return i*r},oDt=(t,e,i,r,n)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:p,endAngle:m,clockWise:v}=n,w=(c+u)/2,_=sDt(p,m),T=_>=0?1:-1,$,I;switch(e){case"insideStart":$=p+T*s,I=v;break;case"insideEnd":$=m-T*s,I=!v;break;case"end":$=m+T*s,I=v;break;default:throw new Error("Unsupported position ".concat(e))}I=_<=0?I:!I;var A=ms(a,l,w,$),k=ms(a,l,w,$+(I?1:-1)*359),R="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(I?0:1,`,
    `).concat(k.x,",").concat(k.y),F=bc(t.id)?AP("recharts-radial-line-"):t.id;return U.createElement("text",Fz({},r,{dominantBaseline:"central",className:vs("recharts-radial-bar-label",o)}),U.createElement("defs",null,U.createElement("path",{id:F,d:R})),U.createElement("textPath",{xlinkHref:"#".concat(F)},i))},aDt=(t,e,i)=>{var{cx:r,cy:n,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(i==="outside"){var{x:u,y:p}=ms(r,n,o+e,c);return{x:u,y:p,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:r,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:r,y:n,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:r,y:n,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:v,y:w}=ms(r,n,m,c);return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},dDe=t=>"cx"in t&&bi(t.cx),lDt=(t,e)=>{var{parentViewBox:i,offset:r,position:n}=t,s;i!=null&&!dDe(i)&&(s=i);var{x:o,y:a,width:l,height:c}=e,u=c>=0?1:-1,p=u*r,m=u>0?"end":"start",v=u>0?"start":"end",w=l>=0?1:-1,_=w*r,T=w>0?"end":"start",$=w>0?"start":"end";if(n==="top"){var I={x:o+l/2,y:a-u*r,textAnchor:"middle",verticalAnchor:m};return cs(cs({},I),s?{height:Math.max(a-s.y,0),width:l}:{})}if(n==="bottom"){var A={x:o+l/2,y:a+c+p,textAnchor:"middle",verticalAnchor:v};return cs(cs({},A),s?{height:Math.max(s.y+s.height-(a+c),0),width:l}:{})}if(n==="left"){var k={x:o-_,y:a+c/2,textAnchor:T,verticalAnchor:"middle"};return cs(cs({},k),s?{width:Math.max(k.x-s.x,0),height:c}:{})}if(n==="right"){var R={x:o+l+_,y:a+c/2,textAnchor:$,verticalAnchor:"middle"};return cs(cs({},R),s?{width:Math.max(s.x+s.width-R.x,0),height:c}:{})}var F=s?{width:l,height:c}:{};return n==="insideLeft"?cs({x:o+_,y:a+c/2,textAnchor:$,verticalAnchor:"middle"},F):n==="insideRight"?cs({x:o+l-_,y:a+c/2,textAnchor:T,verticalAnchor:"middle"},F):n==="insideTop"?cs({x:o+l/2,y:a+p,textAnchor:"middle",verticalAnchor:v},F):n==="insideBottom"?cs({x:o+l/2,y:a+c-p,textAnchor:"middle",verticalAnchor:m},F):n==="insideTopLeft"?cs({x:o+_,y:a+p,textAnchor:$,verticalAnchor:v},F):n==="insideTopRight"?cs({x:o+l-_,y:a+p,textAnchor:T,verticalAnchor:v},F):n==="insideBottomLeft"?cs({x:o+_,y:a+c-p,textAnchor:$,verticalAnchor:m},F):n==="insideBottomRight"?cs({x:o+l-_,y:a+c-p,textAnchor:T,verticalAnchor:m},F):n&&typeof n=="object"&&(bi(n.x)||Hw(n.x))&&(bi(n.y)||Hw(n.y))?cs({x:o+mc(n.x,l),y:a+mc(n.y,c),textAnchor:"end",verticalAnchor:"end"},F):cs({x:o+l/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},F)},cDt={offset:5};function pDe(t){var e=Ty(t,cDt),{viewBox:i,position:r,value:n,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=iDt(),p=eDt(),m=r==="center"?p:u??p,v=i||m;if(!v||bc(n)&&bc(s)&&!U.isValidElement(o)&&typeof o!="function")return null;var w=cs(cs({},e),{},{viewBox:v});if(U.isValidElement(o)){var{labelRef:_}=w,T=ZNt(w,WNt);return U.cloneElement(o,T)}var $;if(typeof o=="function"){if($=U.createElement(o,w),U.isValidElement($))return $}else $=rDt(e);var I=dDe(v),A=Na(e,!0);if(I&&(r==="insideStart"||r==="insideEnd"||r==="end"))return oDt(e,r,$,A,v);var k=I?aDt(v,e.offset,e.position):lDt(e,v);return U.createElement(Hie,Fz({ref:c,className:vs("recharts-label",a)},A,k,{breakAll:l}),$)}pDe.displayName="Label";var H7={},W7={},ibe;function uDt(){return ibe||(ibe=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return i[i.length-1]}t.last=e})(W7)),W7}var Z7={},rbe;function hDt(){return rbe||(rbe=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return Array.isArray(i)?i:Array.from(i)}t.toArray=e})(Z7)),Z7}var nbe;function dDt(){return nbe||(nbe=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uDt(),i=hDt(),r=Ate();function n(s){if(r.isArrayLike(s))return e.last(i.toArray(s))}t.last=n})(H7)),H7}var Y7,sbe;function pDt(){return sbe||(sbe=1,Y7=dDt().last),Y7}var fDt=pDt();const mDt=Qp(fDt);var yDt=["valueAccessor"],gDt=["dataKey","clockWise","id","textBreakAll"];function zz(){return zz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},zz.apply(null,arguments)}function obe(t,e){if(t==null)return{};var i,r,n=vDt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function vDt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var bDt=t=>Array.isArray(t.value)?mDt(t.value):t.value,fDe=U.createContext(void 0);fDe.Provider;var mDe=U.createContext(void 0),wDt=mDe.Provider;function _Dt(){return U.useContext(fDe)}function xDt(){return U.useContext(mDe)}function _D(t){var{valueAccessor:e=bDt}=t,i=obe(t,yDt),{dataKey:r,clockWise:n,id:s,textBreakAll:o}=i,a=obe(i,gDt),l=_Dt(),c=xDt(),u=l||c;return!u||!u.length?null:U.createElement(m0,{className:"recharts-label-list"},u.map((p,m)=>{var v,w=bc(r)?e(p,m):ys(p&&p.payload,r),_=bc(s)?{}:{id:"".concat(s,"-").concat(m)};return U.createElement(pDe,zz({},Na(p,!0),a,_,{fill:(v=i.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:o,viewBox:p.viewBox,key:"label-".concat(m),index:m}))}))}_D.displayName="LabelList";function SDt(t){var{label:e}=t;return e?e===!0?U.createElement(_D,{key:"labelList-implicit"}):U.isValidElement(e)||nDt(e)?U.createElement(_D,{key:"labelList-implicit",content:e}):typeof e=="object"?U.createElement(_D,zz({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var yDe=t=>t.graphicalItems.polarItems,EDt=Le([ln,oO],_ie),Wie=Le([yDe,ss,EDt],xie),TDt=Le([Wie],Sie),Zie=Le([TDt,uie],Eie),$Dt=Le([Zie,ss,Wie],$ie),MDt=Le([Zie,ss,Wie],(t,e,i)=>i.length>0?t.flatMap(r=>i.flatMap(n=>{var s,o=ys(r,(s=e.dataKey)!==null&&s!==void 0?s:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:ys(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]}))),abe=()=>{},CDt=Le([ss,$Ne,abe,MDt,abe,Dr,ln],Cie),gDe=Le([ss,Dr,Zie,$Dt,sO,ln,CDt],Iie),IDt=Le([gDe,ss,h$],kie);Le([ss,gDe,IDt,ln],Lie);var ADt={radiusAxis:{},angleAxis:{}},vDe=Tc({name:"polarAxis",initialState:ADt,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:BYt,removeRadiusAxis:VYt,addAngleAxis:GYt,removeAngleAxis:qYt}=vDe.actions,PDt=vDe.reducer;function lbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function cbe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?lbe(Object(i),!0).forEach(function(r){kDt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function kDt(t,e,i){return(e=ODt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ODt(t){var e=LDt(t,"string");return typeof e=="symbol"?e:e+""}function LDt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RDt=(t,e)=>e,Yie=Le([yDe,RDt],(t,e)=>t.filter(i=>i.type==="pie").find(i=>i.id===e)),NDt=[],Kie=(t,e,i)=>(i==null?void 0:i.length)===0?NDt:i,bDe=Le([uie,Yie,Kie],(t,e,i)=>{var{chartData:r}=t;if(e!=null){var n;if((e==null?void 0:e.data)!=null&&e.data.length>0?n=e.data:n=r,(!n||!n.length)&&i!=null&&(n=i.map(s=>cbe(cbe({},e.presentationProps),s.props))),n!=null)return n}}),DDt=Le([bDe,Yie,Kie],(t,e,i)=>{if(!(t==null||e==null))return t.map((r,n)=>{var s,o=ys(r,e.nameKey,e.name),a;return i!=null&&(s=i[n])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=i[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:GRe(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),FDt=Le([bDe,Yie,Kie,ro],(t,e,i,r)=>{if(!(e==null||t==null))return z5t({offset:r,pieSettings:e,displayedData:t,cells:i})}),K7={},ube;function zDt(){return ube||(ube=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){var n;if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const s=i[Symbol.toStringTag];return s==null||!((n=Object.getOwnPropertyDescriptor(i,Symbol.toStringTag))!=null&&n.writable)?!1:i.toString()===`[object ${s}]`}let r=i;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(i)===r}t.isPlainObject=e})(K7)),K7}var J7,hbe;function jDt(){return hbe||(hbe=1,J7=zDt().isPlainObject),J7}var UDt=jDt();const BDt=Qp(UDt);function dbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function pbe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?dbe(Object(i),!0).forEach(function(r){VDt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):dbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function VDt(t,e,i){return(e=GDt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function GDt(t){var e=qDt(t,"string");return typeof e=="symbol"?e:e+""}function qDt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jz(){return jz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},jz.apply(null,arguments)}var fbe=(t,e,i,r,n)=>{var s=i-r,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+i,",").concat(e),o+="L ".concat(t+i-s/2,",").concat(e+n),o+="L ".concat(t+i-s/2-r,",").concat(e+n),o+="L ".concat(t,",").concat(e," Z"),o},HDt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WDt=t=>{var e=Ty(t,HDt),{x:i,y:r,upperWidth:n,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:p}=e,m=U.useRef(),[v,w]=U.useState(-1),_=U.useRef(n),T=U.useRef(s),$=U.useRef(o),I=U.useRef(i),A=U.useRef(r),k=jte(t,"trapezoid-");if(U.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var ee=m.current.getTotalLength();ee&&w(ee)}catch{}},[]),i!==+i||r!==+r||n!==+n||s!==+s||o!==+o||n===0&&s===0||o===0)return null;var R=vs("recharts-trapezoid",a);if(!p)return U.createElement("g",null,U.createElement("path",jz({},Na(e,!0),{className:R,d:fbe(i,r,n,s,o)})));var F=_.current,B=T.current,q=$.current,Y=I.current,J=A.current,Q="0px ".concat(v===-1?1:v,"px"),te="".concat(v,"px 0px"),re=XRe(["strokeDasharray"],c,l);return U.createElement(zte,{animationId:k,key:k,canBegin:v>0,duration:c,easing:l,isActive:p,begin:u},ee=>{var ye=Mh(F,n,ee),ne=Mh(B,s,ee),ue=Mh(q,o,ee),he=Mh(Y,i,ee),Ne=Mh(J,r,ee);m.current&&(_.current=ye,T.current=ne,$.current=ue,I.current=he,A.current=Ne);var X=ee>0?{transition:re,strokeDasharray:te}:{strokeDasharray:Q};return U.createElement("path",jz({},Na(e,!0),{className:R,d:fbe(he,Ne,ye,ne,ue),ref:m,style:pbe(pbe({},X),e.style)}))})},ZDt=["option","shapeType","propTransformer","activeClassName","isActive"];function YDt(t,e){if(t==null)return{};var i,r,n=KDt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function KDt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}function mbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Uz(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?mbe(Object(i),!0).forEach(function(r){JDt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function JDt(t,e,i){return(e=XDt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function XDt(t){var e=QDt(t,"string");return typeof e=="symbol"?e:e+""}function QDt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e5t(t,e){return Uz(Uz({},e),t)}function t5t(t,e){return t==="symbols"}function ybe(t){var{shapeType:e,elementProps:i}=t;switch(e){case"rectangle":return U.createElement(i3e,i);case"trapezoid":return U.createElement(WDt,i);case"sector":return U.createElement(s3e,i);case"symbols":if(t5t(e))return U.createElement(sRe,i);break;default:return null}}function i5t(t){return U.isValidElement(t)?t.props:t}function r5t(t){var{option:e,shapeType:i,propTransformer:r=e5t,activeClassName:n="recharts-active-shape",isActive:s}=t,o=YDt(t,ZDt),a;if(U.isValidElement(e))a=U.cloneElement(e,Uz(Uz({},o),i5t(e)));else if(typeof e=="function")a=e(o);else if(BDt(e)&&typeof e!="boolean"){var l=r(e,o);a=U.createElement(ybe,{shapeType:i,elementProps:l})}else{var c=o;a=U.createElement(ybe,{shapeType:i,elementProps:c})}return s?U.createElement(m0,{className:n},a):a}var n5t=(t,e)=>{var i=oa();return(r,n)=>s=>{t==null||t(r,n,s),i(zNe({activeIndex:String(n),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},s5t=t=>{var e=oa();return(i,r)=>n=>{t==null||t(i,r,n),e(LRt())}},o5t=(t,e)=>{var i=oa();return(r,n)=>s=>{t==null||t(r,n,s),i(RRt({activeIndex:String(n),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function a5t(t){var{fn:e,args:i}=t,r=oa(),n=s$();return U.useEffect(()=>{if(!n){var s=e(i);return r(PRt(s)),()=>{r(kRt(s))}}},[e,i,r,n]),null}var l5t=()=>{};function c5t(t){var{legendPayload:e}=t,i=oa(),r=Ei(Dr);return U.useEffect(()=>r!=="centric"&&r!=="radial"?l5t:(i(TAt(e)),()=>{i($At(e))}),[i,r,e]),null}var X7,u5t=()=>{var[t]=U.useState(()=>AP("uid-"));return t},h5t=(X7=gFe.useId)!==null&&X7!==void 0?X7:u5t;function d5t(t,e){var i=h5t();return e||(t?"".concat(t,"-").concat(i):i)}var p5t=U.createContext(void 0),f5t=t=>{var{id:e,type:i,children:r}=t,n=d5t("recharts-".concat(i),e);return U.createElement(p5t.Provider,{value:n},r(n))},m5t={cartesianItems:[],polarItems:[]},wDe=Tc({name:"graphicalItems",initialState:m5t,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:i,next:r}=e.payload,n=ty(t).cartesianItems.indexOf(i);n>-1&&(t.cartesianItems[n]=r)},removeCartesianGraphicalItem(t,e){var i=ty(t).cartesianItems.indexOf(e.payload);i>-1&&t.cartesianItems.splice(i,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var i=ty(t).polarItems.indexOf(e.payload);i>-1&&t.polarItems.splice(i,1)}}}),{addCartesianGraphicalItem:HYt,replaceCartesianGraphicalItem:WYt,removeCartesianGraphicalItem:ZYt,addPolarGraphicalItem:y5t,removePolarGraphicalItem:g5t}=wDe.actions,v5t=wDe.reducer;function b5t(t){var e=oa();return U.useEffect(()=>(e(y5t(t)),()=>{e(g5t(t))}),[e,t]),null}var w5t=["onMouseEnter","onClick","onMouseLeave"],_5t=["id"],x5t=["id"];function Jie(t,e){if(t==null)return{};var i,r,n=S5t(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function S5t(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}function gbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function tn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?gbe(Object(i),!0).forEach(function(r){E5t(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function E5t(t,e,i){return(e=T5t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function T5t(t){var e=$5t(t,"string");return typeof e=="symbol"?e:e+""}function $5t(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y0(){return y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},y0.apply(null,arguments)}function M5t(t){var e=U.useMemo(()=>jLe(t.children,BU),[t.children]),i=Ei(r=>DDt(r,t.id,e));return i==null?null:U.createElement(c5t,{legendPayload:i})}function C5t(t){var{dataKey:e,nameKey:i,sectors:r,stroke:n,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c}=t;return{dataDefinedOnItem:r.map(u=>u.tooltipPayload),positions:r.map(u=>u.tooltipPosition),settings:{stroke:n,strokeWidth:s,fill:o,dataKey:e,nameKey:i,name:GRe(a,e),hide:l,type:c,color:o,unit:""}}}var I5t=(t,e)=>t>e?"start":t<e?"end":"middle",A5t=(t,e,i)=>mc(typeof e=="function"?e(t):e,i,i*.8),P5t=(t,e,i)=>{var{top:r,left:n,width:s,height:o}=e,a=BRe(s,o),l=n+mc(t.cx,s,s/2),c=r+mc(t.cy,o,o/2),u=mc(t.innerRadius,a,0),p=A5t(i,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:p,maxRadius:m}},k5t=(t,e)=>{var i=hl(e-t),r=Math.min(Math.abs(e-t),360);return i*r};function O5t(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var L5t=(t,e)=>{if(U.isValidElement(t))return U.cloneElement(t,e);if(typeof t=="function")return t(e);var i=vs("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return U.createElement(JRe,y0({},e,{type:"linear",className:i}))},R5t=(t,e,i)=>{if(U.isValidElement(t))return U.cloneElement(t,e);var r=i;if(typeof t=="function"&&(r=t(e),U.isValidElement(r)))return r;var n=vs("recharts-pie-label-text",O5t(t));return U.createElement(Hie,y0({},e,{alignmentBaseline:"middle",className:n}),r)};function N5t(t){var{sectors:e,props:i,showLabels:r}=t,{label:n,labelLine:s,dataKey:o}=i;if(!r||!n||!e)return null;var a=pU(i),l=Na(n,!1),c=Na(s,!1),u=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,p=e.map((m,v)=>{var w=(m.startAngle+m.endAngle)/2,_=ms(m.cx,m.cy,m.outerRadius+u,w),T=tn(tn(tn(tn({},a),m),{},{stroke:"none"},l),{},{index:v,textAnchor:I5t(_.x,m.cx)},_),$=tn(tn(tn(tn({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:v,points:[ms(m.cx,m.cy,m.outerRadius,w),_],key:"line"});return U.createElement(m0,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},s&&L5t(s,$),R5t(n,T,ys(m,o)))});return U.createElement(m0,{className:"recharts-pie-labels"},p)}function D5t(t){var{sectors:e,props:i,showLabels:r}=t,{label:n}=i;return typeof n=="object"&&n!=null&&"position"in n?U.createElement(SDt,{label:n}):U.createElement(N5t,{sectors:e,props:i,showLabels:r})}function F5t(t){var{sectors:e,activeShape:i,inactiveShape:r,allOtherPieProps:n}=t,s=Ei(zP),{onMouseEnter:o,onClick:a,onMouseLeave:l}=n,c=Jie(n,w5t),u=n5t(o,n.dataKey),p=s5t(l),m=o5t(a,n.dataKey);return e==null||e.length===0?null:U.createElement(U.Fragment,null,e.map((v,w)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&e.length!==1)return null;var _=i&&String(w)===s,T=s?r:null,$=_?i:T,I=tn(tn({},v),{},{stroke:v.stroke,tabIndex:-1,[HRe]:w,[WRe]:n.dataKey});return U.createElement(m0,y0({tabIndex:-1,className:"recharts-pie-sector"},W$t(c,v,w),{onMouseEnter:u(v,w),onMouseLeave:p(v,w),onClick:m(v,w),key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(w)}),U.createElement(r5t,y0({option:$,isActive:_,shapeType:"sector"},I)))}))}function z5t(t){var e,{pieSettings:i,displayedData:r,cells:n,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:p}=i,m=Math.abs(i.minAngle),v=k5t(a,l),w=Math.abs(v),_=r.length<=1?0:(e=i.paddingAngle)!==null&&e!==void 0?e:0,T=r.filter(F=>ys(F,c,0)!==0).length,$=(w>=360?T:T-1)*_,I=w-T*m-$,A=r.reduce((F,B)=>{var q=ys(B,c,0);return F+(bi(q)?q:0)},0),k;if(A>0){var R;k=r.map((F,B)=>{var q=ys(F,c,0),Y=ys(F,u,B),J=P5t(i,s,F),Q=(bi(q)?q:0)/A,te,re=tn(tn({},F),n&&n[B]&&n[B].props);B?te=R.endAngle+hl(v)*_*(q!==0?1:0):te=a;var ee=te+hl(v)*((q!==0?m:0)+Q*I),ye=(te+ee)/2,ne=(J.innerRadius+J.outerRadius)/2,ue=[{name:Y,value:q,payload:re,dataKey:c,type:p}],he=ms(J.cx,J.cy,ne,ye);return R=tn(tn(tn(tn({},i.presentationProps),{},{percent:Q,cornerRadius:o,name:Y,tooltipPayload:ue,midAngle:ye,middleRadius:ne,tooltipPosition:he},re),J),{},{value:q,startAngle:te,endAngle:ee,payload:re,paddingAngle:hl(v)*_}),R})}return k}function j5t(t){var{showLabels:e,sectors:i,children:r}=t,n=U.useMemo(()=>!e||!i?[]:i.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[i,e]);return U.createElement(wDt,{value:e?n:void 0},r)}function U5t(t){var{props:e,previousSectorsRef:i}=t,{sectors:r,isAnimationActive:n,animationBegin:s,animationDuration:o,animationEasing:a,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:p}=e,m=jte(e,"recharts-pie-"),v=i.current,[w,_]=U.useState(!1),T=U.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),$=U.useCallback(()=>{typeof u=="function"&&u(),_(!0)},[u]);return U.createElement(j5t,{showLabels:!w,sectors:r},U.createElement(zte,{animationId:m,begin:s,duration:o,isActive:n,easing:a,onAnimationStart:$,onAnimationEnd:T,key:m},I=>{var A=[],k=r&&r[0],R=k==null?void 0:k.startAngle;return r==null||r.forEach((F,B)=>{var q=v&&v[B],Y=B>0?IP(F,"paddingAngle",0):0;if(q){var J=Mh(q.endAngle-q.startAngle,F.endAngle-F.startAngle,I),Q=tn(tn({},F),{},{startAngle:R+Y,endAngle:R+J+Y});A.push(Q),R=Q.endAngle}else{var{endAngle:te,startAngle:re}=F,ee=Mh(0,te-re,I),ye=tn(tn({},F),{},{startAngle:R+Y,endAngle:R+ee+Y});A.push(ye),R=ye.endAngle}}),i.current=A,U.createElement(m0,null,U.createElement(F5t,{sectors:A,activeShape:l,inactiveShape:c,allOtherPieProps:e}))}),U.createElement(D5t,{showLabels:!w,sectors:r,props:e}),e.children)}var B5t={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eO.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function V5t(t){var{id:e}=t,i=Jie(t,_5t),{hide:r,className:n,rootTabIndex:s}=t,o=U.useMemo(()=>jLe(t.children,BU),[t.children]),a=Ei(u=>FDt(u,e,o)),l=U.useRef(null),c=vs("recharts-pie",n);return r||a==null?(l.current=null,U.createElement(m0,{tabIndex:s,className:c})):U.createElement(U.Fragment,null,U.createElement(a5t,{fn:C5t,args:tn(tn({},t),{},{sectors:a})}),U.createElement(m0,{tabIndex:s,className:c},U.createElement(U5t,{props:tn(tn({},i),{},{sectors:a}),previousSectorsRef:l})))}function _De(t){var e=Ty(t,B5t),{id:i}=e,r=Jie(e,x5t),n=pU(r);return U.createElement(f5t,{id:i,type:"pie"},s=>U.createElement(U.Fragment,null,U.createElement(b5t,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:e.maxRadius}),U.createElement(M5t,y0({},r,{id:s})),U.createElement(V5t,y0({},r,{id:s}))))}_De.displayName="Pie";function vbe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function bbe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vbe(Object(i),!0).forEach(function(r){G5t(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vbe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function G5t(t,e,i){return(e=q5t(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function q5t(t){var e=H5t(t,"string");return typeof e=="symbol"?e:e+""}function H5t(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W5t={xAxis:{},yAxis:{},zAxis:{}},xDe=Tc({name:"cartesianAxis",initialState:W5t,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:i,width:r}=e.payload;t.yAxis[i]&&(t.yAxis[i]=bbe(bbe({},t.yAxis[i]),{},{width:r}))}}}),{addXAxis:YYt,removeXAxis:KYt,addYAxis:JYt,removeYAxis:XYt,addZAxis:QYt,removeZAxis:eKt,updateYAxisWidth:tKt}=xDe.actions,Z5t=xDe.reducer,Y5t=Le([ro],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),K5t=Le([Y5t,Sy,Ey],(t,e,i)=>{if(!(!t||e==null||i==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,i-t.top-t.bottom)}}),J5t=()=>Ei(K5t),X5t={},SDe=Tc({name:"errorBars",initialState:X5t,reducers:{addErrorBar:(t,e)=>{var{itemId:i,errorBar:r}=e.payload;t[i]||(t[i]=[]),t[i].push(r)},replaceErrorBar:(t,e)=>{var{itemId:i,prev:r,next:n}=e.payload;t[i]&&(t[i]=t[i].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?n:s))},removeErrorBar:(t,e)=>{var{itemId:i,errorBar:r}=e.payload;t[i]&&(t[i]=t[i].filter(n=>n.dataKey!==r.dataKey||n.direction!==r.direction))}}}),{addErrorBar:iKt,replaceErrorBar:rKt,removeErrorBar:nKt}=SDe.actions,Q5t=SDe.reducer,eFt=t=>{var{chartData:e}=t,i=oa(),r=s$();return U.useEffect(()=>r?()=>{}:(i(L0e(e)),()=>{i(L0e(void 0))}),[e,i,r]),null},wbe={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},EDe=Tc({name:"brush",initialState:wbe,reducers:{setBrushSettings(t,e){return e.payload==null?wbe:e.payload}}}),{setBrushSettings:sKt}=EDe.actions,tFt=EDe.reducer,iFt={dots:[],areas:[],lines:[]},TDe=Tc({name:"referenceElements",initialState:iFt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var i=ty(t).dots.findIndex(r=>r===e.payload);i!==-1&&t.dots.splice(i,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var i=ty(t).areas.findIndex(r=>r===e.payload);i!==-1&&t.areas.splice(i,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var i=ty(t).lines.findIndex(r=>r===e.payload);i!==-1&&t.lines.splice(i,1)}}}),{addDot:oKt,removeDot:aKt,addArea:lKt,removeArea:cKt,addLine:uKt,removeLine:hKt}=TDe.actions,rFt=TDe.reducer,nFt=U.createContext(void 0),sFt=t=>{var{children:e}=t,[i]=U.useState("".concat(AP("recharts"),"-clip")),r=J5t();if(r==null)return null;var{x:n,y:s,width:o,height:a}=r;return U.createElement(nFt.Provider,{value:i},U.createElement("defs",null,U.createElement("clipPath",{id:i},U.createElement("rect",{x:n,y:s,height:a,width:o}))),e)},Q7={exports:{}},eG={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _be;function oFt(){if(_be)return eG;_be=1;var t=ST();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var i=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,n=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return eG.useSyncExternalStoreWithSelector=function(l,c,u,p,m){var v=n(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=o(function(){function T(R){if(!$){if($=!0,I=R,R=p(R),m!==void 0&&w.hasValue){var F=w.value;if(m(F,R))return A=F}return A=R}if(F=A,i(I,R))return F;var B=p(R);return m!==void 0&&m(F,B)?(I=R,F):(I=R,A=B)}var $=!1,I,A,k=u===void 0?null:u;return[function(){return T(c())},k===null?void 0:function(){return T(k())}]},[c,u,p,m]);var _=r(l,v[0],v[1]);return s(function(){w.hasValue=!0,w.value=_},[_]),a(_),_},eG}var xbe;function aFt(){return xbe||(xbe=1,Q7.exports=oFt()),Q7.exports}aFt();function lFt(t){t()}function cFt(){let t=null,e=null;return{clear(){t=null,e=null},notify(){lFt(()=>{let i=t;for(;i;)i.callback(),i=i.next})},get(){const i=[];let r=t;for(;r;)i.push(r),r=r.next;return i},subscribe(i){let r=!0;const n=e={callback:i,next:null,prev:e};return n.prev?n.prev.next=n:t=n,function(){!r||t===null||(r=!1,n.next?n.next.prev=n.prev:e=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}var Sbe={notify(){},get:()=>[]};function uFt(t,e){let i,r=Sbe,n=0,s=!1;function o(_){u();const T=r.subscribe(_);let $=!1;return()=>{$||($=!0,T(),p())}}function a(){r.notify()}function l(){w.onStateChange&&w.onStateChange()}function c(){return s}function u(){n++,i||(i=t.subscribe(l),r=cFt())}function p(){n--,i&&n===0&&(i(),i=void 0,r.clear(),r=Sbe)}function m(){s||(s=!0,u())}function v(){s&&(s=!1,p())}const w={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:v,getListeners:()=>r};return w}var hFt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dFt=hFt(),pFt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fFt=pFt(),mFt=()=>dFt||fFt?U.useLayoutEffect:U.useEffect,yFt=mFt(),tG=Symbol.for("react-redux-context"),iG=typeof globalThis<"u"?globalThis:{};function gFt(){if(!U.createContext)return{};const t=iG[tG]??(iG[tG]=new Map);let e=t.get(U.createContext);return e||(e=U.createContext(null),t.set(U.createContext,e)),e}var vFt=gFt();function bFt(t){const{children:e,context:i,serverState:r,store:n}=t,s=U.useMemo(()=>{const l=uFt(n);return{store:n,subscription:l,getServerState:r?()=>r:void 0}},[n,r]),o=U.useMemo(()=>n.getState(),[n]);yFt(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==n.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=i||vFt;return U.createElement(a.Provider,{value:s},e)}var wFt=bFt,_Ft=(t,e)=>e,Xie=Le([_Ft,Dr,aNe,Rs,ZNe,My,C3t,ro],O3t),Qie=t=>{var e=t.currentTarget.getBoundingClientRect(),i=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/i),chartY:Math.round((t.clientY-e.top)/r)}},$De=Eu("mouseClick"),MDe=Xk();MDe.startListening({actionCreator:$De,effect:(t,e)=>{var i=t.payload,r=Xie(e.getState(),Qie(i));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(NRt({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var dJ=Eu("mouseMove"),CDe=Xk();CDe.startListening({actionCreator:dJ,effect:(t,e)=>{var i=t.payload,r=e.getState(),n=Die(r,r.tooltip.settings.shared),s=Xie(r,Qie(i));n==="axis"&&((s==null?void 0:s.activeIndex)!=null?e.dispatch(UNe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(jNe()))}});var Ebe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},IDe=Tc({name:"rootProps",initialState:Ebe,reducers:{updateOptions:(t,e)=>{var i;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(i=e.payload.barGap)!==null&&i!==void 0?i:Ebe.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),xFt=IDe.reducer,{updateOptions:SFt}=IDe.actions,ADe=Tc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:EFt}=ADe.actions,TFt=ADe.reducer,PDe=Eu("keyDown"),kDe=Eu("focus"),ere=Xk();ere.startListening({actionCreator:PDe,effect:(t,e)=>{var i=e.getState(),r=i.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:n}=i.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(Fie(n,p$(i))),a=My(i);if(s==="Enter"){var l=Dz(i,"axis","hover",String(n.index));e.dispatch(lJ({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:l}));return}var c=MRt(i),u=c==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,m=o+p*u;if(!(a==null||m>=a.length||m<0)){var v=Dz(i,"axis","hover",String(m));e.dispatch(lJ({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});ere.startListening({actionCreator:kDe,effect:(t,e)=>{var i=e.getState(),r=i.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:n}=i.tooltip;if(!n.active&&n.index==null){var s="0",o=Dz(i,"axis","hover",String(s));e.dispatch(lJ({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Xc=Eu("externalEvent"),ODe=Xk();ODe.startListening({actionCreator:Xc,effect:(t,e)=>{if(t.payload.handler!=null){var i=e.getState(),r={activeCoordinate:b3t(i),activeDataKey:g3t(i),activeIndex:zP(i),activeLabel:JNe(i),activeTooltipIndex:zP(i),isTooltipActive:w3t(i)};t.payload.handler(r,t.payload.reactEvent)}}});var $Ft=Le([d$],t=>t.tooltipItemPayloads),MFt=Le([$Ft,uO,(t,e,i)=>e,(t,e,i)=>i],(t,e,i,r)=>{var n=t.find(a=>a.settings.dataKey===r);if(n!=null){var{positions:s}=n;if(s!=null){var o=e(s,i);return o}}}),LDe=Eu("touchMove"),RDe=Xk();RDe.startListening({actionCreator:LDe,effect:(t,e)=>{var i=t.payload,r=e.getState(),n=Die(r,r.tooltip.settings.shared);if(n==="axis"){var s=Xie(r,Qie({clientX:i.touches[0].clientX,clientY:i.touches[0].clientY,currentTarget:i.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(UNe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(n==="item"){var o,a=i.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(HRe),u=(o=l.getAttribute(WRe))!==null&&o!==void 0?o:void 0,p=MFt(e.getState(),c,u);e.dispatch(zNe({activeDataKey:u,activeIndex:c,activeCoordinate:p}))}}});var CFt=bRe({brush:tFt,cartesianAxis:Z5t,chartData:K3t,errorBars:Q5t,graphicalItems:v5t,layout:NIt,legend:MAt,options:q3t,polarAxis:PDt,polarOptions:TFt,referenceElements:rFt,rootProps:xFt,tooltip:DRt}),IFt=function(e){return aIt({reducer:CFt,preloadedState:e,middleware:i=>i({serializableCheck:!1}).concat([MDe.middleware,CDe.middleware,ere.middleware,ODe.middleware,RDe.middleware]),devTools:eO.devToolsEnabled})};function AFt(t){var{preloadedState:e,children:i,reduxStoreName:r}=t,n=s$(),s=U.useRef(null);if(n)return i;s.current==null&&(s.current=IFt(e));var o=kte;return U.createElement(wFt,{context:o,store:s.current},i)}function PFt(t){var{layout:e,width:i,height:r,margin:n}=t,s=oa(),o=s$();return U.useEffect(()=>{o||(s(OIt(e)),s(LIt({width:i,height:r})),s(kIt(n)))},[s,o,e,i,r,n]),null}function kFt(t){var e=oa();return U.useEffect(()=>{e(SFt(t))},[e,t]),null}var OFt=["children"];function LFt(t,e){if(t==null)return{};var i,r,n=RFt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function RFt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}function Bz(){return Bz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Bz.apply(null,arguments)}var NFt={width:"100%",height:"100%"},DFt=U.forwardRef((t,e)=>{var i=xAt(),r=SAt(),n=KRe();if(!_z(i)||!_z(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=n?0:void 0,typeof o.role=="string"?u=o.role:u=n?"application":void 0,U.createElement(ULe,Bz({},o,{title:a,desc:l,role:u,tabIndex:c,width:i,height:r,style:NFt,ref:e}),s)}),FFt=t=>{var{children:e}=t,i=Ei($U);if(!i)return null;var{width:r,height:n,y:s,x:o}=i;return U.createElement(ULe,{width:r,height:n,x:o,y:s},e)},Tbe=U.forwardRef((t,e)=>{var{children:i}=t,r=LFt(t,OFt),n=s$();return n?U.createElement(FFt,null,i):U.createElement(DFt,Bz({ref:e},r),i)});function zFt(){var t=oa(),[e,i]=U.useState(null),r=Ei(cAt);return U.useEffect(()=>{if(e!=null){var n=e.getBoundingClientRect(),s=n.width/e.offsetWidth;Gh(s)&&s!==r&&t(RIt(s))}},[e,t,r]),i}function $be(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function jFt(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$be(Object(i),!0).forEach(function(r){UFt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$be(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function UFt(t,e,i){return(e=BFt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function BFt(t){var e=VFt(t,"string");return typeof e=="symbol"?e:e+""}function VFt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GFt=U.forwardRef((t,e)=>{var{children:i,className:r,height:n,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:p,onMouseUp:m,onTouchEnd:v,onTouchMove:w,onTouchStart:_,style:T,width:$}=t,I=oa(),[A,k]=U.useState(null),[R,F]=U.useState(null);sNt();var B=zFt(),q=U.useCallback(ke=>{B(ke),typeof e=="function"&&e(ke),k(ke),F(ke)},[B,e,k,F]),Y=U.useCallback(ke=>{I($De(ke)),I(Xc({handler:s,reactEvent:ke}))},[I,s]),J=U.useCallback(ke=>{I(dJ(ke)),I(Xc({handler:c,reactEvent:ke}))},[I,c]),Q=U.useCallback(ke=>{I(jNe()),I(Xc({handler:u,reactEvent:ke}))},[I,u]),te=U.useCallback(ke=>{I(dJ(ke)),I(Xc({handler:p,reactEvent:ke}))},[I,p]),re=U.useCallback(()=>{I(kDe())},[I]),ee=U.useCallback(ke=>{I(PDe(ke.key))},[I]),ye=U.useCallback(ke=>{I(Xc({handler:o,reactEvent:ke}))},[I,o]),ne=U.useCallback(ke=>{I(Xc({handler:a,reactEvent:ke}))},[I,a]),ue=U.useCallback(ke=>{I(Xc({handler:l,reactEvent:ke}))},[I,l]),he=U.useCallback(ke=>{I(Xc({handler:m,reactEvent:ke}))},[I,m]),Ne=U.useCallback(ke=>{I(Xc({handler:_,reactEvent:ke}))},[I,_]),X=U.useCallback(ke=>{I(LDe(ke)),I(Xc({handler:w,reactEvent:ke}))},[I,w]),_e=U.useCallback(ke=>{I(Xc({handler:v,reactEvent:ke}))},[I,v]);return U.createElement(rDe.Provider,{value:A},U.createElement(iMt.Provider,{value:R},U.createElement("div",{className:vs("recharts-wrapper",r),style:jFt({position:"relative",cursor:"default",width:$,height:n},T),onClick:Y,onContextMenu:ye,onDoubleClick:ne,onFocus:re,onKeyDown:ee,onMouseDown:ue,onMouseEnter:J,onMouseLeave:Q,onMouseMove:te,onMouseUp:he,onTouchEnd:_e,onTouchMove:X,onTouchStart:Ne,ref:q},i)))}),qFt=["children","className","width","height","style","compact","title","desc"];function HFt(t,e){if(t==null)return{};var i,r,n=WFt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function WFt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var ZFt=U.forwardRef((t,e)=>{var{children:i,className:r,width:n,height:s,style:o,compact:a,title:l,desc:c}=t,u=HFt(t,qFt),p=pU(u);return a?U.createElement(Tbe,{otherAttributes:p,title:l,desc:c},i):U.createElement(GFt,{className:r,style:o,width:n,height:s,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},U.createElement(Tbe,{otherAttributes:p,title:l,desc:c,ref:e},U.createElement(sFt,null,i)))});function YFt(t){var e=oa();return U.useEffect(()=>{e(EFt(t))},[e,t]),null}var KFt=["width","height","layout"];function pJ(){return pJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},pJ.apply(null,arguments)}function JFt(t,e){if(t==null)return{};var i,r,n=XFt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function XFt(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;i[r]=t[r]}return i}var QFt={top:5,right:5,bottom:5,left:5},ezt={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:QFt,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},tzt=U.forwardRef(function(e,i){var r,n=Ty(e.categoricalChartProps,ezt),{width:s,height:o,layout:a}=n,l=JFt(n,KFt);if(!_z(s)||!_z(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:p,tooltipPayloadSearcher:m}=e,v={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return U.createElement(AFt,{preloadedState:{options:v},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:c},U.createElement(eFt,{chartData:n.data}),U.createElement(PFt,{width:s,height:o,layout:a,margin:n.margin}),U.createElement(kFt,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),U.createElement(YFt,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),U.createElement(ZFt,pJ({width:s,height:o},l,{ref:i})))}),izt=["item"],rzt={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},nzt=U.forwardRef((t,e)=>{var i=Ty(t,rzt);return U.createElement(tzt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:izt,tooltipPayloadSearcher:V3t,categoricalChartProps:i,ref:e})});function szt(){const[t,e]=U.useState([]),[i,r]=U.useState([]),[n,s]=U.useState(""),[o,a]=U.useState(null),[l,c]=U.useState([]),[u,p]=U.useState(0),[m,v]=U.useState(!0),[w,_]=U.useState(null);U.useEffect(()=>{(async()=>{try{const k=await fetch("https://reiseplaner-backend.onrender.com/users",{credentials:"include"}),R=await k.json();if(!k.ok)throw new Error(R.error||"Fehler beim Laden der Benutzer");e(R.data),r(R.data);const F=R.data.reduce((B,q)=>{var Y;return B+(((Y=q.travels)==null?void 0:Y.length)||0)},0);p(F)}catch(k){_(k.message)}finally{v(!1)}})()},[]),U.useEffect(()=>{const A=t.filter(k=>k.username.toLowerCase().includes(n.toLowerCase()));r(A)},[n,t]);const T=async A=>{try{const k=await fetch(`https://reiseplaner-backend.onrender.com/users/${A}/travels`,{credentials:"include"}),R=await k.json();if(!k.ok)throw new Error("Fehler beim Laden der Routen");a(R.user),c(R.travels||[])}catch(k){_(k.message)}},$=[{name:"Admins",value:t.filter(A=>A.role==="admin").length},{name:"User",value:t.filter(A=>A.role==="user").length}],I=["#074b32ff","#0e3a80ff"];return H.jsxs("div",{className:"flex h-screen bg-base-100 text-base-content",children:[H.jsxs("aside",{className:"w-64 bg-base-200 flex flex-col p-4 shadow-lg",children:[H.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[H.jsx(VB,{})," Admin Dashboard"]}),H.jsxs("nav",{className:"flex flex-col gap-2",children:[H.jsxs("a",{href:"#stats",className:"btn btn-ghost text-left",children:[H.jsx(VB,{size:18})," Statistiken"]}),H.jsxs("a",{href:"#users",className:"btn btn-ghost text-left",children:[H.jsx(yoe,{size:18})," Benutzer"]}),H.jsxs("a",{href:"#user-travels",className:"btn btn-ghost text-left",children:[H.jsx(P3,{size:18})," Routen"]}),H.jsxs(sc,{to:"/",className:"btn btn-outline btn-sm mt-auto flex items-center gap-2",children:[H.jsx(nje,{size:16})," Zurck"]})]})]}),H.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[m&&H.jsx("div",{className:"flex justify-center items-center h-full",children:H.jsx("span",{className:"loading loading-spinner text-primary"})}),w&&H.jsx("div",{className:"alert alert-error",children:w}),!m&&!w&&H.jsxs(H.Fragment,{children:[H.jsxs("section",{id:"stats",className:"mb-10",children:[H.jsxs("h3",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[H.jsx(VB,{})," Statistiken"]}),H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[H.jsxs("div",{className:"card bg-base-200 shadow p-6",children:[H.jsx("h4",{className:"text-lg font-semibold",children:"Benutzer"}),H.jsx("p",{className:"text-3xl font-bold",children:t.length})]}),H.jsxs("div",{className:"card bg-base-200 shadow p-6",children:[H.jsx("h4",{className:"text-lg font-semibold",children:"Reiserouten"}),H.jsx("p",{className:"text-3xl font-bold",children:u})]}),H.jsxs("div",{className:"card bg-base-200 shadow p-6 flex flex-col items-center",children:[H.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Rollenverteilung"}),H.jsx(SNt,{width:"100%",height:200,children:H.jsxs(nzt,{children:[H.jsx(_De,{data:$,dataKey:"value",outerRadius:80,children:$.map((A,k)=>H.jsx(BU,{fill:I[k%I.length]},`cell-${k}`))}),H.jsx(pNt,{})]})})]})]})]}),H.jsxs("section",{id:"users",className:"mb-10",children:[H.jsxs("div",{className:"flex justify-between items-center mb-4",children:[H.jsxs("h3",{className:"text-2xl font-semibold flex items-center gap-2",children:[H.jsx(yoe,{})," Benutzerverwaltung"]}),H.jsx("input",{type:"text",placeholder:"Benutzer suchen...",className:"input input-bordered input-sm w-full max-w-xs",value:n,onChange:A=>s(A.target.value)})]}),H.jsx("div",{className:"overflow-x-auto rounded-lg",children:H.jsxs("table",{className:"table table-sm bg-base-200 shadow text-sm min-w-[600px]",children:[H.jsx("thead",{children:H.jsxs("tr",{className:"bg-base-300",children:[H.jsx("th",{children:""}),H.jsx("th",{children:"Username"}),H.jsx("th",{children:"Rolle"}),H.jsx("th",{children:"Aktionen"})]})}),H.jsx("tbody",{children:i.map((A,k)=>H.jsxs("tr",{className:"hover:bg-base-300",children:[H.jsx("td",{children:k+1}),H.jsx("td",{children:A.username}),H.jsx("td",{children:A.role}),H.jsxs("td",{className:"flex gap-2 flex-wrap",children:[H.jsxs("button",{className:"btn btn-xs btn-outline",onClick:async()=>{try{(await fetch(`https://reiseplaner-backend.onrender.com/users/${A._id}/role`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:A.role==="admin"?"user":"admin"})})).ok&&e(F=>F.map(B=>B._id===A._id?{...B,role:B.role==="admin"?"user":"admin"}:B))}catch(R){console.error(R)}},children:[H.jsx(dje,{size:14})," Rolle"]}),H.jsxs("button",{className:"btn btn-xs btn-error",onClick:async()=>{if(confirm(`Benutzer ${A.username} wirklich lschen?`))try{(await fetch(`https://reiseplaner-backend.onrender.com/users/${A._id}`,{method:"DELETE",credentials:"include"})).ok&&e(F=>F.filter(B=>B._id!==A._id))}catch(R){console.error(R)}},children:[H.jsx(uje,{size:14})," Lschen"]}),H.jsxs("button",{className:"btn btn-xs btn-info",onClick:()=>T(A._id),children:[H.jsx(P3,{size:14})," Routen"]})]})]},A._id))})]})})]}),o&&H.jsxs("section",{id:"user-travels",children:[H.jsxs("div",{className:"flex justify-between items-center mb-2",children:[H.jsxs("h3",{className:"text-2xl font-semibold flex items-center gap-2",children:[H.jsx(P3,{})," Routen von ",o.username]}),H.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>a(null),children:"Ausblenden"})]}),H.jsx("div",{className:"overflow-x-auto rounded-lg",children:H.jsxs("table",{className:"table table-sm bg-base-200 shadow text-sm min-w-[600px]",children:[H.jsx("thead",{children:H.jsxs("tr",{className:"bg-base-300",children:[H.jsx("th",{children:""}),H.jsx("th",{children:"Startdatum"}),H.jsx("th",{children:"Enddatum"}),H.jsx("th",{children:"Punkte"})]})}),H.jsx("tbody",{children:l.map((A,k)=>{var R;return H.jsxs("tr",{className:"hover:bg-base-300",children:[H.jsx("td",{children:k+1}),H.jsx("td",{children:A.startDate||"-"}),H.jsx("td",{children:A.endDate||"-"}),H.jsx("td",{children:((R=A.points)==null?void 0:R.map((F,B)=>H.jsx("div",{children:F.city&&F.country?`${F.city}, ${F.country}`:F.name||`Punkt ${B+1}`},B)))||"-"})]},A._id)})})]})})]})]})]})]})}function ozt({onCitySelect:t}){var T;const[e,i]=U.useState(null),[r,n]=U.useState(null),{photos:s,setPhotos:o,unsplash:a,setUnsplash:l}=M0(),c=mj(),p=((T=yy().state)==null?void 0:T.points)||[],m=async $=>{try{if(!a[$]||a[$].length===0){const I=await $$t($,20);l(A=>({...A,[$]:I}))}}catch(I){console.error("Fehler beim Laden von Unsplash:",I)}},v=async $=>{await m($),o(I=>({...I,[$]:I[$]||[]})),i($)},w=($,I)=>{o(A=>{const k=A[$]||[];return{...A,[$]:k.includes(I)?k.filter(R=>R!==I):[...k,I]}})},_=()=>{c("/travelstepperpage",{state:{fromPhotoLibrary:!0}})};return H.jsxs("div",{className:"bg-gray-900 text-white p-6",children:[H.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col gap-8",children:[H.jsx("h2",{className:"text-3xl font-bold text-center",children:"Allgemeine Informationen ber die Stadt "}),p.map(($,I)=>H.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 shadow-sm bg-gray-800 flex flex-col gap-4",children:[H.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 items-end",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block mb-1 text-gray-300",children:"Stadt"}),H.jsx("input",{type:"text",value:$.city,className:"input input-bordered w-full bg-gray-700 text-white",disabled:!0})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block mb-1 text-gray-300",children:"Land"}),H.jsx("input",{type:"text",value:$.country,className:"input input-bordered w-full bg-gray-700 text-white",disabled:!0})]}),H.jsx("button",{type:"button",className:"btn btn-accent btn-sm",onClick:()=>v($.city)&&t($.city),children:"Fotos whlen"})]}),H.jsx("div",{className:"flex flex-wrap gap-2",children:(s[$.city]||[]).map((A,k)=>H.jsx("img",{src:A,alt:`${$.city}-${k}`,className:"w-24 h-24 object-cover rounded cursor-pointer border border-gray-600",onClick:()=>n(A)},`${$.city}-${k}`))})]},I)),H.jsx("button",{className:"btn btn-block mt-6 w-fit mx-auto",onClick:_,children:"Zurck zur Erstellung einer Reise"})]}),e&&H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80",children:H.jsxs("div",{className:"bg-gray-800 text-white p-6 rounded-lg shadow-xl w-11/12 max-w-3xl relative",children:[H.jsx("button",{className:"absolute top-2 right-2 text-gray-300 hover:text-white text-xl",onClick:()=>i(null),children:""}),H.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Fotos fr ",e," auswhlen"]}),H.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto",children:(a[e]||[]).map(($,I)=>{var A,k;return H.jsxs("label",{className:"relative cursor-pointer block",children:[H.jsx("input",{type:"checkbox",className:"absolute top-2 left-2 z-10 accent-blue-500",checked:((A=s[e])==null?void 0:A.includes($))||!1,onChange:()=>w(e,$)}),H.jsx("img",{src:$,alt:`${e}-${I}`,className:`rounded shadow-sm object-cover w-full h-40 transition-transform ${(k=s[e])!=null&&k.includes($)?"ring-4 ring-blue-500 scale-105":""}`})]},I)})})]})}),r&&H.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black bg-opacity-90",children:H.jsxs("div",{className:"relative p-4",children:[H.jsx("button",{className:"absolute top-4 right-4 text-white text-xl font-bold z-[1001]",onClick:()=>n(null),children:""}),H.jsx("img",{src:r,alt:"Full",className:"max-h-[90vh] max-w-[90vw] rounded shadow-lg mx-auto"})]})})]})}function tre(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var v1=tre();function NDe(t){v1=t}var MA={exec:()=>null};function Zi(t,e=""){let i=typeof t=="string"?t:t.source,r={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Pa.caret,"$1"),i=i.replace(n,o),r},getRegex:()=>new RegExp(i,e)};return r}var Pa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},azt=/^(?:[ \t]*(?:\n|$))+/,lzt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,czt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,dO=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,uzt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ire=/(?:[*+-]|\d{1,9}[.)])/,DDe=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,FDe=Zi(DDe).replace(/bull/g,ire).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),hzt=Zi(DDe).replace(/bull/g,ire).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),rre=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dzt=/^[^\n]+/,nre=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,pzt=Zi(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",nre).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),fzt=Zi(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ire).getRegex(),VU="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",sre=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,mzt=Zi("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",sre).replace("tag",VU).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zDe=Zi(rre).replace("hr",dO).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VU).getRegex(),yzt=Zi(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",zDe).getRegex(),ore={blockquote:yzt,code:lzt,def:pzt,fences:czt,heading:uzt,hr:dO,html:mzt,lheading:FDe,list:fzt,newline:azt,paragraph:zDe,table:MA,text:dzt},Mbe=Zi("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",dO).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VU).getRegex(),gzt={...ore,lheading:hzt,table:Mbe,paragraph:Zi(rre).replace("hr",dO).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Mbe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VU).getRegex()},vzt={...ore,html:Zi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",sre).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:MA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Zi(rre).replace("hr",dO).replace("heading",` *#{1,6} *[^
]`).replace("lheading",FDe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bzt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wzt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,jDe=/^( {2,}|\\)\n(?!\s*$)/,_zt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,GU=/[\p{P}\p{S}]/u,are=/[\s\p{P}\p{S}]/u,UDe=/[^\s\p{P}\p{S}]/u,xzt=Zi(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,are).getRegex(),BDe=/(?!~)[\p{P}\p{S}]/u,Szt=/(?!~)[\s\p{P}\p{S}]/u,Ezt=/(?:[^\s\p{P}\p{S}]|~)/u,Tzt=/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,VDe=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$zt=Zi(VDe,"u").replace(/punct/g,GU).getRegex(),Mzt=Zi(VDe,"u").replace(/punct/g,BDe).getRegex(),GDe="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Czt=Zi(GDe,"gu").replace(/notPunctSpace/g,UDe).replace(/punctSpace/g,are).replace(/punct/g,GU).getRegex(),Izt=Zi(GDe,"gu").replace(/notPunctSpace/g,Ezt).replace(/punctSpace/g,Szt).replace(/punct/g,BDe).getRegex(),Azt=Zi("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,UDe).replace(/punctSpace/g,are).replace(/punct/g,GU).getRegex(),Pzt=Zi(/\\(punct)/,"gu").replace(/punct/g,GU).getRegex(),kzt=Zi(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ozt=Zi(sre).replace("(?:-->|$)","-->").getRegex(),Lzt=Zi("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ozt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Vz=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Rzt=Zi(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Vz).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qDe=Zi(/^!?\[(label)\]\[(ref)\]/).replace("label",Vz).replace("ref",nre).getRegex(),HDe=Zi(/^!?\[(ref)\](?:\[\])?/).replace("ref",nre).getRegex(),Nzt=Zi("reflink|nolink(?!\\()","g").replace("reflink",qDe).replace("nolink",HDe).getRegex(),Cbe=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,lre={_backpedal:MA,anyPunctuation:Pzt,autolink:kzt,blockSkip:Tzt,br:jDe,code:wzt,del:MA,emStrongLDelim:$zt,emStrongRDelimAst:Czt,emStrongRDelimUnd:Azt,escape:bzt,link:Rzt,nolink:HDe,punctuation:xzt,reflink:qDe,reflinkSearch:Nzt,tag:Lzt,text:_zt,url:MA},Dzt={...lre,link:Zi(/^!?\[(label)\]\((.*?)\)/).replace("label",Vz).getRegex(),reflink:Zi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Vz).getRegex()},fJ={...lre,emStrongRDelimAst:Izt,emStrongLDelim:Mzt,url:Zi(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Cbe).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Zi(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Cbe).getRegex()},Fzt={...fJ,br:Zi(jDe).replace("{2,}","*").getRegex(),text:Zi(fJ.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},M3={normal:ore,gfm:gzt,pedantic:vzt},mC={normal:lre,gfm:fJ,breaks:Fzt,pedantic:Dzt},zzt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ibe=t=>zzt[t];function Id(t,e){if(e){if(Pa.escapeTest.test(t))return t.replace(Pa.escapeReplace,Ibe)}else if(Pa.escapeTestNoEncode.test(t))return t.replace(Pa.escapeReplaceNoEncode,Ibe);return t}function Abe(t){try{t=encodeURI(t).replace(Pa.percentDecode,"%")}catch{return null}return t}function Pbe(t,e){var s;let i=t.replace(Pa.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=i.split(Pa.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(Pa.slashPipe,"|");return r}function yC(t,e,i){let r=t.length;if(r===0)return"";let n=0;for(;n<r&&t.charAt(r-n-1)===e;)n++;return t.slice(0,r-n)}function jzt(t,e){if(t.indexOf(e[1])===-1)return-1;let i=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return i>0?-2:-1}function kbe(t,e,i,r,n){let s=e.href,o=e.title||null,a=t[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:i,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function Uzt(t,e,i){let r=t.match(i.other.indentCodeCompensation);if(r===null)return e;let n=r[1];return e.split(`
`).map(s=>{let o=s.match(i.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=n.length?s.slice(n.length):s}).join(`
`)}var Gz=class{constructor(t){Fi(this,"options");Fi(this,"rules");Fi(this,"lexer");this.options=t||v1}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let i=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:yC(i,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let i=e[0],r=Uzt(i,e[3]||"",this.rules);return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(this.rules.other.endingHash.test(i)){let r=yC(i,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(i=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:yC(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let i=yC(e[0],`
`).split(`
`),r="",n="",s=[];for(;i.length>0;){let o=!1,a=[],l;for(l=0;l<i.length;l++)if(this.rules.other.blockquoteStart.test(i[l]))a.push(i[l]),o=!0;else if(!o)a.push(i[l]);else break;i=i.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,n=n?`${n}
${u}`:u;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=p,i.length===0)break;let m=s.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){let v=m,w=v.raw+`
`+i.join(`
`),_=this.blockquote(w);s[s.length-1]=_,r=r.substring(0,r.length-v.raw.length)+_.raw,n=n.substring(0,n.length-v.text.length)+_.text;break}else if((m==null?void 0:m.type)==="list"){let v=m,w=v.raw+`
`+i.join(`
`),_=this.list(w);s[s.length-1]=_,r=r.substring(0,r.length-m.raw.length)+_.raw,n=n.substring(0,n.length-v.raw.length)+_.raw,i=w.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim(),r=i.length>1,n={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");let s=this.rules.other.listItemRegex(i),o=!1;for(;t;){let l=!1,c="",u="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,$=>" ".repeat(3*$.length)),m=t.split(`
`,1)[0],v=!p.trim(),w=0;if(this.options.pedantic?(w=2,u=p.trimStart()):v?w=e[1].length+1:(w=e[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,u=p.slice(w),w+=e[1].length),v&&this.rules.other.blankLine.test(m)&&(c+=m+`
`,t=t.substring(m.length+1),l=!0),!l){let $=this.rules.other.nextBulletRegex(w),I=this.rules.other.hrRegex(w),A=this.rules.other.fencesBeginRegex(w),k=this.rules.other.headingBeginRegex(w),R=this.rules.other.htmlBeginRegex(w);for(;t;){let F=t.split(`
`,1)[0],B;if(m=F,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),B=m):B=m.replace(this.rules.other.tabCharGlobal,"    "),A.test(m)||k.test(m)||R.test(m)||$.test(m)||I.test(m))break;if(B.search(this.rules.other.nonSpaceChar)>=w||!m.trim())u+=`
`+B.slice(w);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(p)||k.test(p)||I.test(p))break;u+=`
`+m}!v&&!m.trim()&&(v=!0),c+=F+`
`,t=t.substring(F.length+1),p=B.slice(w)}}n.loose||(o?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let _=null,T;this.options.gfm&&(_=this.rules.other.listIsTask.exec(u),_&&(T=_[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!_,checked:T,loose:!1,text:u,tokens:[]}),n.raw+=c}let a=n.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){let c=n.items[l].tokens.filter(p=>p.type==="space"),u=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));n.loose=u}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let i=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:r,title:n}}}table(t){var o;let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let i=Pbe(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<i.length;a++)s.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:s.align[a]});for(let a of n)s.rows.push(Pbe(a,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let i=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let s=yC(i.slice(0,-1),"\\");if((i.length-s.length)%2===0)return}else{let s=jzt(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],n="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],n=s[3])}else n=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?r=r.slice(1):r=r.slice(1,-1)),kbe(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let r=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[r.toLowerCase()];if(!n){let s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return kbe(i,n,i[0],this.lexer,this.rules)}}emStrong(t,e,i=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!i||this.rules.inline.punctuation.exec(i))){let n=[...r[0]].length-1,s,o,a=n,l=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+n);(r=c.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){a+=o;continue}else if((r[5]||r[6])&&n%3&&!((n+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let u=[...r[0]][0].length,p=t.slice(0,n+r.index+u+o);if(Math.min(n,o)%2){let v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(i),n=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return r&&n&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:e[0],text:i}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let i,r;return e[2]==="@"?(i=e[1],r="mailto:"+i):(i=e[1],r=i),{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let e;if(e=this.rules.inline.url.exec(t)){let r,n;if(e[2]==="@")r=e[0],n="mailto:"+r;else{let s;do s=e[0],e[0]=((i=this.rules.inline._backpedal.exec(e[0]))==null?void 0:i[0])??"";while(s!==e[0]);r=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let i=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:i}}}},Eh=class mJ{constructor(e){Fi(this,"tokens");Fi(this,"options");Fi(this,"state");Fi(this,"tokenizer");Fi(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||v1,this.options.tokenizer=this.options.tokenizer||new Gz,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let i={other:Pa,block:M3.normal,inline:mC.normal};this.options.pedantic?(i.block=M3.pedantic,i.inline=mC.pedantic):this.options.gfm&&(i.block=M3.gfm,this.options.breaks?i.inline=mC.breaks:i.inline=mC.gfm),this.tokenizer.rules=i}static get rules(){return{block:M3,inline:mC}}static lex(e,i){return new mJ(i).lex(e)}static lexInline(e,i){return new mJ(i).inlineTokens(e)}lex(e){e=e.replace(Pa.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){let r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,i=[],r=!1){var n,s,o;for(this.options.pedantic&&(e=e.replace(Pa.tabCharGlobal,"    ").replace(Pa.spaceLine,""));e;){let a;if((s=(n=this.options.extensions)==null?void 0:n.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,i))?(e=e.substring(a.raw.length),i.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let c=i.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:i.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let c=i.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):i.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let c=i.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},i.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),i.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,u=e.slice(1),p;this.options.extensions.startBlock.forEach(m=>{p=m.call({lexer:this},u),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=i.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):i.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let c=i.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):i.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,i}inline(e,i=[]){return this.inlineQueue.push({src:e,tokens:i}),i}inlineTokens(e,i=[]){var a,l,c,u,p;let r=e,n=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)m.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((l=(a=this.options.hooks)==null?void 0:a.emStrongMask)==null?void 0:l.call({lexer:this},r))??r;let s=!1,o="";for(;e;){s||(o=""),s=!1;let m;if((u=(c=this.options.extensions)==null?void 0:c.inline)!=null&&u.some(w=>(m=w.call({lexer:this},e,i))?(e=e.substring(m.raw.length),i.push(m),!0):!1))continue;if(m=this.tokenizer.escape(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.tag(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.link(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(m.raw.length);let w=i.at(-1);m.type==="text"&&(w==null?void 0:w.type)==="text"?(w.raw+=m.raw,w.text+=m.text):i.push(m);continue}if(m=this.tokenizer.emStrong(e,r,o)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.codespan(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.br(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.del(e)){e=e.substring(m.raw.length),i.push(m);continue}if(m=this.tokenizer.autolink(e)){e=e.substring(m.raw.length),i.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(e))){e=e.substring(m.raw.length),i.push(m);continue}let v=e;if((p=this.options.extensions)!=null&&p.startInline){let w=1/0,_=e.slice(1),T;this.options.extensions.startInline.forEach($=>{T=$.call({lexer:this},_),typeof T=="number"&&T>=0&&(w=Math.min(w,T))}),w<1/0&&w>=0&&(v=e.substring(0,w+1))}if(m=this.tokenizer.inlineText(v)){e=e.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(o=m.raw.slice(-1)),s=!0;let w=i.at(-1);(w==null?void 0:w.type)==="text"?(w.raw+=m.raw,w.text+=m.text):i.push(m);continue}if(e){let w="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(w);break}else throw new Error(w)}}return i}},qz=class{constructor(t){Fi(this,"options");Fi(this,"parser");this.options=t||v1}space(t){return""}code({text:t,lang:e,escaped:i}){var s;let r=(s=(e||"").match(Pa.notSpaceStart))==null?void 0:s[0],n=t.replace(Pa.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Id(r)+'">'+(i?n:Id(n,!0))+`</code></pre>
`:"<pre><code>"+(i?n:Id(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,i=t.start,r="";for(let o=0;o<t.items.length;o++){let a=t.items[o];r+=this.listitem(a)}let n=e?"ol":"ul",s=e&&i!==1?' start="'+i+'"':"";return"<"+n+s+`>
`+r+"</"+n+`>
`}listitem(t){var i;let e="";if(t.task){let r=this.checkbox({checked:!!t.checked});t.loose?((i=t.tokens[0])==null?void 0:i.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Id(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",i="";for(let n=0;n<t.header.length;n++)i+=this.tablecell(t.header[n]);e+=this.tablerow({text:i});let r="";for(let n=0;n<t.rows.length;n++){let s=t.rows[n];i="";for(let o=0;o<s.length;o++)i+=this.tablecell(s[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Id(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){let r=this.parser.parseInline(i),n=Abe(t);if(n===null)return r;t=n;let s='<a href="'+t+'"';return e&&(s+=' title="'+Id(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:i,tokens:r}){r&&(i=this.parser.parseInline(r,this.parser.textRenderer));let n=Abe(t);if(n===null)return Id(i);t=n;let s=`<img src="${t}" alt="${i}"`;return e&&(s+=` title="${Id(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Id(t.text)}},cre=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Th=class yJ{constructor(e){Fi(this,"options");Fi(this,"renderer");Fi(this,"textRenderer");this.options=e||v1,this.options.renderer=this.options.renderer||new qz,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new cre}static parse(e,i){return new yJ(i).parse(e)}static parseInline(e,i){return new yJ(i).parseInline(e)}parse(e,i=!0){var n,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&s[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);i?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,i=this.renderer){var n,s;let r="";for(let o=0;o<e.length;o++){let a=e[o];if((s=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=i.text(l);break}case"html":{r+=i.html(l);break}case"link":{r+=i.link(l);break}case"image":{r+=i.image(l);break}case"strong":{r+=i.strong(l);break}case"em":{r+=i.em(l);break}case"codespan":{r+=i.codespan(l);break}case"br":{r+=i.br(l);break}case"del":{r+=i.del(l);break}case"text":{r+=i.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},C3,LI=(C3=class{constructor(t){Fi(this,"options");Fi(this,"block");this.options=t||v1}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Eh.lex:Eh.lexInline}provideParser(){return this.block?Th.parse:Th.parseInline}},Fi(C3,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Fi(C3,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),C3),WDe=class{constructor(...t){Fi(this,"defaults",tre());Fi(this,"options",this.setOptions);Fi(this,"parse",this.parseMarkdown(!0));Fi(this,"parseInline",this.parseMarkdown(!1));Fi(this,"Parser",Th);Fi(this,"Renderer",qz);Fi(this,"TextRenderer",cre);Fi(this,"Lexer",Eh);Fi(this,"Tokenizer",Gz);Fi(this,"Hooks",LI);this.use(...t)}walkTokens(t,e){var r,n;let i=[];for(let s of t)switch(i=i.concat(e.call(this,s)),s.type){case"table":{let o=s;for(let a of o.header)i=i.concat(this.walkTokens(a.tokens,e));for(let a of o.rows)for(let l of a)i=i.concat(this.walkTokens(l.tokens,e));break}case"list":{let o=s;i=i.concat(this.walkTokens(o.items,e));break}default:{let o=s;(n=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&n[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{let l=o[a].flat(1/0);i=i.concat(this.walkTokens(l,e))}):o.tokens&&(i=i.concat(this.walkTokens(o.tokens,e)))}}return i}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{let r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let s=e.renderers[n.name];s?e.renderers[n.name]=function(...o){let a=n.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[n.level];s?s.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),r.extensions=e),i.renderer){let n=this.defaults.renderer||new qz(this.defaults);for(let s in i.renderer){if(!(s in n))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=i.renderer[o],l=n[o];n[o]=(...c)=>{let u=a.apply(n,c);return u===!1&&(u=l.apply(n,c)),u||""}}r.renderer=n}if(i.tokenizer){let n=this.defaults.tokenizer||new Gz(this.defaults);for(let s in i.tokenizer){if(!(s in n))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=i.tokenizer[o],l=n[o];n[o]=(...c)=>{let u=a.apply(n,c);return u===!1&&(u=l.apply(n,c)),u}}r.tokenizer=n}if(i.hooks){let n=this.defaults.hooks||new LI;for(let s in i.hooks){if(!(s in n))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=i.hooks[o],l=n[o];LI.passThroughHooks.has(s)?n[o]=c=>{if(this.defaults.async&&LI.passThroughHooksRespectAsync.has(s))return(async()=>{let p=await a.call(n,c);return l.call(n,p)})();let u=a.call(n,c);return l.call(n,u)}:n[o]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(n,c);return p===!1&&(p=await l.apply(n,c)),p})();let u=a.apply(n,c);return u===!1&&(u=l.apply(n,c)),u}}r.hooks=n}if(i.walkTokens){let n=this.defaults.walkTokens,s=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),n&&(a=a.concat(n.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Eh.lex(t,e??this.defaults)}parser(t,e){return Th.parse(t,e??this.defaults)}parseMarkdown(t){return(e,i)=>{let r={...i},n={...this.defaults,...r},s=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=t),n.async)return(async()=>{let o=n.hooks?await n.hooks.preprocess(e):e,a=await(n.hooks?await n.hooks.provideLexer():t?Eh.lex:Eh.lexInline)(o,n),l=n.hooks?await n.hooks.processAllTokens(a):a;n.walkTokens&&await Promise.all(this.walkTokens(l,n.walkTokens));let c=await(n.hooks?await n.hooks.provideParser():t?Th.parse:Th.parseInline)(l,n);return n.hooks?await n.hooks.postprocess(c):c})().catch(s);try{n.hooks&&(e=n.hooks.preprocess(e));let o=(n.hooks?n.hooks.provideLexer():t?Eh.lex:Eh.lexInline)(e,n);n.hooks&&(o=n.hooks.processAllTokens(o)),n.walkTokens&&this.walkTokens(o,n.walkTokens);let a=(n.hooks?n.hooks.provideParser():t?Th.parse:Th.parseInline)(o,n);return n.hooks&&(a=n.hooks.postprocess(a)),a}catch(o){return s(o)}}}onError(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+Id(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(i);throw i}}},Q_=new WDe;function yr(t,e){return Q_.parse(t,e)}yr.options=yr.setOptions=function(t){return Q_.setOptions(t),yr.defaults=Q_.defaults,NDe(yr.defaults),yr};yr.getDefaults=tre;yr.defaults=v1;yr.use=function(...t){return Q_.use(...t),yr.defaults=Q_.defaults,NDe(yr.defaults),yr};yr.walkTokens=function(t,e){return Q_.walkTokens(t,e)};yr.parseInline=Q_.parseInline;yr.Parser=Th;yr.parser=Th.parse;yr.Renderer=qz;yr.TextRenderer=cre;yr.Lexer=Eh;yr.lexer=Eh.lex;yr.Tokenizer=Gz;yr.Hooks=LI;yr.parse=yr;yr.options;yr.setOptions;yr.use;yr.walkTokens;yr.parseInline;Th.parse;Eh.lex;const Bzt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ZDe=/&(?:amp|lt|gt|quot|#(?:0+)?39);/g,Vzt=RegExp(ZDe.source),Obe=(t="")=>Vzt.test(t)?t.replace(ZDe,e=>Bzt[e]||"'"):t,Lbe=(t,e)=>{if(!e)return t;try{return new URL(t,e).href}catch{return t}};var Gzt=class{constructor(t){Fi(this,"renderer");this.renderer=t.renderer}parse(t){this.renderer.elIdList.push(0);const e=t.map(i=>{switch(i.type){case"space":return null;case"heading":{const r=i.depth;return this.renderer.heading(this.parseInline(i.tokens),r)}case"paragraph":return this.renderer.paragraph(this.parseInline(i.tokens));case"text":{const r=i;return r.tokens?this.parseInline(r.tokens):i.text}case"blockquote":{const r=i,n=this.parse(r.tokens);return this.renderer.blockquote(n)}case"list":{const r=i;this.renderer.elIdList.push(0);const n=r.items.map(s=>{const o=[];return s.task&&o.push(this.renderer.checkbox(s.checked??!1)),o.push(this.parse(s.tokens)),this.renderer.listItem(o)});return this.renderer.elIdList.pop(),this.renderer.list(n,i.ordered,i.ordered?i.start:void 0)}case"code":return this.renderer.code(i.text,i.lang);case"html":return this.renderer.html(i.text);case"table":{const r=i;this.renderer.elIdList.push(0);const n=r.header.map((c,u)=>this.renderer.tableCell(this.parseInline(c.tokens),{header:!0,align:i.align[u]}));this.renderer.elIdList.pop();const s=this.renderer.tableRow(n),o=this.renderer.tableHeader(s);this.renderer.elIdList.push(0);const a=r.rows.map(c=>{this.renderer.elIdList.push(0);const u=c.map((p,m)=>this.renderer.tableCell(this.parseInline(p.tokens),{header:!1,align:i.align[m]}));return this.renderer.elIdList.pop(),this.renderer.tableRow(u)});this.renderer.elIdList.pop();const l=this.renderer.tableBody(a);return this.renderer.table([o,l])}case"hr":return this.renderer.hr();default:return console.warn(`Token with "${i.type}" type was not found`),null}});return this.renderer.elIdList.pop(),e}parseInline(t=[]){this.renderer.elIdList.push(0);const e=t.map(i=>{switch(i.type){case"text":return this.renderer.text(Obe(i.text));case"strong":return this.renderer.strong(this.parseInline(i.tokens));case"em":return this.renderer.em(this.parseInline(i.tokens));case"del":return this.renderer.del(this.parseInline(i.tokens));case"codespan":return this.renderer.codespan(Obe(i.text));case"link":return this.renderer.link(i.href,this.parseInline(i.tokens));case"image":return this.renderer.image(i.href,i.text,i.title);case"html":return this.renderer.html(i.text);case"br":return this.renderer.br();case"escape":return this.renderer.text(i.text);default:return console.warn(`Token with "${i.type}" type was not found`),null}});return this.renderer.elIdList.pop(),e}},qzt=Gzt,$v,Ar,Xn,gJ,Qbe,Hzt=(Qbe=class{constructor(t={}){pt(this,Ar);Fi(this,"elIdList",[]);pt(this,$v);const{renderer:e}=t;nt(this,$v,t),e&&typeof e=="object"&&Object.entries(e).forEach(([i,r])=>{const n=i,s=r;!this[n]||n==="elementId"||n==="elIdList"||typeof s!="function"||Object.defineProperty(this,n,{value(...o){return si(this,Ar,gJ).call(this),s.apply(this,o)},writable:!0,enumerable:!0,configurable:!0})})}get elementId(){return this.elIdList.join("-")}heading(t,e){return si(this,Ar,Xn).call(this,`h${e}`,t)}paragraph(t){return si(this,Ar,Xn).call(this,"p",t)}link(t,e){const i=Lbe(t,me(this,$v).baseURL),r=me(this,$v).openLinksInNewTab?"_blank":null;return si(this,Ar,Xn).call(this,"a",e,{href:i,target:r})}image(t,e,i=null){const r=Lbe(t,me(this,$v).baseURL);return si(this,Ar,Xn).call(this,"img",null,{src:r,alt:e,title:i})}codespan(t,e=null){const i=e?`${me(this,$v).langPrefix}${e}`:null;return si(this,Ar,Xn).call(this,"code",t,{className:i})}code(t,e){return si(this,Ar,Xn).call(this,"pre",this.codespan(t,e))}blockquote(t){return si(this,Ar,Xn).call(this,"blockquote",t)}list(t,e,i){return si(this,Ar,Xn).call(this,e?"ol":"ul",t,e&&i!==1?{start:i}:{})}listItem(t){return si(this,Ar,Xn).call(this,"li",t)}checkbox(t){return si(this,Ar,Xn).call(this,"input",null,{type:"checkbox",disabled:!0,checked:t})}table(t){return si(this,Ar,Xn).call(this,"table",t)}tableHeader(t){return si(this,Ar,Xn).call(this,"thead",t)}tableBody(t){return si(this,Ar,Xn).call(this,"tbody",t)}tableRow(t){return si(this,Ar,Xn).call(this,"tr",t)}tableCell(t,e){const i=e.header?"th":"td";return si(this,Ar,Xn).call(this,i,t,{align:e.align})}strong(t){return si(this,Ar,Xn).call(this,"strong",t)}em(t){return si(this,Ar,Xn).call(this,"em",t)}del(t){return si(this,Ar,Xn).call(this,"del",t)}text(t){return t}html(t){return t}hr(){return si(this,Ar,Xn).call(this,"hr")}br(){return si(this,Ar,Xn).call(this,"br")}},$v=new WeakMap,Ar=new WeakSet,Xn=function(t,e=null,i={}){const r={key:`marked-react-${this.elementId}`,suppressHydrationWarning:!0};return si(this,Ar,gJ).call(this),U.createElement(t,{...i,...r},e)},gJ=function(){this.elIdList[this.elIdList.length-1]+=1},Qbe),Wzt=Hzt;const Zzt=t=>{if(t.value&&typeof t.value!="string")throw new TypeError(`[marked-react]: Expected value to be of type string but got ${typeof t.value}`);if(t.children&&typeof t.children!="string")throw new TypeError(`[marked-react]: Expected children to be of type string but got ${typeof t.children}`)},Yzt={isInline:!1,breaks:!1,gfm:!0,baseURL:void 0,openLinksInNewTab:!0,langPrefix:"language-",renderer:void 0},Kzt=new WDe,Jzt=t=>{Zzt(t);const e={...Yzt,...t},i=e.instance??Kzt,r={breaks:e.breaks,gfm:e.gfm,tokenizer:i.defaults.tokenizer},n=e.value??e.children??"",s=e.isInline?i.Lexer.lexInline(n,r):i.lexer(n,r),o={renderer:new Wzt({renderer:e.renderer,baseURL:e.baseURL,openLinksInNewTab:e.openLinksInNewTab,langPrefix:e.langPrefix})},a=new qzt(o),l=e.isInline?a.parseInline(s):a.parse(s);return U.createElement(U.Fragment,null,l)};var Xzt=Jzt,Qzt=Xzt;function ejt({city:t}){const[e,i]=U.useState([]),[r,n]=U.useState(""),[s,o]=U.useState(!1),a=U.useRef(null),l=()=>{var u;(u=a.current)==null||u.scrollIntoView({behavior:"smooth"})};U.useEffect(()=>{t&&i([{role:"assistant",content:`Hallo! Frag mich gerne nach Sehenswrdigkeiten in **${t}**.`}])},[t]),U.useEffect(()=>{l()},[e,s]);const c=async()=>{if(!r.trim())return;const u={role:"user",content:r};i(p=>[...p,u]),n(""),o(!0);try{const m=await(await fetch("https://reiseplaner-backend.onrender.com/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,city:t})})).json();i(v=>[...v,{role:"assistant",content:m.reply}])}catch{i(m=>[...m,{role:"assistant",content:"Fehler beim Abrufen der Antwort."}])}finally{o(!1)}};return H.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md flex flex-col gap-3",children:[H.jsxs("h3",{className:"text-lg font-bold mb-2",children:["Chatbot fr ",t]}),H.jsxs("div",{className:"h-64 overflow-y-auto bg-gray-900 p-2 rounded",children:[e.map((u,p)=>H.jsx("div",{className:`my-2 ${u.role==="user"?"text-right text-blue-400":"text-left text-green-300"}`,children:H.jsx(Qzt,{children:u.content})},p)),s&&H.jsx("p",{className:"text-gray-400 text-sm",children:"Denke nach..."}),H.jsx("div",{ref:a})]}),H.jsxs("div",{className:"flex gap-2 mt-2",children:[H.jsx("input",{className:"input input-bordered flex-1 bg-gray-700 text-white",value:r,onChange:u=>n(u.target.value),placeholder:"Frag nach Sehenswrdigkeiten..."}),H.jsx("button",{className:"btn btn-accent",onClick:c,disabled:s,children:"Senden"})]})]})}function tjt({city:t}){const[e,i]=U.useState(null),[r,n]=U.useState(!1),[s,o]=U.useState(null);return U.useEffect(()=>{if(!t)return;async function a(){var l,c,u,p,m,v,w,_,T,$,I,A,k,R,F,B,q,Y,J,Q,te,re,ee,ye,ne,ue,he,Ne,X,_e,ke;n(!0),o(null);try{const Qe=(await(await fetch(`https://de.wikipedia.org/w/api.php?action=query&titles=${encodeURIComponent(t)}&prop=pageprops&format=json&origin=*`)).json()).query.pages,Xe=Object.keys(Qe)[0],di=Qe[Xe],qt=(l=di==null?void 0:di.pageprops)==null?void 0:l.wikibase_item;if(!qt)throw new Error("Wikidata-ID nicht gefunden");const Pt=(await(await fetch(`https://www.wikidata.org/wiki/Special:EntityData/${qt}.json`)).json()).entities[qt],He=((c=Pt.labels.de)==null?void 0:c.value)||((u=Pt.labels.en)==null?void 0:u.value)||t,Ri=(_=(w=(v=(m=(p=Pt.claims.P1082)==null?void 0:p[0])==null?void 0:m.mainsnak)==null?void 0:v.datavalue)==null?void 0:w.value)!=null&&_.amount?parseInt(Pt.claims.P1082[0].mainsnak.datavalue.value.amount):"unbekannt",ci=((A=(I=($=(T=Pt.claims.P281)==null?void 0:T[0])==null?void 0:$.mainsnak)==null?void 0:I.datavalue)==null?void 0:A.value)||"unbekannt",Sn=(q=(B=(F=(R=(k=Pt.claims.P571)==null?void 0:k[0])==null?void 0:R.mainsnak)==null?void 0:F.datavalue)==null?void 0:B.value)!=null&&q.time?Pt.claims.P571[0].mainsnak.datavalue.value.time.slice(1,11):"unbekannt",En=((re=(te=(Q=(J=(Y=Pt.claims.P6)==null?void 0:Y[0])==null?void 0:J.mainsnak)==null?void 0:Q.datavalue)==null?void 0:te.value)==null?void 0:re.id)||null,_r=((he=(ue=(ne=(ye=(ee=Pt.claims.P421)==null?void 0:ee[0])==null?void 0:ye.mainsnak)==null?void 0:ne.datavalue)==null?void 0:ue.value)==null?void 0:he.id)||null,bl=((ke=(_e=(X=(Ne=Pt.claims.P856)==null?void 0:Ne[0])==null?void 0:X.mainsnak)==null?void 0:_e.datavalue)==null?void 0:ke.value)||null;i({officialName:He,population:Ri,postalCode:ci,inception:Sn,mayor:En,timezone:_r,website:bl})}catch(qe){o(qe.message)}finally{n(!1)}}a()},[t]),t?r?H.jsxs("p",{children:["Ldt Daten ber ",t,"..."]}):s?H.jsxs("p",{className:"text-red-400",children:["Fehler: ",s]}):e?H.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-lg text-gray-100",children:[H.jsx("h2",{className:"text-2xl font-semibold mb-3",children:e.officialName}),H.jsxs("ul",{className:"space-y-2",children:[H.jsxs("li",{children:[H.jsx("strong",{children:"Bevlkerung:"})," ",e.population!=="unbekannt"?e.population.toLocaleString():"unbekannt"]}),H.jsxs("li",{children:[H.jsx("strong",{children:"Gegrndet am:"})," ",e.inception]}),H.jsxs("li",{children:[H.jsx("strong",{children:"Postleitzahl:"})," ",e.postalCode]}),e.website&&H.jsxs("li",{children:[H.jsx("strong",{children:"Offizielle Website:"})," ",H.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:e.website})]})]})]}):null:null}function ijt(){const{routePoints:t}=M0(),[e,i]=U.useState(null),[r,n]=U.useState({points:[],photos:{}});return U.useEffect(()=>{const s=t.map(o=>o.name);n(o=>{const a=Object.fromEntries(Object.entries(o.photos).filter(([l])=>s.includes(l)));return{points:t.map(l=>({city:l.name,country:l.country})),photos:a}}),e&&!s.includes(e.city)&&i(null)},[t]),H.jsxs("div",{className:"flex flex-col gap-8 p-6 bg-gray-900 text-white min-h-screen",children:[H.jsx("div",{className:"bg-gray-800 p-4 rounded-2xl shadow-lg",children:H.jsx(ozt,{points:r.points,formData:r,setFormData:n,onCitySelect:i})}),e&&H.jsx("div",{className:"bg-gray-800 p-4 rounded-2xl shadow-lg",children:H.jsx(tjt,{city:e})}),e&&H.jsx("div",{className:"bg-gray-800 p-4 rounded-2xl shadow-lg",children:H.jsx(ejt,{city:e})})]})}function rjt(){const{photos:t}=M0(),[e,i]=U.useState(null),n=Object.keys(t||{}).filter(s=>s!=="uploads");return H.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex flex-col gap-8",children:[H.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[H.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Meine Fotogalerie"}),n.length===0&&H.jsx("div",{className:"border border-gray-800 rounded-lg p-6 bg-gray-800 text-gray-300",children:"Keine Fotos vorhanden."}),H.jsx("div",{className:"flex flex-col gap-6",children:n.map((s,o)=>{var a;return H.jsxs("section",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 shadow-sm","aria-labelledby":`city-${o}`,children:[H.jsx("header",{className:"flex items-center justify-between mb-3",children:H.jsxs("div",{children:[H.jsx("h2",{id:`city-${o}`,className:"text-xl font-semibold",children:s}),H.jsxs("p",{className:"text-sm text-gray-400",children:[((a=t[s])==null?void 0:a.length)||0," Foto",(t[s]||[]).length!==1?"s":""]})]})}),Array.isArray(t[s])&&t[s].length>0?H.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:t[s].map((l,c)=>H.jsxs("button",{onClick:()=>i(l),className:"relative overflow-hidden rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-500","aria-label":`Foto ${c+1} von ${s}`,children:[H.jsx("img",{src:l,alt:`Foto von ${s} ${c+1}`,className:"w-full h-36 object-cover transform hover:scale-105 transition-transform duration-150",loading:"lazy"}),H.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 hover:opacity-100 transition-opacity"})]},`${s}-${c}`))}):H.jsx("p",{className:"text-gray-400",children:"Keine Fotos fr diese Stadt."})]},s+o)})}),t.uploads&&t.uploads.length>0&&H.jsxs("section",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mt-6",children:[H.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Hochgeladene Fotos"}),H.jsx("div",{className:"flex flex-wrap gap-3",children:t.uploads.map((s,o)=>H.jsx("button",{onClick:()=>i(s),className:"w-28 h-28 overflow-hidden rounded-md focus:outline-none focus:ring-4 focus:ring-blue-500","aria-label":`Hochgeladenes Foto ${o+1}`,children:H.jsx("img",{src:s,alt:`Hochgeladenes Foto ${o+1}`,className:"w-full h-full object-cover",loading:"lazy"})},`upload-${o}`))})]})]}),H.jsx("div",{className:"max-w-6xl mx-auto w-full flex justify-between items-center text-sm text-gray-400",children:H.jsx("span",{children:"Tippe ein Bild an, um es gro anzusehen."})}),e&&H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 p-4",role:"dialog","aria-modal":"true",children:H.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh]",children:[H.jsx("button",{onClick:()=>i(null),className:"absolute top-2 right-2 z-20 bg-black/50 text-white rounded-full p-2 hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Schlieen",children:""}),H.jsx("img",{src:e,alt:"Vollbild Foto",className:"max-h-[85vh] max-w-[85vw] object-contain rounded"})]})})]})}function njt(){const{routePoints:t}=M0(),[e,i]=U.useState({points:[],photos:{}});return U.useEffect(()=>{const r=t.map(n=>n.name);i(n=>{const s=Object.fromEntries(Object.entries(n.photos).filter(([o])=>r.includes(o)));return{points:t.map(o=>({city:o.name,country:o.country})),photos:s}})},[t]),H.jsx(rjt,{points:e.points,formData:e,setFormData:i})}const Rbe=({children:t,roles:e=[]})=>{const{user:i,isRefreshing:r}=U.useContext(gy);return r?H.jsx("div",{className:"flex items-center justify-center h-screen",children:H.jsx("span",{className:"loading loading-spinner loading-lg"})}):i?e.length>0&&!e.includes(i.role)?H.jsx(poe,{to:"/",replace:!0}):t||H.jsx(uwe,{}):H.jsx(poe,{to:"/login",replace:!0})};function sjt(){return H.jsxs(mze,{children:[H.jsxs(Vs,{path:"/",element:H.jsx(gje,{}),children:[H.jsx(Vs,{index:!0,element:H.jsx(_$t,{})}),H.jsx(Vs,{path:"/travelplannerpage",element:H.jsx(C$t,{})}),H.jsx(Vs,{path:"/travelstepperpage",element:H.jsx(I$t,{})}),H.jsx(Vs,{path:"/photolibrary",element:H.jsx(ijt,{})}),H.jsx(Vs,{path:"/generalphotogallery",element:H.jsx(njt,{})}),H.jsx(Vs,{path:"/travelstable",element:H.jsx(L$t,{})}),H.jsx(Vs,{path:"/signup",element:H.jsx(A$t,{})}),H.jsx(Vs,{path:"/login",element:H.jsx(P$t,{})}),H.jsx(Vs,{path:"/arcgispage",element:H.jsx(k$t,{})})]}),H.jsxs(Vs,{element:H.jsx(Rbe,{}),children:[H.jsx(Vs,{path:"/travelform",element:H.jsx(OLe,{})}),H.jsx(Vs,{path:"/travelplanner",element:H.jsx(hU,{})}),H.jsx(Vs,{path:"/travelcities",element:H.jsx(Ste,{})})]}),H.jsx(Vs,{element:H.jsx(Rbe,{roles:["admin","superadmin"]}),children:H.jsx(Vs,{path:"/dashboard",element:H.jsx(szt,{})})}),H.jsx(Vs,{path:"*",element:H.jsx("h1",{children:"Page not found"})})]})}const ojt=SFe.createRoot(document.getElementById("root"));ojt.render(H.jsx(U.StrictMode,{children:H.jsx(fje,{children:H.jsx(Fze,{children:H.jsx(Zze,{children:H.jsx(Yze,{children:H.jsx(Yk,{children:H.jsx(sjt,{})})})})})})}));export{an as $,d as A,g as B,Ue as C,hAe as D,VQ as E,G as F,fk as G,Ut as H,qn as I,Ge as J,Ok as K,p4 as L,f4 as M,ni as N,Yl as O,ofe as P,eft as Q,IR as R,YS as S,Nr as T,$0 as U,x4 as V,EBe as W,Oe as X,Pe as Y,Xi as Z,Re as _,j6t as a,Vw as a$,h_ as a0,Crt as a1,s9t as a2,ti as a3,a9t as a4,Ci as a5,FTe as a6,io as a7,YT as a8,Boe as a9,IVe as aA,UBt as aB,ak as aC,SN as aD,I_ as aE,HA as aF,Wr as aG,Fh as aH,qJ as aI,gc as aJ,gr as aK,uk as aL,ef as aM,zT as aN,Ln as aO,h6t as aP,c6t as aQ,u6t as aR,qp as aS,en as aT,or as aU,ka as aV,UA as aW,iR as aX,MX as aY,o$e as aZ,Bn as a_,Ce as aa,q6t as ab,G6t as ac,Hd as ad,Rt as ae,nhe as af,V5 as ag,g7t as ah,npe as ai,rpe as aj,Ea as ak,R9t as al,Hrt as am,Hwt as an,nke as ao,Vue as ap,Bue as aq,Uue as ar,jue as as,qA as at,IF as au,zn as av,To as aw,b2 as ax,wce as ay,g8t as az,ks as b,dt as b$,gVe as b0,ge as b1,JPe as b2,i1 as b3,aY as b4,u4t as b5,eMe as b6,cZe as b7,a_ as b8,oc as b9,UKe as bA,v0 as bB,Kvt as bC,KEe as bD,oy as bE,Zs as bF,ht as bG,Rht as bH,Fm as bI,Lht as bJ,Ms as bK,bt as bL,eBe as bM,vUt as bN,wUt as bO,bUt as bP,_Ut as bQ,xUt as bR,SUt as bS,sa as bT,KG as bU,wu as bV,EBt as bW,n4 as bX,Et as bY,SGe as bZ,Bt as b_,WT as ba,r4t as bb,Rr as bc,Dw as bd,V6t as be,k_ as bf,M1e as bg,aHt as bh,Xa as bi,je as bj,Xd as bk,mo as bl,iqe as bm,FJ as bn,ou as bo,gt as bp,AT as bq,It as br,xGe as bs,CM as bt,yu as bu,VKe as bv,Jvt as bw,B_ as bx,n6t as by,NWe as bz,Bot as c,Rut as c$,Hp as c0,UT as c1,th as c2,rXe as c3,Wi as c4,Zr as c5,Je as c6,rn as c7,et as c8,Zp as c9,QBt as cA,b8t as cB,sy as cC,H2e as cD,Kd as cE,Sa as cF,bs as cG,jI as cH,dG as cI,Sjt as cJ,Ort as cK,Bwe as cL,ut as cM,Y7t as cN,_j as cO,Poe as cP,ra as cQ,ck as cR,$ut as cS,Gat as cT,xGt as cU,HD as cV,HJ as cW,Vn as cX,Z6t as cY,uqt as cZ,eit as c_,tpt as ca,Ca as cb,$o as cc,Lr as cd,sr as ce,rs as cf,_c as cg,UG as ch,Gr as ci,XD as cj,eN as ck,jG as cl,VG as cm,nMe as cn,wt as co,sP as cp,Xr as cq,z5 as cr,cnt as cs,is as ct,U3 as cu,fi as cv,le as cw,Ek as cx,xH as cy,YUt as cz,UW as d,Ze as d$,N4 as d0,Dqe as d1,jh as d2,EUt as d3,oUt as d4,Oct as d5,Lct as d6,Rct as d7,b0 as d8,sqe as d9,Sdt as dA,cdt as dB,ddt as dC,i4 as dD,$tt as dE,e1e as dF,NT as dG,QZe as dH,aqe as dI,lqe as dJ,cqe as dK,Xtt as dL,qpt as dM,lHt as dN,TIe as dO,fl as dP,Djt as dQ,s4t as dR,r1 as dS,eat as dT,Rpt as dU,Aq as dV,_vt as dW,li as dX,_n as dY,Agt as dZ,gP as d_,HT as da,rqe as db,eYe as dc,pEe as dd,fYe as de,SGt as df,set as dg,FWe as dh,O_ as di,aqt as dj,CBt as dk,D_ as dl,Oa as dm,hdt as dn,Cdt as dp,B$e as dq,xdt as dr,jtt as ds,lit as dt,EW as du,eAe as dv,vdt as dw,tAe as dx,QIe as dy,Idt as dz,Sm as e,O6e as e$,hPe as e0,vA as e1,mPe as e2,uWt as e3,e$ as e4,eYt as e5,tYt as e6,Pgt as e7,ebt as e8,DJe as e9,uP as eA,xQ as eB,_Ke as eC,MBt as eD,Wp as eE,Kj as eF,jT as eG,aKe as eH,ZEe as eI,LKe as eJ,ABt as eK,uc as eL,IBt as eM,YEe as eN,hQ as eO,G4t as eP,G1e as eQ,wX as eR,m8e as eS,kj as eT,R$e as eU,U$e as eV,Ctt as eW,F$e as eX,j$e as eY,G_ as eZ,vc as e_,o8t as ea,_8t as eb,w8e as ec,QZt as ed,Hqt as ee,zq as ef,qqt as eg,lk as eh,Wh as ei,y8t as ej,LVe as ek,Ad as el,F4t as em,Kwe as en,Ywe as eo,S8e as ep,Aj as eq,Pj as er,xX as es,SX as et,x8e as eu,xk as ev,KA as ew,WX as ex,W6t as ey,X1e as ez,tt as f,mt as f$,M4t as f0,x1e as f1,Op as f2,pX as f3,_0 as f4,lUt as f5,KVe as f6,L$e as f7,S0 as f8,Htt as f9,Yat as fA,wlt as fB,Zat as fC,ny as fD,Up as fE,Ott as fF,Ltt as fG,rit as fH,pZe as fI,Ylt as fJ,Dt as fK,jA as fL,Nm as fM,L_ as fN,pl as fO,$pt as fP,Jc as fQ,Od as fR,Cp as fS,eWt as fT,vGt as fU,QD as fV,Jj as fW,Lpt as fX,c5 as fY,ri as fZ,Hi as f_,qZe as fa,Mtt as fb,z$e as fc,iit as fd,U4t as fe,n5 as ff,xj as fg,Sj as fh,m_e as fi,$Ut as fj,TGt as fk,ICe as fl,Spt as fm,hpt as fn,ypt as fo,cAe as fp,T4 as fq,Br as fr,Jlt as fs,Zlt as ft,Hr as fu,Un as fv,Or as fw,Go as fx,Jo as fy,Wlt as fz,BQ as g,ute as g$,jUt as g0,Oqe as g1,AVe as g2,ZUt as g3,w0 as g4,l0 as g5,Dd as g6,Oae as g7,So as g8,BA as g9,Bjt as gA,oqt as gB,tUt as gC,zBe as gD,hde as gE,Aht as gF,Qt as gG,REe as gH,pBt as gI,xqt as gJ,fBt as gK,Sk as gL,Js as gM,Eqt as gN,JN as gO,dBt as gP,$qt as gQ,mBt as gR,Ym as gS,L4t as gT,R4t as gU,fUt as gV,mUt as gW,Gme as gX,cte as gY,rU as gZ,Hk as g_,Ai as ga,ot as gb,Tee as gc,KHt as gd,PY as ge,Qo as gf,Su as gg,vl as gh,ZHt as gi,wi as gj,xc as gk,Sc as gl,Fk as gm,hi as gn,Ye as go,Ec as gp,kX as gq,O4t as gr,pP as gs,hte as gt,jn as gu,ns as gv,r0 as gw,c_ as gx,Vjt as gy,Km as gz,GBe as h,dEe as h$,Bm as h0,OSt as h1,dT as h2,j4 as h3,WHt as h4,iP as h5,bn as h6,QTe as h7,Ko as h8,Bi as h9,f8t as hA,i8t as hB,UUt as hC,Z_e as hD,I8 as hE,t1 as hF,DA as hG,Nlt as hH,ai as hI,RT as hJ,PT as hK,e4t as hL,to as hM,cWt as hN,Ov as hO,tft as hP,Wtt as hQ,PUt as hR,Bet as hS,q4t as hT,Cet as hU,Eae as hV,K1e as hW,J1e as hX,wn as hY,B4t as hZ,FZe as h_,vu as ha,ul as hb,LUt as hc,YE as hd,p2e as he,CQ as hf,_lt as hg,Jtt as hh,HE as hi,v_e as hj,eA as hk,nUe as hl,M4e as hm,_Wt as hn,ret as ho,I9t as hp,Pr as hq,B3 as hr,gq as hs,ZS as ht,Oj as hu,KUt as hv,n1 as hw,kWt as hx,Bee as hy,sbt as hz,Uot as i,Klt as i$,Ftt as i0,fEe as i1,v8e as i2,dqe as i3,we as i4,VZe as i5,hqe as i6,r4 as i7,h2e as i8,xjt as i9,ect as iA,Cpt as iB,A4 as iC,tfe as iD,Ir as iE,MZ as iF,I4 as iG,Kdt as iH,Dk as iI,Hlt as iJ,zd as iK,jYe as iL,FYe as iM,kYe as iN,Pq as iO,Ra as iP,w2e as iQ,R4e as iR,Rae as iS,Rd as iT,OBe as iU,Vp as iV,Lh as iW,hP as iX,see as iY,Qlt as iZ,Xlt as i_,F3 as ia,Pjt as ib,Ztt as ic,Dtt as id,zhe as ie,Bqe as ig,$4t as ih,wa as ii,qBe as ij,gX as ik,WBe as il,ZBe as im,R_ as io,Cj as ip,l1 as iq,mpt as ir,klt as is,cpt as it,Flt as iu,Mpt as iv,pce as iw,jEe as ix,Npt as iy,Out as iz,P_ as j,_$e as j$,F8e as j0,C8e as j1,axe as j2,vSt as j3,IAe as j4,fF as j5,_Oe as j6,fye as j7,dte as j8,iU as j9,OW as jA,n7t as jB,iT as jC,i7t as jD,p_ as jE,r7t as jF,ah as jG,$N as jH,zue as jI,pVt as jJ,x$e as jK,OQ as jL,yW as jM,q_ as jN,Let as jO,S$e as jP,che as jQ,Due as jR,vUe as jS,_u as jT,UE as jU,lX as jV,P1e as jW,zUt as jX,Dn as jY,Aet as jZ,ket as j_,UQ as ja,t5 as jb,YBt as jc,ZBt as jd,yJe as je,yxe as jf,Cr as jg,Mqt as jh,BGt as ji,nBt as jj,E5 as jk,Q6t as jl,dye as jm,DR as jn,qEt as jo,t4t as jp,int as jq,B5 as jr,U5 as js,Q9t as jt,hu as ju,Hue as jv,j5 as jw,Gue as jx,AW as jy,rMe as jz,Lt as k,mr as k$,k4t as k0,lA as k1,PW as k2,m$e as k3,aQ as k4,W as k5,r_e as k6,oqe as k7,nqe as k8,Ptt as k9,W7t as kA,wIe as kB,JJ as kC,tf as kD,Xx as kE,Ts as kF,tHt as kG,qlt as kH,CS as kI,dpt as kJ,Wl as kK,mh as kL,tWt as kM,LT as kN,Qn as kO,br as kP,hc as kQ,wWt as kR,bWt as kS,iPe as kT,OV as kU,ga as kV,wut as kW,Eut as kX,iIe as kY,L4 as kZ,J5 as k_,ait as ka,cit as kb,jet as kc,F4 as kd,Tdt as ke,c2e as kf,b8e as kg,$8e as kh,S5 as ki,ktt as kj,N$e as kk,AD as kl,u1 as km,Btt as kn,Ys as ko,kw as kp,jUe as kq,Vat as kr,tht as ks,Rlt as kt,cut as ku,pIe as kv,but as kw,p1e as kx,w1e as ky,rCe as kz,Xj as l,aWt as l$,Iut as l0,aut as l1,lut as l2,hut as l3,dut as l4,Sut as l5,put as l6,fut as l7,mut as l8,yut as l9,QEt as lA,QHt as lB,K2e as lC,kVe as lD,OVe as lE,Nue as lF,x9t as lG,_9t as lH,w9t as lI,b9t as lJ,E9t as lK,S9t as lL,v9t as lM,g9t as lN,Ret as lO,Uoe as lP,y9t as lQ,S4t as lR,$X as lS,oVe as lT,Dut as lU,jJ as lV,Rjt as lW,UJ as lX,Njt as lY,K6e as lZ,HBe as l_,gut as la,vut as lb,qs as lc,tUe as ld,$a as le,f2e as lf,fs as lg,cUt as lh,F2e as li,cBe as lj,gee as lk,p2t as ll,I7t as lm,YHt as ln,SSt as lo,Ojt as lp,Ljt as lq,kjt as lr,$Be as ls,vy as lt,Yj as lu,qwe as lv,XEt as lw,vd as lx,Gjt as ly,tce as lz,uUt as m,kKe as m$,bQ as m0,t8t as m1,XBt as m2,hUe as m3,h4t as m4,cqt as m5,lqt as m6,yIe as m7,fIe as m8,rtt as m9,EUe as mA,SUe as mB,VUt as mC,zdt as mD,$jt as mE,abt as mF,Ti as mG,pUt as mH,rk as mI,Co as mJ,S4 as mK,ce as mL,V_ as mM,h0 as mN,P7t as mO,ml as mP,v7t as mQ,rst as mR,cst as mS,A4e as mT,iUt as mU,d1e as mV,Mj as mW,aUt as mX,Lyt as mY,Tfe as mZ,c0 as m_,ntt as ma,Dfe as mb,D$e as mc,kQe as md,qoe as me,xWt as mf,yv as mg,z6t as mh,v4t as mi,yVe as mj,mxe as mk,G8t as ml,Zwe as mm,rVe as mn,uVe as mo,gk as mp,OUt as mq,_F as mr,pae as ms,NJ as mt,sWe as mu,qUt as mv,ZJ as mw,g4t as mx,y4t as my,iZe as mz,yCe as n,_nt as n$,OKe as n0,XZt as n1,Lxe as n2,vxe as n3,FUt as n4,lTe as n5,RQ as n6,m2e as n7,h4 as n8,Y4t as n9,fW as nA,WTe as nB,Ik as nC,Cqt as nD,kh as nE,KI as nF,xut as nG,gBt as nH,Put as nI,sqt as nJ,nqt as nK,mA as nL,Hv as nM,JA as nN,Tpt as nO,hUt as nP,hqt as nQ,blt as nR,X5 as nS,HZt as nT,ett as nU,C9t as nV,Vrt as nW,she as nX,p9t as nY,ent as nZ,qv as n_,Z4t as na,XTe as nb,KTe as nc,cQe as nd,hQe as ne,bb as nf,Wwe as ng,Mjt as nh,que as ni,s7t as nj,ehe as nk,o7t as nl,Vi as nm,wZt as nn,Ip as no,n2 as np,hZt as nq,uZt as nr,w4t as ns,d4 as nt,Jm as nu,Lp as nv,Xo as nw,TI as nx,z9t as ny,TQ as nz,tGt as o,wJe as o$,CYt as o0,Snt as o1,Ent as o2,Mp as o3,IYt as o4,XGt as o5,XKe as o6,HZe as o7,DZe as o8,zZe as o9,S1e as oA,fX as oB,eUt as oC,Q1e as oD,mae as oE,L1e as oF,Wnt as oG,vqt as oH,o1 as oI,Zd as oJ,Eht as oK,H4t as oL,Pet as oM,z4t as oN,Int as oO,k1e as oP,VE as oQ,FT as oR,rUt as oS,Lq as oT,JBt as oU,KBt as oV,hX as oW,tYe as oX,XZe as oY,ztt as oZ,JZe as o_,wC as oa,Ma as ob,hm as oc,gv as od,Is as oe,jJe as of,utt as og,Fdt as oh,P2 as oi,jdt as oj,Ak as ok,yQe as ol,l2e as om,Ddt as on,Udt as oo,Fqe as op,RUt as oq,mVe as or,_Ve as os,Tk as ot,$k as ou,Mk as ov,BZe as ow,jZe as ox,UZe as oy,Hwe as oz,Gp as p,ZZt as p$,q2e as p0,dWt as p1,Z8t as p2,W8t as p3,OQe as p4,e_t as p5,EZt as p6,DQ as p7,VZt as p8,Jct as p9,Oet as pA,V4t as pB,RZt as pC,Nj as pD,Dj as pE,NZt as pF,F5 as pG,LZt as pH,_xe as pI,KZt as pJ,Grt as pK,A9t as pL,P9t as pM,YZt as pN,ea as pO,GGt as pP,qGt as pQ,VGt as pR,Yee as pS,Net as pT,BZt as pU,hWt as pV,h1 as pW,Sgt as pX,RM as pY,wh as pZ,H6t as p_,Kct as pa,iee as pb,dct as pc,nWt as pd,dUt as pe,cQ as pf,ym as pg,KE as ph,vlt as pi,Olt as pj,Llt as pk,Dlt as pl,rpt as pm,fpt as pn,nQ as po,vx as pp,$4e as pq,Wue as pr,av as ps,Hnt as pt,X9t as pu,Fue as pv,tnt as pw,Xue as px,Jue as py,Oh as pz,nUt as q,kae as q$,WZt as q0,qZt as q1,GZt as q2,FZt as q3,Wee as q4,JR as q5,wke as q6,zZt as q7,DZt as q8,Ta as q9,Ps as qA,y4 as qB,p$e as qC,y$e as qD,het as qE,fVt as qF,wet as qG,mVt as qH,XT as qI,Ur as qJ,lct as qK,act as qL,Si as qM,uv as qN,cvt as qO,$ct as qP,uvt as qQ,QCe as qR,vh as qS,l2 as qT,Sh as qU,kZe as qV,oBt as qW,V4 as qX,xo as qY,cl as qZ,Ws as q_,I0t as qa,UZt as qb,ubt as qc,NWt as qd,kGt as qe,TWe as qf,oTe as qg,OGt as qh,P8t as qi,k8t as qj,O8t as qk,pu as ql,wte as qm,$Wt as qn,MWt as qo,Bw as qp,Rv as qq,TWt as qr,BX as qs,n4t as qt,EWt as qu,SWt as qv,ov as qw,Ijt as qx,f$e as qy,Mot as qz,ve as r,bVe as r$,$Je as r0,PJe as r1,w8t as r2,nbt as r3,bUe as r4,qjt as r5,KPe as r6,QPe as r7,d1 as r8,x0 as r9,_Qe as rA,DUt as rB,SZe as rC,F6t as rD,MUt as rE,Dm as rF,xa as rG,U6t as rH,jjt as rI,NQe as rJ,Jd as rK,uhe as rL,hMe as rM,V9t as rN,G9t as rO,q9t as rP,H9t as rQ,k9t as rR,L9t as rS,Y6e as rT,rP as rU,O9t as rV,xnt as rW,D8e as rX,Rp as rY,WQe as rZ,$Q as r_,nX as ra,gQe as rb,LQe as rc,q8t as rd,aV as re,aBt as rf,T5 as rg,PQe as rh,tit as ri,bQe as rj,e5 as rk,TUt as rl,Dht as rm,yBt as rn,oht as ro,Ght as rp,Oqt as rq,ay as rr,ly as rs,xu as rt,o0 as ru,$wt as rv,W9t as rw,cxe as rx,AQe as ry,wQe as rz,ae as s,vBt as s$,NUt as s0,tP as s1,C_e as s2,Yce as s3,oQe as s4,aQe as s5,Owt as s6,bme as s7,kwt as s8,pbt as s9,b4 as sA,nst as sB,X6t as sC,As as sD,C4 as sE,xfe as sF,Gqt as sG,d9t as sH,KY as sI,MZt as sJ,ew as sK,fHt as sL,Clt as sM,eqt as sN,$Bt as sO,bBt as sP,xBt as sQ,wBt as sR,SBt as sS,_Bt as sT,TBt as sU,La as sV,Vq as sW,VYe as sX,m7t as sY,tqt as sZ,Loe as s_,Lj as sa,jZt as sb,nF as sc,tMe as sd,zqt as se,Krt as sf,Yrt as sg,X$e as sh,pke as si,CZt as sj,IZt as sk,Q$e as sl,spe as sm,Vee as sn,Pk as so,u0 as sp,HG as sq,s6t as sr,CUt as ss,H8t as st,gUt as su,yUt as sv,N8e as sw,s2 as sx,zTe as sy,wUe as sz,BN as t,BE as t$,q8e as t0,G8e as t1,IUt as t2,GUe as t3,W_e as t4,jqt as t5,lY as t6,Uqt as t7,Rqt as t8,Gn as t9,rdt as tA,SZt as tB,D9t as tC,TZt as tD,Lqt as tE,Kwt as tF,Ywt as tG,cke as tH,lnt as tI,k_t as tJ,N9t as tK,ahe as tL,f9t as tM,m9t as tN,ibt as tO,X0t as tP,j9t as tQ,U9t as tR,Z9t as tS,Y9t as tT,T9t as tU,K9t as tV,J9t as tW,Brt as tX,Jrt as tY,qrt as tZ,SMe as t_,ndt as ta,rPe as tb,kqt as tc,UIe as td,D4 as te,Fqt as tf,_Zt as tg,Dqt as th,zt as ti,odt as tj,tdt as tk,Nqt as tl,aF as tm,fA as tn,oF as to,GIe as tp,VIe as tq,tbt as tr,Xht as ts,Jht as tt,fY as tu,F9t as tv,edt as tw,Nk as tx,Zrt as ty,xZt as tz,Z7t as u,I4e as u$,B9t as u0,krt as u1,sUt as u2,Det as u3,qfe as u4,a0t as u5,GKe as u6,E7t as u7,T7t as u8,hD as u9,t6t as uA,zht as uB,Frt as uC,exe as uD,HUt as uE,xC as uF,wGt as uG,h9e as uH,ZGt as uI,WGt as uJ,Rue as uK,rWt as uL,y7t as uM,p7t as uN,f7t as uO,d7t as uP,h7t as uQ,bnt as uR,uMe as uS,M9t as uT,$9t as uU,ynt as uV,GV as uW,jwt as uX,h9t as uY,d2 as uZ,KBe as u_,pQ as ua,WKe as ub,MMe as uc,XA as ud,eP as ue,tT as uf,HKe as ug,Fjt as uh,GCe as ui,eJe as uj,tJe as uk,gQ as ul,JMe as um,Dye as un,WUt as uo,X8t as up,aYe as uq,JTe as ur,n2e as us,S_e as ut,oYe as uu,mqe as uv,TQe as uw,oWt as ux,sWt as uy,Uyt as uz,_Z as v,oIe as v$,oit as v0,e7t as v1,t7t as v2,d8t as v3,p8t as v4,Uet as v5,gYe as v6,yYe as v7,r2e as v8,rAe as v9,BUt as vA,m8t as vB,rT as vC,pWe as vD,ctt as vE,I$e as vF,b4t as vG,wR as vH,Dle as vI,fh as vJ,HGt as vK,Ks as vL,XAe as vM,lWt as vN,rY as vO,AYt as vP,oVt as vQ,x5 as vR,l8t as vS,LZe as vT,e8t as vU,Jgt as vV,Pqt as vW,ePe as vX,QS as vY,vJe as vZ,GBt as v_,HYe as va,sMe as vb,Fd as vc,dVt as vd,wqt as ve,_qt as vf,Sqt as vg,tF as vh,rYe as vi,mYe as vj,XIe as vk,eBt as vl,EGt as vm,qXe as vn,sVt as vo,Tct as vp,v8t as vq,s8t as vr,c8t as vs,a8t as vt,zjt as vu,M8t as vv,$8t as vw,Ajt as vx,tWe as vy,r8t as vz,yde as w,PPe as w0,kPe as w1,iut as w2,Tjt as w3,T4e as w4,Ejt as w5,n8t as w6,a7t as w7,CQe as w8,j4t as w9,Ace as wA,vWt as wB,iYe as wC,d6t as wD,f6t as wE,b7t as wF,c1 as wG,QGt as wH,nHt as wI,HHt as wJ,Wmt as wK,Mee as wL,iYt as wM,J_t as wN,nYt as wO,vYt as wP,bYt as wQ,wYt as wR,_Yt as wS,xYt as wT,SYt as wU,EYt as wV,TYt as wW,$Yt as wX,MYt as wY,pQe as wa,gJe as wb,PWt as wc,d4t as wd,Fj as we,fWt as wf,NY as wg,qj as wh,rBt as wi,mWt as wj,yWt as wk,u8t as wl,iBt as wm,kce as wn,tBt as wo,GUt as wp,Pce as wq,qX as wr,n_e as ws,Ujt as wt,h8t as wu,ZZe as wv,GZe as ww,gWt as wx,pWt as wy,G4 as wz,B6t as x,gde as y,zWe as z};
